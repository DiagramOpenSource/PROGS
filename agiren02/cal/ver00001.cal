|FICHEROS;
     rem02000 #0;
     rem01000 #1;
     rem01001 #2;
     rem01002 #3;
     rem01003 #4;
     rem01037 #537;
     reacceso #5;
     rem99999 #6;
     rem00007 #7;
     rem00008 #8;
     rem00044 #44;
     rem00045 #45;
     rem00100 #100;
     rem00101 #101;
     retabla1 #401;
     retabla6 #406;
     retabla7 #407;
     reeleact #408;
|FIN;

|VARIABLES;
     &enError = 0;

      nSwHay  = 0;
      aAlfa   = "";
|FIN;

|| ************************************************************************
|| PROCESOS DE CAMBIO DE VERSION
|| ************************************************************************

|PROCESO MiraPatrones;
     nSwHay = 0;
     |ABRE #401;
     |LEE 040#401p;
     |SI FSalida ! 0;  |O #401#25 ! 22838.46;
         |CIERRA #401;
         |DELINDEX #401;
         |DELINDEX #408;
         nSwHay = 1;
     |SINO;
         |CIERRA #401;
     |FINSI;

     |ABRE #406;
     #406#0 = 2003;
     |LEE 040#406=;
     |SI FSalida ! 0;
         |CIERRA #406;
         |DELINDEX #406;
         |DELINDEX #407;
         nSwHay = 1;
     |SINO;
         |CIERRA #406;
     |FINSI;

     |ABRE #0;
     |LEE 040#0p;
     |SI FSalida ! 0;  |O #0#4 ] 950;
         |CIERRA #0;
         |DELINDEX #0;
         nSwHay = 1;
     |SINO;
         #0#0 = 2;
         #0#1 = 20;
         |SI FSalida ! 0;
             |CIERRA #0;
             |DELINDEX #0;
             nSwHay = 1;
         |SINO;
             |CIERRA #0;
         |FINSI;
     |FINSI;

     |ABRE #1;
     #1#0 = 27;
     #1#1 = "103";
     |LEE 040#1=;
     |SI FSalida = 0;
         |CIERRA #1;
         |DELINDEX #1;
         nSwHay = 1;
     |SINO;
         |CIERRA #1;
     |FINSI;

     |ABRE #8;
     #8#0 = 4;
     #8#1 = 5;
     |LEE 040#8=;
     |SI FSalida = 0;
         |ABRE #7;  |CIERRA #7;  |DELINDEX #7;
         |CIERRA #8;
         |DELINDEX #8;
         nSwHay = 1;
     |SINO;
         |CIERRA #8;
     |FINSI;

     |SI nSwHay = 1;
         |MENAV "0000 Han cambiado ficheros patrones, por favor instalelos.";
         |SUB_EJECUTA_NP "rez00001";
     |FINSI;

     |ABRE #401;
     |LEE 040#401p;
     |SI FSalida ! 0;  |O #401#25 ! 22838.46;
         enError = 1;
         |CIERRA #401;
         |ACABA;
     |FINSI;
     |CIERRA #401;

     |ABRE #406;
     #406#0 = 2003;
     |LEE 040#406=;
     |SI FSalida ! 0;
         enError = 1;
         |CIERRA #406;
         |ACABA;
     |FINSI;
     |CIERRA #406;

     |ABRE #0;
     |LEE 040#0p;
     |SI FSalida ! 0;  |O #0#4 ] 950;
         enError = 1;
         |CIERRA #0;
         |ACABA;
     |SINO;
         #0#0 = 2;
         #0#1 = 20;
         |SI FSalida ! 0;
             enError = 1;
             |CIERRA #0;
             |ACABA;
         |FINSI;
     |FINSI;
     |CIERRA #0;

     |ABRE #1;
     #1#0 = 27;
     #1#1 = "103";
     |LEE 040#1=;
     |SI FSalida = 0;
         enError = 1;
         |CIERRA #1;
         |ACABA;
     |FINSI;
     |CIERRA #1;

     |ABRE #8;
     #8#0 = 4;
     #8#1 = 5;
     |LEE 040#8=;
     |SI FSalida = 0;
         enError = 1;
         |CIERRA #8;
         |ACABA;
     |FINSI;
     |CIERRA #8;
|FPRC;

|PROCESO rem00045;
     #0#7 = #45#11;
     #0#8 = #45#13;
     |LEE 040#0=;
     |SI FSalida = 0;
         #45#11 = #0#0;
         #45#12 = #0#2;
         #45#13 = #0#1;
         #45#14 = #0#3;
         #45#15 = #0#4;
         |GRABA 020#45a;
     |SINO;
         |BORRA 020#45a;
     |FINSI;
     |LIBERA #45;
|FPRC;

|DEFBUCLE rem00045;
     #45#1;
     ;
     00001, 00;
     99999, 99;
     be;
     NULL, rem00045;
|FIN;

|PROCESO CambioDeducciones;
     |ABRE #45;
     |LEE 040#45p;
     |SI FSalida = 0;
         |SI #45#15 ] 950;
             |ABRE #0;
             |SELECT #3#0;
             |BUCLE rem00045;
             |CIERRA #0;
         |FINSI;
     |FINSI;
     |CIERRA #45;
|FPRC;

|PROCESO reacceso;
     #5#12 = " ";
     |GRABA 020#5a;
     |LIBERA #5;
|FPRC;

|DEFBUCLE reacceso;
     #5#1;
     ;
     00001;
     99999;
     be;
     NULL, reacceso;
|FIN;

|PROCESO rem01002;
     nSwHay = 1;
     |ERROR10;
|FPRC;

|DEFBUCLE rem01002;
     #3#2;
     ;
     27, "103", 00001, 00, "          ";
     27, "103", 99999, 99, "zzzzzzzzzz";
     ;
     NULL, rem01002;
|FIN;

|PROCESO rem99999;
     |BORRA 020#6a;
     |LIBERA #6;
|FPRC;

|DEFBUCLE rem99999;
     #6#1;
     ;
     00001, "rem01001", "  ";
     99999, "rem01001", "  ";
     be;
     NULL, rem99999;
|FIN;

|PROCESO CambioLiquidacion;
     nSwHay = 0;
     |BUCLE rem01002;
     |SI nSwHay = 1;
         |BUCLE reacceso;
         |BUCLE rem99999;
         |ABRE #2;  |CIERRA #2;  |DELINDEX #2;
         |ABRE #3;  |CIERRA #3;  |DELINDEX #3;
         |ABRE #4;  |CIERRA #4;  |DELINDEX #4;
         |DELINDEX #537;
         |ABRE #537;  |CIERRA #537;  |DELINDEX #537;
     |FINSI;
|FPRC;

|PROCESO rem00044;
     |SI #44#11 = 4;  |Y #44#13 = 5;   #44#13 = 150;  |FINSI;
     |SI #44#11 = 4;  |Y #44#13 = 12;  #44#13 = 151;  |FINSI;
     |SI #44#11 = 4;  |Y #44#13 = 15;  #44#13 = 153;  |FINSI;
     |SI #44#11 = 4;  |Y #44#13 = 26;  #44#13 = 155;  |FINSI;
     |SI #44#11 = 4;  |Y #44#13 = 31;  #44#13 = 152;  |FINSI;

     |SI #44#11 = 8;  |Y #44#13 = 1;   #44#13 = 163;  |FINSI;
     |SI #44#11 = 8;  |Y #44#13 = 8;   #44#13 = 164;  |FINSI;
     |SI #44#11 = 8;  |Y #44#13 = 32;  #44#13 = 162;  |FINSI;
     |SI #44#11 = 8;  |Y #44#13 = 27;  #44#13 = 165;  |FINSI;

     |SI #44#11 = 9;  |Y #44#13 = 2;   #44#13 = 166;  |FINSI;
     |SI #44#11 = 9;  |Y #44#13 = 34;  #44#13 = 167;  |FINSI;

     |SI #44#11 = 11; |Y #44#13 = 4;   #44#13 = 172;  |FINSI;
     |SI #44#11 = 11; |Y #44#13 = 32;  #44#13 = 173;  |FINSI;
     |SI #44#11 = 11; |Y #44#13 = 35;  #44#13 = 174;  |FINSI;

     |SI #44#11 = 12; |Y #44#13 = 23;  #44#13 = 175;  |FINSI;
     |SI #44#11 = 12; |Y #44#13 = 24;  #44#13 = 177;  |FINSI;
     |SI #44#11 = 12; |Y #44#13 = 25;  #44#13 = 178;  |FINSI;

     |SI #44#11 = 13; |Y #44#13 = 9;   #44#13 = 182;  |FINSI;
     |SI #44#11 = 13; |Y #44#13 = 19;  #44#13 = 180;  |FINSI;
     |SI #44#11 = 13; |Y #44#13 = 36;  #44#13 = 181;  |FINSI;

     |SI #44#11 = 16; |Y #44#13 = 17;  #44#13 = 184;  |FINSI;
     |SI #44#11 = 16; |Y #44#13 = 18;  #44#13 = 185;  |FINSI;

     |SI #44#11 = 17; |Y #44#13 = 3;   #44#13 = 186;  |FINSI;
     |SI #44#11 = 17; |Y #44#13 = 6;   #44#13 = 188;  |FINSI;
     |SI #44#11 = 17; |Y #44#13 = 10;  #44#13 = 192;  |FINSI;
     |SI #44#11 = 17; |Y #44#13 = 11;  #44#13 = 194;  |FINSI;
     |SI #44#11 = 17; |Y #44#13 = 21;  #44#13 = 189;  |FINSI;
     |SI #44#11 = 17; |Y #44#13 = 22;  #44#13 = 190;  |FINSI;
     |SI #44#11 = 17; |Y #44#13 = 29;  #44#13 = 195;  |FINSI;
     |SI #44#11 = 17; |Y #44#13 = 30;  #44#13 = 193;  |FINSI;
     |SI #44#11 = 17; |Y #44#13 = 33;  #44#13 = 196;  |FINSI;

     #8#0 = #44#11;
     #8#1 = #44#13;
     |LEE 040#8=;
     |SI FSalida = 0;
         #44#14 = #8#2;
         #44#15 = #8#3;
         #44#16 = #8#4;
     |FINSI;

     |SI #44#13 < 99;
         |BORRA 020#44a;
     |SINO;
         |GRABA 020#44a;
     |FINSI;
     |LIBERA #44;
|FPRC;

|DEFBUCLE rem00044;
     #44#1;
     ;
     00001, 00;
     99999, 99;
     be;
     NULL, rem00044;
|FIN;

|PROCESO CambioAutonomias;
     |ABRE #44;
     |LEE 040#44p;
     |SI FSalida = 0;
         |CIERRA #44;
         |SI #44#13 < 99;
             |ABRE #8;
             |BUCLE rem00044;
             |CIERRA #8;
         |FINSI;
     |SINO;
         |CIERRA #44;
     |FINSI;
|FPRC;

|PROCESO rem00100;
     |SI #100#7 ! "    ";  |Y #100#103 = "01.01.0000";
         aAlfa    = "01.01." + #100#7;
         #100#103 = aAlfa;
     |FINSI;

     |SI #100#40 ! "    ";  |Y #100#104 = "01.01.0000";
         aAlfa    = "01.01." + #100#40;
         #100#104 = aAlfa;
     |FINSI;

     |GRABA 020#100a;
     |LIBERA #100;
|FPRC;

|DEFBUCLE rem00100;
     #100#1;
     ;
     00001;
     99999;
     be;
     NULL, rem00100;
|FIN;

|PROCESO rem00101;
     |SI #101#5 ! "    ";  |Y #101#17 = "01.01.0000";
         aAlfa    = "01.01." + #101#5;
         #101#17 = aAlfa;
     |FINSI;

     |GRABA 020#101a;
     |LIBERA #101;
|FPRC;

|DEFBUCLE rem00101;
     #101#1;
     ;
     00001, 01;
     99999, 99;
     be;
     NULL, rem00101;
|FIN;

|PROCESO PonFechaNacimiento;
     |ABRE #100;
     |LEE 040#100p;
     |SI FSalida = 0;
         |CIERRA #100;
         |SI #100#7 ! "    ";  |Y #100#103 = "01.01.0000";
             |BUCLE rem00100;
             |BUCLE rem00101;
         |FINSI;
     |SINO;
         |CIERRA #100;
     |FINSI;
|FPRC;

|PROGRAMA;
     |MENSA "0000Comprobando configuracion patrones.";
     enError = 0;
     |HAZ MiraPatrones;
     |SI enError = 1;  |ACABA;  |FINSI;

     |MENSA "0000Comprobando configuracion deducciones.";
     |HAZ CambioDeducciones;
     |MENSA "0000Comprobando configuracion liquidacion.";
     |HAZ CambioLiquidacion;
     |MENSA "0000Comprobando configuracion autonomias.";
     |HAZ CambioAutonomias;
     |MENSA "0000Comprobando configuracion fechas nacimiento.";
     |HAZ PonFechaNacimiento;
     |BLIN 5;
|FPRO;
