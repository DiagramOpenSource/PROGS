|FICHEROS;
     rem00026;
     rem00905;
|FIN;

|VARIABLES;
     n0Vnt               = 0;
     nGrid               = 0;
     nBtnSal             = 0;
     nRango              = 0;
     nMod                = 0;
     nIde                = 0;
     nImp                = 0;

     aAlfa               = "";
     aCas                = "";

     &enEmpresa          = 0;
     &enLin              = 0;
     &enModoReg          = 0;
     &eaModal            = "";
     &ea32_1             = "";
     &ea32_2_1           = "";
     &en0180             = 0;
     &en0218             = 0;
     &en0219             = 0;
     &en0220             = 0;
     &en0221             = 0;
     &en0222             = 0;
     &en0223             = 0;
     &en0224             = 0;
     &en0225             = 0;
     &en0226             = 0;
|FIN;

|PROCESO T1;  |TIPO 1;
     nMod = (FEntrada / 100) ! 0;
     |SI nMod = 1;  |O nMod = 3;
         |ERROR;
     |FINSI;
|FPRC;

|PROCESO T2;  |TIPO 2;
     |HAZ T1;
|FPRC;

|PROCESO rem00026Tot;
     #rem00905#0 = #rem00026#2;
     |LEE 000#rem00905.=;
     |SI FSalida ! 0;  |DDEFECTO #rem00905;  |FINSI;

     |SI eaModal = "N";
         |SI #rem00905#2 = "0222";  |Y #rem00026#5 ! 0;
             #rem00026#5 = 0;

             |GRABA 020#rem00026.a;
             |LIBERA #rem00026;
         |FINSI;
     |FINSI;

     |SI eaModal = "S";
         |SI #rem00905#2 = "0219";  |Y #rem00026#5 ! 0;
             #rem00026#5 = 0;

             |GRABA 020#rem00026.a;
             |LIBERA #rem00026;
         |FINSI;
     |FINSI;

     |SI ea32_1 = "N";
         |SI #rem00905#2 = "0225";  |Y #rem00026#5 ! 0;
             #rem00026#5 = 0;

             |GRABA 020#rem00026.a;
             |LIBERA #rem00026;
         |FINSI;
     |FINSI;

     |SI #rem00905#3 = "ING";
         en0180 = en0180 + #rem00026#5;
     |FINSI;

     |SI #rem00905#3 = "GTO";
         en0218 = en0218 + #rem00026#5;
     |FINSI;

     |SI #rem00905#3 = "CP1";
         en0219 = #rem00026#5;
     |FINSI;

     |SI #rem00905#2 = "0225";
         en0225 = #rem00026#5;
     |FINSI;
|FPRC;

|DEFBUCLE rem00026Tot;
     #rem00026#1;
     ;
     enEmpresa, enLin,    1;
     enEmpresa, enLin, 9999;
     be;
     NULL, rem00026Tot;
|FIN;

|PROCESO GrabaCas;
     #rem00026#0 = enEmpresa;
     #rem00026#1 = enLin;
     #rem00026#4 = aCas;
     |LEE 101#rem00026.=;
     |SI FSalida = 0;
         #rem00026#5 = nImp;

         |GRABA 020#rem00026.a;
         |LIBERA #rem00026;
     |FINSI;
|FPRC;

|PROCESO TotalFich26;
     en0180 = 0;
     en0218 = 0;
     en0219 = 0;
     en0220 = 0;
     en0221 = 0;
     en0222 = 0;
     en0223 = 0;
     en0224 = 0;
     en0225 = 0;
     en0226 = 0;

     |BUCLE rem00026Tot;

     |SELECT #2#rem00026;

     |SI eaModal = "N";
         en0220 = en0218 + en0219;
     |FINSI;

     |SI eaModal = "S";
         en0221 = en0180 - en0218;

         en0222 = (en0221 % 5) ! 2;
         |SI en0222 < 0;     en0222 =    0;  |FINSI;
         |SI en0222 > 2000;  en0222 = 2000;  |FINSI;

         |SI ea32_2_1 = "S";
             en0222 = 0;
         |FINSI;

         en0223 = en0218 + en0222;
     |FINSI;

     en0224 = en0180 - en0220 - en0223;

     |SI ea32_1 = "S";
         en0225 = (en0224 % 30) ! 2;
          |SI en0225 > 90000; en0225 = 90000;  |FINSI;
     |FINSI;

     en0226 = en0224 - en0225;

     aCas = "0180";  nImp = en0180;  |HAZ GrabaCas;
     aCas = "0218";  nImp = en0218;  |HAZ GrabaCas;
     aCas = "0220";  nImp = en0220;  |HAZ GrabaCas;
     aCas = "0221";  nImp = en0221;  |HAZ GrabaCas;
     aCas = "0222";  nImp = en0222;  |HAZ GrabaCas;
     aCas = "0223";  nImp = en0223;  |HAZ GrabaCas;
     aCas = "0224";  nImp = en0224;  |HAZ GrabaCas;
     aCas = "0225";  nImp = en0225;  |HAZ GrabaCas;
     aCas = "0226";  nImp = en0226;  |HAZ GrabaCas;
|FPRC;

|PROCESO T3;  |TIPO 3;
     #rem00905#0 = #rem00026#2;
     |LEE 000#rem00905.=;
     |SI FSalida ! 0;  |DDEFECTO #rem00905;  |FINSI;

     |SI #rem00905#4 ! "INT";  |ACABA;  |FINSI;

     |GRABA 020#rem00026.a;
     |LIBERA #rem00026;

     nIde = #rem00026#2;

     |HAZ TotalFich26;

     |SELECT #1#rem00026;
     #rem00026#0 = enEmpresa;
     #rem00026#1 = enLin;
     #rem00026#2 = nIde;
     |LEE 101#rem00026.=;

     aAlfa = "|IDGRID";
     aAlfa = #rem00026#aAlfa#;
     nGrid = aAlfa;
     |REFRESCACONTROL nGrid;
|FPRC;

|PROCESO T0;  |TIPO 0;
     |C_M #rem00026#5,  1, "N";

     #rem00905#0 = #rem00026#2;
     |LEE 000#rem00905.=;
     |SI FSalida ! 0;  |DDEFECTO #rem00905;  |FINSI;

     |SI #rem00905#4 ! "INT";  |ACABA;  |FINSI;

     |SI eaModal = "N";
         |SI #rem00905#2 = "0222";  |ACABA;  |FINSI;
     |FINSI;

     |SI eaModal = "S";
         |SI #rem00905#2 = "0219";  |ACABA;  |FINSI;
     |FINSI;

     |SI ea32_1 = "N";  |O ea32_1 = "S";
         |SI #rem00905#2 = "0225";  |ACABA;  |FINSI;
     |FINSI;

     |C_M #rem00026#5,  1, "S";
|FPRC;

|PROCESO Baja26;
     #rem00026#0 = enEmpresa;
     #rem00026#1 = enLin;
     #rem00026#2 = 1;
|FPRC;

|PROCESO Alta26;
     #rem00026#0 = enEmpresa;
     #rem00026#1 = enLin;
     #rem00026#2 = 9999;
|FPRC;

|PROCESO Evnt26;
     |SI FSalida = 1;  |O FSalida = 2;
         |LEE 000#rem00026.=;
     |FINSI;
|FPRC;

|PROCESO BtnSalir;
     |PTEC 807;
|FPRC;

|PROGRAMA;
     |SI PARAMETRO = "RECALCULA";
         |ACABA;
     |FINSI;

     |VENTANA 0501, 3499, -1, 16, "Introducci¢n de importes";
     n0Vnt = FSalida;

     |PTEC 802;  |PAUSA;

     |CONTROL_SIMPLE 0, "BOTON,{{228}} sali&R", 3488, 3498, BtnSalir;
     nBtnSal = FSalida;

     |SI enModoReg ! 4;
         nRango = 1 + 2 + 4 + 8 + 16 + 128 + 256;
     |SINO;
         nRango = 4 + 8 + 16 + 128 + 256;
     |FINSI;

     |LINEAL_SIMPLE #1#rem00026, nRango, 0502, 3298, Baja26, Alta26, Evnt26;

     |FIN_CONTROL_WINDOWS nBtnSal;

     |FINVENTANA n0Vnt;

     |SI ea32_1 = "M";  |Y en0225 = 0;
         |MENAV "0000Tiene marcado reducci¢n rendimientos generados mas de 2 a¤os y no ha introducido cantidad";
     |FINSI;

     |PULSATECLA;
|FPRO;

|PROCESO T80;  |TIPO 80;
     |ABRET #rem00026;
     |ABRET #rem00905;
|FPRC;

|PROCESO T90;  |TIPO 90;
     |HAZ TotalFich26;

     |CIERRAT #rem00026;
     |CIERRAT #rem00905;
|FPRC;
