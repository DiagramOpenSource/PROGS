|FICHEROS;
   va8bal03 #0;
   va8bal02 #1;
|FIN;

|VARIABLES;
   x        = 0;
   tecla    = "";
   ntecla   = 0;
   avance   = "815";
   atras    = "814";
   FEstado  = 0;
   sw = 0;
|FIN;

|INCLUYE dscnex_v;

|PROGRAMA;
 |ABRE #0;
 |PINPA #0#0;
 |SI modo = 1; |O modo = 2; |HAZ pidedato; |FINSI;
 |SI modo = 4; |HAZ consulta; |FINSI;
|FPRO;

|PROCESO pidedato;
 #0#0 = empresa;
 #0#1 = anyo;
 #0#2 = registr;
 |LEE 110#0=;
 FEstado = FSalida;
 |SI FEstado ! 0; |DDEFECTO #0; #0#0 = empresa; #0#1 = anyo; #0#2 = registr; |FINSI;
 |PINDA #0#0;
 |HAZ pin_totales;
 |SI modo = 1; |HAZ nomodi; |ENDATOS #1#0; |FINSI;
 |SI modo = 2; |HAZ nomodi; |ENDATOS #2#0;  |FINSI;
 |SI FSalida = 0;
     #0#0 = empresa;
     #0#1 = anyo;
     #0#2 = registr;
     #0#5 = tipo;
     |SI FEstado = 0; |GRABA 020#0a; |SINO; |GRABA 020#0n; |FINSI;
     |LIBERA #0;
|FINSI;
|FPRC;

|PROCESO consulta; |TIPO 0;
 avance = &255 + avance;
 atras  = &255 + atras;
 #0#0   = empresa;
 #0#1   = anyo;
 #0#2 = registr;
 |LEE 040#0=;
 |SI FSalida = 0; |HAZ pantalla1; |FINSI;
|FPRC;

|PROCESO pantalla1;
 |PINPA #0#0;
 |PINDA #0#0;
 |MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
 |LEETECLA tecla;
 |SI tecla = avance; |HAZ pantalla2; |ACABA; |FINSI;
|FPRC;

|PROCESO pantalla2;
 |PINPA #1#0;
 |PINDA #1#0;
 |MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
 |LEETECLA tecla;
 |SI tecla = atras;  |HAZ pantalla1; |ACABA; |FINSI;
 |SI tecla = avance; |HAZ pantalla3; |ACABA; |FINSI;
|FPRC;

|PROCESO pantalla3;
 |PINPA #2#0;
 |PINDA #2#0;
 |MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
 |LEETECLA tecla;
 |SI tecla = atras;  |HAZ pantalla2; |ACABA; |FINSI;
 |SI tecla = avance; |HAZ pantalla4; |ACABA; |FINSI;
|FPRC;

|PROCESO pantalla4;
 |PINPA #3#0;
 |PINDA #3#0;
 |MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
 |LEETECLA tecla;
 |SI tecla = atras;  |HAZ pantalla3; |ACABA; |FINSI;
 |SI tecla = avance; |HAZ pantalla5; |ACABA; |FINSI;
|FPRC;

|PROCESO pantalla5;
 |PINPA #4#0;
 |PINDA #4#0;
 |MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
 |LEETECLA tecla;
 |SI tecla = atras;  |HAZ pantalla4; |ACABA; |FINSI;
 |SI tecla = avance; |HAZ pantalla6; |ACABA; |FINSI;
|FPRC;

|PROCESO pantalla6;
 |PINPA #5#0;
 |PINDA #5#0;
 |MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
 |LEETECLA tecla;
 |SI tecla = atras;  |HAZ pantalla5; |ACABA; |FINSI;
|FPRC;


|| **************************************************************************
||                      PROCESOS PROPIOS DEL PROGRAMA
|| **************************************************************************

|PROCESO nomodi;
 |SI tipo   = "A"; |HAZ nomoabre; |FINSI;
 |SI tipo   = "E"; |HAZ nomoexte; |FINSI;
|FPRC;

|PROCESO nomoabre;
 |C_M #0#072,1,"N"; |C_M #0#073,1,"N";
 |C_M #0#076,1,"N"; |C_M #0#077,1,"N";
 |C_M #0#083,1,"N"; |C_M #0#084,1,"N";
 |C_M #0#085,1,"N";
 |C_M #0#0189,1,"N";
 |C_M #0#0190,1,"N";

 |C_M #0#089,1,"N"; |C_M #0#090,1,"N";
 |C_M #0#091,1,"N"; |C_M #0#092,1,"N";

 |C_M #0#094,1,"N"; |C_M #0#097,1,"N";

 |C_M #0#106,1,"N"; |C_M #0#109,1,"N";

 |C_M #0#114,1,"N"; |C_M #0#116,1,"N";
 |C_M #0#117,1,"N"; |C_M #0#118,1,"N";
 |C_M #0#119,1,"N";
|FPRC;

|PROCESO nomoexte;
 |C_M #0#071,1,"N";
 |C_M #0#075,1,"N";
 |C_M #0#082,1,"N";
 |C_M #0#088,1,"N";
|FPRC;

|PROCESO totales; |TIPO 0;
 #0#113 = #0#193 + #0#194; |PINTA #0#113;
 |SI tipo = "E";
     #0#071 = #0#072 + #0#073;                            |PINTA #0#071;
     #0#075 = #0#076 + #0#077;                            |PINTA #0#075;
     #0#082 = #0#083 + #0#084 + #0#085 + #0#189 + #0#190; |PINTA #0#082;
     #0#088 = #0#089 + #0#090 + #0#091 + #0#092;          |PINTA #0#088;
     #0#093 = #0#094 + #0#095 + #0#096 + #0#097 + #0#098; |PINTA #0#093;
     #0#105 = #0#106 + #0#107 + #0#108 + #0#109 + #0#110; |PINTA #0#105;
     #0#112 = #0#113 + #0#114 + #0#115 + #0#116 + #0#117 + #0#118 + #0#119; |PINTA #0#112;

 |SINO;
     #0#093 = #0#095 + #0#096 + #0#098; |PINTA #0#093;
     #0#105 = #0#107 + #0#108 + #0#110; |PINTA #0#105;
     #0#112 = #0#113 + #0#115;          |PINTA #0#112;
 |FINSI;

 #0#067 = #0#068 + #0#069; |PINTA #0#067;
 #0#066 = #0#067 + #0#070 + #0#071 + #0#074 + #0#075 + #0#078 + #0#079 + #0#080+ #0#081;
 #0#065 = #0#066 + #0#082 + #0#086;
 #0#087 = #0#088 + #0#093 + #0#099 + #0#100 + #0#101 * #0#191 + #0#192;
 #0#102 = #0#103 + #0#104 + #0#105 + #0#111 + #0#112 + #0#120 + #0#121;

 |PINTA #0#067;
 |PINTA #0#066;
 |PINTA #0#065;
 |PINTA #0#087;
 |PINTA #0#102;

 #0#123 = #0#065 + #0#087 + #0#102;
 |HAZ pin_totales;
|FPRC;


|PROCESO pin_totales;
 |SI sw = 0;
     |ABRE #1;
     |DDEFECTO #1;
     #1#0 = empresa;
     #1#1 = anyo;
     #1#2 = registr;
     |LEE 110#1=;
     |CIERRA #1;
   |PINTA 0554, "ÚÄÄÄÄÄÄÄÄÄÄÄÄÂÄÄÄÄÄÄÄÄÄÄÄÄ¿";
   |PINTA 0654, "³";
   |PINTA 0667, "³";
   |PINTA 0680, "³";
   |ATRI R;
   |PINTA 0655, " T. ACTIVO  ";
   |PINTA 0668, " T. PASIVO  ";
   |ATRI 0;
   |PINTA 0754, "³            ³            ³"
   sw = 1;
 |FINSI;
 |PINTA 0755, #1#133;
 |PINTA 0768, #0#123;
|FPRC;
