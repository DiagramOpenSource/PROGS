|FICHEROS;
     siiw0015,MANTE;
|FIN;

|VARIABLES;
     nOk                 = 0;
     nCobro              = 0;
     nLotA               = 0;
     nPas                = 0;
     nID                 = 0;

     aAlfa               = "";
     aFicTmp             = "";
     aID                 = "";
     aContenido          = "";

 {40}aPopup              = "";

     &eaVarDni           = "";
     &enCalcCif          = 0;
     &eaCodNif           = "";
     &eaNomNif           = "";
     &eaPaiNif           = "";
|FIN;

|PROCESO T12w15;   |TIPO 12;
     |SI FSalida = 7;  |ACABA;  |FINSI;

     |SI FSalida ! 1;
         |POSICIONATE #siiw0015#14;
         |ERROR;
         |ACABA;
     |FINSI;
|FPRC;

|PROCESO T0C10w15;  |TIPO 0;
     |C_M #siiw0015#10, 0, aAlfa;
     |SI aAlfa = "N"; |ACABA;  |FINSI;

     |SI #siiw0015#10 = "   ";
         #siiw0015#10 = "ES";
     |FINSI;

     |SI #siiw0015#10 = "ESP";
         #siiw0015#10 = "ES";
     |FINSI;

     |SI #siiw0015#7 ! "01";  |Y #siiw0015#7 ! "07";
         |SI #siiw0015#10 = "ES ";
             |MENAV "0000Pais incorrecto";
             |ERROR;
             |ACABA;
         |FINSI;
     |FINSI;

     |SI #siiw0015#7 = "01";  |O #siiw0015#7 = "07";
         |SI #siiw0015#10 ! "ES ";
             |MENAV "0000Pais incorrecto";
             |ERROR;
             |ACABA;
         |FINSI;
     |FINSI;

     |C_M #siiw0015#11, 1, "S";
     |SI #siiw0015#10 = "ES ";
         |C_M #siiw0015#11, 1, "N"; #siiw0015#11 = "";
     |FINSI;

     aAlfa = #siiw0015#11;  |QBF aAlfa;
     |SI #siiw0015#7 = "02";  |Y aAlfa = "";
         aAlfa = #siiw0015#10;  |QBF aAlfa;
         #siiw0015#11 = aAlfa + #siiw0015#8;
     |FINSI;

     |PINTA #siiw0015#11;
|FPRC;

|PROCESO T0C7w15;   |TIPO 0;
     |C_M #siiw0015#7, 0, aAlfa;
     |SI aAlfa = "N";  |ACABA;  |FINSI;

     nOk = 0;

     |SI #siiw0015#7 = "01";  nOk = 1;  |FINSI;
     |SI #siiw0015#7 = "02";  nOk = 1;  |FINSI;
     |SI #siiw0015#7 = "03";  nOk = 1;  |FINSI;
     |SI #siiw0015#7 = "04";  nOk = 1;  |FINSI;
     |SI #siiw0015#7 = "05";  nOk = 1;  |FINSI;
     |SI #siiw0015#7 = "06";  nOk = 1;  |FINSI;
     |SI #siiw0015#7 = "07";  nOk = 1;  |FINSI;

     |SI nOk = 0;
         |MENAV "0000 Clave identificaci¢n pais de residencia incorrecto";
         |ERROR;
     |FINSI;
|FPRC;

|PROCESO T66C7w15;  |TIPO 66;
     aAlfa = "|C007WID";
     aID   = #siiw0015#aAlfa#;
     nID   = aID;

     aPopup1  = nID;
     aPopup2  = 7;
     aPopup3  = "01 NIF";
     aPopup4  = "02 NIF/IVA (NIF operador intracomunitario)";
     aPopup5  = "03 Pasaporte";
     aPopup6  = "04 Documento Oficial de identificacion expedido por el pais o territorio de residencia";
     aPopup7  = "05 Certificado de residencia fiscal";
     aPopup8  = "06 Otro documento probatorio";
     aPopup9  = "07 No censado";

     IaPopup  = aPopup1  <-;
     |ESPECIFICA "TRACKPOPUP", aPopup;
     |SI FSalida ! 0;
         IaPopup  = aPopup3  <-;
         IaPopup  = IaPopup + (FSalida - 1);

         aAlfa = aPopup % 102;  #siiw0015#7 = aAlfa;
     |FINSI;

     |PINTA #siiw0015#7;
|FPRC;

|PROCESO T0C8w15;  |TIPO 0;
     eaVarDni  = #siiw0015#Campo#;
     enCalcCif = 0;
     |HAZ LetraNif;
     eaVarDni = (eaVarDni + "             ") % 112;
     |SI #siiw0015#Campo# ! eaVarDni;
         |CONFI "0000SEl NIF puede ser Erroneo. Desea Calcularlo.";
         |SI FSalida = 0;
             #siiw0015#Campo# = eaVarDni;  |PINTA #siiw0015#Campo#;
             |ERROR;
             |ACABA;
         |FINSI;
     |FINSI;

     aContenido = Contenido;
     |SI #siiw0015#8 ! aContenido;
         eaCodNif = #siiw0015#8;
         |HAZ LeeNif;

         #siiw0015#9  = eaNomNif;
         #siiw0015#10 = eaPaiNif;
     |FINSI;

     aAlfa = #siiw0015#8 % 101;
     |SI aAlfa = "X";  |O aAlfa = "Y";
         #siiw0015#7 = "01";
     |FINSI;

     |PINTA #siiw0015#7;
     |PINTA #siiw0015#9;
     |PINTA #siiw0015#10;
|FPRC;
