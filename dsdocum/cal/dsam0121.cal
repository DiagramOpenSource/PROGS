|FICHEROS;
     dsam0121 #121;
     dsam0122 #122,MANTE;
|FIN;

|VARIABLES;
     aIPRemoto = "";
     aNombreIP = "";
     aRuta     = "";
     aAlfa     = "";
     nModo     = 0;
|FIN;

|RUTINA ClaveBaja122;
     #122#0 = #121#0;
     #122#1 = "                    ";
|FRUT;

|RUTINA ClaveAlta122;
     #122#0 = #121#0;
     #122#1 = "zzzzzzzzzzzzzzzzzzzz";
|FRUT;

|PROCESO Tipo12m121;  |TIPO 12;
     |ENTLINEAL #1#122, -2, 2, 22, 0, ClaveBaja122, ClaveAlta122;
|FPRC;

|PROCESO Baja122;
     |BORRA 020#122a;
     |LIBERA #122;
|FPRC;

|DEFBUCLE dsam0122;
     #122#1;
     ;
     #121#0, "                    ";
     #121#0, "zzzzzzzzzzzzzzzzzzzz";
     be;
     NULL, Baja122;
|FIN;

|PROCESO Tipo2m121;  |TIPO 2;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo ! 3;  |ACABA;  |FINSI;

     |BUCLE dsam0122;
|FPRC;

|PROCESO Tipo5m122;  |TIPO 5;
     |IP_REMOTO aIPRemoto;   |QBT aIPRemoto;
     |SI aIPRemoto = "";
         aIPRemoto = "LOCAL";
         aNombreIP = "MAQUINA LOCAL";
     |SINO;
         |NOMBRE_IP aIPRemoto, aNombreIP;
     |FINSI;

     aIPRemoto = (aIPRemoto + (" " * 20)) % 120;

     #122#0 = #121#0;
     #122#1 = aIPRemoto;
     |LEE 101#122=;
     |SI FSalida ! 0;
         |DDEFECTO #122;
         #122#0 = #121#0;
         #122#1 = aIPRemoto;
         #122#2 = aNombreIP;
         |GRABA 020#122n;
     |FINSI;
|FPRC;

|PROCESO DejoEntrar122;
     |SI #122#1 ! aIPRemoto;
         |MENAV "      El Nombre de la Maquina no corresponde con su IP.";
         |ERROR;
         |ACABA;
     |FINSI;
|FPRC;

|PROCESO Ruta122;
     |SI FSalida ! 10;
         aAlfa = #122Campo;  |QBF aAlfa;
         |RMKDIR aAlfa;
         |ACABA;
     |FINSI;

     aRuta = "D" + #122Campo;
     |BROWSE aRuta;
     #122Campo = aRuta % 280;
     |PINTA #122Campo;
     |ERROR;
|FPRC;

|PROCESO PintaLineal121;  |TIPO 14;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo ! 4;  nModo = 7;  |FINSI;

     aAlfa = #121#3;
     |PINTA 1025, aAlfa;

     |ENTLINEAL #1#122, -2, nModo, 22, 0, ClaveBaja122, ClaveAlta122;
|FPRC;
