|FICHEROS;
   dscam008 #10;
   dscam022 #20;
   dscam047 #21;
   dscam050 #22;

   dscaw075 #50;
|FIN;

|VARIABLES;
   &enSw = 0;

   nSwError = 0;
   nLinea = 0;

   aAlfa   = "";
   aAntDoc = "";
|FIN;

|PROCESO dscam022;
   #dscam008#40 = #dscam022#13;
   |LEE 000#dscam008.=;
   |SI FSalida = 0;
      #dscam022#37 = #dscam008#63;
      |GRABA 020#dscam022.a;
   |SINO;
      nSwError = 1;
      |DDEFECTO #dscaw075;
      #dscaw075#0 = nLinea; nLinea = nLinea + 1;
      #dscaw075#1 = #dscam022#0;
      #dscaw075#2 = #dscam022#1;
      #dscaw075#3 = #dscam022#13;
      #dscaw075#4 = "P";
      |GRABA 000#dscaw075.n;
   |FINSI;
   |LIBERA #dscam022;
|FPRC;

|DEFBUCLE dscam022;
#dscam022#1;
;
INICIO;
FINAL;
be;
NULL,dscam022;
|FIN;

|PROCESO dscam047;
   #dscam008#40 = #dscam047#13;
   |LEE 000#dscam008.=;
   |SI FSalida = 0;
      #dscam047#25 = #dscam008#63;
      |GRABA 020#dscam047.a;
   |SINO;
      nSwError = 1;
      |DDEFECTO #dscaw075;
      #dscaw075#0 = nLinea; nLinea = nLinea + 1;
      #dscaw075#1 = #dscam047#0;
      #dscaw075#2 = #dscam047#1;
      #dscaw075#3 = #dscam047#13;
      #dscaw075#4 = "T";
      |GRABA 000#dscaw075.n;
   |FINSI;
   |LIBERA #dscam047;
|FPRC;

|DEFBUCLE dscam047;
#dscam047#1;
;
INICIO;
FINAL;
be;
NULL,dscam047;
|FIN;

|PROCESO dscam050;
   #dscam008#40 = #dscam050#13;
   |LEE 000#dscam008.=;
   |SI FSalida = 0;
      #dscam050#25 = #dscam008#63;
      |GRABA 020#dscam050.a;
   |SINO;
      nSwError = 1;
      |DDEFECTO #dscaw075;
      #dscaw075#0 = nLinea; nLinea = nLinea + 1;
      #dscaw075#1 = #dscam050#0;
      #dscaw075#2 = #dscam050#1;
      #dscaw075#3 = #dscam050#13;
      #dscaw075#4 = "C";
      |GRABA 000#dscaw075.n;
   |FINSI;
   |LIBERA #dscam050;
|FPRC;

|DEFBUCLE dscam050;
#dscam050#1;
;
INICIO;
FINAL;
be;
NULL,dscam050;
|FIN;

|PROCESO Imprime;
   |SI #50#4 ! aAntDoc;
      |SI #50#4 = "P"; enSw = 1; |FINSI;
      |SI #50#4 = "T"; enSw = 2; |FINSI;
      |SI #50#4 = "C"; enSw = 3; |FINSI;
      aAntDoc = #50#4;
   |FINSI;
   |PRINT;
|FPRC;

|DEFBUCLE Imprime;
#dscaw075#1;
;
INICIO;
FINAL;
;
NULL, Imprime;
|FIN;

|PROGRAMA;
   aAlfa = PARAMETRO; |QBF aAlfa;
   |PATH_DAT #dscam008#aAlfa#; |PATH_DAT #dscam022#aAlfa#;
   |PATH_DAT #dscam047#aAlfa#; |PATH_DAT #dscam050#aAlfa#;
   |PATH_DAT #dscaw075#aAlfa#;

   nLinea = 0; nSwError = 0;
   aAlfa = "t3" + Usuario; |NOME_DAT #50 aAlfa;
   |DELINDEX #dscaw075; |ABRE #dscaw075;
   |ABRE #dscam008;
   |BUCLE dscam022; |BUCLE dscam047; |BUCLE dscam050;
   |CIERRA #dscam008;

   |SI nSwError = 1;
      |MENAV "    Un proceso de comprobacion interno encontro errores en los datos";
      |IMPRE 0;
      |SI FSalida = 0;
         |INFOR "dscaz102";
         |SI FSalida = 0;
            |BUCLE Imprime;
            |PIEINF; |FININF;
         |FINSI;
         |FINIMP;
      |FINSI;
   |FINSI;

   |CIERRA #dscaw075; |DELINDEX #dscaw075;
|FPRO;
