|FICHEROS;
   dscaz951 #0;

   dscam003 #10;
   Referen@ #11;
|FIN;

|VARIABLES;
   aAlfa  = "";
   aAlfa1 = "";
   aAlfa2 = "";

   aMarca = "";
   nMarca = 0;
   nCont  = 0;

   nContador = 0;
|FIN;

|PROGRAMA;
   |CLS;
   |CABEZA "Purgado fichero de recibos de venta";
   |PINPA #0#0; |PINDA #0#0;
   |ENDATOS #1#0;
   |SI FSalida = 0; |Y #0#0 = "S";
      nContador = 0; nMarca = 1; nCont = 0;

      |DDEF aAlfa; |QBF aAlfa;
      aAlfa = aAlfa + "dscam003.mas";
      |CARGA_DEF aAlfa, Referen@
      |SI FSalida = 0;
         |DFICE aAlfa; |QBF aAlfa; |PATH_DAT #Referen@#aAlfa#;
         aAlfa = "dscam03a"; |NOME_DAT #Referen@#aAlfa#;
         |DELINDEX #Referen@; |ABRE #Referen@;

         |ABRE #dscam003;
         |LEE 101#dscam003.p;
         |PARA; |SI FSalida = 0; |HACIENDO;
            |SI nContador > 50;
               nMarca = nMarca + 1;
               |SI nMarca > 4; nMarca = 1;   |FINSI;
               |SI nMarca = 1; aMarca = "|"; |FINSI;
               |SI nMarca = 2; aMarca = "/"; |FINSI;
               |SI nMarca = 3; aMarca = "-"; |FINSI;
               |SI nMarca = 4; aMarca = "\"; |FINSI;
               aAlfa = " Pasando el registro n§ " + nCont + ". Espere por favor " + aMarca;
               |BLIN 23;
               |PINTA 2302, aAlfa;
               nContador = 0;
            |SINO;
               nContador = nContador + 1;
            |FINSI;

            |SALVA_DATOS #dscam003; |REPON_DATOS #Referen@;
            |GRABA 020#Referen@.n;

            |LIBERA #dscam003; |LEE 101#dscam003.s;
         |SIGUE;
         |LIBERA #dscam003; |CIERRA #dscam003;
         |CIERRA #Referen@; |DESCARGA_DEF #Referen@;

         |DFICE aAlfa; |QBF aAlfa;
         aAlfa1 = aAlfa + "dscam03a.dat"; aAlfa2 = aAlfa + "dscam003.dat";
         |COPIA_FICHERO aAlfa1, aAlfa2; |FBORRA aAlfa1;
         aAlfa1 = aAlfa + "dscam03a.ddx"; aAlfa2 = aAlfa + "dscam003.ddx";
         |COPIA_FICHERO aAlfa1, aAlfa2; |FBORRA aAlfa1;
         aAlfa1 = aAlfa + "dscam03a.ixx"; aAlfa2 = aAlfa + "dscam003.ixx";
         |COPIA_FICHERO aAlfa1, aAlfa2; |FBORRA aAlfa1;
      |FINSI;
   |FINSI;
|FPRO;
