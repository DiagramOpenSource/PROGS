|FICHEROS;
   dscaz131 #0;

   dscam008 #10;
   dscam049 #11;
   dscam050 #12;
   dscam014 #13;
   dscam051 #14;
|FIN;

|VARIABLES;
   &eaFichClas = "";  &eaTipoClas = ""; &enSwClas = 0;
   &eaCodigo   = "";  &eaTipoCod  = ""; &aCuenta  = "";
   &eaNombre   = "";  &eaPoblacion = "";
   &enNumDocumento = 0;
   &enEmpGestion = 0; &enSwVisado = 0;

   &eaCuenta   = ""; &enSwErr = 0;

   aAlfa      = "";

   nBanco     = 0;
   nConf      = 0;
   nLinea     = 0;
   nOtroBanco = 0;
|FIN;

|PROCESO Recibos;
   enSwClas   = 1; eaFichClas = "dscam049"; eaTipoClas = #dscam008#12;
   |HAZ CompruebaClas;
   |SI eaFichClas = "ERROR"; |ACABA; |FINSI;

   eaCodigo = #dscam008#32; eaCuenta = #dscam008#5; |HAZ MiraSiBloq;
   |SI enSwErr ! 0; |ERROR; |ACABA; |FINSI;

   enNumDocumento = #dscam008#40;
   enEmpGestion = #dscam008#46; |HAZ MiraSiVisado;
   |SI enSwVisado < 0; |ERROR; |ACABA; |FINSI;

   |SI #dscam008#14 ! "P"; |Y #dscam008#14 ! "C"; |ACABA; |FINSI;
   |SI #dscam008#31 = 0; |ACABA; |FINSI;
   |SI #dscam008#31 < #dscaz131#1; nOtroBanco = 1; |SINO; |ACABA; |FINSI;
   |SI #dscam008#16 ! nBanco; |Y #dscam049#22 = "S"; |ACABA; |FINSI;

   |SI #dscam008#16 ! #dscam049#3;
      #dscam008#16 = #dscam049#3;
      #dscam008#52 = #dscam049#4;
      |GRABA 020#dscam008.a;
   |FINSI;
   eaCodigo = #dscam008#32; eaTipoCod = "P"; aCuenta = #dscam008#5; |HAZ LeeDatos;

   |DDEFECTO #dscam050;
   #dscam050#0  = #dscam049#0;
   #dscam050#1  = nLinea; nLinea = nLinea + 1;
   #dscam050#2  = #dscam008#27;
   #dscam050#3  = #dscam008#1;
   #dscam050#4  = #dscam008#0;
   #dscam050#5  = #dscam008#2;
   #dscam050#6  = #dscam008#3;
   #dscam050#7  = #dscam008#31;
   #dscam050#8  = #dscam008#5;
   #dscam050#10 = eaNombre;
   #dscam050#11 = eaPoblacion;
   #dscam050#13 = #dscam008#40;
   #dscam050#16 = #dscam008#72;
   #dscam050#20 = #dscam008#31;
   #dscam050#35 = #dscam008#63;
   |GRABA 020#dscam050.c;

   #dscam049#5 = #dscam049#5 + 1;
   #dscam049#9 = #dscam049#9 + #dscam008#31;
   |GRABA 020#dscam049.a;

   #dscaz131#1 = #dscaz131#1 - #dscam008#31;

   #dscam008#17 = #dscam050#0;
   #dscam008#37 = #dscam050#1;
   #dscam008#39 = "C";
   #dscam008#47 = "Confirme";
   #dscam008#26 = #dscam049#1;
   #dscam008#14 = "E";
   #dscam008#15 = "Englobado en confirme";
   |GRABA 020#dscam008.a;
|FPRC;

|DEFBUCLE Recibos;
#dscam008#9;
;
#dscaz131#7, #dscaz131#10, 0000000001;
#dscaz131#7, #dscaz131#5,  9999999999;
be;
NULL, Recibos;
|FIN;

|PROCESO PintaTipo;
   |SI #dscaz131#11 = "C";
      aAlfa = "CHEQUE";
   |SINO;
      aAlfa = "TRANS.";
   |FINSI;
   |ATRI I; |PINTA 1269, aAlfa; |ATRI N;
|FPRC;

|PROGRAMA;
   |HAZ Tipo8;

   |CLS;
   |CABEZA "Creacion automatica de confirmes";
   |PINPA #0#dscaz131; |PINDA #0#dscaz131;
   |ENDATOS #1#dscaz131;
   |SI FSalida = 0;
      nOtroBanco = 0;
      |ABRE #dscam049;   |ABRE #dscam050; |ABRE #dscam014; |ABRE #dscam051;

      |LEE 000#dscam051.p;
      |SI FSalida ! 0; |DDEFECTO #dscam051; |FINSI;

      #dscam014#0 = #dscaz131#0;
      |LEE 000#dscam014.=;
      |SI FSalida ! 0; |DDEFECTO #dscam014; |FINSI;

      |LEE 000#dscam049.u;
      |SI FSalida ! 0;
         nConf = 1;
      |SINO;
         nConf = #dscam049#0 + 1;
      |FINSI;
      nLinea = 1;
      |DDEFECTO #dscam049;
      #dscam049#0  = nConf;
      #dscam049#1  = #dscaz131#9;
      #dscam049#2  = #dscaz131#5;
      #dscam049#3  = #dscam014#0;
      #dscam049#4  = #dscam014#1;
      #dscam049#6  = #dscaz131#7;
      #dscam049#10 = #dscam014#10;
      #dscam049#11 = #dscam014#11;
      #dscam049#12 = #dscam014#34;
      #dscam049#13 = #dscam014#35;
      #dscam049#14 = #dscam014#37;
      #dscam049#15 = #dscam014#36;
      #dscam049#16 = "EUR";
      #dscam049#17 = "EURO";
      #dscam049#18 = 1;
      #dscam049#22 = #dscam051#63;
      #dscam049#23 = #dscaz131#11;
      #dscam049#24 = #dscaz131#8;
      |GRABA 020#dscam049.b;
      nBanco = #dscaz131#0; |BUCLE Recibos;
      nBanco = #dscaz131#2; |BUCLE Recibos;

      |SI #dscam049#5 = 0; |BORRA 020#dscam049.a; |FINSI;
      |LIBERA #dscam049;
      |CIERRA #dscam049; |CIERRA #dscam050; |CIERRA #dscam014; |CIERRA #dscam051;
   |FINSI;
   |HAZ Tipo9;
|FPRO;
