|FICHEROS;
   dscaz095 #0;

   dscam044 #10;
   dscam045 #11;
   dscam001 #12;
   dscam002 #13;

   agifa024@ #100;
|FIN;

|VARIABLES;
   aDir  = "";
   aAlfa = "";

   DEmpresa = 0;
   HEmpresa = 0;
|FIN;

|PROCESO Clientes;
   #dscam001#0 = #agifa024@#32;
   |LEE 000#dscam001.=;
   |SI FSalida ! 0;
      |DDEFECTO #dscam001;
      #dscam001#0 = #agifa024@#32;
      #dscam001#1 = #agifa024@#29;
      |GRABA 020#dscam001.n;
   |FINSI;

   #dscam002#0 = #agifa024@#32;
   #dscam002#1 = #agifa024@#33;
   |LEE 000#dscam002.=;
   |SI FSalida ! 0;
      |DDEFECTO #dscam002;
      #dscam002#0 = #agifa024@#32;
      #dscam002#1 = #agifa024@#33;
      #dscam002#2 = #agifa024@#29;
      #dscam002#3 = #agifa024@#34;
      #dscam002#6 = #agifa024@#162;
      |GRABA 020#dscam002.n;
   |FINSI;
|FPRC;

|DEFBUCLE Clientes;
#agifa024@#1001;
;
"      ";
"zzzzzz";
;
NULL,Clientes;
|FIN;

|PROCESO Empresas;
   #dscam044#0 = #dscam045#0;
   |LEE 000#dscam044.=;
   |SI FSalida = 0;
      aDir = #dscam044#1; |QBF aDir;
      aAlfa = aDir + "def/agifa024.mas";
      |CARGA_DEF aAlfa , agifa024@;
      |SI FSalida = 0;
         aAlfa = aDir + "fich/" + (("00000" + #dscam044#0) % -105) + "/";
         |PATH_DAT #100 aAlfa;
         |ABRE #agifa024@;
         |BUCLE Clientes;
         |CIERRA #agifa024@; |DESCARGA_DEF #agifa024@;
      |FINSI;
   |FINSI;
|FPRC;

|DEFBUCLE Empresas;
#dscam045#2;
;
DEmpresa;
HEmpresa;
;
NULL,Empresas;
|FIN;

|PROGRAMA;
   |CLS;
   |CABEZA " Recalculo ficheros entidades y sucursales bancarias ";
   |PINPA #0#0; |PINDA #0#0;
   |ENDATOS #1#0;
   |SI FSalida = 0; |Y #0#0 = "S";
      |DFICB aAlfa; |QBF aAlfa;
      |PATH_DAT #10 aAlfa; |PATH_DAT #11 aAlfa;
      |ABRE #dscam044; |ABRE #dscam045;
      |ABRE #dscam001; |ABRE #dscam002;
      DEmpresa = #48#0; HEmpresa = #48#0;
      |BUCLE Empresas;
      |CIERRA #dscam002; |CIERRA #dscam001;
      |CIERRA #dscam044; |CIERRA #dscam045;
   |FINSI;
|FPRO;
