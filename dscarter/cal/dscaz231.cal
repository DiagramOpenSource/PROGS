|FICHEROS;
     dscaz231 #0;
     dscam003 #3;
     dscam224 #224;
|FIN;

|VARIABLES;
     aDAgrupa = "";
     aHAgrupa = "";
     aIBAN = "";

     &enDocumento = 0;
     &eaCodigo = "";
     &eaTipoCod = "";
     &aCuenta = "";
     &eaCodIBAN = "";
     &enConta = 0;
     &eaAlfa = "";
|FIN;

|PROCESO Auxiliar;
     #3#40 = #224#0;
     |LEE 000#3=;
     |SI FSalida ! 0;
          |BORRA 020#224a;
          enConta = enConta + 1;
     |FINSI;
|FPRC;

|DEFBUCLE Auxiliar;
     #224#1;
     ;
     INICIO;
     FINAL;
     be;
     NULL, Auxiliar;
|FIN;

|PROCESO Recibos;
     #224#0 = #3#40;
     |LEE 000#224=;
     |SI FSalida = 0;
          enDocumento = #3#40;
          eaCodigo = #dscam003#32; eaTipoCod = "C"; aCuenta = #dscam003#5;
          |HAZ LeeDatos;

          |QBF eaCodIBAN;
          aIBAN = #224#1; |QBF aIBAN;

          |SI eaCodIBAN ! aIBAN;
               |PRINT;
          |FINSI;

     |FINSI;
|FPRC;

|DEFBUCLE Recibos;
     #3#1;
     4, 49;
     #0#0, #0#2, aDAgrupa;
     #0#1, #0#3, aHAgrupa;
     ;
     NULL, Recibos;
|FIN;

|PROCESO T3; |TIPO 3;
     |HAZ Tipo8;
     |SI #0#4 = "S";
          aDAgrupa = "S";
          aHAgrupa = "S";
     |SINO;
          |SI #0#4 = "N";
               aDAgrupa = "N";
               aHAgrupa = "N";
          |SINO;
               aDAgrupa = " ";
               aHAgrupa = "z";
          |FINSI;
     |FINSI;
     |IMPRE 0;
     |SI FSalida = 0;
          |INFOR "dscaz231";
          |SI FSalida = 0;
               |ABRE #224;
               |BUCLE Recibos;
               |CIERRA #224;
               |ABRE #3;
               |BUCLE Auxiliar;
               |CIERRA #3;

               |SI enConta ! 0;
                    eaAlfa = "Reciclados: " + enConta + " registros...";
               |FINSI;

               |PIEINF;
               |FININF;
          |FINSI;
          |FINIMP;
     |FINSI;
     |HAZ Tipo9;
|FPRC;
