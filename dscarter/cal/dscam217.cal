|FICHEROS;
   dscam217 #0;

   dscam163 #10;
|FIN;

|VARIABLES;
   nSwPrimero = 0;
   nModo = 0;
|FIN;

|PROCESO QuitaAntiguo; |TIPO 1;
   nModo = (FEntrada / 100) ! 0;
   |SI nModo = 3;
      |ABRE #dscam163;
      #dscam163#0 = #dscam217#0;
      |LEE 101#dscam163.=;
      |SI FSalida = 0;
         |BORRA 020#dscam163.a;
         |LIBERA #dscam163;
      |FINSI;
      |CIERRA #dscam163;
   |FINSI;
|FPRC;

|PROCESO MiraAntiguo; |TIPO 3;
   |ABRE #dscam163;
   #dscam163#0 = #dscam217#0;
   |LEE 101#dscam163.=;
   |SI FSalida ! 0;
      |DDEFECTO #dscam163;
      #dscam163#0 = #dscam217#0;
      |GRABA 020#dscam163.b;
   |FINSI;

   #dscam163#1 = #dscam217#1;
   |GRABA 020#dscam163.a; |LIBERA #dscam163;
   |CIERRA #dscam163;
|FPRC;

|PROCESO ActualizaAntiguo;
   #dscam163#0 = #dscam217#0;
   |LEE 000#dscam163.=;
   |SI FSalida ! 0;
      |DDEFECTO #dscam163;
      #dscam163#0 = #dscam217#0;
      #dscam163#1 = #dscam217#1;
      |GRABA 020#dscam163.n;
   |FINSI;
|FPRC;

|DEFBUCLE ActualizaAntiguo;
#dscam217#1;
;
INICIO;
FINAL;
;
NULL, ActualizaAntiguo;
|FIN;

|PROCESO ActualizaNuevo;
   #dscam217#0 = #dscam163#0;
   |LEE 101#dscam217.=;
   |SI FSalida ! 0;
      |DDEFECTO #dscam217;
      #dscam217#0 = #dscam163#0;
      |GRABA 020#dscam217.b;
   |FINSI;
   #dscam217#1 = #dscam163#1;
   |GRABA 020#dscam217.a; |LIBERA #dscam217;
|FPRC;

|DEFBUCLE ActualizaNuevo;
#dscam163#1;
;
INICIO;
FINAL;
;
NULL, ActualizaNuevo;
|FIN;

|PROCESO Actualiza; |TIPO 13;
   |SI nSwPrimero = 0;
      |ABRE #dscam217; |ABRE #dscam163;
      |BUCLE ActualizaNuevo; |BUCLE ActualizaAntiguo;
      |CIERRA #dscam217; |CIERRA #dscam163;
      nSwPrimero = 1;
   |FINSI;
|FPRC;

|PROCESO MiraCambiaEstado;
   |SI #dscam217#2 = "N";
      #dscam217#3 = ""; |PINTA #dscam217#3; |C_M #dscam217#3, 1, "N";
      #dscam217#4 = ""; |PINTA #dscam217#4; |C_M #dscam217#4, 1, "N";
   |SINO;
      |C_M #dscam217#3, 1, "S"; |C_M #dscam217#4, 1, "S";
   |FINSI;
|FPRC;
