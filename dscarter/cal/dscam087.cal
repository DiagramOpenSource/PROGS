|FICHEROS;
   dscam087 #0;
|FIN;

|VARIABLES;
   nModo = 0;

   nCodigo = 0;
|FIN;

|PROCESO TomaCodigo; |TIPO 3;
   nModo = (FEntrada / 100) ! 0;

   |SI nModo = 1;
      |SALVA_FICHA #dscam087;
      |SELECT #3#dscam087;
      |LEE 000#dscam087.u;
      |SI FSalida ! 0; |DDEFECTO #dscam087; |FINSI;
      nCodigo = #dscam087#2 + 1;
      |SELECT #1#dscam087;
      |REPON_FICHA #dscam087;
      #dscam087#2 = nCodigo;
   |FINSI;
|FPRC;
