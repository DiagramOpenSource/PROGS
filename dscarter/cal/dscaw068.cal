|FICHEROS;
   dscaw068 #0;
   dscam014 #1;
   dscam051 #2;
   dscam004 #4;
   RefRecs@ #10;
|FIN;

|VARIABLES;
   &Pagos = 0;
   &eaTipoRecibo = ""; &enNumDocum = 0; &eaMensRet = ""; &enSwError = 0; &eaTOperacion = "";
   &Divisa = "";       &enRemesa = 0;   &nDeci_Div = 0;
   &TotalSel = 0;      aMarca = "";
   aAlfa = "";

   &CodProv = ""; &CtaProv = "";
   Comodin = "";
|FIN;

|PROCESO Decimw001; |TIPO 13;
   Divisa = #dscaw068#9; |HAZ TomaDecim;
|FPRC;

|PROCESO ProcPag;
   enNumDocum = #RefRecs@#40; ||HAZ ProcesaTempo;
   |SI enSwError ! 0; |ERROR10; |FINSI;
|FPRC;

|DEFBUCLE ProcPag;
#RefRecs@#7003;
;
#dscaw068#6, #dscaw068#7, 000000001;
#dscaw068#6, #dscaw068#7, 999999999;
;
NULL, ProcPag;
|FIN;

|PROCESO Seleccion;
   |SI aMarca = "*";
      |ABRE #dscam051;
      |LEE 000#dscam051.p;
      |SI FSalida ! 0;
         |DDEFECTO #dscam051;
         |GRABA 020#dscam051.n;
      |FINSI;
      |CIERRA #dscam051;

      enSwError = 0; eaTOperacion = "A";
      |SI #dscaw068#6 ! "    "; |O #dscaw068#7 ! "          ";
         |DDEF aAlfa; |QBF aAlfa;
         aAlfa = aAlfa + "dscam003.mas";
         |CARGA_DEF aAlfa, RefRecs@;
         |SI FSalida = 0;
            |BUCLE ProcPag;
            |DESCARGA_DEF #RefRecs@;
         |FINSI;
      |SINO;
         enNumDocum = #dscaw068#5; ||HAZ ProcesaTempo;
      |FINSI;
      |SI enSwError = 0;
          |HAZ MiraHisCobro;
      |FINSI;
      |SI enSwError = 0;
         #dscaw068#4 = "*";
         TotalSel = TotalSel + #dscaw068#3; TotalSel = TotalSel ! nDeci_Div;
      |FINSI;
   |SINO;
      eaTOperacion = "B";
      |SI #dscaw068#6 ! "    "; |O #dscaw068#7 ! "          ";
         |DDEF aAlfa; |QBF aAlfa;
         aAlfa = aAlfa + "dscam003.mas";
         |CARGA_DEF aAlfa, RefRecs@;
         |SI FSalida = 0;
            |BUCLE ProcPag;
            |DESCARGA_DEF #RefRecs@;
         |FINSI;
      |SINO;
         enNumDocum = #dscaw068#5; ||HAZ ProcesaTempo;
      |FINSI;
      #dscaw068#4 = " ";
   |FINSI;
   |GRABA 020#dscaw068.a;
|FPRC;

|DEFBUCLE Seleccion;
#dscaw068#1;
;
INICIO;
FINAL;
;
NULL, Seleccion;
|FIN;

|PROCESO Marca; |TIPO 11;
   |SI FSalida = 10;
      |SI #dscaw068#4 = " ";
         |ABRE #dscam051;
         |LEE 000#dscam051.p;
         |SI FSalida ! 0;
            |DDEFECTO #dscam051;
            |GRABA 020#dscam051.n;
         |FINSI;
         |CIERRA #dscam051;

         enSwError = 0; eaTOperacion = "A";
         |SI #dscaw068#6 ! "    "; |O #dscaw068#7 ! "          ";
            |DDEF aAlfa; |QBF aAlfa;
            aAlfa = aAlfa + "dscam003.mas";
            |CARGA_DEF aAlfa, RefRecs@;
            |SI FSalida = 0;
               |BUCLE ProcPag;
               |DESCARGA_DEF #RefRecs@;
            |FINSI;
         |SINO;
            enNumDocum = #dscaw068#5; ||HAZ ProcesaTempo;
         |FINSI;
         |SI enSwError = 0;
               |HAZ MiraHisCobro;
               |SI enSwError ! 0;
                    |MENAV "0000El recibo tiene movimientos posteriores al descuento de riesgo de la remesa.";
                    |ERROR;
               |FINSI;
         |FINSI;
         |SI enSwError = 0;
            #dscaw068#4 = "*";
            TotalSel = TotalSel + #dscaw068#3; TotalSel = TotalSel ! nDeci_Div;
         |FINSI;
      |SINO;
         eaTOperacion = "B";
         |SI #dscaw068#6 ! "    "; |O #dscaw068#7 ! "          ";
            |DDEF aAlfa; |QBF aAlfa;
            aAlfa = aAlfa + "dscam003.mas";
            |CARGA_DEF aAlfa, RefRecs@;
            |SI FSalida = 0;
               |BUCLE ProcPag;
               |DESCARGA_DEF #RefRecs@;
            |FINSI;
         |SINO;
            enNumDocum = #dscaw068#5; ||HAZ ProcesaTempo;
         |FINSI;
         #dscaw068#4 = " ";
         TotalSel = TotalSel - #dscaw068#3; TotalSel = TotalSel ! nDeci_Div;
      |FINSI;
      |GRABA 020#dscaw068.a;
      Comodin = ("          " + TotalSel) % -110;
      Comodin = " Total seleccion : " + Comodin;
      |ATRI I;
      |PINTA 2222, Comodin;
      |ATRI N;
   |FINSI;

   |SI FSalida = 16;
      |SI TotalSel ! 0;
         aMarca = " ";
      |SINO;
         aMarca = "*";
      |FINSI;
      |SALVA_FICHA #dscaw068;
      TotalSel = 0; |BUCLE Seleccion;
      |REPON_FICHA #dscaw068;
      Comodin = ("          " + TotalSel) % -110;
      Comodin = " Total seleccion : " + Comodin;
      |ATRI I;
      |PINTA 2222, Comodin;
      |ATRI N;
      |PONCONTROL 23, "si"; |PTEC 808; |PTEC 809;
      |ERROR;
   |FINSI;
   Divisa = #dscaw068#9; |HAZ TomaDecim;
|FPRC;

|PROCESO Tipo5; |TIPO 5;
   #dscaw068#8 = 1;
   |LINEAS_BI_ATRI #dscaw068#8,S,D,-1;
|FPRC;
