|FICHEROS;
   cadie006 #0;
   cadie504 #1;

   dscam003 #10;
   dscam004 #11;
|FIN;

|VARIABLES;
   &Divisa    = "";
   DesdeRep   = "";
   HastaRep   = "";
   aAntRep    = "ZZZZ";

   Primero    = 0;
   nTotalPend = 0;
   nPendAnt   = 0;
   nComiDev   = 0;
|FIN;

|PROCESO Listado;
   |SI aAntRep ! #cadie504#20;
      |SI Primero = 0;
         Primero = 1;
      |SINO;
         |PIEINF;
      |FINSI;
      aAntRep = #cadie504#20;
   |FINSI;
   |PRINT;
|FPRC;

|DEFBUCLE Listado;
#cadie504#4;
;
"  ", "01.01.0000", #cadie006#0, "    ","          ";
"zz", "31.12.9999", #cadie006#0, "zzzz","zzzzzzzzzz";
;
NULL,Listado;
|FIN;

|PROCESO Historico1;
   |SI #cadie504#18 = #cadie504#19; |ACABA; |FINSI;

   #dscam003#40 = #cadie504#0;
   |LEE 000#dscam003.=;
   |SI FSalida ! 0; |ACABA; |FINSI;

   Divisa = #dscam003#57; |HAZ TomaDecim;

   |SI #cadie006#1 = "S";
      #cadie504#12 = #cadie006#0;
      #cadie504#19 = #cadie504#18;
      |GRABA 020#cadie504.a;
   |FINSI;
|FPRC;

|DEFBUCLE Historico1;
#cadie504#3;
;
"01.01.0000",000000001;
#cadie006#0, 999999999;
;
NULL,Historico1;
|FIN;

|PROGRAMA;
    |HAZ Tipo8;

   |ABRE #cadie006;
   |LEE 000#cadie006.p;
   |SI FSalida ! 0;
      |DDEFECTO #cadie006;
      |GRABA 020#cadie006.c;
   |FINSI;

   |ABRE #dscam003;
   |CLS;
   |CABEZA " Listado devolucion comisiones retrocedidas recibos vencidos";
   |PINPA #0#0; |PINDA #0#0;
   |ENDATOS #1#0;
   |SI FSalida = 0;
      |GRABA 020#cadie006.a;
      |IMPRE 0;
      |SI FSalida ! 0; |ACABA; |FINSI;
      |INFOR "cadie006";
      |SI FSalida ! 0; |FINIMP; |ACABA; |FINSI;

      |SI #cadie006#1 = "S"; |BUCLE Historico1; |FINSI;
      |BUCLE Listado;

      |PIEINF; |FININF;
      |FINIMP;
   |FINSI;
   |CIERRA #dscam003;
   |CIERRA #cadie006;

   |HAZ Tipo9;
|FPRO;
