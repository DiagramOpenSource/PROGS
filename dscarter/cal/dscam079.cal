|FICHEROS;
   dscam079 #0;

   agif024@ #10;
|FIN;

|VARIABLES;
   &HayGestion = 0;
   aAlfa = "";

   nTecla = 0;
   nCont  = 0;
   nCalc  = 0;
|FIN;

|PROCESO TomaCliente;
   nTecla = FSalida;

   |SI HayGestion ! 0;
      aAlfa = #48#17; |QBF aAlfa;
      aAlfa = aAlfa + "def/agifa024.mas"; |QBF aAlfa;
      |CARGA_DEF aAlfa, agif024@;
      |SI FSalida = 0;
         aAlfa = #48#17; |QBF aAlfa;
         aAlfa = aAlfa + "fich/" + (("00000" + #48#15) % -105) + "/"; |QBF aAlfa; |PATH_DAT #10 aAlfa;

         |ABRE #agif024@;
         #agif024@#0 = #dscam079#2;
         |LEE 000#agif024@.];

         |SI nTecla = 10;
            |CONSULTA_CLAVE #1#agif024@;
            #dscam079#2 = #agif024@#0; |PINTA #dscam079#2;
         |FINSI;

         |LEE 000#agif024@.=;
         |SI FSalida ! 0; |MENAV "    Cliente inexistente"; |ERROR; |ACABA; |FINSI;
         #dscam079#3 = #agif024@#2; |PINTA #dscam079#3;
         |CIERRA #agif024@; |DESCARGA_DEF #agif024@;
      |FINSI;
   |SINO;
      |MENAV "    No hay empresa de gestion comercial ";
      |ERROR;
   |FINSI;
|FPRC;

|PROCESO CalculaTot;
   #dscam079#52 = 0; #dscam079#53 = 0; #dscam079#54 = 0;
   |PARA nCont = 4; |SI nCont [ 48; |HACIENDO nCont = nCont + 4;
      nCalc = nCont;     #dscam079#52 = #dscam079#52 + #dscam079#nCalc#;
      nCalc = nCont + 2; #dscam079#53 = #dscam079#53 + #dscam079#nCalc#;
      nCalc = nCont + 3; #dscam079#54 = #dscam079#54 + #dscam079#nCalc#;
   |SIGUE;
   |PINTA #dscam079#52; |PINTA #dscam079#53; |PINTA #dscam079#54;
|FPRC;
