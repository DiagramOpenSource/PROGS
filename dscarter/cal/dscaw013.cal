|FICHEROS;
   dscaw013 #0;
   dscam030 #10;
   RefDato@ #500;
|FIN;

|VARIABLES;
   &nDeci_nDec = 0;
   &eaCodEnlace = "";

   aAlfa   = ""; aAlfa1 = "";
   aFichP  = ""; aFichC = "";
   aCmpClv = "";
   aLong  = ""; nLong  = 0;
   nCalc  = 0;  nCalc1 = 0;
   nTecla = 0;
|FIN;

|PROCESO TomaDecims; |TIPO 13;
   |SI #dscaw013#11 ! "N"; |ACABA; |FINSI;
   nLong = 0;

   |DBASE aAlfa; |QBF aAlfa;
   aAlfa = aAlfa + "def/" + #dscaw013#13;
   |CARGA_DEF aAlfa, RefDato@;
   |SI FSalida = 0;
      aAlfa = "|C" + (("000" + #dscaw013#14) % -103) + "MINIMO";
      aAlfa = #RefDato@#aAlfa#;
      aAlfa = aAlfa - ".";
      |SI FSalida ! 0;
         nCalc = FSalida; nCalc1 = nCalc + 98; aAlfa = aAlfa % nCalc1; |QBF aAlfa;
         aLong = aAlfa % 0; nLong = aLong;
         aAlfa1 = "9" * nLong;
         |SI aAlfa ! aAlfa1;
            nCalc1 = (nCalc / 100) ! 0; nLong = 15 - nCalc1;
         |FINSI;
      |FINSI;
      |DESCARGA_DEF #RefDato@;
   |FINSI;
   nDeci_nDec = nLong;
|FPRC;

|PROCESO MiraCmpClv1; |TIPO 11;
   nTecla = FSalida;
   |ABRE #dscam030;
   #dscam030#0 = eaCodEnlace;
   |LEE 000#dscam030.=;
   |SI FSalida ! 0; |DDEFECTO #dscam030; |FINSI;
   |DBASE aAlfa; |QBF aAlfa;
   aAlfa = aAlfa + "def/" + #dscam030#9;
   |CARGA_DEF aAlfa, RefDato@;
   |SI FSalida = 0; |Y #dscam030#10 ! 999;
      aAlfa1 = "|TITULO"; aAlfa1 = #RefDato@#aAlfa1#;
      aAlfa = " Campo clave enlace : [" + aAlfa1; |QBF aAlfa;
      aAlfa1 = "|C" + (("000" + #dscam030#10) % -103) + "NOMBRE"; aAlfa1 = #RefDato@#aAlfa1#;
      aAlfa = aAlfa + "][" + aAlfa1; |QBF aAlfa;
      aAlfa = aAlfa + "]";
      aCmpClv = aAlfa;
   |SINO;
      aCmpClv = &196 * 60;
   |FINSI;
   |PINTA 0915, aCmpClv;

   |SI nTecla = 12;
      |LEE 101#dscam030.=;
      |SI FSalida = 0;
         |SI #dscam030#2 = "CB";
            aFichP = "dscam004"; aFichC = "dscam003";
         |FINSI;
         |SI #dscam030#2 = "PG";
            aFichP = "dscam009"; aFichC = "dscam008";
         |FINSI;
         |SI #dscam030#2 = "RM";
            aFichP = "dscam013"; aFichC = "dscam012";
         |FINSI;
         |SI #dscam030#2 = "PA";
            aFichP = "dscam022"; aFichC = "dscam021";
         |FINSI;
         |SI #dscam030#2 = "TA";
            aFichP = "dscam047"; aFichC = "dscam046";
         |FINSI;
         |SI #dscam030#2 = "CR";
            aFichP = "dscam050"; aFichC = "dscam049";
         |FINSI;
         aAlfa = #dscaw013#13; |QBF aAlfa;
         |SI aAlfa = aFichP; |O aAlfa = aFichC;
            |SI #dscam030#10 ! 999;
               aAlfa = "    N" + &191 + " Desea cambiar el campo clave del enlace ? ";
               |CONFI aAlfa;
               |SI FSalida = 0;
                  aAlfa = " Campo clave enlace : [" + #dscaw013#1; |QBF aAlfa;
                  aAlfa = aAlfa + "][" + #dscaw013#2; |QBF aAlfa;
                  aCmpClv = aAlfa + "]";
                  |PINTA 0915, aCmpClv;
                  #dscam030#9 = #dscaw013#13; #dscam030#10 = #dscaw013#14;
                  |GRABA 020#dscam030.a;
               |FINSI;
            |SINO;
               aAlfa = " Campo clave enlace : [" + #dscaw013#1; |QBF aAlfa;
               aAlfa = aAlfa + "][" + #dscaw013#2; |QBF aAlfa;
               aCmpClv = aAlfa + "]";
               |PINTA 0915, aCmpClv;
               #dscam030#9 = #dscaw013#13; #dscam030#10 = #dscaw013#14;
               |GRABA 020#dscam030.a;
            |FINSI;
            |ERROR;
         |FINSI;
      |FINSI;
      |LIBERA #dscam030;
   |FINSI;

   |SI nTecla = 13; |Y #dscam030#10 ! 999;
      |LEE 101#dscam030.=;
      |SI FSalida = 0;
         aAlfa = "    N" + &191 + " Desea vaciar el campo clave del enlace ? ";
         |CONFI aAlfa;
         |SI FSalida = 0;
            #dscam030#9 = ""; #dscam030#10 = 999;
            |GRABA 020#dscam030.a;
         |FINSI;
         aCmpClv = &196 * 60; |PINTA 0915, aCmpClv;
         |ERROR;
      |FINSI;
      |LIBERA #dscam030;
   |FINSI;

   |CIERRA #dscam030;
|FPRC;
