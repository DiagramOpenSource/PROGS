|FICHEROS;
   dscaz006 #0;
   dscam051 #1;
|FIN;

|VARIABLES;
   &eaFichClas = "";  &eaTipoClas = ""; &enSwClas = 0; &eaClasif = "";
   &efFechaAgr = @; &enSwAplazAgr = 0;
   fFecha = @;

   aAlfa = "";
|FIN;

|PROCESO Fechas;
   |SI #dscaz006#3 < #dscaz006#8;
      |MENAV "    Error. La fecha de vto debe ser mayor o igual a la de la emision";
      |ERROR;
   |FINSI;

   |HAZ EsLuxe;
   |SI FSalida = 0;
      |SI #dscaz006#3 > efFechaAgr;
         aAlfa = "    SNuevo vencimiento posterior al original, " + &191 + " Calcular coste aplazamiento ?";
         |CONFI aAlfa;
         |SI FSalida = 0; enSwAplazAgr = 1; |FINSI;
      |FINSI;
   |FINSI;
|FPRC;

|PROCESO MiraTipoRec;

   |ABRE #dscam051;
   |LEE 000#dscam051.p;
   |SI FSalida ! 0; |DDEFECTO #dscam051; |FINSI;
   |CIERRA #dscam051;

   enSwClas   = 1; eaFichClas = "dscaz004"; eaTipoClas = #dscaz006#4;
   |HAZ CompruebaClas;
   |SI eaFichClas = "ERROR";
      |MENAV "    Documento inoperable en el perfil actual ";
      |ERROR;
   |FINSI;

   |SI eaTipoClas ! eaClasif; |Y #dscam051#47 ! "N";
      |MENAV "    Tipo de recibo de clasificacion incompatible con los documentos a agrupar";
      |ERROR;
   |FINSI;
|FPRC;
