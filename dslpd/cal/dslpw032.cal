|FICHEROS;
     dslpm510 #510;
     dslpm523 #523;
     dslpw031 #931;
     dslpw032 #932;
|FIN;

|VARIABLES;
     nBoton1_1        = 0;
     nBoton1_2        = 0;
     nBoton1_3        = 0;
     nPanta0          = 0;
     nPanta1          = 0;
     nGrid1           = 0;
     nRango           = 0;
     nPos1            = 0;
     nPos2            = 0;
     nVentana         = 0;

     aFichero         = "";
     aEsc1            = "";
     aEsc2            = "";
     aRetu            = "";
     aTecla           = "";
     aAlfa            = "";

     &enPlantilla     = 0;
     &eaPlantilla     = "";
     &enModo          = 0;
     &enFichero       = 0;
|FIN;

|PROCESO BajaPanta1;
     #510#0  = enPlantilla;
     #510#1  = 00001;
|FPRC;

|PROCESO AltaPanta1;
     #510#0  = enPlantilla;
     #510#1  = 99999;
|FPRC;

|| ------------------------------------------------------
|| Procesos del Boton 1_1
|| ------------------------------------------------------

|PROCESO Boton1_1;
     |VENTANA 0501, 2799, -1, 1, "";
     nVentana = FSalida;

     enPlantilla = #932#0;
     eaPlantilla = #932#1;
     enModo      = 1;
     |SUB_EJECUTA "dslpw033";

     |FINVENTANA nVentana;

     |REFRESCACONTROL nGrid1;
|FPRC;

|| ------------------------------------------------------
|| Procesos del Boton 1_2
|| ------------------------------------------------------

|PROCESO Boton1_2;
     |VENTANA 0501, 2799, -1, 1, "";
     nVentana = FSalida;

     enPlantilla = #932#0;
     eaPlantilla = #932#1;
     enFichero   = #510#1;
     enModo      = 2;
     |SUB_EJECUTA "dslpw033";

     |FINVENTANA nVentana;

     |REFRESCACONTROL nGrid1;
|FPRC;

|| ------------------------------------------------------
|| Procesos del Boton 1_3
|| ------------------------------------------------------

|PROCESO Boton1_3;
     aAlfa = "0000N" + &191 + " Esta vd.seguro de dar de baja a " + #510#3 + " ?";
     |CONFI aAlfa;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     |LEE 101#510=;
     |SI FSalida = 0;
         |BORRA 020#510a;
         |LIBERA #510;
     |FINSI;

     #523#0 = #510#0;
     #523#1 = #510#0;
     |LEE 101#523=;
     |SI FSalida = 0;
         |BORRA 020#523a;
         |LIBERA #523;
     |FINSI;

     |REFRESCACONTROL nGrid1;
|FPRC;

|| ------------------------------------------------------
|| Procesos del Incio del Programa
|| ------------------------------------------------------

|PROCESO EventoPanta1;
     |SI FSalida = 1;  |O FSalida = 2;
         |LEE 000#510=;
         |SI FSalida = 0;
             |ESTADO_CONTROL nBoton1_2, "ENABLE";
             |ESTADO_CONTROL nBoton1_3, "ENABLE";
         |SINO;
             |ESTADO_CONTROL nBoton1_2, "DISABLE";
             |ESTADO_CONTROL nBoton1_3, "DISABLE";
         |FINSI;
     |FINSI;
|FPRC;

|PROCESO BotonesPanta1;
     |CONTROL_SIMPLE nPanta1, "BOTON,{{193}} Alta", 0777, 0898, Boton1_1;
     nBoton1_1 = FSalida;

     |CONTROL_SIMPLE nPanta1, "BOTON,{{197}} Modificar", 1077, 1198, Boton1_2;
     nBoton1_2 = FSalida;

     |CONTROL_SIMPLE nPanta1, "BOTON,{{199}} Baja ", 1377, 1498, Boton1_3;
     nBoton1_3 = FSalida;

     |ESTADO_CONTROL nBoton1_1, "ENABLE";
     |ESTADO_CONTROL nBoton1_2, "DISABLE";
     |ESTADO_CONTROL nBoton1_3, "DISABLE";
|FPRC;

|PROCESO Tipo12;  |TIPO 12;
|FPRC;

|PROCESO Tipo80;  |TIPO 80;
     |ABRET #510;
     |ABRET #523;

     FSalida = 2899;
|FPRC;

|PROCESO Tipo90;  |TIPO 90;
     |CIERRAT #510;
     |CIERRAT #523;
|FPRC;

|PROCESO dslpm510;
     #510#2 = #932#1;
     |GRABA 020#510a;
     |LIBERA #510;
|FPRC;

|DEFBUCLE dslpm510;
     #510#1;
     ;
     #932#0, 00001;
     #932#0, 99999;
     be;
     NULL, dslpm510;
|FIN;

|PROGRAMA;
     aFichero = ("31" + Usuario + "zzzzzzzz") % 108;
     |NOME_DAT #931 aFichero;

     |ABRE #931;
     |SI enModo ! 1;
         #931#0 = enPlantilla;
         |LEE 000#931=;
         |SI FSalida ! 0;  |DDEFECTO #931; |FINSI;

         #932#0 = #931#0;
         #932#1 = #931#1;
     |SINO;
         #932#0 = enPlantilla;
     |FINSI;
     |CIERRA #931;

     |CABEZA "Datos Plantilla";

     |PINPA #0#932;  nPanta0 = FSalida;
     |PINDA #0#932;

     |PINPA #1#932;  nPanta1 = FSalida;
     |PINDA #1#932;

     nRango = 4 + 8 + 16 + 32;
     nPos1  = 0602;
     nPos2  = 2075;

     |LINEAL_SIMPLE #1#510, nRango, nPos1, nPos2, BajaPanta1, AltaPanta1, EventoPanta1;
     nGrid1 = FSalida;

     |HAZ BotonesPanta1;

     |SI enModo = 1;  |ENDATOS #1#932;  |FINSI;
     |SI enModo = 2;  |ENDATOS #2#932;  |FINSI;

     |SI FSalida = 0;
         |ABRE #931;
         #931#0 = #932#0;
         |LEE 101#931=;
         |SI FSalida ! 0;
             |DDEFECTO #931;
             #931#0 = #932#0;
             |GRABA 020#931b;
         |FINSI;
         #931#1 = #932#1;
         |GRABA 020#931a;
         |LIBERA #931;
         |CIERRA #931;

         |BUCLE dslpm510;
     |FINSI;

     |FIN_CONTROL_WINDOWS nBoton1_1;
     |FIN_CONTROL_WINDOWS nBoton1_2;
     |FIN_CONTROL_WINDOWS nBoton1_3;

     |DESTRUYECONTROL nGrid1;

     |PULSATECLA;
|FPRO;
