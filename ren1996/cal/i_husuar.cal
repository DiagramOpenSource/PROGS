|FICHEROS;
    rehusuar #100;
|FIN;

|VARIABLES;
     &HContribu  = 0;
     &HRefer     = 0;
     &HNombre    = "";
     &HFecha     = @;
     &HHora      = 0;
     &HMinuto    = 0;
     &HTipo      = "";
     &HPrograma  = "";
     &HLinea     = 0;
     &HPerceptor = "";
     &HRdto      = 0;
     &HUsuario   = "";
     &QueTipo   = 0;

     Hora       = "";
|FIN;

|PROCESO AltaHistorico;
HRefer = 0;
|ABRE #100;
#100#0 = HContribu;
#100#1 = 9999;
|LEE 000#100];
|SI FSalida = 0;
    |LEE 000#100a;
|SINO;
    |LEE 000#100u;
|FINSI;

|SI FSalida = 0;|Y #100#0 = HContribu;
        HRefer = #100#1 + 1;
|SINO;
        HRefer = 1;
|FINSI;

|HORA Hora;

HFecha   = ~;
HHora    = (A\(Hora % 102));
HMinuto  = (A\(Hora % 402));
HUsuario = Usuario % 810;

#100#00 = HContribu;
#100#01 = HRefer;
#100#02 = HNombre;
#100#03 = HFecha;
#100#04 = HHora;
#100#05 = HMinuto;
#100#06 = HTipo;
#100#07 = HPrograma;
#100#08 = HLinea;
#100#09 = HPerceptor;
#100#10 = HRdto;
#100#11 = HUsuario;

|GRABA 140#100n;
|CIERRA #100;
|FPRC;
