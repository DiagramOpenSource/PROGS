|FICHEROS;
     dsay0012 #0;
     dsam0000 #1;
     :/basica/def/agitab04 #2;
     dsam0011 #11;
|FIN;

|VARIABLES;
     nCampo = 0;
     nSwHay = 0;
     nSwSi  = 0;

     aDSit = "";
     aHSit = "";
     nDTCl = 0;
     nHTCl = 0;
     nDTEm = 0;
     nHTEm = 0;

    nPara1 = 0;

    aAlfa = "";
|FIN;

|PROCESO Seleccion;
     |SI #0#2 = "D";
         |C_M #0#3, 1, "S";
         |C_M #0#4, 1, "S";
         |PARA nCampo = 5;  |SI nCampo [ 16;  |HACIENDO nCampo = nCampo + 1;
               |C_M #0nCampo, 1, "N";  #0nCampo = -1;  |PINTA #0nCampo;
         |SIGUE;
     |SINO;
         |C_M #0#3, 1, "N";  #0#3 = 0;      |PINTA #0#3;
         |C_M #0#4, 1, "N";  #0#4 = 99;     |PINTA #0#4;
         |PARA nCampo = 5;  |SI nCampo [ 16;  |HACIENDO nCampo = nCampo + 1;
               |C_M #0nCampo, 1, "S";
         |SIGUE;
     |FINSI;
|FPRC;

|PROCESO NoMasEmpresas;
     |SI #0Campo = -1;
         |PARA nCampo = Campo + 1;  |SI nCampo [ 16;  |HACIENDO nCampo = nCampo + 1;
               #0Campo = -1;  |C_M #0nCampo, 1, "N";  |PINTA #0Campo;
         |SIGUE;
     |SINO;
         |PARA nCampo = Campo + 1;  |SI nCampo [ 16;  |HACIENDO nCampo = nCampo + 1;
               |C_M #0nCampo, 1, "S"; |PINTA #0Campo;
         |SIGUE;
     |FINSI;
|FPRC;

|| ************************************************************************

|PROCESO Imprimelos;
     |SI #0#2 = "P";
         nSwSi = 0;
         |PARA nPara1 = 5; |SI nPara1 [ 16; |HACIENDO nPara1 = nPara1 + 1;
               |SI #1#9 = #0nPara1;
                   nSwSi = 1;
                   |SAL;
               |FINSI;
         |SIGUE;

         |SI nSwSi = 0; |ACABA; |FINSI;
     |FINSI;

     |PRINT;
     nSwHay = 1;
|FPRC;

|DEFBUCLE porNombre;
     #1#2;
     0, 9, 50, 85, 110;
     #0#17, #0#0, nDTEm, nDTCl, aDSit, #0#23;
     #0#18, #0#1, nHTEm, nHTCl, aHSit, #0#24;
     ;
     NULL, Imprimelos;
|FIN;

|DEFBUCLE porCodigo;
     #1#1;
     1, 9, 50, 85, 110;
     #0#0, #0#17, nDTEm, nDTCl, aDSit, #0#23;
     #0#1, #0#18, nHTEm, nHTCl, aHSit, #0#24;
     ;
     NULL, Imprimelos;
|FIN;

|PROCESO Tipo3;  |TIPO 3;

     |IMPRE 0;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     |INFOR "dsay0012";
     |SI FSalida ! 0;  |FINIMP;  |ACABA;  |FINSI;

 || ...  Situacion Activa/Inactiva
     |SI #0#20 = "X";
         aDSit = "A"; aHSit = "Z";
     |SINO;
          aDSit = #0#20; aHSit = #0#20;
     |FINSI;

 || ... Tipo Cliente
      |SI #0#19 = "X";
          nDTCl = 0; nHTCl = 2;
      |SINO;
          nDTCl = #0#19; nHTCl = #0#19;
      |FINSI;

 || ... Tipo Empresa
      |SI #0#2 = "D";
          nDTEm = #0#3; nHTEm = #0#4;
      |SINO;
          nDTEm = 0; nHTEm = 99;
      |FINSI;

      nSwHay = 0;
      |SI #0#21 = 1;
          |BUCLE porCodigo;
      |SINO;
          |BUCLE porNombre;
      |FINSI;

      |SI  nSwHay = 1;
           |PIEINF;
      |FINSI;

      |FININF;
      |FINIMP;
|FPRC;

|PROCESO PintaCausa;
   |ABRE #dsam0011;
   #dsam0011#0 = #dsay0012#Campo#;
   |LEE 000#dsam0011.=;
   |SI FSalida ! 0; |DDEFECTO #dsam0011; |FINSI;
   aAlfa = #dsam0011#1; |QBF aAlfa; aAlfa = (aAlfa + (" " * 40)) % 0140;
   |SI Campo = 23; |PINTA 1130, aAlfa; |FINSI;
   |SI Campo = 24; |PINTA 1230, aAlfa; |FINSI;
   |CIERRA #dsam0011;
|FPRC;
