|FICHEROS;
    dsam0000;
    dsam0025;
    dsam0105;
    dsam0109;
    dsam0125;

    dsaw0013,MANTE;
    dsat0006,MANTE;
|FIN;

|VARIABLES;
     nBoton2    = -1;
     nBoton3    = -1;
     nBoton4    = -1;
     nBoton8    = -1;
     nNoGraba   = 0;
     nPara1     = 0;
     nTecla     = 0;
     nImporte   = 0;
     nImport2   = 0;
     aBase      = "";
     aDef       = "";
     aAlfa      = "";

     &enEmpresa = 0;
     &enEmpPD   = 0;
     &enConPD   = 0;
     &enEjer    = 0;
     &aFuncion  = "";
     &enNoPregunta = 0;

     &eaFichero  = "";
     &eaDLiqu    = "";
     &eaHLiqu    = "";
     &enDEmpresa = 0;
     &enHEmpresa = 0;
     &enDAgente  = 0;
     &enHAgente  = 0;
     &enDConve   = 0;
     &enHConve   = 0;
     &enDMes     = 0;
     &enHMes     = 0;
     &eaTipoImp  = "";
|FIN;

|| ///////////////////////////////
|PROCESO Tipo0C32t006; |TIPO 0;
    #dsat0006#32 = #dsat0006#32 > " ";
    |SI #dsat0006#32 = "S"; #dsat0006#32 = "*"; |FINSI;
    |SI #dsat0006#32 = "N"; #dsat0006#32 = " "; |FINSI;
    |SI #dsat0006#32 ! "*"; |Y #dsat0006#32 ! " ";
        |ERROR;
    |FINSI;
|FPRC;

|PROCESO Calculot006; TIPO 0;
     #dsat0006#15 = (#dsat0006#8 % #dsat0006#12) ! 2; |PINTA #dsat0006#15;
     #dsat0006#21 = (#dsat0006#9 % #dsat0006#12) ! 2; |PINTA #dsat0006#21;
|FPRC;

|PROCESO MTipo5;  |TIPO 5;
     |LEE 040#dsat0006.p;
     #dsat0006#13 = "N";
     |LINEAS_BI_ATRI #dsat0006#13, D, S, -1;
|FPRC;

|PROCESO Tipo12; |TIPO 12;
  ||
|FPRC;

|PROCESO EntraDatos;

   |LEE 141#dsat0006.=;
   |SI #dsat0006#13 = "S"; |Y eaTipoImp ! "R";
       |CONFI "0000NComision ya Liquidada, continuar";
       |SI FSalida ! 0;
           |LIBERA #dsat0006;
           |ACABA;
       |FINSI;
   |FINSI;
   |SI #dsat0006#19 = "S"; |Y eaTipoImp ! "P";
       |CONFI "0000NComision ya Liquidada, continuar";
       |SI FSalida ! 0;
           |LIBERA #dsat0006;
           |ACABA;
       |FINSI;
   |FINSI;

   nNoGraba = 0;
   nImporte = #dsaw0013#4 - (#dsat0006#15 + #dsat0006#21);

|ET Campo12;
   |ENCAMPO #12#dsat0006;
   |SI FSalida = 7; nNoGraba = 1; |VETE Fin; |FINSI;
   |SI FSalida = 1; |VETE Fin; |FINSI;

|ET Campo8;
   |ENCAMPO #8#dsat0006;
   |SI FSalida = 7; nNoGraba = 1; |VETE Fin; |FINSI;
   |SI FSalida = 1; |VETE Fin; |FINSI;
   |SI FSalida = 2; |VETE Campo12; |FINSI;

|ET Campo9;
   |ENCAMPO #9#dsat0006;
   |SI FSalida = 7; nNoGraba = 1; |VETE Fin; |FINSI;
   |SI FSalida = 1; |VETE Fin; |FINSI;
   |SI FSalida = 2;
       |SI eaTipoImp ! "R";
           |VETE Campo8;
       |SINO;
           |VETE Campo12;
       |FINSI;
   |FINSI;

|ET Campo32;
   |ENCAMPO #32#dsat0006;
   |SI FSalida = 7; nNoGraba = 1; |VETE Fin; |FINSI;
   |SI FSalida = 1; |VETE Fin; |FINSI;
   |SI FSalida = 2;
       |SI eaTipoImp ! "P";
           |VETE Campo9;
       |SINO;
           |VETE Campo8;
       |FINSI;
   |FINSI;

|ET Fin;
   |SI nNoGraba = 0;
       #dsaw0013#4 = nImporte + #dsat0006#15 + #dsat0006#21;
       |PINTA #dsaw0013#4;
       |GRABA 020#dsat0006.a;
   |FINSI;
   |LIBERA #dsat0006;
|FPRC;

|PROCESO MarcaDatos;
   |LEE 141#dsat0006.=;
   |SI #dsat0006#32 = "*";
       #dsat0006#32 = " ";
   |SINO;
       #dsat0006#32 = "*";
   |FINSI;
   |PINTA #dsat0006#32;

   |GRABA 020#dsat0006.a;
   |LIBERA #dsat0006;
|FPRC;

|PROCESO Boton2m001;
     |PTEC 824;
|FPRC;

|PROCESO Boton3m001;
     |PTEC 825;
|FPRC;


|PROCESO FinBotont006;
     |FIN_CONTROL_WINDOWS nBoton2;
     |FIN_CONTROL_WINDOWS nBoton3;
     |PULSATECLA;
|FPRC;

|PROCESO Tipo0t006;  |TIPO 0;
     |HAZ FinBotont006;
|FPRC;

|PROCESO Tipo7t006;  |TIPO 7;
     |BLIN 04;

     aAlfa = "COMISION DE LA POLIZA Y/O DE LA REGULARIZACION";
     |SI eaTipoImp = "R";  aAlfa = "COMISION DE LA REGULARIZACION";  |FINSI;
     |SI eaTipoImp = "P";  aAlfa = "COMISION DE LA POLIZA";          |FINSI;

     |ATRI S; |PINTA 1008, aAlfa; |ATRI 0;

     |CONTROL_SIMPLE 0, "LBOTON,F2  Modificar Datos    ", 1136, 1156, Boton2m001;
     nBoton2 = FSalida;

     |CONTROL_SIMPLE 0, "LBOTON,F3  Marcar/Desmarcar    ", 1158, 1178, Boton3m001;
     nBoton3 = FSalida;

|FPRC;

|PROCESO Tipo11t006;  |TIPO 11;
     nTecla = FSalida;

     |HAZ FinBotont006;

     enEmpresa     = #dsat0006#0;
     enEjer        = #dsat0006#1;
     enEmpPD       = #dsat0006#3;
     enConPD       = #dsat0006#2;

     |SI nTecla = 10;
         enNoPregunta = 0;
         |HAZ EntraDatos;
         |PONCONTROL  23, "SI";
     |FINSI;

     |SI nTecla = 11;
         enNoPregunta = 0;
         |HAZ MarcaDatos;
         |PONCONTROL  23, "SI";
         |ACABA;
     |FINSI;
|FPRC;
