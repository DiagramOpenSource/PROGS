|FICHEROS;
     dsam0120;
     dsam0122;
|FIN;

|VARIABLES;
      aIPRemoto = "";

     &enCodigo = 0;
     &eaDSMAC  = "";
|FIN;

|PROCESO CambiaAMac120;
     aIPRemoto = "";
     |IP_REMOTO aIPRemoto;   |QBT aIPRemoto;

     |HAZ CogeMac;

     #dsam0120#0 = enCodigo;
     #dsam0120#1 = eaDSMAC;
     |LEE 000#dsam0120.=;
     |SI FSalida ! 0;
         #dsam0120#0 = enCodigo;
         #dsam0120#1 = aIPRemoto;
         |LEE 000#dsam0120.=;
         |SI FSalida = 0;
             #dsam0120#0 = enCodigo;
             #dsam0120#1 = eaDSMAC;
             |GRABA 020#dsam0120.n;
             |LIBERA #dsam0120;
         |FINSI;
     |FINSI;
|FPRC;

|PROCESO CambiaAMac122;
     aIPRemoto = "";
     |IP_REMOTO aIPRemoto;   |QBT aIPRemoto;

     |HAZ CogeMac;

     #dsam0122#0 = enCodigo;
     #dsam0122#1 = eaDSMAC;
     |LEE 000#dsam0122.=;
     |SI FSalida ! 0;
         #dsam0122#0 = enCodigo;
         #dsam0122#1 = aIPRemoto;
         |LEE 000#dsam0122.=;
         |SI FSalida = 0;
             #dsam0122#0 = enCodigo;
             #dsam0122#1 = eaDSMAC;
             |GRABA 020#dsam0122.n;
             |LIBERA #dsam0122;
         |FINSI;
     |FINSI;
|FPRC;
