|FICHEROS;
     :/integral/def/dsam0023,MANTE;
     :/integral/def/dsam0000;
     :/integral/def/dsam0109;

     dsam023@;
|FIN;

|VARIABLES;
     nModo       = 0;
     nInkey      = 0;
     aAlfa       = "";
     nNume1      = 0;
     aDef        = "";
     aBase       = "";
     nHMes       = 0;
     nHEjer      = 0;
     &enEmpresa  = 0;
|FIN;

|PROCESO Tipo7m0023; |TIPO 7;
   |PINTA 1071, "        ";
   |PINTA 1175,     "    ";

   #dsam0023#0 = enEmpresa;
   nModo = (FEntrada / 100) ! 0;
   |SI nModo = 1;
      |DBASE aBase;
      aDef = aBase + "def/dsam0023";
      |CARGA_DEF aDef, dsam023@;
      |SI FSalida = 0;
          #dsam0023#1 = 2019;
          #dsam0023#2 = 01;
          |ABRE #dsam023@;
          #dsam023@#0 = #dsam0023#0;
          #dsam023@#1 = 9999;
          |LEE 041#dsam023@.];
          |SI FSalida = 0;
              |LEE 041#dsam023@.a;
          |SINO;
              |LEE 041#dsam023@.u;
          |FINSI;
          |SI FSalida = 0; |Y #dsam023@#0 = #dsam0023#0;
              #dsam0023#1 = #dsam023@#1 + 1;
          |FINSI;
          |CIERRA #dsam023@;
          |DESCARGA_DEF #dsam023@;
          |PINTA #dsam0023#1;
          |PINTA #dsam0023#2;
       |FINSI;
   |FINSI;
|FPRC;

|PROCESO Tipo11m0023; |TIPO 11;
   nInkey = FSalida;

   aAlfa = "N";
   |SI nInkey = 13;
       |ATRI R;
       |PINTA 1071, "Modifica";
       |PINTA 1175,     "TODO";
       |ATRI 0;
       aAlfa = "S";
       |ERROR;
       |PTEC 802;
       |PTEC 802;
   |FINSI;
   |C_M #dsam0023#13,1,aAlfa;
   |C_M #dsam0023#14,1,aAlfa;
   |C_M #dsam0023#15,1,aAlfa;
   |C_M #dsam0023#16,1,aAlfa;
   |C_M #dsam0023#17,1,aAlfa;
   |C_M #dsam0023#18,1,aAlfa;
|FPRC;

|PROCESO LeoEspejo;
   #dsam0023#3 = #dsam023@#3;
   #dsam0023#4 = #dsam023@#4;
   #dsam0023#5 = #dsam023@#5;
   #dsam0023#6 = #dsam023@#6;
   #dsam0023#7 = #dsam023@#7;
   #dsam0023#8 = #dsam023@#8;
   #dsam0023#9 = #dsam023@#9;
   #dsam0023#10 = #dsam023@#10;

   #dsam0023#12 = #dsam023@#12;
|FPRC;

|DEFBUCLE LeoEspejo;
  #dsam023@#1003;
  ;
  enEmpresa, 2000, 01;
  enEmpresa, nHEjer, nHMes;
  e;
  NULL, LeoEspejo;
|FIN;

|PROCESO IgualCampos23;

   nHMes  = #dsam0023#2 - 1;
   nHEjer = #dsam0023#1;
   |SI nHMes = 0;
       nHMes  = 12;
       nHEjer = #dsam0023#1 - 1;
   |FINSI;
   |DBASE aBase;
   aDef = aBase + "def/dsam0023";
   |CARGA_DEF aDef, dsam023@;
   |SI FSalida = 0;
       |BUCLE LeoEspejo;
       |DESCARGA_DEF #dsam023@;

       |PINDA #0#dsam0023;
   |FINSI;
|FPRC;

|PROCESO LeeEmpProteccion; |TIPO 0;

   aAlfa = Contenido;
   nNume1 = aAlfa;

   |ABRE #dsam0109;
   #dsam0109#0 = #dsam0023#3;
   |LEE 041#dsam0109.=;
   |SI FSalida ! 0;
       |MENAV "0000No existe Empresa de Proteccion de Datos";
       |ERROR;
   |SINO;
       #dsam0023#4 = #dsam0109#2; |PINTA #dsam0023#4;
       |SI nModo = 1; |O nNume1 ! #dsam0023#3;
           #dsam0023#12 = #dsam0109#8; |PINTA #dsam0023#12;
       |FINSI;
   |FINSI;
   |CIERRA #dsam0109;
|FPRC;

|PROCESO Tipo0m0023; |TIPO 0;
   nModo = (FEntrada / 100) ! 0;
   |SI nModo = 1;
       |HAZ IgualCampos23;
   |FINSI;
|FPRC;
