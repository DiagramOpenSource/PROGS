|FICHEROS;
     dsam0000;
     dsam0106;
     dsam0107;

     dsam0107@;
|FIN;

|VARIABLES;
     nGrabo              = 0;

     aAlfa               = "";
     aDef                = "";
|FIN;

|PROCESO dsam0107;
     #dsam0107@#0 = #dsam0000#1;
     #dsam0107@#1 = #dsam0107#1;
     |LEE 000#dsam0107@.=;
     |SI FSalida ! 0;
         |DDEFECTO #dsam0107@;
         #dsam0107@#0 = #dsam0000#1;
         #dsam0107@#1 = #dsam0107#1;
         |GRABA 020#dsam0107@.b;
     |FINSI;

     |SI #dsam0107@#4 ! "                    ";
         |ACABA;
     |FINSI;

     #dsam0107@#2 = #dsam0107#2;
     #dsam0107@#4 = #dsam0107#4;
     |GRABA 020#dsam0107@.a;
     |LIBERA #dsam0107@;

     nGrabo = nGrabo + 1;

     #dsam0106#0 = #dsam0000#1;
     |LEE 000#dsam0106.=;
     |SI FSalida ! 0;
         |DDEFECTO #dsam0106;
         #dsam0106#0 = #dsam0000#1;
         |GRABA 020#dsam0106.n;
         |LIBERA #dsam0106;
     |FINSI;
|FPRC;

|DEFBUCLE dsam0107;
     #dsam0107#1;
     ;
     #dsam0000#2, 01;
     #dsam0000#2, 99;
     ;
     NULL, dsam0107;
|FIN;

|PROCESO dsam0000;
     |SI #dsam0000#1 = #dsam0000#2;
         |ACABA;
     |FINSI;

     |BUCLE dsam0107;
|FPRC;

|DEFBUCLE dsam0000;
     #dsam0000#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, dsam0000;
|FIN;

|PROGRAMA;
     nGrabo = 0;

     |DDEF aDef;
     aDef = aDef + "dsam0107.mas";
     |CARGA_DEF aDef, dsam0107@;

     |ABRET #dsam0106;
     |ABRET #dsam0107;
     |ABRET #dsam0107@;
     |BUCLE dsam0000;
     |CIERRAT #dsam0106;
     |CIERRAT #dsam0107;
     |CIERRAT #dsam0107@;

     |DESCARGA_DEF #dsam0107@;

     aAlfa = "0000Grabado " + nGrabo + " telefonos";
     |MENAV aAlfa;
|FPRO;
