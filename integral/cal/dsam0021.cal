|FICHEROS;
     dsam0021;
|FIN;

|VARIABLES;
     n0Vent           = 0;

     aAlfa            = "";
     aParam           = "";
     aTecla           = "";
     aF2              = "";

     {-1}aVent        = "";
         aVent1       = 0;
         aVent2       = 0;
         aVent3       = 0;
         aVent4       = 0;
         aVent5       = "";

     &enEmpresa       = 0;
     &eaBloqueo       = "";
|FIN;

|PROCESO T12;  |TIPO 12;
     |SI #dsam0021#1 = "1";
         #dsam0021#2  = "";
         #dsam0021#3  = "";
         #dsam0021#4  = "";
         #dsam0021#5  = "";
         #dsam0021#6  = "";
         #dsam0021#7  = "";
         #dsam0021#8  = "";
         #dsam0021#9  = "";
         #dsam0021#10 = "";
         #dsam0021#11 = "";
     |FINSI;
|FPRC;

|PROCESO T0C1;  |TIPO 0;
     |C_M #dsam0021#2, 1, "S";

     |SI #dsam0021#1 = "1";
         |C_M #dsam0021#2, 1, "N";
     |FINSI;

     |PINTA #dsam0021#2;
|FPRC;

|PROCESO EntraBloqueo;
     |VENTANA 0501, 2499, -1, 16, "Bloqueo del cliente";
     n0Vent = FSalida;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = n0Vent;
     aVent5 = "MODAL";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     #dsam0021#0 = enEmpresa;
     |LEE 101#dsam0021.=;

     |PINPA #0#dsam0021;
     |PINDA #0#dsam0021;
     |ENDATOS #1#dsam0021;
     |SI FSalida = 0;
         |GRABA 020#dsam0021.a;
     |FINSI;
     |LIBERA #dsam0021;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = n0Vent;
     aVent5 = "MODELESS";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     |FINVENTANA n0Vent;
|FPRC;

|PROCESO PantaBloqueo;
     |SI #dsam0021#1 = "2";
         |VENTANA 0501, 2480, -1, 16, "Cliente con aviso ";
     |FINSI;

     |SI #dsam0021#1 = "3";
         |VENTANA 0501, 2480, -1, 16, "Cliente bloqueado ";
     |FINSI;

     n0Vent = FSalida;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = n0Vent;
     aVent5 = "MODAL";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     aAlfa = "LABEL,{{15}}" + #dsam0021#2;  |QBF aAlfa;
     |CONTROL_SIMPLE 0, aAlfa, 0602, 0680, NULL;

     aAlfa = "LABEL,{{15}}" + #dsam0021#3;  |QBF aAlfa;
     |CONTROL_SIMPLE 0, aAlfa, 0702, 0780, NULL;

     aAlfa = "LABEL,{{15}}" + #dsam0021#4;  |QBF aAlfa;
     |CONTROL_SIMPLE 0, aAlfa, 0802, 0880, NULL;

     aAlfa = "LABEL,{{15}}" + #dsam0021#5;  |QBF aAlfa;
     |CONTROL_SIMPLE 0, aAlfa, 0902, 0980, NULL;

     aAlfa = "LABEL,{{15}}" + #dsam0021#6;  |QBF aAlfa;
     |CONTROL_SIMPLE 0, aAlfa, 1002, 1080, NULL;

     aAlfa = "LABEL,{{15}}" + #dsam0021#7;  |QBF aAlfa;
     |CONTROL_SIMPLE 0, aAlfa, 1102, 1180, NULL;

     aAlfa = "LABEL,{{15}}" + #dsam0021#8;  |QBF aAlfa;
     |CONTROL_SIMPLE 0, aAlfa, 1202, 1280, NULL;

     aAlfa = "LABEL,{{15}}" + #dsam0021#9;  |QBF aAlfa;
     |CONTROL_SIMPLE 0, aAlfa, 1302, 1380, NULL;

     aAlfa = "LABEL,{{15}}" + #dsam0021#10;  |QBF aAlfa;
     |CONTROL_SIMPLE 0, aAlfa, 1402, 1480, NULL;

     aAlfa = "LABEL,{{15}}" + #dsam0021#11;  |QBF aAlfa;
     |CONTROL_SIMPLE 0, aAlfa, 1502, 1580, NULL;

     |CONTROL_SIMPLE 0, "LABEL,{{16}}Pulse F2 para continuar", 2402, 2480, NULL;

     aF2  = &255 + "824";
     |PARA;  |SI;  |HACIENDO;
          FSalida = "::F2";
          |LEETECLA aTecla;
          |SI aTecla = aF2;
              |SAL;
          |FINSI;
     |SIGUE;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = n0Vent;
     aVent5 = "MODELESS";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     |FINVENTANA n0Vent;
|FPRC;

|PROGRAMA;
     #dsam0021#0 = enEmpresa;
     |LEE 000#dsam0021.=;
     |SI FSalida ! 0;
         |DDEFECTO #dsam0021;
         #dsam0021#0 = enEmpresa;
         |GRABA 020#dsam0021.n;
         |LIBERA #dsam0021;
     |FINSI;

     |SI aParam = "ENTRADA";
         |HAZ EntraBloqueo;
     |FINSI;

     |SI aParam = "PANTALLA";
         |HAZ PantaBloqueo;
         eaBloqueo = #dsam0021#1;
     |FINSI;

     |SI aParam = "CHEQUEO";
         eaBloqueo = #dsam0021#1;
     |FINSI;
|FPRO;

|PROCESO T80;  |TIPO 80;
     |ABRET #dsam0021;

     aAlfa     = PARAMETRO % 105;
     aParam    = PARAMETRO - aAlfa;
     enEmpresa = aAlfa;

     |SI aParam = "CHEQUEO";
         |ACABA;
     |FINSI;

     FSalida = 2499;
|FPRC;

|PROCESO T90;  |TIPO 90;
     |CIERRAT #dsam0021;
|FPRC;
