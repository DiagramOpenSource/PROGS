|FICHEROS;
    dsaz0029;
    dsam0109;
    dsam0110;

    dsat0002,MANTE;
|FIN;

|VARIABLES;
     nBoton2    = -1;
     nBoton8    = -1;
     nNoGraba   = 0;
     nPara1     = 0;
     nTecla     = 0;
     aAlfa      = "";
     nNume1     = 0;

     &enEmpresa = 0;
     &enEjer    = 0;
     &aFuncion  = "";
|FIN;

|| ///////////////////////////////
|PROCESO Tipo66C3; |TIPO 66;
   |SI aFuncion = "A";
       |ABRE #dsam0109;
       #dsam0109#0 = #dsat0002#3;
       |CONSULTA_CLAVE #1#dsam0109;
       #dsat0002#3 = #dsam0109#0;
       |CIERRA #dsam0109;
   |FINSI;

   |SI aFuncion = "B";
       |ABRE #dsam0110;
       #dsam0110#0 = #dsat0002#3;
       |CONSULTA_CLAVE #1#dsam0110;
       #dsat0002#3 = #dsam0110#0;
       |CIERRA #dsam0110;
   |FINSI;

   |PINTA #dsat0002#3;
|FPRC;

|PROCESO LeeEmpProceso; |TIPO 0;
   aAlfa  = Contenido;
   nNume1 = aAlfa;
   |SI nNume1 ! #dsat0002#3;
       |CONFI "0000NCambiar empresa colaboradora";
       |SI FSalida ! 0;
           #dsat0002#3 = nNume1;
           |PINTA #dsat0002#3;
           |ACABA;
      |FINSI;
   |SINO;
      |ACABA;
   |FINSI;

   |SI aFuncion = "A";
       |ABRE #dsam0109;
       #dsam0109#0 = #dsat0002#3;
       |LEE 041#dsam0109.=;
       |SI FSalida ! 0;
           |MENAV "0000No existe Empresa de Proteccion de Datos";
           |ERROR;
       |SINO;
            #dsat0002#4  = #dsam0109#2; |PINTA #dsat0002#4;
            #dsat0002#12 = #dsam0109#8; |PINTA #dsat0002#12;
       |FINSI;
       |CIERRA #dsam0109;
  |FINSI;
  |SI aFuncion = "B";
      |ABRE #dsam0110;
      #dsam0110#0 = #dsat0002#3;
      |LEE 041#dsam0110.=;
      |SI FSalida ! 0;
          |MENAV "0000No existe Empresa de Riesgos Laborales";
          |ERROR;
      |SINO;
           #dsat0002#4  = #dsam0110#2; |PINTA #dsat0002#4;
           #dsat0002#12 = #dsam0110#8; |PINTA #dsat0002#12;
           #dsat0002#13 = #dsam0110#9; |PINTA #dsat0002#13;
       |FINSI;
       |CIERRA #dsam0110;
  |FINSI;
|FPRC;

|PROCESO Tipo12; |TIPO 12;
  ||
|FPRC;

|PROCESO EntraDatos;

   |LEE 141#dsat0002.=;

   nNoGraba = 0;

|ET Campo3;
   |ENCAMPO #3#dsat0002;
   |SI FSalida = 7; nNoGraba = 1; |VETE Fin; |FINSI;
   |SI FSalida = 1; |VETE Fin; |FINSI;

|ET Campo11;
   |ENCAMPO #11#dsat0002;
   |SI FSalida = 7; nNoGraba = 1; |VETE Fin; |FINSI;
   |SI FSalida = 2; |VETE Campo3; |FINSI;

|ET Campo12;
   |ENCAMPO #12#dsat0002;
   |SI FSalida = 7; nNoGraba = 1; |VETE Fin; |FINSI;
   |SI FSalida = 2; |VETE Campo11; |FINSI;

|ET Campo13;
   |ENCAMPO #13#dsat0002;
   |SI FSalida = 7; nNoGraba = 1; |VETE Fin; |FINSI;
   |SI FSalida = 2; |VETE Campo12; |FINSI;

|ET Fin;
   |SI nNoGraba = 0;
       |GRABA 020#dsat0002.a;
   |FINSI;

   |LIBERA #dsat0002;
|FPRC;

|PROCESO Boton2m001;
     |PTEC 824;
|FPRC;

|PROCESO Boton8m001;
     |PTEC 830;
|FPRC;

|PROCESO FinBotont002;
     |FIN_CONTROL_WINDOWS nBoton2;
     |FIN_CONTROL_WINDOWS nBoton8;
     |PULSATECLA;
|FPRC;

|PROCESO Tipo0t002;  |TIPO 0;
     |HAZ FinBotont002;
|FPRC;

|PROCESO Tipo7t002;  |TIPO 7;
     |BLIN 04;

     |CONTROL_SIMPLE 0, "LBOTON,F2  Modificar Datos ", 0646, 0661, Boton2m001;
     nBoton2 = FSalida;

     |CONTROL_SIMPLE 0, "LBOTON,F8  Dar de baja ", 0663, 0678, Boton8m001;
     nBoton8 = FSalida;
|FPRC;

|PROCESO Tipo11t002;  |TIPO 11;
     nTecla = FSalida;

     |HAZ FinBotont002;

     enEmpresa     = #dsat0002#0;
     enEjer        = #dsat0002#1;

     |SI nTecla = 10;
         |HAZ EntraDatos;
         |PONCONTROL  23, "SI";
     |FINSI;

     |SI nTecla = 16;
         |CONFI "0000SDesea borrar el registro";
         |SI FSalida = 0;
             |LEE 141#dsat0002.=;
             |BORRA 020#dsat0002.a;
             |LIBERA #dsat0002;
         |FINSI;
         |PONCONTROL  23, "SI";
     |FINSI;
|FPRC;
