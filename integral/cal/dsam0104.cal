|FICHEROS;
    dsam0104 #104;
|FIN;

|VARIABLES;
     nModo        = 0;
     nHandle      = 0;
     aLineaMenu   = "";
     aAlfa        = "";
     aAlfa1       = "";
     aAlfa2       = "";
     aAlfa3       = "";
     &eaPrograma  = "";
     &eaExtension = "";
|FIN;

|PROCESO RecogeDatos;

     aAlfa2 = &013;
     aAlfa3 = &010;
     aAlfa = "/u/dsprofes/integral/plantillas/Tabla_Paises.txt";
     |XABRE "AB",  aAlfa,  nHandle;

     aAlfa1 = "";
     |PARA;  |SI;  |HACIENDO;

          |XLEE nHandle, 1, aLineaMenu;
          |SI FSalida [ 0;  |SAL;  |FINSI;
          |SI aLineaMenu ! aAlfa2; |Y aLineaMenu ! aAlfa3;
              aAlfa1 = aAlfa1 + aLineaMenu;
          |SINO;
              aAlfa = aAlfa1 % 0103;  #104#0 = aAlfa;
              |LEE 141#104=;
              |SI FSalida ! 0;
                  |DDEFECTO #104;
                  aAlfa = aAlfa1 % 0103;  #104#0 = aAlfa;
                  |GRABA 020#104b;
              |FINSI;
              aAlfa = aAlfa1 %  403;  #104#6 = aAlfa;
              aAlfa = aAlfa1 %  803;  #104#4 = aAlfa;
              aAlfa = aAlfa1 % 1240;  #104#1 = aAlfa;
              #104#5 = "S";
              |GRABA 020#104a;
              |LIBERA #104;
              |PINDA #0#104;
              aAlfa1 = "";
          |FINSI;
     |SIGUE;
     |XCIERRA nHandle;
|FPRC;

|PROCESO Tipo8F104; |TIPO 8;
||   ... para hacer la carga automatica
     |ABRE #104;
     |HAZ RecogeDatos;
     |CIERRA #104;

/*
     |ABRE #104;
     #104#0 = "AF ";
     |LEE 141#104=;
     |SI FSalida ! 0; |O #104#6 = "   ";
         |CIERRA #104;
         eaExtension = "int";
         eaPrograma  = "dsam0104";
         |SUB_EJECUTA_NP ":basica/dspatron";

         eaExtension = "bas";
         eaPrograma  = "agim0016";
         |SUB_EJECUTA_NP ":basica/dspatron";
     |SINO;
         |CIERRA #104;
     |FINSI;
*/


|FPRC;
