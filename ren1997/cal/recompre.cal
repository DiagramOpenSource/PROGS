|FICHEROS
   recompre #0;
   redatcon #1;
   rew00001 #99;
   rew00002 #98;
   rew00003 #97;
|FIN;

|INCLUYE i_varcre;
|INCLUYE i_consul;

|| **************************************************************************
||                           PROCESOS DEL PROGRAMA
|| **************************************************************************

|PROCESO seleccion; |TIPO 0;
|SI #0#0 = "S";
    |CAMPO_MODIFICA #0#01, 1, "S";
    |CAMPO_MODIFICA #0#02, 1, "S";

    |PARA xxx = 3; |SI xxx [ 32; |HACIENDO xxx = xxx + 1;
          #0xxx = 0; |PINTA #0xxx;
          |CAMPO_MODIFICA #0xxx, 1, "N";
    |SIGUE;
|SINO;
    #0#1 = 00001; |PINTA #0#1;    |CAMPO_MODIFICA #0#01, 1, "N";
    #0#2 = 99999; |PINTA #0#2;    |CAMPO_MODIFICA #0#02, 1, "N";

    |PARA xxx = 3; |SI xxx [ 32; |HACIENDO xxx = xxx + 1;
          |CAMPO_MODIFICA #0xxx, 1, "S";
    |SIGUE;
|FINSI;
|FPRC;

|PROCESO modiliq; |TIPO 0;
tipliq = "";
|CAMPO_MODIFICA #0#36, 1, "S";
|SI #0#35 = "N"; |CAMPO_MODIFICA #0#36, 1, "N"; |FINSI;
|FPRC;

|PROCESO Longi; |TIPO 0;
|C_M #0#38, 1, "S";
|C_M #0#40, 1, "S";
|SI #0#37 = "S";
    |C_M #0#38, 1, "N";
    |C_M #0#40, 1, "N";
|FINSI;
|FPRC;

|| **************************************************************************
||                           PROCESOS DATOS CONTRIBUYENTE
|| **************************************************************************

|PROCESO imprime_borra;
#97#0 = #98#0;
#97#1 = #98#1;
#97#2 = #98#2;
#97#3 = #98#3;
#97#4 = #98#4;

|SI #97#4 = 4; #97#4 = 3; |FINSI;
|SI #98#4 = 4;
    |SI LineaEspacio = 0; LineaEspacio = 1; |FINSI;
    |PARA x = 1; |SI x [ LineaEspacio; |HACIENDO x = x + 1;
          |PRINT;
    |SIGUE;
|SINO;
    |PRINT;
|FINSI;
|FPRC;

|DEFBUCLE rew00002;
#98#1;
;
0000000000;
9999999999;
;
NULL, imprime_borra;
|FIN;

|PROCESO al_tajo;
|ABRE #1;
#1#0 = #99#0;
|LEE 040#1=;
|SI FSalida ! 0; |DDEFECTO #1; |FINSI;
|CIERRA #1;

cif       = #1#2;
swporta   = 0;
linea     = 0;
hoja      = 0;
SwEspacio = 0;

|SI portada = "S";
    |INFOR "redatcon";
    |SI FSalida = 0;
        |PRINT; |PIEINF; |FININF;
    |FINSI;
|FINSI;

|SI borrador = "N";
    |HAZ recomp01;
    |HAZ recomp02;
    |HAZ recomp03;
    |HAZ recomp07;
    |HAZ recomp04;
    |HAZ recomp05;
    |HAZ recomp06;
|SINO;
    |ABRE #98; |CIERRA #98; |DELINDEX #98;

    |ABRE #98;

    |HAZ recomb01;   || Rdtos.Trabajos. Capital Inmobiliario
    |HAZ recomb02;   || Capital Mobiliario
    |HAZ recomb03;   || Actividades Profesionales
    |HAZ recomb04;   || Actividades Empresariales
    |HAZ recomb08;   || Actividades Empresariales
    |HAZ recomb05;   || Ret.Pagos, Activos Afectos, Rdtos.Irregulares,Anualidades
    |HAZ recomb06;   || Incrementos y Disminuciones
    |HAZ recomb07;   || Deducciones

    |CIERRA #98;

    |INFOR "recompre";
    |SI FSalida ! 0; |DELINDEX #98; |FINSI;

    |BUCLE rew00002;

    |PIEINF; |FININF;

    |SI liquidaci = "S"; |HAZ liquidac; |FINSI;

    |ABRE #98; |CIERRA #98; |DELINDEX #98;
|FINSI;
|FPRC;

|DEFBUCLE rew00001;
#99#1;
5;
00000, " ", "S";
99999, "n", "S";
be;
NULL, al_tajo;
|FIN;

|PROCESO tipo_3; |TIPO 3;
LineaInforme = #0#38 - 1;
LineaEspacio = #0#39;
TopeLinea    = #0#38 - 8;
SaltoPagina  = #0#40;

liquidaci = #0#35;
tipliq    = #0#36;
borrador  = #0#37;
portada   = #0#34;

|IMPRE 0;
|SI FSalida ! 0; |ACABA; |FINSI;

|HAZ carga_index;

|SI x = 0; |ACABA; |FINSI;

|BUCLE rew00001;

|FINIMP;
|DELINDEX #99;
|FPRC;

|PROCESO graba_index;
#99#0 = #1#0;
#99#1 = " ";
#99#2 = "--------";
#99#3 = #1#1;
#99#4 = 1;
#99#5 = "S";
#99#6 = 1;
|GRABA 040#99n;
x = 1;
|FPRC;

|DEFBUCLE redatcon;
#1#1;
;
d_empre;
h_empre;
;
NULL, graba_index;
|FIN;

|RUTINA inferior;
#99#0 = 1;
#99#1 = " ";
|FRUT;

|RUTINA superior;
#99#0 = 99999;
#99#1 = "z";
|FRUT;

|PROCESO carga_index;
comienza = "05";
|HAZ fichero;
|NOME_DAT #99 fichero;
|ABRE #99; |CIERRA #99; |DELINDEX #99;

comienza = "06";
|HAZ fichero;
|NOME_DAT #98 fichero;
|ABRE #98; |CIERRA #98; |DELINDEX #98;

|ABRE #98; |CIERRA #98; |DELINDEX #98;

|ABRE #99;
x = 0;
|SI #0#0 = "S";
    d_empre = #0#1;
    h_empre = #0#2;
    |BUCLE redatcon;
|SINO;
    |PARA xxx = 3; |SI xxx [ 32; |HACIENDO xxx = xxx + 1;
          |SI #0xxx ! 0;
              d_empre = #0xxx;
              h_empre = #0xxx;
              |BUCLE redatcon;
          |FINSI;
    |SIGUE;
|FINSI;
|CIERRA #99;

|SI x = 0; |ACABA; |FINSI;

|SI #0#33 = "N"; |ACABA; |FINSI;

|ENTLINEAL #1#99, 1, 4, 19, 1, inferior, superior;
|FPRC;

|PROCESO funcion1; |TIPO 11;
|SI FSalida ! 9; |ACABA; |FINSI;

|LIBERA #99;
|LEE 140#99=;

|SI #99#5 = "S"; #99#5 = "N"; |SINO; #99#5 = "S"; |FINSI;
|PINTA #99#5;
|GRABA 140#99a;
|FPRC;
