|FICHEROS;
    reinfimp #0;
    redatcon #1;
    recapinm #3;
    reliquid #4;
    reacceso #5;
    retabla3 #9;
    rey00100 #99;
    rew00009 #900;
|FIN;

|VARIABLES;
    Tempo       = "";
    Valfa       = "";
    SwInf       = 0;
    SwEstar     = 0;
    Parrilla    = 0;
    Casilla     = 0;
    Casilla1    = 0;
    Casilla2    = 0;
    Casilla3    = 0;
    FEstado     = 0;
    Porce       = 0;
    Para1       = 0;
    DClien      = 0;
    HClien      = 0;

    &Temporal = "";
    &Cliente01 = 0;
    &Cliente02 = 0;
    &Cliente03 = 0;
    &Cliente04 = 0;
    &Cliente05 = 0;
    &Cliente06 = 0;
    &Cliente07 = 0;
    &Cliente08 = 0;
    &Cliente09 = 0;
    &Cliente10 = 0;
    &Cliente11 = 0;
    &Cliente12 = 0;
    &Cliente13 = 0;
    &Cliente14 = 0;
    &Cliente15 = 0;
    &Cliente16 = 0;
    &Cliente17 = 0;
    &Cliente18 = 0;

    &SubTotal = 0;
|FIN;

|INCLUYE i_consul;

|PROCESO Parrilla; |TIPO 0;
  |SI #0#18 = "N";
      |PARA Casilla = 19; |SI Casilla [ 36; |HACIENDO Casilla = Casilla + 1;
            #0Casilla = 0; |PINTA #0Casilla;
            |CAMPO_MODIFICA #0Casilla, 1, "N";
      |SIGUE;
      |CAMPO_MODIFICA #0#00, 1, "S";
      |CAMPO_MODIFICA #0#01, 1, "S";
  |SINO;
      #0#0 = 1;     |PINTA #0#0;
      #0#1 = 99999; |PINTA #0#1;
      |PARA Casilla = 19; |SI Casilla [ 36; |HACIENDO Casilla = Casilla + 1;
            |CAMPO_MODIFICA #0Casilla, 1, "S";
      |SIGUE;
      |CAMPO_MODIFICA #0#00, 1, "N";
      |CAMPO_MODIFICA #0#01, 1, "N";
  |FINSI;
|FPRC;

|PROCESO LeeLiqui;
  |DDEFECTO #4;
  |ABRE #4;
  #4#0 = #1#0;
  |LEE 040#4=;
  |SI FSalida ! 0; |DDEFECTO #4; |FINSI;
  |CIERRA #4;

  |DDEFECTO #5;
  |ABRE #5;
      #5#0 = #1#0;
  |LEE 0401#5=;
  |SI FSalida ! 0; |DDEFECTO #5; |FINSI;
  |CIERRA #5;
|FPRC;

|PROCESO CargaSpanis;
  |SI #0#2 = "S";
      |SI #1#103 = "O"; #99#0 = #4#8;  |FINSI;
      |SI #1#103 = "o"; #99#0 = #4#8;  |FINSI;
      |SI #1#104 = "O"; #99#1 = #4#9;  |FINSI;
      |SI #1#104 = "o"; #99#1 = #4#9;  |FINSI;
      |SI #1#105 = "O"; #99#2 = #4#10; |FINSI;
      |SI #1#105 = "o"; #99#2 = #4#10; |FINSI;
      |SI #1#106 = "O"; #99#3 = #4#11; |FINSI;
      |SI #1#106 = "o"; #99#3 = #4#11; |FINSI;
      |SI #1#107 = "O"; #99#4 = #4#12; |FINSI;
      |SI #1#107 = "o"; #99#4 = #4#12; |FINSI;
      |SI #1#108 = "O"; #99#5 = #4#13; |FINSI;
      |SI #1#108 = "o"; #99#5 = #4#13; |FINSI;
      |SI #1#109 = "O"; #99#6 = #4#14; |FINSI;
      |SI #1#109 = "o"; #99#6 = #4#14; |FINSI;
  |FINSI;

  |SI #0#3 = "S";
      |SI #1#103 = "S"; #99#0 = #4#8;  |FINSI;
      |SI #1#104 = "S"; #99#1 = #4#9;  |FINSI;
      |SI #1#105 = "S"; #99#2 = #4#10; |FINSI;
      |SI #1#106 = "S"; #99#3 = #4#11; |FINSI;
      |SI #1#107 = "S"; #99#4 = #4#12; |FINSI;
      |SI #1#108 = "S"; #99#5 = #4#13; |FINSI;
      |SI #1#109 = "S"; #99#6 = #4#14; |FINSI;
  |FINSI;

  |SI #0#4 = "S";
      |SI #1#103 = "A"; #99#0 = #4#8;  |FINSI;
      |SI #1#104 = "A"; #99#1 = #4#9;  |FINSI;
      |SI #1#105 = "A"; #99#2 = #4#10; |FINSI;
      |SI #1#106 = "A"; #99#3 = #4#11; |FINSI;
      |SI #1#107 = "A"; #99#4 = #4#12; |FINSI;
      |SI #1#108 = "A"; #99#5 = #4#13; |FINSI;
      |SI #1#109 = "A"; #99#6 = #4#14; |FINSI;
  |FINSI;

  |SI #0#5 ! "N";
      |SI #0#5 = 1; Porce = 60; |FINSI;
      |SI #0#5 = 2; Porce = 40; |FINSI;

      |PARA Casilla = 110; |SI Casilla [ 116; |HACIENDO Casilla = Casilla + 1;
            Casilla1 = Casilla - 110;

            |SI #1Casilla ! "N";
                |SI  #99Casilla1 > 0;
                     #99Casilla1 = #99Casilla1 % Porce;
                |FINSI;
            |FINSI;
      |SIGUE;
  |FINSI;

  |SI #0#8 = "S";
      |SI #1#140 = "S"; #99#7  = #4#35; |FINSI;
      |SI #1#141 = "S"; #99#8  = #4#36; |FINSI;
      |SI #1#194 = "S"; #99#9  = #4#37; |FINSI;
      |SI #1#195 = "S"; #99#10 = #4#38; |FINSI;
      |SI #1#196 = "S"; #99#11 = #4#39; |FINSI;
      |SI #1#197 = "S"; #99#12 = #4#40; |FINSI;
  |FINSI;

  |SI #0#9 ! "T";
      |SI #0#5 = "S";
          |SI #99#0 > 0;
              |SI #0#9 ! #1#131; #99#0  = 0; |FINSI;
          |SINO;
              |SI #0#9 ! #1#124; #99#0  = 0; |FINSI;
          |FINSI;

          |SI #99#1 > 0;
             |SI #0#9 ! #1#132; #99#1  = 0; |FINSI;
          |SINO;
             |SI #0#9 ! #1#125; #99#1  = 0; |FINSI;
          |FINSI;

          |SI #99#2 > 0;
              |SI #0#9 ! #1#133; #99#2  = 0; |FINSI;
          |SINO;
              |SI #0#9 ! #1#126; #99#2  = 0; |FINSI;
          |FINSI;

          |SI #99#3 > 0;
              |SI #0#9 ! #1#134; #99#3  = 0; |FINSI;
          |SINO;
              |SI #0#9 ! #1#127; #99#3  = 0; |FINSI;
          |FINSI;

          |SI #99#4 > 0;
              |SI #0#9 ! #1#135; #99#4  = 0; |FINSI;
          |SINO;
              |SI #0#9 ! #1#128; #99#4  = 0; |FINSI;
          |FINSI;

          |SI #99#5 > 0;
              |SI #0#9 ! #1#136; #99#5  = 0; |FINSI;
          |SINO;
              |SI #0#9 ! #1#129; #99#5  = 0; |FINSI;
          |FINSI;

          |SI #99#6 > 0;
              |SI #0#9 ! #1#137; #99#6  = 0; |FINSI;
          |SINO;
              |SI #0#9 ! #1#130; #99#6  = 0; |FINSI;
          |FINSI;
      |SINO;
          |SI #0#9 ! #1#124; #99#0  = 0; |FINSI;
          |SI #0#9 ! #1#125; #99#1  = 0; |FINSI;
          |SI #0#9 ! #1#126; #99#2  = 0; |FINSI;
          |SI #0#9 ! #1#127; #99#3  = 0; |FINSI;
          |SI #0#9 ! #1#128; #99#4  = 0; |FINSI;
          |SI #0#9 ! #1#129; #99#5  = 0; |FINSI;
          |SI #0#9 ! #1#130; #99#6  = 0; |FINSI;
      |FINSI;

      |SI #0#9 ! #1#138; #99#7  = 0; |FINSI;
      |SI #0#9 ! #1#139; #99#8  = 0; |FINSI;
      |SI #0#9 ! #1#198; #99#9  = 0; |FINSI;
      |SI #0#9 ! #1#199; #99#10 = 0; |FINSI;
      |SI #0#9 ! #1#200; #99#11 = 0; |FINSI;
      |SI #0#9 ! #1#201; #99#12 = 0; |FINSI;
  |FINSI;
|FPRC;

|PROCESO CargaFanta;
  |SI #0#6  = "N";  #900#4 = 0;  |FINSI;
  |SI #0#37 = "N";  #900#6 = 0;  |FINSI;
  |SI #0#7  = "N";  #900#9 = 0;  |FINSI;
  |SI #0#8  = "N";  #900#7 = 0;  |FINSI;

  |SI #900#1 = "T";  #99#1 = #99#1 + #900#4 + #900#6 + #900#9;  |FINSI;
  |SI #900#1 = "C";  #99#2 = #99#2 + #900#4 + #900#6 + #900#9;  |FINSI;
  |SI #900#1 = "1";  #99#3 = #99#3 + #900#4 + #900#6 + #900#9;  |FINSI;
  |SI #900#1 = "2";  #99#4 = #99#4 + #900#4 + #900#6 + #900#9;  |FINSI;
  |SI #900#1 = "3";  #99#5 = #99#5 + #900#4 + #900#6 + #900#9;  |FINSI;
  |SI #900#1 = "4";  #99#6 = #99#6 + #900#4 + #900#6 + #900#9;  |FINSI;

  |SI #900#1 = "T";  #99#7  = #99#7  + #900#7;  |FINSI;
  |SI #900#1 = "C";  #99#8  = #99#8  + #900#7;  |FINSI;
  |SI #900#1 = "1";  #99#9  = #99#9  + #900#7;  |FINSI;
  |SI #900#1 = "2";  #99#10 = #99#10 + #900#7;  |FINSI;
  |SI #900#1 = "3";  #99#11 = #99#11 + #900#7;  |FINSI;
  |SI #900#1 = "4";  #99#12 = #99#12 + #900#7;  |FINSI;
|FPRC;

|DEFBUCLE rew00009;
  #900#1;
  ;
  #1#0, 1;
  #1#0, 9;
  ;
  NULL, CargaFanta;
|FIN;

|PROCESO CargaGuiris;
  Valfa = "";
  Tempo = "";
  |DFICE Valfa;
  |TEMPO Tempo; Temporal = Tempo - Valfa; |NOME_DAT #900 Temporal; |FBORRA Temporal;
  |ABRE #900;  |CIERRA #900;  |DELINDEX #900;


  Cliente01 = #1#0;
  |SUB_EJECUTA "rey00102";       || modelo 210
  |SUB_EJECUTA "rey00103";       || modelo 212
  |SUB_EJECUTA "rey00104";       || modelo 214

  |BUCLE rew00009;

  |SI #0#8 = "S";
      |SI #1#140 = "S"; #99#7  = #99#7  + #4#35; |FINSI;
      |SI #1#141 = "S"; #99#8  = #99#8  + #4#36; |FINSI;
      |SI #1#194 = "S"; #99#9  = #99#9  + #4#37; |FINSI;
      |SI #1#195 = "S"; #99#10 = #99#10 + #4#38; |FINSI;
      |SI #1#196 = "S"; #99#11 = #99#11 + #4#39; |FINSI;
      |SI #1#197 = "S"; #99#12 = #99#12 + #4#40; |FINSI;
  |FINSI;
|FPRC;

|PROCESO MiraRenta;
  |HAZ LeeLiqui;

  |DDEFECTO #99;

  |SI #1#4 = "S"; |HAZ CargaSpanis; |FINSI;
  |SI #1#4 = "N"; |HAZ CargaGuiris; |FINSI;

  |SI #0#15 ! "T";
      |PARA Casilla = 0; |SI Casilla [ 12; |HACIENDO Casilla = Casilla + 1;
            |SI #0#15 = "P"; |Y #99Casilla < 0; #99Casilla = 0; |FINSI;
            |SI #0#15 = "D"; |Y #99Casilla > 0; #99Casilla = 0; |FINSI;
      |SIGUE;
  |FINSI;

  SwEstar = 0;
  |PARA Casilla = 0; |SI Casilla [ 12; |HACIENDO Casilla = Casilla + 1;
        |SI #99Casilla ! 0; SwEstar = 1; |FINSI;
        |SI Casilla [ 6; |Y #99Casilla ! 0; #99#13 = 1; |FINSI;
        |SI Casilla > 6; |Y #99Casilla ! 0; #99#14 = 1; |FINSI;
  |SIGUE;

  |SI SwEstar = 0; |ACABA; |FINSI;

  SwInf = 1; |PRINT;
|FPRC;

|CALCULO Ordena;
  |DDEFECTO #5;
  |ABRE #5;
  #5#0 = #1#0;
  |LEE 000#5=;
  |CIERRA #5;
|FCAL;

|DEFBUCLE redatcon2;
  #1#1;
  102;
  DClien, #0#12;
  HClien, #0#13;
  e;
  NULL, Ordena, NULL, NULL, NULL, MiraRenta;
  #5#1, #5#0;
|FIN;

|DEFBUCLE redatcon1;
  #1#1;
  102;
  DClien, #0#12;
  HClien, #0#13;
  e;
  NULL, MiraRenta;
|FIN;

|PROCESO Tipo3; |TIPO 3;
  |IMPRE 0;
  |SI FSalida ! 0; |ACABA; |FINSI;

  |INFOR "reinfimp";
  |SI FSalida ! 0; |FINIMP; |ACABA; |FINSI;

  |SI #0#18 = "N";
      DClien = #0#0;
      HClien = #0#1;
      |SI #0#17 = 1;  |BUCLE redatcon1;  |FINSI;
      |SI #0#17 = 2;  |BUCLE redatcon2;  |FINSI;
  |SINO;
      |PARA Parrilla = 19; |SI Parrilla [ 36; |HACIENDO Parrilla = Parrilla + 1;
            |SI #0Parrilla ! 0;
                DClien = #0Parrilla;
                HClien = #0Parrilla;
                |SI #0#17 = 1;  |BUCLE redatcon1;  |FINSI;
                |SI #0#17 = 2;  |BUCLE redatcon2;  |FINSI;
            |FINSI;
      |SIGUE;
  |FINSI;

  |SI SwInf = 1; |PIEINF; |FINSI;

  |FININF;
  |FINIMP;
|FPRC;
