|FICHEROS;
     ascabmin #0;                            || CALCULO PARA OPCION DE IM-
     asclient #1;                            || PRESION EN MANTENIMIENTOS
     asw00003 #2;
     asfpagos #3;
     ashismic #4;
     asm00003 #500;
|FIN;

|VARIABLES;
     vacio = "                                        ";
     Modo = 0;
|FIN;

|INCLUYE agicon_i;  || enlace con agicont

-------------------------------------------------------------
|PROCESO lee_clien;
|DDEFECTO #1;
|ABRE #1;
    #1#0 = #2#0;
|LEE 020#1=;
|CIERRA #1;
|FPRC;

|PROCESO lee_forma;
|DDEFECTO #3;
|ABRE #3;
    #3#0 = #1#15;
|LEE 000#3=;
|CIERRA #3;
|FPRC;

|PROCESO pulsaf1; |TIPO 0;
|SI FSalida = 9;
    |PUSHV 08101571;
    |PINPA #0#2;
    |ENDATOS #1#2;
    |SI FSalida = 0;
        |HAZ lee_clien;
        |HAZ lee_forma;
            #0#0 = #3#35;     |PINTA #0#0;
            #0#1 = #2#0;      |PINTA #0#1;
        |PTEC 802;
    |FINSI;
    |POPV;
|FINSI;
|FPRC;

|PROCESO ttcabmin;|TIPO 4;
|IMPRE 0;
|SI FSalida ! 0; |ACABA; |FINSI;

|INFOR "ascabmin";
|SI FSalida ! 0; |FINIMP; |ACABA; |FINSI;

|LEE 040#0p;
|SI FSalida = 0; |PRINT; |FINSI;

|ET leer;
    |LEE 040#0s;
    |SI FSalida = 0; |PRINT; |VETE leer; |FINSI;
    |PIEINF;
|FININF;
|FINIMP;
|FPRC;

|PROCESO cliente;|TIPO 7;
|SI #0#3 = "                                        ";
   #0#3 = #0#2;
   |PINTA #0#3;
|FINSI;
|FPRC;

|PROCESO pintacli;|TIPO 0;
|ABRE #1;
#1#0 = #0#1;
|LEE 040#1=;
|SI FSalida = 0;
    #0#2 = #1#1;
    #0#3 = #1#2; |PINTA #0#3;
    #0#4 = #1#3;
    #0#5 = #1#4;
    #0#6 = #1#5;
    #0#7 = #1#6;
    #0#8 = #1#7;
    #0#9 = #1#8;
    #0#10 = #1#15; |PINTA #0#10;
    #0#11 = #1#16; |PINTA #0#11;
    #0#12 = #1#17; |PINTA #0#12;
    #0#13 = #1#11;
    #0#14 = #1#12;
    #0#15 = #1#13;
    #0#16 = #1#14;
    #0#20 = #1#23; |PINTA #0#20;
|SINO;
   |MENAV "    No existe cliente ";
   |ERROR;
|FINSI;
|CIERRA #1;
|FPRC;

|PROCESO funcion; |TIPO 0;
|SI FSalida ! 9; |ACABA; |FINSI;

|CAMPO_MODIFICA #0#27, 1, "S";
|CAMPO_MODIFICA #0#28, 1, "S";
|CAMPO_MODIFICA #0#29, 1, "S";

|ET campo_27;
     |ENCAMPO #27#0;
     |SI FSalida = 1; |VETE no_campo; |FINSI;
     |SI FSalida = 7; |VETE no_campo; |FINSI;

|ET campo_28;
     |ENCAMPO #28#0;
     |SI FSalida = 2; |VETE campo_27; |FINSI;
     |SI FSalida = 1; |VETE no_campo; |FINSI;
     |SI FSalida = 7; |VETE no_campo; |FINSI;

|ET campo_29;
     |ENCAMPO #29#0;
     |SI FSalida = 2; |VETE campo_28; |FINSI;

|ET no_campo;
     |ABRE #4;
     #4#0 = #0#27;
     #4#1 = #0#28;
     |LEE 040#4=;
     |SI FSalida = 0;
         |MENAV "         La factura ya existe en el historico";
         |VETE campo_27;
     |FINSI;
     |CIERRA #4;

|CAMPO_MODIFICA #0#27, 1, "N";
|CAMPO_MODIFICA #0#28, 1, "N";
|CAMPO_MODIFICA #0#29, 1, "N";
|FPRC;

|PROCESO BajaCuotCli;
   |BORRA 020#asm00003.a;
|FPRC;

|DEFBUCLE BajaCuotCli;
#asm00003#1;
;
#ascabmin#0,#ascabmin#1,#ascabmin#27,#ascabmin#28,"N",001,01;
#ascabmin#0,#ascabmin#1,#ascabmin#27,#ascabmin#28,"S",999,99;
;
NULL,BajaCuotCli;
|FIN;

|PROCESO Baja; |TIPO 1;
   Modo = (FEntrada / 100) ! 0;
   |SI Modo = 3; |BUCLE BajaCuotCli; |FINSI;
|FPRC;
