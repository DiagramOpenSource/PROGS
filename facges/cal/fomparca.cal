|FICHEROS;
    fomparca #0;
    fomparli #1;
    fomw0001 #2;

    fomhparc #3;

    fomcontr #10;
    asnompat #11;
    labtraba #12;
    agiusuar #13;
    agicontr #14;
|FIN;

|VARIABLES;
   menu_a     = 0;
   cont       = 0;
   path_fich  = "";
   path       = "";
   vacio      = "                                        ";

  {-1}automat   = ""
      automat1  = "2400";
      automat2  = "1";
      automat3  = "Elija opcion : ";
      automat4  = "AM";
      automat5  = "  Automatico  ";
      automat6  = "  Manual  ";
      aAlfa1 = "";
|FIN;

|PROCESO automat; |TIPO 7;
menu_a = 0;
cont = (FEntrada / 100) ! 0;
|SI cont ! 1; |ACABA; |FINSI;

|MENU automat;
automat2 = FSalida;
|SI FSalida = 1;
    menu_a = 1;
    |ABRE #10;
    |LIBERA #10;
    |LEE 140#10p;
    |SI FSalida = 0;
        #0#0 = #10#1 + 1;
    |SINO;
        #10#0 = 1;
        #10#1 = 0;
        |GRABA 140#10n;
        #0#0 = 1;
    |FINSI;
    |CIERRA #10;
    |PINTA #0#0;
    |PTEC 802;
|FINSI;
|FPRC;

|PROCESO graba_con; |TIPO 0;
|ABRE #3;
#3#0 = #0#0;
|LEE 040#3=;
|SI FSalida = 0;
    |MENAV "      El numero de parte ya existe en el historico";
    |ERROR;
    |CIERRA #3;
    |ACABA;
|FINSI;
|CIERRA #3;

|SI menu_a = 0; |ACABA; |FINSI;
menu_a = 0;

|ABRE #10;
|LIBERA #10;
|LEE 140#10p;
|SI FSalida = 0;
    #10#1 = #0#0;
    |GRABA 140#10a;
|FINSI;
|CIERRA #10;
|FPRC;

|PROCESO labo_gen; |TIPO 0;
|SI #0#3 = "G";
    |CAMPO_MODIFICA #0#4, 1, "N";
|SINO;
    |CAMPO_MODIFICA #0#4, 1, "S";
|FINSI;

|SI #0#3 = "G"; |ACABA; |FINSI;

|ABRE #11;
|LEE 040#11p;
|SI FSalida ! 0; |DDEFECTO #11; |FINSI;
|CIERRA #11;

path = #11#1; |QBF path;
path_fich = path + "fich/";

|PATH_DAT #12 path_fich;
|FPRC;

|PROCESO m_trabaj; |TIPO 0;
|SI #0#3 = "G";
    #0#4 = 0;
    #0#5 = "";
    |PINTA #0#4;
    |PINTA #0#5;
    |ACABA;
|FINSI;

|ABRE #12;
#12#0 = #0#1;
#12#1 = #0#4;
|LEE 040#12=;
|SI FSalida ! 0;
    |MENAV "       No existe TRABAJADOR.";
    |ERROR;
|SINO;
    #0#5 = #12#2;
    |PINTA #0#5;
|FINSI;
|CIERRA #12;
|FPRC;

|PROCESO usuario; |TIPO 0;
|SI cont ! 1; |ACABA; |FINSI;

|DBASS path; |QBF path;
|PATH_DAT #14 path;
|ABRE #14;
|LEE 040#14p;
|SI FSalida ! 0; |DDEFECTO #14; |FINSI;
|CIERRA #14;

path = #14#8; |QBF path;

|PATH_DAT #13 path;
path = Usuario % 810; |QBF path;

|ABRE #13;
path = path < path;
#13#0 = path;
|LEE 040#13=;
|SI FSalida = 0;
    #0#10 = #13#1;
|SINO;
    #0#10 = "";
|FINSI;
|PINTA #0#10;
|CIERRA #13;
|FPRC;

|PROCESO ampliada; |TIPO 7;
|PUSHV 0501 2380;
cont = (FEntrada / 100) ! 0;

|SI cont = 1;
    |SI #1#6 = vacio;
        |SI #0#3 = "L"; #1#6 = #0#5; |FINSI;
    |SINO;
        |SI #1#7 = vacio;
            |SI #0#3 = "L"; #1#7 = #0#5; |FINSI;
        |FINSI;
    |FINSI;
|FINSI;

|PINPA #0#2;
#2#0 = #1#5;
#2#1 = #1#6;
#2#2 = #1#7;
|PINDA #0#2;

|ENDATOS #1#2;
|SI FSalida = 0;
    #1#5 = #2#0;
    #1#6 = #2#1;
    #1#7 = #2#2;
|FINSI;
|POPV;
|FPRC;

|PROCESO NoBlanco; |TIPO 6;
     aAlfa1 = #fomparli#Campo#;
     |QBF aAlfa1;
     |SI aAlfa1 = "";
          |PTEC 807;
     |FINSI;
|FPRC;
