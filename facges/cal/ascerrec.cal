|FICHEROS;
    ascerrec #10;

    ashismic #0;
    ashisfac #90;
    ashisrec #91;
    asfpagos #12;

    asinfhdf #1;
    asclient #2;
|FIN;

|VARIABLES;
     fFech   = @;
     qFech   = "";
     dFech   = "";
     hFech   = "";
     FEstado = 0;
     fechv   = @;
     em      = 0;
     j       = 0;
     informe = "asinfhdf";
     sw      = 0;
     &ordena = "";
|FIN;

|PROCESO sacaano; |TIPO 7;
     fFech = ~;
     qFech = fFech % -104;
     dFech = "01.01." + qFech;
     hFech = "31.12." + qFech;
     #10#4  = dFech;
     #10#5  = hFech;
     |PINTA #10#4;
     |PINTA #10#5;
|FPRC;

|CALCULO Imprimir;
   |ABRE #2;
   |DDEFECTO #2;
   #2#0 = #0#3;
   |LEE 040#2=;
   |CIERRA #2;
   |PRINT;
   sw = 1;
|FCAL;

|PROCESO Recuperar;
 || |SI #0#30 = "S"; |O #0#31 = "S"; |O #0#32 = "S"; |O #0#33 = "S";
 || |MENAV "      Ficha ya contabilizada o cobrada.";

    |ABRE #90;
    #90#0 = #0#0;
    #90#1 = #0#1;
    |LIBERA #90;
    |LEE 141#90=;
    FEstado = FSalida;

    |DDEFECTO #90;
    #90#0  = #0#0;
    #90#1  = #0#1;
    #90#2  = #0#29;
    #90#3  = #0#3;
    #90#4  = #0#2;
    #90#5  = #0#19;
    #90#6  = #0#20;
    #90#7  = #0#45;
    #90#8  = #0#25;
    #90#9  = #0#46;
    #90#10 = #0#27;
    #90#11 = #0#26;
    #90#12 = #0#30;
    #90#13 = #0#31;
    #90#14 = #0#21;
    #90#15 = #0#22;
    #90#16 = #0#23;
    #90#17 = #0#24;
    #90#18 = #0#28;

    |SI FEstado ! 0;
        |GRABA 140#90n;
        |SI #10#12 = "S"; |HAZ Imprimir; |FINSI;
    |SINO;
        |SI #0#10 = "S";
            |GRABA 140#90a;
            |SI #10#12 = "S"; |HAZ Imprimir; |FINSI;
        |FINSI;
    |FINSI;

    |CIERRA #90;

    |SI #0#11 = "S";
        |ABRE #91;
        #91#0 = #0#0;
        #91#1 = #0#1;
        |LIBERA #91;
        |LEE 140#91=;
        FEstado = FSalida;

        |SI FEstado ! 0; |DDEFECTO #91; |FINSI;

        #91#0  = #0#0;
        #91#1  = #0#1;
        #91#2  = #0#29;
        #91#3  = #0#3;
        #91#4  = #0#2;

        |HAZ fecha_venci;
        #91#5  = fechv;
        #91#6  = #0#28;
        #91#7  = #0#13;
        #91#11 = #0#12;
        |SI FEstado ! 0; |GRABA 140#91n; |SINO; |GRABA 140#91a; |FINSI;
        |CIERRA #91;
    |FINSI;
|FPRC;

|PROCESO fecha_venci;
    |ABRE #12;
    #12#0 = #0#12;
    |LEE 040#12=;
    |SI FSalida ! 0;
        fechv = #0#29;
    |SINO;
        |SI #12#2 = "D"; em = 1; |SINO; em = 1000; |FINSI;
        j = #12#5 / em;
        fechv = #0#29 + j;
    |FINSI;
    |CIERRA #12;
|FPRC;

|DEFBUCLE ashismic;
 #0#1;
 29, 3, 2;
 #10#0, #10#2, #10#4, #10#6, #10#8;
 #10#1, #10#3, #10#5, #10#7, #10#9;
 e;
 NULL, Recuperar;
|FIN;

|PROCESO tipo_3; |TIPO 3;

 ordena = "Serie-Factura.";

 |SI #10#12 = "S";
     |IMPRE 0;
     |SI FSalida ! 0; |ACABA; |FINSI;
     |INFOR informe;
     |SI FSalida ! 0; |FINIMP; |ACABA; |FINSI;
 |FINSI;

 sw = 0;
 |BUCLE ashismic;
 |SI #10#12 = "S";
     |SI sw = 1;
         |PIEINF;
     |FINSI;
     |FININF;
     |FINIMP;
 |FINSI;
|FPRC;
