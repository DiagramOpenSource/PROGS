|FICHEROS;
   ascobrar #0;
   ascobra1 #1;
   ashisrec #2;
   asclient #3;
   ashismic #4;
|FIN;

|VARIABLES;
     fFech = @;
     qFech = "";
     dFech = "";
     hFech = "";
|FIN;

|PROCESO importe;

#4#0 = #2#0;
#4#1 = #2#1;
|LEE 040#4=;
|SI FSalida ! 0; |DDEFECTO #4; |FINSI;

#3#0 = #2#3;
|LEE 040#3=;
|SI FSalida ! 0; |DDEFECTO #3; |FINSI;

#1#0 = #2#0;
#1#1 = #2#1;
#1#2 = #2#3;
#1#3 = #3#2;
#1#4 = #2#6;
#1#5 = #2#9;
#1#6 = #2#6 - #2#9;
#1#7 = #2#8;
|PRINT;
|FPRC;

|DEFBUCLE ashisrec1;
#2#1;
2, 7, 10, 3;
#0#0, #0#2, #0#4, #0#6, "N", #0#8;
#0#1, #0#3, #0#5, #0#7, "N", #0#9;
e;
NULL, importe;
|FIN;

|DEFBUCLE ashisrec2;
#2#3;
2, 7, 10;
#0#8, #0#0, #0#2, #0#4, #0#6, "N";
#0#9, #0#1, #0#3, #0#5, #0#7, "N";
e;
NULL, importe;
|FIN;

|PROCESO cobrar; |TIPO 3;
|IMPRE 0;
|SI FSalida ! 0; |ACABA; |FINSI;

|SI #0#10 = 1; |INFOR "ascobin1"; |FINSI;
|SI #0#10 = 2; |INFOR "ascobin2"; |FINSI;
|SI FSalida ! 0; |FINIMP; |ACABA; |FINSI;

|ABRE #3; |ABRE #4;
|SI #0#10 = 1; |BUCLE ashisrec1; |FINSI;
|SI #0#10 = 2; |BUCLE ashisrec2; |FINSI;
|CIERRA #4; |CIERRA #3;

|PIEINF;
|FININF;
|FINIMP;
|FPRC;
|PROCESO sacaano; |TIPO 7;
     fFech = ~;
     qFech = fFech % -104;
     dFech = "01.01." + qFech;
     hFech = "31.12." + qFech;
     #0#4  = dFech;
     #0#5  = hFech;
     |PINTA #0#4;
     |PINTA #0#5;
|FPRC;
