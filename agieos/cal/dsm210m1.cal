|FICHEROS;
   dsm210m1 #0;
   dsm210mu #10;

   dsmow324 #100;
|FIN;

|VARIABLES;
   nGrid0 = 0;
   nPant0 = 0;
   nBoton = 0;
   nModo  = 0;
   nVent  = 0;

   nSinEvto = 0;
   nIdSalir = 0;

   nRango = 0;
   nPos1  = 0;
   nPos2  = 0;

   aAlfa  = "";
   aTitulo = "";

   aEsc1           = "";
   aEsc2           = "";
   aRetu           = "";
   aTecla          = "";

   nBotonNue = 0;
   nBotonMod = 0;
   nBotonBor = 0;

   || NO METER VARIABLES ENTRE ESTE BLOQUE
{2}nNivel      = 0;
{1}aContiene   = "";
{-1}aVent      = "";
    aVent1     = 0;
    aVent2     = 0;
    aVent3     = 0;
    aVent4     = 0;
    aVent5     = "";
   || NO METER VARIABLES ENTRE ESTE BLOQUE

    &eaPrograma  = "";
    &eaExtension = "";
|FIN;

|PROCESO Infm001;
   #dsm210mu#0 = "     ";
   #dsm210mu#1 = "     ";
|FPRC;

|PROCESO Supm001;
   #dsm210mu#0 = "zzzzz";
   #dsm210mu#1 = "zzzzz";
|FPRC;

|PROCESO Eventom001;
|FPRC;

|PROCESO Tipo80; |TIPO 80;
   FSalida = 2799;
|FPRC;


|PROCESO BorraMun;
   aAlfa = "   N" + &191 + " Est  seguro de eliminar el municipio seleccionado ?";
   |CONFI aAlfa;
   |SI FSalida = 0;
      |BORRA 020#dsm210mu.a;

      |REFRESCACONTROL nGrid0;
   |FINSI;
|FPRC;

|PROCESO VentanaMunic;
   InNivel = nNivel1<-;
   nNivel1 = 0;
   |ESPECIFICA "IDBOTONTECLA", nNivel;
   nIdSalir = nNivel2;

   |ESTADO_CONTROL nBoton   , "DISABLE";
   |ESTADO_CONTROL nBotonNue, "DISABLE";
   |ESTADO_CONTROL nBotonMod, "DISABLE";
   |ESTADO_CONTROL nBotonBor, "DISABLE";
   |ESTADO_CONTROL nGrid0, "DISABLE";
   |ESTADO_CONTROL nIdSalir, "HIDE";

   |VENTANA 1120, 1780, -1, 17, aTitulo; nVent = FSalida;
   aVent1 = -1;
   aVent2 = -1;
   aVent3 = 0;
   aVent4 = nVent;
   aVent5 = "MODAL";
   |ESPECIFICA "ESTADO_VENTANA", aVent;

   nSinEvto = 1;
   |ENDATOS #1#dsmow324;
   |SI FSalida = 0;
      #dsm210mu#0 = #dsmow324#0;
      #dsm210mu#1 = #dsmow324#1;
      #dsm210mu#2 = #dsmow324#2;
      #dsm210mu#3 = #dsmow324#3;
      |SI nModo = 1;
         |GRABA 020#dsm210mu.c;
      |SINO;
         |GRABA 020#dsm210mu.a; |LIBERA #dsm210mu;
      |FINSI;
   |SINO;
      |SI nModo = 1; |BORRA 020#dsm210mu.a; |FINSI;
   |FINSI;
   nSinEvto = 0;
   |REFRESCACONTROL nGrid0;

   aVent4 = nVent;
   aVent5 = "MODELESS";
   |ESPECIFICA "ESTADO_VENTANA", aVent;

   |FINVENTANA nVent;

   |ESTADO_CONTROL nIdSalir, "SHOW";
   |ESTADO_CONTROL nGrid0, "ENABLE";
   |ESTADO_CONTROL nBotonNue, "ENABLE";
   |ESTADO_CONTROL nBotonMod, "ENABLE";
   |ESTADO_CONTROL nBotonBor, "ENABLE";
   |ESTADO_CONTROL nBoton   , "ENABLE";

   |FOCOTECLADO nGrid0;
|FPRC;

|PROCESO ModifMun;
   |DDEFECTO #dsmow324;
   #dsmow324#0 = #dsm210mu#0;
   #dsmow324#1 = #dsm210mu#1;
   #dsmow324#2 = #dsm210mu#2;
   #dsmow324#3 = #dsm210mu#3;

   |C_M #dsmow324#0, 1, "N"; |C_M #dsmow324#1, 1, "N";

   aTitulo = "Modificar municipio";
   nModo = 2; |HAZ VentanaMunic;
|FPRC;

|PROCESO NuevoMun;
   |DDEFECTO #dsmow324;

   |C_M #dsmow324#0, 1, "S"; |C_M #dsmow324#1, 1, "S";

   aTitulo = "Nuevo municipio";
   nModo = 1; |HAZ VentanaMunic;
|FPRC;

|PROGRAMA;


   |ABRE #dsm210mu;
   |LEE 040#dsm210mu.p;
   |SI FSalida ! 0;
       |CIERRA #dsm210mu;
       eaExtension = "eos";
       eaPrograma  = "dsm210mu";
       |SUB_EJECUTA_NP "eosz0035";
       |ABRE #dsm210mu;
   |FINSI;

   |PINPA #0#0; nPant0 = FSalida; |PINDA #0#0;

||   nPos1 = 2609; nPos2 = 2626;
||   |CONTROL_SIMPLE nPant0, "BOTON,{{197}}Carga desde patron", nPos1, nPos2, CargaPat;
||   nBoton = FSalida;

   nPos1 = 2658; nPos2 = 2668;
   |CONTROL_SIMPLE nPant0, "BOTON,{{193}}Nuevo", nPos1, nPos2, NuevoMun;
   nBotonNue = FSalida;

   nPos1 = 2670; nPos2 = 2680;
   |CONTROL_SIMPLE nPant0, "BOTON,{{135}}Modificar", nPos1, nPos2, ModifMun;
   nBotonMod = FSalida;

   nPos1 = 2682; nPos2 = 2692;
   |CONTROL_SIMPLE nPant0, "BOTON,{{199}}Borrar", nPos1, nPos2, BorraMun;
   nBotonBor = FSalida;

   nRango = 4 + 8 + 16 + 32;
   nPos1 = 0810; nPos2 = 2490;
   |LINEAL_SIMPLE #1#dsm210mu, nRango, nPos1, nPos2, Infm001, Supm001, Eventom001;
   nGrid0 = FSalida;

   aEsc1  = &255 + "806";
   aEsc2  = &255 + "807";
   aRetu  = &255 + "802";
   |PARA; |SI;  |HACIENDO;
      FSalida = "::{{001}}Salir," + nGrid0;
      |LEETECLA aTecla;
      |SI aTecla = aEsc1; |SAL;  |FINSI;
      |SI aTecla = aEsc2; |SAL;  |FINSI;
      |SI aTecla = aRetu; |SAL;  |FINSI;
   |SIGUE;

   |DESTRUYECONTROL nGrid0;
   |FIN_CONTROL_WINDOWS nBoton;
   |PULSATECLA;

   |CIERRA #dsm210mu;
|FPRO;
