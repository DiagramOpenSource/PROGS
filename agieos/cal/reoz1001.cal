|VARIABLES;
     nDias1     = 0;
     nDias2     = 0;


     &nAmort       = 0;
     &nVAnyo       = 0;
     &nCAnyo       = 0;
     &nPendiente   = 0;
     &nTCompra     = 0;
     &nPorceA      = 0;
     &nPorceD      = 0;
     &nImport      = 0;
     &enImpProv    = 0;
     &nTipoMod     = 0;

     &fFechaUso    = @;
     &fFechaCompra = @;
     &fFechaVenta  = @;
     &fPriCompra   = @;
     &fFinCompra   = @;
     &fPriVenta    = @;
     &fFinVenta    = @;
|FIN;

|PROCESO Amortizamelo;
     |SI nAmort = nCAnyo;                          || Mismo A¤o de Compra
         nDias1  = (fFinCompra - fFechaUso)  + 1;
         nDias2  = (fFinCompra - fPriCompra) + 1;
         |SI nAmort [ 1997;                        || Compra Menor A¤o 1998
             nImport = ((nTCompra % nPorceA) * nDias1) / nDias2;
         |SINO;                                    ||Compra Mayor 1997
             nImport = ((nTCompra % nPorceD) * nDias1) / nDias2;
         |FINSI;
     |SINO;
         |SI nAmort [ 1997;
             nImport = nTCompra % nPorceA;
         |SINO;
             nImport = nTCompra % nPorceD;
         |FINSI;
     |FINSI;

     |SI nAmort  = nVAnyo;
         ||nDias2  = (fFinVenta   - fPriCompra) + 1;

         nDias1  = (fFechaVenta - fPriVenta)  + 1;
         nDias2  = (fFinCompra - fPriCompra) + 1;
         ||nDias2  = (fFinVenta   - fPriVenta) + 1;
         |SI nAmort [ 1997;
             nImport = ((nTCompra % nPorceA) * nDias1) / nDias2;
         |SINO;
             nImport = ((nTCompra % nPorceD) * nDias1) / nDias2;
         |FINSI;
     |FINSI;

     enImpProv = nImport;
     |SI nPendiente < nImport;
         nImport = nPendiente;
     |FINSI;
     |SI nImport = 0; enImpProv = 0; |FINSI;

     |SI nTipoMod = 0;
         nImport = 0;
         |SI nAmort  = nVAnyo;
             ||nDias2  = (fFinVenta   - fPriCompra) + 1;

             nDias1  = (fFechaVenta - fPriVenta)  + 1;
             nDias2  = (fFinVenta   - fPriVenta)  + 1;
             nImport = ((nTCompra % nPorceD) * nDias1) / nDias2;
         |SINO;
             nImport = nTCompra % nPorceD;
         |FINSI;
     |FINSI;
|FPRC;
