|FICHEROS;
   eosar130 #0;
   eosm1130 #1;
   eosm3130 #2;
   eosm2130 #11;
   eoscomul #12;
|FIN;

|VARIABLES;
|FIN;

|INCLUYE i_anyode;
|INCLUYE i_consul;

|PROCESO pinta_anyo; |TIPO 7;
|HAZ i_anyodef;
#0#2 = i_anyodef;
|PINTA #0#2;
|FPRC;

|PROCESO graba_93;
|SI #1#3 = "          "; |ACABA; |FINSI;
|SI #1#4 = "S";          |ACABA; |FINSI;

#1#4 = "S";
|GRABA 140#1a;
|LIBERA #1;
|FPRC;

|DEFBUCLE eosm1130;
#1#1;
;
#0#0, 1, #0#4, #0#2;
#0#1, 6, #0#5, #0#2;
be;
NULL, graba_93;
|FIN;

|PROCESO graba_94;
|SI #2#4 = "          "; |ACABA; |FINSI;
|SI #2#5 = "S";          |ACABA; |FINSI;

#2#5 = "S";
|GRABA 140#2a;
|LIBERA #2;

|HAZ mante_trab;
|FPRC;

|PROCESO pon_fecha1;
#11#5 = "S";
|GRABA 140#11a;
|LIBERA #11;
|FPRC;

|DEFBUCLE eosm2130;
#11#1;
;
#2#0, 1, #2#2, #2#3;
#2#0, 6, #2#2, #2#3;
be;
NULL, pon_fecha1;
|FIN;

|PROCESO pon_fecha2;
#11#0 = #12#0;
#11#1 = #12#1;
#11#2 = #2#2;
#11#3 = #2#3;
|LIBERA #11;
|LEE 140#11=;
|SI FSalida = 0;
    #11#5 = "S";
    |GRABA 140#11a;
    |LIBERA #11;
|FINSI;
|FPRC;

|DEFBUCLE eoscomul;
#12#2;
;
#2#0, 1, #2#3;
#2#0, 6, #2#3;
e;
NULL, pon_fecha2;
|FIN;

|PROCESO mante_trab;
|SI #2#32 = "N";
    |BUCLE eosm2130;
|SINO;
    |ABRE #11;
    |BUCLE eoscomul;
    |CIERRA #11;
|FINSI;
|FPRC;

|DEFBUCLE eosm3130;
#2#1;
;
#0#0, 1, #0#4, #0#2;
#0#1, 9, #0#5, #0#2;
be;
NULL, graba_94;
|FIN;

|PROCESO impre;|TIPO 3;
|SI #0#2 ] 0;  |O #0#2 [ 80;
    |BUCLE eosm3130;
|SINO;
    |SI #0#2 [ 93; |BUCLE eosm1130; |FINSI;
    |SI #0#2 ] 94; |BUCLE eosm3130; |FINSI;
|FINSI;
|FPRC;
