|FICHEROS;
     eosem392 #0;
     eosm1390 #1;
     eosclien #2;
     eoshacie #3;
     eosdaban #4;
     eoscomul #5;
     eosm2390 #6;
     eosm3392 #7;
     eosm4392 #9;
     eosma392 #8;
     dsmom999 #199;

     eosxx551 #551;
     eosxx552 #552;
     eosxx553 #553;
     eosxx554 #554;
     eosxx555 #555;
     eosxx556 #556;

     eosm3390 #999;
|FIN;

|VARIABLES;
     nCont = 0; Cont = 0; Calc = 0; Comodin = ""; Handle = 0;
     Directorio = "";
     DEmpresa = 0; HEmpresa = 0;
     aAlfa = ""; aAlfa1 = ""; aAlfa2 = "";
     nCalc = 0;  nCalc1 = 0;
     nDig = 0; nDec = 0; nOper = 0;
     aTipo = ""; Cadena = "";
     &EURODB = 0; &eaMoneda = ""; &enCanti = 0;

     Comodin1  = ""; Comodin2 = ""; &eaCamino = ""; &enCmpPagina = 0;
     nEspa     = 0;
     aAlfaCad  = "";
     aLong     = "";
     aCaracter = "";
     nLong     = 0;
     nPos      = 0;
     nCampo    = 0;
     nCampo1   = 0;

     informe   = "";
     xxxxfiac  = "  ";
     xxaponer  = "  ";
     xrelleno  = "                              ";
     &dia      = "";
     &mes      = "";
     &anyo     = "";
     &sw_sit   = 0;
     &d_empre  = 0;
     &h_empre  = 0;
     &el_anyo  = 0;

     sw_fisica = 0;
     vacio_20  = "                    ";
     vacio_16  = "                ";
     vacio_12  = "            ";
     vacio_10  = "          ";
     x         = 0;
     sw_sigue  = 0;
     sw_impre  = 0;
     d_cliente = 0;
     h_cliente = 0;

     &nifp     = "";
     &sgp      = "";
     &nombrep  = "";
     &callep   = "";
     &nump     = "";
     &escp     = "";
     &pisop    = "";
     &puep     = "";
     &poblap   = "";
     &provip   = "";
     &codp     = "";
     &tlfnop   = "";

     aAbre        = "";

     &enAnyo      = "";
     &eaModelos   = "";
     &eaInternet  = "";
     &eaEscal     = "";
     &eaPiso      = "";
     &eaPuerta    = "";
     &enComuneros = 0;
     &enHandle2   = 0;
|FIN;

|INCLUYE i_cuadre;
|INCLUYE i_anyode;
|INCLUYE i_consul;

|PROCESO pinta_anyo; |TIPO 7;
  |HAZ i_anyodef;
  #0#2 = i_anyodef - 1;
  |SI #0#2 < 0;  #0#2 = 99;  |FINSI;
  |PINTA #0#2;
|FPRC;

|PROCESO hoja1;
  informe = "eosh1392";

  |INFOR informe;
  |SI FSalida ! 0; sw_impre = 1; |FININF; |ACABA; |FINSI;

  sw_impre = 0;
  #2#0 = #1#0;
  |LEE 040#2=;
  |SI FSalida ! 0; |DDEFECTO #2; |FINSI;

  nifp = "";  nombrep = "";  callep = "";
  nump = "";  escp    = "";  pisop  = "";
  puep = "";  poblap  = "";  provip = "";
  codp = "";  sgp     = "";  tlfnop = "";
  sw_fisica   = 0;
  enComuneros = 0;

  #5#0 = #2#0;
  #5#1 = 1;
  #5#2 = 1;
  #5#7 = #0#2;
  |LEE 040#5];
  |SI FSalida = 0; |Y #5#0 = #2#0; |Y #5#7 = #0#2;
      #2#0 = #5#3;
      |LEE 040#2=;
      |SI FSalida = 0;
          enComuneros = 1;
          sw_fisica   = 1;
          nifp = #2#1;  nombrep = #2#2;  callep = #2#5;
          nump = #2#6;  escp    = #2#7;  pisop  = #2#8;
          puep = #2#9;  poblap  = #2#13; provip = #2#12;
          codp = #2#21; sgp     = #2#4;  tlfnop = #2#14;
      |FINSI;
  |FINSI;

  #2#0 = #1#0;
  |LEE 040#2=;
  |SI FSalida ! 0; |DDEFECTO #2; |FINSI;

  |SI sw_fisica = 0;
      nifp = #2#1;  nombrep = #2#2;  callep = #2#5;
      nump = #2#6;  escp    = #2#7;  pisop  = #2#8;
      puep = #2#9;  poblap  = #2#13; provip = #2#12;
      codp = #2#21; sgp     = #2#4;  tlfnop = #2#14;

      |SI #2#24 ! vacio_20; |O #2#25 ! vacio_20;
          |O #2#26 ! vacio_12; |O #2#27 ! vacio_10; |O #2#28 ! vacio_16;
             nifp = "";  nombrep = "";  callep = "";
             nump = "";  escp    = "";  pisop  = "";
             puep = "";  poblap  = "";  provip = "";
             codp = "";  sgp     = "";  tlfnop = "";
      |FINSI;

      |SI #2#29 ! vacio_20; |O #2#30 ! vacio_20;
          |O #2#31 ! vacio_12; |O #2#32 ! vacio_10; |O #2#33 ! vacio_16;
             nifp = "";  nombrep = "";  callep = "";
             nump = "";  escp    = "";  pisop  = "";
             puep = "";  poblap  = "";  provip = "";
             codp = "";  sgp     = "";  tlfnop = "";
      |FINSI;

      |SI #2#34 ! vacio_20; |O #2#35 ! vacio_20;
          |O #2#36 ! vacio_12; |O #2#37 ! vacio_10; |O #2#38 ! vacio_16;
             nifp = "";  nombrep = "";  callep = "";
             nump = "";  escp    = "";  pisop  = "";
             puep = "";  poblap  = "";  provip = "";
             codp = "";  sgp     = "";  tlfnop = "";
      |FINSI;
  |FINSI;

  #3#0 = #2#18;
  #3#1 = #2#19;
  |LEE 040#3=;
  |SI FSalida ! 0; |DDEFECTO #3; |FINSI;

  #4#0 = #2#0;
  |LEE 040#4=;
  |SI FSalida ! 0; |DDEFECTO #4; |FINSI;

  |PRINT;
  |PIEINF;
  |FININF;
|FPRC;

|PROCESO hoja2;
  informe = "eosh2390";

  |INFOR informe;
  |SI FSalida ! 0; sw_impre = 1; |FININF; |ACABA; |FINSI;

  sw_impre = 0;

  |PRINT;
  |PIEINF;
  |FININF;
|FPRC;

|PROCESO hoja3;
  informe = "eosh3390";

  |INFOR informe;
  |SI FSalida ! 0; sw_impre = 1; |FININF; |ACABA; |FINSI;

  sw_impre = 0;

  |PRINT;
  |PIEINF;
  |FININF;
|FPRC;

|PROCESO impre92;
  |SI sw_impre = 0; |HAZ hoja1; |FINSI;
  |SI sw_impre = 0; |HAZ hoja2; |FINSI;
  |SI sw_impre = 0; |HAZ hoja3; |FINSI;

  #1#201 = #0#6;
  #1#202 = "N";
  |GRABA 020#1a;
  |LIBERA #1;
|FPRC;

|DEFBUCLE lee39092;
  #1#1;
  ;
  d_cliente, #0#2;
  h_cliente, #0#2;
  be;
  NULL, impre92;
|FIN;

|PROCESO hoja4;
  informe = "eosh4390";

  |INFOR informe;
  |SI FSalida ! 0; sw_impre = 1; |FININF; |ACABA; |FINSI;

  sw_impre = 0;
  #2#0 = #6#0;
  |LEE 040#2=;
  |SI FSalida ! 0; |DDEFECTO #2; |FINSI;

  nifp = "";  nombrep = "";  callep = "";
  nump = "";  escp    = "";  pisop  = "";
  puep = "";  poblap  = "";  provip = "";
  codp = "";
  enComuneros = 0;
  sw_fisica   = 0;

  #5#0 = #2#0;
  #5#1 = 1;
  #5#2 = 1;
  #5#7 = #0#2;
  |LEE 040#5];
  |SI FSalida = 0; |Y #5#0 = #2#0; |Y #5#7 = #0#2;
      #2#0 = #5#3;
      |LEE 040#2=;
      |SI FSalida = 0;
          enComuneros = 1;
          sw_fisica   = 1;
          nifp = #2#1;  nombrep = #2#2;  callep = #2#5;
          nump = #2#6;  escp    = #2#7;  pisop  = #2#8;
          puep = #2#9;  poblap  = #2#13; provip = #2#12;
          codp = #2#21;
      |FINSI;
  |FINSI;

  #2#0 = #6#0;
  |LEE 040#2=;
  |SI FSalida ! 0; |DDEFECTO #2; |FINSI;

  |SI sw_fisica = 0;
      nifp = #2#1;  nombrep = #2#2;  callep = #2#5;
      nump = #2#6;  escp    = #2#7;  pisop  = #2#8;
      puep = #2#9;  poblap  = #2#13; provip = #2#12;
      codp = #2#21; sgp     = #2#4;  tlfnop = #2#14;

      |SI #2#24 ! vacio_20; |O #2#25 ! vacio_20;
          |O #2#26 ! vacio_12; |O #2#27 ! vacio_10; |O #2#28 ! vacio_16;
             nifp = "";  nombrep = "";  callep = "";
             nump = "";  escp    = "";  pisop  = "";
             puep = "";  poblap  = "";  provip = "";
             codp = "";  sgp     = "";  tlfnop = "";
      |FINSI;

      |SI #2#29 ! vacio_20; |O #2#30 ! vacio_20;
          |O #2#31 ! vacio_12; |O #2#32 ! vacio_10; |O #2#33 ! vacio_16;
             nifp = "";  nombrep = "";  callep = "";
             nump = "";  escp    = "";  pisop  = "";
             puep = "";  poblap  = "";  provip = "";
             codp = "";  sgp     = "";  tlfnop = "";
      |FINSI;

      |SI #2#34 ! vacio_20; |O #2#35 ! vacio_20;
          |O #2#36 ! vacio_12; |O #2#37 ! vacio_10; |O #2#38 ! vacio_16;
             nifp = "";  nombrep = "";  callep = "";
             nump = "";  escp    = "";  pisop  = "";
             puep = "";  poblap  = "";  provip = "";
             codp = "";  sgp     = "";  tlfnop = "";
      |FINSI;
  |FINSI;

  #3#0 = #2#18;
  #3#1 = #2#19;
  |LEE 040#3=;
  |SI FSalida ! 0; |DDEFECTO #3; |FINSI;

  #4#0 = #2#0;
  |LEE 040#4=;
  |SI FSalida ! 0; |DDEFECTO #4; |FINSI;

  |PRINT;
  |PIEINF;
  |FININF;
|FPRC;

|PROCESO hoja5;
  informe = "eosh5390";

  |INFOR informe;
  |SI FSalida ! 0; sw_impre = 1; |FININF; |ACABA; |FINSI;

  sw_impre = 0;

  |PRINT;
  |PIEINF;
  |FININF;
|FPRC;

|PROCESO hoja6;
  informe = "eosh6390";

  |INFOR informe;
  |SI FSalida ! 0; sw_impre = 1; |FININF; |ACABA; |FINSI;

  sw_impre = 0;

  |PRINT;
  |PIEINF;
  |FININF;
|FPRC;

|PROCESO impre93;
  |SI sw_impre = 0; |HAZ hoja4; |FINSI;
  |SI sw_impre = 0; |HAZ hoja5; |FINSI;
  |SI sw_impre = 0; |HAZ hoja6; |FINSI;

  #6#201 = #0#6;
  #6#202 = "N";
  |GRABA 020#6a;
  |LIBERA #6;
|FPRC;

|DEFBUCLE lee39093;
  #6#1;
  ;
  d_cliente, #0#2;
  h_cliente, #0#2;
  be;
  NULL, impre93;
|FIN;

|PROCESO hoja1_95;
  |INFOR "eos21392";

 |SI FSalida ! 0; sw_impre = 1; |FININF; |ACABA; |FINSI;

  sw_impre = 0;
  #2#0 = #7#0;
  |LEE 040#2=;
  |SI FSalida ! 0; |DDEFECTO #2; |FINSI;

  nifp = "";  nombrep = "";  callep = "";
  nump = "";  escp    = "";  pisop  = "";
  puep = "";  poblap  = "";  provip = "";
  codp = "";
  enComuneros = 0;
  sw_fisica   = 0;

  #5#0 = #2#0;
  #5#1 = 1;
  #5#2 = 1;
  #5#7 = #0#2;
  |LEE 040#5];
  |SI FSalida = 0; |Y #5#0 = #2#0; |Y #5#7 = #0#2;
      #2#0 = #5#3;
      |LEE 040#2=;
      |SI FSalida = 0;
          enComuneros = 1;
          sw_fisica   = 1;
          nifp = #2#1;  nombrep = #2#2;  callep = #2#5;
          nump = #2#6;  escp    = #2#7;  pisop  = #2#8;
          puep = #2#9;  poblap  = #2#13; provip = #2#12;
          codp = #2#21;
      |FINSI;
  |FINSI;

  #2#0 = #7#0;
  |LEE 040#2=;
  |SI FSalida ! 0; |DDEFECTO #2; |FINSI;

  |SI sw_fisica = 0;
      nifp = #2#1;  nombrep = #2#2;  callep = #2#5;
      nump = #2#6;  escp    = #2#7;  pisop  = #2#8;
      puep = #2#9;  poblap  = #2#13; provip = #2#12;
      codp = #2#21; sgp     = #2#4;  tlfnop = #2#14;

      |SI #2#24 ! vacio_20; |O #2#25 ! vacio_20;
          |O #2#26 ! vacio_12; |O #2#27 ! vacio_10; |O #2#28 ! vacio_16;
             nifp = "";  nombrep = "";  callep = "";
             nump = "";  escp    = "";  pisop  = "";
             puep = "";  poblap  = "";  provip = "";
             codp = "";  sgp     = "";  tlfnop = "";
      |FINSI;

      |SI #2#29 ! vacio_20; |O #2#30 ! vacio_20;
          |O #2#31 ! vacio_12; |O #2#32 ! vacio_10; |O #2#33 ! vacio_16;
             nifp = "";  nombrep = "";  callep = "";
             nump = "";  escp    = "";  pisop  = "";
             puep = "";  poblap  = "";  provip = "";
             codp = "";  sgp     = "";  tlfnop = "";
      |FINSI;

      |SI #2#34 ! vacio_20; |O #2#35 ! vacio_20;
          |O #2#36 ! vacio_12; |O #2#37 ! vacio_10; |O #2#38 ! vacio_16;
             nifp = "";  nombrep = "";  callep = "";
             nump = "";  escp    = "";  pisop  = "";
             puep = "";  poblap  = "";  provip = "";
             codp = "";  sgp     = "";  tlfnop = "";
      |FINSI;
  |FINSI;

  #3#0 = #2#18;
  #3#1 = #2#19;
  |LEE 040#3=;
  |SI FSalida ! 0; |DDEFECTO #3; |FINSI;

  #4#0 = #2#0;
  |LEE 040#4=;
  |SI FSalida ! 0; |DDEFECTO #4; |FINSI;

  |PRINT;
  |PIEINF;
  |FININF;
|FPRC;

|PROCESO hoja2_95;
  |INFOR "eos22392";

  |SI FSalida ! 0; sw_impre = 1; |FININF; |ACABA; |FINSI;

  sw_impre = 0;

  |PRINT;
  |PIEINF;
  |FININF;
|FPRC;

|PROCESO hoja3_95;
  |INFOR "eos23392";

  |SI FSalida ! 0; sw_impre = 1; |FININF; |ACABA; |FINSI;

  sw_impre = 0;

  |PRINT;
  |PIEINF;
  |FININF;
|FPRC;

|PROCESO hoja4_95;
  |INFOR "eos24392";

  |SI FSalida ! 0; sw_impre = 1; |FININF; |ACABA; |FINSI;

  sw_impre = 0;

  |PRINT;
  |PIEINF;
  |FININF;
|FPRC;

|PROCESO hoja5_95;
  |INFOR "eos25392";

  |SI FSalida ! 0; sw_impre = 1; |FININF; |ACABA; |FINSI;

  sw_impre = 0;

  |PRINT;
  |PIEINF;
  |FININF;
|FPRC;

|PROCESO hoja6_95;
  |INFOR "eos26392";

  |SI FSalida ! 0; sw_impre = 1; |FININF; |ACABA; |FINSI;

  sw_impre = 0;

  |PRINT;
  |PIEINF;
  |FININF;
|FPRC;

|PROCESO impre95;

  |SI sw_impre = 0; |HAZ ColocaPapel; |HAZ hoja1_95; |FINSI;
  |SI sw_impre = 0; |HAZ ColocaPapel; |HAZ hoja2_95; |FINSI;
  |SI sw_impre = 0; |HAZ ColocaPapel; |HAZ hoja3_95; |FINSI;
  |SI sw_impre = 0; |HAZ ColocaPapel; |HAZ hoja4_95; |FINSI;
  |SI sw_impre = 0; |HAZ ColocaPapel; |HAZ hoja5_95; |FINSI;
  |SI sw_impre = 0; |HAZ ColocaPapel; |HAZ hoja6_95; |FINSI;

  #7#3 = #0#6;
  #7#4 = "N";
  |GRABA 020#7a;
  |LIBERA #7;
|FPRC;

|DEFBUCLE lee39295;
  #7#1;
  ;
  d_cliente, #0#2;
  h_cliente, #0#2;
  be;
  NULL, impre95;
|FIN;

|PROCESO impre; |TIPO 3;
  dia  = #0#6 % 102;
  mes  = #0#6 % 402;
  anyo = #0#6 % -104;
  |HAZ mes;

  |SI #0#33 = "F"; |HAZ Secuencial; |ACABA; |FINSI;

  |IMPRE 0;
  |SI FSalida ! 0; |ACABA; |FINSI;

  |HAZ i_cuadre;

  |ABRET #2;
  |ABRET #3;
  |ABRET #4;
  |ABRET #5;
  |ABRET #eosma392;

  |SI #0#7 = "S"
      d_cliente = #0#0;
      h_cliente = #0#1;
      |SI #0#2 ] 0;  |Y #0#2 [ 80;
          |BUCLE lee39295;
      |SINO;
          |SI #0#2 [ 92;               |BUCLE lee39092; |FINSI;
          |SI #0#2 = 93; |O #0#2 = 94; |BUCLE lee39093; |FINSI;
          |SI #0#2 ] 95;               |BUCLE lee39295; |FINSI;
      |FINSI;
  |SINO;
      |PARA x = 8; |SI x [ 31; |HACIENDO x = x + 1;
            |SI #0x ! 0;
                d_cliente = #0x;
                h_cliente = #0x;
                |SI #0#2 ] 0;  |Y #0#2 [ 80;
                    |BUCLE lee39295;
                |SINO;
                    |SI #0#2 [ 92;               |BUCLE lee39092; |FINSI;
                    |SI #0#2 = 93; |O #0#2 = 94; |BUCLE lee39093; |FINSI;
                    |SI #0#2 ] 95;               |BUCLE lee39295; |FINSI;
                |FINSI;
            |FINSI;
      |SIGUE;
  |FINSI;

  |FINIMP;

  |CIERRAT #2;
  |CIERRAT #3;
  |CIERRAT #4;
  |CIERRAT #5;
  |CIERRAT #eosma392;
|FPRC;

|PROCESO mes;
   |SI mes = "01"; mes = "ENERO     "; |FINSI;
   |SI mes = "02"; mes = "FEBRERO   "; |FINSI;
   |SI mes = "03"; mes = "MARZO     "; |FINSI;
   |SI mes = "04"; mes = "ABRIL     "; |FINSI;
   |SI mes = "05"; mes = "MAYO      "; |FINSI;
   |SI mes = "06"; mes = "JUNIO     "; |FINSI;
   |SI mes = "07"; mes = "JULIO     "; |FINSI;
   |SI mes = "08"; mes = "AGOSTO    "; |FINSI;
   |SI mes = "09"; mes = "SEPTIEMBRE"; |FINSI;
   |SI mes = "10"; mes = "OCTUBRE   "; |FINSI;
   |SI mes = "11"; mes = "NOVIEMBRE "; |FINSI;
   |SI mes = "12"; mes = "DICIEMBRE "; |FINSI;
|FPRC;

|PROCESO nomodi;|TIPO 7;
  |SI #0#7 = "N"; |HAZ nomodifi; |FINSI;
|FPRC;

|PROCESO nomodi1;|TIPO 7;
  |SI #0#7 = "S"; |HAZ nomodifi; |FINSI;
|FPRC;

|PROCESO nomodifi;             || rutina de conversion a no modificables
  xxaponer = Anono;
  xxxxfiac = Control % A1001;
  Control = Control + xxxxfiac;
  Control = Control + xrelleno;
  Control = Control % A120;
  Control = Control + xxaponer;
|FPRC;

|PROCESO ColocaPapel;
   ||MENAV "    Coloque el papel y pulse una INTRO para imprimir";
|FPRC;

|PROCESO PasaDatos;
   #eosclien#0 = #eosm3390#0;
   |LEE 000#eosclien.=;
   |SI FSalida = 0;
      |SI #eosclien#61 ! "    ";
         #eosma392#0 = #eosm3390#0;
         #eosma392#1 = #eosm3390#1;
         |LEE 000#eosma392.=;

         |PARA Cont = 0; |SI Cont [ 28; |HACIENDO Cont = Cont + 1;
            #eosm3392#Cont# = #eosm3390#Cont#;
         |SIGUE;
         |PARA Cont = 29; |SI Cont [ 50; |HACIENDO Cont = Cont + 1;
            Calc = Cont + 4;
            #eosm3392#Cont# = #eosm3390#Calc#;
         |SIGUE;
         #eosm3392#51 = #eosm3390#176; #eosm3392#52 = #eosm3390#177;
         #eosm3392#53 = #eosm3390#178; #eosm3392#54 = #eosm3390#179;
         #eosm3392#55 = #eosm3390#180; #eosm3392#56 = #eosm3390#181;
         #eosm3392#57 = #eosm3390#55;  #eosm3392#58 = #eosm3390#56;
         #eosm3392#59 = #eosm3390#182; #eosm3392#60 = #eosm3390#183;
         #eosm3392#61 = #eosm3390#57;  #eosm3392#62 = #eosm3390#58;

         |PARA Cont = 63; |SI Cont [ 68; |HACIENDO Cont = Cont + 1;
            Calc = Cont - 4;
            #eosm3392#Cont# = #eosm3390#Calc#;
         |SIGUE;

         #eosm3392#69 = #eosm3390#184;  #eosm3392#70 = #eosm3390#185;
         #eosm3392#71 = #eosm3390#65;   #eosm3392#72 = #eosm3390#66;
         #eosm3392#73 = #eosm3390#186;  #eosm3392#74 = #eosm3390#187;
         #eosm3392#75 = #eosm3390#67;

         |PARA Cont = 76; |SI Cont [ 81; |HACIENDO Cont = Cont + 1;
            Calc = Cont - 74;
            #eosm3392#Cont# = #eosma392#Calc#;
         |SIGUE;
         #eosm3392#82 = #eosm3392#76 + #eosm3392#78 + #eosm3392#80;
         #eosm3392#83 = #eosm3392#77 + #eosm3392#79 + #eosm3392#81;

         |PARA Cont = 84; |SI Cont [ 89; |HACIENDO Cont = Cont + 1;
            Calc = Cont - 76;
            #eosm3392#Cont# = #eosma392#Calc#;
         |SIGUE;
         #eosm3392#90 = #eosm3392#84 + #eosm3392#86 + #eosm3392#88;
         #eosm3392#91 = #eosm3392#85 + #eosm3392#87 + #eosm3392#89;

         |PARA Cont = 92; |SI Cont [ 97; |HACIENDO Cont = Cont + 1;
            Calc = Cont - 78;
            #eosm3392#Cont# = #eosma392#Calc#;
         |SIGUE;
         #eosm3392#98 = #eosm3392#92 + #eosm3392#94 + #eosm3392#96;
         #eosm3392#99 = #eosm3392#93 + #eosm3392#95 + #eosm3392#97;

         |PARA Cont = 100; |SI Cont [ 105; |HACIENDO Cont = Cont + 1;
            Calc = Cont - 80;
            #eosm3392#Cont# = #eosma392#Calc#;
         |SIGUE;
         #eosm3392#106 = #eosm3392#100 + #eosm3392#102 + #eosm3392#104;
         #eosm3392#107 = #eosm3392#101 + #eosm3392#103 + #eosm3392#105;

         |PARA Cont = 108; |SI Cont [ 113; |HACIENDO Cont = Cont + 1;
            Calc = Cont - 82;
            #eosm3392#Cont# = #eosma392#Calc#;
         |SIGUE;
         #eosm3392#114 = #eosm3392#108 + #eosm3392#110 + #eosm3392#112;
         #eosm3392#115 = #eosm3392#109 + #eosm3392#111 + #eosm3392#113;

         |PARA Cont = 116; |SI Cont [ 121; |HACIENDO Cont = Cont + 1;
            Calc = Cont - 84;
            #eosm3392#Cont# = #eosma392#Calc#;
         |SIGUE;
         #eosm3392#122 = #eosm3392#116 + #eosm3392#118 + #eosm3392#120;
         #eosm3392#123 = #eosm3392#117 + #eosm3392#119 + #eosm3392#121;

         #eosm3392#124 = #eosm3390#194;  #eosm3392#125 = #eosm3390#74;
         #eosm3392#126 = #eosm3390#195;  #eosm3392#127 = #eosm3390#75;

         #eosm3392#128 = #eosm3392#83  + #eosm3392#91  + #eosm3392#99;
         #eosm3392#128 = #eosm3392#128 + #eosm3392#107 + #eosm3392#115;
         #eosm3392#128 = #eosm3392#128 + #eosm3392#123 + #eosm3392#125;
         #eosm3392#128 = #eosm3392#128 + #eosm3392#126 + #eosm3392#127;

         #eosm3392#129 = #eosm3392#75 - #eosm3392#128;

         #eosm3392#130 = #eosm3392#129;
         #eosm3392#131 = #eosm3390#147;
         #eosm3392#132 = #eosm3392#130 - #eosm3392#131;

         |PARA Cont = 133; |SI Cont [ 144; |HACIENDO Cont = Cont + 1;
            Calc = Cont + 16 ;
            #eosm3392#Cont# = #eosm3390#Calc#;
         |SIGUE;

         #eosm3392#145 = #eosma392#38;  #eosm3392#146 = #eosma392#39;
         #eosm3392#147 = #eosma392#40;  #eosm3392#148 = #eosma392#41;
         #eosm3392#149 = #eosm3390#164; #eosm3392#150 = #eosm3390#165;
         #eosm3392#151 = #eosm3390#166; #eosm3392#152 = #eosm3390#167;
         #eosm3392#153 = #eosm3390#168; #eosm3392#154 = #eosm3390#169;

         |PARA Cont = 145; |SI Cont [ 154; |HACIENDO Cont = Cont + 1;
            #eosm3392#155 = #eosm3392#155 + #eosm3392#Cont#;
         |SIGUE;

         #eosm3392#156 = #eosma392#42;  #eosm3392#157 = #eosm3390#171;
         #eosm3392#158 = #eosma392#43;  #eosm3392#159 = #eosma392#44;
         #eosm3392#160 = #eosm3390#172; #eosm3392#161 = #eosm3390#173;
         #eosm3392#162 = #eosm3390#174; #eosm3392#163 = #eosm3390#175;

         |PARA Cont = 164; |SI Cont [ 244; |HACIENDO Cont = Cont + 1;
            Calc = Cont - 119 ;
            #eosm3392#Cont# = #eosma392#Calc#;
         |SIGUE;

         |GRABA 020#eosm3392.n;
         |BORRA 020#eosm3390.a;
         |BORRA 020#eosma392.a;
      |FINSI;
   |FINSI;
   |LIBERA #eosm3390;
|FPRC;

|DEFBUCLE PasaDatos;
#eosm3390#1;
;
INICIO;
FINAL;
be;
NULL,PasaDatos;
|FIN;

|PROCESO MiraSiPaso;
   |ABRE #eosm3390; |ABRE #eosm3392; |ABRE #eosclien;
   |LEE 000#eosm3392.p;
   |SI FSalida ! 0;
      |LEE 000#eosm3390.p;
      |SI FSalida = 0;
         |BUCLE PasaDatos;
      |FINSI;
   |FINSI;
   |CIERRA #eosclien; |CIERRA #eosm3392; |CIERRA #eosm3390;
|FPRC;

|PROCESO Secuencial1;
   Cadena = "";
   aAlfa = "<T39201> ";                                          Cadena = Cadena + aAlfa;
   aAlfa = (("00" + #eosclien#18) % -102) + (("000" + #eosclien#19) % -103); Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#1;  nDig = 9;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#2;  nDig = 30; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = "              .";                                  Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#4;  nDig = 2;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#5;  nDig = 17; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#6;  nDig = 4;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#14; nDig = 9;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#13; nDig = 20; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#12; nDig = 15; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = (("00" + #eosclien#10)%-102) + (("000" + #eosclien#11)%-103);     Cadena = Cadena + aAlfa;
   |SI #eosclien#62 ! "    "; Cadena = Cadena + "1"; |SINO; Cadena = Cadena + "0"; |FINSI;
   nCalc = #eosem392#2;
   |SI #eosem392#2 ] 80;
      nCalc = nCalc + 1900;
   |SINO;
      nCalc = nCalc + 2000;
   |FINSI;
   aAlfa = nCalc; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#5;  nDig = 40; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#11; nDig = 1;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#23; nDig = 4;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#6;  nDig = 40; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#12; nDig = 1;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#24; nDig = 4;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   Cadena = Handle + " " + Cadena;    |FGRABA Cadena; Cadena = "";
   aAlfa = #eosm3392#7;  nDig = 40; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#13; nDig = 1;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#25; nDig = 4;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#8;  nDig = 40; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#14; nDig = 1;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#26; nDig = 4;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#9;  nDig = 40; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#15; nDig = 1;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#27; nDig = 4;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#10; nDig = 40; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#16; nDig = 1;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#28; nDig = 4;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   Cadena = Handle + " " + Cadena;    |FGRABA Cadena; Cadena = "";
   |SI sw_fisica = 1;
      aAlfa = nifp;         nDig = 9;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
      aAlfa = nombrep;      nDig = 37; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
      aAlfa = sgp;          nDig = 2;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
      aAlfa = callep;       nDig = 17; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
      aAlfa = nump;         nDig = 4;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
      aAlfa = escp;         nDig = 2;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
      aAlfa = pisop;        nDig = 2;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
      aAlfa = puep;         nDig = 2;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
      aAlfa = tlfnop;       nDig = 9;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
      aAlfa = poblap;       nDig = 20; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
      aAlfa = provip;       nDig = 15; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
      aAlfa = codp;         nDig = 5;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   |SINO;
      aAlfa = " " * 124; Cadena = Cadena + aAlfa;
   |FINSI;
   aAlfa = #eosem392#6;     nDig = 8;  aTipo = "F"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosem392#34;    nDig = 26; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosem392#6; aAlfa = aAlfa % 0102;
                            nDig = 2;  aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosem392#6; mes = aAlfa % 0402; |HAZ mes; aAlfa = mes;
                            nDig = 10; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosem392#6; aAlfa = aAlfa % 0704;
                            nDig = 4;  aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   Cadena = Handle + " " + Cadena;    |FGRABA Cadena; Cadena = "";
   aAlfa = (#eosclien#24 + #eosclien#25) % 0118; |HAZ QuitaRar; Cadena = Cadena + aAlfa;
   aAlfa = (#eosclien#24 + #eosclien#25) % 1918; |HAZ QuitaRar; Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#26;    nDig = 9;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#27;    nDig = 8;  aTipo = "F"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#28;    nDig = 12; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = (#eosclien#29 + #eosclien#30) % 0118; |HAZ QuitaRar; Cadena = Cadena + aAlfa;
   aAlfa = (#eosclien#29 + #eosclien#30) % 1918; |HAZ QuitaRar; Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#31;    nDig = 9;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#32;    nDig = 8;  aTipo = "F"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#33;    nDig = 12; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = (#eosclien#34 + #eosclien#35) % 0118; |HAZ QuitaRar; Cadena = Cadena + aAlfa;
   aAlfa = (#eosclien#34 + #eosclien#35) % 1918; |HAZ QuitaRar; Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#36;    nDig = 9;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#37;    nDig = 8;  aTipo = "F"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosclien#38;    nDig = 12; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = " " * 41;                                              Cadena = Cadena + aAlfa;
   aAlfa = "</T39201>";                                           Cadena = Cadena + aAlfa;
   aAlfa = &013 + &010;                                           Cadena = Cadena + aAlfa;


   Cadena = Handle + " " + Cadena;    |FGRABA Cadena;
|FPRC;

|PROCESO Secuencial2;
   Cadena = "";
   aAlfa  = "<T39202> "; Cadena = Cadena + aAlfa;

   || Base Imp. y cuota : Regimen Ordinario
   |PARA nCont = 29; |SI nCont [ 34; |HACIENDO nCont = nCont + 1;
      aAlfa = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   |SIGUE;

   || Base Imp. y cuota : Regimen Especial de bienes usados
   |PARA nCont = 35; |SI nCont [ 40; |HACIENDO nCont = nCont + 1;
      aAlfa = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   |SIGUE;

   || Base Imp. y cuota : Regimen Especial de agencias de viajes
   aAlfa = #eosm3392#41; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#42; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   Cadena = Handle + " " + Cadena;    |FGRABA Cadena;    Cadena = "";

   || Base Imp. y cuota : Regimen Especial de determinacion proporcional
   |PARA nCont = 43; |SI nCont [ 48; |HACIENDO nCont = nCont + 1;
      aAlfa = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   |SIGUE;

   || Base Imp. y cuota : Adquisicion intracomunitarias de bienes
   |PARA nCont = 49; |SI nCont [ 54; |HACIENDO nCont = nCont + 1;
      aAlfa = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   |SIGUE;

   Cadena = Handle + " " + Cadena;    |FGRABA Cadena;    Cadena = "";

   || Base Imp. y cuota : IVA devengado por inversion del sujeto pasivo
   aAlfa = #eosm3392#55; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#56; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Base Imp. y cuota : Modificacion de bases y cuotas
   aAlfa = #eosm3392#57; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#58; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Base Imp. y cuota : Modificacion de bases y cuotas por quiebra
   aAlfa = #eosm3392#59; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#60; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Base Imp. y cuota : Total bases y cuotas de IVA
   aAlfa = #eosm3392#61; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#62; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   Cadena = Handle + " " + Cadena;    |FGRABA Cadena;    Cadena = "";

   || Base Imp. y cuota : Recargo de equivalencia
   |PARA nCont = 63; |SI nCont [ 70; |HACIENDO nCont = nCont + 1;
      aAlfa = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   |SIGUE;

   || Base Imp. y cuota : Modificacion al recargo de equivalencia
   aAlfa = #eosm3392#71; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#72; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Base Imp. y cuota : Modificacion al recargo de equivalencia por quiebra
   aAlfa = #eosm3392#73; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#74; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Base Imp. y cuota : Total cuotas de IVA y recargo de equivalencia
   aAlfa = #eosm3392#75; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   aAlfa = "</T39202>";                                           Cadena = Cadena + aAlfa;
   aAlfa = &013 + &010;                                           Cadena = Cadena + aAlfa;
   Cadena = Handle + " " + Cadena;    |FGRABA Cadena;
|FPRC;

|PROCESO Secuencial3;
   Cadena = "";
   aAlfa  = "<T39203> "; Cadena = Cadena + aAlfa;

   || Deducciones : IVA deducible por operaciones interiores de bienes y servicios
   |PARA nCont = 76; |SI nCont [ 81; |HACIENDO nCont = nCont + 1;
      aAlfa = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   |SIGUE;

   || Deducciones : Total Bases Imponibles y cuotas deducibles : Bienes y servicios
   aAlfa = #eosm3392#82; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#83; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Deducciones : IVA deducible por operaciones interiores de bienes de inversion
   |PARA nCont = 84; |SI nCont [ 89; |HACIENDO nCont = nCont + 1;
      aAlfa = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   |SIGUE;

   || Deducciones : Total Bases Imponibles y cuotas deducibles : Bienes de inversion
   aAlfa = #eosm3392#90; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#91; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   Cadena = Handle + " " + Cadena;    |FGRABA Cadena;    Cadena = "";

   || Deducciones : IVA deducible por importaciones de bienes corrientes
   |PARA nCont = 92; |SI nCont [ 97; |HACIENDO nCont = nCont + 1;
      aAlfa = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   |SIGUE;

   || Deducciones : Total Bases Imponibles y cuotas deducibles : Bienes corrientes
   aAlfa = #eosm3392#98; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#99; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Deducciones : IVA deducible por importaciones de bienes de inversion
   |PARA nCont = 100; |SI nCont [ 105; |HACIENDO nCont = nCont + 1;
      aAlfa = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   |SIGUE;

   || Deducciones : Total Bases Imponibles y cuotas deducibles : Bienes de inversion
   aAlfa = #eosm3392#106; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#107; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   Cadena = Handle + " " + Cadena;    |FGRABA Cadena;    Cadena = "";

   || Deducciones : IVA deducible por adquisiciones intracomunitarias de bienes corrientes
   |PARA nCont = 108; |SI nCont [ 113; |HACIENDO nCont = nCont + 1;
      aAlfa = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   |SIGUE;

   || Deducciones : Total Bases Imponibles y cuotas deducibles : Bienes corrientes
   aAlfa = #eosm3392#114; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#115; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Deducciones : IVA deducible por adquisiciones intracomunitarias de bienes de inversion
   |PARA nCont = 116; |SI nCont [ 121; |HACIENDO nCont = nCont + 1;
      aAlfa = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   |SIGUE;

   || Deducciones : Total Bases Imponibles y cuotas deducibles : Bienes inversion
   aAlfa = #eosm3392#122; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#123; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   Cadena = Handle + " " + Cadena;    |FGRABA Cadena;    Cadena = "";

   || Deducciones : Compensaciones del regimen general de A.G.y P.
   aAlfa = #eosm3392#124; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   aAlfa = #eosm3392#125; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Deducciones : Rectificacion de deducciones
   aAlfa = #eosm3392#126; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Deducciones : Regularizacion de inversiones
   aAlfa = #eosm3392#127; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Deducciones : Suma de deducciones
   aAlfa = #eosm3392#128; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Deducciones : Resultado del regimen general
   aAlfa = #eosm3392#129; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   aAlfa = "</T39203>";                                           Cadena = Cadena + aAlfa;
   aAlfa = &013 + &010;                                           Cadena = Cadena + aAlfa;
   Cadena = Handle + " " + Cadena;    |FGRABA Cadena;
|FPRC;

|PROCESO Secuencial4;
   Cadena = "";
   aAlfa  = "<T39204> "; Cadena = Cadena + aAlfa;

   || Resultado de la liquidacion anual : Resultado del regimen general
   |SI #eosm3392#133 = 100; aAlfa = #eosm3392#130; |SINO; aAlfa = 0; |FINSI;
                          nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Resultado de la liquidacion anual : Compensacion de cuotas del ejercicio anterior
   |SI #eosm3392#133 = 100; aAlfa = #eosm3392#131; |SINO; aAlfa = 0; |FINSI;
                          nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Resultado de la liquidacion anual : Resultado de la liquidacion
   |SI #eosm3392#133 = 100; aAlfa = #eosm3392#132; |SINO; aAlfa = 0; |FINSI;
                          nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Tributacion a razon del territorio : Administraciones : % Territorio comun
   |SI #eosm3392#133 = 100; aAlfa = 0; |SINO; aAlfa = #eosm3392#133; |FINSI;
                          nDig = 4;  aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Tributacion a razon del territorio : Administraciones : % Alava
   |SI #eosm3392#133 = 100; aAlfa = 0; |SINO; aAlfa = #eosm3392#134; |FINSI;
                          nDig = 4;  aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Tributacion a razon del territorio : Administraciones : % Guipuzcoa
   |SI #eosm3392#133 = 100; aAlfa = 0; |SINO; aAlfa = #eosm3392#135; |FINSI;
                          nDig = 4;  aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Tributacion a razon del territorio : Administraciones : % Vizcaya
   |SI #eosm3392#133 = 100; aAlfa = 0; |SINO; aAlfa = #eosm3392#136; |FINSI;
                          nDig = 4;  aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Tributacion a razon del territorio : Administraciones : % Navarra
   |SI #eosm3392#133 = 100; aAlfa = 0; |SINO; aAlfa = #eosm3392#137; |FINSI;
                          nDig = 4;  aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Tributacion a razon del territorio : Suma de resultados
   |SI #eosm3392#133 = 100; aAlfa = 0; |SINO; aAlfa = #eosm3392#130; |FINSI;
                          nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Tributacion a razon del territorio : Resultado atribuible al territorio comun
   |SI #eosm3392#133 = 100; aAlfa = 0; |SINO; aAlfa = #eosm3392#138; |FINSI;
                          nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Tributacion a razon del territorio : Compens.cuotas ejercicio anterior atrib.territorio comun
   |SI #eosm3392#133 = 100; aAlfa = 0; |SINO; aAlfa = #eosm3392#139; |FINSI;
                          nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Tributacion a razon del territorio : Resultado liquidacion anual atrib.al territorio comun
   |SI #eosm3392#133 = 100; aAlfa = 0; |SINO; aAlfa = #eosm3392#140; |FINSI;
                          nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Resultado de las liquidaciones : Total ingresos realizados en declaraciones por IVA en el ejercicio
   aAlfa = #eosm3392#141; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Resultado de las liquidaciones : Total devoluciones mensuales IVA suj.pasivos Regtro.Export.y otros
   aAlfa = #eosm3392#142; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Resultado de las liquidaciones : Resultado de la declaracion/liquidacion del ultimo periodo - A Compensar
   aAlfa = #eosm3392#143; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Resultado de las liquidaciones : Resultado de la declaracion/liquidacion del ultimo periodo - A Devolver
   aAlfa = #eosm3392#144; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   Cadena = Handle + " " + Cadena;    |FGRABA Cadena;    Cadena = "";

   || Volumen de operaciones : Operaciones en regimen ordinario
   aAlfa = #eosm3392#145; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Volumen de operaciones : Operaciones en regimen especial de bienes usados
   aAlfa = #eosm3392#146; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Volumen de operaciones : Operaciones en regimen especial de agencias de viajes
   aAlfa = #eosm3392#147; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Volumen de operaciones : Operaciones en regimen especial de determinacion proporcional
   aAlfa = #eosm3392#148; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Volumen de operaciones : Operaciones en regimen especial del recargo de equivalencia
   aAlfa = #eosm3392#149; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Volumen de operaciones : Entregas intracomunitarias exentas
   aAlfa = #eosm3392#150; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Volumen de operaciones : Exportaciones y otras operaciones exentas con derecho a deduccion
   aAlfa = #eosm3392#151; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Volumen de operaciones : Operaciones exentas sin derecho a deduccion
   aAlfa = #eosm3392#152; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Volumen de operaciones : Entregas de bienes inmuebles y op.financieras no habituales
   aAlfa = #eosm3392#153; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Volumen de operaciones : Entregas de bienes de inversion
   aAlfa = #eosm3392#154; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Volumen de operaciones : Total volumen de operaciones
   aAlfa = #eosm3392#155; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   aAlfa = "</T39204>";                                           Cadena = Cadena + aAlfa;
   aAlfa = &013 + &010;                                         Cadena = Cadena + aAlfa;
   Cadena = Handle + " " + Cadena;    |FGRABA Cadena;
|FPRC;

|PROCESO Secuencial5;
   Cadena = "";
   aAlfa  = "<T39205> "; Cadena = Cadena + aAlfa;

   || Operaciones especificas : Adquisiciones interiores exentas
   aAlfa = #eosm3392#156; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Operaciones especificas : Adquisiciones intracomunitarias exentas
   aAlfa = #eosm3392#157; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Operaciones especificas : Importaciones exentas
   aAlfa = #eosm3392#158; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Operaciones especificas : Bases imponibles del IVA soportado no deducible
   aAlfa = #eosm3392#159; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Operaciones especificas : Oper.no sujetas o inversion suj.pasivo con dcho. a devoluc.mensual
   aAlfa = #eosm3392#160; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Operaciones especificas : Oper.sujetas que originan el derecho a la devolucion mensual
   aAlfa = #eosm3392#161; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Operaciones especificas : Entregas de bienes objeto de instal.o montaje en otros estados miembros
   aAlfa = #eosm3392#162; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   || Operaciones especificas : Entrega interior de bienes devengada por invers.suj.pasivo op.triang.
   aAlfa = #eosm3392#163; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   Cadena = Handle + " " + Cadena;    |FGRABA Cadena;    Cadena = "";

   |PARA nCont = 164; |SI nCont [ 193; |HACIENDO nCont = nCont + 1;
      || Prorratas : Actividad desarrollada
      aAlfa = #eosm3392#nCont#; nDig = 50; aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa; nCont = nCont + 1;
      || Prorratas : Codigo CNAE
      aAlfa = #eosm3392#nCont#; nDig = 3;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa; nCont = nCont + 1;
      || Prorratas : Volumen de operaciones
      aAlfa = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa; nCont = nCont + 1;
      || Prorratas : Volumen de operaciones con derecho a deduccion
      aAlfa = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa; nCont = nCont + 1;
      || Prorratas : Tipo de prorrata
      aAlfa = #eosm3392#nCont#; nDig = 1;  aTipo = "A"; |HAZ Recorta; Cadena = Cadena + aAlfa; nCont = nCont + 1;
      || Prorratas : % de prorrata
      aAlfa = #eosm3392#nCont#; nDig = 3;  aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
      Cadena = Handle + " " + Cadena;    |FGRABA Cadena;    Cadena = "";
   |SIGUE;

   aAlfa = "</T39205>";                                           Cadena = Cadena + aAlfa;
   aAlfa = &013 + &010;                                           Cadena = Cadena + aAlfa;
   Cadena = Handle + " " + Cadena;    |FGRABA Cadena;
|FPRC;

|PROCESO Secuencial6;
   Cadena = "";
   aAlfa  = "<T39206> "; Cadena = Cadena + aAlfa;

   || Regimenes Deduccion diferenciados : 1 : IVA Deducible en Operaciones interiores : Bienes y servicios : Base imponible
   aAlfa = #eosm3392#194; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 1 : IVA Deducible en Operaciones interiores : Bienes y servicios : Cuota deducible
   aAlfa = #eosm3392#195; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 1 : IVA Deducible en Operaciones interiores : Bienes inversión : Base imponible
   aAlfa = #eosm3392#196; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 1 : IVA Deducible en Operaciones interiores : Bienes inversión : Cuota deducible
   aAlfa = #eosm3392#197; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 1 : IVA Deducible en importaciones : Bienes corrientes : Base imponible
   aAlfa = #eosm3392#198; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 1 : IVA Deducible en importaciones : Bienes corrientes : Cuota deducible
   aAlfa = #eosm3392#199; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 1 : IVA Deducible en importaciones : Bienes inversion : Base imponible
   aAlfa = #eosm3392#200; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 1 : IVA Deducible en importaciones : Bienes inversion : Cuota deducible
   aAlfa = #eosm3392#201; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 1 : IVA Deducible adqu.intracomun. : Bienes corrientes : Base imponible
   aAlfa = #eosm3392#202; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 1 : IVA Deducible adqu.intracomun. : Bienes corrientes : Cuota deducible
   aAlfa = #eosm3392#203; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 1 : IVA Deducible adqu.intracomun. : Bienes inversion : Base imponible
   aAlfa = #eosm3392#204; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 1 : IVA Deducible adqu.intracomun. : Bienes inversion : Cuota deducible
   aAlfa = #eosm3392#205; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 1 : Compensacion regimen especial A.G. y P. : Base imponible
   aAlfa = #eosm3392#206; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 1 : Compensacion regimen especial A.G. y P. : Cuota deducible
   aAlfa = #eosm3392#207; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 1 : Rectificacion de deducciones
   aAlfa = #eosm3392#208; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 1 : Regularizacion de inversiones
   aAlfa = #eosm3392#209; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 1 : Suma de deducciones
   aAlfa = #eosm3392#210; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   Cadena = Handle + " " + Cadena;    |FGRABA Cadena;  Cadena = "";


   || Regimenes Deduccion diferenciados : 2 : IVA Deducible en Operaciones interiores : Bienes y servicios : Base imponible
   aAlfa = #eosm3392#211; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 2 : IVA Deducible en Operaciones interiores : Bienes y servicios : Cuota deducible
   aAlfa = #eosm3392#212; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 2 : IVA Deducible en Operaciones interiores : Bienes inversión : Base imponible
   aAlfa = #eosm3392#213; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 2 : IVA Deducible en Operaciones interiores : Bienes inversión : Cuota deducible
   aAlfa = #eosm3392#214; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 2 : IVA Deducible en importaciones : Bienes corrientes : Base imponible
   aAlfa = #eosm3392#215; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 2 : IVA Deducible en importaciones : Bienes corrientes : Cuota deducible
   aAlfa = #eosm3392#216; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 2 : IVA Deducible en importaciones : Bienes inversion : Base imponible
   aAlfa = #eosm3392#217; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 2 : IVA Deducible en importaciones : Bienes inversion : Cuota deducible
   aAlfa = #eosm3392#218; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 2 : IVA Deducible adqu.intracomun. : Bienes corrientes : Base imponible
   aAlfa = #eosm3392#219; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 2 : IVA Deducible adqu.intracomun. : Bienes corrientes : Cuota deducible
   aAlfa = #eosm3392#220; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 2 : IVA Deducible adqu.intracomun. : Bienes inversion : Base imponible
   aAlfa = #eosm3392#221; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 2 : IVA Deducible adqu.intracomun. : Bienes inversion : Cuota deducible
   aAlfa = #eosm3392#222; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 2 : Compensacion regimen especial A.G. y P. : Base imponible
   aAlfa = #eosm3392#223; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 2 : Compensacion regimen especial A.G. y P. : Cuota deducible
   aAlfa = #eosm3392#224; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 2 : Rectificacion de deducciones
   aAlfa = #eosm3392#225; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 2 : Regularizacion de inversiones
   aAlfa = #eosm3392#226; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 2 : Suma de deducciones
   aAlfa = #eosm3392#227; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   Cadena = Handle + " " + Cadena;    |FGRABA Cadena;  Cadena = "";


   || Regimenes Deduccion diferenciados : 3 : IVA Deducible en Operaciones interiores : Bienes y servicios : Base imponible
   aAlfa = #eosm3392#228; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 3 : IVA Deducible en Operaciones interiores : Bienes y servicios : Cuota deducible
   aAlfa = #eosm3392#229; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 3 : IVA Deducible en Operaciones interiores : Bienes inversión : Base imponible
   aAlfa = #eosm3392#230; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 3 : IVA Deducible en Operaciones interiores : Bienes inversión : Cuota deducible
   aAlfa = #eosm3392#231; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 3 : IVA Deducible en importaciones : Bienes corrientes : Base imponible
   aAlfa = #eosm3392#232; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 3 : IVA Deducible en importaciones : Bienes corrientes : Cuota deducible
   aAlfa = #eosm3392#233; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 3 : IVA Deducible en importaciones : Bienes inversion : Base imponible
   aAlfa = #eosm3392#234; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 3 : IVA Deducible en importaciones : Bienes inversion : Cuota deducible
   aAlfa = #eosm3392#235; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 3 : IVA Deducible adqu.intracomun. : Bienes corrientes : Base imponible
   aAlfa = #eosm3392#236; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 3 : IVA Deducible adqu.intracomun. : Bienes corrientes : Cuota deducible
   aAlfa = #eosm3392#237; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 3 : IVA Deducible adqu.intracomun. : Bienes inversion : Base imponible
   aAlfa = #eosm3392#238; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 3 : IVA Deducible adqu.intracomun. : Bienes inversion : Cuota deducible
   aAlfa = #eosm3392#239; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 3 : Compensacion regimen especial A.G. y P. : Base imponible
   aAlfa = #eosm3392#240; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 3 : Compensacion regimen especial A.G. y P. : Cuota deducible
   aAlfa = #eosm3392#241; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 3 : Rectificacion de deducciones
   aAlfa = #eosm3392#242; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 3 : Regularizacion de inversiones
   aAlfa = #eosm3392#243; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;
   || Regimenes Deduccion diferenciados : 3 : Suma de deducciones
   aAlfa = #eosm3392#244; nDig = 13; aTipo = "N"; |HAZ Recorta; Cadena = Cadena + aAlfa;

   Cadena = Handle + " " + Cadena;    |FGRABA Cadena;  Cadena = "";

   aAlfa = "</T39206>";                                           Cadena = Cadena + aAlfa;
   aAlfa = &013 + &010;                                           Cadena = Cadena + aAlfa;
   Cadena = Handle + " " + Cadena;    |FGRABA Cadena; Cadena = "";
|FPRC;

|PROCESO Ejercicio2003;
   aAlfa = "00000" + #eosm3392#0; |QBF aAlfa; aAlfa = aAlfa % -105;
   aAlfa = "392" + aAlfa;
   aAlfa = "wb  " + Directorio + aAlfa + ".txt";
   |FABRE aAlfa;
   Handle = FSalida;
   |SI Handle < 0; |ACABA; |FINSI;

   |HAZ Secuencial1;
   |HAZ Secuencial2;
   |HAZ Secuencial3;
   |HAZ Secuencial4;
   |HAZ Secuencial5;
   |HAZ Secuencial6;

   FSalida = Handle; |FCIERRA FSalida;
|FPRC;

|PROCESO Secuencial1Xml;
     |DDEFECTO #551;

     #551#1  = "<T";
     #551#2  = "392";
     #551#3  = "01";
     #551#4  = ">";
     #551#5  = "";

     #551#6  = (("00" + #eosclien#18) % -102) + (("000" + #eosclien#19) % -103);

     aAlfa   = #eosclien#1;  nDig = 9;  aTipo = "A"; |HAZ Recorta;
     #551#7  = aAlfa;

     aAlfa   = #eosclien#2;  nDig = 30; aTipo = "A"; |HAZ Recorta;
     #551#8  = aAlfa;

     #551#9  = "              .";

     aAlfa   = #eosclien#4;  nDig = 2;  aTipo = "A"; |HAZ Recorta;
     #551#10 = aAlfa;

     aAlfa   = #eosclien#5;  nDig = 17; aTipo = "A"; |HAZ Recorta;
     #551#11 = aAlfa;

     aAlfa   = #eosclien#6;  nDig = 4;  aTipo = "A"; |HAZ Recorta;
     #551#12 = aAlfa;

     eaEscal  = #2#7 % 102;   |QBF eaEscal;
     eaPiso   = #2#8;         |QBF eaPiso;
     eaPuerta = #2#9;         |QBF eaPuerta;

     aAlfa   = #eosclien#14; nDig = 9;  aTipo = "A"; |HAZ Recorta;
     #551#13 = aAlfa;

     aAlfa   = #eosclien#13; nDig = 20; aTipo = "A"; |HAZ Recorta;
     #551#14 = aAlfa;

     aAlfa   = #eosclien#12; nDig = 15; aTipo = "A"; |HAZ Recorta;
     #551#15 = aAlfa;

     #551#16 = (("00" + #eosclien#10)%-102) + (("000" + #eosclien#11) % -103);

     #551#17 = "0";
     |SI #eosclien#62 ! "    ";
         #551#17 = "1";
     |FINSI;

     #551#18 = enAnyo;

     aAlfa   = #eosm3392#5;  nDig = 40; aTipo = "A"; |HAZ Recorta;
     #551#19 = aAlfa;

     aAlfa   = #eosm3392#11; nDig = 1;  aTipo = "A"; |HAZ Recorta;
     #551#20 = aAlfa;

     aAlfa   = #eosm3392#23; nDig = 4;  aTipo = "A"; |HAZ Recorta;
     #551#21 = aAlfa;

     aAlfa   = #eosm3392#6;  nDig = 40; aTipo = "A"; |HAZ Recorta;
     #551#22 = aAlfa;

     aAlfa   = #eosm3392#12; nDig = 1;  aTipo = "A"; |HAZ Recorta;
     #551#23 = aAlfa;

     aAlfa   = #eosm3392#24; nDig = 4;  aTipo = "A"; |HAZ Recorta;
     #551#24 = aAlfa;

     aAlfa   = #eosm3392#7;  nDig = 40; aTipo = "A"; |HAZ Recorta;
     #551#25 = aAlfa;

     aAlfa   = #eosm3392#13; nDig = 1;  aTipo = "A"; |HAZ Recorta;
     #551#26 = aAlfa;

     aAlfa   = #eosm3392#25; nDig = 4;  aTipo = "A"; |HAZ Recorta;
     #551#27 = aAlfa;

     aAlfa   = #eosm3392#8;  nDig = 40; aTipo = "A"; |HAZ Recorta;
     #551#28 = aAlfa;

     aAlfa   = #eosm3392#14; nDig = 1;  aTipo = "A"; |HAZ Recorta;
     #551#29 = aAlfa;

     aAlfa   = #eosm3392#26; nDig = 4;  aTipo = "A"; |HAZ Recorta;
     #551#30 = aAlfa;

     aAlfa   = #eosm3392#9;  nDig = 40; aTipo = "A"; |HAZ Recorta;
     #551#31 = aAlfa;

     aAlfa   = #eosm3392#15; nDig = 1;  aTipo = "A"; |HAZ Recorta;
     #551#32 = aAlfa;

     aAlfa   = #eosm3392#27; nDig = 4;  aTipo = "A"; |HAZ Recorta;
     #551#33 = aAlfa;

     aAlfa   = #eosm3392#10; nDig = 40; aTipo = "A"; |HAZ Recorta;
     #551#34 = aAlfa;

     aAlfa   = #eosm3392#16; nDig = 1;  aTipo = "A"; |HAZ Recorta;
     #551#35 = aAlfa;

     aAlfa   = #eosm3392#28; nDig = 4;  aTipo = "A"; |HAZ Recorta;
     #551#36 = aAlfa;

     |SI sw_fisica = 1;
         aAlfa   = nifp;         nDig = 9;  aTipo = "A"; |HAZ Recorta;
         #551#37 = aAlfa;

         aAlfa   = nombrep;      nDig = 37; aTipo = "A"; |HAZ Recorta;
         #551#38 = aAlfa;

         aAlfa   = sgp;          nDig = 2;  aTipo = "A"; |HAZ Recorta;
         #551#39 = aAlfa;

         aAlfa   = callep;       nDig = 17; aTipo = "A"; |HAZ Recorta;
         #551#40 = aAlfa;

         aAlfa   = nump;         nDig = 4;  aTipo = "A"; |HAZ Recorta;
         #551#41 = aAlfa;

         aAlfa   = escp;         nDig = 2;  aTipo = "A"; |HAZ Recorta;
         #551#42 = aAlfa;

         aAlfa   = pisop;        nDig = 2;  aTipo = "A"; |HAZ Recorta;
         #551#43 = aAlfa;

         aAlfa   = puep;         nDig = 2;  aTipo = "A"; |HAZ Recorta;
         #551#44 = aAlfa;

         aAlfa   = tlfnop;       nDig = 9;  aTipo = "A"; |HAZ Recorta;
         #551#45 = aAlfa;

         aAlfa   = poblap;       nDig = 20; aTipo = "A"; |HAZ Recorta;
         #551#46 = aAlfa;

         aAlfa   = provip;       nDig = 15; aTipo = "A"; |HAZ Recorta;
         #551#47 = aAlfa;

         aAlfa   = codp;         nDig = 5;  aTipo = "A"; |HAZ Recorta;
         #551#48 = aAlfa;

         aAlfa = #eosem392#6;    nDig = 8;  aTipo = "F"; |HAZ Recorta;
         #551#49 = aAlfa;
     |SINO;
         aAlfa   = #eosem392#34;    nDig = 26; aTipo = "A"; |HAZ Recorta;
         #551#50 = aAlfa;

         aAlfa   = #eosem392#6; aAlfa = aAlfa % 0102;  nDig = 2;  aTipo = "N"; |HAZ Recorta;
         #551#51 = aAlfa;

         aAlfa   = #eosem392#6; mes = aAlfa % 0402; |HAZ mes; aAlfa = mes; nDig = 10; aTipo = "A"; |HAZ Recorta;
         #551#52 = aAlfa;

         aAlfa   = #eosem392#6; aAlfa = aAlfa % 0704;  nDig = 4;  aTipo = "N"; |HAZ Recorta;
         #551#53 = aAlfa;
     |FINSI;

     aAlfa   = #eosem392#34;    nDig = 26; aTipo = "A"; |HAZ Recorta;
     #551#50 = aAlfa;
     aAlfa   = (#eosclien#24 + #eosclien#25) % 136; |HAZ QuitaRar;
     #551#54 = aAlfa;

     aAlfa   = #eosclien#26;    nDig = 9;  aTipo = "A"; |HAZ Recorta;
     #551#55 = aAlfa;

     aAlfa   = #eosclien#27;    nDig = 8;  aTipo = "F"; |HAZ Recorta;
     #551#56 = aAlfa;

     aAlfa   = #eosclien#28;    nDig = 12; aTipo = "A"; |HAZ Recorta;
     #551#57 = aAlfa;

     aAlfa   = (#eosclien#29 + #eosclien#30) % 136; |HAZ QuitaRar;
     #551#58 = aAlfa;

     aAlfa   = #eosclien#31;    nDig = 9;  aTipo = "A"; |HAZ Recorta;
     #551#59 = aAlfa;

     aAlfa   = #eosclien#32;    nDig = 8;  aTipo = "F"; |HAZ Recorta;
     #551#60 = aAlfa;

     aAlfa   = #eosclien#33;    nDig = 12; aTipo = "A"; |HAZ Recorta;
     #551#61 = aAlfa;

     aAlfa   = (#eosclien#34 + #eosclien#35) % 136; |HAZ QuitaRar;
     #551#62 = aAlfa;

     aAlfa   = #eosclien#36;    nDig = 9;  aTipo = "A"; |HAZ Recorta;
     #551#63 = aAlfa;

     aAlfa   = #eosclien#37;    nDig = 8;  aTipo = "F"; |HAZ Recorta;
     #551#64 = aAlfa;

     aAlfa   = #eosclien#38;    nDig = 12; aTipo = "A"; |HAZ Recorta;
     #551#65 = aAlfa;

     #551#68 = "</T39201>";
     #551#69 = &013 + &010;
|FPRC;

|PROCESO Secuencial2Xml;
     |DDEFECTO #552;

     #552#1  = "<T";
     #552#2  = "392";
     #552#3  = "02";
     #552#4  = ">";
     #552#5  = "";

     || Base Imp. y cuota : Regimen Ordinario
     |PARA nCont = 29; |SI nCont [ 34; |HACIENDO nCont = nCont + 1;
           nCampo1     = nCont - 23;
           aAlfa       = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta;
           #552nCampo1 = aAlfa;
     |SIGUE;

     || Base Imp. y cuota : Regimen Especial de bienes usados
     |PARA nCont = 35; |SI nCont [ 40; |HACIENDO nCont = nCont + 1;
           nCampo1     = nCont - 23;
           aAlfa       = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta;
           #552nCampo1 = aAlfa;
     |SIGUE;

     || Base Imp. y cuota : Regimen Especial de agencias de viajes
     aAlfa   = #eosm3392#41; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #552#18 = aAlfa;

     aAlfa   = #eosm3392#42; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #552#19 = aAlfa;

     || Base Imp. y cuota : Regimen Especial de determinacion proporcional
     |PARA nCont = 43; |SI nCont [ 48; |HACIENDO nCont = nCont + 1;
           nCampo1     = nCont - 23;
           aAlfa       = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta;
           #552nCampo1 = aAlfa;
     |SIGUE;

     || Base Imp. y cuota : Adquisicion intracomunitarias de bienes
     |PARA nCont = 49; |SI nCont [ 54; |HACIENDO nCont = nCont + 1;
           nCampo1     = nCont - 23;
           aAlfa       = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta;
           #552nCampo1 = aAlfa;
     |SIGUE;

     || Base Imp. y cuota : IVA devengado por inversion del sujeto pasivo
     aAlfa   = #eosm3392#55; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #552#32 = aAlfa;

     aAlfa   = #eosm3392#56; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #552#33 = aAlfa;

     || Base Imp. y cuota : Modificacion de bases y cuotas
     aAlfa   = #eosm3392#57; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #552#34 = aAlfa;

     aAlfa   = #eosm3392#58; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #552#35 = aAlfa;

     || Base Imp. y cuota : Modificacion de bases y cuotas por quiebra
     aAlfa   = #eosm3392#59; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #552#36 = aAlfa;

     aAlfa   = #eosm3392#60; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #552#37 = aAlfa;

     || Base Imp. y cuota : Total bases y cuotas de IVA
     aAlfa   = #eosm3392#61; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #552#38 = aAlfa;

     aAlfa   = #eosm3392#62; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #552#39 = aAlfa;

     || Base Imp. y cuota : Recargo de equivalencia
     |PARA nCont = 63; |SI nCont [ 70; |HACIENDO nCont = nCont + 1;
           nCampo1     = nCont - 23;
           aAlfa       = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta;
           #552nCampo1 = aAlfa;
     |SIGUE;

     || Base Imp. y cuota : Modificacion al recargo de equivalencia
     aAlfa   = #eosm3392#71; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #552#48 = aAlfa;

     aAlfa   = #eosm3392#72; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #552#49 = aAlfa;

     || Base Imp. y cuota : Modificacion al recargo de equivalencia por quiebra
     aAlfa   = #eosm3392#73; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #552#50 = aAlfa;

     aAlfa   = #eosm3392#74; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #552#51 = aAlfa;

     || Base Imp. y cuota : Total cuotas de IVA y recargo de equivalencia
     aAlfa   = #eosm3392#75; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #552#52 = aAlfa;

     #552#53 = "</T39202>";
     #552#54 = &013 + &010;
|FPRC;

|PROCESO Secuencial3Xml;
     |DDEFECTO #553;

     #553#1  = "<T";
     #553#2  = "392";
     #553#3  = "03";
     #553#4  = ">";
     #553#5  = "";

     || Deducciones : IVA deducible por operaciones interiores de bienes y servicios
     |PARA nCont = 76; |SI nCont [ 81; |HACIENDO nCont = nCont + 1;
           nCampo1     = nCont - 70;
           aAlfa       = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta;
           #553nCampo1 = aAlfa;
     |SIGUE;

     || Deducciones : Total Bases Imponibles y cuotas deducibles : Bienes y servicios
     aAlfa   = #eosm3392#82; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#12 = aAlfa;

     aAlfa   = #eosm3392#83; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#13 = aAlfa;

|SI enAnyo < 2008;
     || Deducciones : IVA deducible por operaciones interiores de bienes de inversion
     |PARA nCont = 84; |SI nCont [ 89; |HACIENDO nCont = nCont + 1;
           nCampo1     = nCont - 70;
           aAlfa       = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta;
           #553nCampo1 = aAlfa;
     |SIGUE;

     || Deducciones : Total Bases Imponibles y cuotas deducibles : Bienes de inversion
     aAlfa   = #eosm3392#90; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#20 = aAlfa;

     aAlfa   = #eosm3392#91; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#21 = aAlfa;

|SINO;
     aAlfa = #9#8;  nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#14 = aAlfa;
     aAlfa = #9#9;  nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#15 = aAlfa;
     aAlfa = #9#10; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#16 = aAlfa;
     aAlfa = #9#11; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#17 = aAlfa;
     aAlfa = #9#12; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#18 = aAlfa;
     aAlfa = #9#13; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#19 = aAlfa;
     aAlfa = #9#14; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#20 = aAlfa;
     aAlfa = #9#15; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#21 = aAlfa;
|FINSI;

     || Deducciones : IVA deducible por importaciones de bienes corrientes
     |PARA nCont = 92; |SI nCont [ 97; |HACIENDO nCont = nCont + 1;
           nCampo1     = nCont - 70;
           aAlfa       = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta;
           #553nCampo1 = aAlfa;
     |SIGUE;

     || Deducciones : Total Bases Imponibles y cuotas deducibles : Bienes corrientes
     aAlfa   = #eosm3392#98; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#28 = aAlfa;

     aAlfa   = #eosm3392#99; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#29 = aAlfa;

     || Deducciones : IVA deducible por importaciones de bienes de inversion
     |PARA nCont = 100; |SI nCont [ 105; |HACIENDO nCont = nCont + 1;
           nCampo1     = nCont - 70;
           aAlfa       = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta;
           #553nCampo1 = aAlfa;
     |SIGUE;

     || Deducciones : Total Bases Imponibles y cuotas deducibles : Bienes de inversion
     aAlfa   = #eosm3392#106; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#36 = aAlfa;

     aAlfa   = #eosm3392#107; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#37 = aAlfa;

     || Deducciones : IVA deducible por adquisiciones intracomunitarias de bienes corrientes
     |PARA nCont = 108; |SI nCont [ 113; |HACIENDO nCont = nCont + 1;
           nCampo1     = nCont - 70;
           aAlfa       = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta;
           #553nCampo1 = aAlfa;
     |SIGUE;

     || Deducciones : Total Bases Imponibles y cuotas deducibles : Bienes corrientes
     aAlfa   = #eosm3392#114; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#44 = aAlfa;

     aAlfa   = #eosm3392#115; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#45 = aAlfa;

     || Deducciones : IVA deducible por adquisiciones intracomunitarias de bienes de inversion
     |PARA nCont = 116; |SI nCont [ 121; |HACIENDO nCont = nCont + 1;
           nCampo1     = nCont - 70;
           aAlfa       = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta;
           #553nCampo1 = aAlfa;
     |SIGUE;

     || Deducciones : Total Bases Imponibles y cuotas deducibles : Bienes inversion
     aAlfa   = #eosm3392#122; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#52 = aAlfa;

     aAlfa   = #eosm3392#123; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#53 = aAlfa;

     || Deducciones : Compensaciones del regimen general de A.G.y P.
     aAlfa   = #eosm3392#124; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#54 = aAlfa;

     aAlfa   = #eosm3392#125; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#55 = aAlfa;

     || Deducciones : Rectificacion de deducciones
     aAlfa   = #eosm3392#126; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#56 = aAlfa;

     || Deducciones : Regularizacion de inversiones
     aAlfa   = #eosm3392#127; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#57 = aAlfa;

     || Deducciones : Suma de deducciones
     aAlfa   = #eosm3392#128; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#58 = aAlfa;

     || Deducciones : Resultado del regimen general
     aAlfa = #eosm3392#129; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #553#59 = aAlfa;

     #553#60 = "</T39203>";
     #553#61 = &013 + &010;

     |SI enAnyo ] 2008;
         aAlfa = #eosm3392#84; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#70 = aAlfa;
         aAlfa = #eosm3392#85; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#71 = aAlfa;
         aAlfa = #eosm3392#86; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#72 = aAlfa;
         aAlfa = #eosm3392#87; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#73 = aAlfa;
         aAlfa = #eosm3392#88; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#74 = aAlfa;
         aAlfa = #eosm3392#89; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#75 = aAlfa;
         aAlfa = #eosm3392#90; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#76 = aAlfa;
         aAlfa = #eosm3392#91; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#77 = aAlfa;

         aAlfa = #9#16; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#62 = aAlfa;
         aAlfa = #9#17; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#63 = aAlfa;
         aAlfa = #9#18; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#64 = aAlfa;
         aAlfa = #9#19; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#65 = aAlfa;
         aAlfa = #9#20; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#66 = aAlfa;
         aAlfa = #9#21; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#67 = aAlfa;
         aAlfa = #9#22; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#68 = aAlfa;
         aAlfa = #9#23; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#69 = aAlfa;
     |FINSI;
/* no borrar hasta ver que es correcto
     |SI enAnyo ] 2008;
         aAlfa = #9#8;  nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#62 = aAlfa;
         aAlfa = #9#9;  nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#63 = aAlfa;
         aAlfa = #9#10; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#64 = aAlfa;
         aAlfa = #9#11; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#65 = aAlfa;
         aAlfa = #9#12; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#66 = aAlfa;
         aAlfa = #9#13; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#67 = aAlfa;
         aAlfa = #9#14; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#68 = aAlfa;
         aAlfa = #9#15; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#69 = aAlfa;

         aAlfa = #9#16; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#70 = aAlfa;
         aAlfa = #9#17; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#71 = aAlfa;
         aAlfa = #9#18; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#72 = aAlfa;
         aAlfa = #9#19; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#73 = aAlfa;
         aAlfa = #9#20; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#74 = aAlfa;
         aAlfa = #9#21; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#75 = aAlfa;
         aAlfa = #9#22; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#76 = aAlfa;
         aAlfa = #9#23; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#77 = aAlfa;
         aAlfa = #9#24; nDig = 13; aTipo = "N"; |HAZ Recorta;  #553#78 = aAlfa;
     |FINSI;
*/

|FPRC;

|PROCESO Secuencial4Xml;
     |DDEFECTO #554;

     #554#1  = "<T";
     #554#2  = "392";
     #554#3  = "04";
     #554#4  = ">";
     #554#5  = "";

     || Resultado de la liquidacion anual : Resultado del regimen general
     aAlfa = "0";
     |SI #eosm3392#133 = 100;  aAlfa = #eosm3392#130;  |FINSI;
     nDig = 13; aTipo = "N"; |HAZ Recorta;
     #554#6 = aAlfa;

     || Resultado de la liquidacion anual : Compensacion de cuotas del ejercicio anterior
     aAlfa = "0";
     |SI #eosm3392#133 = 100;  aAlfa = #eosm3392#131; |FINSI;
     nDig = 13; aTipo = "N"; |HAZ Recorta;
     #554#7 = aAlfa;

     || Resultado de la liquidacion anual : Resultado de la liquidacion
     aAlfa = "0";
     |SI #eosm3392#133 = 100; aAlfa = #eosm3392#132; |FINSI;
     nDig = 13; aTipo = "N"; |HAZ Recorta;
     #554#8 = aAlfa;

     || Tributacion a razon del territorio : Administraciones : % Territorio comun
     aAlfa = "0";
     |SI #eosm3392#133 ! 100; aAlfa = #eosm3392#133; |FINSI;
     nDig = 4;  aTipo = "N"; |HAZ Recorta;
     #554#9 = aAlfa;

     || Tributacion a razon del territorio : Administraciones : % Alava
     aAlfa = "0";
     |SI #eosm3392#133 ! 100; aAlfa = #eosm3392#134; |FINSI;
     nDig = 4;  aTipo = "N"; |HAZ Recorta;
     #554#10 = aAlfa;

     || Tributacion a razon del territorio : Administraciones : % Guipuzcoa
     aAlfa = "0";
     |SI #eosm3392#133 ! 100; aAlfa = #eosm3392#135; |FINSI;
     nDig = 4;  aTipo = "N"; |HAZ Recorta;
     #554#11 = aAlfa;

     || Tributacion a razon del territorio : Administraciones : % Vizcaya
     aAlfa = "0";
     |SI #eosm3392#133 ! 100;  aAlfa = #eosm3392#136; |FINSI;
     nDig = 4;  aTipo = "N"; |HAZ Recorta;
     #554#12 = aAlfa;

     || Tributacion a razon del territorio : Administraciones : % Navarra
     aAlfa = "0";
     |SI #eosm3392#133 ! 100;  aAlfa = #eosm3392#137; |FINSI;
     nDig = 4;  aTipo = "N"; |HAZ Recorta;
     #554#13 = aAlfa;

     || Tributacion a razon del territorio : Suma de resultados
     aAlfa = "0";
     |SI #eosm3392#133 ! 100; aAlfa = #eosm3392#130; |FINSI;
     nDig = 13; aTipo = "N"; |HAZ Recorta;
     #554#14 = aAlfa;

     || Tributacion a razon del territorio : Resultado atribuible al territorio comun
     aAlfa = "0";
     |SI #eosm3392#133 ! 100; aAlfa = #eosm3392#138; |FINSI;
     nDig = 13; aTipo = "N"; |HAZ Recorta;
     #554#15 = aAlfa;

     || Tributacion a razon del territorio : Compens.cuotas ejercicio anterior atrib.territorio comun
     aAlfa = "0";
     |SI #eosm3392#133 ! 100;  aAlfa = #eosm3392#139; |FINSI;
     nDig = 13; aTipo = "N"; |HAZ Recorta;
     #554#16 = aAlfa;

     || Tributacion a razon del territorio : Resultado liquidacion anual atrib.al territorio comun
     aAlfa = "0";
     |SI #eosm3392#133 ! 100; aAlfa = #eosm3392#140; |FINSI;
     nDig = 13; aTipo = "N"; |HAZ Recorta;
     #554#17 = aAlfa;

     || Resultado de las liquidaciones : Total ingresos realizados en declaraciones por IVA en el ejercicio
     aAlfa   = #eosm3392#141; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #554#18 = aAlfa;

     || Resultado de las liquidaciones : Total devoluciones mensuales IVA suj.pasivos Regtro.Export.y otros
     aAlfa   = #eosm3392#142; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #554#19 = aAlfa;

     || Resultado de las liquidaciones : Resultado de la declaracion/liquidacion del ultimo periodo - A Compensar
     aAlfa   = #eosm3392#143; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #554#20 = aAlfa;

     || Resultado de las liquidaciones : Resultado de la declaracion/liquidacion del ultimo periodo - A Devolver
     aAlfa   = #eosm3392#144; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #554#21 = aAlfa;

     |SI enAnyo [ 2005;
         aAlfa = #eosm3392#145; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#22 = aAlfa;
         aAlfa = #eosm3392#146; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#23 = aAlfa;
         aAlfa = #eosm3392#147; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#24 = aAlfa;
         aAlfa = #eosm3392#148; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#25 = aAlfa;
         aAlfa = #eosm3392#149; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#26 = aAlfa;
         aAlfa = #eosm3392#150; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#27 = aAlfa;
         aAlfa = #eosm3392#151; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#28 = aAlfa;
         aAlfa = #eosm3392#152; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#29 = aAlfa;
         aAlfa = #eosm3392#153; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#30 = aAlfa;
         aAlfa = #eosm3392#154; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#31 = aAlfa;
         aAlfa = #eosm3392#155; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#32 = aAlfa;
    |SINO;
         aAlfa = #eosm3392#145; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#22 = aAlfa;
         aAlfa = #eosm3392#150; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#23 = aAlfa;
         aAlfa = #eosm3392#151; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#24 = aAlfa;
         aAlfa = #eosm3392#152; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#25 = aAlfa;
         aAlfa = #eosm3392#163; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#26 = aAlfa;
         aAlfa = #eosm3392#161; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#27 = aAlfa;
         aAlfa = #eosm3392#149; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#28 = aAlfa;
         aAlfa = #eosm3392#146; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#29 = aAlfa;
         aAlfa = #eosm3392#147; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#30 = aAlfa;
         aAlfa = #eosm3392#153; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#31 = aAlfa;
         aAlfa = #eosm3392#154; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#32 = aAlfa;
         aAlfa = #eosm3392#155; nDig = 13; aTipo = "N"; |HAZ Recorta;  #554#35 = aAlfa;
    |FINSI;

    #554#33 = "</T39204>";
    #554#34 = &013 + &010;
|FPRC;

|PROCESO Secuencial5Xml;
     |DDEFECTO #555;

     #555#1  = "<T";
     #555#2  = "392";
     #555#3  = "05";
     #555#4  = ">";
     #555#5  = "";

     || Operaciones especificas : Adquisiciones interiores exentas
     aAlfa   = #eosm3392#156; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #555#6  = aAlfa;

     || Operaciones especificas : Adquisiciones intracomunitarias exentas
     aAlfa   = #eosm3392#157; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #555#7  = aAlfa;

     || Operaciones especificas : Importaciones exentas
     aAlfa   = #eosm3392#158; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #555#8  = aAlfa;

     || Operaciones especificas : Bases imponibles del IVA soportado no deducible
     aAlfa   = #eosm3392#159; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #555#9  = aAlfa;

     || Operaciones especificas : Oper.no sujetas o inversion suj.pasivo con dcho. a devoluc.mensual
     aAlfa   = #eosm3392#160; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #555#10 = aAlfa;

     || Operaciones especificas : Oper.sujetas que originan el derecho a la devolucion mensual
     aAlfa   = #eosm3392#161; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #555#11 = aAlfa;

     || Operaciones especificas : Entregas de bienes objeto de instal.o montaje en otros estados miembros
     aAlfa   = #eosm3392#162; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #555#12 = aAlfa;

     || Operaciones especificas : Entrega interior de bienes devengada por invers.suj.pasivo op.triang.
     aAlfa   = #eosm3392#163; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #555#13 = aAlfa;

     |PARA nCont = 164; |SI nCont [ 193; |HACIENDO nCont = nCont + 1;
         || Prorratas : Actividad desarrollada
         nCampo1     = nCont - 150;
         aAlfa       = #eosm3392#nCont#; nDig = 50; aTipo = "A"; |HAZ Recorta; nCont = nCont + 1;
         #555nCampo1 = aAlfa;

         || Prorratas : Codigo CNAE
         nCampo1     = nCont - 150;
         aAlfa       = #eosm3392#nCont#; nDig = 3;  aTipo = "A"; |HAZ Recorta; nCont = nCont + 1;
         #555nCampo1 = aAlfa;

         || Prorratas : Volumen de operaciones
         nCampo1     = nCont - 150;
         aAlfa       = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta;  nCont = nCont + 1;
         #555nCampo1 = aAlfa;

         || Prorratas : Volumen de operaciones con derecho a deduccion
         nCampo1     = nCont - 150;
         aAlfa       = #eosm3392#nCont#; nDig = 13; aTipo = "N"; |HAZ Recorta;  nCont = nCont + 1;
         #555nCampo1 = aAlfa;

         || Prorratas : Tipo de prorrata
         nCampo1     = nCont - 150;
         aAlfa       = #eosm3392#nCont#; nDig = 1;  aTipo = "A"; |HAZ Recorta;  nCont = nCont + 1;
         #555nCampo1 = aAlfa;

         || Prorratas : % de prorrata
         nCampo1     = nCont - 150;
         aAlfa       = #eosm3392#nCont#; nDig = 3;  aTipo = "N"; |HAZ Recorta;
         #555nCampo1 = aAlfa;
     |SIGUE;

     #555#44 = "</T39205>";
     #555#45 = &013 + &010;

     |SI enAnyo ] 2008;
         aAlfa = #9#25; nDig = 13; aTipo = "N"; |HAZ Recorta;  #555#46 = aAlfa;
     |FINSI;
|FPRC;

|PROCESO Secuencial6Xml;
     |DDEFECTO #556;

     #556#1  = "<T";
     #556#2  = "392";
     #556#3  = "06";
     #556#4  = ">";
     #556#5  = "";

|| Grupo 1

     || Regimenes Deduccion diferenciados : 1 : IVA Deducible en Operaciones interiores : Bienes y servicios : Base imponible
     aAlfa   = #eosm3392#194; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#6  = aAlfa;

     || Regimenes Deduccion diferenciados : 1 : IVA Deducible en Operaciones interiores : Bienes y servicios : Cuota deducible
     aAlfa   = #eosm3392#195; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#7  = aAlfa;

     || Regimenes Deduccion diferenciados : 1 : IVA Deducible en Operaciones interiores : Bienes inversión : Base imponible
     aAlfa   = #eosm3392#196; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#8  = aAlfa;

     || Regimenes Deduccion diferenciados : 1 : IVA Deducible en Operaciones interiores : Bienes inversión : Cuota deducible
     aAlfa   = #eosm3392#197; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#9  = aAlfa;

     || Regimenes Deduccion diferenciados : 1 : IVA Deducible en importaciones : Bienes corrientes : Base imponible
     aAlfa   = #eosm3392#198; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#10 = aAlfa;

     || Regimenes Deduccion diferenciados : 1 : IVA Deducible en importaciones : Bienes corrientes : Cuota deducible
     aAlfa   = #eosm3392#199; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#11 = aAlfa;

     || Regimenes Deduccion diferenciados : 1 : IVA Deducible en importaciones : Bienes inversion : Base imponible
     aAlfa   = #eosm3392#200; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#12 = aAlfa;

     || Regimenes Deduccion diferenciados : 1 : IVA Deducible en importaciones : Bienes inversion : Cuota deducible
     aAlfa   = #eosm3392#201; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#13 = aAlfa;

     || Regimenes Deduccion diferenciados : 1 : IVA Deducible adqu.intracomun. : Bienes corrientes : Base imponible
     aAlfa   = #eosm3392#202; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#14 = aAlfa;

     || Regimenes Deduccion diferenciados : 1 : IVA Deducible adqu.intracomun. : Bienes corrientes : Cuota deducible
     aAlfa   = #eosm3392#203; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#15 = aAlfa;

     || Regimenes Deduccion diferenciados : 1 : IVA Deducible adqu.intracomun. : Bienes inversion : Base imponible
     aAlfa   = #eosm3392#204; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#16 = aAlfa;

     || Regimenes Deduccion diferenciados : 1 : IVA Deducible adqu.intracomun. : Bienes inversion : Cuota deducible
     aAlfa   = #eosm3392#205; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#17 = aAlfa;

     || Regimenes Deduccion diferenciados : 1 : Compensacion regimen especial A.G. y P. : Base imponible
     aAlfa   = #eosm3392#206; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#18 = aAlfa;

     || Regimenes Deduccion diferenciados : 1 : Compensacion regimen especial A.G. y P. : Cuota deducible
     aAlfa   = #eosm3392#207; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#19 = aAlfa;

     || Regimenes Deduccion diferenciados : 1 : Rectificacion de deducciones
     aAlfa   = #eosm3392#208; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#20 = aAlfa;

     || Regimenes Deduccion diferenciados : 1 : Regularizacion de inversiones
     aAlfa   = #eosm3392#209; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#21 = aAlfa;

     || Regimenes Deduccion diferenciados : 1 : Suma de deducciones
     aAlfa   = #eosm3392#210; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#22 = aAlfa;

|| Grupo 2

     || Regimenes Deduccion diferenciados : 2 : IVA Deducible en Operaciones interiores : Bienes y servicios : Base imponible
     aAlfa   = #eosm3392#211; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#23 = aAlfa;

     || Regimenes Deduccion diferenciados : 2 : IVA Deducible en Operaciones interiores : Bienes y servicios : Cuota deducible
     aAlfa   = #eosm3392#212; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#24 = aAlfa;

     || Regimenes Deduccion diferenciados : 2 : IVA Deducible en Operaciones interiores : Bienes inversión : Base imponible
     aAlfa   = #eosm3392#213; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#25 = aAlfa;

     || Regimenes Deduccion diferenciados : 2 : IVA Deducible en Operaciones interiores : Bienes inversión : Cuota deducible
     aAlfa   = #eosm3392#214; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#26 = aAlfa;

     || Regimenes Deduccion diferenciados : 2 : IVA Deducible en importaciones : Bienes corrientes : Base imponible
     aAlfa   = #eosm3392#215; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#27 = aAlfa;

     || Regimenes Deduccion diferenciados : 2 : IVA Deducible en importaciones : Bienes corrientes : Cuota deducible
     aAlfa   = #eosm3392#216; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#28 = aAlfa;

     || Regimenes Deduccion diferenciados : 2 : IVA Deducible en importaciones : Bienes inversion : Base imponible
     aAlfa   = #eosm3392#217; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#29 = aAlfa;

     || Regimenes Deduccion diferenciados : 2 : IVA Deducible en importaciones : Bienes inversion : Cuota deducible
     aAlfa   = #eosm3392#218; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#30 = aAlfa;

     || Regimenes Deduccion diferenciados : 2 : IVA Deducible adqu.intracomun. : Bienes corrientes : Base imponible
     aAlfa   = #eosm3392#219; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#31 = aAlfa;

     || Regimenes Deduccion diferenciados : 2 : IVA Deducible adqu.intracomun. : Bienes corrientes : Cuota deducible
     aAlfa   = #eosm3392#220; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#32 = aAlfa;

     || Regimenes Deduccion diferenciados : 2 : IVA Deducible adqu.intracomun. : Bienes inversion : Base imponible
     aAlfa   = #eosm3392#221; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#33 = aAlfa;

     || Regimenes Deduccion diferenciados : 2 : IVA Deducible adqu.intracomun. : Bienes inversion : Cuota deducible
     aAlfa   = #eosm3392#222; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#34 = aAlfa;

     || Regimenes Deduccion diferenciados : 2 : Compensacion regimen especial A.G. y P. : Base imponible
     aAlfa   = #eosm3392#223; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#35 = aAlfa;

     || Regimenes Deduccion diferenciados : 2 : Compensacion regimen especial A.G. y P. : Cuota deducible
     aAlfa   = #eosm3392#224; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#36 = aAlfa;

     || Regimenes Deduccion diferenciados : 2 : Rectificacion de deducciones
     aAlfa   = #eosm3392#225; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#37 = aAlfa;

     || Regimenes Deduccion diferenciados : 2 : Regularizacion de inversiones
     aAlfa   = #eosm3392#226; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#38 = aAlfa;

     || Regimenes Deduccion diferenciados : 2 : Suma de deducciones
     aAlfa   = #eosm3392#227; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#39 = aAlfa;

|| Grupo 3

     || Regimenes Deduccion diferenciados : 3 : IVA Deducible en Operaciones interiores : Bienes y servicios : Base imponible
     aAlfa = #eosm3392#228; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#40 = aAlfa;

     || Regimenes Deduccion diferenciados : 3 : IVA Deducible en Operaciones interiores : Bienes y servicios : Cuota deducible
     aAlfa   = #eosm3392#229; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#41 = aAlfa;

     || Regimenes Deduccion diferenciados : 3 : IVA Deducible en Operaciones interiores : Bienes inversión : Base imponible
     aAlfa   = #eosm3392#230; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#42 = aAlfa;

     || Regimenes Deduccion diferenciados : 3 : IVA Deducible en Operaciones interiores : Bienes inversión : Cuota deducible
     aAlfa   = #eosm3392#231; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#43 = aAlfa;

     || Regimenes Deduccion diferenciados : 3 : IVA Deducible en importaciones : Bienes corrientes : Base imponible
     aAlfa   = #eosm3392#232; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#44 = aAlfa;

     || Regimenes Deduccion diferenciados : 3 : IVA Deducible en importaciones : Bienes corrientes : Cuota deducible
     aAlfa   = #eosm3392#233; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#45 = aAlfa;

     || Regimenes Deduccion diferenciados : 3 : IVA Deducible en importaciones : Bienes inversion : Base imponible
     aAlfa   = #eosm3392#234; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#46 = aAlfa;

     || Regimenes Deduccion diferenciados : 3 : IVA Deducible en importaciones : Bienes inversion : Cuota deducible
     aAlfa   = #eosm3392#235; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#47 = aAlfa;

     || Regimenes Deduccion diferenciados : 3 : IVA Deducible adqu.intracomun. : Bienes corrientes : Base imponible
     aAlfa   = #eosm3392#236; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#48 = aAlfa;

     || Regimenes Deduccion diferenciados : 3 : IVA Deducible adqu.intracomun. : Bienes corrientes : Cuota deducible
     aAlfa   = #eosm3392#237; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#49 = aAlfa;

     || Regimenes Deduccion diferenciados : 3 : IVA Deducible adqu.intracomun. : Bienes inversion : Base imponible
     aAlfa   = #eosm3392#238; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#50 = aAlfa;

     || Regimenes Deduccion diferenciados : 3 : IVA Deducible adqu.intracomun. : Bienes inversion : Cuota deducible
     aAlfa   = #eosm3392#239; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#51 = aAlfa;

     || Regimenes Deduccion diferenciados : 3 : Compensacion regimen especial A.G. y P. : Base imponible
     aAlfa   = #eosm3392#240; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#52 = aAlfa;

     || Regimenes Deduccion diferenciados : 3 : Compensacion regimen especial A.G. y P. : Cuota deducible
     aAlfa   = #eosm3392#241; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#53 = aAlfa;

     || Regimenes Deduccion diferenciados : 3 : Rectificacion de deducciones
     aAlfa   = #eosm3392#242; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#54 = aAlfa;

     || Regimenes Deduccion diferenciados : 3 : Regularizacion de inversiones
     aAlfa   = #eosm3392#243; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#55 = aAlfa;

     || Regimenes Deduccion diferenciados : 3 : Suma de deducciones
     aAlfa   = #eosm3392#244; nDig = 13; aTipo = "N"; |HAZ Recorta;
     #556#56 = aAlfa;

     #556#57 = "</T39206>";
     #556#58 = &013 + &010;
|FPRC;

|PROCESO Ejercicio2004;
     #9#0 = #7#0;
     #9#1 = #7#1;
     |LEE 000#9=;
     |SI FSalida ! 0;  |DDEFECTO #9;  |FINSI;

     aAbre = eaInternet + "392" + (("00000" + #7#0) % -105) + ".XML";

     |XABRE "CBW", aAbre, enHandle2;

     |HAZ Secuencial1Xml;
     |HAZ Secuencial2Xml;
     |HAZ Secuencial3Xml;
     |HAZ Secuencial4Xml;
     |HAZ Secuencial5Xml;
     |HAZ Secuencial6Xml;

     |ABRE #199;
     |HAZ CargaXml;
     |CIERRA #199;

     |XCIERRA enHandle2;
|FPRC;

|PROCESO BucleSec;
   |HAZ CargaDatos;

   |SI enAnyo [ 2003;
       |HAZ Ejercicio2003;
   |SINO;
       |HAZ Ejercicio2004;
   |FINSI;
|FPRC;

|DEFBUCLE BucleSec;
     #eosm3392#1;
     ;
     DEmpresa, #0#2;
     HEmpresa, #0#2;
     ;
     NULL, BucleSec;
|FIN;

|PROCESO Secuencial;
     |HAZ PintaMoneda; #0#32 = eaMoneda;

     eaModelos = "392";

     |SI #0#2 ] 80;
         enAnyo = 1900 + #0#2;
         |RMKDIR "/MODELOS";
         |RMKDIR "/MODELOS/INTERNET/";
         |RMKDIR "/MODELOS/INTERNET/392/";
         |RMKDIR "/MODELOS/INTERNET/392/" + enAnyo;
     |SINO;
         enAnyo = 2000 + #0#2;

         aAlfa      = "/AEAT";                        |RMKDIR aAlfa;
         aAlfa      = "/AEAT/INTERNET";               |RMKDIR aAlfa;
         aAlfa      = "/AEAT/INTERNET/392";           |RMKDIR aAlfa;
         aAlfa      = "/AEAT/INTERNET/392/" + enAnyo; |RMKDIR aAlfa;
         eaInternet = aAlfa + "/";
     |FINSI;

     |SI enAnyo [ 2003;
         Directorio = "";
         |DBASE Directorio;
         Directorio = Directorio + "hacienda/internet/392";
         |MKDIR Directorio;
         Directorio = Directorio + "/";
     |FINSI;

     |ABRET #2;
     |ABRET #3;
     |ABRET #4;
     |ABRET #5;
     |ABRET #eosma392;
     |ABRET #9;

     |SI #0#7 = "S";
         DEmpresa = #0#0; HEmpresa = #0#1;
         |BUCLE BucleSec;
     |SINO;
         |PARA nCont = 8; |SI nCont [ 31; |HACIENDO nCont = nCont + 1;
               DEmpresa = #0#nCont#; HEmpresa = #0#nCont#;
               |BUCLE BucleSec;
         |SIGUE;
     |FINSI;

     |CIERRAT #2;
     |CIERRAT #3;
     |CIERRAT #4;
     |CIERRAT #5;
     |CIERRAT #eosma392;
     |CIERRAT #9;

     |SI enAnyo [ 2003;
         aAlfa = ""; |IP_REMOTO aAlfa; |QBF aAlfa;
         |DBASE Comodin; |QBF Comodin;
         Comodin = Comodin + "hacienda/internet/392/";
         Comodin2 = Comodin;
         Comodin = Comodin + "*.txt"
         |_PDIR Comodin;
         |PARA; |SI FSalida ] 0; |HACIENDO;
              aAlfa = Comodin; |QBF aAlfa; aAlfa = aAlfa - ".txt";
              aAlfa = aAlfa % -105; nCalc = aAlfa;
              |SI nCalc ] DEmpresa; |Y nCalc [ HEmpresa;
                  Comodin1 = "/MODELOS/INTERNET/392/" + (Comodin - Comodin2);
                  aAlfa = ""; |IP_REMOTO aAlfa; |QBF aAlfa;
                  |SI aAlfa ! "";
                      |ENVIA_FICHERO Comodin, Comodin1;
                  |SINO;
                      |COPIA_FICHERO Comodin, Comodin1;
                 |FINSI;
              |FINSI;
              |_SDIR Comodin;
          |SIGUE;
     |SINO;
          aAlfa = "0000 Los ficheros estan situados en la Carpeta " + eaInternet;
         |MENAV aAlfa;
     |FINSI;

     enCmpPagina = 35; |HAZ PideExplorer;
     |SI eaCamino ! "ERROR";
         Comodin1 = eaCamino + " "+ #eosem392#35; |QBF Comodin1;
         |RSYSTEM Comodin1;
     |FINSI;
|FPRC;

|PROCESO CargaDatos;
  #2#0 = #7#0;
  |LEE 040#2=;
  |SI FSalida ! 0; |DDEFECTO #2; |FINSI;

  nifp = "";  nombrep = "";  callep = "";
  nump = "";  escp    = "";  pisop  = "";
  puep = "";  poblap  = "";  provip = "";
  codp = "";
  sw_fisica   = 0;
  enComuneros = 0;

  #5#0 = #2#0;
  #5#1 = 1;
  #5#2 = 1;
  #5#7 = #0#2;
  |LEE 040#5];
  |SI FSalida = 0; |Y #5#0 = #2#0; |Y #5#7 = #0#2;
      #2#0 = #5#3;
      |LEE 040#2=;
      |SI FSalida = 0;
          sw_fisica   = 1;
          enComuneros = 1;
          nifp = #2#1;  nombrep = #2#2;  callep = #2#5;
          nump = #2#6;  escp    = #2#7;  pisop  = #2#8;
          puep = #2#9;  poblap  = #2#13; provip = #2#12;
          codp = #2#21;
      |FINSI;
  |FINSI;

  #2#0 = #7#0;
  |LEE 040#2=;
  |SI FSalida ! 0; |DDEFECTO #2; |FINSI;

  |SI sw_fisica = 0;
      nifp = #2#1;  nombrep = #2#2;  callep = #2#5;
      nump = #2#6;  escp    = #2#7;  pisop  = #2#8;
      puep = #2#9;  poblap  = #2#13; provip = #2#12;
      codp = #2#21; sgp     = #2#4;  tlfnop = #2#14;

      |SI #2#24 ! vacio_20; |O #2#25 ! vacio_20;
          |O #2#26 ! vacio_12; |O #2#27 ! vacio_10; |O #2#28 ! vacio_16;
             nifp = "";  nombrep = "";  callep = "";
             nump = "";  escp    = "";  pisop  = "";
             puep = "";  poblap  = "";  provip = "";
             codp = "";  sgp     = "";  tlfnop = "";
      |FINSI;

      |SI #2#29 ! vacio_20; |O #2#30 ! vacio_20;
          |O #2#31 ! vacio_12; |O #2#32 ! vacio_10; |O #2#33 ! vacio_16;
             nifp = "";  nombrep = "";  callep = "";
             nump = "";  escp    = "";  pisop  = "";
             puep = "";  poblap  = "";  provip = "";
             codp = "";  sgp     = "";  tlfnop = "";
      |FINSI;

      |SI #2#34 ! vacio_20; |O #2#35 ! vacio_20;
          |O #2#36 ! vacio_12; |O #2#37 ! vacio_10; |O #2#38 ! vacio_16;
             nifp = "";  nombrep = "";  callep = "";
             nump = "";  escp    = "";  pisop  = "";
             puep = "";  poblap  = "";  provip = "";
             codp = "";  sgp     = "";  tlfnop = "";
      |FINSI;
  |FINSI;

  #3#0 = #2#18;
  #3#1 = #2#19;
  |LEE 040#3=;
  |SI FSalida ! 0; |DDEFECTO #3; |FINSI;

  #4#0 = #2#0;
  |LEE 040#4=;
  |SI FSalida ! 0; |DDEFECTO #4; |FINSI;

|FPRC;

|PROCESO Recorta;
||   aAlfa = aAlfa - ".";
   |SI aTipo = "A"; aAlfa1 = " " * nDig; nCalc = 100 + nDig;       |FINSI;
   |SI aTipo = "N"; aAlfa1 = "0" * nDig; nCalc = 0 - (100 + nDig); |FINSI;
   |SI aTipo = "F";
      |SI aAlfa = "          ";
         aAlfa = " " * 8;
      |SINO;
         aAlfa = aAlfa - "."; aAlfa = aAlfa - ".";
         aAlfa = aAlfa - "/"; aAlfa = aAlfa - "/";
         aAlfa = aAlfa - "-"; aAlfa = aAlfa - "-";
         |ACABA;
      |FINSI;
   |FINSI;
   |SI aTipo = "f";
      aAlfa1 = aAlfa;
      aAlfa  = (aAlfa1 % 0704) + (aAlfa1 % 0402) + (aAlfa1 % 0102);
      |ACABA;
   |FINSI;

   |SI aTipo = "A";
      aAlfa = (aAlfa + aAlfa1) % nCalc;

      nEspa   = 0;
      aAlfaCad = "";
      aLong   = aAlfa % 0;
      nLong   = aLong;
      |PARA nCampo = 1;  |SI nCampo [ aLong;  |HACIENDO nCampo = nCampo + 1;
           nPos = (100 * nCampo) + 1;
           aCaracter = aAlfa % nPos;
           |SI aCaracter = ",";  aCaracter = "";   nEspa = nEspa + 1;  |FINSI;
           ||SI aCaracter = ".";  aCaracter = " ";  |FINSI;
           |SI aCaracter = "¥";  aCaracter = &209; |FINSI;
           |SI aCaracter = "¤";  aCaracter = &209; |FINSI;
           |SI aCaracter = "§";  aCaracter = &176; |FINSI;
           |SI aCaracter = "¦";  aCaracter = &170; |FINSI;
           aAlfaCad = aAlfaCad + aCaracter;
     |SIGUE;
     aAlfa = aAlfaCad + (" " * nEspa);

     aAlfa = aAlfa > aAlfa;
   |FINSI;

   |SI aTipo = "N";
      |SI enAnyo ] 2004;  |ACABA;  |FINSI;

      enCanti = aAlfa; |HAZ ConverMoneda; aAlfa = enCanti;

      |SI enCanti < 0;
         nCalc = nCalc + 1;
         enCanti = 0 - enCanti; aAlfa = enCanti;
         aAlfa = (aAlfa1 + aAlfa) % nCalc; aAlfa = "N" + aAlfa;
      |SINO;
         aAlfa = (aAlfa1 + aAlfa) % nCalc;
      |FINSI;
   |FINSI;
|FPRC;

|PROCESO QuitaRar;
      nEspa   = 0;
      aAlfaCad = "";
      aLong   = aAlfa % 0;
      nLong   = aLong;
      |PARA nCampo = 1;  |SI nCampo [ aLong;  |HACIENDO nCampo = nCampo + 1;
           nPos = (100 * nCampo) + 1;
           aCaracter = aAlfa % nPos;
           |SI aCaracter = ",";  aCaracter = "";   nEspa = nEspa + 1;  |FINSI;
           ||SI aCaracter = ".";  aCaracter = " ";  |FINSI;
           |SI aCaracter = "¥";  aCaracter = &209; |FINSI;
           |SI aCaracter = "¤";  aCaracter = &209; |FINSI;
           |SI aCaracter = "§";  aCaracter = &176; |FINSI;
           |SI aCaracter = "¦";  aCaracter = &170; |FINSI;
           aAlfaCad = aAlfaCad + aCaracter;
     |SIGUE;
     aAlfa = aAlfaCad + (" " * nEspa);

     aAlfa = aAlfa > aAlfa;
|FPRC;
