|FICHEROS;
    eossa390 #0;
    eosm2390 #1;
    eospanta #2;
    eosm3390 #3;
    eosclien #4;
|FIN;

|VARIABLES;
 lin       = 0;
 error1    = "     No existe impresora";
 error2    = "     No existe informe";
 informe   = "eossa390";
 sw        = 0;
 igual     = "=";
 iguales   = "";
 opcion    = 0;
 sw_print  = 0;

 {-1}menu  = "";
     menu1 = "2425";
     menu2 = "1";
     menu3 = "Opciones : ";
     menu4 = "PI";
     menu5 = " Pantalla  ";
     menu6 = " Impresora ";
|FIN;

|INCLUYE i_consul;

|PROCESO pantalla;
|SI #0#2 ] 81;  |Y #0#2 < 95;
    |SI #1#201 = "          "; |O #1#202 = "S"; |ACABA; |FINSI;
    #2#0 = #1#0;
    #2#1 = #1#2;
    #2#3 = #1#1;
|SINO;
    |SI #3#3   = "          "; |O #3#4   = "S"; |ACABA; |FINSI;
    #2#0 = #3#0;
    #2#1 = #3#2;
    #2#3 = #3#1;
|FINSI;
sw_print = 1;

Pos = lin;
|PINDA #0#2;
lin = lin + 100;
Pos = -1;
|SI lin > 1300;
    lin = 100;
    |PAUSA;
    |PINPA #0#2;
    |PINDA #0#2;
|FINSI;
|FPRC;

|PROCESO impresora;
|SI #0#2 ] 81;  |Y #0#2 < 95;
    |SI #1#201 = "          "; |O #1#202 = "S"; |ACABA; |FINSI;
    #4#0 = #1#0;
|SINO;
    |SI #3#3   = "          "; |O #3#4   = "S"; |ACABA; |FINSI;
    #4#0 = #3#0;
|FINSI;
|LEE 040#4=;
|SI FSalida ! 0; |DDEFECTO #4; |FINSI;

sw_print = 1;
|PRINT;
|FPRC;

|PROCESO que_hago;
|SI opcion = 1; |HAZ pantalla;  |FINSI;
|SI opcion = 2; |HAZ impresora; |FINSI;
|FPRC;

|DEFBUCLE eosm2390;
#1#1;
;
#0#0, #0#2;
#0#1, #0#2;
e;
NULL, que_hago;
|FIN;

|DEFBUCLE eosm3390;
#3#1;
;
#0#0, #0#2;
#0#1, #0#2;
e;
NULL, que_hago;
|FIN;

|PROCESO impre;|TIPO 3;
sw = 0;
|MENU menu;
opcion = FSalida;
|SI opcion ! 1; |Y opcion ! 2; |ACABA; |FINSI;

|ABRET #4;
|SI opcion = 1;
   |PINPA #0#2;
   lin = 100;

   |SI #0#2 ] 81;  |Y #0#2 < 95;
       |BUCLE eosm2390;
   |SINO;
       |BUCLE eosm3390;
   |FINSI;

   |SI sw_print = 1; |PAUSA; |FINSI;
|SINO;
   |IMPRE 0;
   |SI FSalida ! 0; |ACABA; |FINSI;

   |INFOR informe;
   |SI FSalida ! 0; |FINIMP; |ACABA; |FINSI;

   |SI #0#2 ] 81;  |Y #0#2 < 95;
       |BUCLE eosm2390;
   |SINO;
       |BUCLE eosm3390;
   |FINSI;

   |SI sw_print = 1; |PIEINF; |FINSI;
   |FININF;
   |FINIMP;
|FINSI;
|CIERRAT #4;
|FPRC;
