|FICHEROS;
   eosem193;
   eosma193;
   eosclien;
   eosop193;
   eospc193;
   eosm1193;
   eosg1193;
   eosp1193;
   eose1193;

   reflejo@;
|FIN;

|INCLUYE i_consul;

|VARIABLES;
   aCuadre  = "";
   aTipo    = "";
   aTipoSec = "";
   PathBass = "";
   Cadena   = "";
   Handle   = "";
   aMensaje = "";
   aImpre   = "";
   aLong = "";

   aAlfa = "";
   Cont = 0;
   Sw = 0;
   Calc = 0;
   nCalc = 0;
   nCalc1 = 0;
   nLong  = 0;

   EmpreIni = 0;
   EmpreFin = 0;

   &EURO = 0;
   &EURODB = 0;
   &EURODV = 0;
   &FechaAlfa = "";
   DiaAlfa = "";
   MesAlfa = "";
   LugarAlfa = "";
   YearAlfa  = "";

   Mes = 0;

   Primero = 0;
   ClavAnt = "";
   ErrorSec = 0;

   Sistema = "";
   LongAlfa = "";
   Long = 0;

   Linea = 0;
   &TotalHojas = 0;
   &NumHoja = 0;
   Percep = 0;
   Gastos = 0;

   &LinPerc = 0;
   Opcion = 0;
   Path = "";
   Comodin1 = "";

   aAbre          = "";
   aIPRemoto      = "";
   aPathInter     = "";
   aFichero       = "";
   aBue           = "";
   aOrigen        = "";
   aDestino       = "";
   aModelos       = "";
   aAlfa1         = "";
   aAlfa2         = "";
   aAlfa3         = "";
   aAlfa4         = "";

   nHandle1       = 0;
   nHandle2       = 0;

   &enCanti       = 0;
   &enValidacion  = 0;
   &enBuenos      = 0;
   &eaAlfa        = "";
   &eaMoneda      = "";
   &enAnyo        = "";
   &eaInternet    = "";
   &eaFichError   = "";
   &eaFichDatos   = "";
   &eaFichAuxil   = "";
   &eaFOrigen     = "";
   &eaFDestino    = "";

     &eaTipoE        = "";
     &eaTipoR        = "";
     &eaTipoP        = "";
     &eaTipoC        = "";
     &eaTipoA        = "";
     &eaTipoV        = "";
     &eaModoImpre    = "";

{-1}Menu  = "";
    Menu1 = "2400";
    Menu2 = "1";
    Menu3 = "Tipo hojas interiores";
    Menu4 = "DM";
    Menu5 = "Dos perceptores";
    Menu6 = "Mas perceptores";

{-1}aMoneda   = "";
    aMoneda1  = "LEER";
    aMoneda2  = "";

     &eaModelos          = "";
     &eaEjer             = "";
     &eaPeriodo          = "";
     &eaPathEmision      = "";
     &eaPathLanza        = "";
     &eaPathExplorador   = "";
     &eaPathInternet     = "";
     &eaFicheroPlano     = "";
     &eaOpcion           = "";
     &eaUnidad           = "";
     &enErrorPortal      = 0;
     &eaFicheroImpre     = "";
     &eaFicheroSalid     = "";
     &eaFicheroError     = "";
     &enEmpresa          = 0;
     &eaNomEmpresa       = "";
     &enPresentar        = 0;
     &nCanti             = 0;
     &Comodin            = "";

    aMas = "";
    aBase = "";
|FIN;

|PROCESO MesLetra;
   |SI Mes = 1;  MesAlfa = "Enero     "; |FINSI;
   |SI Mes = 2;  MesAlfa = "Febrero   "; |FINSI;
   |SI Mes = 3;  MesAlfa = "Marzo     "; |FINSI;
   |SI Mes = 4;  MesAlfa = "Abril     "; |FINSI;
   |SI Mes = 5;  MesAlfa = "Mayo      "; |FINSI;
   |SI Mes = 6;  MesAlfa = "Junio     "; |FINSI;
   |SI Mes = 7;  MesAlfa = "Julio     "; |FINSI;
   |SI Mes = 8;  MesAlfa = "Agosto    "; |FINSI;
   |SI Mes = 9;  MesAlfa = "Septiembre"; |FINSI;
   |SI Mes = 10; MesAlfa = "Octubre   "; |FINSI;
   |SI Mes = 11; MesAlfa = "Noviembre "; |FINSI;
   |SI Mes = 12; MesAlfa = "Diciembre "; |FINSI;
|FPRC;

|PROCESO Tipo1_2010;
                    || GRABACION DEL REGISTRO DE TIPO "1"

      Cadena  = "1";
      Cadena  = Cadena + "193";
      Cadena  = Cadena + #eosem193#40;              || Ejercicio
      Comodin = #eosclien#1 % 0109;
      Cadena  =  Cadena + Comodin;                   || Nif Declarante
      eaAlfa  = #eosclien#2;  |HAZ QuitaRaros;
      aAlfa   = eaAlfa; |QBF aAlfa; aAlfa = (aAlfa + (" " * 40)) % 0140;
      Cadena  = Cadena + aAlfa;               || Nombre Declarante
      Cadena  = Cadena + "T";                       || Tipo de soporte
      Comodin = #eosm1193#23; |QBF Comodin;
      Comodin1 = #eosm1193#22; |QBF Comodin1;
      |SI Comodin1 = "";
         Comodin = #eosclien#14;
         Comodin1 = #eosclien#2;
      |FINSI;
      Comodin = Comodin % 109;
      |SI Comodin = "         ";  Comodin = "000000000";  |FINSI;
      Cadena  = Cadena + Comodin;                || Telefono Persona Contacto
      eaAlfa  = Comodin1;  |HAZ QuitaRaros;
      aAlfa   = eaAlfa; |QBF aAlfa; aAlfa = (aAlfa + (" " * 40)) % 0140;
      Cadena  = Cadena + aAlfa;                  || Persona de contacto
      Comodin = "1730000000000";
      Cadena = Cadena + Comodin;                     || Numero justificante


      |SI #eosm1193#2 = "C";                       || Tipo de declaracion
          Cadena = Cadena + "C";
          Cadena = Cadena + " ";
      |FINSI;
      |SI #eosm1193#2 = "S";
          Cadena = Cadena + " ";
          Cadena = Cadena + "S";
      |FINSI;
      |SI #eosm1193#2 = "C"; |O #eosm1193#2 = "S";
          Cadena = Cadena + "173";
          |PARA Cont = 10; |SI Cont [ 19; |HACIENDO Cont = Cont + 1;
                Cadena = Cadena + #eosm1193#Cont#;
          |SIGUE;
      |FINSI;


      |SI #eosm1193#2 = " ";
          Cadena = Cadena + " ";
          Cadena = Cadena + " ";
          Cadena = Cadena + "0000000000000";
      |FINSI;

      Comodin = ("000000000" + #eosm1193#3) % -109;
      Cadena = Cadena + Comodin;                 || Numero de Perceptores

      nCanti  = #eosm1193#4;  |HAZ Valor15;
      Cadena = Cadena + Comodin;                 || Base retenciones e Ing.a Cta.

      nCanti  = #eosm1193#5;  |HAZ Valor15;
      Cadena = Cadena + Comodin;                 || Retenciones e Ing.a Cta.

      nCanti  = #eosm1193#6;  |HAZ Valor15;
      Cadena = Cadena + Comodin;                 || Retenciones e Ing.a Cta. Ingresados

      nCanti  = #eosm1193#7;  |HAZ Valor15;
      Cadena = Cadena + Comodin;                 || Ingresos ejercicios anteriores

      nCanti  = #eosm1193#8;  |HAZ Valor15;
      Cadena = Cadena + Comodin;                 || Retenciones e Ing.a Cta. Ingresados

      nCanti  = #eosm1193#9;  |HAZ Valor15;
      Cadena = Cadena + Comodin;                 || Gastos

      Comodin = " " * 16;
      Cadena = Cadena + Comodin;                 || Blancos
      Cadena = Cadena + &13 + &10;

      |XGRABA nHandle2, Cadena;
|FPRC;

|PROCESO Tipo1_2011;
                    || GRABACION DEL REGISTRO DE TIPO "1"

      Cadena  = "1";
      Cadena  = Cadena + "193";
      Cadena  = Cadena + #eosem193#40;              || Ejercicio
      Comodin = #eosclien#1 % 0109;
      Cadena  =  Cadena + Comodin;                   || Nif Declarante
      eaAlfa  = #eosclien#2;  |HAZ QuitaRaros;
      aAlfa   = eaAlfa; |QBF aAlfa; aAlfa = (aAlfa + (" " * 40)) % 0140;
      Cadena  = Cadena + aAlfa;               || Nombre Declarante
      Cadena  = Cadena + "T";                       || Tipo de soporte
      Comodin = #eosm1193#23; |QBF Comodin;
      Comodin1 = #eosm1193#22; |QBF Comodin1;
      |SI Comodin1 = "";
         Comodin = #eosclien#14;
         Comodin1 = #eosclien#2;
      |FINSI;
      Comodin = Comodin % 109;
      |SI Comodin = "         ";  Comodin = "000000000";  |FINSI;
      Cadena  = Cadena + Comodin;                || Telefono Persona Contacto
      eaAlfa  = Comodin1;  |HAZ QuitaRaros;
      aAlfa   = eaAlfa; |QBF aAlfa; aAlfa = (aAlfa + (" " * 40)) % 0140;
      Cadena  = Cadena + aAlfa;                  || Persona de contacto
      Comodin = "1930000000000";
      Cadena = Cadena + Comodin;                     || Numero justificante

      |SI #eosm1193#2 = "C";                       || Tipo de declaracion
          Cadena = Cadena + "C";
          Cadena = Cadena + " ";
      |FINSI;
      |SI #eosm1193#2 = "S";
          Cadena = Cadena + " ";
          Cadena = Cadena + "S";
      |FINSI;
      |SI #eosm1193#2 = "C"; |O #eosm1193#2 = "S";
          Cadena = Cadena + "193";
          |PARA Cont = 10; |SI Cont [ 19; |HACIENDO Cont = Cont + 1;
                Cadena = Cadena + #eosm1193#Cont#;
          |SIGUE;
      |FINSI;

      |SI #eosm1193#2 = " ";
          Cadena = Cadena + " ";
          Cadena = Cadena + " ";
          Cadena = Cadena + "0000000000000";
      |FINSI;

      Comodin = ("000000000" + #eosm1193#3) % -109;
      Cadena = Cadena + Comodin;                 || Numero de Perceptores

      nCanti  = #eosm1193#4;  |HAZ Valor15;
      Cadena = Cadena + Comodin;                 || Base retenciones e Ing.a Cta.

      nCanti  = #eosm1193#5;  |HAZ Valor15;
      Cadena = Cadena + Comodin;                 || Retenciones e Ing.a Cta.

      nCanti  = #eosm1193#6;  |HAZ Valor15;
      Cadena = Cadena + Comodin;                 || Retenciones e Ing.a Cta. Ingresados

      Cadena = Cadena + (" " * 30);              || Vacio de 30

      nCanti  = #eosm1193#9;  |HAZ Valor15;
      Cadena = Cadena + Comodin;                 || Gastos

      |XGRABA nHandle2, Cadena;

      Cadena = " " * 66;
      |XGRABA nHandle2, Cadena;

      Cadena = (" " * 200);
      |XGRABA nHandle2, Cadena;

      |SI #eosem193#40 [ 2011;  |O eaOpcion = "3";
          Cadena = &13 + &10;
          |XGRABA nHandle2, Cadena;
      |FINSI;
|FPRC;

|PROCESO Tipo1;
     |SI #eosem193#40 [ 2010;  |HAZ Tipo1_2010;  |FINSI;
     |SI #eosem193#40 ] 2011;  |HAZ Tipo1_2011;  |FINSI;
|FPRC;

|PROCESO eosp1193_2010;
                    || GRABACION DEL REGISTRO DE TIPO "2" (PERCEPTORES)

     Cadena  = "2";
     Cadena  = Cadena + "193";
     Cadena  = Cadena + #eosem193#40;              || Ejercicio
     Comodin = #eosclien#1 % 0109;
     Cadena  = Cadena + Comodin;                   || Nif Declarante
     Comodin = #eosp1193#2 % 0109;
     Cadena  = Cadena + Comodin;                   || Nif Perceptor
     Comodin = #eosp1193#4 % 0109;
     Cadena  = Cadena + Comodin;                   || Nif del repte. legal
     eaAlfa  = #eosp1193#3;  |HAZ QuitaRaros;
     aAlfa   = eaAlfa; |QBF aAlfa; aAlfa = (aAlfa + (" " * 40)) % 0140;
     Cadena  = Cadena + aAlfa;                     || Nombre
     |SI #eosp1193#5 = "S";                       || Mediador
          Cadena = Cadena + "X";
     |SINO;
          Cadena = Cadena + " ";
     |FINSI;
     Comodin = #eosp1193#6;
     Comodin = "00" + Comodin;
     Comodin = Comodin % -102;
     Cadena  = Cadena + Comodin;                   || Codigo Provincia
     |SI #eosp1193#7 = 0;
         Cadena = Cadena + "0";                       || Clave Codigo
     |SINO;
         Cadena = Cadena + #eosp1193#7;               || Clave Codigo
     |FINSI;
     Comodin = #eosp1193#8 % 112;
     Cadena  = Cadena + Comodin;                   || Codigo Emisor
     Cadena  = Cadena + #eosp1193#9;               || Clave de percepcion
     Comodin = #eosp1193#10;
     Comodin = "00" + Comodin;
     Comodin = Comodin % -102;
     Cadena  = Cadena + Comodin;                   || Naturaleza
     Cadena  = Cadena + #eosp1193#11;              || Pago
     Cadena  = Cadena + #eosp1193#12;              || Tipo Codigo
     Cadena  = Cadena + #eosp1193#13;              || C.C.V.: Entidad
     Cadena  = Cadena + #eosp1193#14;              || C.C.V.: Sucursal
     Cadena  = Cadena + #eosp1193#15;              || C.C.V.: Digito Control
     Cadena  = Cadena + #eosp1193#16;              || C.C.V.: Numero Cuenta
     Cadena  = Cadena + #eosp1193#17;              || Pendiente
     Comodin = #eosp1193#18;
     Comodin = ("0000" + Comodin) % -104;
     Cadena  = Cadena + Comodin;                   || Ejercicio de devengo
     Cadena  = Cadena + #eosp1193#19;              || Tipo de percepcion

     nCanti  = #eosp1193#20;  |HAZ Valor13;
     Cadena  = Cadena + Comodin;                   || Importe Percepciones

     Calc    = (#eosp1193#21 - 0.5) ! 0;
     |SI Calc < 0; Calc = 0; |FINSI;
     Comodin = ("000" + Calc) % -103;
     Cadena  = Cadena + Comodin;                   || Porcentaje multiplicador

     nCanti  = #eosp1193#22;  |HAZ Valor13;
     Cadena  = Cadena + Comodin;                   || Importe Reducciones

     nCanti  = #eosp1193#23;  |HAZ Valor13;
     Cadena  = Cadena + Comodin;                   || Base Retenc.e Ing.a Cta.

     Calc    = (#eosp1193#24 - 0.5) ! 0;
     |SI Calc < 0; Calc = 0;  |FINSI;

     Comodin = Calc;
     Comodin = ("00" + Comodin) % -102;
     Cadena  = Cadena + Comodin;                   || % Retencion (Parte entera)
     Calc    = (#eosp1193#24 - Calc) * 100;
     Comodin = Calc;
     Comodin = ("00" + Comodin) % -102;
     Cadena  = Cadena + Comodin;                   || % Retencion (Parte decimal)

     nCanti  = #eosp1193#25;  |HAZ Valor13;
     Cadena  = Cadena + Comodin;                   || Retenc. e Ing.a Cta.

     nCanti  = #eosp1193#26;  |HAZ Valor13;
     Cadena  = Cadena + Comodin;                   || Ing.Ejerc.Ant. Periodificacion

     |SI #eosem193#40 [ 2003;
         Comodin = " " * 56;
         Cadena  = Cadena + Comodin;                   || Blancos
     |SINO;
         |SI #eosp1193#12 ! "P";
             Comodin = "              0000000000000000000000000000000000000000  ";
             Cadena  = Cadena + Comodin;                   || Blancos
         |SINO;
             aAlfa1 = (#eosp1193#27 % -104) + (#eosp1193#27 % 0402) + (#eosp1193#27 % 102);
             aAlfa2 = (#eosp1193#28 % -104) + (#eosp1193#28 % 0402) + (#eosp1193#28 % 102);

             nCanti = #eosp1193#29;  |HAZ Valor12;
             aAlfa3 = Comodin;

             nCanti = #eosp1193#30;  |HAZ Valor12;
             aAlfa4 = Comodin;

             Comodin = "              " + aAlfa1 + aAlfa2 + aAlfa3 + aAlfa4 + "  ";
             Cadena  = Cadena + Comodin;                   || Blancos
         |FINSI;
     |FINSI;

     Cadena  = Cadena + &13 + &10;

     |XGRABA nHandle2, Cadena;
|FPRC;

|PROCESO eosp1193_2011;
                    || GRABACION DEL REGISTRO DE TIPO "2" (PERCEPTORES)

     Cadena  = "2";
     Cadena  = Cadena + "193";
     Cadena  = Cadena + #eosem193#40;              || Ejercicio
     Comodin = #eosclien#1 % 0109;
     Cadena  = Cadena + Comodin;                   || Nif Declarante
     Comodin = #eosp1193#2 % 0109;
     Cadena  = Cadena + Comodin;                   || Nif Perceptor
     Comodin = #eosp1193#4 % 0109;
     Cadena  = Cadena + Comodin;                   || Nif del repte. legal
     eaAlfa  = #eosp1193#3;  |HAZ QuitaRaros;
     aAlfa   = eaAlfa; |QBF aAlfa; aAlfa = (aAlfa + (" " * 40)) % 0140;
     Cadena  = Cadena + aAlfa;                     || Nombre
     |SI #eosp1193#5 = "S";                       || Mediador
          Cadena = Cadena + "X";
     |SINO;
          Cadena = Cadena + " ";
     |FINSI;
     Comodin = #eosp1193#6;
     Comodin = "00" + Comodin;
     Comodin = Comodin % -102;
     Cadena  = Cadena + Comodin;                   || Codigo Provincia
     |SI #eosp1193#7 = 0;
         Cadena = Cadena + "0";                       || Clave Codigo
     |SINO;
         Cadena = Cadena + #eosp1193#7;               || Clave Codigo
     |FINSI;
     Comodin = #eosp1193#8 % 112;
     Cadena  = Cadena + Comodin;                   || Codigo Emisor
     Cadena  = Cadena + #eosp1193#9;               || Clave de percepcion
     Comodin = #eosp1193#10;
     Comodin = "00" + Comodin;
     Comodin = Comodin % -102;
     Cadena  = Cadena + Comodin;                   || Naturaleza
     Cadena  = Cadena + #eosp1193#11;              || Pago
     Cadena  = Cadena + #eosp1193#12;              || Tipo Codigo
     Cadena  = Cadena + #eosp1193#13;              || C.C.V.: Entidad
     Cadena  = Cadena + #eosp1193#14;              || C.C.V.: Sucursal
     Cadena  = Cadena + #eosp1193#15;              || C.C.V.: Digito Control
     Cadena  = Cadena + #eosp1193#16;              || C.C.V.: Numero Cuenta
     Cadena  = Cadena + #eosp1193#17;              || Pendiente
     Comodin = #eosp1193#18;
     Comodin = ("0000" + Comodin) % -104;
     Cadena  = Cadena + Comodin;                   || Ejercicio de devengo
     Cadena  = Cadena + #eosp1193#19;              || Tipo de percepcion

     nCanti  = #eosp1193#20;  |HAZ Valor13;
     Cadena  = Cadena + Comodin;                   || Importe Percepciones

     Cadena  = Cadena + "   ";                     || Vacio 3

     nCanti  = #eosp1193#22;  |HAZ Valor13;
     Cadena  = Cadena + Comodin;                   || Importe Reducciones

     nCanti  = #eosp1193#23;  |HAZ Valor13;
     Cadena  = Cadena + Comodin;                   || Base Retenc.e Ing.a Cta.

     |SI #eosem193#40 < 2015;
         Calc    = (#eosp1193#24 - 0.5) ! 0;
         |SI Calc < 0; Calc = 0;  |FINSI;
         Comodin = Calc;
         Comodin = ("00" + Comodin) % -102;
         Cadena  = Cadena + Comodin;                   || % Retencion (Parte entera)
         Calc    = (#eosp1193#24 - Calc) * 100;
         Comodin = Calc;
         Comodin = ("00" + Comodin) % -102;
         Cadena  = Cadena + Comodin;                   || % Retencion (Parte decimal)
     |SINO;
         |SI #eosp1193#9 = "C"; |Y #eosp1193#10 = 8;
             #eosp1193#24 = 24;
         |SINO;
             |SI #eosp1193#9 ! "B"; |O #eosp1193#10 ! 4;
                 |SI #eosp1193#24 ! 20;    |Y #eosp1193#24 ! 19.5;
                    |Y #eosp1193#24 ! 10;    |Y #eosp1193#24 ! 9.75;
                      |Y #eosp1193#24 > 0;
                    |SI #eosp1193#24 < 20;  #eosp1193#24 = 19.5;  |FINSI;
                    |SI #eosp1193#24 < 12;  #eosp1193#24 = 10;    |FINSI;
                    |SI #eosp1193#24 < 10;  #eosp1193#24 = 9.75;  |FINSI;
                    |SI #eosp1193#24 ] 20;  #eosp1193#24 = 20;    |FINSI;
                 |FINSI;
             |FINSI;
         |FINSI;

         Calc    = #eosp1193#24 * 100;
         Comodin = Calc;
         Comodin = ("0000" + Comodin) % -104;
         Cadena  = Cadena + Comodin;                   || % Retencion (Parte decimal)
     |FINSI;

     nCanti  = #eosp1193#25;  |HAZ Valor13;
     Cadena  = Cadena + Comodin;                   || Retenc. e Ing.a Cta.

     Cadena  = Cadena + (" " * 27);               || Vacio 31

     |SI #eosp1193#12 ! "P";
         Comodin = "0000000000000000000000000000000000000000";
         Cadena  = Cadena + Comodin;                             || Blancos
     |SINO;
        aAlfa1 = (#eosp1193#27 % -104) + (#eosp1193#27 % 0402) + (#eosp1193#27 % 102);
        aAlfa2 = (#eosp1193#28 % -104) + (#eosp1193#28 % 0402) + (#eosp1193#28 % 102);

        nCanti = #eosp1193#29;  |HAZ Valor12;
        aAlfa3 = Comodin;

        nCanti = #eosp1193#30;  |HAZ Valor12;
        aAlfa4 = Comodin;

        Comodin = aAlfa1 + aAlfa2 + aAlfa3 + aAlfa4;
        Cadena  = Cadena + Comodin;                   || Blancos
     |FINSI;

     |XGRABA nHandle2, Cadena;

     Cadena  = " " * 52;
     |XGRABA nHandle2, Cadena;

     Cadena  = (" " * 200);
     |XGRABA nHandle2, Cadena;

     |SI #eosem193#40 [ 2011;  |O eaOpcion = "3";
         Cadena = &13 + &10;
         |XGRABA nHandle2, Cadena;
     |FINSI;
|FPRC;

|PROCESO eosp1193;
     |SI #eosem193#40 [ 2010;  |HAZ eosp1193_2010;  |FINSI;
     |SI #eosem193#40 ] 2011;  |HAZ eosp1193_2011;  |FINSI;
|FPRC;

|PROCESO eosg1193_2010;
                    || GRABACION DEL REGISTRO DE TIPO "2" (GASTOS)

     Cadena  = "2";
     Cadena  = Cadena + "193";
     Cadena  = Cadena + #eosem193#40;              || Ejercicio
     Comodin = #eosclien#1 % 0109;
     Cadena  = Cadena + Comodin;                   || Nif Declarante
     Comodin = #eosg1193#2 % 0109;
     Cadena  = Cadena + Comodin;                   || Nif Contribuyente
     Comodin = #eosg1193#3 % 0109;
     Cadena  = Cadena + Comodin;                   || Nif Repr. legal

     eaAlfa  = #eosg1193#4;  |HAZ QuitaRaros;
     aAlfa   = eaAlfa; |QBF aAlfa; aAlfa = (aAlfa + (" " * 40)) % 0140;
     Cadena  = Cadena + aAlfa;                     || Nombre

     Comodin = " " * 119;
     Cadena  = Cadena + Comodin;

     nCanti  = #eosg1193#5;   |HAZ Valor13;
     Cadena  = Cadena + Comodin;                            || Importe de gastos
     Comodin = " " * 43;
     Cadena  = Cadena + Comodin;
     Cadena  = Cadena + &13 + &10;

     |XGRABA nHandle2, Cadena;
|FPRC;

|PROCESO eosg1193_2011;
                    || GRABACION DEL REGISTRO DE TIPO "2" (GASTOS)

     Cadena  = "2";
     Cadena  = Cadena + "193";
     Cadena  = Cadena + #eosem193#40;              || Ejercicio
     Comodin = #eosclien#1 % 0109;
     Cadena  = Cadena + Comodin;                   || Nif Declarante
     Comodin = #eosg1193#2 % 0109;
     Cadena  = Cadena + Comodin;                   || Nif Contribuyente
     Comodin = #eosg1193#3 % 0109;
     Cadena  = Cadena + Comodin;                   || Nif Repr. legal

     eaAlfa  = #eosg1193#4;  |HAZ QuitaRaros;
     aAlfa   = eaAlfa; |QBF aAlfa; aAlfa = (aAlfa + (" " * 40)) % 0140;
     Cadena  = Cadena + aAlfa;                     || Nombre

     Comodin = " " * 119;
     Cadena  = Cadena + Comodin;

     nCanti  = #eosg1193#5;   |HAZ Valor13;
     Cadena  = Cadena + Comodin;                            || Importe de gastos
     |XGRABA nHandle2, Cadena;

     Cadena  = " " * 93;
     |XGRABA nHandle2, Cadena;

     Cadena = (" " * 200);
     |XGRABA nHandle2, Cadena;

     |SI #eosem193#40 [ 2011;  |O eaOpcion = "3";
         Cadena = &13 + &10;
         |XGRABA nHandle2, Cadena;
     |FINSI;
|FPRC;

|PROCESO eosg1193;
     |SI #eosem193#40 [ 2010;  |HAZ eosg1193_2010;  |FINSI;
     |SI #eosem193#40 ] 2011;  |HAZ eosg1193_2011;  |FINSI;
|FPRC;

|PROCESO GrabaColec;
                    || GRABACION DEL REGISTRO DE TIPO "0"

   Cadena = "0";
   Cadena = Cadena + "193";
   Cadena = Cadena + #eosem193#40;              || Ejercicio
   Cadena = Cadena + #eose1193#0;               || Nif Presentador
   Cadena = Cadena + #eose1193#1;               || Nombre Presentador
   Cadena = Cadena + #eose1193#2;               || SG
   Cadena = Cadena + #eose1193#3;               || Via Publica
   Cadena = Cadena + #eose1193#4;               || Numero
   Cadena = Cadena + #eose1193#5;               || Escalera
   Cadena = Cadena + #eose1193#6;               || Piso
   Cadena = Cadena + #eose1193#7;               || Puerta
   Cadena = Cadena + #eose1193#8;               || Codigo Postal
   Cadena = Cadena + #eose1193#9;               || Municipio
   Cadena = Cadena + #eose1193#10;              || Codigo Provincia
   Comodin = "00000" + #eose1193#11;
   Comodin = Comodin % -105;                    || Total Declarantes
   Cadena = Cadena + Comodin;
   Comodin = "000000000" + #eose1193#12;        || Total Perceptores
   Comodin = Comodin % -109;
   Cadena = Cadena + Comodin;
   Cadena = Cadena + "D";                       || Tipo de soporte
   Cadena = Cadena + #eose1193#13;              || Telefono Persona Contacto
   Cadena = Cadena + #eose1193#14;              || Apellidos y nombre Persona Contacto

   Comodin = " " * 77;                          || Blancos
   Cadena = Cadena + Comodin;
   Cadena = Cadena + &13 + &10;
   Cadena = Handle + " " + Cadena;
   |FGRABA Cadena;
|FPRC;

|PROCESO GrabaDecla;
                    || GRABACION DEL REGISTRO DE TIPO "1"

   Cadena = "1";
   Cadena = Cadena + "193";
   Cadena = Cadena + #eosem193#40;              || Ejercicio
   Comodin = #eosclien#1 % 0109;
   Cadena = Cadena + Comodin;                   || Nif Declarante
   aAlfa  = #eosclien#2; |QBF aAlfa; aAlfa = (aAlfa + (" " * 40)) % 0140;
   Cadena = Cadena + aAlfa;               || Nombre Declarante
   Cadena = Cadena + "D";                       || Tipo de soporte
   |SI #eosem193#44 = "I";
      Comodin = #eosm1193#22; |QBF Comodin;
      |SI Comodin = "";
         Comodin = #eosclien#14 % 109;
         Cadena = Cadena + Comodin;                || Telefono Persona Contacto
         Cadena = Cadena + #eosclien#2;            || Nombre Persona Contacto || PEPE
      |SINO;
         Cadena = Cadena + #eosm1193#23;
         Cadena = Cadena + #eosm1193#22;
      |FINSI;
   |SINO;
      Cadena = Cadena + #eose1193#13;           || Telefono Persona Contacto
      Cadena = Cadena + #eose1193#14;           || Nombre Persona Contacto
   |FINSI;
   |SI #eosem193#40 < 2001;
      Comodin = "1930000000000";
   |SINO;
      Comodin = "1730000000000";
   |FINSI;
   Cadena = Cadena + Comodin;                   || Numero justificante
   |SI #eosm1193#2 = "C";                       || Tipo de declaracion
      Cadena = Cadena + "C";
      Cadena = Cadena + " ";
      Cadena = Cadena + "0000000000000";
   |FINSI;
   |SI #eosm1193#2 = "S";
      Cadena = Cadena + " ";
      Cadena = Cadena + "S";
      Cadena = Cadena + "193";
      |PARA Cont = 10; |SI Cont [ 19; |HACIENDO Cont = Cont + 1;
         Cadena = Cadena + #eosm1193#Cont#;
      |SIGUE;
   |FINSI;
   |SI #eosm1193#2 = " ";
      Cadena = Cadena + " ";
      Cadena = Cadena + " ";
      Cadena = Cadena + "0000000000000";
   |FINSI;
   Comodin = ("000000000" + #eosm1193#3) % -109;
   Cadena = Cadena + Comodin;                 || Numero de Perceptores

   nCanti  = #eosm1193#4;  |HAZ Valor15;
   Cadena = Cadena + Comodin;                 || Base retenciones e Ing.a Cta.

   nCanti  = #eosm1193#5;  |HAZ Valor15;
   Cadena = Cadena + Comodin;                 || Retenciones e Ing.a Cta.

   nCanti  = #eosm1193#6;  |HAZ Valor15;
   Cadena = Cadena + Comodin;                 || Retenciones e Ing.a Cta. Ingresados

   nCanti  = #eosm1193#7;  |HAZ Valor15;
   Cadena = Cadena + Comodin;                 || Ingresos ejercicios anteriores

   nCanti  = #eosm1193#8;  |HAZ Valor15;
   Cadena = Cadena + Comodin;                 || Retenciones e Ing.a Cta. Ingresados

   nCanti  = #eosm1193#9;  |HAZ Valor15;
   Cadena = Cadena + Comodin;                 || Gastos

   Comodin = " " * 16;
   Cadena = Cadena + Comodin;                 || Blancos
   Cadena = Cadena + &13 + &10;
   Cadena = Handle + " " + Cadena;
   |FGRABA Cadena;
|FPRC;

|PROCESO GrabaPercep;
                    || GRABACION DEL REGISTRO DE TIPO "2" (PERCEPTORES)

   Cadena = "2";
   Cadena = Cadena + "193";
   Cadena = Cadena + #eosem193#40;              || Ejercicio
   Comodin = #eosclien#1 % 0109;
   Cadena = Cadena + Comodin;                   || Nif Declarante
   Comodin = #eosp1193#2 % 0109;
   Cadena = Cadena + Comodin;                   || Nif Perceptor
   Comodin = #eosp1193#4 % 0109;
   Cadena = Cadena + Comodin;                   || Nif del repte. legal
   |SI #eosem193#40 < 2001; Cadena = Cadena + "          "; |FINSI;
   aAlfa  = #eosp1193#3; |QBF aAlfa; aAlfa = (aAlfa + (" " * 40)) % 0140;
   Cadena = Cadena + aAlfa;                     || Nombre
   |SI #eosp1193#5 = "S";                       || Mediador
      Cadena = Cadena + "X";
   |SINO;
      Cadena = Cadena + " ";
   |FINSI;
   Comodin = #eosp1193#6;
   Comodin = "00" + Comodin;
   Comodin = Comodin % -102;
   Cadena = Cadena + Comodin;                   || Codigo Provincia
   |SI #eosp1193#7 = 0;
       Cadena = Cadena + "0";                       || Clave Codigo
   |SINO;
       Cadena = Cadena + #eosp1193#7;               || Clave Codigo
   |FINSI;
   Comodin = #eosp1193#8 % 112;
   Cadena = Cadena + Comodin;                   || Codigo Emisor
   Cadena = Cadena + #eosp1193#9;               || Clave de percepcion
   Comodin = #eosp1193#10;
   Comodin = "00" + Comodin;
   Comodin = Comodin % -102;
   Cadena = Cadena + Comodin;                   || Naturaleza
   Cadena = Cadena + #eosp1193#11;              || Pago
   Cadena = Cadena + #eosp1193#12;              || Tipo Codigo
   Cadena = Cadena + #eosp1193#13;              || C.C.V.: Entidad
   Cadena = Cadena + #eosp1193#14;              || C.C.V.: Sucursal
   Cadena = Cadena + #eosp1193#15;              || C.C.V.: Digito Control
   Cadena = Cadena + #eosp1193#16;              || C.C.V.: Numero Cuenta
   Cadena = Cadena + #eosp1193#17;              || Pendiente
   Comodin = #eosp1193#18;
   Comodin = ("0000" + Comodin) % -104;
   Cadena = Cadena + Comodin;                   || Ejercicio de devengo
   Cadena = Cadena + #eosp1193#19;              || Tipo de percepcion

   nCanti  = #eosp1193#20;  |HAZ Valor13;
   Cadena = Cadena + Comodin;                   || Importe Percepciones

   Calc = (#eosp1193#21 - 0.5) ! 0;
   |SI Calc < 0; Calc = 0; |FINSI;
   Comodin = ("000" + Calc) % -103;
   Cadena = Cadena + Comodin;                   || Porcentaje multiplicador

   nCanti  = #eosp1193#22;  |HAZ Valor13;
   Cadena = Cadena + Comodin;                   || Importe Reducciones

   nCanti  = #eosp1193#23;  |HAZ Valor13;
   Cadena = Cadena + Comodin;                   || Base Retenc.e Ing.a Cta.
   Cadena = Handle + " " + Cadena; |FGRABA Cadena; Cadena = "";

   Calc = (#eosp1193#24 - 0.5) ! 0;
   |SI Calc < 0; Calc = 0;  |FINSI;
   Comodin = Calc;
   Comodin = ("00" + Comodin) % -102;
   Cadena = Cadena + Comodin;                   || % Retencion (Parte entera)
   Calc = (#eosp1193#24 - Calc) * 100;
   Comodin = Calc;
   Comodin = ("00" + Comodin) % -102;
   Cadena = Cadena + Comodin;                   || % Retencion (Parte decimal)

   nCanti  = #eosp1193#25;  |HAZ Valor13;
   Cadena = Cadena + Comodin;                   || Retenc. e Ing.a Cta.

   nCanti  = #eosp1193#26;  |HAZ Valor13;
   Cadena = Cadena + Comodin;                   || Ing.Ejerc.Ant. Periodificacion

   Comodin = " " * 56;
   Cadena = Cadena + Comodin;                   || Blancos
   Cadena = Cadena + &13 + &10;
   Cadena = Handle + " " + Cadena;
   |FGRABA Cadena;

|FPRC;

|PROCESO GrabaGastos;
                    || GRABACION DEL REGISTRO DE TIPO "2" (GASTOS)

   Cadena = "2";
   Cadena = Cadena + "193";
   Cadena = Cadena + #eosem193#40;              || Ejercicio
   Comodin = #eosclien#1 % 0109;
   Cadena = Cadena + Comodin;                   || Nif Declarante
   Comodin = #eosg1193#2 % 0109;
   Cadena = Cadena + Comodin;                   || Nif Contribuyente
   Comodin = #eosg1193#3 % 0109;
   Cadena = Cadena + Comodin;                   || Nif Repr. legal
   |SI #eosem193#40 < 2001; Cadena = Cadena + "          "; |FINSI;
   Comodin = #eosg1193#4;
   Cadena = Cadena + Comodin;                   || Apellidos y nombre contrib.
   |SI #eosem193#40 < 2001;
      Comodin = " " * 189; Cadena = Cadena + Comodin;
   |SINO;
      Comodin = " " * 100;
      Cadena = Cadena + Comodin;
      Cadena = Handle + " " + Cadena; |FGRABA Cadena;

      Cadena = " " * 29;
   |FINSI;
   nCanti  = #eosg1193#5;   |HAZ Valor13;
   Cadena = Cadena + Comodin;                            || Importe de gastos
   Comodin = " " * 43;
   Cadena = Cadena + Comodin;
   Cadena = Cadena + &13 + &10;
   Cadena = Handle + " " + Cadena;
   |FGRABA Cadena;
|FPRC;

|PROCESO Percep;
   Percep = Percep + 1;
|FPRC;

|DEFBUCLE Percep;
#eosp1193#1;
;
#eosm1193#0,#eosm1193#1,"            "," ",0000;
#eosm1193#0,#eosm1193#1,"zzzzzzzzzzzz","z",9999;
;
NULL,Percep;
|FIN;

|PROCESO Gastos;
   Gastos = Gastos + 1;
|FPRC;

|DEFBUCLE Gastos;
#eosg1193#1;
;
#eosm1193#0,#eosm1193#1,"            ";
#eosm1193#0,#eosm1193#1,"zzzzzzzzzzzz";
;
NULL,Gastos;
|FIN;

|PROCESO CalculaHojas;
   Percep = 0;
   Gastos = 0;
   |BUCLE Percep;
   |BUCLE Gastos;
   |SI Percep ! 0; Percep = (((Percep / 5) + 0.5) ! 0);  |FINSI;
   |SI Gastos ! 0; Gastos = (((Gastos / 10) + 0.5) ! 0); |FINSI;
   TotalHojas = Percep + Gastos;
|FPRC;


|DEFBUCLE eosp1193;
     #eosp1193#1;
     ;
     #eosm1193#0, #eosm1193#1, "            ", " ", 0000;
     #eosm1193#0, #eosm1193#1, "zzzzzzzzzzzz", "z", 9999;
     ;
     NULL, eosp1193;
|FIN;


|DEFBUCLE eosg1193;
     #eosg1193#1;
     ;
     #eosm1193#0, #eosm1193#1, "            ";
     #eosm1193#0, #eosm1193#1, "zzzzzzzzzzzz";
     ;
     NULL, eosg1193;
|FIN;

|PROCESO eosm1193;
     aAbre = "\MODELOS\193\" + #eosem193#40 + "\RCA" + (("00000" + #eosm1193#0) % -105) + ".TXT";
     |XABRE "CBW", aAbre, nHandle2;

     #eosclien#0 = #eosm1193#0;
     |LEE 010#eosclien.=;

     DiaAlfa  = #eosem193#41 % 0102;
     MesAlfa  = #eosem193#41 % 0402;
     YearAlfa = #eosem193#41 % 0704;
     Mes      = MesAlfa;
     |HAZ MesLetra;

     FechaAlfa = #eosem193#42;
     |QBF FechaAlfa;
     FechaAlfa = FechaAlfa + ", a " + DiaAlfa + " de " + MesAlfa + " de " + YearAlfa;

     |HAZ Tipo1;
     |HAZ CalculaHojas;

     |SI Percep ! 0; |BUCLE eosp1193; |FINSI;
     |SI Gastos ! 0; |BUCLE eosg1193; |FINSI;

     |XCIERRA nHandle2;

     |SI #eosem193#40 [ 2005;
         aAlfa = "wait VI193 /E:RCA" + (("00000" + #eosm1193#0) % -105) + ".TXT ";
         aAlfa = aAlfa + "/R:RCC" + (("00000" + #eosm1193#0) % -105) + ".TXT ";
         aAlfa = aAlfa + &13 + &10;
         |XGRABA nHandle1, aAlfa;
     |SINO;
         eaTipoE =  "RCA" + (("00000" + #eosm1193#0) % -105) + ".TXT";
         eaTipoR =  "RCC" + (("00000" + #eosm1193#0) % -105) + ".TXT";
         eaTipoV =  "S";

         |HAZ LineaShellJava;
     |FINSI;

     #eosm1193#21 = #eosem193#41;
     |GRABA 020#eosm1193.a;
|FPRC;

|DEFBUCLE eosm1193;
     #eosm1193#1;
     ;
     EmpreIni, #eosem193#40, aTipo, 00;
     EmpreFin, #eosem193#40, aTipo, 99;
     be;
     NULL, eosm1193;
|FIN;

|PROCESO AbreImprime193;
     aAbre = "\MODELOS\193\" + #eosem193#40 + "\imprime.bat";
     |XABRE "CBW", aAbre, nHandle1;

     aAlfa = "CD \" + &13 + &10;                 |XGRABA nHandle1, aAlfa;
     aAlfa = "CD MODELOS" + &13 + &10;           |XGRABA nHandle1, aAlfa;
     aAlfa = "CD 193" + &13 + &10;               |XGRABA nHandle1, aAlfa;
     aAlfa = "CD " + #eosem193#40 + &13 + &10;          |XGRABA nHandle1, aAlfa;

     |SI #eosem193#40 = 2004;
         aAlfa = "ZPR04193.EXE -Y" + &13 + &10;  |XGRABA nHandle1, aAlfa;
     |FINSI;
|FPRC;

|PROCESO CreaVarios;
     aAlfa      = "/AEAT";                       |RMKDIR aAlfa;
     aAlfa      = "/AEAT/INTERNET";              |RMKDIR aAlfa;
     aAlfa      = "/AEAT/INTERNET/193";          |RMKDIR aAlfa;
     aAlfa      = "/AEAT/INTERNET/193/" + #eosem193#40; |RMKDIR aAlfa;
     eaInternet = aAlfa + "/";

     aIPRemoto   = "";
     |IP_REMOTO aIPRemoto;

     aPathInter  = "/MODELOS/193/" + #eosem193#40 + "/AInternet";
     aPathInter  = aPathInter + "/";
     aFichero    = aPathInter + "*.bue";
     |R_PDIR aFichero;
     |PARA; |SI; |HACIENDO;
            |SI FSalida ! 0; |SAL; |FINSI;

            aBue     = aFichero - aPathInter;
            aDestino = eaInternet + "193" + (aBue % 405) + ".txt";

            |RCOPIA_FICHERO aFichero, aDestino;

            |RFBORRA aFichero;

            |R_SDIR aFichero;
     |SIGUE;

     aAlfa = "     Los ficheros generados estan en: \AEAT\INTERNET\193\" + #eosem193#40 + " de su PC";
     |MENAV aAlfa;
|FPRC;

|PROCESO Internet2004;
     eaFichError  = "rcc";
     eaFichDatos  = "rca";
     eaFichAuxil  = "";
     enValidacion = 1;

     |HAZ BuscaErroresL;

     |SI enBuenos = 0;
         |MENAV "      Ha habido Errores, arreglelos y vuelva a emitir.";
         |ACABA;
     |FINSI;

     |HAZ CreaVarios;
|FPRC;

|PROCESO EmiteEsto193;
     aAlfa = "DEL *.DLL" + &13 + &10;
     |XGRABA nHandle1, aAlfa;

     aAlfa = "DEL *.TAB" + &13 + &10;
     |XGRABA nHandle1, aAlfa;

     aAlfa = "DEL *.WMF" + &13 + &10;
     |XGRABA nHandle1, aAlfa;

     aAlfa = "DEL ERROR193.TXT"     + &13 + &10;
     |XGRABA nHandle1, aAlfa;

     aAlfa = "DEL *.EXE"         + &13 + &10;
     |XGRABA nHandle1, aAlfa;

     |XCIERRA nHandle1;

     |DBASE aModelos;  |QBT aModelos;
     aModelos = aModelos + "hacienda/";

     |SI #eosem193#40 = 2004;
         eaFOrigen  = aModelos + "zpr04193.exe";
         eaFDestino = "/MODELOS/193/" + #eosem193#40 + "/" + "zpr04193.exe";
         |HAZ CopiaFicheroIP;
     |FINSI;

     aAlfa = "\MODELOS\193\" + #eosem193#40 + "\IMPRIME";

     |RSYSTEM aAlfa;

     |HAZ Internet2004;
|FPRC;

|PROCESO ElActual;
     eaEjer    = #eosem193#40;
     eaModelos = "193";
     enAnyo    = #eosem193#40;

     |SI #eosem193#40[ 2005;
         |HAZ AbreImprime193;
     |FINSI;

     |ABRE #eosma193;
     |ABRE #eosclien;
     |SI #eosem193#0 = "S";
         EmpreIni = #eosem193#1;
         EmpreFin = #eosem193#2;
         |BUCLE eosm1193;
     |SINO;
         |PARA Cont = 3; |SI Cont [ 38; |HACIENDO Cont = Cont + 1;
               EmpreIni = #eosem193#Cont#;
               EmpreFin = #eosem193#Cont#;
               |BUCLE eosm1193;
         |SIGUE;
     |FINSI;
     |CIERRA #eosma193;
     |CIERRA #eosclien;

     |SI #eosem193#40 [ 2005;
         |HAZ EmiteEsto193;
     |SINO;
         |SI eaTipoV ! "S";
             eaFichError  = "rcc";
             eaFichDatos  = "rca";
             eaFichAuxil  = "rcb";
             enValidacion = 0;

             |HAZ BuscaErroresL;
         |SINO;
             |HAZ Internet2004;
         |FINSI;
     |FINSI;
|FPRC;

|PROCESO AbreSec;
     aTipoSec = "193";
     PathBass = "";
     |DBASE PathBass;
     Path   = "wb  " + PathBass + "hacienda/" + aTipoSec + "/D";
     PathBass = PathBass + "hacienda/";
     |MKDIR PathBass;
     PathBass = PathBass + aTipoSec + "/";
     |MKDIR PathBass;

     Comodin = "00000" + #eosm1193#0;
     |QBF Comodin;
     Comodin = Comodin % -105;
     Path = Path + Comodin;
     Comodin = "00" + (#eosm1193#1 % -102);
     |QBF Comodin;
     Comodin = Comodin % -102;
     Comodin = Comodin + ".sec";
     Path = Path + Comodin;

     Pos = -1;
     |FABRE Path;
     Handle = FSalida;
     ErrorSec = 0;
     |SI Handle < 0;
        |MENAV "    Error al abrir el fichero secuencial";
        |ERROR;
        ErrorSec = 1;
        |ACABA;
     |FINSI;
|FPRC;

|DEFBUCLE GrabaPercep;
#eosp1193#1;
;
#eosm1193#0,#eosm1193#1,"            "," ",0000;
#eosm1193#0,#eosm1193#1,"zzzzzzzzzzzz","z",9999;
;
NULL,GrabaPercep;
|FIN;


|DEFBUCLE GrabaGastos;
#eosg1193#1;
;
#eosm1193#0,#eosm1193#1,"            ";
#eosm1193#0,#eosm1193#1,"zzzzzzzzzzzz";
;
NULL,GrabaGastos;
|FIN;

|PROCESO CierraSec;
   FSalida = Handle;
   |FCIERRA FSalida;
   aAlfa = ""; |IP_REMOTO aAlfa; |QBF aAlfa;
   |SI aAlfa = "";
      |QUE_SISTEMA Sistema; |QBF Sistema;
      Comodin = Path; |QBF Comodin; Comodin = Comodin - "wb  ";
      |SI Sistema = "ESDOS"; Comodin = "COPY " + Comodin + " a:"; |FINSI;
      |SI Sistema = "ESBSD";
         |DBASS Comodin1;
         Comodin = Comodin1 + "bin/agcopiaa " + Comodin + " a:";
      |FINSI ;
      |SYSTEM Comodin;
   |SINO;
      |SI #eosem193#43 = "F";
          aAlfa = "/MODELOS";              |RMKDIR aAlfa;
          aAlfa = "/MODELOS/INTERNET";     |RMKDIR aAlfa;
          aAlfa = "/MODELOS/INTERNET/193"; |RMKDIR aAlfa;
          |DBASE Comodin; |QBF Comodin; Comodin = Comodin + "hacienda/193/";
          Comodin1 = Path; Comodin1 = Comodin1 - "wb  "; Comodin1 = Comodin1 - Comodin;
          Comodin = Path; |QBF Comodin; Comodin = Comodin - "wb  ";
          Comodin1 = "/MODELOS/INTERNET/193/" + Comodin1;
          |ENVIA_FICHERO Comodin, Comodin1;
          |MENAV "    Fichero ubicado en el directorio \Modelos\Internet\193";
      |SINO;
         aAlfa = "/MODELOS";     |RMKDIR aAlfa;
         aAlfa = "/MODELOS/193"; |RMKDIR aAlfa;
         |DBASE Comodin; |QBF Comodin; Comodin = Comodin + "hacienda/193/";
         Comodin1 = Path; Comodin1 = Comodin1 - "wb  "; Comodin1 = Comodin1 - Comodin;
         Comodin = Path; |QBF Comodin; Comodin = Comodin - "wb  ";
         Comodin1 = "/MODELOS/193/" + Comodin1;
         |ENVIA_FICHERO Comodin, Comodin1;
         Comodin = "COPY " + Comodin1 + " a:";
         |RSYSTEM Comodin;
      |FINSI;
   |FINSI;
|FPRC;

|PROCESO MiraSelec;
   |SI #eosem193#0 = "S";
      |C_M #eosem193#1,1,"S";
      |C_M #eosem193#2,1,"S";
      |PARA Cont = 3; |SI Cont [ 38; |HACIENDO Cont = Cont + 1;
         |C_M #eosem193#Cont#,1,"N";
      |SIGUE;
   |SINO;
      |C_M #eosem193#1,1,"N";
      |C_M #eosem193#2,1,"N";
      |PARA Cont = 3; |SI Cont [ 38; |HACIENDO Cont = Cont + 1;
         |C_M #eosem193#Cont#,1,"S";
      |SIGUE;
   |FINSI;
|FPRC;


|PROCESO LinPercep;
   |PRINT;
|FPRC;

|DEFBUCLE LinPercep;
#eosp1193#1;
;
#eosm1193#0,#eosm1193#1,"            "," ",0000;
#eosm1193#0,#eosm1193#1,"zzzzzzzzzzzz","z",9999;
;
NULL,LinPercep;
|FIN;

|PROCESO LinGastos;
   |PRINT;
|FPRC;

|DEFBUCLE LinGastos;
#eosg1193#1;
;
#eosm1193#0,#eosm1193#1,"            ";
#eosm1193#0,#eosm1193#1,"zzzzzzzzzzzz";
;
NULL,LinGastos;
|FIN;

|PROCESO impre99;
   #eosclien#0 = #eosm1193#0;
   |LEE 010#eosclien.=;

   DiaAlfa = #eosem193#41 % 0102;
   MesAlfa = #eosem193#41 % 0402;
   YearAlfa = #eosem193#41 % 0704;
   Mes = MesAlfa;
   |HAZ MesLetra;

   FechaAlfa = #eosem193#42;
   |QBF FechaAlfa;
   FechaAlfa = FechaAlfa + ", a " + DiaAlfa + " de " + MesAlfa + " de " + YearAlfa;

   |SI #eosem193#43 = "O";
      |SI #eosem193#40 < 2001;
         |SI #eosem193#48 = "S";
            |INFOR "eose1937";
         |SINO;
            |INFOR "eose1934";
         |FINSI;
      |SINO;
         aMensaje = "Prepare el modelo para la impresion de la caratula del declarante"; |HAZ Cuadra;
         |INFOR "eosp1932";
      |FINSI;

      |SI FSalida < 0; |ACABA; |FINSI;

      |PRINT; |PIEINF; |FININF;

      |HAZ CalculaHojas;

      NumHoja = 1;

      |SI #eosem193#40 < 2001;
         |SI #eosem193#48 = "S";
            |INFOR "eose1938";
         |SINO;
            |INFOR "eose1936";
         |FINSI;
      |SINO;
         aMensaje = "Prepare el modelo para la impresion de la relacion de perceptores"; |HAZ Cuadra;
         |INFOR "eosp1933";
      |FINSI;
      |SI FSalida < 0; |ACABA; |FINSI;

      |BUCLE LinPercep;
      |PIEINF; |FININF;

      |SI #eosem193#40 < 2001;
         |SI #eosem193#48 = "N"; |INFOR "eose1935"; |FINSI;
      |SINO;
         aMensaje = "Prepare el modelo para la impresion de la relacion de gastos"; |HAZ Cuadra;
         |INFOR "eosp1934";
      |FINSI;

      |SI FSalida < 0; |ACABA; |FINSI;
      |BUCLE LinGastos;

      |PIEINF; |FININF;
   |FINSI;

   |SI #eosem193#43 = "D";
      |SI #eosem193#40 < 2001;
         aMensaje = "Prepare el modelo para la impresion de la caratula del declarante"; |HAZ Cuadra;
         |INFOR "eosp1932"; |PRINT; |PIEINF; |FININF;
      |SINO;
         || PEPE
      |FINSI;

      |HAZ AbreSec;
      |SI ErrorSec = 0;
         |HAZ GrabaDecla;
         |HAZ CalculaHojas;
         |SI Percep ! 0; |BUCLE GrabaPercep; |FINSI;
         |SI Gastos ! 0; |BUCLE GrabaGastos; |FINSI;
         |HAZ CierraSec;
      |FINSI;
   |FINSI;

   |SI #eosem193#43 = "F";
      |HAZ AbreSec;
      |SI ErrorSec = 0;
         |HAZ GrabaDecla;
         |HAZ CalculaHojas;
         |SI Percep ! 0; |BUCLE GrabaPercep; |FINSI;
         |SI Gastos ! 0; |BUCLE GrabaGastos; |FINSI;
         |HAZ CierraSec;
      |FINSI;
   |FINSI;
|FPRC;

|DEFBUCLE impre99;
#eosm1193#1;
;
EmpreIni,#eosem193#40,aTipo,00;
EmpreFin,#eosem193#40,aTipo,99;
;
NULL,impre99;
|FIN;

|PROCESO Perceptores;
   |PRINT;

   |SI LinPerc = 0; LinPerc = 1; |SINO; LinPerc = 0; |FINSI;

   |SI Opcion = 2;
      Linea = Linea + 1;
      |SI Linea > 10; |PIEINF; Linea = 0; |FINSI;
   |FINSI;

|FPRC;

|DEFBUCLE Perceptores;
#eospc193#1;
;
#eosop193#0,#eosop193#1,#eosop193#2,#eosop193#3,#eosop193#4,"            ";
#eosop193#0,#eosop193#1,#eosop193#2,#eosop193#3,#eosop193#4,"zzzzzzzzzzzz";
;
NULL,Perceptores;
|FIN;

|PROCESO interiores;
   LinPerc = 0;
   |SI Primero = 0;
      Primero = 1;
      ClavAnt = #eosop193#2;
      Comodin = "    Se imprimiran las hojas interiores de clave " + ClavAnt;
      |MENAV Comodin;
   |FINSI;
   |SI ClavAnt ! #eosop193#2;
      |SI Opcion = 1;
         |PIEINF;
      |FINSI;
      ClavAnt = #eosop193#2;
      Comodin = "    Se imprimiran las hojas interiores de clave " + ClavAnt;
      |MENAV Comodin;
   |FINSI;

   |BUCLE Perceptores;

   |SI Opcion = 2; |PIEINF; |FINSI;
   |SI Opcion = 1;
      Linea = Linea + 1;
      |SI Linea ] 5;
         |PIEINF;
         Linea = 0;
      |FINSI;
   |FINSI;
|FPRC;

|DEFBUCLE interiores;
#eosop193#1;
;
#eosma193#0,#eosma193#2,"A",1,1;
#eosma193#0,#eosma193#2,"C",5,2;
;
NULL,interiores;
|FIN;

|PROCESO Impresion;
     #eosclien#0 = #eosma193#0;
     |LEE 010#eosclien.=;

     DiaAlfa = #eosem193#41 % 0102;
     MesAlfa = #eosem193#41 % 0402;
     YearAlfa = #eosem193#41 % 0704;
     Mes = MesAlfa;
     |HAZ MesLetra;

     FechaAlfa = #eosem193#42;
     |QBF FechaAlfa;
     FechaAlfa = FechaAlfa + ", a " + DiaAlfa + " de " + MesAlfa + " de " + YearAlfa;

     |INFOR "eose1931";
     |SI FSalida < 0; |ACABA; |FINSI;

     |PRINT;
     |PIEINF;
     |FININF;

     |INFOR "eose1931";
     |SI FSalida < 0; |ACABA; |FINSI;

     |PRINT;
     |PIEINF;
     |FININF;

     |SI Opcion = 1;
        |INFOR "eose1933";
     |SINO;
        |INFOR "eose1932";
     |FINSI;
     |SI FSalida < 0; |ACABA; |FINSI;

     |BUCLE interiores;
     |PIEINF;
     |FININF;
|FPRC;

|DEFBUCLE Impresion;
    #eosma193#1;
    ;
    EmpreIni,#eosem193#40;
    EmpreFin,#eosem193#40;
    ;
    NULL,Impresion;
|FIN;

|PROCESO MiraEjerc;
   |C_M #eosem193#43,1,"S";
   |C_M #eosem193#44,1,"S";
   |C_M #eosem193#42,1,"S";
   |C_M #eosem193#46,1,"S";
   |C_M #eosem193#47,1,"S";

   |SI #eosem193#40 [ 1998;
      |C_M #eosem193#43,1,"N";
      |C_M #eosem193#44,1,"N";
   |FINSI;

   |SI #eosem193#40 ] 2004;
      |C_M #eosem193#43,1,"N";
      |C_M #eosem193#44,1,"N";
      |C_M #eosem193#42,1,"N";
      |C_M #eosem193#46,1,"N";
      |C_M #eosem193#47,1,"N";

      #eosem193#43 = "F";  |PINTA #eosem193#43;
      #eosem193#44 = "I";  |PINTA #eosem193#44;
      #eosem193#42 = "";   |PINTA #eosem193#42;
      #eosem193#46 = "";   |PINTA #eosem193#46;
      #eosem193#47 = "";   |PINTA #eosem193#47;
   |FINSI;
|FPRC;

|PROCESO ColecPerc;
   |HAZ GrabaPercep;
   #eose1193#12 = #eose1193#12 + 1;
|FPRC;

|DEFBUCLE ColecPerc;
#eosp1193#1;
;
#eosm1193#0,#eosm1193#1,"            "," ",0000;
#eosm1193#0,#eosm1193#1,"zzzzzzzzzzzz","z",9999;
;
NULL,ColecPerc;
|FIN;

|PROCESO ColecGast;
   |HAZ GrabaGastos;
   #eose1193#12 = #eose1193#12 + 1;
|FPRC;

|DEFBUCLE ColecGast;
#eosg1193#1;
;
#eosm1193#0,#eosm1193#1,"            ";
#eosm1193#0,#eosm1193#1,"zzzzzzzzzzzz";
;
NULL,ColecGast;
|FIN;

|PROCESO Colectivo;
   #eosclien#0 = #eosm1193#0;
   |LEE 010#eosclien.=;

   aMensaje = "Prepare el modelo para la impresion de la caratula del declarante"; |HAZ Cuadra;
   |INFOR "eosp1932"; |PRINT; |PIEINF; |FININF;
   |HAZ GrabaDecla;
   #eose1193#11 = #eose1193#11 + 1;
   |BUCLE ColecPerc;
   |BUCLE ColecGast;
|FPRC;

|DEFBUCLE Colectivo;
#eosm1193#1;
;
EmpreIni,#eosem193#40," ",00;
EmpreFin,#eosem193#40," ",00;
;
NULL,Colectivo;
|FIN;


|PROCESO CalculaColec;
   DiaAlfa = #eosem193#41 % 0102;
   MesAlfa = #eosem193#41 % 0402;
   YearAlfa = #eosem193#41 % 0704;
   Mes = MesAlfa;
   |HAZ MesLetra;

   FechaAlfa = #eosem193#42;
   |QBF FechaAlfa;
   FechaAlfa = FechaAlfa + ", a " + DiaAlfa + " de " + MesAlfa + " de " + YearAlfa;

   |ABRE #eosclien;
   |HAZ AbreSec;
   |HAZ GrabaColec;
   |SI #eosem193#0 = "S";
      EmpreIni = #eosem193#1;
      EmpreFin = #eosem193#2;
      |BUCLE Colectivo;
   |SINO;
      |PARA Cont = 3; |SI Cont [ 38; |HACIENDO Cont = Cont + 1;
         EmpreIni = #eosem193#Cont#;
         EmpreFin = #eosem193#Cont#;
         |BUCLE Colectivo;
      |SIGUE;
   |FINSI;
   |HAZ CierraSec;

   aMensaje = "Prepare el modelo para la impresion de la caratula del presentador"; |HAZ Cuadra;
   |INFOR "eosp1931";
   |SI FSalida = 0; |PRINT; |PIEINF; |FININF; |FINSI;

   |PINTA #eose1193#11; |PINTA #eose1193#12;
   |CIERRA #eosclien;
|FPRC;

|PROCESO MiraSiOficial;
   |SI #eosem193#40 ] 2004;  |ACABA;  |FINSI;

   |SI #eosem193#43 = "O";
      |C_M #eosem193#44,1,"N";
   |SINO;
      |C_M #eosem193#44,1,"S";
   |FINSI;
|FPRC;

|PROCESO MiraSiCol;
   |SI #eosem193#44 = "C";
      |C_M #eosem193#45,1,"S";
   |SINO;
      |C_M #eosem193#45,1,"N";
   |FINSI;
|FPRC;

|PROCESO Cuadra;
   |SI aCuadre ! "S"; |ACABA; |FINSI;
   |FINIMP;
   |PUSHV 1405 1675;
   |BLANCO 1405 1675;
   |CUADRO 1405 1675;
   aLong = aMensaje % 0; nLong = aLong;
   nCalc = ((68 - nLong) / 2) ! 0;
   aMensaje = (" " * nCalc) + aMensaje + (" " * nCalc);
   |ATRI R; |PINTA 1406, aMensaje; |ATRI N; |PAUSA;
   |POPV;
   Impresora = aImpre; |IMPRE -1;
|FPRC;

|PROCESO PreguntaImpre;
   |PUSHV 1943 2177;
   |BLANCO 1943 2177;
   |CUADRO 1945 2175;
   |ATRI R; |PINTA 1946 , " Seleccione nombre impresora "; |ATRI N;
   E_sup  = 8;
   E_inf  = "";
   aImpre = 2056 ? 0; |QBF aImpre;
   |POPV;
|FPRC;

|PROCESO PonMoneda;
   |SI #eosem193#40 ] 2001;
     IaMoneda = aMoneda1<-;
     |ESPECIFICA "MODO_VER_EURO", aMoneda;
     |SI aMoneda2 = "0"; |Y EURODB = 0;
        |MENAV "0000No se puede emitir el modelo en una moneda que no sea EURO";
        |HAZ PintaMoneda;
        |ERROR; |ACABA;
     |FINSI;
   |FINSI;
|FPRC;

|PROCESO Bloque2011;
     aTipo = #eosem193#50;
     |SI #eosem193#50 = "N"; aTipo = " "; |FINSI;

     |SI #eosem193#40 ] 2004;
         |HAZ ElActual;
         |ACABA;
     |FINSI;

     Sw = 0;
     |SI #eosem193#40 ] 2001; |Y #eosem193#49 ! "EUROS  ";
         IaMoneda = aMoneda1<-;
         |ESPECIFICA "MODO_VER_EURO", aMoneda;
         |SI aMoneda2 = "0";
             #eosem193#49 = "EUROS  "; aAlfa = "2,8,0"; |MENUITEM 0,aAlfa; |PULSATECLA;
             Sw = 1;
         |FINSI;
     |FINSI;

     |SI #eosem193#40 [ 1998;
         |MENU Menu;
         Opcion = FSalida;
         |SI Opcion [ 0; |ACABA; |FINSI;
     |FINSI;

     |SI #eosem193#43 ! "F";
         |SI #eosem193#40 ] 2001;
             |CONFI "    NDesea pausas entre hoja y hoja para cuadrar ? ";
             |SI FSalida = 0;
                 aCuadre = "S";
                 |HAZ PreguntaImpre;
             |SINO;
                 aCuadre = "N";
                 |IMPRE 0;
                 |SI FSalida ! 0; |ACABA |FINSI;
             |FINSI;
          |SINO;
             aCuadre = "N";
             |IMPRE 0;
             |SI FSalida ! 0; |ACABA |FINSI;
          |FINSI;
     |FINSI;

     Primero = 0;
     |SI #eosem193#43 = "D";
         |PUSHV 1209 1471;
         |CLS;
         |CUADRO 1209 1471;
         |ATRI R; |PINTA 1310, "INTRODUZCA UN DISKETTE VACIO EN LA UNIDAD A: Y PULSE UNA TECLA"; |ATRI N;
         |PAUSA;
         |POPV;
         |SI #eosem193#44 = "C";
             |DDEFECTO #eose1193;
             |PUSHV 0501 2380;
             |PINPA #0#eose1193;
             |PINDA #0#eose1193;
             |ENDATOS #1#eose1193;
             |SI FSalida ! 0; |POPV; |ACABA; |FINSI;
             |HAZ CalculaColec;
             |PAUSA;
             |POPV; |ACABA;
         |FINSI;
     |FINSI;

     |CLS;

     |SI #eosem193#43 = "O"; |FINIMP; |FINSI;

     |SI Sw = 1;
          aAlfa = "2,8,0"; |MENUITEM 0,aAlfa;
     |FINSI;
|FPRC;

|PROCESO eosm1193_2012;
     #reflejo@#0 = #eosm1193#0;
     #reflejo@#1 = #eosm1193#1;
     #reflejo@#2 = #eosm1193#2;
     #reflejo@#20 = #eosm1193#20 + 1;
     |LEE 041#reflejo@.=;
     |SI FSalida = 0;
         |ACABA;
     |FINSI;

     eaFicheroPlano = eaModelos + (("00000" + #eosm1193#0) % -105) + ".txt";
     eaFicheroImpre = eaModelos + (("00000" + #eosm1193#0) % -105) + ".imp";
     eaFicheroSalid = eaModelos + (("00000" + #eosm1193#0) % -105) + ".sal";
     eaFicheroError = "err" + (("00000" + #eosm1193#0) % -105) + ".txt";

     aAbre = eaPathEmision + eaFicheroPlano;
     |XABRE "BW", aAbre, nHandle2;

     #eosclien#0 = #eosm1193#0;
     |LEE 010#eosclien.=;

     DiaAlfa  = #eosem193#41 % 0102;
     MesAlfa  = #eosem193#41 % 0402;
     YearAlfa = #eosem193#41 % 0704;
     Mes      = MesAlfa;
     |HAZ MesLetra;

     FechaAlfa = #eosem193#42;
     |QBF FechaAlfa;
     FechaAlfa = FechaAlfa + ", a " + DiaAlfa + " de " + MesAlfa + " de " + YearAlfa;

     |HAZ Tipo1;
     |HAZ CalculaHojas;

     |SI Percep ! 0; |BUCLE eosp1193; |FINSI;
     |SI Gastos ! 0; |BUCLE eosg1193; |FINSI;

     |XCIERRA nHandle2;

     enEmpresa    = #eosm1193#0;
     eaNomEmpresa = #eosclien#2;
     |HAZ PresentaPortal;

     |SI enErrorPortal = 0;  |Y eaOpcion ! "1";
         #eosm1193#21 = #eosem193#41;
         |GRABA 020#eosm1193.a;
     |FINSI;

     |LIBERA #eosm1193;
|FPRC;

|DEFBUCLE eosm1193_2012;
     #eosm1193#1;
     ;
     EmpreIni, #eosem193#40, aTipo, 00;
     EmpreFin, #eosem193#40, aTipo, 99;
     be;
     NULL, eosm1193_2012;
|FIN;

|PROCESO Bloque2012;
     aTipo = #eosem193#50;
     |SI #eosem193#50 = "N"; aTipo = " "; |FINSI;

     enAnyo     = #eosem193#40;
     eaModelos  = "193";
     eaEjer     = #eosem193#40;

     eaPathLanza = eaUnidad + "\MODELOS";            |RMKDIR eaPathLanza;
     eaPathLanza = eaPathLanza + "\" + eaModelos;    |RMKDIR eaPathLanza;
     eaPathLanza = eaPathLanza + "\" + eaEjer;       |RMKDIR eaPathLanza;
     eaPathLanza = eaPathLanza + "\";

     |DBASE eaPathEmision;
     eaPathEmision = eaPathEmision + "emisiones";       |MKDIR eaPathEmision;
     eaPathEmision = eaPathEmision + "/" + eaModelos;   |MKDIR eaPathEmision;
     eaPathEmision = eaPathEmision + "/" + eaEjer;      |MKDIR eaPathEmision;
     eaPathEmision = eaPathEmision + "/";

     eaPathInternet = eaUnidad + "/AEAT";                |RMKDIR eaPathInternet;
     eaPathInternet = eaPathInternet + "/INTERNET";      |RMKDIR eaPathInternet;
     eaPathInternet = eaPathInternet + "/" + eaModelos;  |RMKDIR eaPathInternet;
     eaPathInternet = eaPathInternet + "/" + eaEjer;     |RMKDIR eaPathInternet;
     eaPathInternet = eaPathInternet + "/";

     |HAZ Botones_2012;

     |SI eaOpcion = "0";  |ACABA;  |FINSI;

     |ABRE #reflejo@;
     |ABRE #eosma193;
     |ABRE #eosclien;
     |SI #eosem193#0 = "S";
         EmpreIni = #eosem193#1;
         EmpreFin = #eosem193#2;
         |BUCLE eosm1193_2012;
     |SINO;
         |PARA Cont = 3; |SI Cont [ 38; |HACIENDO Cont = Cont + 1;
               EmpreIni = #eosem193#Cont#;
               EmpreFin = #eosem193#Cont#;
               |BUCLE eosm1193_2012;
         |SIGUE;
     |FINSI;
     |CIERRA #eosclien;
     |CIERRA #eosma193;
     |CIERRA #reflejo@;

     |SI eaOpcion = "3";
         |HAZ SacaErrorPtl;

         |SI enPresentar = 0;
             aAlfa =  "      Los ficheros generados estan: " + eaPathInternet + " de su PC";
             |MENAV aAlfa;
         |FINSI;
     |FINSI;
|FPRC;

|PROCESO Bloque2015;
     aTipo = #eosem193#50;
     |SI #eosem193#50 = "N"; aTipo = " "; |FINSI;

     enAnyo     = #eosem193#40;
     eaModelos  = "193";
     eaEjer     = #eosem193#40;

     eaPathLanza = eaUnidad + "\MODELOS";            |RMKDIR eaPathLanza;
     eaPathLanza = eaPathLanza + "\" + eaModelos;    |RMKDIR eaPathLanza;
     eaPathLanza = eaPathLanza + "\" + eaEjer;       |RMKDIR eaPathLanza;
     eaPathLanza = eaPathLanza + "\";

     |DBASE eaPathEmision;
     eaPathEmision = eaPathEmision + "emisiones";       |MKDIR eaPathEmision;
     eaPathEmision = eaPathEmision + "/" + eaModelos;   |MKDIR eaPathEmision;
     eaPathEmision = eaPathEmision + "/" + eaEjer;      |MKDIR eaPathEmision;
     eaPathEmision = eaPathEmision + "/";

     eaPathInternet = eaUnidad + "/AEAT";                |RMKDIR eaPathInternet;
     eaPathInternet = eaPathInternet + "/INTERNET";      |RMKDIR eaPathInternet;
     eaPathInternet = eaPathInternet + "/" + eaModelos;  |RMKDIR eaPathInternet;
     eaPathInternet = eaPathInternet + "/" + eaEjer;     |RMKDIR eaPathInternet;
     eaPathInternet = eaPathInternet + "/";

     |HAZ Botones_2015;

     |SI eaOpcion = "0";  |ACABA;  |FINSI;

     |ABRE #reflejo@;
     |ABRE #eosma193;
     |ABRE #eosclien;
     |SI #eosem193#0 = "S";
         EmpreIni = #eosem193#1;
         EmpreFin = #eosem193#2;
         |BUCLE eosm1193_2012;
     |SINO;
         |PARA Cont = 3; |SI Cont [ 38; |HACIENDO Cont = Cont + 1;
               EmpreIni = #eosem193#Cont#;
               EmpreFin = #eosem193#Cont#;
               |BUCLE eosm1193_2012;
         |SIGUE;
     |FINSI;
     |CIERRA #eosclien;
     |CIERRA #eosma193;
     |CIERRA #reflejo@;

     |SI eaOpcion = "3";
         |SI enPresentar = 0;
             aAlfa =  "      Los ficheros generados estan: " + eaPathInternet + " de su PC";
             |MENAV aAlfa;
         |FINSI;
     |FINSI;
|FPRC;

|PROGRAMA;
     |HAZ LeeUnidad;

     |CABEZA " Emision modelo 193";

     |PINPA #0#eosem193;
     |PINDA #0#eosem193;

     |ENDATOS #1#eosem193;
     |SI FSalida ! 0; |ACABA; |FINSI;

     |DBASE aBase;  |QBF aBase;
     aMas = aBase + "def/eosm1193.mas";
     |CARGA_DEF aMas, reflejo@;
     |SI FSalida ! 0;
         |MENAV "    Error al cargar eosm1193";
         |ACABA;
     |FINSI;

     |SI #eosem193#40 [ 2011;  |HAZ Bloque2011;  |ACABA;   |FINSI;
     |SI #eosem193#40 [ 2014;  |HAZ Bloque2012;  |ACABA;   |FINSI;
     |SI #eosem193#40 = 2015;  |HAZ Bloque2015;  |ACABA;   |FINSI;
     |SI #eosem193#40 ] 2016;  |HAZ Bloque2016;  |ACABA;   |FINSI;

     |DESCARGA_DEF #reflejo@;
|FPRO;
