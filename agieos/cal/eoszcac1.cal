|FICHEROS;
   eosclien #0;
   eosactiv #1;
   eosclpre #2;
   eoscomun #3;
   eoscomul #4;
   eosdaban #5;
|FIN;

|VARIABLES;
  &emp_act = 0;
  &emp_nue = 0;
|FIN;

|PROGRAMA;
   |HAZ fichero0;
   |HAZ fichero1;
   |HAZ fichero2;
   |HAZ fichero3;
   |HAZ fichero5;
|FPRO;

|| ************************************************************************
||                       fichero emp_acts
|| ************************************************************************

|PROCESO fichero0;
|ABRE #0;
#0#0 = emp_act
|LIBERA #0;
|LEE 110#0=;
|SI FSalida = 0;
    |BORRA 040#0a;

    #0#0 = emp_nue;
    |GRABA 040#0n;
|FINSI;
|CIERRA #0;
|FPRC;

|| ************************************************************************
||                       fichero Actividades
|| ************************************************************************

|PROCESO graba1;
#1#0 = emp_nue;
|GRABA 140#1n;
|LIBERA #1;

#1#0 = emp_act;
|LIBERA #1;
|LEE 140#1=;
|FPRC;

|DEFBUCLE activida_1;
#1#1;
;
emp_act, 1, 00;
emp_act, 6, 99;
be;
NULL, graba1;
|FIN;

|PROCESO borra1;
|BORRA 140#1a;
|LIBERA #1;
|FPRC;

|DEFBUCLE activida_2;
#1#1;
;
emp_act, 1, 00;
emp_act, 6, 99;
be;
NULL, borra1;
|FIN;

|PROCESO fichero1;
|BUCLE activida_1;
|BUCLE activida_2;
|FPRC;

|| ************************************************************************
||                       fichero Clientes-Proveedores emp_acts
|| ************************************************************************

|PROCESO graba2;
#2#0 = emp_nue;
|GRABA 140#2n;
|LIBERA #2;

#2#0 = emp_act;
|LIBERA #2;
|LEE 140#2=;
|FPRC;

|DEFBUCLE cliproem_1;
#2#1;
;
emp_act, 1, 00000;
emp_act, 2, 99999;
be;
NULL, graba2;
|FIN;

|PROCESO borra2;
|BORRA 020#2a;
|LIBERA #2;
|FPRC;

|DEFBUCLE cliproem_2;
#2#1;
;
emp_act, 1, 00000;
emp_act, 2, 99999;
be;
NULL, borra2;
|FIN;

|PROCESO fichero2;
|BUCLE cliproem_1;
|BUCLE cliproem_2;
|FPRC;

|| ************************************************************************
||                       fichero Comuneros
|| ************************************************************************

|PROCESO graba4;
#4#0 = emp_nue;
|GRABA 140#4n;
|LIBERA #4;

#4#0 = emp_act;
|LIBERA #4;
|LEE 140#4=;
|FPRC;

|PROCESO graba3;
|BUCLELIN 0graba4#3;

#3#0 = emp_nue;
|GRABA 140#3n;
|LIBERA #3;

#3#0 = emp_act;
|LIBERA #3;
|LEE 140#3=;
|FPRC;

|DEFBUCLE comunero_1;
#3#1;
;
emp_act, 1, 00;
emp_act, 6, 99;
be;
NULL, graba3;
|FIN;

|PROCESO null;
|FPRC;

|PROCESO borra3;
|BUCLELIN 1null#3;
|BORRA 020#3a;
|LIBERA #3;
|FPRC;

|DEFBUCLE comunero_2;
#3#1;
;
emp_act, 1, 00;
emp_act, 6, 99;
be;
NULL, borra3;
|FIN;

|PROCESO fichero3;
|BUCLE comunero_1;
|BUCLE comunero_2;
|FPRC;

|| ************************************************************************
||                       fichero Bancos
|| ************************************************************************

|PROCESO fichero5;
|ABRE #5;
#5#0 = emp_act
|LIBERA #5;
|LEE 110#5=;
|SI FSalida = 0;
    |BORRA 040#5a;

    #5#0 = emp_nue;
    |GRABA 040#5n;
|FINSI;
|CIERRA #5;
|FPRC;
