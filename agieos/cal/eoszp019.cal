|FICHEROS;
     eoszp019 #0;
     eoselepi #1;
     eoseleme #2;

     eosw0057 #99;
     eosw0058 #100,MANTE;
     eosw0060 #101,MANTE;
     eosw0061 #102;
     eosw0070 #103,MANTE;

     eosm0017 #17;
     eosm0021 #21,MANTE;
     eosm0022 #22,MANTE;

     eosm021@;
|FIN;

|VARIABLES;
     nCampo1      = 0;
     nCampo2      = 0;
     Campos1      = 0;
     CFijo        = 0;
     CControl     = 0;
     CampoN1      = 0;
     CampoN2      = 0;
     CNume        = 0;
     XPara        = 0;
     SwPregunta   = 0;
     CampoTrab    = 0;
     Posi         = 0;
     CampoAsaP    = 0;
     CampoAsaD    = 0;
     CampoAsalar  = 0;
     CampoElem    = 0;
     CampoPtas    = 0;
     CampoTipo    = "";
     TipoElemento = "";
     CampoAsala1  = 0;
     CampoAsala2  = 0;
     CampoAsala3  = 0;
     CampoAsala4  = 0;
     CampoAsala5  = 0;
     CampoAsala6  = 0;
     CampoAsala7  = 0;
     CampoAsala8  = 0;
     CampoAsala9  = 0;
     Ejercicio    = "";
     FechaIni     = @;
     FechaFin     = @;
     DiasEjer     = 0;
     Dias         = 0;
     TAsalariado  = 0;
     XPara1       = 0;
     XPara2       = 0;
     Difer        = 0;
     Porce        = 0;
     Porce1       = 0;
     Porce2       = 0;
     Resto        = 0;
     CampoRdto    = 0;
     SwVuelta     = 0;
     CampoDia1    = 0;
     CampoDia2    = 0;
     CampoDia3    = 0;
     CampoDia4    = 0;
     Rendimiento  = 0;
     CuotaTrabaj  = 0;
     TrimIva      = 0;
     TrimIva1     = 0;
     TrimIva2     = 0;
     TrimIva3     = 0;
     TrimIva4     = 0;
     Tecla        = 0;
     TeclaPara    = 0;
     TeclaAsal    = 0;
     TeclaFuncion = "";
     F1           = "";
     F2           = "";
     Campo1       = 0;
     Campo2       = 0;
     Campo3       = 0;
     Campo4       = 0;
     Campo5       = 0;
     TAsala       = 0;
     aAlfa        = "";
     aAlfa1       = "";
     aAlfa2       = "";
     nSwUtil      = 0;
     aAumento     = "";
     aFich        = "";
     aOrigen      = "";
     aDestino     = "";

     n15_2009     = 0;
     n26_2009     = 0;
     n37_2009     = 0;
     n48_2009     = 0;
     n59_2009     = 0;
     n70_2009     = 0;
     n81_2009     = 0;
     n92_2009     = 0;
     n103_2009    = 0;

     aBase        = "";
     aMas         = "";
     nDesde       = 0;
     fDFecha      = @;
     fHFecha      = @;

       &EURODB      = 0;
       &MEmpresa    = 0;
       &MActivi     = 0;
       &MAnyo       = 0;
       &LEpigra     = "";
       &NEpigra     = "";
       &TEpigra     = "";
       &Programa    = 0;
       &eaPrestige  = "";
       &enCalcProv  = 0;
       &eaComunidad = "";

 {220} &PunteroA    = "";
 {210} &PunteroB    = "";

    {-1}Menu  = "";
        Menu1 = "2400";
        Menu2 = "1";
        Menu3 = "";
        Menu4 = "VINS";
        Menu5 = " Volver a calcular  ";
        Menu6 = " Imprimir  ";
        Menu7 = " Nuevo calculo  ";
        Menu8 = " Salir ";

      nSw218 = 0;
      nSw220 = 0;
      nCampo = 0;

      nSw18P = 0;
      nSw18D = 0;
      nSw19P = 0;
      nSw19D = 0;
      nNume1 = 0;
      nSw    = 0;
      nEjerAnt = 0;
      nError  = 0;

      &eaPrograma  = "";
      &eaExtension = "";
      &enMasTrIRPF = 0;
      &enMasTrIVA  = 0;
|FIN;

|PROCESO AnyoPasado7;  |TIPO 7;
     |MENSA "        <F12> Entrar Dias del provisional.";
     nSwUtil = 0;

     |SI Programa = 0;    |ACABA;  |FINSI;
     |SI #0#108   ! 0;    |ACABA;  |FINSI;
     |SI #0#109   ! 0;    |ACABA;  |FINSI;
     |SI #0#110   ! 0;    |ACABA;  |FINSI;
     |SI #0#111   ! 0;    |ACABA;  |FINSI;
     |SI #0#197   = "S";  |ACABA;  |FINSI;
     |SI #0#198   = "S";  |ACABA;  |FINSI;

     nSwUtil = 1;
     |MENSA "        <F12> Entrar Dias del provisional. <F3> para recoger numeros a¤o pasado";
|FPRC;

|PROCESO AnyoPasado0;  |TIPO 0;
     |SI nSwUtil = 0;   |ACABA;  |FINSI;
     |SI FSalida ! 11;  |ACABA;  |FINSI;

     |PUSHV 0501 2380;
     |D_CUADRO 0920, 1958;
     |ATRI R;
     |PINTA 1021, "    RECOGIDA NUMEROS A¥O ANTERIOR    ";
     |PINTA 1121, "-------------------------------------";
     |PINTA 1221, " - Traspasa los numeros definitivos  ";
     |PINTA 1321, "del ejercicio anterior al provisional";
     |PINTA 1421, "del actual.                          ";
     |PINTA 1521, " - Debe pasar por los numero para que";
     |PINTA 1621, "calcule el nuevo importe.            ";
     |PINTA 1721, "                                     ";
     |PINTA 1821, "                   CONFORME S/N :    ";
     |ATRI 0;

     |CONFI "1855N";
     |POPV;

     |SI FSalida ! 0;  |ACABA;  |FINSI;

     |ABRE #17;
     #17#0 = MEmpresa;
     #17#1 = MActivi;
     #17#5 = MAnyo - 1;
     |SI #17#5 < 0;  #17#5 = 99;  |FINSI;
     |LEE 040#17=;
     |SI FSalida = 0;
         #0#011 = #17#015;  #0#016 = #17#020;  |PINTA #0#011;  |PINTA #0#16;
         #0#022 = #17#026;  #0#027 = #17#031;  |PINTA #0#022;  |PINTA #0#27;
         #0#033 = #17#037;  #0#038 = #17#042;  |PINTA #0#033;  |PINTA #0#38;
         #0#044 = #17#048;  #0#049 = #17#053;  |PINTA #0#044;  |PINTA #0#49;
         #0#055 = #17#059;  #0#060 = #17#064;  |PINTA #0#055;  |PINTA #0#60;
         #0#066 = #17#070;  #0#071 = #17#075;  |PINTA #0#066;  |PINTA #0#71;
         #0#077 = #17#081;  #0#082 = #17#086;  |PINTA #0#077;  |PINTA #0#82;
         #0#088 = #17#092;  #0#093 = #17#097;  |PINTA #0#088;  |PINTA #0#93;
         #0#099 = #17#103;  #0#104 = #17#108;  |PINTA #0#099;  |PINTA #0#104;

         |PARA nCampo1 = 136;  |SI nCampo1 [ 141;  |HACIENDO nCampo1 = nCampo1 + 1;
               nCampo2 = nCampo1 + 8;
               #0nCampo1 = #17nCampo2;
         |SIGUE;

         |PARA nCampo1 = 148;  |SI nCampo1 [ 155;  |HACIENDO nCampo1 = nCampo1 + 1;
               nCampo2 = nCampo1 + 10;
               #0nCampo1 = #17nCampo2;
         |SIGUE;

         |PARA nCampo1 = 168;  |SI nCampo1 [ 175;  |HACIENDO nCampo1 = nCampo1 + 1;
               nCampo2 = nCampo1 + 10;
               #0nCampo1 = #17nCampo2;
         |SIGUE;
     |FINSI;
     |CIERRA #17;

     |POPV;
|FPRC;

|PROCESO Mayusculas;
  #0Campo = #0Campo > #0Campo;
  |PINTA #0Campo;
|FPRC;

|PROCESO Impre;
  |IMPRE 0;
  |SI FSalida ! 0;  |ACABA;  |FINSI;

  |SI #100#103 [ 2008;
      |INFOR "eoszp019";
  |SINO;
      |INFOR "eoszp119";
  |FINSI;

  |SI FSalida ! 0;  |FINIMP;  |ACABA;  |FINSI;

  |PRINT;
  |PIEINF;
  |FININF;
  |FINIMP;
|FPRC;

|PROCESO DDefectos;
  |DDEFECTO #0;
  |DDEFECTO #100;
  |DDEFECTO #101;
|FPRC;

|PROCESO Instala;
     |ABRE #eoseleme;  |CIERRA #eoseleme;  |DELINDEX #eoseleme;
     |ABRE #eoselepi;  |CIERRA #eoselepi;  |DELINDEX #eoselepi;

     eaExtension = "eos";  eaPrograma  = "eoseleme";  |SUB_EJECUTA "eosz0035";
     eaExtension = "eos";  eaPrograma  = "eoselepi";  |SUB_EJECUTA "eosz0035";
|FPRC;

|PROCESO VerPatModulos;
     nError   = 0;

     |ABRE #1;
     #1#0  = "E";
     #1#1  = "4191";
     #1#41 = 1;
     #1#2  = 2020;
     |LEE 000#1=;
     |SI FSalida ! 0;
         nError = 1;
     |FINSI;
     |CIERRA #1;

     |SI nError ! 0;
         |HAZ Instala;

         |ABRE #1;
         #1#0  = "E";
         #1#1  = "4191";
         #1#41 = 1;
         #1#2  = 2020;
         |LEE 000#1=;
         |SI FSalida ! 0;
             |CIERRA #1;
             |MENAV "0000Fichero patron incorrecto, no estan los Modulos 2020. Pongase en contacto con su admistrador";
             nError = 1;
         |SINO;
             |CIERRA #1;
             |SI nError = 1;
                 |MENAV "0000Se ha instalado el fichero patron de epigrafes con los modulos del 2020";
             |FINSI;
             nError = 0;
         |FINSI;
     |FINSI;
|FPRC;

|PROGRAMA;
  |HAZ VerPatModulos;
  |SI nError = 1; |ACABA; |FINSI;

  |SI Programa > 0;
      |PARA XPara1 = 2;  |SI XPara1 [ 218;  |HACIENDO XPara1 = XPara1 + 1;
            XPara2 = XPara1 - 2;
            IPunteroA = PunteroA1 <-;
            IPunteroA = IPunteroA + XPara1;
            #0XPara2  = PunteroA;
      |SIGUE;

      |PARA XPara1 = 3;  |SI XPara1 [ 98;  |HACIENDO XPara1 = XPara1 + 1;
            XPara2     = XPara1 - 1;
            IPunteroB  = PunteroB1 <-;
            IPunteroB  = IPunteroB + XPara1;
            #100XPara2 = PunteroB;
      |SIGUE;

      #100#108 = PunteroB126;
      #100#109 = PunteroB127;
      #100#110 = PunteroB128;
      #100#111 = PunteroB129;
      #100#113 = PunteroB130;
      #100#114 = PunteroB131;
      #100#116 = PunteroB132;
      #100#117 = PunteroB133;
      #100#118 = PunteroB134;
      #100#120 = PunteroB135;
      #100#121 = PunteroB136;
      #100#123 = PunteroB137;
      #100#124 = PunteroB138;
      #100#126 = PunteroB139;
      #100#127 = PunteroB140;
      #100#128 = PunteroB141;

      #100#130 = PunteroB145;
      #100#131 = PunteroB146;
      #100#132 = PunteroB147;
      #100#133 = PunteroB148;

      #0#217  = PunteroB149;
      #0#218  = PunteroB150;
      #0#219  = PunteroB151;
      #0#220  = PunteroB152;
      #103#28 = PunteroB159;

      |PARA XPara1 = 99;  |SI XPara1 [ 114;  |HACIENDO XPara1 = XPara1 + 1;
            XPara2     = XPara1 - 98;
            IPunteroB  = PunteroB1 <-;
            IPunteroB  = IPunteroB + XPara1;
            #101XPara2 = PunteroB;
      |SIGUE;

      IPunteroB  = PunteroB1 <-;
      IPunteroB  = IPunteroB + 115;
      #103#2     = PunteroB;

      |PARA XPara1 = 116;  |SI XPara1 [ 124;  |HACIENDO XPara1 = XPara1 + 1;
            XPara2     = XPara1 - 107;
            IPunteroB  = PunteroB1 <-;
            IPunteroB  = IPunteroB + XPara1;
            #103XPara2 = PunteroB;
      |SIGUE;

      |PARA XPara1 = 141;  |SI XPara1 [ 143;  |HACIENDO XPara1 = XPara1 + 1;
            XPara2     = XPara1 - 122;
            IPunteroB  = PunteroB1 <-;
            IPunteroB  = IPunteroB + XPara1;
            #103XPara2 = PunteroB;
      |SIGUE;

      |PARA XPara1 = 153;  |SI XPara1 [ 158;  |HACIENDO XPara1 = XPara1 + 1;
            XPara2     = XPara1 - 131;
            IPunteroB  = PunteroB1 <-;
            IPunteroB  = IPunteroB + XPara1;
            #103XPara2 = PunteroB;
      |SIGUE;

      #103#28 = PunteroB159;

      SwVuelta = 1;
      |C_M #0#0, 1, "N";  |C_M #0#1, 1, "N";  |C_M #0#2, 1, "N";
      |C_M #0#3, 1, "N";  |C_M #0#4, 1, "N";  |C_M #0#5, 1, "N";

      |SI #0#3 ] 0;  |Y #0#3 < 80;
          #0#3 = 2000 + #0#3;
      |SINO;
          #0#3 = 1900 + #0#3;
      |FINSI;

      LEpigra     = #0#0;
      NEpigra     = #0#1;
      TEpigra     = #0#2;
      #0#203      = eaPrestige;
  |FINSI;

  |CLS;
  |CABEZA "Calculo Modulos";
  |SI Programa = 0;  |HAZ DDefectos;  |FINSI;
  |ET Arriba;
  |PARA; |SI FSalida = 0;  |HACIENDO;
         |C_M #0#115, 1, "S";
         |C_M #0#200, 1, "S";
         |SI #0#197 = "S";
             ||#0#200 = "S";
         |FINSI;
         |PINPA #0#0;
         |SI #0#3 = 2012; |O #0#3 ] 2013;
             nSw218 = 1; nSw220 = 1;
         |FINSI;
         |PINDA #0#0;

         |ENDATOS #1#0;
         |SI FSalida = 0;
             |SI Programa > 0;  |Y FSalida = 0;
                 |PARA XPara1 = 2;  |SI XPara1 [ 218;  |HACIENDO XPara1 = XPara1 + 1;
                       XPara2 = XPara1 - 2;
                       IPunteroA = PunteroA1 <-;
                       IPunteroA = IPunteroA + XPara1;
                       PunteroA = #0XPara2;
                 |SIGUE;

                 |PARA XPara1 = 3;  |SI XPara1 [ 98;  |HACIENDO XPara1 = XPara1 + 1;
                       XPara2     = XPara1 - 1;
                       IPunteroB  = PunteroB1 <-;
                       IPunteroB  = IPunteroB + XPara1;
                       PunteroB   = #100XPara2;
                 |SIGUE;

                 PunteroB126 = #100#108;
                 PunteroB127 = #100#109;
                 PunteroB128 = #100#110;
                 PunteroB129 = #100#111;
                 PunteroB130 = #100#113;
                 PunteroB131 = #100#114;
                 PunteroB132 = #100#116;
                 PunteroB133 = #100#117;
                 PunteroB134 = #100#118;
                 PunteroB135 = #100#120;
                 PunteroB136 = #100#121;
                 PunteroB137 = #100#123;
                 PunteroB138 = #100#124;
                 PunteroB139 = #100#126;
                 PunteroB140 = #100#127;
                 PunteroB141 = #100#128;

                 PunteroB145 = #100#130;
                 PunteroB146 = #100#131;
                 PunteroB147 = #100#132;
                 PunteroB148 = #100#133;

                 PunteroB149 = #0#217;
                 PunteroB150 = #0#218;
                 PunteroB151 = #0#219;
                 PunteroB152 = #0#220;

                 |PARA XPara1 = 99;  |SI XPara1 [ 114;  |HACIENDO XPara1 = XPara1 + 1;
                       XPara2     = XPara1 - 98;
                       IPunteroB  = PunteroB1 <-;
                       IPunteroB  = IPunteroB + XPara1;
                       PunteroB   = #101XPara2;
                 |SIGUE;

                 IPunteroB  = PunteroB1 <-;
                 IPunteroB  = IPunteroB + 115;
                 PunteroB   = #103#2;

                 |PARA XPara1 = 116;  |SI XPara1 [ 124;  |HACIENDO XPara1 = XPara1 + 1;
                       XPara2     = XPara1 - 107;
                       IPunteroB  = PunteroB1 <-;
                       IPunteroB  = IPunteroB + XPara1;
                       PunteroB   = #103XPara2;
                 |SIGUE;

                 |PARA XPara1 = 141;  |SI XPara1 [ 143;  |HACIENDO XPara1 = XPara1 + 1;
                       XPara2     = XPara1 - 122;
                       IPunteroB  = PunteroB1 <-;
                       IPunteroB  = IPunteroB + XPara1;
                       PunteroB   = #103XPara2;
                 |SIGUE;

                 |PARA XPara1 = 153;  |SI XPara1 [ 158;  |HACIENDO XPara1 = XPara1 + 1;
                       XPara2     = XPara1 - 131;
                       IPunteroB  = PunteroB1 <-;
                       IPunteroB  = IPunteroB + XPara1;
                       PunteroB   = #103XPara2;
                 |SIGUE;
                 PunteroB159 = #103#28;

                 eaPrestige = #0#203;

                 |SAL;
             |FINSI;

             |ET Menu;
                 |MENU Menu;
                 Menu2   = FSalida;
                 FSalida  = -1;
                 SwVuelta = 0;

                 |SI Menu2 = 1;  FSalida = 0;   SwVuelta = 1;   |FINSI;
                 |SI Menu2 = 2;  |HAZ Impre;  FSalida = 0;   |VETE Menu;   |FINSI;
                 |SI Menu2 = 3;  |HAZ DDefectos;  FSalida = 0;  |FINSI;
                 |SI Menu2 = 4;  |SAL;                          |FINSI;
         |FINSI;
  |SIGUE;
|FPRO;

|PROCESO Dias;  |TIPO 0;

  |SI Campo = 126;
      CampoDia1 = 127;  CampoDia2 = 128;  CampoDia3 = 129;  CampoDia4 = 130;
  |SINO;
      CampoDia1 = 132;  CampoDia2 = 133;  CampoDia3 = 134;  CampoDia4 = 135;
  |FINSI;

  |SI FSalida ! 9;
      #0Campo = #0CampoDia1 + #0CampoDia2 + #0CampoDia3 + #0CampoDia4;
      |PINTA #0Campo;
      |SI Campo = 131; |HAZ ElAviso; |FINSI;
      |ACABA;
  |FINSI;

  |PUSHV 0501 2380;
  |D_CUADRO 0857, 1380;
  |BLANCO   0958  1279;

  |PINTA 0958, "Trimestre 1 : ";
  |PINTA 1058, "Trimestre 2 : ";
  |PINTA 1158, "Trimestre 3 : ";
  |PINTA 1258, "Trimestre 4 : ";

  |C_M #0CampoDia1, 1, "S"; |C_V #0CampoDia1, 1, "S"; |C_P #0CampoDia1, 1, 0977;
  |C_M #0CampoDia2, 1, "S"; |C_V #0CampoDia2, 1, "S"; |C_P #0CampoDia2, 1, 1077;
  |C_M #0CampoDia3, 1, "S"; |C_V #0CampoDia3, 1, "S"; |C_P #0CampoDia3, 1, 1177;
  |C_M #0CampoDia4, 1, "S"; |C_V #0CampoDia4, 1, "S"; |C_P #0CampoDia4, 1, 1277;

  |PINTA #0CampoDia1;
  |PINTA #0CampoDia2;
  |PINTA #0CampoDia3;
  |PINTA #0CampoDia4;

  |ET CampoDia1;
                 |SI Campo = 126;  |ENCAMPO #127#0;  |FINSI;
                 |SI Campo = 131;  |ENCAMPO #132#0;  |FINSI;

                 |SI FSalida = 1;  |VETE CalcuDia;   |FINSI;
                 |SI FSalida = 7;  |VETE CalcuDia;   |FINSI;
                 |SI FSalida = 2;  |VETE CampoDia1; |FINSI;

  |ET CampoDia2;
                 |SI Campo = 126;  |ENCAMPO #128#0;  |FINSI;
                 |SI Campo = 131;  |ENCAMPO #133#0;  |FINSI;

                 |SI FSalida = 1;  |VETE CalcuDia;   |FINSI;
                 |SI FSalida = 7;  |VETE CalcuDia;   |FINSI;
                 |SI FSalida = 2;  |VETE CampoDia1; |FINSI;

  |ET CampoDia3;
                 |SI Campo = 126;  |ENCAMPO #129#0;  |FINSI;
                 |SI Campo = 131;  |ENCAMPO #134#0;  |FINSI;

                 |SI FSalida = 1;  |VETE CalcuDia;    |FINSI;
                 |SI FSalida = 7;  |VETE CalcuDia;    |FINSI;
                 |SI FSalida = 2;  |VETE CampoDia2; |FINSI;

  |ET CampoDia4;
                 |SI Campo = 126;  |ENCAMPO #130#0;  |FINSI;
                 |SI Campo = 131;  |ENCAMPO #135#0;  |FINSI;

                 |SI FSalida = 1;  |VETE CalcuDia;    |FINSI;
                 |SI FSalida = 7;  |VETE CalcuDia;    |FINSI;
                 |SI FSalida = 2;  |VETE CampoDia3; |FINSI;

  |ET CalcuDia;

  #0Campo = #0CampoDia1 + #0CampoDia2 + #0CampoDia3 + #0CampoDia4;

  |C_M #0CampoDia1, 1, "N"; |C_V #0CampoDia1, 1, "N";
  |C_M #0CampoDia2, 1, "N"; |C_V #0CampoDia2, 1, "N";
  |C_M #0CampoDia3, 1, "N"; |C_V #0CampoDia3, 1, "N";
  |C_M #0CampoDia4, 1, "N"; |C_V #0CampoDia4, 1, "N";

  |POPV;

  |PINTA #0Campo;
  |SI Campo = 131; |HAZ ElAviso; |FINSI;
|FPRC;

|PROCESO ElAviso;
  |SI #0Campo < DiasEjer;
      |PUSHV  0836 1580;
      |ATRI P;
      |PINTA 0937, " PERIODO INCOMPLETO. RECUERDE:             ";
      |ATRI R;
      |PINTA 1037, " El Personal asalariado y no asalariado se ";
      |PINTA 1137, " prorratea a mano y se informa.            ";
      |PINTA 1237, " El resto de elementos se declaran al 100% ";
      |PINTA 1337, " y el programa calcula en funcion de los   ";
      |PINTA 1437, " dias de la actividad.                     ";
      |ATRI 0;
      |CUADRO 0836 1580;
      |PAUSA;
      |POPV;
  |FINSI;
|FPRC;

|PROCESO IncentivoRdto;
  Porce1 = 0;

  |SI #100#103 [ 2008;
      |SI Difer > 0;  Porce1 = Difer * .40;  |FINSI;
  |FINSI;

  |SI #100#103 ] 2009;
      |SI Difer > 0;  |Y aAumento = "S";
          Porce1 = Difer * .40;
      |FINSI;
  |FINSI;

  Porce2 = 0;
  |SI #100#2 = "I";
      |SI Resto > 8;
          Porce  = Resto - 8;
          Porce2 = Porce2 + (Porce * 0.30);
          Resto  = 8;
      |FINSI;

      |SI Resto > 5;
          Porce  = Resto - 5;
          Porce2 = Porce2 + (Porce * 0.25);
          Resto  = 5;
      |FINSI;

      |SI Resto > 3;
          Porce  = Resto - 3;
          Porce2 = Porce2 + (Porce * 0.20);
          Resto  = 3;
      |FINSI;

      |SI Resto > 1;
          Porce  = Resto - 1;
          Porce2 = Porce2 + (Porce * 0.15);
          Resto  = 1;
      |FINSI;

      |SI Resto > 0;
          Porce2 = Porce2 + (Resto * 0.10);
      |FINSI;
  |FINSI;

  |SI #100#2 = "P";
      |SI Resto > 0;    |Y Resto [ 1;  Porce2 = 0.10;  |FINSI;
      |SI Resto ] 1.01; |Y Resto [ 3;  Porce2 = 0.15;  |FINSI;
      |SI Resto ] 3.01; |Y Resto [ 5;  Porce2 = 0.20;  |FINSI;
      |SI Resto ] 5.01; |Y Resto [ 8;  Porce2 = 0.25;  |FINSI;
      |SI Resto > 8;                   Porce2 = 0.30;  |FINSI;
  |FINSI;
|FPRC;

|PROCESO RdtoPrevio97;
     #101#0 = 0;

     |SI #0#3 > 1999; |ACABA;  |FINSI;

     |ABRE #1;
     |SELECT #1#1;
     #1#0  = #0#0;
     #1#1  = #0#1;
     #1#41 = #0#2;
     #1#2  = 1997;
     |LEE 040#1=;
     |SI FSalida ! 0;  |DDEFECTO #1;  |FINSI;
     |CIERRA #1;

     #101#0  = #101#0 + (#0#13  * #1#6);
     #101#0  = #101#0 + (#0#24  * #1#10);
     #101#0  = #101#0 + (#0#35  * #1#14);
     #101#0  = #101#0 + (#0#46  * #1#18);
     #101#0  = #101#0 + (#0#57  * #1#22);
     #101#0  = #101#0 + (#0#68  * #1#26);
     #101#0  = #101#0 + (#0#79  * #1#30);
     #101#0  = #101#0 + (#0#90  * #1#34);
     #101#0  = #101#0 + (#0#101 * #1#38);
     #101#16 = #1#40;
     |SI EURODB ! 0;  #101#16 = #1#67;  |FINSI;

     |ABRE #1;
     |SELECT #1#1;
     #1#0  = #0#0;
     #1#1  = #0#1;
     #1#41 = #0#2;
     #1#2  = #0#3;
     |LEE 040#1=;
     |SI FSalida ! 0;  |DDEFECTO #1;  |FINSI;
     |CIERRA #1;
|FPRC;

|PROCESO Total2008zp19;
  || Reduccion Ley 66/97

  CampoRdto = 39;
  |SI #100#42 ! 0;  CampoRdto = 42;  |FINSI;
  |SI #100#46 ! 0;  CampoRdto = 46;  |FINSI;
  |SI #100#50 ! 0;  CampoRdto = 50;  |FINSI;
  |SI #100#54 ! 0;  CampoRdto = 54;  |FINSI;
  |SI #100#58 ! 0;  CampoRdto = 58;  |FINSI;
  |SI #100#63 ! 0;  CampoRdto = 63;  |FINSI;
  |SI #100#69 ! 0;  CampoRdto = 69;  |FINSI;
  |SI #100#73 ! 0;  CampoRdto = 73;  |FINSI;

  #100#93 = 0;
  |SI #100#92 ! 0;
      #100#93 = #100CampoRdto < #100#92;
      |SI #100#93 < 0;  #100#93 = 0;  |FINSI;
  |FINSI;

  CampoRdto = 40;
  |SI #100#44 ! 0;  CampoRdto = 44;  |FINSI;
  |SI #100#48 ! 0;  CampoRdto = 48;  |FINSI;
  |SI #100#52 ! 0;  CampoRdto = 52;  |FINSI;
  |SI #100#56 ! 0;  CampoRdto = 56;  |FINSI;
  |SI #100#60 ! 0;  CampoRdto = 60;  |FINSI;
  |SI #100#66 ! 0;  CampoRdto = 66;  |FINSI;
  |SI #100#71 ! 0;  CampoRdto = 71;  |FINSI;
  |SI #100#75 ! 0;  CampoRdto = 75;  |FINSI;

  #100#95 = 0;
  |SI #100#94 ! 0;
      #100#95 = #100CampoRdto < #100#94;
      |SI #100#95 < 0;  #100#95 = 0;  |FINSI;
  |FINSI;

  || Rdto Neto

  CampoRdto = 39;
  |SI #100#42 ! 0;  CampoRdto = 42;  |FINSI;
  |SI #100#46 ! 0;  CampoRdto = 46;  |FINSI;
  |SI #100#50 ! 0;  CampoRdto = 50;  |FINSI;
  |SI #100#54 ! 0;  CampoRdto = 54;  |FINSI;
  |SI #100#58 ! 0;  CampoRdto = 58;  |FINSI;
  |SI #100#63 ! 0;  CampoRdto = 63;  |FINSI;
  |SI #100#69 ! 0;  CampoRdto = 69;  |FINSI;
  |SI #100#73 ! 0;  CampoRdto = 73;  |FINSI;
  |SI #100#93 ! 0;  CampoRdto = 93;  |FINSI;

  #100#80 = #100CampoRdto + #100#76 + #100#78;

  CampoRdto = 40;
  |SI #100#44 ! 0;  CampoRdto = 44;  |FINSI;
  |SI #100#48 ! 0;  CampoRdto = 48;  |FINSI;
  |SI #100#52 ! 0;  CampoRdto = 52;  |FINSI;
  |SI #100#56 ! 0;  CampoRdto = 56;  |FINSI;
  |SI #100#60 ! 0;  CampoRdto = 60;  |FINSI;
  |SI #100#66 ! 0;  CampoRdto = 66;  |FINSI;
  |SI #100#71 ! 0;  CampoRdto = 71;  |FINSI;
  |SI #100#75 ! 0;  CampoRdto = 75;  |FINSI;
  |SI #100#95 ! 0;  CampoRdto = 95;  |FINSI;

  #100#81 = #100CampoRdto + #100#77 + #100#79;

|FPRC;

|PROCESO Total2009zp19;
     CampoRdto = 39;
     |SI #100#42 ! 0;  CampoRdto = 42;  |FINSI;
     |SI #100#46 ! 0;  CampoRdto = 46;  |FINSI;
     |SI #100#50 ! 0;  CampoRdto = 50;  |FINSI;
     |SI #100#54 ! 0;  CampoRdto = 54;  |FINSI;
     |SI #100#58 ! 0;  CampoRdto = 58;  |FINSI;
     |SI #100#63 ! 0;  CampoRdto = 63;  |FINSI;
     |SI #100#69 ! 0;  CampoRdto = 69;  |FINSI;
     |SI #100#73 ! 0;  CampoRdto = 73;  |FINSI;

     #100#131 = 0;
     #100#116 = 0;
     |SI  #100#103 ] 2010;
          |SI #100CampoRdto > 0;
              #100#116 = #100CampoRdto % 5;
          |FINSI;
     |FINSI;
     |SI #100#103 = 2012; |O #100#103 ] 2013;
         |SI #100#130 = "S"; |Y #100CampoRdto > 0;
             |SI #100#103 = 2012; #100#131 = ((#100CampoRdto - #100#116) % 65) ! 2; |FINSI;
             |SI #100#103 ] 2013; #100#131 = ((#100CampoRdto - #100#116) % 20) ! 2; |FINSI;
         |FINSI;
     |FINSI;

     #100#112 = #100CampoRdto - #100#116 - #100#110 + #100#111 - #100#131;

     #100#114 = 0;
     |SI #100#113 = "S";
          #100#114 = #100#111 % 40;
     |FINSI;

     #100#115 = #100#112 - #100#114;

     |SI #100#103 ] 2010;
          |SI #100#117 = "S";  |Y #100#118 = 0;
              #100#118 = #100#115 % 20;
          |FINSI;

          |SI #100#117 = "N";
              #100#118 = 0;
          |FINSI;
     |SINO;
          #100#117 = "N";
          #100#118 = 0;
     |FINSI;

     #100#119 = #100#115 - #100#118;

     CampoRdto = 40;
     |SI #100#44 ! 0;  CampoRdto = 44;  |FINSI;
     |SI #100#48 ! 0;  CampoRdto = 48;  |FINSI;
     |SI #100#52 ! 0;  CampoRdto = 52;  |FINSI;
     |SI #100#56 ! 0;  CampoRdto = 56;  |FINSI;
     |SI #100#60 ! 0;  CampoRdto = 60;  |FINSI;
     |SI #100#66 ! 0;  CampoRdto = 66;  |FINSI;
     |SI #100#71 ! 0;  CampoRdto = 71;  |FINSI;
     |SI #100#75 ! 0;  CampoRdto = 75;  |FINSI;

     #100#133 = 0;
     #100#126 = 0;
     |SI #100CampoRdto > 0;
         #100#126 = #100CampoRdto % 5;
     |FINSI;
     |SI #100#103 = 2012; |O #100#103 ] 2013;
         |SI #100#132 = "S"; |Y #100CampoRdto > 0;
             |SI #100#103 = 2012; #100#133 = ((#100CampoRdto - #100#126) % 65) ! 2; |FINSI;
             |SI #100#103 ] 2013; #100#133 = ((#100CampoRdto - #100#126) % 20) ! 2; |FINSI;
         |FINSI;
     |FINSI;

     #100#122 = #100CampoRdto - #100#126 - #100#120 + #100#121 - #100#133;

     #100#124 = 0;
     |SI #100#123 = "S";
          #100#124 = #100#121 % 40;
     |FINSI;

     #100#125 = #100#122 - #100#124;

     |SI #100#127 = "S";  |Y #100#128 = 0;
         #100#128 = #100#125 % 20;
     |FINSI;

     |SI #100#127 = "N";
         #100#128 = 0;
     |FINSI;

     #100#129 = #100#125 - #100#128;

     #100#80  = #100#119;
     #100#81  = #100#129;
|FPRC;

|PROCESO TotalMod;
  || Minoracion de Empleo

  #100#103 = #0#3;                        || A¤o
  #100#0   = #0#108;                      || Rdto.Neto Previo P
  #100#1   = #0#109;                      || Rdto.Neto Previo D
  #100#4   = #0#164;                      || N§.Asalariados A¤o actual 1 P
  #100#5   = #0#166;                      || N§.Asalariados A¤o actual 1 D
  #100#83  = #0#184;                      || N§.Asalariados A¤o actual 2 P
  #100#84  = #0#186;                      || N§.Asalariados A¤o actual 2 D

  #100#6   = 0;
  #100#88  = 0;
  #100#85  = 0;
  #100#90  = 0;

   aAumento = #100#108;
   Resto    = #100#3 + #100#82;
   Porce1   = 0;
   Porce2   = 0;
   Difer    = (#100#4 + #100#83) - (#100#3 + #100#82);
   |SI Difer < 0;  Resto = #100#4 + #100#83;  |FINSI;

   |SI #100#103 ] 2009;
       |SI #100#108 = "N";
           Difer = 0;
           Resto = #100#4 + #100#83;
      |FINSI;
   |FINSI;

   |HAZ IncentivoRdto;

   |SI #100#4 ! 0;
||     #100#6  = Porce1 + (Porce2 * (#100#4  / (#100#4 + #100#83)));
       #100#6  = ((Porce1 + Porce2) / (#100#4 + #100#83)) * #100#4;
   |FINSI;

   |SI #100#83 ! 0;
||     #100#85 = Porce1 + (Porce2 * (#100#83 / (#100#4 + #100#83)));
       #100#85 = ((Porce1 + Porce2) / (#100#4 + #100#83)) * #100#83;
   |FINSI;

   #100#88 = #100#8 * #100#6;
   #100#90 = #100#87 * #100#85;

   #100#9  = #100#88 + #100#90;
   #100#7  = 0;
   #100#89 = 0;
   #100#86 = 0;
   #100#91 = 0;

   aAumento = #100#109;
   Resto    = #100#3 + #100#82;
   Porce1   = 0;
   Porce2   = 0;
   Difer    = (#100#5 + #100#84) - (#100#3 + #100#82);
   |SI Difer < 0;  Resto = #100#5 + #100#84;  |FINSI;

   |SI #100#103 ] 2009;
       |SI #100#109 = "N";
           Difer = 0;
           Resto = #100#5 + #100#84;
      |FINSI;
   |FINSI;

   |HAZ IncentivoRdto;

   |SI #100#5 ! 0;
||     #100#7   = Porce1 + (Porce2 * (#100#5  / (#100#5 + #100#84)));
       #100#7  = ((Porce1 + Porce2) / (#100#5 + #100#84)) * #100#5;
   |FINSI;

   |SI #100#84 ! 0;
||     #100#86  = Porce1 + (Porce2 * (#100#84 / (#100#5 + #100#84)));
       #100#86 = ((Porce1 + Porce2) / (#100#5 + #100#84)) * #100#84;
   |FINSI;

  #100#89  = #100#8  * #100#7;
  #100#91  = #100#87 * #100#86;

  #100#10 = #100#89 + #100#91;

  || Minoracion Inversion

  #100#24 = #100#11 + #100#14 + #100#17 + #100#20 + #100#23;
  #100#38 = #100#25 + #100#28 + #100#31 + #100#34 + #100#37;

  ||  Rdto Neto Minorado

  #100#39 = #100#0 - #100#9 - #100#24;
  |SI #100#39 < 0;  #100#39 = 0;  |FINSI;

  #100#40 = #100#1 - #100#10 - #100#38;
  |SI #100#40 < 0;  #100#40 = 0;  |FINSI;

  ||  Quioscos

  #100#42 = #100#39 * #100#41;
  #100#44 = #100#40 * #100#43;
  |SI #1#44 = "N";  #100#42 = 0;  #100#44 = 0;  |FINSI;
  |SI #100#42 < 0;  #100#42 = 0;  |FINSI;
  |SI #100#44 < 0;  #100#44 = 0;  |FINSI;

  ||  Taxis

  #100#46 = #100#39 * #100#45;
  #100#48 = #100#40 * #100#47;
  |SI #1#45 = "N";  #100#46 = 0;  #100#48 = 0; |FINSI;
  |SI #100#46 < 0;  #100#46 = 0;  |FINSI;
  |SI #100#48 < 0;  #100#48 = 0;  |FINSI;

  ||  Urbanos

  #100#50 = #100#39 * #100#49;
  #100#52 = #100#40 * #100#51;
  |SI #1#47 = "N";  #100#50 = 0;  #100#52 = 0; |FINSI;
  |SI #100#50 < 0;  #100#50 = 0;  |FINSI;
  |SI #100#52 < 0;  #100#52 = 0;  |FINSI;

  ||  Mercancias

  #100#54 = #100#39 * #100#53;
  #100#56 = #100#40 * #100#55;
  |SI #1#46 = "N";  #100#54 = 0;  #100#56 = 0; |FINSI;
  || |SI #100#4  ! 0;    #100#54 = 0;  |FINSI;
  || |SI #100#83 ! 0;    #100#54 = 0;  |FINSI;
  || |SI #100#5  ! 0;    #100#56 = 0;  |FINSI;
  || |SI #100#84 ! 0;    #100#56 = 0;  |FINSI;
  |SI #100#54 < 0;  #100#54 = 0;  |FINSI;
  |SI #100#56 < 0;  #100#56 = 0;  |FINSI;

  ||  Empresas Peque¤as dimensiones

  CampoRdto = 39;
  |SI #100#42 ! 0;  CampoRdto = 42;  |FINSI;

  #100#58 = #100CampoRdto * #100#57;
  |SI #100#46 ! 0; |O #100#50 ! 0; |O #100#54 ! 0;
      #100#58 = 0;
  |FINSI;
  |SI #100#58 < 0;  #100#58 = 0;  |FINSI;

  CampoRdto = 40;
  |SI #100#42 ! 0;  CampoRdto = 44;  |FINSI;

  #100#60 = #100CampoRdto * #100#59;
  |SI #100#48 ! 0; |O #100#52 ! 0; |O #100#56 ! 0;
      #100#60 = 0;
  |FINSI;
  |SI #100#60 < 0;  #100#60 = 0;  |FINSI;

  ||  Temporada

  CampoRdto = 39;
  |SI #100#42 ! 0;  CampoRdto = 42;  |FINSI;
  |SI #100#46 ! 0;  CampoRdto = 46;  |FINSI;
  |SI #100#50 ! 0;  CampoRdto = 50;  |FINSI;
  |SI #100#54 ! 0;  CampoRdto = 54;  |FINSI;
  |SI #100#58 ! 0;  CampoRdto = 58;  |FINSI;

  #100#63 = #100CampoRdto * #100#62;
  |SI #100#63 < 0;  #100#63 = 0;  |FINSI;

  CampoRdto = 40;
  |SI #100#44 ! 0;  CampoRdto = 44;  |FINSI;
  |SI #100#48 ! 0;  CampoRdto = 48;  |FINSI;
  |SI #100#52 ! 0;  CampoRdto = 52;  |FINSI;
  |SI #100#56 ! 0;  CampoRdto = 56;  |FINSI;
  |SI #100#60 ! 0;  CampoRdto = 60;  |FINSI;

  #100#66 = #100CampoRdto * #100#65;
  |SI #100#66 < 0;  #100#66 = 0;  |FINSI;

  || Exceso

  CampoRdto = 39;
  |SI #100#42 ! 0;  CampoRdto = 42;  |FINSI;
  |SI #100#46 ! 0;  CampoRdto = 46;  |FINSI;
  |SI #100#50 ! 0;  CampoRdto = 50;  |FINSI;
  |SI #100#54 ! 0;  CampoRdto = 54;  |FINSI;
  |SI #100#58 ! 0;  CampoRdto = 58;  |FINSI;
  |SI #100#63 ! 0;  CampoRdto = 63;  |FINSI;

  #100#67 = #1#40;
  |SI EURODB ! 0;  #100#67 = #1#67;  |FINSI;

  #100#68 = #100CampoRdto - #100#67;
  #100#69 = #100#67 + (#100#68 * 1.30);
  |SI #100#68 < 0;  #100#69 = 0;  |FINSI;
  |SI EURODB = 0;
      |SI #1#40 = 0;    #100#69 = 0;  |FINSI;
  |SINO;
      |SI #1#67 = 0;    #100#69 = 0;  |FINSI;
  |FINSI;
  |SI #100#58 ! 0;  #100#69 = 0;  |FINSI;
  |SI #100#69 < 0;  #100#69 = 0;  |FINSI;

  CampoRdto = 40;
  |SI #100#44 ! 0;  CampoRdto = 44;  |FINSI;
  |SI #100#48 ! 0;  CampoRdto = 48;  |FINSI;
  |SI #100#52 ! 0;  CampoRdto = 52;  |FINSI;
  |SI #100#56 ! 0;  CampoRdto = 56;  |FINSI;
  |SI #100#60 ! 0;  CampoRdto = 60;  |FINSI;
  |SI #100#66 ! 0;  CampoRdto = 66;  |FINSI;

  #100#67 = #1#40;
  |SI EURODB ! 0;  #100#67 = #1#67;  |FINSI;

  #100#70 = #100CampoRdto - #100#67;
  #100#71 = #100#67 + (#100#70 * 1.30);
  |SI #100#70 < 0;  #100#71 = 0;  |FINSI;
  |SI EURODB  = 0;
      |SI #1#40 = 0;    #100#69 = 0;  |FINSI;
  |SINO;
      |SI #1#67 = 0;    #100#69 = 0;  |FINSI;
  |FINSI;
  |SI #100#70 < 0;  #100#71 = 0;  |FINSI;
  |SI #100#67 = 0;  #100#71 = 0;  |FINSI;
  |SI #100#60 ! 0;  #100#71 = 0;  |FINSI;
  |SI #100#71 < 0;  #100#71 = 0;  |FINSI;

  || Nueva Actividad

  CampoRdto = 39;
  |SI #100#42 ! 0;  CampoRdto = 42;  |FINSI;
  |SI #100#46 ! 0;  CampoRdto = 46;  |FINSI;
  |SI #100#50 ! 0;  CampoRdto = 50;  |FINSI;
  |SI #100#54 ! 0;  CampoRdto = 54;  |FINSI;
  |SI #100#58 ! 0;  CampoRdto = 58;  |FINSI;
  |SI #100#63 ! 0;  CampoRdto = 63;  |FINSI;
  |SI #100#69 ! 0;  CampoRdto = 69;  |FINSI;

  #100#73 = #100CampoRdto * #100#72;
  |SI #100#63 ! 0;  #100#73 = 0;  |FINSI;
  |SI #100#73 < 0;  #100#73 = 0;  |FINSI;

  CampoRdto = 40;
  |SI #100#44 ! 0;  CampoRdto = 44;  |FINSI;
  |SI #100#48 ! 0;  CampoRdto = 48;  |FINSI;
  |SI #100#52 ! 0;  CampoRdto = 52;  |FINSI;
  |SI #100#56 ! 0;  CampoRdto = 56;  |FINSI;
  |SI #100#60 ! 0;  CampoRdto = 60;  |FINSI;
  |SI #100#66 ! 0;  CampoRdto = 66;  |FINSI;
  |SI #100#71 ! 0;  CampoRdto = 71;  |FINSI;

  #100#75 = #100CampoRdto * #100#74;
  |SI #100#66 ! 0;  #100#75 = 0;  |FINSI;
  |SI #100#75 < 0;  #100#75 = 0;  |FINSI;

  |SI #100#103 [ 2008;
      |HAZ Total2008zp19;
  |FINSI;

  |SI #100#103 ] 2009;
      |HAZ Total2009zp19;
  |FINSI;

  #0#112 = #100#80;  |PINTA #0#112;
  #0#113 = #100#81;  |PINTA #0#113;

  |SI #0#197 = "N";
      TAsala = #0#164 + #0#184;
  |FINSI;

  |SI #0#200 = "S";
      |SI #0#3 [ 1998;
          #0#115 = 5;
          |SI TAsala [ 1;    #0#115 = 4;    |FINSI;
          |SI TAsala = 0;    #0#115 = 2.5;  |FINSI;
          |SI #0#188 = "S";  #0#115 = 5;    |FINSI;
      |SINO;
          #0#115 = 4;
          |SI TAsala [ 1;    #0#115 = 3;    |FINSI;
          |SI TAsala = 0;    #0#115 = 2;    |FINSI;
          |SI #0#188 = "S";  #0#115 = 4;    |FINSI;
      |FINSI;
  |FINSI;

  |PINTA #0#115;

  |SI #100#62 = 0;
      Rendimiento = #0#112 % #0#115;
      |SI #0#3 = 2000;  |O #0#3 = 2004;  |O #0#3 = 2008;  |O #0#3 = 2012;
       |O #0#3 = 2016;  |O #0#3 = 2020;  |O #0#3 = 2024;  |O #0#3 = 2028;
          |SI #0#189 ! "S";  #0#116 = Rendimiento * (#0#127 / 91);  |PINTA #0#116;  |FINSI;
      |SINO;
          |SI #0#189 ! "S";  #0#116 = Rendimiento * (#0#127 / 90);  |PINTA #0#116;  |FINSI;
      |FINSI;
      |SI #0#190 ! "S";  #0#117 = Rendimiento * (#0#128 / 91);  |PINTA #0#117;  |FINSI;
      |SI #0#191 ! "S";  #0#118 = Rendimiento * (#0#129 / 92);  |PINTA #0#118;  |FINSI;
      |SI #0#192 ! "S";  #0#119 = Rendimiento * (#0#130 / 92);  |PINTA #0#119;  |FINSI;
  |SINO;
     Rendimiento = #0#112 / #0#126;
     |SI #0#189 ! "S";
         #0#116      = (Rendimiento * #0#127) % #0#115;  |PINTA #0#116;
     |FINSI;

     |SI #0#190 ! "S";
         #0#117      = (Rendimiento * #0#128) % #0#115;  |PINTA #0#117;
     |FINSI;

     |SI #0#191 ! "S";
         #0#118      = (Rendimiento * #0#129) % #0#115;  |PINTA #0#118;
     |FINSI;

     |SI #0#192 ! "S";
         #0#119      = (Rendimiento * #0#130) % #0#115;  |PINTA #0#119;
     |FINSI;
  |FINSI;

  || IVA

  |SI #0#127 = 0;  #103#11 = 0;  #103#10 = 0;  |FINSI;
  |SI #0#128 = 0;  #103#13 = 0;  #103#12 = 0;  |FINSI;
  |SI #0#129 = 0;  #103#15 = 0;  #103#14 = 0;  |FINSI;

  #0#110 = #0#17 + #0#28 + #0#39 + #0#50 + #0#61 + #0#72 + #0#83 + #0#94 + #0#105;

  #0#111 = #103#11 + #103#13 + #103#15 + #103#17;
  #0#111 = #0#111  + #0#19 + #0#30 + #0#41 + #0#52 + #0#63 + #0#74 + #0#85 + #0#96 + #0#107;
  |SI #100#62 ! 0;  #0#110 = #0#110 * #100#62;  |FINSI;

  |SI #0#3 = 2012; |O #0#3 ] 2013;
      |SI #0#217 = "S";
          |SI nSw218 = 0;
              |SI #0#3 = 2012; #0#218 = (#0#110 % 35) ! 2; |FINSI;
              |SI #0#3 ] 2013; #0#218 = (#0#110 % 20) ! 2; |FINSI;
              nSw218  = 1;
          |FINSI;
          |SI nSw218 = 2;
              #0#218 = #0#110;
              nSw218  = 1;
          |FINSI;
      |SINO;
           #0#218 = 0;
      |FINSI;
      |SI #0#218 > #0#110; #0#218 = #0#110; |FINSI;
      |SI #0#218 < 0; #0#218 = 0; |FINSI;
      |PINTA #0#218;

      |SI #0#219 = "S";
          |SI nSw220= 0;
              |SI #0#3 = 2012; #0#220 = (#0#111 % 35) ! 2; |FINSI;
              |SI #0#3 ] 2013; #0#220 = (#0#111 % 20) ! 2; |FINSI;
              nSw220  = 1;
          |FINSI;
          |SI nSw220= 2;
              #0#220 = #0#111;
              nSw220  = 1;
          |FINSI;
      |SINO;
          #0#220 = 0;
      |FINSI;
      |SI #0#220 > #0#111; #0#220 = #0#111; |FINSI;
      |SI #0#220 < 0; #0#220 = 0; |FINSI;
      |PINTA #0#220;

      #0#110 = #0#110 - #0#218;
      #0#111 = #0#111 - #0#220;
  |FINSI;

  |PINTA #0#110;
  |PINTA #0#111;

  Rendimiento = #0#110 % #0#120;

  |SI #0#193 ! "S";
      |SI #100#62 = 0;
          |SI #0#3 = 2000;  |O #0#3 = 2004;  |O #0#3 = 2008;  |O #0#3 = 2012;
           |O #0#3 = 2016;  |O #0#3 = 2020;  |O #0#3 = 2024;  |O #0#3 = 2028;
              #0#122 = ((#0#110 * (#0#127 / 91)) % #0#120) + #103#11;  |PINTA #0#122;
          |SINO;
              #0#122 = ((#0#110 * (#0#127 / 90)) % #0#120) + #103#11;  |PINTA #0#122;
          |FINSI;
      |SINO;
          #0#122 = ((Rendimiento * #0#127) / #0#126) + #103#11;       |PINTA #0#122;
      |FINSI;
  |FINSI;

  |SI #0#194 ! "S";
      |SI #100#62 = 0;
          #0#123 = ((#0#110 * (#0#128 / 91)) % #0#120) + #103#13;  |PINTA #0#123;
      |SINO;
          #0#123 = ((Rendimiento * #0#128) / #0#126) + #103#13;   |PINTA #0#123;
      |FINSI;
  |FINSI;

  |SI #0#195 ! "S";
      |SI #100#62 = 0;
          #0#124 = ((#0#110 * (#0#129 / 92)) % #0#120) + #103#15;  |PINTA #0#124;
      |SINO;
          #0#124 = ((Rendimiento * #0#129) / #0#126) + #103#15;   |PINTA #0#124;
      |FINSI;
  |FINSI;

  |SI #0#3 = 2000;  |O #0#3 = 2004;  |O #0#3 = 2008;  |O #0#3 = 2012;
   |O #0#3 = 2016;  |O #0#3 = 2020;  |O #0#3 = 2024;  |O #0#3 = 2028;
      TrimIva1 = (#0#111 * #0#132) / (91 * 4);
  |SINO;
      TrimIva1 = (#0#111 * #0#132) / (90 * 4);
  |FINSI;

  TrimIva2 = (#0#111 * #0#133) / (91 * 4);
  TrimIva3 = (#0#111 * #0#134) / (92 * 4);
  TrimIva4 = (#0#111 * #0#135) / (92 * 4);
  TrimIva  = TrimIva1 + TrimIva2 + TrimIva3 + TrimIva4;

  |SI #0#196 ! "S";
      #103#18  = #0#111 - (#103#11 + #103#13 + #103#15 + #103#17);
      #103#0   = #0#111;                      || Cuota Devengada operaciones
      #103#1   = #103#0 % 1;                  || 1 % Cuota Devengada
      #103#3   = #103#1 + #103#2;             || Total Cuota Soportada
      #103#4   = #100#65;                     || Coeficiente Temporada

      || |SI #103#4 = 0;  #103#4 = 1;  |FINSI;  tique 5096_12
      #103#5  = (#103#0 - #103#3);  || Resultado
      |SI #103#4 ! 0;
          #103#5  = #103#5 * #103#4;  || Resultado
      |FINSI;
||esto
      #103#6   = #0#121;                      || Cuota minima
      #103#7   = #103#0 % #103#6;             || Total Cuota Minima
      |SI #103#4 ! 0;
          #103#7   = #103#7 * #103#4;             || Total Cuota Minima
      |FINSI;
      #103#7 = #103#7 + #103#28;

      #103#8   = #103#5;                      || Cuota derivada regiman general
      |SI #103#8 < #103#7;  #103#8 = #103#7;  |FINSI;

      #0#125   = #103#8;
      |PINTA #0#125;
  |FINSI;

  |SI #101#1 = 0;  #101#1 = #100#59;  |FINSI;
  |SI #101#3 = 0;  #101#3 = #100#65;  |FINSI;

  |HAZ RdtoPrevio97;
  #101#14 = #101#0;
  #101#2  = 0;
  |SI #101#1 ! 0;
      #101#2  = #101#0 * #101#1;
      #101#14 = #101#2;
  |FINSI;

  #101#4 = 0;
  |SI #101#3 ! 0;
      #101#4  = #101#14 * #101#3;
      #101#14 = #101#4;
  |FINSI;

  |SI #101#5 ! -0.30;
      |SI #101#14 > #101#16; |Y #101#1 = 0;
          #101#5 = 0.30;
          #101#6 = (#101#14 - #101#16) * #101#5;
          #101#14 = #101#14  + #101#6;
      |SINO;
          #101#5 = 0;
          #101#6 = 0;
      |FINSI;
  |SINO;
     #101#14 = #101#14  + #101#6;
  |FINSI;

  #101#8  = #101#14 + #101#7;
  #101#14 = #101#8;

  #101#12 = 0;
  |SI #101#11 ! 0;
      #101#12 = #101#14 % #101#11;
      #101#14 = #101#14 - #101#12;
  |FINSI;

  #101#10 = 0;
  |SI #101#9 ! 0;
      #101#10 = #101#14 % #101#9;
      #101#14 = #101#14 - #101#10;
  |FINSI;

  #101#14 = #101#14 + #101#13;
  #101#15 = #101#14 > 10;
  |SI #0#3 [ 1999;
      #0#114  = #101#15;  |PINTA #0#114;
  |FINSI;
|FPRC;

|PROCESO Lee2;
  #2#0 = #1CampoElem;
  |LEE 040#2=;
  |SI FSalida ! 0;  |DDEFECTO #2;  |FINSI;

  TipoElemento = "";
  |SI #2#3 = "L";
      |SI #2#2 = "S";  TipoElemento = "L";  |FINSI;
      |ACABA;
  |FINSI;

  |SI #2#3 = "N";
      |SI #2#2 = "S";  TipoElemento = "P";  |FINSI;
      |ACABA;
  |FINSI;

  TipoElemento = "A";

  |SI EURODB ! 0;
      |SI CampoElem = 4;   CampoPtas = 49;  |FINSI;
      |SI CampoElem = 8;   CampoPtas = 50;  |FINSI;
      |SI CampoElem = 12;  CampoPtas = 51;  |FINSI;
      |SI CampoElem = 16;  CampoPtas = 52;  |FINSI;
      |SI CampoElem = 20;  CampoPtas = 53;  |FINSI;
      |SI CampoElem = 24;  CampoPtas = 54;  |FINSI;
      |SI CampoElem = 28;  CampoPtas = 55;  |FINSI;
      |SI CampoElem = 32;  CampoPtas = 56;  |FINSI;
      |SI CampoElem = 36;  CampoPtas = 57;  |FINSI;
  |SINO;
      CampoPtas = CampoElem + 2;
  |FINSI;

  |SI #2#4 = "S";  TipoElemento = "N";  |FINSI;
  |SI #2#4 = "N";
      |SI #100#8 = 0;
          #100#8 = #1CampoPtas;
      |SINO;
          #100#87 = #100#87 + #1CampoPtas;
      |FINSI;
  |FINSI;
|FPRC;

|PROCESO PonTipos;
  |DDEFECTO #102;
  #100#8  = 0;
  #100#87 = 0;
  |ABRE #2;
  CampoElem = 4;   |HAZ Lee2;  #102#0 = TipoElemento;
  CampoElem = 8;   |HAZ Lee2;  #102#1 = TipoElemento;
  CampoElem = 12;  |HAZ Lee2;  #102#2 = TipoElemento;
  CampoElem = 16;  |HAZ Lee2;  #102#3 = TipoElemento;
  CampoElem = 20;  |HAZ Lee2;  #102#4 = TipoElemento;
  CampoElem = 24;  |HAZ Lee2;  #102#5 = TipoElemento;
  CampoElem = 28;  |HAZ Lee2;  #102#6 = TipoElemento;
  CampoElem = 32;  |HAZ Lee2;  #102#7 = TipoElemento;
  CampoElem = 36;  |HAZ Lee2;  #102#8 = TipoElemento;
  |CIERRA #2;

  CampoAsala1 = 0; CampoAsala2 = 0; CampoAsala3 = 0;
  CampoAsala4 = 0; CampoAsala5 = 0; CampoAsala6 = 0;
  CampoAsala7 = 0; CampoAsala8 = 0; CampoAsala9 = 0;

  |SI #102#0 = "A";  CampoAsala1 = 1;  |FINSI;
  |SI #102#1 = "A";  CampoAsala2 = 1;  |FINSI;
  |SI #102#2 = "A";  CampoAsala3 = 1;  |FINSI;
  |SI #102#3 = "A";  CampoAsala4 = 1;  |FINSI;
  |SI #102#4 = "A";  CampoAsala5 = 1;  |FINSI;
  |SI #102#5 = "A";  CampoAsala6 = 1;  |FINSI;
  |SI #102#6 = "A";  CampoAsala7 = 1;  |FINSI;
  |SI #102#7 = "A";  CampoAsala8 = 1;  |FINSI;
  |SI #102#8 = "A";  CampoAsala9 = 1;  |FINSI;

  |SI #102#0 = "A";  CampoAsalar = 0;  |ACABA;    |FINSI;
  |SI #102#1 = "A";  CampoAsalar = 1;  |ACABA;    |FINSI;
  |SI #102#2 = "A";  CampoAsalar = 2;  |ACABA;    |FINSI;
  |SI #102#3 = "A";  CampoAsalar = 3;  |ACABA;    |FINSI;
  |SI #102#4 = "A";  CampoAsalar = 4;  |ACABA;    |FINSI;
  |SI #102#5 = "A";  CampoAsalar = 5;  |ACABA;    |FINSI;
  |SI #102#6 = "A";  CampoAsalar = 6;  |ACABA;    |FINSI;
  |SI #102#7 = "A";  CampoAsalar = 7;  |ACABA;    |FINSI;
  |SI #102#8 = "A";  CampoAsalar = 8;  |ACABA;    |FINSI;
|FPRC;

|PROCESO CargaEpi;  |TIPO 0;
  |SI #0#3 ] 2000;
      |C_M #0#114, 1, "N";
      |C_V #0#114, 1, "N";
      |PINTA 1746, "                                  ";
  |SINO;
      |C_M #0#114, 1, "S";
      |C_V #0#114, 1, "S";
  |FINSI;
  |SI #0#3 = 2012; |O #0#3 ] 2013;
      |C_V #0#217, 1, "S"; |C_M #0#217, 1, "S";
      |C_V #0#218, 1, "S"; |C_M #0#218, 1, "S";
      |C_V #0#219, 1, "S"; |C_M #0#219, 1, "S";
      |C_V #0#220, 1, "S"; |C_M #0#220, 1, "S";
      |PINTA 1745, "ºI.V.A.ÄR.A.Lorca 2012:ÄÄÄÄÄÄÄÄÄÄÄÄ¶";
      |SI #0#3 ] 2013; |PINTA 1763, #0#3; |FINSI;
      |ATRI R; |PINTA 1746, "I.V.A."; |ATRI 0;
      |PINTA 1845, "ºPorcentajes: @_-@_                º";
      |PINTA #0#217;
      |PINTA #0#218;
      |PINTA #0#219;
      |PINTA #0#220;
      |C_P #0#120, 1, 1859; |PINTA #0#120;
      |C_P #0#121, 1, 1862; |PINTA #0#121;
  |FINSI;

  |SI SwVuelta = 0;
      |PDEFECTO #0, 4, 188;
      |PINDA #0#0;
  |FINSI;

  |ABRE #1;
  |SELECT #1#1;
  #1#0  = #0#0;
  #1#1  = #0#1;
  #1#41 = #0#2;
  #1#2  = #0#3;
  |LEE 040#1=;
  |SI FSalida ! 0;  |DDEFECTO #1;  |FINSI;
  |CIERRA #1;

  |HAZ PonTipos;

  Ejercicio = #0#3;

  aAlfa = "01.01." + Ejercicio;  FechaIni = aAlfa;
  aAlfa = "31.12." + Ejercicio;  FechaFin = aAlfa;
  DiasEjer = (FechaFin - FechaIni) + 1;

  #0#4   = #1#3;           || Nombre del Epigrafe
  #0#9   = #1#5;           || Elemento  1
  #0#20  = #1#9;           || Elemento  2
  #0#31  = #1#13;          || Elemento  3
  #0#42  = #1#17;          || Elemento  4
  #0#53  = #1#21;          || Elemento  5
  #0#64  = #1#25;          || Elemento  6
  #0#75  = #1#29;          || Elemento  7
  #0#86  = #1#33;          || Elemento  8
  #0#97  = #1#37;          || Elemento  9
  #0#120 = #1#42;          || Porcentaje de IVA
  #0#121 = #1#48;          || Cuota Minima por operaciones corrientes

  |SI EURODB = 0;
      #0#10  = #1#6;           || Ptas IRPF 1
      #0#15  = #1#7;           || Ptas IVA  1
      #0#21  = #1#10;          || Ptas IRPF 2
      #0#26  = #1#11;          || Ptas IVA  2
      #0#32  = #1#14;          || Ptas IRPF 3
      #0#37  = #1#15;          || Ptas IVA  3
      #0#43  = #1#18;          || Ptas IRPF 4
      #0#48  = #1#19;          || Ptas IVA  4
      #0#54  = #1#22;          || Ptas IRPF 5
      #0#59  = #1#23;          || Ptas IVA  5
      #0#65  = #1#26;          || Ptas IRPF 6
      #0#70  = #1#27;          || Ptas IVA  6
      #0#76  = #1#30;          || Ptas IRPF 7
      #0#81  = #1#31;          || Ptas IVA  7
      #0#87  = #1#34;          || Ptas IRPF 8
      #0#92  = #1#35;          || Ptas IVA  8
      #0#98  = #1#38;          || Ptas IRPF 9
      #0#103 = #1#39;          || Ptas IVA  9
  |SINO;
      #0#10  = #1#49;          || Ptas IRPF 1
      #0#15  = #1#58;          || Ptas IVA  1
      #0#21  = #1#50;          || Ptas IRPF 2
      #0#26  = #1#59;          || Ptas IVA  2
      #0#32  = #1#51;          || Ptas IRPF 3
      #0#37  = #1#60;          || Ptas IVA  3
      #0#43  = #1#52;          || Ptas IRPF 4
      #0#48  = #1#61;          || Ptas IVA  4
      #0#54  = #1#53;          || Ptas IRPF 5
      #0#59  = #1#62;          || Ptas IVA  5
      #0#65  = #1#54;          || Ptas IRPF 6
      #0#70  = #1#63;          || Ptas IVA  6
      #0#76  = #1#55;          || Ptas IRPF 7
      #0#81  = #1#64;          || Ptas IVA  7
      #0#87  = #1#56;          || Ptas IRPF 8
      #0#92  = #1#65;          || Ptas IVA  8
      #0#98  = #1#57;          || Ptas IRPF 9
      #0#103 = #1#66;          || Ptas IVA  9
  |FINSI;

  |SI #0#3 = 2010; |O #0#3 = 2012;
      nEjerAnt = #0#3 - 1;
      |ABRE #1;
      |SELECT #1#1;
      #1#0  = #0#0;
      #1#1  = #0#1;
      #1#41 = #0#2;
      #1#2  = nEjerAnt;
      |LEE 040#1=;
      |SI FSalida ! 0;  |DDEFECTO #1;  |FINSI;
      |CIERRA #1;

      n15_2009  = #1#58;          || Euro IVA 1
      n26_2009  = #1#59;          || Euro IVA 2
      n37_2009  = #1#60;          || Euro IVA 3
      n48_2009  = #1#61;          || Euro IVA 4
      n59_2009  = #1#62;          || Euro IVA 5
      n70_2009  = #1#63;          || Euro IVA 6
      n81_2009  = #1#64;          || Euro IVA 7
      n92_2009  = #1#65;          || Euro IVA 8
      n103_2009 = #1#66;          || Euro IVA 9

      |ABRE #1;
      |SELECT #1#1;
      #1#0  = #0#0;
      #1#1  = #0#1;
      #1#41 = #0#2;
      #1#2  = #0#3;
      |LEE 040#1=;
      |SI FSalida ! 0;  |DDEFECTO #1;  |FINSI;
      |CIERRA #1;
  |FINSI;

  #103#9 = 0;
  |SI EURODB = 0;
      |SI #102#0 = "L";  #103#9 = #1#7;   #0#09 = "";  #0#10 = 0;  #0#15  = 0;  n15_2009  = 0;  |FINSI;
      |SI #102#1 = "L";  #103#9 = #1#11;  #0#20 = "";  #0#21 = 0;  #0#26  = 0;  n26_2009  = 0;  |FINSI;
      |SI #102#2 = "L";  #103#9 = #1#15;  #0#31 = "";  #0#32 = 0;  #0#37  = 0;  n37_2009  = 0;  |FINSI;
      |SI #102#3 = "L";  #103#9 = #1#19;  #0#42 = "";  #0#43 = 0;  #0#48  = 0;  n48_2009  = 0;  |FINSI;
      |SI #102#4 = "L";  #103#9 = #1#23;  #0#53 = "";  #0#54 = 0;  #0#59  = 0;  n59_2009  = 0;  |FINSI;
      |SI #102#5 = "L";  #103#9 = #1#27;  #0#64 = "";  #0#65 = 0;  #0#70  = 0;  n70_2009  = 0;  |FINSI;
      |SI #102#6 = "L";  #103#9 = #1#31;  #0#75 = "";  #0#76 = 0;  #0#81  = 0;  n81_2009  = 0;  |FINSI;
      |SI #102#7 = "L";  #103#9 = #1#35;  #0#86 = "";  #0#87 = 0;  #0#92  = 0;  n92_2009  = 0;  |FINSI;
      |SI #102#8 = "L";  #103#9 = #1#39;  #0#97 = "";  #0#98 = 0;  #0#103 = 0;  n103_2009 = 0;  |FINSI;
  |SINO;
      |SI #102#0 = "L";  #103#9 = #1#58;  #0#09 = "";  #0#10 = 0;  #0#15  = 0;  |FINSI;
      |SI #102#1 = "L";  #103#9 = #1#59;  #0#20 = "";  #0#21 = 0;  #0#26  = 0;  |FINSI;
      |SI #102#2 = "L";  #103#9 = #1#60;  #0#31 = "";  #0#32 = 0;  #0#37  = 0;  |FINSI;
      |SI #102#3 = "L";  #103#9 = #1#61;  #0#42 = "";  #0#43 = 0;  #0#48  = 0;  |FINSI;
      |SI #102#4 = "L";  #103#9 = #1#62;  #0#53 = "";  #0#54 = 0;  #0#59  = 0;  |FINSI;
      |SI #102#5 = "L";  #103#9 = #1#63;  #0#64 = "";  #0#65 = 0;  #0#70  = 0;  |FINSI;
      |SI #102#6 = "L";  #103#9 = #1#64;  #0#75 = "";  #0#76 = 0;  #0#81  = 0;  |FINSI;
      |SI #102#7 = "L";  #103#9 = #1#65;  #0#86 = "";  #0#87 = 0;  #0#92  = 0;  |FINSI;
      |SI #102#8 = "L";  #103#9 = #1#66;  #0#97 = "";  #0#98 = 0;  #0#103 = 0;  |FINSI;
  |FINSI;

  |SI #103#19 = 0;  #103#19 = #103#9;  |FINSI;
  |SI #103#20 = 0;  #103#20 = #103#9;  |FINSI;
  |SI #103#21 = 0;  #103#21 = #103#9;  |FINSI;

  |PINTA #0#4;
  |PINTA #0#120;
  |PINTA #0#121;

  |C_M #0#11, 1, "S";  |C_M #0#13,  1, "S";  |C_M #0#16,  1, "S";  |C_M #0#18,  1, "S";
  |C_M #0#22, 1, "S";  |C_M #0#24,  1, "S";  |C_M #0#27,  1, "S";  |C_M #0#29,  1, "S";
  |C_M #0#33, 1, "S";  |C_M #0#35,  1, "S";  |C_M #0#38,  1, "S";  |C_M #0#40,  1, "S";
  |C_M #0#44, 1, "S";  |C_M #0#46,  1, "S";  |C_M #0#49,  1, "S";  |C_M #0#51,  1, "S";
  |C_M #0#55, 1, "S";  |C_M #0#57,  1, "S";  |C_M #0#60,  1, "S";  |C_M #0#62,  1, "S";
  |C_M #0#66, 1, "S";  |C_M #0#68,  1, "S";  |C_M #0#71,  1, "S";  |C_M #0#73,  1, "S";
  |C_M #0#77, 1, "S";  |C_M #0#79,  1, "S";  |C_M #0#82,  1, "S";  |C_M #0#84,  1, "S";
  |C_M #0#88, 1, "S";  |C_M #0#90,  1, "S";  |C_M #0#93,  1, "S";  |C_M #0#95,  1, "S";
  |C_M #0#99, 1, "S";  |C_M #0#101, 1, "S";  |C_M #0#104, 1, "S";  |C_M #0#106, 1, "S";

  |SI #0#10  = 0;  |C_M #0#11,  1, "N";  |C_M #0#13,  1, "N";  |FINSI;
  |SI #0#21  = 0;  |C_M #0#22,  1, "N";  |C_M #0#24,  1, "N";  |FINSI;
  |SI #0#32  = 0;  |C_M #0#33,  1, "N";  |C_M #0#35,  1, "N";  |FINSI;
  |SI #0#43  = 0;  |C_M #0#44,  1, "N";  |C_M #0#46,  1, "N";  |FINSI;
  |SI #0#54  = 0;  |C_M #0#55,  1, "N";  |C_M #0#57,  1, "N";  |FINSI;
  |SI #0#65  = 0;  |C_M #0#66,  1, "N";  |C_M #0#68,  1, "N";  |FINSI;
  |SI #0#76  = 0;  |C_M #0#77,  1, "N";  |C_M #0#79,  1, "N";  |FINSI;
  |SI #0#87  = 0;  |C_M #0#88,  1, "N";  |C_M #0#90,  1, "N";  |FINSI;
  |SI #0#98  = 0;  |C_M #0#99,  1, "N";  |C_M #0#101, 1, "N";  |FINSI;

  |SI #0#15  = 0;  |C_M #0#16,  1, "N";  |C_M #0#18,  1, "N";  |FINSI;
  |SI #0#26  = 0;  |C_M #0#27,  1, "N";  |C_M #0#29,  1, "N";  |FINSI;
  |SI #0#37  = 0;  |C_M #0#38,  1, "N";  |C_M #0#40,  1, "N";  |FINSI;
  |SI #0#48  = 0;  |C_M #0#49,  1, "N";  |C_M #0#51,  1, "N";  |FINSI;
  |SI #0#59  = 0;  |C_M #0#60,  1, "N";  |C_M #0#62,  1, "N";  |FINSI;
  |SI #0#70  = 0;  |C_M #0#71,  1, "N";  |C_M #0#73,  1, "N";  |FINSI;
  |SI #0#81  = 0;  |C_M #0#82,  1, "N";  |C_M #0#84,  1, "N";  |FINSI;
  |SI #0#92  = 0;  |C_M #0#93,  1, "N";  |C_M #0#95,  1, "N";  |FINSI;
  |SI #0#103 = 0;  |C_M #0#104, 1, "N";  |C_M #0#106, 1, "N";  |FINSI;

  |SI Programa = 0;
       |SI #0#3 = 2004;  |O #0#3 = 2008;  |O #0#3 = 2012; |O #0#3 = 2016;
            |O #0#3 = 2020; |O #0#3 = 2024;
           #0#127 = 91;
           #0#132 = 91;
           #0#126 = 366;
           #0#131 = 366;
           |PINTA #0#126;
           |PINTA #0#131;
       |FINSI;
   |FINSI;
|FPRC;

|PROCESO MensaAsala;
  |SI #0#197 = "S";
      |MENSA "     <F12> Recoge Datos P.Asalariada. <F2> Pantalla Rendimiento. <F3> Pantalla Total ";
  |SINO;
      |MENSA "     <F12> Recoge Datos P.Asalariada. <F2> Pantalla Rendimiento.";
  |FINSI;
|FPRC;

|PROCESO MensaNAsala;
  |SI #0#197 = "S";
      |MENSA "     <F12> Recoge Datos P.N/Asalariada.<F2> Pantalla Rendimiento.<F3> Pantalla Total ";
  |SINO;
      |MENSA "     <F12> Recoge datos P.N/Asalariada.<F2> Pantalla Resultado Rendimiento Previo.";
  |FINSI;
|FPRC;

|PROCESO PintaElemento;  |TIPO 7;
  || Pinta los mensajes  de las teclas de funciones

  SwPregunta = 0;

  |SI #0#198 = "S";
      |MENSA "     <F12> Desglose Elementos.  <F2> Pantalla Resultado Rendimiento Previo.";
  |SINO;
      |MENSA "     <F2> Pantalla Resultado Rendimiento Previo.";
  |FINSI;

  |C_M #0Campo, 1, "S";
  |SI Campo = 11; |O Campo = 13; |O Campo = 16; |O Campo = 18;
    |SI #102#0 = "A"; |Y CampoAsalar [ 1;
        |SI Campo = 11; |O Campo = 16;  SwPregunta = 1;  |FINSI;
        |SI Campo = 13; |O Campo = 18;  SwPregunta = 2;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 11; |O Campo = 13; |O Campo = 16; |O Campo = 18;
    |SI #102#0 = "N";
        |SI Campo = 11; |O Campo = 16;  SwPregunta = 3;  |FINSI;
        |SI Campo = 13; |O Campo = 18;  SwPregunta = 4;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaNAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 11; |O Campo = 13; |O Campo = 16; |O Campo = 18;
      |SI #102#0 ! "N"; |Y  #102#0 ! "A";
          |SI #0#198 = "S";
              |C_M #0Campo, 1, "N";
          |FINSI;
     |FINSI;
  |FINSI;


  |SI Campo = 22; |O Campo = 24; |O Campo = 27; |O Campo = 29;
    |SI #102#1 = "A"; |Y  CampoAsalar [ 1;
        |SI Campo = 22; |O Campo = 27;  SwPregunta = 1;  |FINSI;
        |SI Campo = 24; |O Campo = 29;  SwPregunta = 2;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 22; |O Campo = 24; |O Campo = 27; |O Campo = 29;
    |SI #102#1 = "N";
        |SI Campo = 22; |O Campo = 27;  SwPregunta = 3;  |FINSI;
        |SI Campo = 24; |O Campo = 29;  SwPregunta = 4;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaNAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 22; |O Campo = 24; |O Campo = 27; |O Campo = 29;
      |SI #102#1 ! "N"; |Y  #102#1 ! "A";
          |SI #0#198 = "S";
              |C_M #0Campo, 1, "N";
          |FINSI;
     |FINSI;
  |FINSI;

  |SI Campo = 33; |O Campo = 35; |O Campo = 38; |O Campo = 40;
    |SI #102#2 = "A"; |Y CampoAsalar = 2;
        |SI Campo = 33; |O Campo = 38;  SwPregunta = 1;  |FINSI;
        |SI Campo = 35; |O Campo = 40;  SwPregunta = 2;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 33; |O Campo = 35; |O Campo = 38; |O Campo = 40;
    |SI #102#2 = "N";
        |SI Campo = 33; |O Campo = 38;  SwPregunta = 3;  |FINSI;
        |SI Campo = 35; |O Campo = 40;  SwPregunta = 4;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaNAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 33; |O Campo = 35; |O Campo = 38; |O Campo = 40;
      |SI #102#2 ! "N"; |Y  #102#2 ! "A";
          |SI #0#198 = "S";
              |C_M #0Campo, 1, "N";
          |FINSI;
     |FINSI;
  |FINSI;

  |SI Campo = 44; |O Campo = 46; |O Campo = 49; |O Campo = 51;
    |SI #102#3 = "A"; |Y CampoAsalar = 3;
        |SI Campo = 44; |O Campo = 49;  SwPregunta = 1;  |FINSI;
        |SI Campo = 46; |O Campo = 51;  SwPregunta = 2;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 44; |O Campo = 46; |O Campo = 49; |O Campo = 51;
    |SI #102#3 = "N";
        |SI Campo = 44; |O Campo = 49;  SwPregunta = 3;  |FINSI;
        |SI Campo = 46; |O Campo = 51;  SwPregunta = 4;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaNAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 44; |O Campo = 46; |O Campo = 49; |O Campo = 51;
      |SI #102#3 ! "N"; |Y  #102#3 ! "A";
          |SI #0#198 = "S";
              |C_M #0Campo, 1, "N";
          |FINSI;
     |FINSI;
  |FINSI;

  |SI Campo = 55; |O Campo = 57; |O Campo = 60; |O Campo = 62;
    |SI #102#4 = "A"; |Y CampoAsalar = 4;
        |SI Campo = 55; |O Campo = 60;  SwPregunta = 1;  |FINSI;
        |SI Campo = 57; |O Campo = 62;  SwPregunta = 2;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 55; |O Campo = 57; |O Campo = 60; |O Campo = 62;
    |SI #102#4 = "N";
        |SI Campo = 55; |O Campo = 60;  SwPregunta = 3;  |FINSI;
        |SI Campo = 57; |O Campo = 62;  SwPregunta = 4;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaNAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 55; |O Campo = 57; |O Campo = 60; |O Campo = 62;
      |SI #102#4 ! "N"; |Y  #102#4 ! "A";
          |SI #0#198 = "S";
              |C_M #0Campo, 1, "N";
          |FINSI;
     |FINSI;
  |FINSI;

  |SI Campo = 66; |O Campo = 68; |O Campo = 71; |O Campo = 73;
    |SI #102#5 = "A"; |Y CampoAsalar = 5;
        |SI Campo = 66; |O Campo = 71;  SwPregunta = 1;  |FINSI;
        |SI Campo = 68; |O Campo = 73;  SwPregunta = 2;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 66; |O Campo = 68; |O Campo = 71; |O Campo = 73;
    |SI #102#5 = "N";
        |SI Campo = 66; |O Campo = 71;  SwPregunta = 3;  |FINSI;
        |SI Campo = 68; |O Campo = 73;  SwPregunta = 4;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaNAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 66; |O Campo = 68; |O Campo = 71; |O Campo = 73;
      |SI #102#5 ! "N"; |Y  #102#5 ! "A";
          |SI #0#198 = "S";
              |C_M #0Campo, 1, "N";
          |FINSI;
     |FINSI;
  |FINSI;

  |SI Campo = 77; |O Campo = 79; |O Campo = 82; |O Campo = 84;
    |SI #102#6 = "A"; |Y CampoAsalar = 6;
        |SI Campo = 77; |O Campo = 82;  SwPregunta = 1;  |FINSI;
        |SI Campo = 79; |O Campo = 84;  SwPregunta = 2;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 77; |O Campo = 79; |O Campo = 82; |O Campo = 84;
    |SI #102#6 = "N";
        |SI Campo = 77; |O Campo = 82;  SwPregunta = 3;  |FINSI;
        |SI Campo = 79; |O Campo = 84;  SwPregunta = 4;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaNAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 77; |O Campo = 79; |O Campo = 82; |O Campo = 84;
      |SI #102#6 ! "N"; |Y  #102#6 ! "A";
          |SI #0#198 = "S";
              |C_M #0Campo, 1, "N";
          |FINSI;
     |FINSI;
  |FINSI;

  |SI Campo = 88; |O Campo = 90; |O Campo = 93; |O Campo = 95;
    |SI #102#7 = "A"; |Y CampoAsalar = 7;
        |SI Campo = 88; |O Campo = 93;  SwPregunta = 1;  |FINSI;
        |SI Campo = 90; |O Campo = 95;  SwPregunta = 2;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 88; |O Campo = 90; |O Campo = 93; |O Campo = 95;
    |SI #102#7 = "N";
        |SI Campo = 88; |O Campo = 93;  SwPregunta = 3;  |FINSI;
        |SI Campo = 90; |O Campo = 95;  SwPregunta = 4;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaNAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 88; |O Campo = 90; |O Campo = 93; |O Campo = 95;
      |SI #102#7 ! "N"; |Y  #102#7 ! "A";
          |SI #0#198 = "S";
              |C_M #0Campo, 1, "N";
          |FINSI;
     |FINSI;
  |FINSI;

  |SI Campo = 99; |O Campo = 101; |O Campo = 104; |O Campo = 106;
    |SI #102#8 = "A"; |Y CampoAsalar = 8;
        |SI Campo = 99;  |O Campo = 104;  SwPregunta = 1;  |FINSI;
        |SI Campo = 101; |O Campo = 106;  SwPregunta = 2;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 99; |O Campo = 101; |O Campo = 104; |O Campo = 106;
    |SI #102#8 = "N";
        |SI Campo = 99;  |O Campo = 104;  SwPregunta = 3;  |FINSI;
        |SI Campo = 101; |O Campo = 106;  SwPregunta = 4;  |FINSI;

        |SI #0#197 = "S";
            |C_M #0Campo, 1, "N";
        |SINO;
            |HAZ MensaNAsala;
        |FINSI;
    |FINSI;
  |FINSI;

  |SI Campo = 99; |O Campo = 101; |O Campo = 104; |O Campo = 106;
      |SI #102#8 ! "N"; |Y  #102#8 ! "A";
          |SI #0#198 = "S";
              |C_M #0Campo, 1, "N";
          |FINSI;
     |FINSI;
  |FINSI;

  CampoN1 = 0;

  |SI Campo = 11;   Dias = 126;  CampoN1 = 11;  CampoTipo = "R";  |FINSI;
  |SI Campo = 16;   Dias = 126;                 CampoTipo = "I";  |FINSI;
  |SI Campo = 22;   Dias = 126;  CampoN1 = 22;  CampoTipo = "R";  |FINSI;
  |SI Campo = 27;   Dias = 126;                 CampoTipo = "I";  |FINSI;
  |SI Campo = 33;   Dias = 126;  CampoN1 = 33;  CampoTipo = "R";  |FINSI;
  |SI Campo = 38;   Dias = 126;                 CampoTipo = "I";  |FINSI;
  |SI Campo = 44;   Dias = 126;  CampoN1 = 44;  CampoTipo = "R";  |FINSI;
  |SI Campo = 49;   Dias = 126;                 CampoTipo = "I";  |FINSI;
  |SI Campo = 55;   Dias = 126;  CampoN1 = 55;  CampoTipo = "R";  |FINSI;
  |SI Campo = 60;   Dias = 126;                 CampoTipo = "I";  |FINSI;
  |SI Campo = 66;   Dias = 126;  CampoN1 = 66;  CampoTipo = "R";  |FINSI;
  |SI Campo = 71;   Dias = 126;                 CampoTipo = "I";  |FINSI;
  |SI Campo = 77;   Dias = 126;  CampoN1 = 77;  CampoTipo = "R";  |FINSI;
  |SI Campo = 82;   Dias = 126;                 CampoTipo = "I";  |FINSI;
  |SI Campo = 88;   Dias = 126;  CampoN1 = 88;  CampoTipo = "R";  |FINSI;
  |SI Campo = 93;   Dias = 126;                 CampoTipo = "I";  |FINSI;
  |SI Campo = 99;   Dias = 126;  CampoN1 = 99;  CampoTipo = "R";  |FINSI;
  |SI Campo = 104;  Dias = 126;                 CampoTipo = "I";  |FINSI;

  |SI Campo = 13;   Dias = 131;  CampoN1 = 13;  CampoTipo = "R";  |FINSI;
  |SI Campo = 18;   Dias = 131;                 CampoTipo = "I";  |FINSI;
  |SI Campo = 24;   Dias = 131;  CampoN1 = 24;  CampoTipo = "R";  |FINSI;
  |SI Campo = 29;   Dias = 131;                 CampoTipo = "I";  |FINSI;
  |SI Campo = 35;   Dias = 131;  CampoN1 = 35;  CampoTipo = "R";  |FINSI;
  |SI Campo = 40;   Dias = 131;                 CampoTipo = "I";  |FINSI;
  |SI Campo = 46;   Dias = 131;  CampoN1 = 46;  CampoTipo = "R";  |FINSI;
  |SI Campo = 51;   Dias = 131;                 CampoTipo = "I";  |FINSI;
  |SI Campo = 57;   Dias = 131;  CampoN1 = 57;  CampoTipo = "R";  |FINSI;
  |SI Campo = 62;   Dias = 131;                 CampoTipo = "I";  |FINSI;
  |SI Campo = 68;   Dias = 131;  CampoN1 = 68;  CampoTipo = "R";  |FINSI;
  |SI Campo = 73;   Dias = 131;                 CampoTipo = "I";  |FINSI;
  |SI Campo = 79;   Dias = 131;  CampoN1 = 79;  CampoTipo = "R";  |FINSI;
  |SI Campo = 84;   Dias = 131;                 CampoTipo = "I";  |FINSI;
  |SI Campo = 90;   Dias = 131;  CampoN1 = 90;  CampoTipo = "R";  |FINSI;
  |SI Campo = 95;   Dias = 131;                 CampoTipo = "I";  |FINSI;
  |SI Campo = 101;  Dias = 131;  CampoN1 = 101; CampoTipo = "R";  |FINSI;
  |SI Campo = 106;  Dias = 131;                 CampoTipo = "I";  |FINSI;


  || Pinta en la parte superior el elemento y las pesetas

  |SI Campo = 11;  |O Campo = 13;
      CFijo = 9;  CControl = 0;
      #0#6  = #0#9;   |PINTA #0#6;           || Pinta Elemento 1
      #0#7  = #0#10;  |PINTA #0#7;           || Pinta Ptas IRPF Elemento 1
  |FINSI;

  aAlfa = #0#1 % 103;

  |SI Campo = 16;  |O Campo = 18;
      CFijo = 9;  CControl = 0;
      #0#6  = #0#9;   |PINTA #0#6;           || Pinta Elemento 1
      #0#7  = #0#15;  |PINTA #0#7;           || Pinta Ptas IVA Elemento 1

      |SI #0#3 = 2010; |O #0#3 = 2012;
          |SI Dias ! 131;
              #0#7  = n15_2009;  |PINTA #0#7;
          |FINSI;
      |FINSI;

      |SI #0#3 = 2010; |O #0#3 = 2012;
          |SI Dias = 131;  |Y #0#135 = 0;
              nSw = 0;
              |SI #0#3 = 2010;
                  nSw = 1;
                  |SI aAlfa ! "504"; |Y aAlfa ! "505";
                      nSw = 0;
                  |FINSI;
              |FINSI;
              |SI nSw = 0;
                  #0#7  = n15_2009;  |PINTA #0#7;
              |FINSI;
          |FINSI;
      |FINSI;
  |FINSI;

  |SI Campo = 22;  |O Campo = 24;
      CFijo = 20;  CControl = 1;
      #0#6  = #0#20;  |PINTA #0#6;           || Pinta Elemento 2
      #0#7  = #0#21;  |PINTA #0#7;           || Pinta Ptas IRPF Elemento 2
  |FINSI;

  |SI Campo = 27;  |O Campo = 29;
      CFijo = 20;  CControl = 1;
      #0#6  = #0#20;  |PINTA #0#6;           || Pinta Elemento 2
      #0#7  = #0#26;  |PINTA #0#7;           || Pinta Ptas IVA Elemento 2

      |SI #0#3 = 2010; |O #0#3 = 2012;
          |SI Dias ! 131;
              #0#7  = n26_2009;  |PINTA #0#7;
          |FINSI;
      |FINSI;

      |SI #0#3 = 2010; |O #0#3 = 2012;
          |SI Dias = 131;  |Y #0#135 = 0;
              nSw = 0;
              |SI #0#3 = 2010;
                  nSw = 1;
                  |SI aAlfa ! "504"; |Y aAlfa ! "505";
                      nSw = 0;
                  |FINSI;
              |FINSI;
              |SI nSw = 0;
                  #0#7  = n26_2009;  |PINTA #0#7;
              |FINSI;
           |FINSI;
      |FINSI;
  |FINSI;

  |SI Campo = 33;  |O Campo = 35;
      CFijo = 31;  CControl = 2;
      #0#6  = #0#31;  |PINTA #0#6;           || Pinta Elemento 3
      #0#7  = #0#32;  |PINTA #0#7;           || Pinta Ptas IRPF Elemento 3
  |FINSI;

  |SI Campo = 38;  |O Campo = 40;
      CFijo = 31;  CControl = 2;
      #0#6  = #0#31;  |PINTA #0#6;           || Pinta Elemento 3
      #0#7  = #0#37;  |PINTA #0#7;           || Pinta Ptas IVA Elemento 3

      |SI #0#3 = 2010; |O #0#3 = 2012;
          |SI Dias ! 131;
              #0#7  = n37_2009;  |PINTA #0#7;
          |FINSI;
      |FINSI;

      |SI #0#3 = 2010; |O #0#3 = 2012;
          |SI Dias = 131;  |Y #0#135 = 0;
              nSw = 0;
              |SI #0#3 = 2010;
                  nSw = 1;
                  |SI aAlfa ! "504"; |Y aAlfa ! "505";
                      nSw = 0;
                  |FINSI;
              |FINSI;
              |SI nSw = 0;
                  #0#7  = n37_2009;  |PINTA #0#7;
              |FINSI;
          |FINSI;
      |FINSI;
  |FINSI;

  |SI Campo = 44;  |O Campo = 46;
      CFijo = 42; CControl = 3;
      #0#6  = #0#42;  |PINTA #0#6;           || Pinta Elemento 4
      #0#7  = #0#43;  |PINTA #0#7;           || Pinta Ptas IRPF Elemento 4
  |FINSI;

  |SI Campo = 49;  |O Campo = 51;
      CFijo = 42;  CControl = 3;
      #0#6  = #0#42;  |PINTA #0#6;           || Pinta Elemento 4
      #0#7  = #0#48;  |PINTA #0#7;           || Pinta Ptas IVA Elemento 4

      |SI #0#3 = 2010; |O #0#3 = 2012;
          |SI Dias ! 131;
              #0#7  = n48_2009;  |PINTA #0#7;
          |FINSI;
      |FINSI;

      |SI #0#3 = 2010;  |O #0#3 = 2012;
          |SI Dias = 131;  |Y #0#135 = 0;
              nSw = 0;
              |SI #0#3 = 2010;
                  nSw = 1;
                  |SI aAlfa ! "504"; |Y aAlfa ! "505";
                      nSw = 0;
                  |FINSI;
              |FINSI;
              |SI nSw = 0;
                  #0#7  = n48_2009;  |PINTA #0#7;
               |FINSI;
          |FINSI;
      |FINSI;
  |FINSI;

  |SI Campo = 55;  |O Campo = 57;
      CFijo = 53;  CControl = 4;
      #0#6  = #0#53;  |PINTA #0#6;           || Pinta Elemento 5
      #0#7  = #0#54;  |PINTA #0#7;           || Pinta Ptas IRPF Elemento 5
  |FINSI;

  |SI Campo = 60;  |O Campo = 62;
      CFijo = 53;  CControl = 4;
      #0#6  = #0#53;  |PINTA #0#6;           || Pinta Elemento 5
      #0#7  = #0#59;  |PINTA #0#7;           || Pinta Ptas IVA Elemento 5

      |SI #0#3 = 2010;  |O #0#3 = 2012;
          |SI Dias ! 131;
              #0#7  = n59_2009;  |PINTA #0#7;
          |FINSI;
      |FINSI;

      |SI #0#3 = 2010;  |O #0#3 = 2012;
          |SI Dias = 131;  |Y #0#135 = 0;
              nSw = 0;
              |SI #0#3 = 2010;
                   nSw = 1;
                   |SI aAlfa ! "504"; |Y aAlfa ! "505";
                       nSw = 0;
                   |FINSI;
              |FINSI;
              |SI nSw = 0;
                  #0#7  = n59_2009;  |PINTA #0#7;
              |FINSI;
          |FINSI;
      |FINSI;
  |FINSI;

  |SI Campo = 66;  |O Campo = 68;
      CFijo = 64;  CControl = 5;
      #0#6  = #0#64;  |PINTA #0#6;           || Pinta Elemento 6
      #0#7  = #0#65;  |PINTA #0#7;           || Pinta Ptas IRPF Elemento 6
  |FINSI;

  |SI Campo = 71;  |O Campo = 73;
      CFijo = 64;  CControl = 5;
      #0#6  = #0#64;  |PINTA #0#6;           || Pinta Elemento 6
      #0#7  = #0#70;  |PINTA #0#7;           || Pinta Ptas IVA Elemento 6

      |SI #0#3 = 2010;  |O #0#3 = 2012;
          |SI Dias ! 131;
              #0#7  = n70_2009;  |PINTA #0#7;
          |FINSI;
      |FINSI;

      |SI #0#3 = 2010;  |O #0#3 = 2012;
          |SI Dias = 131;  |Y #0#135 = 0;
              nSw = 0;
              |SI #0#3 = 2010;
                  nSw = 1;
                  |SI aAlfa ! "504"; |Y aAlfa ! "505";
                      nSw = 0;
                  |FINSI;
              |FINSI;
              |SI nSw = 0;
                  #0#7  = n70_2009;  |PINTA #0#7;
              |FINSI;
          |FINSI;
      |FINSI;
  |FINSI;

  |SI Campo = 77;  |O Campo = 79;
      CFijo = 75;  CControl = 6;
      #0#6  = #0#75;  |PINTA #0#6;           || Pinta Elemento 7
      #0#7  = #0#76;  |PINTA #0#7;           || Pinta Ptas IRPF Elemento 7
  |FINSI;

  |SI Campo = 82;  |O Campo = 84;
      CFijo = 75;  CControl = 6;
      #0#6  = #0#75;  |PINTA #0#6;           || Pinta Elemento 7
      #0#7  = #0#81;  |PINTA #0#7;           || Pinta Ptas IVA Elemento 7

      |SI #0#3 = 2010;  |O #0#3 = 2012;
          |SI Dias ! 131;
              #0#7  = n81_2009;  |PINTA #0#7;
          |FINSI;
      |FINSI;

      |SI #0#3 = 2010;  |O #0#3 = 2012;
          |SI Dias = 131;  |Y #0#135 = 0;
              nSw = 0;
              |SI #0#3 = 2010;
                  nSw = 1;
                  |SI aAlfa ! "504"; |Y aAlfa ! "505";
                      nSw = 0;
                  |FINSI;
              |FINSI;
              |SI nSw = 0;
                  #0#7  = n81_2009;  |PINTA #0#7;
              |FINSI;
          |FINSI;
      |FINSI;
  |FINSI;

  |SI Campo = 88;  |O Campo = 90;
      CFijo = 86;  CControl = 7;
      #0#6  = #0#86;  |PINTA #0#6;           || Pinta Elemento 8
      #0#7  = #0#87;  |PINTA #0#7;           || Pinta Ptas IRPF Elemento 8
  |FINSI;

  |SI Campo = 93;  |O Campo = 95;
      CFijo = 86;  CControl = 7;
      #0#6  = #0#86;  |PINTA #0#6;           || Pinta Elemento 8
      #0#7  = #0#92;  |PINTA #0#7;           || Pinta Ptas IVA Elemento 8

      |SI #0#3 = 2010;  |O #0#3 = 2012;
          |SI Dias ! 131;
              #0#7  = n92_2009;  |PINTA #0#7;
          |FINSI;
      |FINSI;

      |SI #0#3 = 2010;  |O #0#3 = 2012;
          |SI Dias = 131;  |Y #0#135 = 0;
              nSw = 0;
              |SI #0#3 = 2010;
                  nSw = 1;
                  |SI aAlfa ! "504"; |Y aAlfa ! "505";
                      nSw = 0;
                  |FINSI;
              |FINSI;
              |SI nSw = 0;
                  #0#7  = n92_2009;  |PINTA #0#7;
              |FINSI;
          |FINSI;
      |FINSI;
  |FINSI;

  |SI Campo = 99;  |O Campo = 101;
      CFijo = 97;  CControl = 8;
      #0#6  = #0#97;  |PINTA #0#6;           || Pinta Elemento 9
      #0#7  = #0#98;  |PINTA #0#7;           || Pinta Ptas IRPF Elemento 9
  |FINSI;

  |SI Campo = 104;  |O Campo = 106;
      CFijo = 97;  CControl = 8;
      #0#6  = #0#97;  |PINTA #0#6;           || Pinta Elemento 9
      #0#7  = #0#103; |PINTA #0#7;           || Pinta Ptas IVA Elemento 9

      |SI #0#3 = 2010;  |O #0#3 = 2012;
          |SI Dias ! 131;
              #0#7  = n103_2009;  |PINTA #0#7;
          |FINSI;
      |FINSI;

      |SI #0#3 = 2010;  |O #0#3 = 2012;
          |SI Dias = 131;  |Y #0#135 = 0;
              nSw = 0;
              |SI #0#3 = 2010;
                  nSw = 1;
                  |SI aAlfa ! "504"; |Y aAlfa ! "505";
                      nSw = 0;
                  |FINSI;
              |FINSI;
              |SI nSw = 0;
                  #0#7  = n103_2009;  |PINTA #0#7;
              |FINSI;
          |FINSI;
      |FINSI;
  |FINSI;

  |SI #0#7 = 0;
      |C_M #0Campo, 1, "N";
  |FINSI;

  |PULSATECLA;
  Campos1 = Campo + 1;  #0#8 = #Campos1;      || Pinta el Importe.
  |PINTA #0#8;
|FPRC;

|| PINTA LA PANTALLA DEL DESGLOSE DEL PERSONAL ASALARIADO PROVISIONAL

|PROCESO PersAsalaPL1;
  |PUSHV 0501 2380;

  |D_CUADRO 1041, 2380;
  |BLANCO 1142 2279;

  |SI #0#3 ] 2000; |Y #0#3 [ 2010;
      aAlfa = "N§.Menores 19 a¤os/Disca.33% ..:      ";
  |SINO;
      aAlfa = "N§.Menores 19 a¤os ............:      ";
  |FINSI;
  |PINTA 1142, aAlfa;
  |SI #0#3 > 2010;
      |PINTA 1242, "Discapacidas > 33% ............:      ";
      |PINTA 1342, "Contratos de Aprendices .......:      ";
      |PINTA 1442, "N§.pers.en formaci¢n acadmica :      ";
      |PINTA 1542, "Resto .........................:      ";
  |SINO;
      |PINTA 1242, "Contratos de Aprendices .......:      ";
      |PINTA 1342, "N§.pers.en formaci¢n acadmica :      ";
      |PINTA 1442, "Resto .........................:      ";
      |PINTA 1542, "                                      ";
  |FINSI;

  |PINTA 1642, "                          ------------";
  |PINTA 1742, "Total .................:              ";

  |SI CampoTipo = "R";
      |SI #0#197 = "N";
          |C_M #0#148, 1,   "S";  |C_M #0#149, 1, "S";
          |C_M #0#151, 1,   "S";  |C_M #0#150, 1, "S";
          |SI #0#3 ] 2011;
              |C_M #0#205, 1, "S";
          |FINSI;
      |FINSI;

      |C_V #0#148, 1,   "S";  |C_V #0#149, 1, "S";
      |C_V #0#151, 1,   "S";  |C_V #0#150, 1, "S";
      |C_P #0#148, 1, 1175;
      |SI #0#3 < 2011;
          |C_P #0#150, 1, 1275;
          |C_P #0#149, 1, 1375;
          |C_P #0#151, 1, 1475;
      |SINO;
          |C_V #0#205, 1, "S";
          |C_P #0#205, 1, 1275;
          |C_P #0#150, 1, 1375;
          |C_P #0#149, 1, 1475;
          |C_P #0#151, 1, 1575;
      |FINSI;

      |C_P #0CampoTrab, 0, Posi;
      |C_P #0CampoTrab, 1, 1770;

      |PINTA #0#148;  |PINTA #0#149;  |PINTA #0#150;  |PINTA #0CampoTrab;
      |PINTA #0#151;  |PINTA #0#205;

      |ET Campo148;  |ENCAMPO #148#0;
                 |SI FSalida = 1;  |VETE Abajo1;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo1;   |FINSI;
                 |SI FSalida = 2;  |VETE Campo148; |FINSI;

      |ET Campo205;  |ENCAMPO #205#0;
                 |SI FSalida = 1;  |VETE Abajo1;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo1;   |FINSI;
                 |SI FSalida = 2;  |VETE Campo148; |FINSI;

      |ET Campo150;  |ENCAMPO #150#0;
                 |SI FSalida = 1;  |VETE Abajo1;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo1;   |FINSI;
                 |SI FSalida = 2;
                     |SI #0#3 ] 2011;
                         |VETE Campo205;
                     |SINO;
                         |VETE Campo148;
                     |FINSI;
                 |FINSI;

      |ET Campo149;  |ENCAMPO #149#0;
                 |SI FSalida = 1;  |VETE Abajo1;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo1;   |FINSI;
                 |SI FSalida = 2;  |VETE Campo150; |FINSI;

      |ET Campo151;   |ENCAMPO #151#0;
                 |SI FSalida = 1;  |VETE Abajo1;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo1;   |FINSI;
                 |SI FSalida = 2;  |VETE Campo149; |FINSI;

      |ET Abajo1;

                 |C_M #0#148, 1,   "N";  |C_M #0#149, 1, "N";
                 |C_M #0#150, 1,   "N";  |C_M #0#151, 1, "N";
                 |C_M #0#205, 1,   "N";
                 |C_V #0#148, 1,   "N";  |C_V #0#149, 1, "N";
                 |C_V #0#150, 1,   "N";  |C_V #0#150, 1, "N";
                 |C_V #0#205, 1,   "N";
  |SINO;
      |SI #0#197 = "N";
          |C_M #0#152, 1,   "S";  |C_M #0#153, 1, "S";
          |C_M #0#155, 1,   "S";  |C_M #0#154, 1, "S";
          |C_M #0#206, 1,   "S";
      |FINSI;

      |C_V #0#152, 1,   "S";  |C_V #0#153, 1, "S";
      |C_V #0#155, 1,   "S";  |C_V #0#154, 1, "S";

      |C_P #0#152, 1,  1175;
      |SI #0#3 < 2011;
          |C_P #0#154, 1, 1275;
          |C_P #0#153, 1, 1375;
          |C_P #0#155, 1, 1475;
      |SINO;
          |C_V #0#206, 1,  "S";
          |C_P #0#206, 1, 1275;
          |C_P #0#154, 1, 1375;
          |C_P #0#153, 1, 1475;
          |C_P #0#155, 1, 1575;
      |FINSI;
      |C_P #0CampoTrab, 0, Posi;
      |C_P #0CampoTrab, 1, 1770;

      |PINTA #0#152;  |PINTA #0#153;  |PINTA #0#154;  |PINTA #0CampoTrab;
      |PINTA #0#155;  |PINTA #0#206;

      |ET Campo152;  |ENCAMPO #152#0;
                 |SI FSalida = 1;  |VETE Abajo2;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo2;   |FINSI;
                 |SI FSalida = 2;  |VETE Campo152; |FINSI;

      |ET Campo206;  |ENCAMPO #206#0;
                 |SI FSalida = 1;  |VETE Abajo2;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo2;   |FINSI;
                 |SI FSalida = 2;  |VETE Campo152; |FINSI;

      |ET Campo154;  |ENCAMPO #154#0;
                 |SI FSalida = 1;  |VETE Abajo2;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo2;   |FINSI;
                 |SI FSalida = 2;
                     |SI #0#3 < 2011;
                         |VETE Campo152;
                     |SINO;
                         |VETE Campo206;
                     |FINSI;
                 |FINSI;

      |ET Campo153;  |ENCAMPO #153#0;
                 |SI FSalida = 1;  |VETE Abajo2;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo2;   |FINSI;
                 |SI FSalida = 2;  |VETE Campo154; |FINSI;

      |ET Campo155;   |ENCAMPO #155#0;
                 |SI FSalida = 1;  |VETE Abajo2;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo2;   |FINSI;
                 |SI FSalida = 2;  |VETE Campo153; |FINSI;

      |ET Abajo2;

            |C_M #0#152, 1,   "N";  |C_M #0#153, 1, "N";
            |C_M #0#154, 1,   "N";  |C_M #0#155, 1, "N";
            |C_M #0#206, 1,   "N";
            |C_V #0#152, 1,   "N";  |C_V #0#153, 1, "N";
            |C_V #0#154, 1,   "N";  |C_V #0#155, 1, "N";
            |C_V #0#206, 1,   "N";
  |FINSI;

  |SI #0#197 = "S";  |PAUSA;  |FINSI;

  |C_P #0CampoTrab, 1, Posi;
  |POPV;

  |SI CampoTipo = "R";
      #0CampoTrab = (#0#148 * 0.60) + (#0#150 * 0.60) + (#0#149 * 0.30) + #0#151 + (#0#205 * 0.40);
  |SINO;
      |SI #0#3 [ 1999;
          #0CampoTrab = (#0#152 * 0.60) + #0#153 + #0#154 + #0#155;
      |SINO;
          #0CampoTrab = (#0#152 * 0.60) + (#0#154 * 0.60) + #0#153 + #0#155 + (#0#206 * 0.40);
      |FINSI;
  |FINSI;
  |PINTA #0CampoTrab;
|FPRC;

|| PINTA LA PANTALLA DEL DESGLOSE DEL PERSONAL ASALARIADO DEFINITIVO

|PROCESO PersAsalaDL1;
  |PUSHV 0501 2380;

  |D_CUADRO 1041, 2380;
  |BLANCO 1142 2279;

  |SI #0#3 ] 2000; |Y #0#3 [ 2010;
      aAlfa = "N§.Menores 19 a¤os/Disca.33% ..:      ";
  |SINO;
      aAlfa = "N§.Menores 19 a¤os ............:      ";
  |FINSI;
  |PINTA 1142, aAlfa;
  |SI #0#3 > 2010;
      |PINTA 1242, "Discapacitados > 33%...........:      ";
      |PINTA 1342, "Contratos de Aprendices .......:      ";
      |PINTA 1442, "N§.pers.en formaci¢n acadmica :      ";
      |PINTA 1542, "Resto .........................:      ";
  |SINO;
      |PINTA 1242, "Contratos de Aprendices .......:      ";
      |PINTA 1342, "N§.pers.en formaci¢n acadmica :      ";
      |PINTA 1442, "Resto .........................:      ";
      |PINTA 1542, "                                      ";
  |FINSI;

  |PINTA 1642, "                          ------------";
  |PINTA 1742, "Total .................:              ";


  |SI CampoTipo = "R";
      |SI #0#197 = "N";
          |C_M #0#156, 1,   "S";  |C_M #0#157, 1, "S";
          |C_M #0#159, 1,   "S";  |C_M #0#158, 1, "S";
          |C_M #0#207, 1,   "S";
      |FINSI;

      |C_V #0#156, 1,   "S";  |C_V #0#157, 1, "S";
      |C_V #0#159, 1,   "S";  |C_V #0#158, 1, "S";
      |C_P #0#156, 1, 1175;
      |SI #0#3 < 2011;
          |C_P #0#158, 1, 1275;
          |C_P #0#157, 1, 1375;
          |C_P #0#159, 1, 1475;
      |SINO;
          |C_V #0#207, 1,   "S";
          |C_P #0#207, 1, 1275;
          |C_P #0#158, 1, 1375;
          |C_P #0#157, 1, 1475;
          |C_P #0#159, 1, 1575;
      |FINSI;
      |C_P #0CampoTrab, 0, Posi;
      |C_P #0CampoTrab, 1, 1770;

      |PINTA #0#156;  |PINTA #0#157;  |PINTA #0#158;  |PINTA #0CampoTrab;
      |PINTA #0#159;  |PINTA #0#207;

      |ET Campo156;  |ENCAMPO #156#0;
                     |SI FSalida = 1;  |VETE Abajo3;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo3;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo156; |FINSI;

      |ET Campo207;  |ENCAMPO #207#0;
                     |SI FSalida = 1;  |VETE Abajo3;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo3;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo156; |FINSI;

      |ET Campo158;  |ENCAMPO #158#0;
                     |SI FSalida = 1;  |VETE Abajo3;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo3;   |FINSI;
                     |SI FSalida = 2;
                         |SI #0#3 < 2011;
                             |VETE Campo156;
                         |SINO;
                             |VETE Campo207;
                         |FINSI;
                     |FINSI;

      |ET Campo157;  |ENCAMPO #157#0;
                     |SI FSalida = 1;  |VETE Abajo3;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo3;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo158; |FINSI;

      |ET Campo159;   |ENCAMPO #159#0;
                     |SI FSalida = 1;  |VETE Abajo3;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo3;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo157; |FINSI;

      |ET Abajo3;

            |C_M #0#156, 1,   "N";  |C_M #0#157, 1, "N";
            |C_M #0#158, 1,   "N";  |C_M #0#159, 1, "N";
            |C_M #0#207, 1,   "N";
            |C_V #0#156, 1,   "N";  |C_V #0#157, 1, "N";
            |C_V #0#158, 1,   "N";  |C_V #0#159, 1, "N";
            |C_V #0#207, 1,   "N";
  |SINO;
      |SI #0#197 = "N";
          |C_M #0#160, 1,   "S";  |C_M #0#161, 1, "S";
          |C_M #0#163, 1,   "S";  |C_M #0#162, 1, "S";
          |C_M #0#208, 1,   "S";
      |FINSI;

      |C_V #0#160, 1,   "S";  |C_V #0#161, 1, "S";
      |C_V #0#163, 1,   "S";  |C_V #0#162, 1, "S";
      |C_P #0#160, 1,  1175;
      |SI #0#3 < 2011;
          |C_P #0#161, 1, 1375;
          |C_P #0#162, 1, 1275;
          |C_P #0#163, 1, 1475;
      |SINO;
          |C_V #0#208, 1,  "S";
          |C_P #0#208, 1, 1275;
          |C_P #0#161, 1, 1475;
          |C_P #0#162, 1, 1375;
          |C_P #0#163, 1, 1575;
      |FINSI;
      |C_P #0CampoTrab, 0, Posi;
      |C_P #0CampoTrab, 1, 1770;

      |PINTA #0#160;  |PINTA #0#161;  |PINTA #0#162;  |PINTA #0CampoTrab;
      |PINTA #0#163;  |PINTA #0#208;

      |ET Campo160;  |ENCAMPO #160#0;
                     |SI FSalida = 1;  |VETE Abajo4;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo4;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo160; |FINSI;

      |ET Campo208;  |ENCAMPO #208#0;
                     |SI FSalida = 1;  |VETE Abajo4;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo4;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo160; |FINSI;

      |ET Campo162;  |ENCAMPO #162#0;
                     |SI FSalida = 1;  |VETE Abajo4;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo4;   |FINSI;
                     |SI FSalida = 2;
                         |SI #0#3 < 2011;
                             |VETE Campo160;
                         |SINO;
                             |VETE Campo208;
                         |FINSI;
                     |FINSI;

      |ET Campo161;  |ENCAMPO #161#0;
                     |SI FSalida = 1;  |VETE Abajo4;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo4;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo162; |FINSI;

      |ET Campo163;   |ENCAMPO #163#0;
                     |SI FSalida = 1;  |VETE Abajo4;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo4;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo161; |FINSI;

      |ET Abajo4;

            |C_M #0#160, 1,   "N";  |C_M #0#161, 1, "N";
            |C_M #0#162, 1,   "N";  |C_M #0#163, 1, "N";
            |C_M #0#208, 1,   "N";
            |C_V #0#160, 1,   "N";  |C_V #0#161, 1, "N";
            |C_V #0#162, 1,   "N";  |C_V #0#163, 1, "N";
            |C_V #0#208, 1,   "N";
  |FINSI;

  |SI #0#197 = "S";  |PAUSA;  |FINSI;

  |C_P #0CampoTrab, 1, Posi;
  |POPV;

  |SI CampoTipo = "R";
      #0CampoTrab = (#0#156 * 0.60) + (#0#158 * 0.60) + (#0#157 * 0.30) + #0#159 + (#0#207 * 0.40);
  |SINO;
      |SI #0#3 [ 1999;
          #0CampoTrab = (#0#160 * 0.60) + #0#161 + #0#162 + #0#163;
      |SINO;
          #0CampoTrab = (#0#160 * 0.60) + (#0#162 * 0.60) + #0#161 + #0#163 + (#0#208 * 0.40);
      |FINSI;
  |FINSI;
  |PINTA #0CampoTrab;
|FPRC;

|| PINTA LA PANTALLA DEL DESGLOSE DEL PERSONAL ASALARIADO PROVISIONAL LINEA 2

|PROCESO PersAsalaPL2;
  |PUSHV 0501 2380;

  |D_CUADRO 1041, 2380;
  |BLANCO 1142 2279;

  |SI #0#3 ] 2000; |Y #0#3 [ 2010;
      aAlfa = "N§.Menores 19 a¤os/Disca.33% ..:      ";
  |SINO;
      aAlfa = "N§.Menores 19 a¤os ............:      ";
  |FINSI;
  |PINTA 1142, aAlfa;
  |SI #0#3 > 2010;
      |PINTA 1242, "Discapacitados > 33% ..........:      ";
      |PINTA 1342, "Contratos de Aprendices .......:      ";
      |PINTA 1442, "N§.pers.en formaci¢n acadmica :      ";
      |PINTA 1542, "Resto .........................:      ";
  |SINO;
      |PINTA 1242, "Contratos de Aprendices .......:      ";
      |PINTA 1342, "N§.pers.en formaci¢n acadmica :      ";
      |PINTA 1442, "Resto .........................:      ";
      |PINTA 1542, "                                      ";
  |FINSI;

  |PINTA 1642, "                          ------------";
  |PINTA 1742, "Total .................:              ";

  |SI CampoTipo = "R";
      |SI #0#197 = "N";
          |C_M #0#168, 1,   "S";  |C_M #0#169, 1, "S";
          |C_M #0#171, 1,   "S";  |C_M #0#170, 1, "S";
          |C_M #0#209, 1,   "S";
      |FINSI;

      |C_V #0#168, 1,   "S";  |C_V #0#169, 1, "S";
      |C_V #0#171, 1,   "S";  |C_V #0#170, 1, "S";
      |C_P #0#168, 1,  1175;
      |SI #0#3 < 2011;
          |C_P #0#169, 1, 1375;
          |C_P #0#170, 1, 1275;
          |C_P #0#171, 1, 1475;
      |SINO;
          |C_V #0#209, 1,  "S";
          |C_P #0#209, 1, 1275;
          |C_P #0#169, 1, 1475;
          |C_P #0#170, 1, 1375;
          |C_P #0#171, 1, 1575;
      |FINSI;
      |C_P #0CampoTrab, 0, Posi;
      |C_P #0CampoTrab, 1, 1770;

      |PINTA #0#168;  |PINTA #0#169;  |PINTA #0#170;  |PINTA #0CampoTrab;
      |PINTA #0#171;  |PINTA #0#209;

      |ET Campo168;  |ENCAMPO #168#0;
                 |SI FSalida = 1;  |VETE Abajo9;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo9;   |FINSI;
                 |SI FSalida = 2;  |VETE Campo168; |FINSI;

      |ET Campo209;  |ENCAMPO #209#0;
                 |SI FSalida = 1;  |VETE Abajo9;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo9;   |FINSI;
                 |SI FSalida = 2;  |VETE Campo168; |FINSI;

      |ET Campo170;  |ENCAMPO #170#0;
                 |SI FSalida = 1;  |VETE Abajo9;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo9;   |FINSI;
                 |SI FSalida = 2;
                     |SI #0#3 < 2011;
                         |VETE Campo168;
                     |SINO;
                         |VETE Campo209;
                     |FINSI;
                 |FINSI;

      |ET Campo169;  |ENCAMPO #169#0;
                 |SI FSalida = 1;  |VETE Abajo9;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo9;   |FINSI;
                 |SI FSalida = 2;  |VETE Campo170; |FINSI;

      |ET Campo171;   |ENCAMPO #171#0;
                 |SI FSalida = 1;  |VETE Abajo9;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo9;   |FINSI;
                 |SI FSalida = 2;  |VETE Campo169; |FINSI;

      |ET Abajo9;

                 |C_M #0#168, 1,   "N";  |C_M #0#169, 1, "N";
                 |C_M #0#170, 1,   "N";  |C_M #0#171, 1, "N";
                 |C_M #0#209, 1,   "N";
                 |C_V #0#168, 1,   "N";  |C_V #0#169, 1, "N";
                 |C_V #0#170, 1,   "N";  |C_V #0#170, 1, "N";
                 |C_V #0#209, 1,   "N";

  |SINO;
      |SI #0#197 = "N";
          |C_M #0#172, 1,   "S";  |C_M #0#173, 1, "S";
          |C_M #0#175, 1,   "S";  |C_M #0#174, 1, "S";
          |C_M #0#210, 1,   "S";
      |FINSI;

      |C_V #0#172, 1,   "S";  |C_V #0#173, 1, "S";
      |C_V #0#175, 1,   "S";  |C_V #0#174, 1, "S";
      |C_P #0#172, 1,  1175;
      |SI #0#3 < 2011;
          |C_P #0#173, 1, 1375;
          |C_P #0#174, 1, 1275;
          |C_P #0#175, 1, 1475;
      |SINO;
          |C_V #0#210, 1,   "S";
          |C_P #0#210, 1, 1275;
          |C_P #0#173, 1, 1475;
          |C_P #0#174, 1, 1375;
          |C_P #0#175, 1, 1575;
      |FINSI;
      |C_P #0CampoTrab, 0, Posi;
      |C_P #0CampoTrab, 1, 1770;

      |PINTA #0#172;  |PINTA #0#173;  |PINTA #0#174;  |PINTA #0CampoTrab;
      |PINTA #0#175;  |PINTA #0#210;

      |ET Campo172;  |ENCAMPO #172#0;
                 |SI FSalida = 1;  |VETE Abajo10;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo10;   |FINSI;
                 |SI FSalida = 2;  |VETE Campo172; |FINSI;

      |ET Campo210;  |ENCAMPO #210#0;
                 |SI FSalida = 1;  |VETE Abajo10;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo10;   |FINSI;
                 |SI FSalida = 2;  |VETE Campo172; |FINSI;

      |ET Campo174;  |ENCAMPO #174#0;
                 |SI FSalida = 1;  |VETE Abajo10;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo10;   |FINSI;
                 |SI FSalida = 2;
                     |SI #0#3 < 2011;
                         |VETE Campo172;
                     |SINO;
                         |VETE Campo210;
                     |FINSI;
                 |FINSI;

      |ET Campo173;  |ENCAMPO #173#0;
                 |SI FSalida = 1;  |VETE Abajo10;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo10;   |FINSI;
                 |SI FSalida = 2;  |VETE Campo174; |FINSI;

      |ET Campo175;   |ENCAMPO #175#0;
                 |SI FSalida = 1;  |VETE Abajo10;   |FINSI;
                 |SI FSalida = 7;  |VETE Abajo10;   |FINSI;
                 |SI FSalida = 2;  |VETE Campo173; |FINSI;

      |ET Abajo10;

            |C_M #0#172, 1,   "N";  |C_M #0#173, 1, "N";
            |C_M #0#174, 1,   "N";  |C_M #0#175, 1, "N";
            |C_M #0#210, 1,   "N";
            |C_V #0#172, 1,   "N";  |C_V #0#173, 1, "N";
            |C_V #0#174, 1,   "N";  |C_V #0#175, 1, "N";
            |C_V #0#210, 1,   "N";
  |FINSI;

  |SI #0#197 = "S";  |PAUSA;  |FINSI;

  |C_P #0CampoTrab, 1, Posi;
  |POPV;

  |SI CampoTipo = "R";
      #0CampoTrab = (#0#168 * 0.60) + (#0#170 * 0.60) + (#0#169 * 0.30) + #0#171 + (#0#209 * 0.40);
  |SINO;
      |SI #0#3 [ 1999;
          #0CampoTrab = (#0#172 * 0.60) + #0#173 + #0#174 + #0#175;
      |SINO;
          #0CampoTrab = (#0#172 * 0.60) + (#0#174 * 0.60) + #0#173 + #0#175 + (#0#210 * 0.40);
      |FINSI;
  |FINSI;
  |PINTA #0CampoTrab;
|FPRC;

|| PINTA LA PANTALLA DEL DESGLOSE DEL PERSONAL ASALARIADO DEFINITIVO

|PROCESO PersAsalaDL2;
  |PUSHV 0501 2380;

  |D_CUADRO 1041, 2380;
  |BLANCO 1142 2279;

  |SI #0#3 ] 2000; |Y #0#3 [ 2010;
      aAlfa = "N§.Menores 19 a¤os/Disca.33% ..:      ";
  |SINO;
      aAlfa = "N§.Menores 19 a¤os ............:      ";
  |FINSI;
  |PINTA 1142, aAlfa;
  |SI #0#3 > 2010;
      |PINTA 1242, "Discapacitados > 33% ..........:      ";
      |PINTA 1342, "Contratos de Aprendices .......:      ";
      |PINTA 1442, "N§.pers.en formaci¢n acadmica :      ";
      |PINTA 1542, "Resto .........................:      ";
  |SINO;
      |PINTA 1242, "Contratos de Aprendices .......:      ";
      |PINTA 1342, "N§.pers.en formaci¢n acadmica :      ";
      |PINTA 1442, "Resto .........................:      ";
      |PINTA 1542, "                                      ";
  |FINSI;

  |PINTA 1642, "                          ------------";
  |PINTA 1742, "Total .................:              ";


  |SI CampoTipo = "R";
      |SI #0#197 = "N";
          |C_M #0#176, 1,   "S";  |C_M #0#177, 1, "S";
          |C_M #0#179, 1,   "S";  |C_M #0#178, 1, "S";
          |C_M #0#211, 1,   "S";
      |FINSI;

      |C_V #0#176, 1,   "S";  |C_V #0#177, 1, "S";
      |C_V #0#179, 1,   "S";  |C_V #0#178, 1, "S";
      |C_P #0#176, 1,  1175;
      |SI #0#3 < 2011;
          |C_P #0#177, 1, 1375;
          |C_P #0#178, 1, 1275;
          |C_P #0#179, 1, 1475;
      |SINO;
          |C_V #0#211, 1,  "S";
          |C_P #0#211, 1, 1275;
          |C_P #0#177, 1, 1475;
          |C_P #0#178, 1, 1375;
          |C_P #0#179, 1, 1575;
      |FINSI;
      |C_P #0CampoTrab, 0, Posi;
      |C_P #0CampoTrab, 1, 1770;

      |PINTA #0#176;  |PINTA #0#177;  |PINTA #0#178;  |PINTA #0CampoTrab;
      |PINTA #0#179;  |PINTA #0#211;

      |ET Campo176;  |ENCAMPO #176#0;
                     |SI FSalida = 1;  |VETE Abajo11;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo11;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo176; |FINSI;

      |ET Campo211;  |ENCAMPO #211#0;
                     |SI FSalida = 1;  |VETE Abajo11;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo11;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo176; |FINSI;

      |ET Campo178;  |ENCAMPO #178#0;
                     |SI FSalida = 1;  |VETE Abajo11;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo11;   |FINSI;
                     |SI FSalida = 2;
                         |SI #0#3 < 2011;
                             |VETE Campo176;
                         |SINO;
                             |VETE Campo211;
                         |FINSI;
                     |FINSI;

      |ET Campo177;  |ENCAMPO #177#0;
                     |SI FSalida = 1;  |VETE Abajo11;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo11;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo178; |FINSI;

      |ET Campo179;   |ENCAMPO #179#0;
                     |SI FSalida = 1;  |VETE Abajo11;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo11;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo177; |FINSI;

      |ET Abajo11;

            |C_M #0#176, 1,   "N";  |C_M #0#177, 1, "N";
            |C_M #0#178, 1,   "N";  |C_M #0#179, 1, "N";
            |C_M #0#211, 1,   "N";
            |C_V #0#176, 1,   "N";  |C_V #0#177, 1, "N";
            |C_V #0#178, 1,   "N";  |C_V #0#179, 1, "N";
            |C_V #0#211, 1,   "N";
  |SINO;
      |SI #0#197 = "N";
          |C_M #0#180, 1,   "S";  |C_M #0#181, 1, "S";
          |C_M #0#183, 1,   "S";  |C_M #0#182, 1, "S";
          |C_M #0#212, 1,   "S";
      |FINSI;

      |C_V #0#180, 1,   "S";  |C_V #0#181, 1, "S";
      |C_V #0#183, 1,   "S";  |C_V #0#182, 1, "S";
      |C_P #0#180, 1,  1175;
      |SI #0#3 < 2011;
          |C_P #0#181, 1, 1375;
          |C_P #0#182, 1, 1275;
          |C_P #0#183, 1, 1475;
      |SINO;
          |C_V #0#212, 1,  "S";
          |C_P #0#212, 1, 1275;
          |C_P #0#181, 1, 1475;
          |C_P #0#182, 1, 1375;
          |C_P #0#183, 1, 1575;
      |FINSI;
      |C_P #0CampoTrab, 0, Posi;
      |C_P #0CampoTrab, 1, 1770;

      |PINTA #0#180;  |PINTA #0#181;  |PINTA #0#182;  |PINTA #0CampoTrab;
      |PINTA #0#183;  |PINTA #0#212;

      |ET Campo180;  |ENCAMPO #180#0;
                     |SI FSalida = 1;  |VETE Abajo12;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo12;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo180; |FINSI;

      |ET Campo212;  |ENCAMPO #212#0;
                     |SI FSalida = 1;  |VETE Abajo12;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo12;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo180; |FINSI;

      |ET Campo182;  |ENCAMPO #182#0;
                     |SI FSalida = 1;  |VETE Abajo12;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo12;   |FINSI;
                     |SI FSalida = 2;
                         |SI #0#3 < 2011;
                             |VETE Campo180;
                         |SINO;
                             |VETE Campo212;
                         |FINSI;
                     |FINSI;

      |ET Campo181;  |ENCAMPO #181#0;
                     |SI FSalida = 1;  |VETE Abajo12;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo12;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo182; |FINSI;

      |ET Campo183;   |ENCAMPO #183#0;
                     |SI FSalida = 1;  |VETE Abajo12;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo12;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo181; |FINSI;

      |ET Abajo12;

            |C_M #0#180, 1,   "N";  |C_M #0#181, 1, "N";
            |C_M #0#182, 1,   "N";  |C_M #0#183, 1, "N";
            |C_M #0#212, 1,   "N";
            |C_V #0#180, 1,   "N";  |C_V #0#181, 1, "N";
            |C_V #0#182, 1,   "N";  |C_V #0#183, 1, "N";
            |C_V #0#212, 1,   "N";
  |FINSI;

  |C_P #0CampoTrab, 1, Posi;
  |POPV;

  |SI CampoTipo = "R";
      #0CampoTrab = (#0#176 * 0.60) + (#0#178 * 0.60) + (#0#177 * 0.30) + #0#179 + (#0#211 * 0.40);
  |SINO;
      |SI #0#3 [ 1999;
          #0CampoTrab = (#0#180 * 0.60) + #0#181 + #0#182 + #0#183;
      |SINO;
          #0CampoTrab = (#0#180 * 0.60) + (#0#182 * 0.60) + #0#181 + #0#183 + (#0#212 * 0.40);
      |FINSI;
  |FINSI;
  |PINTA #0CampoTrab;
|FPRC;

|| PINTA PANTALLA DESGLOSE DEL PERSONAL NO ASALARIADO PROVISIONAL

|PROCESO PersNAsalaP;
  |PUSHV 0501 2380;

  |D_CUADRO 1041, 2380;
  |BLANCO 1142 2279;

  |PINTA 1142, "Titular . (discapacitado:   )..:      ";
  |PINTA 1242, "Conyuge .......................:      ";
  |PINTA 1342, "Hijos .........................:      ";
  |PINTA 1442, "                          ------------";
  |PINTA 1542, "Total .................:              ";

  |SI CampoTipo = "R";
      |SI #0#197 = "N";
          |C_M #0#136, 1,  "S"; |C_M #0#137, 1, "S";
          |C_M #0#138, 1,  "S"; |C_M #0#213, 1, "S";
      |FINSI;

      |C_V #0#136, 1,   "S";  |C_V #0#137, 1, "S";   |C_V #0#138, 1,  "S";   |C_V #0#213, 1,  "S";
      |C_P #0#136, 1,  1175;  |C_P #0#137, 1, 1275;  |C_P #0#138, 1, 1375;   |C_P #0#213, 1, 1168;
      |C_P #0CampoTrab, 0, Posi;
      |C_P #0CampoTrab, 1, 1570;

      |PINTA #0#213;  |PINTA #0#136;  |PINTA #0#137;  |PINTA #0#138;  |PINTA #0CampoTrab;

      |ET Campo213;  |ENCAMPO #213#0;
                     |SI FSalida = 1;  |VETE Abajo5;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo5;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo213; |FINSI;

      |ET Campo136;  |ENCAMPO #136#0;
                     |SI FSalida = 1;  |VETE Abajo5;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo5;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo213; |FINSI;

      |ET Campo137;  |ENCAMPO #137#0;
                     |SI FSalida = 1;  |VETE Abajo5;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo5;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo136; |FINSI;

      |ET Campo138;   |ENCAMPO #138#0;
                     |SI FSalida = 1;  |VETE Abajo5;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo5;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo137; |FINSI;

      |ET Abajo5;

          |C_M #0#136, 1,   "N";  |C_M #0#137, 1, "N";   |C_M #0#138, 1,  "N";   |C_M #0#213, 1,  "N";
          |C_V #0#136, 1,   "N";  |C_V #0#137, 1, "N";   |C_V #0#138, 1,  "N";   |C_V #0#213, 1,  "N";
          |C_P #0CampoTrab, 1, Posi;
  |SINO;
      |SI #0#197 = "N";
          |C_M #0#139, 1,   "S";  |C_M #0#140, 1, "S";   |C_M #0#141, 1,  "S";   |C_M #0#214, 1,  "S";
      |FINSI;

      |C_V #0#139, 1,   "S";  |C_V #0#140, 1, "S";   |C_V #0#141, 1,  "S";   |C_V #0#214, 1,  "S";
      |C_P #0#139, 1,  1175;  |C_P #0#140, 1, 1275;  |C_P #0#141, 1, 1375;   |C_P #0#214, 1, 1168;
      |C_P #0CampoTrab, 0, Posi;
      |C_P #0CampoTrab, 1, 1570;

      |PINTA #0#214; |PINTA #0#139;  |PINTA #0#140;  |PINTA #0#141;  |PINTA #0CampoTrab;

      |ET Campo214;  |ENCAMPO #214#0;
                     |SI FSalida = 1;  |VETE Abajo6;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo6;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo214; |FINSI;

      |ET Campo139;  |ENCAMPO #139#0;
                     |SI FSalida = 1;  |VETE Abajo6;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo6;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo214; |FINSI;

      |ET Campo140;  |ENCAMPO #140#0;
                     |SI FSalida = 1;  |VETE Abajo6;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo6;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo139; |FINSI;

      |ET Campo141;   |ENCAMPO #141#0;
                     |SI FSalida = 1;  |VETE Abajo6;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo6;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo140; |FINSI;

      |ET Abajo6;

          |C_M #0#139, 1,   "N";  |C_M #0#140, 1, "N";   |C_M #0#140, 1,  "N";   |C_M #0#214, 1,  "N";
          |C_V #0#139, 1,   "N";  |C_V #0#140, 1, "N";   |C_V #0#140, 1,  "N";   |C_V #0#214, 1,  "N";
          |C_P #0CampoTrab, 1, Posi;
  |FINSI;

  |SI #0#197 = "S";  |PAUSA;  |FINSI;

  |POPV;
|FPRC;

|| PINTA PANTALLA DESGLOSE DEL PERSONAL NO ASALARIADO DEFINITIVO

|PROCESO PersNAsalaD;
  |PUSHV 0501 2380;

  |D_CUADRO 1041, 2380;
  |BLANCO 1142 2279;

  |PINTA 1142, "Titular . (discapacitado:   )..:      ";
  |PINTA 1242, "Conyuge .......................:      ";
  |PINTA 1342, "Hijos .........................:      ";
  |PINTA 1442, "                          ------------";
  |PINTA 1542, "Total .................:              ";

  |SI CampoTipo = "R";
      |SI #0#197 = "N";
          |C_M #0#142, 1,   "S";  |C_M #0#143, 1, "S";   |C_M #0#144, 1,  "S";   |C_M #0#215, 1, "S";
      |FINSI;

      |C_V #0#142, 1,   "S";  |C_V #0#143, 1, "S";   |C_V #0#144, 1,  "S";  |C_V #0#215, 1,  "S";
      |C_P #0#142, 1,  1175;  |C_P #0#143, 1, 1275;  |C_P #0#144, 1, 1375;  |C_P #0#215, 1, 1168;
      |C_P #0CampoTrab, 0, Posi;
      |C_P #0CampoTrab, 1, 1570;

      |PINTA #0#215;  |PINTA #0#142;  |PINTA #0#143;  |PINTA #0#144;  |PINTA #0CampoTrab;

      |ET Campo215;  |ENCAMPO #215#0;
                     |SI FSalida = 1;  |VETE Abajo7;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo7;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo215; |FINSI;

      |ET Campo142;  |ENCAMPO #142#0;
                     |SI FSalida = 1;  |VETE Abajo7;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo7;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo215; |FINSI;

      |ET Campo143;  |ENCAMPO #143#0;
                     |SI FSalida = 1;  |VETE Abajo7;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo7;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo142; |FINSI;

      |ET Campo144;   |ENCAMPO #144#0;
                     |SI FSalida = 1;  |VETE Abajo7;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo7;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo143; |FINSI;

      |ET Abajo7;

          |C_M #0#142, 1,   "N";  |C_M #0#143, 1, "N";   |C_M #0#144, 1,  "N";   |C_M #0#215, 1,  "N";
          |C_V #0#142, 1,   "N";  |C_V #0#143, 1, "N";   |C_V #0#144, 1,  "N";   |C_V #0#215, 1,  "N";
          |C_P #0CampoTrab, 1, Posi;
  |SINO;
      |SI #0#197 = "N";
          |C_M #0#145, 1,   "S";  |C_M #0#146, 1, "S";   |C_M #0#147, 1,  "S";   |C_M #0#216, 1,  "S";
      |FINSI;

      |C_V #0#145, 1,   "S";  |C_V #0#146, 1, "S";   |C_V #0#147, 1,  "S";   |C_V #0#216, 1,  "S";
      |C_P #0#145, 1,  1175;  |C_P #0#146, 1, 1275;  |C_P #0#147, 1, 1375;   |C_P #0#216, 1, 1168;
      |C_P #0CampoTrab, 0, Posi;
      |C_P #0CampoTrab, 1, 1570;

      |PINTA #0#216; |PINTA #0#145;  |PINTA #0#146;  |PINTA #0#147;  |PINTA #0CampoTrab;

      |ET Campo216;  |ENCAMPO #216#0;
                     |SI FSalida = 1;  |VETE Abajo8;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo8;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo216; |FINSI;

      |ET Campo145;  |ENCAMPO #145#0;
                     |SI FSalida = 1;  |VETE Abajo8;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo8;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo216; |FINSI;

      |ET Campo146;  |ENCAMPO #146#0;
                     |SI FSalida = 1;  |VETE Abajo8;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo8;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo145; |FINSI;

      |ET Campo147;   |ENCAMPO #147#0;
                     |SI FSalida = 1;  |VETE Abajo8;   |FINSI;
                     |SI FSalida = 7;  |VETE Abajo8;   |FINSI;
                     |SI FSalida = 2;  |VETE Campo146; |FINSI;

      |ET Abajo8;

          |C_M #0#145, 1,   "N";  |C_M #0#146, 1, "N";   |C_M #0#147, 1,  "N";   |C_M #0#216, 1,  "N";
          |C_V #0#145, 1,   "N";  |C_V #0#146, 1, "N";   |C_V #0#147, 1,  "N";   |C_V #0#216, 1,  "N";
          |C_P #0CampoTrab, 1, Posi;
  |FINSI;

  |SI #0#197 = "S";  |PAUSA;  |FINSI;

  |POPV;
|FPRC;

|PROCESO Lorca;
     |SI #0#3 = 2012; |O #0#3 ] 2013;

         aAlfa = Contenido;
         |SI aAlfa ! #0Campo;
            |SI Campo = 217; nSw218 = 0; |FINSI;
            |SI Campo = 219; nSw220 = 0; |FINSI;
         |FINSI;

         aAlfa = #0Campo; nCampo = Campo + 1;
         |C_M #0nCampo, 1, aAlfa;
         |SI aAlfa = "N";
             #0nCampo = 0; |PINTA #0nCampo;
         |FINSI;
     |FINSI;
|FPRC;

|PROCESO ImpLorcaTipo7; |TIPO 7;
     |SI #0#3 = 2012; |O #0#3 ] 2013;
         aAlfa = "    Importe Reduccion. 35% sobre el Rendimiento. Pulse <F2> calcular el 100% ";
         |SI #0#3 ] 2013;
              aAlfa = "    Importe Reduccion. 20% sobre el Rendimiento.";
         |FINSI;
         |MENSA aAlfa;

         |HAZ TotalMod;
         |SI Campo = 218; nSw218 = 1; |FINSI;
         |SI Campo = 220; nSw220 = 1; |FINSI;
     |FINSI;
|FPRC;

|PROCESO ImpLorcaTipo0; |TIPO 0;
     |SI #0#3 = 2012; |O #0#3 ] 2013;
         |SI FSalida = 10; |Y #0#3 = 2012;
             |SI Campo = 218; nSw218 = 2; |FINSI;
             |SI Campo = 220; nSw220 = 2; |FINSI;
         |FINSI;
         |BLIN 4;
         |HAZ TotalMod;
     |FINSI;
|FPRC;

|| *********************************
|| CALCULO DE LOS NUMEROS DEL MODULO
|| *********************************

|PROCESO Importe;  |TIPO 0;
  |SI TeclaPara = 5;  |ACABA;  |FINSI;
  TeclaPara = FSalida;
  CampoTrab = Campo;
  TeclaAsal = FSalida;
  |BLIN 04;

  |SI TeclaAsal = 10;
      |PARA XPara = 0;  |SI XPara [ 111;  |HACIENDO XPara = XPara + 1;
            #99XPara = #0XPara;
      |SIGUE;

      |PUSHV 0501 2380;
      CNume = CFijo + 4;
      |SI CampoTrab [ CNume;
          |PINPA #0#99;
          |PINDA #0#99;
      |SINO;
          |PINPA #0#99;
          |PINDA #0#99;
          |PINPA #1#99;
          |PINDA #1#99;
      |FINSI;
      |PAUSA;
      |POPV;
      |ERROR;
      |ACABA;
  |FINSI;

  |SI SwPregunta ! 0;
      |SI SwPregunta = 1;
          |SI TeclaAsal = 9;
              |SI CFijo = 9;  |HAZ PersAsalaPL1;  |FINSI;
              |SI CFijo ! 9;  |HAZ PersAsalaPL2;  |FINSI;
          |FINSI;
          |HAZ CalcuAsaP;
      |FINSI;

      |SI SwPregunta = 2;
          |SI TeclaAsal = 9;
              |SI CFijo = 9;  |HAZ PersAsalaDL1;  |FINSI;
              |SI CFijo ! 9;  |HAZ PersAsalaDL2;  |FINSI;
          |FINSI;
          |HAZ CalcuAsaD;
      |FINSI;

      |SI SwPregunta = 3;
          |SI TeclaAsal = 9;  |HAZ PersNAsalaP;  |FINSI;
          |SI CampoTipo = "R";
              #0CampoTrab = #0#136 + #0#137 + #0#138;
          |SINO;
              #0CampoTrab = #0#139 + #0#140 + #0#141;
          |FINSI;
          |SI CampoTipo = "R";
              TAsalariado = #0#164 + #0#184;
              |SI #0CampoTrab > 1; |Y #0#136 = 1; |Y TAsalariado [ 1; |Y enMasTrIRPF = 0;
                  #0CampoTrab = ((#0CampoTrab - 1) / 2) + 1;
              |FINSI;
              |SI #0#213 = "S";
                  #0CampoTrab = (#0CampoTrab - #0#136 + (#0#136 * 0.75));
              |FINSI;
          |SINO;
              TAsalariado = #0#165 + #0#185;
              |SI #0CampoTrab > 1; |Y #0#139 = 1; |Y TAsalariado [ 1; |Y enMasTrIVA = 0;
                  #0CampoTrab = ((#0CampoTrab - 1) / 2) + 1;
              |FINSI;
              |SI #0#214 = "S";
                  #0CampoTrab = (#0CampoTrab - #0#139 + (#0#139 * 0.75));
              |FINSI;
          |FINSI;
          |PINTA #0CampoTrab;
     |FINSI;

     |SI SwPregunta = 4;
         |SI TeclaAsal = 9;  |HAZ PersNAsalaD;  |FINSI;
         |SI CampoTipo = "R";
             #0CampoTrab = #0#142 + #0#143 + #0#144;
         |SINO;
             #0CampoTrab = #0#145 + #0#146 + #0#147;
         |FINSI;

         TAsalariado = #0#166 + #0#186;
         |SI CampoTipo = "R";
             TAsalariado = #0#166 + #0#186;
             |SI #0CampoTrab > 1; |Y #0#142 = 1; |Y TAsalariado [ 1; |Y enMasTrIRPF = 0;
                 #0CampoTrab = ((#0CampoTrab - 1) / 2) + 1;
             |FINSI;
             |SI #0#215 = "S";
                  #0CampoTrab = (#0CampoTrab - #0#142 + (#0#142 * 0.75));
             |FINSI;
         |SINO;
             TAsalariado = #0#167 + #0#187;
             |SI #0CampoTrab > 1; |Y #0#145 = 1; |Y TAsalariado [ 1; |Y enMasTrIRPF = 0;
                 #0CampoTrab = ((#0CampoTrab - 1) / 2) + 1;
             |FINSI;
             |SI #0#216 = "S";
                  #0CampoTrab = (#0CampoTrab - #0#145 + (#0#145 * 0.75));
             |FINSI;
         |FINSI;
         |PINTA #0CampoTrab;
     |FINSI;
  |FINSI;

  |SI SwPregunta = 0; |Y #102CControl = "P"; |Y Dias = 131; |Y #0#198 = "N";
      #0#8 = #0#7 * ((#0CampoTrab * #0Dias) / DiasEjer);  |PINTA #0#8;
  |SINO;
      #0#8 = #0#7 * #0CampoTrab;  |PINTA #0#8;
  |FINSI;

  |SI #0#8 = 0;  #0CampoTrab = 0;  |PINTA #0Campo;  |FINSI;
  Campos1 = CampoTrab + 1;  #0Campos1 = #0#8;

  #0#108 = #0#12 + #0#23 + #0#34 + #0#45 + #0#56 + #0#67 + #0#78 + #0#89 + #0#100;
  #0#109 = #0#14 + #0#25 + #0#36 + #0#47 + #0#58 + #0#69 + #0#80 + #0#91 + #0#102;
  #0#110 = #0#17 + #0#28 + #0#39 + #0#50 + #0#61 + #0#72 + #0#83 + #0#94 + #0#105;
  #0#111 = #103#11 + #103#13 + #103#15 + #103#17;
  #0#111 = #0#111  + #0#19 + #0#30 + #0#41 + #0#52 + #0#63 + #0#74 + #0#85 + #0#96 + #0#107;
  |SI #100#62 ! 0;  #0#110 = #0#110 * #100#62;  |FINSI;

  |SI CampoTrab = CampoN1;  |Y #102CControl ! "A"; |Y #102CControl ! "N"; |Y #0#198 ! "S";
      CampoN2 = CampoN1 + 5;
      |SI #0CampoN2 = 0;
          #0CampoN2 = #0CampoN1;  |PINTA #0CampoN1;
      |FINSI;
  |FINSI;

  #0#164 = 0;  #0#184 = 0;
  #0#165 = 0;  #0#185 = 0;
  #0#166 = 0;  #0#186 = 0;
  #0#167 = 0;  #0#187 = 0;

  |SI CampoAsala1 = 1;
      #0#164 = #0#164 + #0#11;
      #0#165 = #0#165 + #0#16;
      #0#166 = #0#166 + #0#13;
      #0#167 = #0#167 + #0#18;
  |FINSI;

  |SI CampoAsala2 = 1;
      #0#184 = #0#184 + #0#22;
      #0#185 = #0#185 + #0#27;
      #0#186 = #0#186 + #0#24;
      #0#187 = #0#187 + #0#29;
  |FINSI;

  |SI CampoAsala3 = 1;
      #0#184 = #0#184 + #0#33;
      #0#185 = #0#185 + #0#38;
      #0#186 = #0#186 + #0#35;
      #0#187 = #0#187 + #0#40;
  |FINSI;

  |SI CampoAsala4 = 1;
      #0#184 = #0#184 + #0#44;
      #0#185 = #0#185 + #0#49;
      #0#186 = #0#186 + #0#46;
      #0#187 = #0#187 + #0#51;
  |FINSI;

  |SI CampoAsala5 = 1;
      #0#184 = #0#184 + #0#55;
      #0#185 = #0#185 + #0#60;
      #0#186 = #0#186 + #0#57;
      #0#187 = #0#187 + #0#62;
  |FINSI;

  |SI CampoAsala6 = 1;
      #0#184 = #0#184 + #0#66;
      #0#185 = #0#185 + #0#71;
      #0#186 = #0#186 + #0#68;
      #0#187 = #0#187 + #0#73;
  |FINSI;

  |SI CampoAsala7 = 1;
      #0#184 = #0#184 + #0#77;
      #0#185 = #0#185 + #0#82;
      #0#186 = #0#186 + #0#79;
      #0#187 = #0#187 + #0#84;
  |FINSI;

  |SI CampoAsala8 = 1;
      #0#184 = #0#184 + #0#88;
      #0#185 = #0#185 + #0#93;
      #0#186 = #0#186 + #0#90;
      #0#187 = #0#187 + #0#95;
  |FINSI;

  |SI CampoAsala9 = 1;
      #0#184 = #0#184 + #0#99;
      #0#185 = #0#185 + #0#104;
      #0#186 = #0#186 + #0#101;
      #0#187 = #0#187 + #0#106;
  |FINSI;

  |HAZ TotalMod;

  |PINTA #0#108;  |PINTA #0#109;  |PINTA #0#110;  |PINTA #0#111;
  |PINTA #0#112;  |PINTA #0#113;
|FPRC;

|| Calcula el total de asalariados provisional

|PROCESO CalcuAsaP;
  |SI CFijo = 9;
      |SI CampoTipo = "R";
          #0CampoTrab = (#0#148 * 0.60) + (#0#150 * 0.60) + (#0#149 * 0.30) + #0#151 + (#0#205 * 0.40);
      |SINO;
          |SI #0#3 [ 1999;
              #0CampoTrab = (#0#152 * 0.60) + #0#153 + #0#155 + #0#154;
          |SINO;
              #0CampoTrab = (#0#152 * 0.60) + (#0#154 * 0.60) + #0#155 + #0#153 + (#0#206 * 0.40);
          |FINSI;
      |FINSI;
  |SINO;
      |SI CampoTipo = "R";
          #0CampoTrab = (#0#168 * 0.60) + (#0#170 * 0.60) + (#0#169 * 0.30) + #0#171 + (#0#209 * 0.40);
      |SINO;
          |SI #0#3 [ 1999;
              #0CampoTrab = (#0#172 * 0.60) + #0#173 + #0#175 + #0#174;
          |SINO;
              #0CampoTrab = (#0#172 * 0.60) + (#0#174 * 0.60) + #0#175 + #0#173 + (#0#210 * 0.40);
          |FINSI;
      |FINSI;
  |FINSI;
  |PINTA #0CampoTrab;
|FPRC;

|| Calcula el total de asalariados definitivo

|PROCESO CalcuAsaD;
  |SI CFijo = 9;
      |SI CampoTipo = "R";
          #0CampoTrab = (#0#156 * 0.60) + (#0#158 * 0.60) + (#0#157 * 0.30) + #0#159 + (#0#207 * 0.40);
      |SINO;
          |SI #0#3 [ 1999;
              #0CampoTrab = (#0#160 * 0.60) + #0#162 + #0#161 + #0#163;
          |SINO;
              #0CampoTrab = (#0#160 * 0.60) + (#0#162 * 0.60) + #0#161 + #0#163 + (#0#208 * 0.40);
          |FINSI;
      |FINSI;
  |SINO;
      |SI CampoTipo = "R";
          #0CampoTrab = (#0#176 * 0.60) + (#0#178 * 0.60) + (#0#177 * 0.30) + #0#179 + (#0#211 * 0.40);
      |SINO;
          |SI #0#3 [ 1999;
              #0CampoTrab = (#0#180 * 0.60) + #0#182 + #0#181 + #0#183;
          |SINO;
              #0CampoTrab = (#0#180 * 0.60) + (#0#182 * 0.60) + #0#181 + #0#183 + (#0#212 * 0.40);
          |FINSI;
      |FINSI;
  |FINSI;
  |PINTA #0CampoTrab;
|FPRC;

|| Calcula el total de no asalariados provisional

|PROCESO NAsaP;
  |SI CampoTipo = "R";
      #0CampoTrab = #0#136 + #0#137 + #0#138;
      TAsalariado = #0#164 + #0#184;
      |SI #0CampoTrab > 1; |Y #0#136 = 1; |Y TAsalariado [ 1;
          #0CampoTrab = ((#0CampoTrab - 1) / 2) + 1;
      |FINSI;
      |SI #0#213 = "S";
          #0CampoTrab = (#0CampoTrab - #0#136 + (#0#136 * 0.75));
      |FINSI;
  |SINO;
      #0CampoTrab = #0#139 + #0#140 + #0#141;
      TAsalariado = #0#165 + #0#185;
      |SI #0CampoTrab > 1; |Y #0#139 = 1; |Y TAsalariado [ 1;
          #0CampoTrab = ((#0CampoTrab - 1) / 2) + 1;
      |FINSI;
      |SI #0#214 = "S";
          #0CampoTrab = (#0CampoTrab - #0#139 + (#0#139 * 0.75));
      |FINSI;
  |FINSI;
  |PINTA #0CampoTrab;
|FPRC;

|| Calcula el total de no asalariados definitivo

|PROCESO NAsaD;
  |SI CampoTipo = "R";
      #0CampoTrab = #0#142 + #0#143 + #0#144;
      TAsalariado = #0#166 + #0#186;
      |SI #0CampoTrab > 1; |Y #0#142 = 1; |Y TAsalariado [ 1;
          #0CampoTrab = ((#0CampoTrab - 1) / 2) + 1;
      |FINSI;
      |SI #0#215 = "S";
          #0CampoTrab = (#0CampoTrab - #0#142 + (#0#142 * 0.75));
      |FINSI;
  |SINO;
      #0CampoTrab = #0#145 + #0#146 + #0#147;
      TAsalariado = #0#167 + #0#187;
      |SI #0CampoTrab > 1; |Y #0#145 = 1; |Y TAsalariado [ 1;
          #0CampoTrab = ((#0CampoTrab - 1) / 2) + 1;
      |FINSI;
      |SI #0#216 = "S";
          #0CampoTrab = (#0CampoTrab - #0#145 + (#0#145 * 0.75));
      |FINSI;
  |FINSI;
  |PINTA #0CampoTrab;
|FPRC;

|PROCESO Para;
  |SI TeclaPara ! 5;  |ACABA;  |FINSI;

  TeclaPara = 0;

  |ET Campo112;   |ENCAMPO #112#0;
                  |SI FSalida = 2;  |VETE Campo112; |FINSI;

  |ET Campo114;   |ENCAMPO #114#0;
                  |SI FSalida = 2;  |VETE Campo112; |FINSI;

  |ET Campo125;   |ENCAMPO #125#0;
                  |SI FSalida = 2;  |VETE Campo114; |FINSI;
|FPRC;

|PROCESO CalcuIrpf;
  Tecla = FSalida;
  |SI FSalida ! 9;  |ACABA;  |FINSI;

  |PUSHV 0501 2380;

  #100#0   = #0#108;                      || Rdto.Neto Previo P
  #100#1   = #0#109;                      || Rdto.Neto Previo D
  #100#4   = #0#164;                      || N§.Asalariados A¤o actual 1 P
  #100#5   = #0#166;                      || N§.Asalariados A¤o actual 1 D
  #100#83  = #0#184;                      || N§.Asalariados A¤o actual 2 P
  #100#84  = #0#186;                      || N§.Asalariados A¤o actual 2 D
  #100#100 = #0#0;                        || Letra Epigrafe
  #100#101 = #0#1;                        || Epigrafe
  #100#102 = #0#2;                        || Tipo
  #100#103 = #0#3;                        || A¤o
  #100#104 = #0#5;                        || Nombre Cliente
  #100#105 = #0#199;                      || Desglose inversiones
  #100#106 = #0#201;                      || Inicio Actividad
  #100#107 = #0#202;                      || Fecha Inicio Actividad

  |PINPA #0#100;

  |C_V #100#93, 1, "S";
  |C_V #100#95, 1, "S";
  |C_V #100#76, 1, "S";
  |C_V #100#77, 1, "S";
  |C_V #100#78, 1, "S";
  |C_V #100#79, 1, "S";

  |SI #100#103 ] 2009;
      |C_V #100#93, 1, "N";
      |C_V #100#95, 1, "N";
      |C_V #100#76, 1, "N";
      |C_V #100#77, 1, "N";
      |C_V #100#78, 1, "N";
      |C_V #100#79, 1, "N";

      |C_P #100#80, 1, 2019;  |C_M #100#80, 1, "S";
      |C_P #100#81, 1, 2031;  |C_M #100#81, 1, "S";

      |ATRI R;
      |PINTA 1902, "               ";
      |PINTA 2002, "Rdto.Neto      ";
      |PINTA 2102, "               ";
      |PINTA 2202, "               ";
  |FINSI;

  |PARA;  |SI;  |HACIENDO;
      |PINDA #0#100;
      |ENDATOS #1#100;
      |SI FSalida = 0;  |SAL;  |FINSI;
  |SIGUE;

  |POPV;

  #0#112 = #100#80;  |PINTA #0#112;
  #0#113 = #100#81;  |PINTA #0#113;
  |ERROR;
|FPRC;

|PROCESO Calcu1997;
  |SI FSalida ! 9;  |ACABA;  |FINSI;

  |SI #0#3 ] 2000;  |ACABA;  |FINSI;

  |HAZ RdtoPrevio97;

  |PUSHV 0501 2380;
  |PINPA #0#101;
  |PINDA #0#101;
  |ENDATOS #1#101;
  |SI FSalida = 0;
      #0#114 = #101#15;                     || Rdto Neto + 10%
  |FINSI;
  |POPV;

  |PINTA #0#114;
  |ERROR;
|FPRC;

|PROCESO CalcuIva;
  |SI Programa = 2;
      |SI Campo = 125;  |PTEC 802;  |FINSI;
  |FINSI;

  Tecla = FSalida;
  |SI FSalida ! 9;  |ACABA;  |FINSI;

  |PUSHV 0501 2380;

  #103#18  = #0#111 - (#103#11 + #103#13 + #103#15 + #103#17);
  #103#0   = #0#111;                      || Cuota Devengada operaciones
  #103#1   = #103#0 % 1;                  || 1 % Cuota Devengada
  #103#3   = #103#1 + #103#2;             || Total Cuota Soportada
  #103#4   = #100#65;                     || Coeficiente Temporada

  || |SI #103#4 = 0;  #103#4 = 1;  |FINSI;  tique 5096_12
  #103#5  = (#103#0 - #103#3);  || Resultado
  |SI #103#4 ! 0;
       #103#5  = #103#5 * #103#4;  || Resultado
  |FINSI;

  #103#6   = #0#121;                      || Cuota minima
  #103#7   = #103#0 % #103#6;             || Total Cuota Minima
  |SI #103#4 ! 0;
      #103#7   = #103#7 * #103#4;             || Total Cuota Minima
  |FINSI;
  #103#7   = #103#7 + #103#28;

  #103#8   = #103#5;                      || Cuota derivada regiman general
  |SI #103#8 < #103#7;  #103#8 = #103#7;  |FINSI;

  |SI #103#12 ! 0;  |Y #103#19 = 0;
      #103#19 = #103#9;
  |FINSI;

  |SI #103#14 ! 0;  |Y #103#20 = 0;
      #103#20 = #103#9;
  |FINSI;

  |SI #103#16 ! 0;  |Y #103#21 = 0;
      #103#21 = #103#9;
  |FINSI;

  |ET Panta103;
      |PINPA #0#103;
      |PINDA #0#103;
      |ENDATOS #1#103;
      |SI FSalida ! 0;  |VETE Panta103;  |FINSI;

  |POPV;
  #0#125   = #103#8;  |PINTA #0#125;
  |HAZ TotalMod;
  |ERROR;
|FPRC;
|| ************************
|| DESGLOSE DE TRABAJADORES
|| ************************

|PROCESO CalculaTrab;
  |SI #21#5 = "R";  |O #21#5 = "A";
      |SI #21#4 [ 8; |O #21#4 = 12; |O #21#4 = 13;
          aAlfa2 = #21#6;
          |SI aAlfa2 ! aAlfa1;
              |SI #21#11 ! 0;
                  TAsala = TAsala + 1;
              |FINSI;
              aAlfa1 = aAlfa2;
          |FINSI;
      |FINSI;
      |SI #21#4 = 01;  #0#148 = #0#148 + #21#11;  |FINSI;
      |SI #21#4 = 03;  #0#149 = #0#149 + #21#11;  |FINSI;
      |SI #21#4 = 02;  #0#150 = #0#150 + #21#11;  |FINSI;
      |SI #21#4 = 04;  #0#151 = #0#151 + #21#11;  |FINSI;
      |SI #21#4 = 12;  #0#205 = #0#205 + #21#11;  |FINSI;

      |SI #21#4 = 01;  #0#156 = #0#156 + #21#16;  |FINSI;
      |SI #21#4 = 03;  #0#157 = #0#157 + #21#16;  |FINSI;
      |SI #21#4 = 02;  #0#158 = #0#158 + #21#16;  |FINSI;
      |SI #21#4 = 04;  #0#159 = #0#159 + #21#16;  |FINSI;
      |SI #21#4 = 12;  #0#207 = #0#207 + #21#16;  |FINSI;

      |SI #21#4 = 05;  #0#168 = #0#168 + #21#11;  |FINSI;
      |SI #21#4 = 07;  #0#169 = #0#169 + #21#11;  |FINSI;
      |SI #21#4 = 06;  #0#170 = #0#170 + #21#11;  |FINSI;
      |SI #21#4 = 08;  #0#171 = #0#171 + #21#11;  |FINSI;
      |SI #21#4 = 13;  #0#209 = #0#209 + #21#11;  |FINSI;

      |SI #21#4 = 05;  #0#176 = #0#176 + #21#16;  |FINSI;
      |SI #21#4 = 07;  #0#177 = #0#177 + #21#16;  |FINSI;
      |SI #21#4 = 06;  #0#178 = #0#178 + #21#16;  |FINSI;
      |SI #21#4 = 08;  #0#179 = #0#179 + #21#16;  |FINSI;
      |SI #21#4 = 13;  #0#211 = #0#211 + #21#16;  |FINSI;

      |SI #21#4 = 09;  ||Tique 2329_984
          nNume1 = #21#11;
          |SI #21#11 ! 0;
              |SI nSw18P ! 0;
                 |SI #0#213 = "S"; |Y nSw18P = 1;
                     #0#136 = #0#136 % 75;
                 |FINSI;
                 |SI #21#19 = "S";   #21#11 = #21#11 % 75; |FINSI;
              |FINSI;
              nSw18P = nSw18P + 1;
          |FINSI;
          #0#136 = #0#136 + #21#11;  #0#213 = #21#19;
          |SI nSw18P > 1; #0#213 = "N"; |FINSI;
          #21#11 = nNume1;
      |FINSI;
      |SI #21#4 = 10;  #0#137 = #0#137 + #21#11;  |FINSI;
      |SI #21#4 = 11;  #0#138 = #0#138 + #21#11;  |FINSI;

      |SI #21#4 = 09;
          nNume1 = #21#16;
          |SI #21#16 ! 0;
              |SI nSw18D ! 0;
                  |SI #0#215 = "S"; |Y nSw18D = 1;
                      #0#142 = #0#142 % 75;
                  |FINSI;
                  |SI #21#20 = "S";  #21#16 = #21#16 % 75; |FINSI;
              |FINSI;
              nSw18D = nSw18D + 1;
          |FINSI;
          #0#142 = #0#142 + #21#16;  #0#215 = #21#20;
          |SI nSw18D > 1; #0#215 = "N"; |FINSI;
          #21#16 = nNume1;
      |FINSI;
      |SI #21#4 = 10;  #0#143 = #0#143 + #21#16;  |FINSI;
      |SI #21#4 = 11;  #0#144 = #0#144 + #21#16;  |FINSI;
  |FINSI;

  |SI #21#5 = "I";  |O #21#5 = "A";
      |SI #21#4 = 01;  #0#152 = #0#152 + #21#11;  |FINSI;
      |SI #21#4 = 03;  #0#153 = #0#153 + #21#11;  |FINSI;
      |SI #21#4 = 02;  #0#154 = #0#154 + #21#11;  |FINSI;
      |SI #21#4 = 04;  #0#155 = #0#155 + #21#11;  |FINSI;
      |SI #21#4 = 12;  #0#206 = #0#206 + #21#11;  |FINSI;

      |SI #21#4 = 01;  #0#160 = #0#160 + #21#16;  |FINSI;
      |SI #21#4 = 03;  #0#161 = #0#161 + #21#16;  |FINSI;
      |SI #21#4 = 02;  #0#162 = #0#162 + #21#16;  |FINSI;
      |SI #21#4 = 04;  #0#163 = #0#163 + #21#16;  |FINSI;
      |SI #21#4 = 12;  #0#208 = #0#208 + #21#16;  |FINSI;

      |SI #21#4 = 05;  #0#172 = #0#172 + #21#11;  |FINSI;
      |SI #21#4 = 07;  #0#173 = #0#173 + #21#11;  |FINSI;
      |SI #21#4 = 06;  #0#174 = #0#174 + #21#11;  |FINSI;
      |SI #21#4 = 08;  #0#175 = #0#175 + #21#11;  |FINSI;
      |SI #21#4 = 13;  #0#210 = #0#210 + #21#11;  |FINSI;

      |SI #21#4 = 05;  #0#180 = #0#180 + #21#16;  |FINSI;
      |SI #21#4 = 07;  #0#181 = #0#181 + #21#16;  |FINSI;
      |SI #21#4 = 06;  #0#182 = #0#182 + #21#16;  |FINSI;
      |SI #21#4 = 08;  #0#183 = #0#183 + #21#16;  |FINSI;
      |SI #21#4 = 13;  #0#212 = #0#212 + #21#16;  |FINSI;

      |SI #21#4 = 09;  ||Tique 2329_984
         nNume1 = #21#11;
         |SI #21#11 ! 0;
             |SI nSw19P ! 0;
                 |SI #0#214 = "S"; |Y nSw19P = 1;
                     #0#139 = #0#139 % 75;
                 |FINSI;
                 |SI #21#19 = "S"; #21#11 = #21#11 % 75; |FINSI;
             |FINSI;
              nSw19P = nSw19P + 1;
         |FINSI;
         #0#139 = #0#139 + #21#11;  #0#214 = #21#19;
         |SI nSw19P > 1; #0#214 = "N"; |FINSI;
         #21#11 = nNume1;
      |FINSI;
      |SI #21#4 = 10;  #0#140 = #0#140 + #21#11;  |FINSI;
      |SI #21#4 = 11;  #0#141 = #0#141 + #21#11;  |FINSI;

      |SI #21#4 = 09;
          nNume1 = #21#16;
          |SI #21#16 ! 0;
              |SI nSw19D ! 0;
                  |SI #0#216 = "S"; |Y nSw19D = 1;
                      #0#145 = #0#145 % 75;
                  |FINSI;
                  |SI #21#20 = "S"; #21#16 = #21#16 % 75; |FINSI;
              |FINSI;
              nSw19D = nSw19D + 1;
          |FINSI;
          #0#145 = #0#145 + #21#16;  #0#216 = #21#20;
          |SI nSw19D > 1; #0#216 = "N"; |FINSI;
          #21#16 = nNume1;
      |FINSI;
      |SI #21#4 = 10;  #0#146 = #0#146 + #21#16;  |FINSI;
      |SI #21#4 = 11;  #0#147 = #0#147 + #21#16;  |FINSI;
  |FINSI;
|FPRC;

|DEFBUCLE eosm0021;
  #21#2;
  ;
  MEmpresa, MAnyo, MActivi, "                                        ", 000;
  MEmpresa, MAnyo, MActivi, "zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz", 999;
  ;
  NULL, CalculaTrab;
|FIN;

|RUTINA ClaveBaja21;
  #21#0 = MEmpresa;
  #21#1 = MAnyo;
  #21#2 = MActivi;
  #21#3 = 1;
|FRUT;

|RUTINA ClaveAlta21;
  #21#0 = MEmpresa;
  #21#1 = MAnyo;
  #21#2 = MActivi;
  #21#3 = 999;
|FRUT;

|PROCESO PideTrabajadores;
  |PUSHV 0501 2380;
  |ENTLINEAL #1#21, -4, 2, 22, 1, ClaveBaja21, ClaveAlta21;
  |POPV;

  |PARA XPara = 136;  |SI XPara [ 163;  |HACIENDO XPara = XPara + 1;
        #0XPara = 0;
  |SIGUE;

  |PARA XPara = 168;  |SI XPara [ 183;  |HACIENDO XPara = XPara + 1;
        #0XPara = 0;
  |SIGUE;

  |PARA XPara = 205;  |SI XPara [ 212;  |HACIENDO XPara = XPara + 1;
        #0XPara = 0;
  |SIGUE;

  #0#213 = "N"; #0#214 = "N";
  #0#215 = "N"; #0#216 = "N";

  TAsala = 0;
  aAlfa1 = "";
  aAlfa2 = "";
  nSw18P = 0; nSw18D = 0;
  nSw19P = 0; nSw19D = 0;
  |BUCLE eosm0021;
|FPRC;

|| *********************
|| DESGLOSE DE ELEMENTOS
|| *********************

|PROCESO CalculaElemento;
  Campo1 = 0;
  |SI #22#6 = "R";  |O #22#6 = "A";
      |SI #22#13 = 1;  |Y #102#0 ! "L";  Campo1 = 10;  |FINSI;
      |SI #22#13 = 2;  |Y #102#1 ! "L";  Campo1 = 21;  |FINSI;
      |SI #22#13 = 3;  |Y #102#2 ! "L";  Campo1 = 32;  |FINSI;
      |SI #22#13 = 4;  |Y #102#3 ! "L";  Campo1 = 43;  |FINSI;
      |SI #22#13 = 5;  |Y #102#4 ! "L";  Campo1 = 54;  |FINSI;
      |SI #22#13 = 6;  |Y #102#5 ! "L";  Campo1 = 65;  |FINSI;
      |SI #22#13 = 7;  |Y #102#6 ! "L";  Campo1 = 76;  |FINSI;
      |SI #22#13 = 8;  |Y #102#7 ! "L";  Campo1 = 87;  |FINSI;
      |SI #22#13 = 9;  |Y #102#8 ! "L";  Campo1 = 98;  |FINSI;
  |FINSI;

  |SI Campo1 ! 0;
        Campo2 = Campo1 + 1;
        Campo3 = Campo1 + 2;
        Campo4 = Campo1 + 3;
        Campo5 = Campo1 + 4;

        #0Campo2 = #0Campo2 + #22#9;
        #0Campo3 = #0Campo2 * #0Campo1;
        #0Campo4 = #0Campo4 + #22#12;
        #0Campo5 = #0Campo4 * #0Campo1;
  |FINSI;

  Campo1 = 0;
  |SI #22#6 = "I";  |O #22#6 = "A";
      |SI #22#13 = 1;  |Y #102#0 ! "L";  Campo1 = 15;  |FINSI;
      |SI #22#13 = 2;  |Y #102#1 ! "L";  Campo1 = 26;  |FINSI;
      |SI #22#13 = 3;  |Y #102#2 ! "L";  Campo1 = 37;  |FINSI;
      |SI #22#13 = 4;  |Y #102#3 ! "L";  Campo1 = 48;  |FINSI;
      |SI #22#13 = 5;  |Y #102#4 ! "L";  Campo1 = 59;  |FINSI;
      |SI #22#13 = 6;  |Y #102#5 ! "L";  Campo1 = 70;  |FINSI;
      |SI #22#13 = 7;  |Y #102#6 ! "L";  Campo1 = 81;  |FINSI;
      |SI #22#13 = 8;  |Y #102#7 ! "L";  Campo1 = 92;  |FINSI;
      |SI #22#13 = 9;  |Y #102#8 ! "L";  Campo1 = 103; |FINSI;
  |FINSI;

  |SI Campo1 ! 0;
      Campo2 = Campo1 + 1;
      Campo3 = Campo1 + 2;
      Campo4 = Campo1 + 3;
      Campo5 = Campo1 + 4;

      #0Campo2 = #0Campo2 + #22#9;
      #0Campo3 = #0Campo2 * #0Campo1;
      #0Campo4 = #0Campo4 + #22#12;
      #0Campo5 = #0Campo4 * #0Campo1;
  |FINSI;
|FPRC;

|DEFBUCLE eosm0022;
  #22#1;
  ;
  MEmpresa, MAnyo, MActivi, 000;
  MEmpresa, MAnyo, MActivi, 999;
  ;
  NULL, CalculaElemento;
|FIN;

|RUTINA ClaveBaja22;
  #22#0 = MEmpresa;
  #22#1 = MAnyo;
  #22#2 = MActivi;
  #22#3 = 1;
|FRUT;

|RUTINA ClaveAlta22;
  #22#0 = MEmpresa;
  #22#1 = MAnyo;
  #22#2 = MActivi;
  #22#3 = 999;
|FRUT;

|PROCESO PideElementos;
  |PUSHV 0501 2380;
  |ENTLINEAL #1#22, -4, 2, 22, 1, ClaveBaja22, ClaveAlta22;
  |POPV;

  |BUCLE eosm0022;
|FPRC;

|| ********
|| Desglose
|| ********

|| ///////////////////////////////

|PROCESO LeoEspejo;
  |SI #eosm021@#4 ! 9; |Y #eosm021@#4 ! 10; |Y #eosm021@#4 ! 11;

      |SI #eosm021@#17 < FechaIni; #eosm021@#17 = FechaIni; |FINSI;
      |SI #eosm021@#18 < "01.01.1900"; |O #eosm021@#18 > FechaFin;
          #eosm021@#18 = FechaFin;
      |FINSI;

      |SI #eosm021@#17 > fHFecha;  |ACABA;  |FINSI;
      |SI #eosm021@#18 < fDFecha;  |ACABA;  |FINSI;

      |SI #eosm021@#5 = "R";  |O #eosm021@#5 = "A";
          enMasTrIRPF = 1;
      |FINSI;
      |SI #eosm021@#5 = "I";  |O #eosm021@#5 = "A";
          enMasTrIVA  = 1;
      |FINSI;
  |FINSI;
|FPRC;

|DEFBUCLE LeoEspejo;
  #eosm021@#1004;
  ;
  MEmpresa, MAnyo, MActivi, nDesde;
  MEmpresa, MAnyo, MActivi, 999;
  ;
  NULL, LeoEspejo;
|FIN;

|PROCESO CalculaTrab_Mas;

  |SI #eosm0021#4 ! 9; |Y #eosm0021#4 ! 10; |Y #eosm0021#4 ! 11;

      nDesde  = #eosm0021#3 + 1;

      fDFecha = #eosm0021#17;
      |SI fDFecha < FechaIni;  fDFecha = FechaIni; |FINSI;
      |SI fDFecha > FechaFin;  |ACABA;            |FINSI;

      fHFecha = #eosm0021#18;
      |SI fHFecha < "01.01.1900"; fHFecha = FechaFin; |FINSI;
      |SI fHFecha < FechaIni;     |ACABA;             |FINSI;

      |BUCLE LeoEspejo;

      |SI enMasTrIRPF = 1; |Y enMasTrIVA  = 1;
          |ERROR10;
      |FINSI;
  |FINSI;
|FPRC;

|DEFBUCLE eosm0021_Mas;
  #eosm0021#1;
  ;
  MEmpresa, MAnyo, MActivi, 000;
  MEmpresa, MAnyo, MActivi, 999;
  ;
  NULL, CalculaTrab_Mas;
|FIN;

|PROCESO NContarTraba;
     |DBASE aBase;  |QBF aBase;
     aMas = aBase + "def/eosm0021.mas";
     |CARGA_DEF aMas, eosm021@;
     |SI FSalida ! 0;
         |MENAV "0000Error Cargando Def eosm0021";
         |ACABA;
     |FINSI;

     Ejercicio = #0#3;
     aAlfa = "01.01." + Ejercicio;  FechaIni = aAlfa;
     aAlfa = "31.12." + Ejercicio;  FechaFin = aAlfa;
     enMasTrIRPF = 0;
     enMasTrIVA  = 0;
     |BUCLE eosm0021_Mas;

     |DESCARGA_DEF #eosm021@;
|FPRC;
|| ///////////////////

|PROCESO Desglose;  |TIPO 0;
  enMasTrIRPF = 0;
  enMasTrIVA  = 0;
  |SI #0#197 = "N"; |Y #0#198 = "N";  |ACABA;  |FINSI;

  |PUSHV 0501 2380;
  |D_CUADRO 720, 1273;
  |ATRI R;
  |PINTA 0821, "         RECOGIDA DE NUMEROS POR DESGLOSE           ";
  |PINTA 0921, "ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ";

  |SI #0#197 = "S"; |Y #0#198 = "S";
      |PINTA 1021, "          -F12- Desglose de Trabajadores            ";
      |PINTA 1121, "          -F2-  Desglose Resto de Elementos         ";
  |FINSI;

  |SI #0#197 = "S"; |Y #0#198 = "N";
      |PINTA 1021, "          -F12- Desglose de Trabajadores            ";
      |PINTA 1121, "                                                    ";
  |FINSI;

  |SI #0#197 = "N"; |Y #0#198 = "S";
      |PINTA 1021, "          -F2- Desglose Resto de Elementos          ";
      |PINTA 1121, "                                                    ";
  |FINSI;

  |ATRI r;

  |ET Tecla;
      |LEETECLA TeclaFuncion;

      F1 = &255 + "823";
      F2 = &255 + "824";

     |SI F1 = TeclaFuncion;
         |HAZ PideTrabajadores;
         |VETE Tecla;
     |FINSI;

     |SI F2 = TeclaFuncion;
         |HAZ PideElementos;
         |VETE Tecla;
     |FINSI;

  |POPV;

  |SI #102#0 = "A"; |O #102#0 = "N";
      |SI #0#197 = "S";
          #0#11  = 0;  #0#13  = 0;  #0#16  = 0;  #0#18  = 0;
      |FINSI;
  |SINO;
      |SI #0#198 = "S";
          #0#11  = 0;  #0#13  = 0;  #0#16  = 0;  #0#18  = 0;
      |FINSI;
  |FINSI;

  |SI #102#1 = "A"; |O #102#1 = "N";
      |SI #0#197 = "S";
          #0#22  = 0;  #0#24  = 0;  #0#27  = 0;  #0#29  = 0;
      |FINSI;
  |SINO;
      |SI #0#198 = "S";
          #0#22  = 0;  #0#24  = 0;  #0#27  = 0;  #0#29  = 0;
      |FINSI;
  |FINSI;

  |SI #102#2 = "A"; |O #102#2 = "N";
      |SI #0#197 = "S";
          #0#33  = 0;  #0#35  = 0;  #0#38  = 0;  #0#40  = 0;
      |FINSI;
  |SINO;
      |SI #0#198 = "S";
          #0#33  = 0;  #0#35  = 0;  #0#38  = 0;  #0#40  = 0;
      |FINSI;
  |FINSI;

  |SI #102#3 = "A"; |O #102#3 = "N";
      |SI #0#197 = "S";
          #0#44  = 0;  #0#46  = 0;  #0#49  = 0;  #0#51  = 0;
      |FINSI;
  |SINO;
      |SI #0#198 = "S";
          #0#44  = 0;  #0#46  = 0;  #0#49  = 0;  #0#51  = 0;
      |FINSI;
  |FINSI;

  |SI #102#4 = "A"; |O #102#4 = "N";
      |SI #0#197 = "S";
          #0#55  = 0;  #0#57  = 0;  #0#60  = 0;  #0#62  = 0;
      |FINSI;
  |SINO;
      |SI #0#198 = "S";
          #0#55  = 0;  #0#57  = 0;  #0#60  = 0;  #0#62  = 0;
      |FINSI;
  |FINSI;

  |SI #102#5 = "A"; |O #102#5 = "N";
      |SI #0#197 = "S";
          #0#66  = 0;  #0#68  = 0;  #0#71  = 0;  #0#73  = 0;
      |FINSI;
  |SINO;
      |SI #0#198 = "S";
          #0#66  = 0;  #0#68  = 0;  #0#71  = 0;  #0#73  = 0;
      |FINSI;
  |FINSI;

  |SI #102#6 = "A"; |O #102#6 = "N";
      |SI #0#197 = "S";
          #0#77  = 0;  #0#79  = 0;  #0#82  = 0;  #0#84  = 0;
      |FINSI;
  |SINO;
      |SI #0#198 = "S";
          #0#77  = 0;  #0#79  = 0;  #0#82  = 0;  #0#84  = 0;
      |FINSI;
  |FINSI;

  |SI #102#7 = "A"; |O #102#7 = "N";
      |SI #0#197 = "S";
          #0#88  = 0;  #0#90  = 0;  #0#93  = 0;  #0#95  = 0;
      |FINSI;
  |SINO;
      |SI #0#198 = "S";
          #0#88  = 0;  #0#90  = 0;  #0#93  = 0;  #0#95  = 0;
      |FINSI;
  |FINSI;

  |SI #102#8 = "A"; |O #102#8 = "N";
      |SI #0#197 = "S";
          #0#99  = 0;  #0#101 = 0;  #0#104 = 0;  #0#106 = 0;
      |FINSI;
  |SINO;
      |SI #0#198 = "S";
          #0#99  = 0;  #0#101 = 0;  #0#104 = 0;  #0#106 = 0;
      |FINSI;
  |FINSI;

  |SI #0#197 = "S";
      |PARA XPara = 136;  |SI XPara [ 163;  |HACIENDO XPara = XPara + 1;
            #0XPara = 0;
      |SIGUE;

      |PARA XPara = 168;  |SI XPara [ 183;  |HACIENDO XPara = XPara + 1;
            #0XPara = 0;
      |SIGUE;

      |PARA XPara = 205;  |SI XPara [ 212;  |HACIENDO XPara = XPara + 1;
            #0XPara = 0;
      |SIGUE;
      #0#213 = "N"; #0#214 = "N";
      #0#215 = "N"; #0#216 = "N";

      |HAZ NContarTraba;

      TAsala = 0;
      aAlfa1 = "";
      aAlfa2 = "";
      nSw18P = 0; nSw18D = 0;
      nSw19P = 0; nSw19D = 0;
      |BUCLE eosm0021;
  |FINSI;

  |SI #0#198 = "S";
      |BUCLE eosm0022;
  |FINSI;

  |PINTA #0#11;  |PINTA #0#13;  |PINTA #0#16;  |PINTA #0#18;
  |PINTA #0#22;  |PINTA #0#24;  |PINTA #0#27;  |PINTA #0#29;
  |PINTA #0#33;  |PINTA #0#35;  |PINTA #0#38;  |PINTA #0#40;
  |PINTA #0#44;  |PINTA #0#46;  |PINTA #0#49;  |PINTA #0#51;
  |PINTA #0#55;  |PINTA #0#57;  |PINTA #0#60;  |PINTA #0#62;
  |PINTA #0#66;  |PINTA #0#68;  |PINTA #0#71;  |PINTA #0#73;
  |PINTA #0#77;  |PINTA #0#79;  |PINTA #0#82;  |PINTA #0#84;
  |PINTA #0#88;  |PINTA #0#90;  |PINTA #0#93;  |PINTA #0#95;
  |PINTA #0#99;  |PINTA #0#101; |PINTA #0#104; |PINTA #0#106;
|FPRC;

|PROCESO Prestige;  |TIPO 7;
     |C_M #0#203, 1, "S";
     |SI #0#3 ! 2002;
         |C_M #0#203, 1, "N";
         #0#203 = "N";  |PINTA #0#203;
     |FINSI;
|FPRC;
