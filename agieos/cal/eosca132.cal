|FICHEROS;
   eosca132 #0;
   eosm1130 #1;
   eosactiv #2;
|FIN;

|VARIABLES;
   pepe = 0;
   jose = 0;

   &el0  = 0;   &el1  = "";   &el2  = 0;    &el3  = "";
   &el4  = 0;   &el5  = 0;    &el6  = "";   &el7  = 0;
   &el8  = 0;   &el9  = 0;    &el10 = 0;    &el11 = "";
   &el12 = 0;   &el13 = 0;    &swdesc = 0;
|FIN;

|INCLUYE i_seguim;

|PROCESO calcular;
#2#0 = #1#0;
#2#1 = #1#19;
#2#2 = #1#2;
|LEE 110#2=;
|SI FSalida = 0;
    #1#20 = "N";
    |HAZ limpia;
    |HAZ cargaut;
    |SI el7 = 0; pepe = 1; |SINO; pepe = el7; |FINSI;
    jose = (pepe * 100) / el8;
    |SI jose [ 50; |Y jose > 0;
        el9 = jose;
        |SUB_EJECUTA "eosut132.run";
        |SI el11 = "SI"; |Y swdesc = 1;
            #1#20 = "S";

            se_empre = #1#0;
            se_ejerc = #1#2;
            se_perio = #1#1;
            se_tipos = 132;
            se_activ = #1#19;
            se_impor = el10 % 20;
            se_fecha = #1#3;
            se_factu = "";
            |HAZ seguimie;
        |SINO;
            #1#20 = "N";
            el10 = 0;
        |FINSI;
    |SINO;
        el10 = 0;
    |FINSI;
    |HAZ grabaact;
    |GRABA 020#1a;
    |LIBERA #1;
|FINSI;
|FPRC;

|PROCESO cargaut;
el0  = #2#0;
el1  = #2#3;
el2  = #2#1;
el3  = #2#6;
el4  = #0#2;
el5  = #0#3;
el12 = #1#18;

|SI #2#23 = "E";
    |SI #2#24 = 2; el7 = #1#7; |FINSI;
    |SI #2#24 = 1; el7 = #1#9; |FINSI;
    el6 = "EMPRESARIAL";
|FINSI;

|SI #2#23 = "P";
    el7 = #1#14;
    el6 = "PROFESIONAL";
|FINSI;

el8  = 0;
el10 = 0;
#2#0 = #1#0;
#2#1 = #1#19;
#2#2 = #1#2 - 2;
|LEE 040#2=;
|SI FSalida ! 0; |DDEFECTO #2; |FINSI;

|SI #0#2 = 1; el8 = #2#30; |FINSI;
|SI #0#2 = 2; el8 = #2#31; |FINSI;
|SI #0#2 = 3; el8 = #2#32; |FINSI;
|SI #0#2 = 4; el8 = #2#33; |FINSI;

#2#0 = #1#0;
#2#1 = #1#19;
#2#2 = #1#2;
|LEE 040#2=;
|SI FSalida ! 0; |DDEFECTO #2; |FINSI;

|SI #0#2 = 1; el10 = #2#35; |FINSI;
|SI #0#2 = 2; el10 = #2#36; |FINSI;
|SI #0#2 = 3; el10 = #2#37; |FINSI;
|SI #0#2 = 4; el10 = #2#38; |FINSI;
|FPRC;

|PROCESO grabaact;
#2#0 = #1#0;
#2#1 = #1#19;
#2#2 = #1#2;
|LIBERA #2;
|LEE 140#2=;
|SI FSalida  = 0;
    |SI #0#2 = 1; #2#35 = el10; |FINSI;
    |SI #0#2 = 2; #2#36 = el10; |FINSI;
    |SI #0#2 = 3; #2#37 = el10; |FINSI;
    |SI #0#2 = 4; #2#38 = el10; |FINSI;
    |GRABA 020#2a;
|FINSI;
|LIBERA #2;
|FPRC;

|PROCESO limpia;
   el0  = 0;   el1  = "";   el2  = 0;    el3  = "";
   el4  = 0;   el5  = 0;    el6  = "";   el7  = 0;
   el8  = 0;   el9  = 0;    el10 = 0;    el11 = "";
   el12 = 0;   el13 = 0;
|FPRC;

|DEFBUCLE eosca1320;
#1#1;
;
#0#0, 1, #0#2, #0#3;
#0#1, 6, #0#2, #0#3;
be;
NULL,calcular;
|FIN;

|PROCESO calcul; |TIPO 3;
|ABRE #2;
|BUCLE eosca1320;
|LIBERA #2;
|CIERRA #2;
|FPRC;
