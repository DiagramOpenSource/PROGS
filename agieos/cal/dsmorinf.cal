|FICHEROS;
   dsmorinf #0;

   dsm210dp #10;
   dsminmex #11;
   dsmivcex #12;
|FIN;

|VARIABLES;
   nCont = 0;
   nPant = 0;

   fFecha = @;
   aAlfa  = "";
|FIN;

|PROCESO MiraVC;
   |SI #dsmorinf#14 = "S";
      fFecha = ~; aAlfa = fFecha; aAlfa = aAlfa % -104;
      #dsmorinf#15 = aAlfa;   |PINTA #dsmorinf#15;

      |C_M #dsmorinf#15, 1, "S";
   |SINO;
      #dsmorinf#15 = 0;   |PINTA #dsmorinf#15;
      |C_M #dsmorinf#15, 1, "N";
   |FINSI;
|FPRC;

|PROCESO MiraInm;
   |SI #dsmorinf#13 = "I";
      #dsmorinf#14 = "N"; |PINTA #dsmorinf#14;
      #dsmorinf#15 = 0;   |PINTA #dsmorinf#15;
      |C_M #dsmorinf#14, 1, "N"; |C_M #dsmorinf#15, 1, "N";
   |SINO;
      |C_M #dsmorinf#14, 1, "S"; |C_M #dsmorinf#15, 1, "S";
   |FINSI;
|FPRC;

|PROCESO Seleccion;
   |SI #dsmorinf#0 = "S";
      #dsmorinf#1 = 0;     |PINTA #dsmorinf#1;
      #dsmorinf#2 = 99999; |PINTA #dsmorinf#2;
      |C_M #dsmorinf#1, 1, "N"; |C_M #dsmorinf#2, 1, "N";
      |PARA nCont = 3; |SI nCont [ 12; |HACIENDO nCont = nCont + 1;
         |C_M #dsmorinf#nCont#, 1, "S";
      |SIGUE;
   |SINO;
      |PARA nCont = 3; |SI nCont [ 12; |HACIENDO nCont = nCont + 1;
         #dsmorinf#nCont# = 0;     |PINTA #dsmorinf#nCont#;
         |C_M #dsmorinf#nCont#, 1, "N";
      |SIGUE;
      |C_M #dsmorinf#1, 1, "S"; |C_M #dsmorinf#2, 1, "S";
   |FINSI;
|FPRC;

|PROCESO MiraContr;
   |SI FSalida = 10;
      #dsm210dp#0 = #dsmorinf#Campo#;
      |LEE 000#dsm210dp.];
      |CONSULTA_CLAVE #1#dsm210dp;
      |SI FSalida = 0;
         #dsmorinf#Campo# = #dsm210dp#0; |PINTA #dsmorinf#Campo#;
      |FINSI;
   |FINSI;
|FPRC;

|| ********************************************************************
|| ********************************************************************
|| ********************************************************************

|PROCESO Inmuebles;
   |SI #dsmorinf#13 = "I"; |Y #dsminmex#20 = "A"; |ACABA; |FINSI;
   |SI #dsmorinf#13 = "A"; |Y #dsminmex#20 = "D"; |ACABA; |FINSI;

   |SI #dsmorinf#14 = "S";
      #dsmivcex#0 = #dsminmex#0;
      #dsmivcex#1 = #dsminmex#1;
      #dsmivcex#2 = #dsmorinf#15;
      |LEE 000#dsmivcex.=;
      |SI FSalida ! 0; |DDEFECTO #dsmivcex; |FINSI;
   |FINSI;
   |PRINT;
|FPRC;

|DEFBUCLE Inmuebles;
#dsminmex#1;
;
#dsm210dp#0, 000;
#dsm210dp#0, 999;
;
NULL, Inmuebles;
|FIN;

|PROCESO Contribuyentes;
   |BUCLE Inmuebles;
|FPRC;

|DEFBUCLE Contribuyentes;
#dsm210dp#1;
;
#dsmorinf#1;
#dsmorinf#2;
;
NULL, Contribuyentes;
|FIN;

|PROGRAMA;
   |CLS;
   |CABEZA "INFORME DE COMPROBACION DE INMUEBLES DE NO RESIDENTES";

   |PINPA #0#0; nPant = FSalida;
   |PINDA #0#0;
   |ABRE #dsm210dp; |ABRE #dsmivcex;

   |ENDATOS #1#0;
   |SI FSalida = 0;
      Impresora = "CrystalReport";
      |IMPRE -1;
      |SI FSalida = 0;
         |INFOR "dsmorinf";
         |SI FSalida = 0;
            |SI #dsmorinf#0 = "N";
               |BUCLE Contribuyentes;
            |SINO;
               |PARA nCont = 3; |SI nCont [ 12; |HACIENDO nCont = nCont + 1;
                  #dsm210dp#0 = #dsmorinf#nCont#;
                  |LEE 000#dsm210dp.=;
                  |SI FSalida = 0;
                     |HAZ Contribuyentes;
                  |FINSI;
               |SIGUE;
            |FINSI;
            |PIEINF; |FININF;
         |FINSI;
         |FINIMP;
      |FINSI;
   |FINSI;

   |CIERRA #dsmivcex; |CIERRA #dsm210dp;
|FPRO;
