|FICHEROS;
     dsarm022 #22;       ||Visor Logs
|FIN;

|VARIABLES;
     &eaFicLogVisor = "";
     &eaPathLogVisor = "";
     &eaNomLogVisor = "";
     &eaDesLogVisor = "";
     nUltimo = 0;
|FIN;

|PROCESO MeteVisorLog;
     |ABRE #dsarm022;
     |DDEFECTO #dsarm022;
     |SELECT #2#dsarm022;
     #dsarm022#2 = eaNomLogVisor;
     |LEE 000#dsarm022.=;
     |SI FSalida ! 0;
          |SELECT #1#dsarm022;
          |LEE 000#dsarm022.u;
          |SI FSalida = 0;
               nUltimo = #dsarm022#0 + 1;
          |SINO;
               nUltimo = 1;
          |FINSI;
          |DDEFECTO #dsarm022;
          #dsarm022#0 = nUltimo;
          |LEE 101#dsarm022.=;
          |SI FSalida ! 0;
               #dsarm022#1 = eaPathLogVisor;
               #dsarm022#2 = eaNomLogVisor;
               #dsarm022#3 = eaDesLogVisor;
               #dsarm022#4 = eaFicLogVisor
               |GRABA 020#dsarm022.n;
               |LIBERA #dsarm022;
          |FINSI;
     |FINSI;

     |CIERRA #dsarm022;
|FPRC;
