|FICHEROS;
     dsarw124,MANTE;

     :basica/agifigen;
|FIN;

|VARIABLES;
|FIN;

|INCLUYE z1000var;

|PROCESO LeeFactura;
     |ABRE #agifigen;
     |SELECT #4#agifigen;
     #agifigen#13 = eaNIF;
     |LEE 000#agifigen.=;
     |SI FSalida = 0;
         enCodEmp = #agifigen#0;
         eaNomEmp = #agifigen#1;
     |FINSI;
     |CIERRA #agifigen;
|FPRC;

|PROCESO T12Fw124;  |TIPO 12;
     |SI FSalida = 7;
         |ACABA;
     |FINSI;

     |SI FSalida ! 1;
         |ERROR;

         |POSICIONATE #dsarw124#1;
     |FINSI;
|FPRC;

|PROCESO T0C1Fw124;  |TIPO 0;
     eaNIF    = #dsarw124#1;
     |HAZ LeeFactura;
     |SI enCodEmp = 0;
         |MENAV "0000No existe ninguna empresa con este NIF/CIF.";
         |ERROR;
     |FINSI;

     #dsarw124#2 = enCodEmp;
     #dsarw124#3 = eaNomEmp;

     |PINTA #dsarw124#2;
     |PINTA #dsarw124#3;
|FPRC;

|PROCESO T66C1Fw124;  |TIPO 66;
     |ABRE #agifigen;  |SELECT #4#agifigen;
     #agifigen#13 = eaNIF;
     |LEE 000#agifigen.=;
     |SI FSalida ! 0;  |DDEFECTO #agifigen;  |FINSI;

     |CONSULTA_CLAVE #4#agifigen;
     |SI FSalida = 0;
         #dsarw124#1 = #agifigen#13;
     |FINSI;
     |CIERRA #agifigen;

     |PINTA #dsarw124#1;
|FPRC;
