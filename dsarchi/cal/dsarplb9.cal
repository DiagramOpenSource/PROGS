||PLB varios procesos

||AVEstaEnDscomer9
||EsDscomer9


|FICHEROS;
     referen@ #100;
|FIN;

|VARIABLES;
     &enSwEstaAV = 0;

     &eaSerieAV = "";
     &enNumeroAV = 0;
     &enEmpresaAV = 0;

     aBase = "";
     aPathDef = "";
     aPathFich = "";
     aEmpresa = "";
     aPathFichEmp = "";
     aAlbaranes = "";
     aPath = "";
|FIN;

|PROCESO AVEstaEnDscomer9;
     |SI enEmpresaAV = 0;
          |ACABA;
     |FINSI;

     |DBASS aBase;
     |QBF aBase;

     aPathDef = aBase + "dscomer9/def/";
     aPathFich = aBase + "dscomer9/fich/";

     aEmpresa = ("00000" + enEmpresaAV) % -105;

     aPathFichEmp = aPathFich + aEmpresa + "/";

     aAlbaranes = aPathDef + "agifa010";
     |CARGA_DEF aAlbaranes, referen@;
     |SI FSalida ! 0; |ACABA; |FINSI;

     |PATH_DAT #100 aPathFichEmp;

     |ABRE #100;
     |DDEFECTO #100;
     #100#52 = eaSerieAV;
     #100#0 = enNumeroAV;
     |LEE 000#100.=;
     |SI FSalida = 0;
          enSwEstaAV = 1;
     |FINSI;

     |CIERRA #100;
     |DESCARGA_DEF #referen@;
|FPRC;

|PROCESO EsDscomer9;
     |DBASS aPath;
     aPath = aPath + "dscomer9/def/agifa010.mas";
     |XABRE "E", aPath, 0;
|FPRC;
