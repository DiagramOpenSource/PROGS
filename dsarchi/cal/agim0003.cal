|FICHEROS;
     agim0003 #103,MANTE;
|FIN;

|VARIABLES;
     aPrograma   = "";
     aBase       = "";
     nCanal      = 0;
     aAlfa       = "";
     aAlfa1      = "";
     aDniGuarda  = "";

     &eaPathLaboral = "";
     &eaVarDni   = "";
     &enCalcCif  = 0;
     &enModoNif  = 0;
     &eaNif      = "";

     &eaDi0_n   = "";
     &eaDi1_n   = "";
     &eaDi2_n   = "";
     &eaNom_n   = "";
     &enCP1_n   = 0;
     &enCP2_n   = 0;
     &eaPob_n   = "";
     &eaPro_n   = "";
     &eaTel_n   = "";
     &eaCodPais = "";
     &eaNomPais = "";
     nModo      = 0;
     &eaProcedencia = "";
     &eaVengoDe = "";
     aVengoDe   = "";
|FIN;

|PROCESO LetraDnim003;  |TIPO 0;
     |SI FSalida = 10;
         eaVarDni  = #103Campo;
         enCalcCif = 1;
         |HAZ CalculoDNI;
         #103Campo = eaVarDni;
         |PINTA #103Campo;
         FSalida = 0;
         |ACABA;
     |FINSI;

     |SI FSalida = 11; |Y eaVengoDe ! "agidanif";
         |HAZ BusApliLab_b;
         aVengoDe = eaVengoDe;
         enModoNif = 4;
         eaNif     = #103#0;
         |SUB_EJECUTA ":basica/agidanif";
         eaVengoDe = aVengoDe;
         |ACABA;
     |FINSI;

     |MODULO aPrograma;
     |SI aPrograma ! "agim0003";  |ACABA;  |FINSI;

     aDniGuarda = #103Campo;
     eaVarDni   = #103Campo;
     enCalcCif = 0;
     |HAZ CalculoDNI;
     eaVarDni = (eaVarDni + "             ") % 112;
     |SI aDniGuarda ! eaVarDni;
         |CONFI "0000SNif sin Letra Calculada. Desea Calcularla.";
         |SI FSalida = 0;
             aDniGuarda = eaVarDni;
             |ERROR;
         |FINSI;
     |FINSI;

     #103Campo = aDniGuarda;
     |PINTA #103Campo;
|FPRC;

|PROCESO Tipo3m003;  |TIPO 30;
     |HAZ BusApliLab_b;

     |SI eaVengoDe ! "agidanif";
         |CONFI "0000NDesea entrar datos personales ";
         |SI FSalida = 0;
             enModoNif = 1;
             eaNif     = #103#0;
             aVengoDe  = eaVengoDe;
             |SUB_EJECUTA ":basica/agidanif";
             eaVengoDe = aVengoDe;
         |FINSI;
     |FINSI;
|FPRC;

|PROCESO T12m003;  |TIPO 12;
     |SI FSalida = 7;  |ACABA;  |FINSI;

     aAlfa = #agim0003#0;  |QBF aAlfa;
     |SI aAlfa = ""; |ACABA; |FINSI;

     aAlfa = #agim0003#1;  |QBF aAlfa;
     |SI aAlfa = "";
         |MENAV "0000El nombre debe tener contenido";
         |ERROR;
         |ACABA;
     |FINSI;

     |SI #agim0003#4 = 0;
         |MENAV "0000La provincia debe tener contenido";
         |ERROR;
         |ACABA;
     |FINSI;

     |SI #agim0003#12 = "   ";
         |MENAV "0000El pais debe tener contenido";
         |ERROR;
         |ACABA;
     |FINSI;
|FPRC;


|PROCESO BusApliLab_b;
       eaPathLaboral   = "";
       |DBASS aBase;   |QBF aBase;
       aAlfa1 = aBase + "laboral/def/labempre.mas";
       |XABRE "E", aAlfa1, nCanal;
       |SI FSalida ] 0;
           eaPathLaboral = aBase + "laboral/";
       |FINSI;
|FPRC;

|PROCESO Tipo7m003; |TIPO 7;
     |MODULO aPrograma;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 1;
         |SI aPrograma = "cacugene"; |O aPrograma = "caclipro";
             |O aPrograma = "caclipr1"; |O aPrograma = "caclipr2";
             #103#1 = eaNom_n; |PINTA #103#1;
             #103#2 = eaDi1_n; |PINTA #103#2;
             #103#3 = eaDi2_n; |PINTA #103#3;
             #103#4 = enCP1_n; |PINTA #103#4;
             #103#5 = enCP2_n; |PINTA #103#5;
             #103#6 = eaPob_n; |PINTA #103#6;
             #103#7 = eaPro_n; |PINTA #103#7;
             #103#8 = eaTel_n; |PINTA #103#8;
             #103#9 = eaDi0_n; |PINTA #103#9;
             #103#12 =eaCodPais; |PINTA #103#12;
             #103#13 =eaNomPais; |PINTA #103#13;
         |FINSI;
     |FINSI;
|FPRC;
