|FICHEROS;
     dpntm001;
     dpntm005;

     dpntw005;
|FIN;

|VARIABLES;
     aEMail  = "";

     &enModo = 0;
|FIN;

|PROCESO Tipo12Fw5;  |TIPO 12;
|FPRC;

|PROCESO Tipo0C0Fw5;  |TIPO 0;
     aEMail = #dpntw005#0;  |QBF aEMail;
     |SI aEMail = "";
         |MENAV "0000Email incorrecto.";
         |ERROR;
         |ACABA;
     |FINSI;

     aEMail = #dpntw005#0 - "@";
     |SI FSalida = 0;
         |MENAV "0000Email incorrecto.";
         |ERROR;
         |ACABA;
     |FINSI;

     |SI enModo ! 1;  |ACABA;  |FINSI;

     |SELECT #2#dpntm005;
     |LEE 000#dpntm005.=;
     #dpntm005#0 = #dpntm001#0;
     #dpntm005#2 = #dpntw005#0;
     |LEE 000#dpntm005.=;
     |SI FSalida = 0;
         |MENAV "0000El acceso ya existe.";
         |ERROR;
     |FINSI;

     |SELECT #1#dpntm005;
|FPRC;
