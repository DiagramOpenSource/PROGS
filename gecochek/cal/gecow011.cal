|FICHEROS;
     gecom011 #11;       || clientes
     || gecom018 #18;
     || gecow009 #909;
     gecom019 #19;       || empresas laboral (el lineal con Datos)
     gecow011 #911;      || este mismo def (fantasma para presentar)
     labempre@ #101;     || empresas
|FIN;

|VARIABLES;
     nPanta0        = 0;
     nBoton1_1      = 0;
     nCampoD        = 0;
     nCampoH        = 0;
     nCampoHasta    = 0;
     nUsu           = 0;
     nLong          = 0;
     nCaracter      = 0;
     nPos           = 0;
     nCamuf         = 0;
     nNum           = 0;
     nHandle        = 0;
     nReg           = 0;
     nCampo         = 0;
     nNume          = 0;
     nEmpresa       = 0;
     nServidor      = 0;

     aAlfa          = "";
     aAlfa1         = "";
     aAlfa2         = "";
     aClave         = "";
     aLong          = "";
     aCamufz        = "";
     aServidor      = "";
     aAbre          = "";
     aLinea         = "";
     aDirSer        = "";
     aDirPues       = "";
     aShell         = "";
     aOperacion     = "";
     aDOperacion    = "";
     aBase          = "";
     aMas           = "";
     aHora          = "";
     aFic           = "";
     aFich          = "";
     aDirec         = "";
     aBaseDigital   = "";
     aPathDSoporte  = "";

     fFecha         = @;

     &enCliente     = 0;
     || &enDelega      = 0;
     &enEmpresa     = 0;
     &eaUsuario     = "";
     &enModo        = 0;
     &enError       = 0;
     aRutaLaboral = "";
     aRutaDef = "";
     aRutaFich = "";
     FEstado = 0;
|FIN;

|PROCESO Tipo12w11; |TIPO 12;

|FPRC;

|PROCESO Tipo66;  |TIPO 66;
     |CONSULTA_CLAVE #1#101;
     |SI FSalida = 0;
          #911#2 = #101#0;
          #911#3 = #101#2;
          |PINTA #911#2;
          |PINTA #911#3;
     |SINO;
          |ERROR;
     |FINSI;
|FPRC;

|PROCESO Empresa;  |TIPO 0;
     |SI FSalida = 1;
          FEstado = -1;       || para controlar pulsar ESC sin preguntar
          |ACABA;               || correcto S/N
     |SINO;
          FEstado = 0;
     |FINSI;
     #101#0 = #911#2;
     |LEE 000#101=;
     |SI FSalida ! 0;
          aAlfa = "    La empresa especificada no existe. Pulse F11 para ";
          aAlfa = aAlfa + "ver la lista de empresas disponibles.";
          |MENAV aAlfa;
          |ERROR;
     |SINO;
          #911#3 = #101#2;
          |PINTA #911#3;
     |FINSI;
/*
     NO HACE FALTA AL SER SOLO MODIFICACION AUNQUE LO DEJO POR SI ACASO

     |SI enModo ! 1;  |ACABA;  |FINSI;

     #18#0 = enCliente;
     #18#1 = 99;
     |LEE 000#18];
     |SI FSalida = 0;
         |LEE 000#18a;
     |SINO;
         |LEE 000#18u;
     |FINSI;

     #909#2 = 1;
     |SI FSalida = 0;  |Y #18#0 = enCliente;
         #909#2 = #18#1 + 1;
     |FINSI;

     |PINTA #909#2;
*/
|FPRC;

|PROCESO Tipo80;  |TIPO 80;
     FSalida = 2799;
|FPRC;

|PROCESO Tipo90;  |TIPO 90;
|FPRC;

|PROGRAMA;
     |ABRE #11;
     #11#0 = enCliente;
     |LEE 000#11=;
     |SI FSalida ! 0;  |DDEFECTO #11; |FINSI;
     |CIERRA #11;

     |DDEFECTO #911;
     #911#0  = #11#0;
     #911#1  = #11#2;

     |ABRE #19;
/*                            SOLO VOY A ENTRAR EN ALTA
     |SI enModo ! 1;
         #18#0 = #909#0;
         #18#1 = enDelega;
         |LEE 101#18=;
         |SI FSalida ! 0;  |DDEFECTO #18; |FINSI;

         #909#2 = #18#1;
         #909#3 = #18#2;

         |C_M #909#2, 1, "N";
     |SINO;
     |FINSI;
*/
     |CABEZA "Empresas";

     |DBASS aBase;
     |QBF aBase;
     aRutaLaboral = aBase + "laboral/"
     |SI aBase = "/u/dsmedida/";
          aRutaLaboral = "/u/dsprofes/laboral/";
     |FINSI;
     aRutaDef = aRutaLaboral + "def/labempre";
     aRutaFich = aRutaLaboral + "fich/";

     |CARGA_DEF aRutaDef, labempre@;
     |PATH_DAT #101 aRutaFich;

     |ABRE #101;

     |PINPA #0#911;  nPanta0 = FSalida;
     |PINDA #0#911;

     |SI enModo = 1;  |ENDATOS #1#911;  |FINSI;

     ||SI enModo = 2;  |ENDATOS #2#909;  |FINSI;

     |SI FEstado ! -1;
          |CONFI "    S¨Es Correcto?";

          enError = 1;
          |SI FSalida = 0;
              enError  = 0;
              enEmpresa = #911#2;

              #19#0 = #911#0;
              #19#1 = #911#2;
              |LEE 101#19=;
              |SI FSalida ! 0;
                  |DDEFECTO #19;
                  #19#0 = #911#0;
                  #19#1 = #911#2;
                  |GRABA 020#19b;
              |SINO;
                  |MENAV "    La empresa ya est  dada de alta para este cliente.";
              |FINSI;
              #19#2 = #911#3;
              |GRABA 020#19a;
              |LIBERA #19;
          |SINO;
               |ERROR;
          |FINSI;
          |CIERRA #19;

          |CIERRA #101;
          |DESCARGA_DEF #labempre@;

          |PULSATECLA;
     |SINO;
          |CIERRA #19;

          |CIERRA #101;
          |DESCARGA_DEF #labempre@;

          |PULSATECLA;
     |FINSI;
|FPRO;
