|FICHEROS;
     dsm00039 #0;
     agifa017 #17;
     agifa019 #19;
     dsm00023 #23;
     dsm00024 #24;
     dsm00036 #36;
     dsm00037 #37;
     agifa142 #142;
     agifa065 #65;
|FIN;

|INCLUYE i_varart;

|PROCESO Tipo8; |TIPO 8;
     |ABRE #23;
     #23#0 = "F1";
     |LEE 000#23=;
     |SI FSalida ! 0;
          |MENAV "0000Proceso no configurado...";
          |PTEC 807;
     |FINSI;
     |CIERRA #23;
|FPRC;

|PROCESO HistoProceCab;
     |DDEFECTO #65;
     #65#0 = #36#4;
     #65#1 = #36#35;
     #65#2 = "S1";
     #65#3 = #36#0;
     #65#4 = 0;
     #65#5 = #36#5;
     #65#6 = -#36#7;
     #65#7 = #19#6;
     #65#8 = #19#9;
     #65#9 = #36#9;
     #65#10 = "";
     #65#11 = "";
     #65#12 = 0;
     #65#13 = 0;
     #65#14 = #65#9;
     #65#15 = "N";
     #65#16 = "01.01.0000";
     #65#17 = -#36#8;
     #65#18 = #36#6;
     #65#19 = #36#15;
     |GRABA 020#65n;
|FPRC;

|PROCESO HistoProceLin;
     |DDEFECTO #65;
     #65#0 = #37#3;
     #65#1 = #36#35;
     #65#3 = #37#0;
     #65#4 = #37#1;
     #65#5 = #37#4;
     #65#7 = #19#6;
     #65#8 = #19#9;
     #65#9 = #37#15;
     #65#10 = "";
     #65#11 = "";
     #65#12 = 0;
     #65#13 = 0;
     #65#14 = #65#9;
     #65#15 = "N";
     #65#16 = "01.01.0000";
     #65#18 = #37#5;
     #65#19 = #37#17;

     |SI #37#2 = "P"; |O #37#2 = "S";
          #65#2 = "F1";
          #65#6 = #37#10;
          #65#17 = #37#16;
     |SINO;
          #65#2 = "S1";
          #65#6 = -#37#10;
          #65#17 = -#37#16;
     |FINSI;
     |GRABA 020#65n;
|FPRC;

|PROCESO dsm00037;
     #19#0 = #37#3;
     |LEE 121#19=;
     |SI FSalida = 0;
          |SI #37#2 = "P"; |O #37#2 = "S";
               #19#13 = #19#13 - #37#10;
               #19#6 = #19#6 + #37#10;
               #19#185 = #19#185 + #37#16;
               #19#104 = #19#104 + #37#10;
               #19#193 = #19#193 + #37#16;
          |SINO;    || A, O, M
               #19#12 = #19#12 - #37#10;
               #19#6 = #19#6 - #37#10;
               #19#185 = #19#185 - #37#16;
          |FINSI;

          #17#0 = #37#3;
          #17#1 = #37#4;
          |LEE 121#17=;
          |SI FSalida = 0;
               |SI #37#2 = "P"; |O #37#2 = "S";
                    #17#9 = #17#9 - #37#10;
                    #17#5 = #17#5 + #37#10;
                    #17#47 = #17#47 + #37#16;
                    #17#39 = #17#39 + #37#10;
                    #17#48 = #17#48 + #37#16;
               |SINO;    || A, O, M
                    #17#8 = #17#8 - #37#10;
                    #17#5 = #17#5 - #37#10;
                    #17#47 = #17#47 - #37#16;
               |FINSI;
               |HAZ ValoraStock;
               |GRABA 020#17a;
               |LIBERA #17;

               |SI #142#118 = "S"; |Y #19#180 = "S";
                    |DDEFECTO #24;
                    #24#0 = #37#3;
                    #24#1 = #37#4;
                    #24#2 = #37#5;
                    |LEE 101#24=;
                    |SI FSalida ! 0;
                         #24#4 = #0#4;
                         #24#3 = #19#27;
                         |GRABA 020#24b;
                    |FINSI;
                    |SI #24#3 = "      "; #24#3 = #19#27; |FINSI;

                    |SI #37#2 = "P"; |O #37#2 = "S";
                         |SI #24#4 = "01.01.0000"; #24#4 = #0#4; |FINSI;
                         #24#9 = #24#9 + #37#10;
                         #24#10 = #24#10 + #37#16;
                         #24#31 = #24#31 + #37#10;
                         #24#32 = #24#32 + #37#16;
                         #24#22 = #24#22 + #37#10;
                         #24#23 = #24#23 + #37#16;
                    |SINO;
                         #24#5 = #0#4;
                         #24#11 = #24#11 + #37#10;
                         #24#12 = #24#12 + #37#16;
                         #24#31 = #24#31 - #37#10;
                         #24#32 = #24#32 - #37#16;
                         #24#22 = #24#22 - #37#10;
                         #24#23 = #24#23 - #37#16;
                    |FINSI;
                    |HAZ ValoraStock;
                    |GRABA 020#24a;
                    |LIBERA #24;
               |FINSI;
          |FINSI;
          |GRABA 020#19a;
          |LIBERA #19;
     |FINSI;
     |HAZ HistoProceLin;
|FPRC;

|PROCESO dsm00036;
     #19#0 = #36#4;
     |LEE 121#19=;
     |SI FSalida = 0;
          #19#12 = #19#12 - #36#7;
          #19#6 = #19#6 - #36#7;
          #19#185 = #19#185 - #36#8;

          #17#0 = #36#4;
          #17#1 = #36#5;
          |LEE 121#17=;
          |SI FSalida = 0;
               #17#8 = #17#8 - #36#7;
               #17#5 = #17#5 - #36#7;
               #17#47 = #17#47 - #36#8;
               |HAZ ValoraStock;
               |GRABA 020#17a;
               |LIBERA #17;

               |SI #142#118 = "S"; |Y #19#180 = "S";
                    |DDEFECTO #24;
                    #24#0 = #36#4;
                    #24#1 = #36#5;
                    #24#2 = #36#6;
                    |LEE 101#24=;
                    |SI FSalida ! 0;
                         #24#4 = #0#4;
                         #24#3 = #19#27;
                         |GRABA 020#24b;
                    |FINSI;
                    #24#5 = #0#4;
                    |SI #24#3 = "      "; #24#3 = #19#27; |FINSI;
                    #24#43 = #24#43 - #36#7;
                    #24#44 = #24#44 - #36#8;
                    #24#11 = #24#11 + #36#7;
                    #24#12 = #24#12 + #36#8;
                    #24#31 = #24#31 - #36#7;
                    #24#32 = #24#32 - #36#8;
                    #24#22 = #24#22 - #36#7;
                    #24#23 = #24#23 - #36#8;
                    |HAZ ValoraStock;
                    |GRABA 020#24a;
                    |LIBERA #24;
               |FINSI;
          |FINSI;
          |GRABA 020#19a;
          |LIBERA #19;
     |FINSI;

     #36#3 = "S";
     #36#35 = #0#4;
     |GRABA 020#36a;

     |HAZ HistoProceCab;
|FPRC;

|DEFBUCLE dsm00036;
     #36#1;
     2, 3;
     #0#0, #0#2, "N";
     #0#1, #0#3, "N";
     b;
     NULL, dsm00036, dsm00037;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |ABRE #142; |LEE 000#142p; |CIERRA #142;
     |ABRE #17;
     |ABRE #19;
     |ABRE #24;
     |ABRE #65;
     |BUCLE dsm00036;
     |CIERRA #65;
     |CIERRA #24;
     |CIERRA #19;
     |CIERRA #17;
|FPRC;
