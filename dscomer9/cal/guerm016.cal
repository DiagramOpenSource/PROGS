|FICHEROS;
  guerm014 #0;        || Mante Factu/Alba(C)
  guerm015 #1;        || Mante Factu/Alba(L)
  agifa024 #4;        || Clientes
  guerm005 #5;        || Control
  guerm016 #7;        || Este
  guerm004 #8;        || Camiones
|FIN;

|VARIABLES;
  nConta  = 0;
  aTipo   = "";
  &EURODB = 0;
  fecha     = @;
  hora      = "";
  &tipo     = "";
  &codpos   = "01010";
  &sumalin  = 0;
  &descrip = "";
  &programa = 0;
  nume = 0;
  traba = "";
  modifica = "";
  x = 0;
  alfa = "";
  alf1 = "";
{-1}menu  = "";
    menu1     = "2400";
    menu2     = "1";
    menu3     = "Elija:";
    menu4     = "A";
    menu5     = " Albaran ";
    opmenu    = 0;
    mensa = "";
|FIN;


|PROCESO Contador;
  |ABRE #5;
  |LEE 101#5p;
  #5#38 = #5#38 + 1;
  nConta = #5#38;
  |GRABA 101#5a;
  |CIERRA #5;
|FPRC;

|PROCESO Pinta;
  |PRINT;
|FPRC;

|PROCESO Imprime;
  nume = (#0#6 * 1000) + #0#7;
  traba = nume;
  traba = "00000" + traba;
  codpos = traba % -105;
  Impresora = #5#5;
  |QBF Impresora;
  |SI #5#6 = "N";
      |IMPRE -1;
  |SINO;
      |IMPRE 0;
  |FINSI;
  |SI FSalida ! 0;  |ACABA;  |FINSI;
  |INFOR "cantealm";
  |SI FSalida ! 0;  |FINIMP;  |ACABA;  |FINSI;
  |PARA x = 1;  |SI x [ #0#25;  |HACIENDO x = x + 1;
        |BUCLELIN 0Pinta#0;
        |PIEINF;
  |SIGUE;
  |FININF;
  |FINIMP;
|FPRC;

|PROCESO leecamion;
  |ABRE #8;
  #8#0 = #0#11;
  |LEE 101#8=;
  |SI FSalida = 0;
      #0#35 = #8#6;
      |SI #8#7 = #0#3;
          #0#35 = "N";
      |FINSI;
      |PINTA #0#35;
  |FINSI;
  |CIERRA #8;
|FPRC;

|PROGRAMA;
  |ABRE #0;

  |ABRE #5;
  |LEE 101#5p;
  |SI FSalida ! 0; |GRABA 021#5b; |FINSI;
  |CIERRA #5;

  |HAZ DecimalesBase;

  |CLS;
  |CABEZA "Salidas de Almacen";
|ET otra;

  |ABRE #5;
  |LEE 101#5p;
  #5#36 = #5#36 + 1;
  |GRABA 101#5a;
  |CIERRA #5;

  |DDEFECTO #0;
  |DDEFECTO #1;
  |PINPA #0#7;
  |PINDA #0#1;
  |PINDA #0#0;
  #0#0 = #5#36;
  fecha = ~;
  |HORA hora;
  #0#1 = fecha;
  #0#2 = hora;
  |PINTA #0#0;
  |PINTA #0#1;
  |PINTA #0#2;
  |ENDATOS #1#0;
  |SI FSalida ! 0;  |CIERRA #0;  |CIERRA #5;  |ACABA;  |FINSI;

|ET sigue;
  |MENU menu;
  |SI FSalida [ 0; |VETE sigue; |FINSI;
  |SI FSalida ] 0;
      opmenu = FSalida;
      |SI opmenu = 1;    ||......... Albaran
          aTipo = "A";
          |HAZ Contador;
          alfa = nConta;
          alfa = "000000" + alfa;
          alf1 = alfa % -106;
          ||tipo = "          " + alf1;
          tipo = #5#37 + " " + alf1;
          #0#15 = "A";     ||.. Tipo
          #0#18 = nConta;    ||.. N Albaran
          #0#40 = #5#38;       ||serie Albaran
          #0#19 = 0;       ||.. Cantidad
          #0#21 = 0;
          #0#22 = 0;
          #0#23 = 0;
          #0#24 = 0;
      |FINSI;
      |GRABA 021#0n;
      |LIBERA #0;

      |ABRE #8;
      #8#0 = #0#11; || Matricula
      |LEE 121#8=;
      |SI FSalida = 0;
          #8#4 = #0#1; || Fecha Ult. movimiento
          |GRABA 021#8a;
      |FINSI;
      |CIERRA #8;

      |HAZ Imprime;
      |VETE otra;
  |FINSI;
  |CIERRA #0;
  |CIERRA #5;
|FPRO;
---------------------------------------------

|PROCESO cliente; |TIPO 0;
  sumalin = #0#20;
  #0#14 = #5#3;
  |PINTA #0#14;
  modifica = "N";
  |SI #0#3 = 999999;  modifica = "S";  |FINSI;
  |C_M #0#4,  1, modifica;
  |C_M #0#5,  1, modifica;
  |C_M #0#6,  1, modifica;
  |C_M #0#7,  1, modifica;
  |C_M #0#9,  1, modifica;
  |C_M #0#10, 1, modifica;
  |SI #0#3 = 999999;
      |HAZ leecamion;
      |ACABA;
  |FINSI;
  |SI #0#3 ] 900000;
      |C_M #0#27, 1, "S";
  |SINO;
      #0#27 = 0;
      |PINTA #0#27;
      |C_M #0#27, 1, "N";
  |FINSI;
  |ABRE #4;
  |DDEFECTO #4;
  #4#0 = #0#3;
  |LEE 101#4=;
  |SI FSalida ! 0;
      |ERROR;
  |SINO;
      #0#4 = #4#1;    || Nombre
      #0#5 = #4#8;    || Direccion
      #0#6 = #4#181;  || Cp1
      #0#7 = #4#182;  || Cp2
      #0#8 = #4#10;   || Provincia
      #0#9 = #4#9;    || Poblacion
      #0#10= #4#15;   || CIF
      |PINTA #0#4;
      |PINTA #0#5;
      |PINTA #0#6;
      |PINTA #0#7;
      |PINTA #0#8;
      |PINTA #0#9;
      |PINTA #0#10;
  |FINSI;
  |CIERRA #4;
  |HAZ leecamion;
|FPRC;

컴컴컴컴컴컴컴컴컴
|PROCESO RefresHora7; |TIPO 7;
     |HAZ RefresHora0;
|FPRC;

|PROCESO RefresHora0; |TIPO 0;
     |HORA hora;
     #0#2 = hora;
     |PINTA #0#2;
|FPRC;
