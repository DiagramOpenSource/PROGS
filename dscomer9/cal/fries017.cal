|FICHEROS;
     fries017 #0;
     carm0001 #1;
     carm0002 #2;
     agifa069 #69;
     agifa084 #84;
     agifa010 #10;
     agifa071 #71;
     carw0001 #100; ||Tmp
     referen@;
|FIN;

|VARIABLES;
     nLinResPrime = 0;
     nLin = 0;
     aAlfa = "";
|FIN;

|PROCESO Cierra;
     |CIERRA #100;
|FPRC;

|PROCESO referen_1;
     #2#0 = #referen@#2;
     |LEE 000#2=;
     |SI FSalida = 0;
          |SI #2#1 = #71#2;
               #100#5 = #referen@#1;
               |LEE 000#100=;
               |SI FSalida ! 0;
                    |GRABA 020#100n;
                    nLin = #referen@#1;
                    |ERROR10;
               |FINSI;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE referen_1;
     #referen@#1003;
     ;
     #71#29, #71#0, 1;
     #71#29, #71#0, nLinResPrime;
     ;
     NULL, referen_1;
|FIN;

|PROCESO agifa071;
     #71#51 = 0;    || Unidades2

     #1#0 = #71#2;
     #1#1 = "01.01.0000";
     |LEE 000#1];
     |SI FSalida = 0; |Y #1#0 = #71#2;
          |SI nLinResPrime = 0;
               nLinResPrime = #71#1;
          |FINSI;
          |BUCLE referen_1;
          #71#51 = nLin;
          nLin = nLin + 1;
     |FINSI;

     |GRABA 020#71a;
     |LIBERA #71;
|FPRC;

|PROCESO agifa010;
     nLinResPrime = 0;
     nLin = 1;
     |DELINDEX #100;
     |ABRE #100;
|FPRC;

|DEFBUCLE agifa010;
     #10#7;
     ;
     #0#0, "     ", 000001;
     #0#1, "zzzzz", 999999;
     be;
     NULL, agifa010, agifa071, Cierra;
|FIN;

-----------------------
|PROCESO referen;
     #2#0 = #referen@#2;
     |LEE 000#2=;
     |SI FSalida = 0;
          |SI #2#1 = #69#2;
               #100#5 = #referen@#1;
               |LEE 000#100=;
               |SI FSalida ! 0;
                    |GRABA 020#100n;
                    nLin = #referen@#1;
                    |ERROR10;
               |FINSI;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE referen;
     #referen@#1003;
     ;
     #84#48, #84#0, 1;
     #84#48, #84#0, nLinResPrime;
     ;
     NULL, referen;
|FIN;

|PROCESO agifa069;
     #69#30 = 0;    || Unidades2

     #1#0 = #69#2;
     #1#1 = "01.01.0000";
     |LEE 000#1];
     |SI FSalida = 0; |Y #1#0 = #69#2;
          |SI nLinResPrime = 0;
               nLinResPrime = #69#1;
          |FINSI;
          |BUCLE referen;
          #69#30 = nLin;
          nLin = nLin + 1;
     |FINSI;

     |GRABA 020#69a;
     |LIBERA #69;
|FPRC;

|PROCESO agifa084;
     nLinResPrime = 0;
     nLin = 1;
     |DELINDEX #100;
     |ABRE #100;
|FPRC;

|DEFBUCLE agifa084;
     #84#4;
     ;
     "     ", #0#0, 000001;
     "zzzzz", #0#1, 999999;
     be;
     NULL, agifa084, agifa069, Cierra;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |SI #0#4 ! "SI"; |ACABA; |FINSI;

     aAlfa = Usuario; |NOME_DAT #100 aAlfa; |DELINDEX #100;

     |SI #0#3 = "S";
          |DDEF aAlfa;
          aAlfa = aAlfa + "agifa069";
          |CARGA_DEF aAlfa, referen@;
          |SI FSalida = 0;
               |ABRE #1;
               |ABRE #2;
               |BUCLE agifa084;
               |CIERRA #1;
               |CIERRA #2;
               |DESCARGA_DEF #referen@;
          |FINSI;
     |FINSI;

     |SI #0#2 = "S";
          |DDEF aAlfa;
          aAlfa = aAlfa + "agifa071";
          |CARGA_DEF aAlfa, referen@;
          |SI FSalida = 0;
               |ABRE #1;
               |ABRE #2;
               |BUCLE agifa010;
               |CIERRA #1;
               |CIERRA #2;
               |DESCARGA_DEF #referen@;
          |FINSI;
     |FINSI;

     |DELINDEX #100;
|FPRC;
