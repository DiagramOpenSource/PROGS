|FICHEROS;
     ialbm009 #0;
     ialbm010 #1;
     ialbm002 #2;
     agifa019 #19;
     dsw00098 #98;  || Agrupa Art
|FIN;

|VARIABLES;
     &Tempo = "";
     informe = "ialbm009";
     aAlfa = "";
|FIN;

|CALCULO impres;|TIPO 0;
    |PRINT;
|FCAL;

|PROCESO Agrupa;
     |DDEFECTO #19;
     #19#0 = #1#2;
     |LEE 000#19=;

     |DDEFECTO #98;
     #98#0 = #1#2;
     #98#1 = #1#4;
     |SI #19#215 ! "S";
          #98#2 = #1#0;
     |FINSI;
     |LEE 101#98=;
     |SI FSalida ! 0; |GRABA 020#98b; |FINSI;
     #98#6 = #1#0;
     #98#8 = #98#8 + #1#11;
     #98#9 = #98#9 + #1#12;
     |GRABA 020#98a;
     |LIBERA #98;
|FPRC;

|PROCESO Imprime;
     #1#1 = #0#0;
     #1#0 = #98#6;
     |LEE 020#1=;
     #1#11 = #98#8;
     #1#12 = #98#9;
     |PRINT;
|FPRC;

|DEFBUCLE Imprime;
     #98#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Imprime;
|FIN;

|CALCULO carton;|TIPO 4;
    |IMPRE 0;
    |SI FSalida = 0;
       |INFOR informe;
       |SI FSalida = 0;
           |HAZ CreaTempo; |NOME_DAT #98 Tempo; |DELINDEX #98;
           |ABRE #19;
           |ABRE #98;
           |BUCLELIN 2Agrupa#0;
           |CIERRA #19;
           |CIERRA #98;
           |ABRE #1;
           |BUCLE Imprime;
           |CIERRA #1;
           |PIEINF;
           |FININF;
           |FINIMP;
           |DELINDEX #98; |HAZ BoraTempo;
       |SINO;
          aAlfa = "0000Error en informe '" + informe + "'";
          |MENAV aAlfa;
       |FINSI;
    |FINSI;
  |FCAL;

|CALCULO mesin;|TIPO 7;
    #0#10 = #0#8 % 402;
|FCAL;

|CALCULO mesfin;|TIPO 7;
    #0#11 = #0#9 % 402;
|FCAL;

|PROCESO Matricula7; |TIPO 7;
     |ABRE #19;
     #19#0 = #1#2;
     |LEE 000#19=;
     |CIERRA #19;
     aAlfa = #19#174; |QBT aAlfa;
     |SI aAlfa = "S";
          |MODO_RELACION #1, 4, "ialbm002", "S", "S";
     |SINO;
          |MODO_RELACION #1, 4, "ialbm002", "N", "N";
     |FINSI;
     |CIERRA #19;
|FPRC;
