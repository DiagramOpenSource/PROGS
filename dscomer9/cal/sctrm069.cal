|FICHEROS;
     sctrm069 #0;
     sctrm012 #12;
     sctrm052 #52;
     sctrz084 #84,MANTE;
     referen@;
|FIN;

|VARIABLES;
     &Tempo = "";
     aAlfa = "";
     nModo = 0;
     nBtnViajes = -1;
     nBtnPax = -1;
     nPanta = 0;
|FIN;

|PROCESO Linea; |TIPO 0;
     nModo = (FEntrada / 100) ! 0;
     |SI FSalida = 13;
          |ABRE #12;
          #12#0 = #0#0;
          |LEE 000#12];
          |CONSULTA_CLAVE #1#12;
          |SI FSalida = 0;
               #0#0 = #12#0; |PINTA #0#0;
          |SINO;
               |ERROR;
               |ACABA;
          |FINSI;
          |CIERRA #12;
     |FINSI;

     |SI nModo = 1;
          |ABRE #12;
          #12#0 = #0#0;
          |LEE 000#12=;
          |SI FSalida ! 0;
               |MENAV "0000No existe l¡nea servicio...";
          |SINO;
               |HAZ T69_13;
          |FINSI;
          |CIERRA #12;
     |FINSI;
|FPRC;

|PROCESO T69_13; |TIPO 13;
     |ABRE #12;
     #12#0 = #0#0;
     |LEE 000#12=;
     |SI FSalida ! 0; |DDEFECTO #12; |FINSI;
     |CIERRA #12;

     |PINTA 1123, #12#1;
|FPRC;

|PROCESO T14; |TIPO 14;
     |SI nBtnViajes = -1;
          nBtnViajes = 0;
          |PINPA #0#0; nPanta = FSalida;
          |PINDA #0#0;
          |CONTROL_SIMPLE nPanta, "BOTON,{{137}}Consulta Viajes", 1085, 1199, BtnViajes;
          nBtnViajes = FSalida;
          |CONTROL_SIMPLE nPanta, "BOTON,{{137}}Consulta Pax L¡nea", 1385, 1499, BtnPax;
          nBtnPax = FSalida;
     |FINSI;
|FPRC;

|PROCESO Reserva;
     |SALVA_DATOS #52;
     |REPON_DATOS #referen@;
     |GRABA 020#referen@.n;
|FPRC;

|DEFBUCLE ReseIda;
     #52#2;
     ;
     #84#0, 000000, 0000000;
     #84#0, 999999, 9999999;
     ;
     NULL, Reserva;
|FIN;

|DEFBUCLE ReseVuelta;
     #52#3;
     ;
     #84#0, 000000, 0000000;
     #84#0, 999999, 9999999;
     ;
     NULL, Reserva;
|FIN;

|PROCESO T12; |TIPO 12;
|FPRC;

|PROCESO BtnViajes;
     |VENTANA 1333, 1965, -1, 17, "Consulta Viajes";
     |HAZ PushVenModal;
     |PINPA #0#84;
     |PINDA #0#84;
     |ENDATOS #1#84;
     |SI FSalida = 0;
          |DDEF aAlfa;
          aAlfa = aAlfa + "sctrm052";
          |CARGA_DEF aAlfa, referen@;
          |SI FSalida = 0;
               |HAZ CreaTempo; |NOME_DAT #referen@#Tempo#; |DELINDEX #referen@;
               |ABRE #referen@;
               |BUCLE ReseIda;
               |BUCLE ReseVuelta;
               |LEE 000#referen@.p;
               |SI FSalida = 0;
                    |CONSULTA_CLAVE #1#referen@;
               |SINO;
                    |MENAV "0000No hay viajes para la fecha indicada...";
               |FINSI;
               |CIERRA #referen@;
               |DELINDEX #referen@;
               |DESCARGA_DEF #referen@;
          |FINSI;
     |FINSI;
     |HAZ PopVenModal;
|FPRC;

|PROCESO CtrlViajeLin;
     |SALVA_DATOS #0;
     |REPON_DATOS #referen@;
     |GRABA 020#referen@.n;
|FPRC;

|DEFBUCLE CtrlViajeLin;
     #0#2;
     ;
     #84#0, " ", 000;
     #84#0, "z", 999;
     ;
     NULL, CtrlViajeLin;
|FIN;

|PROCESO BtnPax;
     |VENTANA 1333, 1965, -1, 17, "Consulta Pax L¡nea";
     |HAZ PushVenModal;
     |PINPA #0#84;
     |PINDA #0#84;
     |ENDATOS #1#84;
     |SI FSalida = 0;
          |DDEF aAlfa;
          aAlfa = aAlfa + "sctrm069";
          |CARGA_DEF aAlfa, referen@;
          |SI FSalida = 0;
               |HAZ CreaTempo; |NOME_DAT #referen@#Tempo#; |DELINDEX #referen@;
               |ABRE #referen@;
               |SALVA_FICHA #0;
               |BUCLE CtrlViajeLin;
               |REPON_FICHA #0;
               |LEE 000#referen@.p;
               |SI FSalida = 0;
                    |CONSULTA_CLAVE #1#referen@;
               |SINO;
                    |MENAV "0000No hay control viajeros para la fecha indicada...";
               |FINSI;
               |CIERRA #referen@;
               |DELINDEX #referen@;
               |DESCARGA_DEF #referen@;
          |FINSI;
     |FINSI;
     |HAZ PopVenModal;
|FPRC;
