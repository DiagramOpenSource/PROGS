|FICHEROS;
     marhu339 #0;
     marhu341 #1;
     agifa134 #134;
     agifa059 #59;
     agifa010 #10;
     agifa071 #71;
     agifa024 #24;
     agifa025 #25;
     agifa142 #142;
|FIN;

|VARIABLES;
     &Tempo    = "";
     aTempo1   = "";
     nAbo      = 0;
     aRep      = "";
     nHay      = 0;
     aAlfa     = "";
     aInforme  = "marhu339";
     nBaseComi = 0;
     nImpoComi = 0;
     nBruto    = 0;
     nDto      = 0;
|FIN;

|PROCESO Tmp;
     |SI nHay = 0;
          nHay  = 1;
          aRep = #1#2;
     |FINSI;

     |DDEFECTO #24;
     #24#0 = #1#3;
     |LEE 000#24=;

     |DDEFECTO #25;
     #25#0 = #1#2;
     |LEE 000#25=;
     |SI #1#2 ! aRep;
          |PIEINF;
          aRep = #1#2;
     |FINSI;
     |PRINT;
|FPRC;

|DEFBUCLE Tmp;
     #1#2;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Tmp;
|FIN;

|PROCESO agifa071;
     nBaseComi = #71#9 < #10#5;
     nBaseComi = nBaseComi < #10#32;
     |SI #142#115 = "S";
          nBaseComi = nBaseComi < #10#7;
     |FINSI;
     nImpoComi = nBaseComi % #71#10;

     nBruto = #71#5 * #71#6;
     nDto = ((nBruto < #71#8) < #71#33);
     nDto = (((nDto < #10#5) < #10#32) < #10#7);
     nDto = nBruto - nDto;

     |DDEFECTO #1;
     #1#0 = #134#49;
     #1#1 = #134#0;
     #1#6 = #71#10; ||%Comi
     |LEE 101#1=;
     #1#2 = #134#7;
     #1#3 = #134#2;
     #1#4 = #134#1;
     #1#5 = #1#5 + (nBaseComi * nAbo);
     #1#7 = #1#7 + (nImpoComi * nAbo);
     #1#8 = #1#8 + (nBruto * nAbo);
     #1#9 = #1#9 + (nDto * nAbo);
     #1#10 = #1#10 + (#71#14 * nAbo);
     |SI FSalida = 0;
          |GRABA 020#1a;
     |SINO;
          |GRABA 020#1n;
     |FINSI;
     |LIBERA #1;
|FPRC;

|PROCESO agifa059;
     |SI #134#57 = "S";
          nAbo = -1;
     |SINO;
          nAbo = 1;
     |FINSI;
     #10#52 = #59#15;
     #10#0 = #59#2;
     |LEE 000#10=;
     |SI FSalida = 0;
          |BUCLELIN 2 agifa071 #10;
     |FINSI;
|FPRC;

|DEFBUCLE agifa134;
     #134#3;
     ;
     "      ", #0#4, #0#0, #0#2;
     "zzzzzz", #0#5, #0#1, #0#3;
     ;
     NULL, NULL, agifa059;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |ABRE #142; |LEE 000#142=; |CIERRA #142;

     |HAZ CreaTempo; aTempo1 = Tempo;
     |NOME_DAT #1 aTempo1; |DELINDEX #1;

     |IMPRE 0;
     |SI FSalida = 0;
          |INFOR aInforme;
          |SI FSalida = 0;
               |ABRE #10;
               |ABRE #1;
               |BUCLE agifa134;
               |CIERRA #1;
               |CIERRA #10;

               |ABRE #24;
               |ABRE #25;
               |BUCLE Tmp;
               |CIERRA #25;
               |CIERRA #24;

               |SI nHay ! 0; |PIEINF; |FINSI;
               |FININF;
          |FINSI;
          |FINIMP;
     |FINSI;

     |DELINDEX #1; Tempo = aTempo1; |HAZ BoraTempo;
|FPRC;
