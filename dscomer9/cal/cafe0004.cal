|FICHEROS;
     cafe0004 #0;
     cafe0001 #1;
     agis0002 #2;
     agifa024 #24;
|FIN;

|VARIABLES;
     aAlfa = "";
     aAlfa1 = "";
     aAlfa2 = "";
     aAlfa3 = "";
     aRefer = "";
     nCalc = 0;
|FIN;

|PROCESO agis0002;
     |SI #2#16 ] #0#0; |Y #2#16 [ #0#1; |Y #2#22 = 2;
          aAlfa = #2#33 % 0104;
          #1#5 = aAlfa;
          #1#0 = #2#31;
          |LEE 000#1=;
          |SI FSalida ! 0;
               |DDEFECTO #24;
               #24#0 = #2#2;
               |LEE 000#24=;

               |DDEFECTO #1;
               aAlfa = #2#33 % 0104;
               #1#5 = aAlfa;
               #1#0 = #2#31;
               aAlfa = #24#0 + "-" + #24#2;
               #1#1 = aAlfa;
               #1#2 = #2#7;

               aRefer = #2#33;
               aAlfa = aRefer % 1902; nCalc = aAlfa;
               aAlfa1 = aRefer % 1502; |QBF aAlfa1; aAlfa1 = ("00" + aAlfa1) % -102;
               aAlfa2 = aRefer % 1702; |QBF aAlfa2; aAlfa2 = ("00" + aAlfa2) % -102;
               aAlfa3 = aRefer % 1902; |QBF aAlfa3;
               aAlfa = aAlfa1 + "." + aAlfa2 + ".";
               |SI aAlfa3 ! "";
                     |SI nCalc > 80;
                         aAlfa = aAlfa + "19";
                     |SINO;
                         aAlfa = aAlfa + "20";
                     |FINSI;
                     aAlfa = aAlfa + (aRefer % 1902);
               |SINO;
                    aAlfa = aAlfa + "0000";
               |FINSI;

               #1#3 = aAlfa;
               #1#4 = #2#28;
               |GRABA 020#1n;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE agis0002;
     #2#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, agis0002;
|FINSI;

|PROCESO Tipo3; |TIPO 3;
     |ABRE #24;
     |ABRE #1;
     |BUCLE agis0002;
     |CIERRA #1;
     |CIERRA #24;
|FPRC;
