|FICHEROS;
     sctrz087 #0;
     sctrm052 #52;
     sctrm069 #69;
     sctrw021 #21;
|FIN;

|VARIABLES;
     aAlfa = "";
     enPax = 0;
     enLinea = 0;
     eaSentido = "";
     nNume = 0;
     efFechaViaje = @;
|FIN;

|PROCESO CtrlViajerosAct;
     |DDEFECTO #69;
     #69#0 = enLinea;
     #69#1 = eaSentido;
     #69#2 = efFechaViaje;
     |LEE 101#69=;
     |SI FSalida ! 0; |GRABA  020#69b; |FINSI;
     #69#4 = #69#4 + enPax;
     |GRABA 020#69a;
     |LIBERA #69;
|FPRC;

|PROCESO sctrm052;
/*
     #21#0 = #52#0;
     |LEE 000#21=;
     |SI FSalida = 0;
          |ACABA;
     |FINSI;
     |GRABA 020#21n;
*/
     |SI #52#52 ! "A";
          enPax = 1;
          enLinea = #52#75;
          eaSentido = #52#101;
          nNume = #52#20 - #52#99 + 1;
          efFechaViaje = nNume;
          |HAZ CtrlViajerosAct;
     |FINSI;
     |SI #52#53 ! "A";
          |SI #52#17 ] 2; |Y #52#26 ! "01.01.0000";
               enPax = 1;
               enLinea = #52#80;
               eaSentido = #52#102;
               nNume = #52#26 - #52#100 + 1;
               efFechaViaje = nNume;
               |HAZ CtrlViajerosAct;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE sctrm052_I;
     #52#2;
     ;
     #0#0, 000000, 000000000;
     #0#1, 999999, 999999999;
     ;
     NULL, sctrm052;
|FIN;

|DEFBUCLE sctrm052_V;
     #52#3;
     ;
     #0#0, 000000, 000000000;
     #0#1, 999999, 999999999;
     ;
     NULL, sctrm052;
|FIN;
/*
|DEFBUCLE sctrm052;
     #52#5;
     ;
     #0#0, 0000, 0000000;
     #0#1, 9999, 9999999;
     ;
     NULL, sctrm052;
|FIN;
*/
|PROCESO sctrm069;
     #69#4 = 0;
     |GRABA 020#69a;
|FPRC;

|DEFBUCLE sctrm069;
     #69#2;
     ;
     #0#0, " ", 000;
     #0#1, "z", 999;
     be;
     NULL, sctrm069;
|FIN;

|PROCESO Min;
     #69#2 = #0#0;
     #69#1 = " ";
     #69#0 = 0;
|FPRC;

|PROCESO Max;
     #69#2 = #0#1;
     #69#1 = "z";
     #69#0 = 999;
|FPRC;

|PROCESO T3; |TIPO 3;
     |BUCLE sctrm069;

     aAlfa = Usuario;
     |NOME_DAT #21 aAlfa; |DELINDEX #21; |ABRE #21;

     |ABRE #69;

||     |BUCLE sctrm052;

     |BUCLE sctrm052_I;
     |BUCLE sctrm052_V;

     |SELECT #2#69;
     #69#2 = #0#0;
     #69#1 = "";
     #69#0 = 0;
     |LEE 000#69];
     |CONSULTA_F_CLAVE #2#69, Min, Max;

     |CIERRA #69;

     |CIERRA #21; |DELINDEX #21;
|FPRC;
