|FICHEROS;
     pcegz030 #0;
     pcegm017 #17,MANTE;
     agifa019 #19;
|FIN;

|VARIABLES;
     aFich = "";
     aEmp = "";
     aArti = "";
     nPanta0 = 0;
     nGrid = 0;
     aFichero = "";
     nHandle = 0;
     nPos1 = 0;
     nPos2 = 0;
     nRango = 0;
     aEsc1 = "";
     aEsc2 = "";
     aRetu = "";
     aTecla = "";
|FIN;

|PROCESO Tipo0; |TIPO 0;
     |ABRE #19;
     #19#0 = #17#1;
     |LEE 000#19=;
     |SI FSalida = 0;
          #17#2 = #19#1; |PINTA #17#2;
     |SINO;
          |MENAV "0000No existe articulo...";
          |ERROR;
     |FINSI;
     |CIERRA #19;
|FPRC;

|PROCESO Tipo66; |TIPO 66;
     |ABRE #19;
     #19#0 = #17#1;
     |LEE 000#19];
     |CONSULTA_CLAVE #1#19;
     |SI FSalida = 0;
          #17#1 = #19#0; |PINTA #17#1;
          #17#2 = #19#1; |PINTA #17#2;
     |SINO;
          |ERROR;
     |FINSI;
     |CIERRA #19;
|FPRC;

|PROCESO LeeTxt;
     |DBASE aFich;
     aFich = aFich + "fich/";
     aFichero = aFich + "A" + (Usuario % 810);
     |XABRE "", aFichero, nHandle;

     |XLEE nHandle, 250, aEmp;
     |XLEE nHandle, 250, aArti;

     |XCIERRA nHandle;
|FPRC;

|PROCESO Evento;
     |SI FSalida = 1;  |O FSalida = 2;
          |LEE 000#17=;

          |DDEFECTO #19;
          |ABRE #19;
          #19#0 = #17#1;
          |LEE 000#19=;
          |CIERRA #19;
          #0#2 = #19#6; |PINTA #0#2;
          #0#3 = #19#12; |PINTA #0#3;
          #0#4 = #19#104; |PINTA #0#4;

     |FINSI;
|FPRC;

|PROCESO Max;
     #17#0 = aArti;
     #17#1 = "z" * 20;
|FPRC;

|PROCESO Min;
     #17#0 = aArti;
     #17#1 = " " * 20;
|FPRC;

|PROCESO Tipo80; |TIPO 80;
     FSalida = 3599;
|FPRC;

|PROGRAMA;
     |CLS;

     |PINPA #0#0;  nPanta0 = FSalida;
     |PINDA #0#0;

     |HAZ LeeTxt;

     |ABRE #19;
     #19#0 = aArti;
     |LEE 000#19=;
     |CIERRA #19;

     #0#0 = #19#0; |PINTA #0#0;
     #0#1 = #19#1; |PINTA #0#1;

     |ABRET #17;

     nRango = 1 +  4 + 8 + 16 + 32;
     nPos1 = 1102;
     nPos2 = 3498;
     |LINEAL_SIMPLE #1#17, nRango, nPos1, nPos2, Min, Max, Evento;
     nGrid = FSalida;

     aEsc1 = &255 + "806";
     aEsc2 = &255 + "807";
     aRetu = &255 + "802";
     |PARA; |SI; |HACIENDO;
         FSalida = "::{{001}}Salir," + nGrid;
         |LEETECLA aTecla;
         |SI aTecla = aEsc1; |SAL;  |FINSI;
         |SI aTecla = aEsc2; |SAL;  |FINSI;
         |SI aTecla = aRetu; |SAL;  |FINSI;
     |SIGUE;

     |CIERRAT #17;

     |DESTRUYECONTROL nGrid;
     |PULSATECLA;
|FPRO;
