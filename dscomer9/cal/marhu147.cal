|FICHEROS;
     marhu147 #0;            || Este Fichero
     marhu048 #148;           || Pase de stocks
     agifa017 #17;           || Articulo / Almacen
     agifa019 #19;           || Articulos
     agifa065 #65;           || Historico
|FIN;

|VARIABLES;
     stocktotal = 0;
     nSalida    = 0;
     linea      = 0;
     documento  = 0;
|FIN;

|PROCESO Graba017;
    #17#0=#148#0;
    #17#1=#0#1;
    |LEE 000#17=;
    nSalida = FSalida;
    #17#5 = #148#1;
    #17#39= #148#1;
    |SI nSalida = 0;
        |GRABA 020#17a;
    |SINO;
        |GRABA 020#17n;
    |FINSI;
     #19#0 = #148#0;
     |LEE 000#19=;
     |SI FSalida = 0;
         #19#6 = #148#1;
         #19#104 = #148#1;
     |FINSI;
|FPRC;

|PROCESO Graba065;
     |DDEFECTO #65;
     documento = documento + 1;
     linea = linea + 1;
     |SI linea > 99999; linea = linea + 1; |FINSI;
     #65#0 = #148#0;
     #65#1 = ~;
     #65#2 = "ES";
     #65#3 = documento;
     #65#4 = linea;
     #65#5 = #0#1;
     #65#6 = #148#1;
     |GRABA 020#65n;
     |PINTA 2020,"Grabado histórico: ";
     |PINTA 2120,#148#0;
|FPRC;

|PROCESO marhu048_1;
     |HAZ Graba017;
     |HAZ Graba065;
|FPRC;

|DEFBUCLE marhu048;
#148#1;
;
INICIO;
FINAL;
be;
NULL,marhu048_1;
|FIN;


|PROGRAMA;
     |CLS;
     |CABEZA "Stocks Iniciales";
     |ABRE #0;
     |PINPA #0#0;
     |ENDATOS #1#0;
     |SI FSalida=0;|Y #0#0="S";
         |ABRE #17;
         |ABRE #19;
         |ABRE #65;
         |BUCLE marhu048;
         |CIERRA #17;
         |CIERRA #19;
         |CIERRA #65;
     |FINSI;
|FPRO;
