|FICHEROS;
     agifa200 #0;
     agif0041 #1;
     agifa142 #142;
|FIN;

|VARIABLES;
     &fichero  = "";

     cab       = "Control Empresas";
     empresa   = "";
     base      = "";
     long      = "";

     longi     = 0;
     i         = 0;
     empresa1  = 0;

     swpa019   = 0;
     swpa024   = 0;
     swpa112   = 0;
     swpa003   = 0;
     &sinver   = 0;
|FIN;


|PROCESO pro1;
 #0#1 = 1;
|FPRC;

|PROCESO pro2;
 #0#0 = 99999;
|FPRC;

|PROCESO empres; |TIPO 0;
 |SI empresa1 = #0#0;
     |MENAV "0000Ya esta en esta Empresa";
     |ERROR;
 |FINSI;
|FPRC;

|PROCESO inicio;
     |DFICE empresa;
     |QBF empresa;
     long = empresa % 0;
     longi = long - 2;
     long = longi + "05";
     empresa = empresa % long;
     empresa1 = empresa;
     |DFICB base;
     |QBF base;
     |PATH_DAT #1 base;
     |ABRE #1;
|FPRC;

|PROCESO lee_campo; |TIPO 0;
     |SI FSalida = 10;
          |SI Campo = 1; |O Campo = 2;  fichero = "agifa024"; |FINSI;
          |SI Campo = 4; |O Campo = 5;  fichero = "agifa019"; |FINSI;
          |SI Campo = 7; |O Campo = 8;  fichero = "agifa112";  |FINSI;
          |SI Campo = 10; |O Campo = 11;  fichero = "dsm00003"; |FINSI;
          |SI Campo = 13; |O Campo = 14;  fichero = "agifa023"; |FINSI;
          |SI Campo = 16; |O Campo = 17;  fichero = "dsm00123"; |FINSI;
          |SI Campo = 19; |O Campo = 20;  fichero = "agifa095"; |FINSI;
          |SI Campo = 22; |O Campo = 23;  fichero = "dsm00210"; |FINSI;
          |SI Campo = 25; |O Campo = 26;  fichero = "dsm00212"; |FINSI;
          |SI Campo = 28; |O Campo = 29;  fichero = "agifa039"; |FINSI;
          |SI Campo = 31; |O Campo = 32;  fichero = "agifa310"; |FINSI;
          |SI Campo = 34; |O Campo = 35;  fichero = "agifa290"; |FINSI;
          |SI Campo = 37; |O Campo = 38;  fichero = "dsm00117"; |FINSI;
          |SI Campo = 40; |O Campo = 41;  fichero = "dsm00209"; |FINSI;
          |SI Campo = 43; |O Campo = 44;  fichero = "dsm00211"; |FINSI;
          |SI Campo = 46; |O Campo = 47;  fichero = "agifa281"; |FINSI;
          sinver = 0;
          |SUB_EJECUTA_NP "agifa208.run";
          |ERROR;
     |FINSI;
|FPRC;

|PROCESO grabo_campo;
     sinver = 1;
     fichero = "agifa024";|SUB_EJECUTA_NP "agifa208.run";
     fichero = "agifa019";|SUB_EJECUTA_NP "agifa208.run";
     fichero = "agifa112";|SUB_EJECUTA_NP "agifa208.run";
     fichero = "dsm00003";|SUB_EJECUTA_NP "agifa208.run";
     fichero = "agifa023";|SUB_EJECUTA_NP "agifa208.run";
     fichero = "dsm00123";|SUB_EJECUTA_NP "agifa208.run";
     fichero = "agifa095";|SUB_EJECUTA_NP "agifa208.run";
     fichero = "dsm00210";|SUB_EJECUTA_NP "agifa208.run";
     fichero = "dsm00212";|SUB_EJECUTA_NP "agifa208.run";
     fichero = "agifa039";|SUB_EJECUTA_NP "agifa208.run";
     fichero = "agifa310";|SUB_EJECUTA_NP "agifa208.run";
     fichero = "agifa290";|SUB_EJECUTA_NP "agifa208.run";
     fichero = "dsm00117";|SUB_EJECUTA_NP "agifa208.run";
     fichero = "dsm00209";|SUB_EJECUTA_NP "agifa208.run";
     fichero = "dsm00211";|SUB_EJECUTA_NP "agifa208.run";
|FPRC;

|PROCESO mayus200;
 #0Campo = #0Campo > " ";
 |PINTA #0Campo;
|FPRC;


|PROGRAMA;
     |ABRE #142; |LEE 000#142p; |CIERRA #142;

     |SI #142#28 = "N";
          |MENAV "0000ATENCION: Control de Empresas no activo en Parametros Generales...";
     |SINO;
          |CLS;
          |CABEZA cab;
          |PINPA #0#0;
          |HAZ inicio;
          |ENTLINEAL #1#0 , -1 , 1 , 22 , 1 , pro1 , pro2;
          |HAZ grabo_campo;
          |CIERRA #1;
     |FINSI;
|FPRO;
