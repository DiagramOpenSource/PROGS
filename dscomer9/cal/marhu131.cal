|FICHEROS;
     marhu131 #0 ;           || Este Fichero
     marhu032 #32;           || Pase de stocks
     agifa017 #17;           || Articulo / Almacen
     agifa019 #19;           || Articulos
     agifa065 #65;           || Historico
|FIN;

|VARIABLES;
     stocktotal = 0;
     nSalida    = 0;
     linea      = 0;
     documento  = 0;
|FIN;

|PROCESO Graba017;
    #17#0=#32#0;
    #17#1=#0#1;
    |LEE 000#17=;
    nSalida = FSalida;
    stocktotal = #32#2 + #32#3;
    #17#5 = #32#2;
    |SI nSalida = 0;
        |GRABA 020#17a;
    |SINO;
        |GRABA 020#17n;
    |FINSI;
    #17#0=#32#0;
    #17#1=#0#2;
    |LEE 000#17=;
    nSalida = FSalida;
    #17#5 = #32#3;
    |SI nSalida = 0;
        |GRABA 020#17a;
    |SINO;
        |GRABA 020#17n;
    |FINSI;
     #19#0 = #32#0;
     |LEE 000#19=;
     |SI FSalida = 0;
         #19#6 = stocktotal;
     |FINSI;
|FPRC;

|PROCESO Graba065;
     |DDEFECTO #65;
     documento = documento + 1;
     linea = linea + 1;
     |SI linea > 99999; linea = linea + 1; |FINSI;
     #65#0 = #32#0;
     #65#1 = ~;
     #65#2 = "ES";
     #65#3 = documento;
     #65#4 = linea;
     #65#5 = #0#1;
     #65#6 = #32#2;
     |GRABA 020#65n;
     |DDEFECTO #65;
     documento = documento + 1;
     linea = linea + 1;
     |SI linea > 99999; linea = linea + 1; |FINSI;
     #65#0 = #32#0;
     #65#1 = ~;
     #65#2 = "ES";
     #65#3 = documento;
     #65#4 = linea;
     #65#5 = #0#2;
     #65#6 = #32#3;
     |GRABA 020#65n;
|FPRC;

|PROCESO Graba019;
    stocktotal = 0;
     #19#0 = #32#0;
     |LEE 000#19=;
     nSalida = FSalida;
     #19#1 = #32#4;
     #19#18= #32#5;
     #19#130 = "S";
     #19#128 = #32#1;
     #19#2 = #32#6;
     |SI nSalida = 0;
         |GRABA 020#19a;
     |SINO;
         |GRABA 020#19n;
     |FINSI;
|FPRC;

|PROCESO marhu032_1;
     |HAZ Graba019;
     |HAZ Graba017;
     |HAZ Graba065;
|FPRC;

|DEFBUCLE marhu032;
#32#1;
;
INICIO;
FINAL;
be;
NULL,marhu032_1;
|FIN;


|PROGRAMA;
     |CLS;
     |CABEZA "Conversion Stocks";
     |ABRE #0;
     |PINPA #0#0;
     |ENDATOS #1#0;
     |SI FSalida=0;|Y #0#0="S";
         |ABRE #17;
         |ABRE #19;
         |ABRE #65;
         |BUCLE marhu032;
         |CIERRA #17;
         |CIERRA #19;
         |CIERRA #65;
     |FINSI;
|FPRO;
