|FICHEROS;
     coimz039;
     coima018;
     coima019;
     coima020;
     coima028;
     agifa019;
|FIN;

|VARIABLES;
     aFoto = "";
     aOrg = "";
     aDes = "";
     aPathDes = "";
     aLogo = "";
     aNom = "";
     aLon = "";
     aCar = "";
     aBase = "";
     i = 0;
     nPos = 0;
|FIN;

|PROCESO SacaNom;
     aLon = aFoto % A0;
     aNom = "";
     |PARA i = 1; |SI i [ aLon; |HACIENDO i = i + 1;
          nPos = -(i * 100 + 1)
          aCar = aFoto % nPos;
          |SI aCar = "\"; |O aCar = "/"; |SAL; |FINSI;
          aNom = aCar + aNom;
     |SIGUE;
|FPRC;

|PROCESO Subelo;
     |QBF aFoto;
     |HAZ SacaNom;

     aOrg = aFoto;
     |XABRE "EC", aOrg, 0;
     |SI FSalida < 0;  |ACABA;  |FINSI;

     aDes = aPathDes + aNom;
     |XABRE "E", aDes, 0;
     |SI FSalida ] 0;  |ACABA;  |FINSI;

     |RECIBE_FICHERO aOrg, aDes;
|FPRC;

|PROCESO coima018;
     aFoto = #coima018#2; |HAZ Subelo;
|FPRC;

|DEFBUCLE coima018;
     #coima018#1;
     ;
     #coimz039#0;
     #coimz039#1;
     ;
     NULL, coima018;
|FIN;

|PROCESO coima019;
     aFoto = #coima019#3; |HAZ Subelo;
     aFoto = #coima019#13; |HAZ Subelo;
|FPRC;

|DEFBUCLE coima019;
     #coima019#1;
     ;
     #coimz039#0, #coimz039#2;
     #coimz039#1, #coimz039#3;
     ;
     NULL, coima019;
|FIN;

|PROCESO coima020;
     aFoto = #coima020#5;  |HAZ Subelo;
|FPRC;

|DEFBUCLE coima020;
     #coima020#1;
     ;
     #coimz039#0, #coimz039#2, #coimz039#4, #coimz039#6;
     #coimz039#1, #coimz039#3, #coimz039#5, #coimz039#7;
     ;
     NULL, coima020;
|FIN;

|PROCESO coima028;
     aFoto = #coima028#2; |HAZ Subelo;
|FPRC;

|DEFBUCLE coima028;
     #coima028#1;
     ;
     #coimz039#0, #coimz039#8;
     #coimz039#1, #coimz039#9;
     ;
     NULL, coima028;
|FIN;

|PROCESO agifa019;
     aFoto = "C:\fotos\" + #agifa019#0;  |QBF aFoto;
     aFoto = aFoto + ".jpg";
     |HAZ Subelo;
|FPRC;

|DEFBUCLE agifa019;
     #agifa019#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, agifa019;
|FIN;

|PROCESO T3; |TIPO 3;
     |DBASE aBase;
     aPathDes = aBase + "000web";           |MKDIR aPathDes;
     aPathDes = aBase + "000web/fotos";     |MKDIR aPathDes;
     aPathDes = aBase + "000web/fotos/";

     |BUCLE coima018;
     |BUCLE coima019;
     |BUCLE coima020;
     |BUCLE coima028;

     |SI #coimz039#10 = "S";
         |BUCLE agifa019;
     |FINSI;
|FPRC;
