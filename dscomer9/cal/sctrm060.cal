|FICHEROS;
     sctrm060 #0;
     sctrm003 #3;
     sctrm005 #5;
     sctrm006 #6;
     sctrm008 #8;
     sctrm010 #10;
     sctrm012 #12;
     sctrm021 #21;
     sctrm023 #23;
     sctrm027 #27;
     sctrm028 #28;
     sctrm030 #30;
     sctrm031 #31;
     sctrm061 #61;
     sctrz078 #78,MANTE;
     sctrz079 #79,MANTE;
     sctrz080 #80,MANTE; ||Pan Itinerario
     sctrz081 #81,MANTE; ||Pan Baja
     sctrw023 #123;      ||Tmp Itinerario
     referen@;
|FIN;

|VARIABLES;
     &enErrorBaja = 0;
     &eaSwBaja = "";
     &Tempo = "";
     &enCtrFin = 0;
     &eaTemporada = "";
     nUltimo = 0;
     aTipo = "";
     aPobIni = "";
     nError = 0;
     nHora = 0;
     i = 0;
     nLinea = 0;
     aSentido = "";
     nPlantilla = 0;
     nTrayecto = 0;
     nActualiza = 0;
     nBtnCreacion = 0;
     nBtnItinerario = 0;
     nBtnCopia = 0;
     nBtnBaja = 0;
     nPanta = 0;
     nCampo = 0;
     aAlfa = "";
     aConte = "";
     aPobDes = "";
     nHay = 0;
     nSw = 0;
     aPobServicio = "";
     nServicio = 0;
     aTmp123 = "";
     aMarca = "";
     j = 0;
     aOrg = "";
     aDes = "";
     nSal = 0;
     nGrid = 0;
     nRango = 0;
     nModo = 0;
|FIN;

|PROCESO Linea; |TIPO 0;
     |ABRE #12;
     #12#0 = #0#74;
     |LEE 000#12=;
     |SI FSalida = 0;
          |HAZ PinLinSer;
     |SINO;
          |MENAV "0000No existe l¡nea servicio...";
          |ERROR;
     |FINSI;
     |CIERRA #12;
|FPRC;

|PROCESO DesFiltroOrg; |TIPO 0;
     aAlfa = #0#44;
     |SI aAlfa = "N";
          #0#53 = "";
          #0#54 = "";
          #0#55 = "";
          #0#56 = "";
          #0#57 = "";
          #0#58 = "";
          #0#62 = "";
          #0#63 = "";
          #0#64 = "";
     |FINSI;
     |C_M #0#53, 1, aAlfa; |PINTA #0#53;
     |C_M #0#54, 1, aAlfa; |PINTA #0#54;
     |C_M #0#55, 1, aAlfa; |PINTA #0#55;
     |C_M #0#56, 1, aAlfa; |PINTA #0#56;
     |C_M #0#57, 1, aAlfa; |PINTA #0#57;
     |C_M #0#58, 1, aAlfa; |PINTA #0#58;
     |C_M #0#62, 1, aAlfa; |PINTA #0#62;
     |C_M #0#63, 1, aAlfa; |PINTA #0#63;
     |C_M #0#64, 1, aAlfa; |PINTA #0#64;
|FPRC;

|PROCESO DesFiltroDes; |TIPO 0;
     aAlfa = #0#43;
     |SI aAlfa = "N";
          #0#50 = "";
          #0#51 = "";
          #0#52 = "";
          #0#59 = "";
          #0#60 = "";
          #0#61 = "";
     |FINSI;
     |C_M #0#50, 1, aAlfa; |PINTA #0#50;
     |C_M #0#51, 1, aAlfa; |PINTA #0#51;
     |C_M #0#52, 1, aAlfa; |PINTA #0#52;
     |C_M #0#59, 1, aAlfa; |PINTA #0#59;
     |C_M #0#60, 1, aAlfa; |PINTA #0#60;
     |C_M #0#61, 1, aAlfa; |PINTA #0#61;
|FPRC;

|PROCESO RecogeInter; |TIPO 0;
     aAlfa = #0Campo;
     |SI aAlfa = "N";
          #0#45 = "";
          #0#46 = "";
          #0#47 = "";
          #0#48 = "";
          #0#43 = "N";
          #0#44 = "N";
     |FINSI;
     |C_M #0#45, 1, aAlfa; |PINTA #0#45;
     |C_M #0#46, 1, aAlfa; |PINTA #0#46;
     |C_M #0#47, 1, aAlfa; |PINTA #0#47;
     |C_M #0#48, 1, aAlfa; |PINTA #0#48;

     |C_M #0#43, 1, aAlfa; |PINTA #0#43;
     |C_M #0#44, 1, aAlfa; |PINTA #0#44;

     |HAZ DesFiltroDes;
     |HAZ DesFiltroOrg;
|FPRC;

|PROCESO OrgFiltroDes; |TIPO 0;
     aAlfa = #0Campo;
     |SI aAlfa = "N";
          #0#29 = "";
          #0#30 = "";
          #0#31 = "";
          #0#32 = "";
          #0#33 = "";
          #0#34 = "";
          #0#38 = "";
          #0#39 = "";
          #0#40 = "";
     |FINSI;
     |C_M #0#29, 1, aAlfa; |PINTA #0#29;
     |C_M #0#30, 1, aAlfa; |PINTA #0#30;
     |C_M #0#31, 1, aAlfa; |PINTA #0#31;
     |C_M #0#32, 1, aAlfa; |PINTA #0#32;
     |C_M #0#33, 1, aAlfa; |PINTA #0#33;
     |C_M #0#34, 1, aAlfa; |PINTA #0#34;
     |C_M #0#38, 1, aAlfa; |PINTA #0#38;
     |C_M #0#39, 1, aAlfa; |PINTA #0#39;
     |C_M #0#40, 1, aAlfa; |PINTA #0#40;
|FPRC;

|PROCESO OrgFiltroOrg; |TIPO 0;
     aAlfa = #0Campo;
     |SI aAlfa = "N";
          #0#26 = "";
          #0#27 = "";
          #0#28 = "";
          #0#35 = "";
          #0#36 = "";
          #0#37 = "";
     |FINSI;
     |C_M #0#26, 1, aAlfa; |PINTA #0#26;
     |C_M #0#27, 1, aAlfa; |PINTA #0#27;
     |C_M #0#28, 1, aAlfa; |PINTA #0#28;
     |C_M #0#35, 1, aAlfa; |PINTA #0#35;
     |C_M #0#36, 1, aAlfa; |PINTA #0#36;
     |C_M #0#37, 1, aAlfa; |PINTA #0#37;
|FPRC;

|PROCESO sctrm031;
     |PARA i = 12; |SI i [ 21; |HACIENDO i = i + 1;
          aAlfa = #31i; |QBF aAlfa;
          |SI aAlfa ! "";
               |SI nSw = 1;
                    |SI i = nHora;
                         aPobDes = #31#6;
                         |SI nUltimo = 0;
                              |ERROR10;
                              |SAL;
                         |FINSI;
                    |FINSI;
               |FINSI;
               |SI nSw = 2;
                    |SI i = nHora; |Y aPobDes = #31#6;
                         nError = 0;
                         |ERROR10;
                         |SAL;
                    |FINSI;
               |FINSI;
          |FINSI;
     |SIGUE;
|FPRC;

|DEFBUCLE sctrm031;
     #31#1;
     9;
     eaTemporada, nLinea, aSentido, nPlantilla, nTrayecto, 000, aTipo;
     eaTemporada, nLinea, aSentido, nPlantilla, nTrayecto, 999, aTipo;
     ;
     NULL, sctrm031;
|FIN;

|PROCESO DefePobla;
     |HAZ BuscaTempo0;

     aPobDes = "";
     |ABRE #31; |SELECT #3#31;
     #31#9 = aTipo;
     #31#6 = aPobIni;
     |LEE 000#31];
     |PARA; |SI FSalida = 0; |Y #31#9 = aTipo; |Y #31#6 = aPobIni; |HACIENDO;
          |SI #31#0 = eaTemporada;
               nLinea = #31#1;
               aSentido = #31#2;
               nPlantilla = #31#3;
               nTrayecto = #31#4;
               nHora = 0;
               |PARA i = 12; |SI i [ 21; |HACIENDO i = i + 1;
                    aAlfa = #31i; |QBF aAlfa;
                    |SI aAlfa ! "";
                         nHora = i;
                         nSw = 1; |BUCLE sctrm031;
                         |SI aPobDes ! ""; |SAL; |FINSI;
                    |FINSI;
               |SIGUE;
               |SI aPobDes ! ""; |SAL; |FINSI;
          |FINSI;
          |LEE 000#31s;
     |SIGUE;
     |SI aPobDes = "";
          |MENAV "0000No existe trayecto para esta poblaci¢n...";
          |ERROR;
     |SINO;
          |SI aTipo = "O";
               #0#23 = aPobDes; |PINTA #0#23;
          |SINO;
               #0#49 = aPobDes; |PINTA #0#49;
          |FINSI;
     |FINSI;
     |CIERRA #31;
|FPRC;

|PROCESO CheqPobla;
     aAlfa = #0Campo; |QBF aAlfa;
     |SI aAlfa = ""; |ACABA; |FINSI;

     |HAZ BuscaTempo0;

     aAlfa = aPobIni; |QBF aAlfa;
     |SI aAlfa = ""; |ACABA; |FINSI;

     nError = 1;
     aPobDes = #0Campo;
     |ABRE #31; |SELECT #3#31;
     #31#9 = aTipo;
     #31#6 = aPobIni;
     |LEE 000#31];
     |PARA; |SI FSalida = 0; |Y #31#9 = aTipo; |Y #31#6 = aPobIni; |HACIENDO;
          |SI #31#0 = eaTemporada;
               nLinea = #31#1;
               aSentido = #31#2;
               nPlantilla = #31#3;
               nTrayecto = #31#4;
               nHora = 0;
               |PARA i = 12; |SI i [ 21; |HACIENDO i = i + 1;
                    aAlfa = #31i; |QBF aAlfa;
                    |SI aAlfa ! "";
                         nHora = i;
                         nSw = 2; |BUCLE sctrm031;
                         |SI nError = 0; |SAL; |FINSI;
                    |FINSI;
               |SIGUE;
               |SI nError = 0; |SAL; |FINSI;
          |FINSI;
          |LEE 000#31s;
     |SIGUE;
     |SI nError = 1;
          |MENAV "0000No existe trayecto para esta poblaci¢n...";
          |ERROR;
     |FINSI;
     |CIERRA #31;
|FPRC;

|PROCESO Pobla0; |TIPO 0;
     |SI FSalida = 2; |ACABA; |FINSI;
     |SI #0Campo = "    "; |ACABA; |FINSI;

     |SI #0#2 = "I"; |Y Campo = 49;
          |HAZ EsAntena;
     |FINSI;
     |SI #0#2 = "V"; |Y Campo = 23;
          |HAZ EsAntena;
     |FINSI;

     |ABRE #3;
     #3#0 = #0Campo;
     |LEE 000#3=;
     |SI FSalida = 0;
          |SI aConte ! #0Campo; |O Campo = 23; |O Campo = 49;
               /* ORIGEN */
               aPobIni = #0#22;
               aTipo = "O";
               |SI Campo = 22;
                    |HAZ PinPobSerOrg;
                    |HAZ DefePobla;
                    |SI aPobDes ! "";
                         aPobServicio = #0#22;
                         |HAZ CheqServicio;
                    |FINSI;
               |FINSI;
               |SI Campo = 23;
                    |HAZ KmsGrupo;
                    |SI aConte ! #0Campo;
                         |HAZ CheqPobla;
                    |FINSI;
               |FINSI;
               |SI #0#24 = "S";
                    |SI Campo ] 26; |Y Campo [ 28;
                         |HAZ CheqPobla;
                    |FINSI;
                    |SI Campo ] 35; |Y Campo [ 37;
                         |HAZ CheqPobla;
                    |FINSI;
               |FINSI;
               aTipo = "D";
               |SI #0#25 = "S";
                    |SI Campo ] 29; |Y Campo [ 31;
                         aPobServicio = #0Campo;
                         |HAZ CheqServicioInverso;
                    |FINSI;
                    |SI Campo ] 32; |Y Campo [ 34;
                         |HAZ CheqSentidoInverso;
                    |FINSI;
                    |SI Campo ] 38; |Y Campo [ 40;
                         |HAZ CheqSentidoInverso;
                    |FINSI;
               |FINSI;
               /* DESTINO */
               aTipo = "D";
               aPobIni = #0#45;
               |SI #0#42 = "S";
                    |SI Campo = 45;
                         ||SI #0#2 = "V"; nUltimo = 1; |FINSI;
                         nUltimo = 1;
                         |HAZ DefePobla;
                         nUltimo = 0;
                         |SI aPobDes ! "";
                              aPobServicio = #0Campo;
                              |HAZ CheqServicioInverso;
                         |FINSI;
                    |FINSI;
                    |SI Campo ] 46; |Y Campo [ 48;
                         aPobServicio = #0Campo;
                         |HAZ CheqServicioInverso;
                    |FINSI;
                    |SI Campo = 49;
                         |HAZ KmsGrupo;
                         |SI aConte ! #0Campo;
                              |HAZ Poblacion;
                         |FINSI;
                    |FINSI;
                    |SI #0#43 = "S";
                         |SI Campo ] 50; |Y Campo [ 52;
                              |HAZ CheqPobla;
                         |FINSI;
                         |SI Campo ] 59; |Y Campo [ 61;
                              |HAZ CheqPobla;
                         |FINSI;
                    |FINSI;
                    |SI #0#44 = "S";
                         |SI Campo ] 53; |Y Campo [ 55;
                              aPobServicio = #0Campo;
                              |HAZ CheqServicioInverso;
                         |FINSI;
                         aTipo = "O";
                         aPobIni = #0#22;
                         |SI Campo ] 56; |Y Campo [ 58;
                              |HAZ CheqPobla;
                         |FINSI;
                         |SI Campo ] 62; |Y Campo [ 64;
                              |HAZ CheqPobla;
                         |FINSI;
                    |FINSI;
               |FINSI;
          |FINSI;
     |SINO;
          aAlfa = #0Campo; |QBF aAlfa;
          |SI aAlfa ! "";
               |MENAV "0000No existe poblaci¢n...";
               |ERROR;
          |FINSI;
     |FINSI;
     |CIERRA #3;
|FPRC;

|PROCESO Pobla66; |TIPO 66;
     |ABRE #3;
     #3#0 = #0Campo;
     |LEE 000#3];
     |CONSULTA_CLAVE #1#3;
     |SI FSalida = 0;
          #0Campo = #3#0; |PINTA #0Campo;
     |SINO;
          |ERROR;
     |FINSI;
     |CIERRA #3;
|FPRC;

|PROCESO Socio0; |TIPO 0;
     |ABRE #10;
     #10#0 = #0Campo;
     |LEE 000#10=;
     |SI FSalida = 0;
          nCampo = Campo + 1;
          #0nCampo = #10#1; |PINTA #0nCampo
     |SINO;
          |MENAV "0000No existe socio...";
          |ERROR;
     |FINSI;
     |CIERRA #10;
|FPRC;

|PROCESO Socio66; |TIPO 66;
     |ABRE #10;
     #10#0 = #0Campo;
     |LEE 000#10];
     |CONSULTA_CLAVE #1#10;
     |SI FSalida = 0;
          #0Campo = #10#0; |PINTA #0Campo;
     |SINO;
          |ERROR;
     |FINSI;
     |CIERRA #10;
|FPRC;

|PROCESO Vehiculo0; |TIPO 0;
     |ABRE #28;
     |SI Campo = 3;
          #28#0 = #0Campo;
          |LEE 000#28=;
          |SI FSalida = 0;
               nCampo = Campo + 1;
               #0nCampo = #28#1; |PINTA #0nCampo
               |SI aConte ! #0Campo; |O #0#7 = 0;
                    #0#7 = #28#9; |PINTA #0#7;
               |FINSI;
          |SINO;
               |MENAV "0000No existe veh¡culo...";
               |ERROR;
          |FINSI;
     |SINO;
          |SELECT #2#28
          #28#1 = #0Campo;
          |LEE 000#28=;
          |SI FSalida = 0;
               nCampo = Campo - 1;
               #0nCampo = #28#0; |PINTA #0nCampo
               |SI aConte ! #0Campo; |O #0#7 = 0;
                    #0#7 = #28#9; |PINTA #0#7;
               |FINSI;
          |SINO;
               |MENAV "0000No existe matr¡cula...";
               |ERROR;
          |FINSI;
     |FINSI;
     |CIERRA #28;
|FPRC;

|PROCESO Vehiculo66; |TIPO 66;
     |ABRE #28;
     |SI Campo = 3;
          #28#0 = #0Campo;
          |LEE 000#28];
          |CONSULTA_CLAVE #1#28;
          |SI FSalida = 0;
               #0Campo = #28#0; |PINTA #0Campo;
          |SINO;
               |ERROR;
          |FINSI;
     |SINO;
          #28#1 = #0Campo;
          |LEE 000#28];
          |CONSULTA_CLAVE #2#28;
          |SI FSalida = 0;
               #0Campo = #28#1; |PINTA #0Campo;
          |SINO;
               |ERROR;
          |FINSI;
     |FINSI;
     |CIERRA #28;
|FPRC;

|PROCESO Conductor0; |TIPO 0;
     |ABRE #27;
     #27#0 = #0Campo;
     |LEE 000#27=;
     |SI FSalida = 0;
          nCampo = Campo + 1;
          #0nCampo = #27#1; |PINTA #0nCampo
          nCampo = nCampo + 1;
          #0nCampo = #27#6; |PINTA #0nCampo
     |SINO;
          |SI #0Campo ! 0;
               |MENAV "0000No existe conductor...";
               |ERROR;
          |FINSI;
     |FINSI;
     |CIERRA #27;
|FPRC;

|PROCESO Conductor66; |TIPO 66;
     |ABRE #27;
     #27#0 = #0Campo;
     |LEE 000#27];
     |CONSULTA_CLAVE #1#27;
     |SI FSalida = 0;
          #0Campo = #27#0; |PINTA #0Campo;
     |SINO;
          |ERROR;
     |FINSI;
     |CIERRA #27;
|FPRC;

|PROCESO Conte; |TIPO 7;
     |SI Campo = 3;
          |ESTADO_CONTROL nBtnItinerario, "DISABLE";
          |ESTADO_CONTROL nBtnCreacion, "DISABLE";
          |ESTADO_CONTROL nBtnCopia, "DISABLE";
          |ESTADO_CONTROL nBtnBaja, "DISABLE";
     |FINSI;
     aConte = #0Campo;
|FPRC;

|PROCESO T80; |TIPO 80;
     FSalida = 3599;
|FPRC;

|PROCESO T14; |TIPO 14;
     |SI nPanta = 0;
          |PINPA #0#0; nPanta = FSalida;
          |CONTROL_SIMPLE nPanta, "BOTON,{{137}}Itinerario", 3349, 3464, BtnItinerario;
          nBtnItinerario = FSalida;
          |CONTROL_SIMPLE nPanta, "BOTON,{{137}}Creaci¢n", 3366, 3481, BtnCreacion;
          nBtnCreacion = FSalida;
          |CONTROL_SIMPLE nPanta, "BOTON,{{137}}Copia", 3383, 3498, BtnCopia;
          nBtnCopia = FSalida;
          |CONTROL_SIMPLE nPanta, "BOTON,{{137}}Baja Masiva", 3183, 3298, BtnBaja;
          nBtnBaja = FSalida;
     |FINSI;
|FPRC;

|PROCESO T20; |TIPO 20;
     |ESTADO_CONTROL nBtnItinerario, "ENABLE";
     |ESTADO_CONTROL nBtnCreacion, "ENABLE";
     |ESTADO_CONTROL nBtnCopia, "ENABLE";
     |ESTADO_CONTROL nBtnBaja, "ENABLE";
     FSalida = "";
|FPRC;

|PROCESO T13; |TIPO 13;
     |HAZ PinLinSer;
     |HAZ PinPobSerOrg;
|FPRC;

|PROCESO PinLinSer;
     |ABRE #12;
     #12#0 = #0#74;
     |LEE 000#12=;
     |SI FSalida ! 0; |DDEFECTO #12; |FINSI;
     |CIERRA #12;
     |PINTA 1019, #12#1;
|FPRC;

|PROCESO PinPobSerOrg;
     |ABRE #3;
     #3#0 = #0#22;
     |LEE 000#3=;
     |SI FSalida ! 0; |DDEFECTO #3; |FINSI;
     |CIERRA #3;
     |C_A #3#1, 1, 35;
     |PINTA 1829, #3#1;
|FPRC;

|PROCESO BtnCopia;
     |VENTANA 1328, 2168, -1, 17, "Copia Hojas Ruta Masiva";
     |HAZ PushVenModal;
     |DDEFECTO #79;
     |PINPA #0#79;
     |PINDA #0#79;
     |ENDATOS #1#79;
     |SI FSalida = 0;
          |HAZ Copia;
     |FINSI;
     |HAZ PopVenModal;
|FPRC;

|PROCESO CopiaPobla;
     #61#0 = #79#1;
     |GRABA 020#61n;
|FPRC;

|DEFBUCLE CopiaPobla;
     #61#1;
     ;
     #79#0, #79#3, #79#2, "    ", " ";
     #79#0, #79#4, #79#2, "zzzz", "z";
     ;
     NULL, CopiaPobla;
|FIN;

|PROCESO BorraPobla;
     |BORRA 020#61a;
|FPRC;

|DEFBUCLE BorraPobla;
     #61#1;
     ;
     #79#1, #79#3, #79#2, "    ", " ";
     #79#1, #79#4, #79#2, "zzzz", "z";
     be;
     NULL, CopiaPobla;
|FIN;

|PROCESO CopiaHojas;
     #referen@#0 = #79#1;
     #referen@#1 = #0#1;
     #referen@#2 = #0#2;
     |LEE 000#referen@.=;
     |SI FSalida = 0;
          |SI nActualiza = 0;
               |BORRA 020#referen@.a;
               |SALVA_DATOS #0;
               |REPON_DATOS #referen@;
               #referen@#0 = #79#1;
               |GRABA 020#referen@.n;
          |FINSI;
     |SINO;
          |SALVA_DATOS #0;
          |REPON_DATOS #referen@;
          #referen@#0 = #79#1;
          |GRABA 020#referen@.n;
     |FINSI;
|FPRC;

|DEFBUCLE CopiaHojas;
     #0#1;
     ;
     #79#0, #79#3, #79#2;
     #79#0, #79#4, #79#2;
     ;
     NULL, CopiaHojas;
|FIN;

|PROCESO Copia;
     nActualiza = 0;
     |SELECT #2#0;
     #0#0 = #79#1;
     #0#1 = #79#2;
     #0#3 = #79#3;
     |LEE 000#3];
     |SI FSalida = 0; |Y #0#0 = #79#1; |Y #0#1 = #79#2;
               |Y #0#3 ] #79#3; |Y #0#3 [ #79#4;
          |CONFI "0000Existen registros. ¨Actualizar?";
          nActualiza = FSalida;
     |FINSI;

     |DDEF aAlfa;
     aAlfa = aAlfa + "sctrm060";
     |CARGA_DEF aAlfa, referen@;
     |SI FSalida = 0;
          |ABRE #referen@;
          |BUCLE CopiaHojas;
          |CIERRA #referen@;
          |DESCARGA_DEF #referen@;
          |BUCLE BorraPobla;
          |BUCLE CopiaPobla;
     |FINSI;
     #0#0 = #79#1;
     #0#2 = #79#2;
     #0#1 = #79#3;
     |LEE 000#0];
     |SELECT #1#0;
     |LEE 000#0=;
     |PINDA #0#0;
|FPRC;

|PROCESO BtnCreacion;
     |VENTANA 1328, 2168, -1, 17, "Creaci¢n Hojas Ruta Masiva";
     |HAZ PushVenModal;

     |DDEFECTO #78;
     |LEE 000#0=;
     |SI FSalida = 0;
          #78#0 = #0#0;
          #78#1 = #0#2;
          #78#2 = #0#1;
          #78#3 = #0#1;
     |FINSI;

     |PINPA #0#78;
     |PINDA #0#78;
     |ENDATOS #1#78;
     |SI FSalida = 0;
          |SALVA_FICHA #0;
          |HAZ Creacion;
          |REPON_FICHA #0;
     |FINSI;
     |HAZ PopVenModal;
|FPRC;

|PROCESO CheqServicio;
     |ABRE #23;
     |SELECT #4#23;
     #23#9 = aPobServicio;
     |LEE 000#23=;
     |SI FSalida = 0;
          |ABRE #3;
          #3#0 = aPobServicio;
          |LEE 020#3=;
          |SI FSalida = 0;
               |ABRE #5;
               #5#0 = #3#3
               |LEE 020#5=;
               |SI FSalida ! 0; |O #5#9 ! #0#2;
                 ||   aAlfa = "0000El sentido es de la poblaci¢n es de [" + #5#9 + "]";
                 ||   |MENAV aAlfa;
                 ||   |ERROR;
               |FINSI;
               |CIERRA #5;
          |SINO;
               |ERROR;
          |FINSI;
          |CIERRA #3;
     |SINO;
          |MENAV "0000Poblaci¢n sin servicios asignados";
          |ERROR;
     |FINSI;
     |CIERRA #23;
|FPRC;

|PROCESO CheqServicioInverso;
     |ABRE #23;
     |SELECT #4#23;
     #23#9 = aPobServicio;
     |LEE 000#23=;
     |SI FSalida = 0;
          |ABRE #3;
          #3#0 = aPobServicio;
          |LEE 020#3=;
          |SI FSalida = 0;
               |ABRE #5;
               #5#0 = #3#3
               |LEE 020#5=;
               |SI FSalida ! 0; |O #5#9 = #0#2;
                    || aAlfa = "0000El sentido es de la poblaci¢n es de [" + #5#9 + "]";
                    || |MENAV aAlfa;
                    || |ERROR;
               |FINSI;
               |CIERRA #5;
          |SINO;
               |ERROR;
          |FINSI;
          |CIERRA #3;
     |SINO;
          |MENAV "0000Poblaci¢n sin servicios asignados";
          |ERROR;
     |FINSI;
     |CIERRA #23;
|FPRC;

|PROCESO CheqSentidoInverso;
     |ABRE #3;
     #3#0 = #0Campo;
     |LEE 020#3=;
     |SI FSalida = 0;
          |ABRE #5;
          #5#0 = #3#3
          |LEE 020#5=;
          |SI FSalida ! 0; |O #5#9 = #0#2;
               || aAlfa = "0000El sentido es de la poblaci¢n es de [" + #5#9 + "]";
               || |MENAV aAlfa;
               || |ERROR;
          |FINSI;
          |CIERRA #5;
     |SINO;
          |MENAV "0000No existe poblaci¢n...";
          |ERROR;
     |FINSI;
     |CIERRA #3;
|FPRC;

|PROCESO Poblacion;
     |ABRE #3;
     #3#0 = #0Campo;
     |LEE 020#3=;
     |SI FSalida ! 0;
          |MENAV "0000No existe poblaci¢n...";
          |ERROR;
     |FINSI;
     |CIERRA #3;
|FPRC;

|PROCESO KmsGrupo;
     |ABRE #21; |SELECT #2#21;
     #21#2 = #0#23;
     #21#4 = #0#49;
     |LEE 000#21=;
     |SI FSalida ! 0;
          #21#2 = #0#49;
          #21#4 = #0#23;
          |LEE 000#21=;
     |FINSI;
     |SI FSalida = 0;
          #0#17 = #21#6; |PINTA #0#17;
     |FINSI;
     |CIERRA #21;
|FPRC;

|PROCESO Borra61;
     |BORRA 020#61a;
|FPRC;

|DEFBUCLE Borra61;
     #61#1;
     ;
     #0#0, #0#1, #0#2, "    ", " ";
     #0#0, #0#1, #0#2, "zzzz", "z";
     be;
     NULL, Borra61;
|FIN;

|PROCESO BajaMasiva;
     eaSwBaja = "S";
     #78#0 = #0#0;
     #78#1 = #0#2;
     #78#2 = #0#1;
     #78#3 = #0#1;
     |SALVA_FICHA #0;
     |HAZ Creacion;
     |REPON_FICHA #0;
     |SI enErrorBaja = 1;

     |SINO;
          |BUCLE Borra61;
          |BORRA 020#0a;
     |FINSI;
     eaSwBaja = "N";
|FPRC;

|DEFBUCLE BajaMasiva;
     #0#1;
     ;
     #81#0, #81#2, #81#1;
     #81#0, #81#3, #81#1;
     be;
     NULL, BajaMasiva;
|FIN;

|PROCESO BtnBaja;
     |VENTANA 1328, 2168, -1, 17, "Baja Masiva Hojas de Ruta";
     |HAZ PushVenModal;

     |DDEFECTO #81;
     |LEE 000#0=;
     |SI FSalida = 0;
          #81#0 = #0#0;
          #81#1 = #0#2;
          #81#2 = #0#1;
          #81#3 = #0#1;
     |FINSI;

     |PINPA #0#81;
     |PINDA #0#81;
     |ENDATOS #1#81;
     |SI FSalida = 0;
          |BUCLE BajaMasiva;
     |FINSI;
     |HAZ PopVenModal;
|FPRC;

--------------------------------------
|PROCESO PlantiTrayectos;
     |SI #0#2 = "I"; |Y aDes = "    ";
          |SI #31#9 = "D"; |ACABA; |FINSI;
     |FINSI;
     |SI #0#2 = "V"; |Y aOrg = "    ";
          |SI #31#9 = "O"; |ACABA; |FINSI;
     |FINSI;
     |SI #31#9 = "X";
          |ACABA;
     |FINSI;

     |SI nSw = 0;
          |SELECT #2#123;
          #123#4 = #31#9;
          #123#2 = #31#6;
          |LEE 000#123=;
          |SI FSalida ! 0;
               |DDEFECTO #123;
               #123#0 = #31#5;
               #123#2 = #31#6;
               #123#3 = #31#7;
               #123#4 = #31#9;
               #123#5 = #31#11;

               #61#0 = #0#0;
               #61#1 = #0#1;
               #61#2 = #0#2;
               #61#3 = #123#2;
               #61#6 = #31#9;
               |LEE 000#61=;
               nSal = FSalida;

               nCampo = #30#5 + 11;
               aAlfa = #31nCampo; |QBF aAlfa;
               |SI aAlfa ! "";
                    nCampo = #30#5 + 5;
                    #123nCampo = aAlfa;
                    |SI nSal = 0;
                         #123#1 = "*";
                    |SINO;
                         #123#1 = "";
                    |FINSI;
                    |GRABA 000#123n;
               |FINSI;
          |FINSI;
          |SELECT #1#123;
     |SINO;
          |DDEFECTO #61;
          #61#0 = #0#0;
          #61#1 = #0#1;
          #61#2 = #0#2;
          #61#3 = #31#6;
          #61#4 = #31#11;
          nCampo = #30#5 + 11;
          aAlfa = #31nCampo; |QBF aAlfa;
          |SI aAlfa ! "";
               #61#5 = aAlfa;
               #61#6 = #31#9;
               |GRABA 000#61n;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE PlantiTrayectos;
     #31#1;
     ;
     #30#0, #30#1, #30#2, #30#3, #30#4, 000;
     #30#0, #30#1, #30#2, #30#3, #30#4, 999;
     ;
     NULL, PlantiTrayectos;
|FIN;

|PROCESO Itinerario;
     |HAZ BuscaTempo0;

     |ABRE #23; |SELECT #5#23;
     |ABRE #30; |SELECT #3#30;
     |ABRE #61;
     aMarca = "*";
     |PARA i = 1; |SI i [ 5; |HACIENDO i = i + 1;
          |PARA j = 6; |SI j [ 9; |HACIENDO j = j + 1;
               aOrg = #80i;
               aDes = #80j;
               #23#0 = eaTemporada;
               #23#4 = #0#2;
               #23#9 = aOrg;
               #23#11 = aDes;
               |LEE 000#23=;
               |SI FSalida = 0;
                    #30#0 = eaTemporada;
                    #30#2 = #0#2;
                    #30#6 = #23#5; || servicio
                    |LEE 000#30=;
                    |SI FSalida = 0;
                         nSw = 0;
                         |BUCLE PlantiTrayectos;
                    |FINSI;
               |FINSI;
               aMarca = "";
          |SIGUE;
     |SIGUE;
     |CIERRA #61;
     |CIERRA #30;
     |CIERRA #23;
|FPRC;

|PROCESO ItiSerDes; |TIPO 0;
     |SI FSalida = 2; |ACABA; |FINSI;
     |SI #80Campo = "    "; |ACABA; |FINSI;
     |ABRE #3;
     #3#0 = #80Campo;
     |LEE 000#3=;
     |SI FSalida = 0;
          aPobServicio = #80Campo;
          |HAZ CheqServicioInverso;
     |SINO;
          aAlfa = #80Campo; |QBF aAlfa;
          |SI aAlfa ! "";
               |MENAV "0000No existe poblaci¢n...";
               |ERROR;
          |FINSI;
     |FINSI;
     |CIERRA #3;
|FPRC;

|PROCESO ItiSerOrg; |TIPO 0;
     |SI FSalida = 2; |ACABA; |FINSI;
     |SI #80Campo = "    "; |ACABA; |FINSI;
     |ABRE #3;
     #3#0 = #80Campo;
     |LEE 000#3=;
     |SI FSalida = 0;
          aPobServicio = #80Campo;
          |HAZ CheqServicio;
     |SINO;
          aAlfa = #80Campo; |QBF aAlfa;
          |SI aAlfa ! "";
               |MENAV "0000No existe poblaci¢n...";
               |ERROR;
          |FINSI;
     |FINSI;
     |CIERRA #3;
|FPRC;

|PROCESO EvtItinerario;
     |SI FSalida = 4;
          |SI #123#1 = "*";
               #123#1 = ""; |PINTA #123#1;
          |SINO;
               #123#1 = "*"; |PINTA #123#1;
          |FINSI;
          |GRABA 020#123a;
     |FINSI;
|FPRC;

|PROCESO Llena61;
     #61#0 = #0#0;
     #61#1 = #0#1;
     #61#2 = #0#2;
     #61#3 = #123#2;
     #61#4 = #123#5;
     |PARA i = 6; |SI i [ 15; |HACIENDO i = i + 1;
          |SI #123i ! "     ";
               #61#5 = #123i;
          |FINSI;
     |SIGUE;
     #61#6 = #123#4;
     |GRABA 020#61n;
|FPRC;

|DEFBUCLE Llena61;
     #123#1;
     1;
     000, " ", "    ", "*";
     999, "z", "zzzz", "*";
     ;
     NULL, Llena61;
|FINSI;

|PROCESO BtnDesDes;
     |SALVA_DATOS #123;
     |LEE 000#123p;
     |PARA; |SI FSalida = 0; |HACIENDO;
          |SI #123#4 = "D";
               #123#1 = "";
               |GRABA 020#123a;
          |FINSI;
          |LEE 000#123s;
     |SIGUE;
     |REPON_DATOS #123;
     |LEE 000#123=;
     |REFRESCACONTROL nGrid;
|FPRC;

|PROCESO BtnDesOrg;
     |SALVA_DATOS #123;
     |LEE 000#123p;
     |PARA; |SI FSalida = 0; |HACIENDO;
          |SI #123#4 = "O";
               #123#1 = "";
               |GRABA 020#123a;
          |FINSI;
          |LEE 000#123s;
     |SIGUE;
     |REPON_DATOS #123;
     |LEE 000#123=;
     |REFRESCACONTROL nGrid;
|FPRC;

|PROCESO BtnMarDes;
     |SALVA_DATOS #123;
     |LEE 000#123p;
     |PARA; |SI FSalida = 0; |HACIENDO;
          |SI #123#4 = "D";
               #123#1 = "*";
               |GRABA 020#123a;
          |FINSI;
          |LEE 000#123s;
     |SIGUE;
     |REPON_DATOS #123;
     |LEE 000#123=;
     |REFRESCACONTROL nGrid;
|FPRC;

|PROCESO BtnMarOrg;
     |SALVA_DATOS #123;
     |LEE 000#123p;
     |PARA; |SI FSalida = 0; |HACIENDO;
          |SI #123#4 = "O";
               #123#1 = "*";
               |GRABA 020#123a;
          |FINSI;
          |LEE 000#123s;
     |SIGUE;
     |REPON_DATOS #123;
     |LEE 000#123=;
     |REFRESCACONTROL nGrid;
|FPRC;

|PROCESO BtnItinerario;
     |LEE 101#0=;
     |SI FSalida ! 0; |AVISO; |ACABA; |FINSI;

     |VENTANA 1306, 2291, -1, 17, "Itinerario";
     |HAZ PushVenModal;
     |DDEFECTO #80;

     |ABRE #3;
     #3#0 = #0#22;
     |LEE 000#3=;
     |SI FSalida ! 0; |DDEFECTO #3; |FINSI;
     |CIERRA #3;

     #80#0 = #3#1;
     #80#1 = #3#0;

     #80#2 = #0#75;
     #80#3 = #0#76;
     #80#4 = #0#77;
     #80#5 = #0#78;
     #80#6 = #0#79;
     #80#7 = #0#80;
     #80#8 = #0#81;
     #80#9 = #0#82;

     |PINPA #0#80;
     |PINDA #0#80;
     |ENDATOS #1#80;
     nSal = FSalida;
     |HAZ PopVenModal;
     |SI nSal ! 0; |LIBERA #0; |ACABA; |FINSI;

     |HAZ CreaTempo; |NOME_DAT #123 Tempo; aTmp123 = Tempo;
     |ABRE #123;
     |HAZ Itinerario;
     |LEE 000#123p;

     |VENTANA 1101, 2997, -1, 17, "Itinerarios";
     |HAZ PushVenModal;

     |CONTROL_SIMPLE 0, "LABEL,{{003}}(Doble click marca/desmarca)", 1102, 1124, NULL;

     |CONTROL_SIMPLE 0, "BOTON,{{165}}Marca Origenes", 1216, 1234, BtnMarOrg;
     |CONTROL_SIMPLE 0, "BOTON,{{165}}Marca Destinos", 1236, 1254, BtnMarDes;
     |CONTROL_SIMPLE 0, "BOTON,{{165}}Desmarca Origienes", 1258, 1276, BtnDesOrg;
     |CONTROL_SIMPLE 0, "BOTON,{{165}}Desmarca Destinos", 1278, 1296, BtnDesDes;

     nRango = 4 + 8 + 16 + 32;
     |LINEAL_SIMPLE #1#123, nRango, 1302, 2796, NULL, NULL, EvtItinerario;
     nGrid = FSalida;
     enCtrFin = nGrid; |HAZ EsperaFin;

     |CONFI "0000N¨Asignar lo seleccionado?";
     |SI FSalida = 0;
          |BUCLE Borra61;
          |ABRE #61;
          |BUCLE Llena61;
          |CIERRA #61;
     |FINSI;

     |DESTRUYECONTROL nGrid;
     |HAZ PopVenModal;

     |CIERRA #123;
     |HAZ BoraTempo; Tempo = aTmp123; |DELINDEX #123;

     #0#75 = #80#2;
     #0#76 = #80#3;
     #0#77 = #80#4;
     #0#78 = #80#5;
     #0#79 = #80#6;
     #0#80 = #80#7;
     #0#81 = #80#8;
     #0#82 = #80#9;
     |GRABA 020#0a;
     |LIBERA #0;
|FPRC;

|PROCESO T2; |TIPO 2;
     nModo = (FEntrada / 100) ! 0;
     |HAZ EsAntena;
     |SI nModo = 1;
          |BUCLE Borra61;

          #0#79 = #0#45;
          #0#80 = #0#46;
          #0#81 = #0#47;
          #0#82 = #0#48;

          |HAZ BuscaTempo0;

          |ABRE #23;
          |SI #0#2 = "V"; |Y #0#22 = "    ";
               |SELECT #7#23;
          |SINO;
               |SI #0#45 = "    ";
                    |SELECT #6#23;
               |SINO;
                    |SELECT #5#23;
               |FINSI;
          |FINSI;
          |ABRE #30; |SELECT #3#30;
          |ABRE #61;
          |PARA j = 45; |SI j [ 48; |HACIENDO j = j + 1;
               aOrg = #0#22;
               aDes = #0j;

               #23#0 = eaTemporada;
               #23#4 = #0#2;
               #23#9 = aOrg;
               #23#11 = aDes;
               |LEE 000#23=;
               |SI FSalida = 0;
                    #30#0 = eaTemporada;
                    #30#2 = #0#2;
                    #30#6 = #23#5; || servicio
                    |LEE 000#30=;
                    |SI FSalida = 0;
                         nSw = 1;
                         |BUCLE PlantiTrayectos;
                    |FINSI;
               |FINSI;
               aMarca = "";
          |SIGUE;
          |CIERRA #61;
          |CIERRA #30;
          |CIERRA #23;
     |FINSI;
     |SI nModo = 3;
          eaSwBaja = "S";
          #78#0 = #0#0;
          #78#1 = #0#2;
          #78#2 = #0#1;
          #78#3 = #0#1;
          |SALVA_FICHA #0;
          |HAZ Creacion;
          |REPON_FICHA #0;
          |SI enErrorBaja = 1;
               |ERROR;
          |SINO;
               |BUCLE Borra61;
          |FINSI;
          eaSwBaja = "N";
     |SINO;
          |HAZ KmsGrupo;
     |FINSI;
|FPRC;

|PROCESO EsAntena;
     #0#83 = "N";
     |SI #0#2 = "I";
          aAlfa = #0#45 + #0#46 + #0#47 + #0#48;
     |SINO;
          aAlfa = #0#22;
     |FINSI;
     |QBT aAlfa;
     |SI aAlfa = "";
          #0#83 = "S";
     |FINSI;
     |PINTA #0#83;
|FPRC;
