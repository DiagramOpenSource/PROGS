|FICHEROS;
     okm00009 #0;
     okm00010 #1,MANTE;
     dsm00003 #3;
     agifa024 #24;
     okm00001 #100;
|FIN;

|VARIABLES;
     &Tempo = "";
     &eaProg = "";
     &eaPobla = "";
     &enCtrFin = 0;
     nPanta = 0;
     nModo = 0;
     nModoEntra = 0;
     aAlfa = "";
     nGrid1 = -1;
     nRango = 0;
     nForma = 0;
     nId = 0;
     nLin = 0;
     nBtnConsulta = -1;
     nPanCon = 0;
     nGrid = 0;
     aTip = "";
     aSer = "";
     nNum = 0;
     aCod = "";
|FIN;

|PROCESO Evento;
     |SI FSalida = 1; |O FSalida = 2;
          |SELECT #1#1;
          |LEE 000#1=;
     |FINSI;
     |SI FSalida = 4;
     |FINSI;
|FPRC;

|PROCESO Min;
     #1#2 = #0#2;
     #1#3 = 0000000001;
|FPRC;

|PROCESO Max;
     #1#2 = #0#2;
     #1#3 = 9999999999;
|FPRC;

|PROCESO T3_14; |TIPO 14;    ||(*)
     |SI nGrid1 = -1;
          nRango = 1 + 4 + 8 + 16 + 32;
          |LINEAL_SIMPLE #1#1, nRango, 1602, 2998, Min, Max, Evento;
          nGrid1 = FSalida;
     |FINSI;
|FPRC;

|PROCESO T3_8; |TIPO 8; ||(*)
     |ABRE #100; |LEE 000#100p; |CIERRA #100;
     |ABRET #1;
|FPRC;

|PROCESO T3_9; |TIPO 9; ||(*)
     |CIERRAT #1;
|FPRC;

|PROCESO BorraLin;
     |BORRA 020#1a;
     |LIBERA #1;
|FPRC;

|DEFBUCLE BorraLin;
     #1#1;
     ;
     #0#2, 0000000001;
     #0#2, 9999999999;
     be;
     NULL, BorraLin;
|FIN;

|PROCESO T3_2; |TIPO 2; ||(*)
     nModo = (FEntrada / 100) ! 0;
     nForma = 0 +. 1;
     |SI nModo = 3;
          |SI #0#18 = "S";
               |MENAV "0000Prepedido en web...";
               |ERROR;
          |SINO;
               |BUCLE BorraLin;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO T3_0; |TIPO 0;     ||(*)
     aAlfa  = "|X000"; aAlfa = #0aAlfa; nId = aAlfa;
     |ESTADO_CONTROL nId, "ENABLE";

     |REFRESCACONTROL nGrid1;
|FPRC

|PROCESO T3_12; |TIPO 12;    ||(*)
     |SI nModoEntra = 1; |Y FSalida = 7;
          |BUCLE BorraLin;
     |FINSI;
|FPRC;

|PROCESO T3_30; |TIPO 30;    ||(*)
     nModo = (FEntrada / 100) ! 0;

     #1#2 = #0#2;
     #1#3 = 1;
     |LEE 000#1];
     |SI FSalida ! 0; |O #1#2 ! #0#2;
          |SI nModo = 1;
               |MENAV "0000Se anulan los datos entrados.";
          |SINO;
               |MENAV "0000No existen lineas, se borra la cabecera.";
          |FINSI;
          |BORRA 020#0a;
          |ERROR;
     |FINSI;
|FPRC;

|PROCESO T3_13; |TIPO 13;
     |PINPA #0#0; nPanta = FSalida;
|FPRC;

|PROCESO T3_20; |TIPO 20;
     nModo = (FEntrada / 100) ! 0;
     |SI FSalida = "OPCION";
          FSalida = "";
     |SINO;
     |FINSI;
|FPRC;

|PROCESO T3_7; |TIPO 7;
     nModoEntra = (FEntrada / 100) ! 0;
     |SI nModoEntra = 1;
          aAlfa  = "|X000"; aAlfa = #0aAlfa; nId = aAlfa;
          |ESTADO_CONTROL nId, "DISABLE";

          |HAZ DefNumero;
     |FINSI;
|FPRC;

|PROCESO T3_1_7; |TIPO 7;
     nModoEntra = (FEntrada / 100) ! 0;
     |SI nModoEntra = 1;
          |BUCLE BorraLin;
          |REFRESCACONTROL nGrid1;
     |FINSI;
     |ESTADO_CONTROL nBtnConsulta, "DISABLE";
|FPRC;
/* Estan en el okm00010
|PROCESO DefeLin; |TIPO 7;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 1;
          #1#2 = #0#2;
          #1#3 = 9999999999;
          |LEE 000#1];
          |SI FSalida = 0;
               |LEE 000#1a;
          |SINO;
               |LEE 000#1u;
          |FINSI;
          |SI FSalida = 0; |Y #1#2 = #0#2;
               nLin = #1#3 + 1;
          |SINO;
               nLin = 1;
          |FINSI;
          |DDEFECTO #1;
          #1#2 = #0#2;
          #1#3 = nLin; |PINTA #1#3;
          aAlfa  = "|X000"; aAlfa = #0aAlfa; nId = aAlfa;
          |ESTADO_CONTROL nId, "ENABLE";
     |FINSI;
|FPRC;
*/

|PROCESO DefNumero;
     |LEE 000#0u;
     |SI FSalida = 0;
          nNum = #0#2 + 1;
     |SINO;
          nNum = 1;
     |FINSI;
     |DDEFECTO #0;
     #0#2 = ("0000000000" + nNum) % -110;
|FPRC;

|PROCESO Dir0; |TIPO 0;
     |ABRE #3;
     #3#0 = #0#4;
     #3#1 = #0#6;
     |LEE 000#3=;
     |SI FSalida ! 0;
          |MENAV "0000No existe c¢digo de direcci¢n...";
          |ERROR;
     |FINSI;
     |CIERRA #3;
|FPRC;

|PROCESO Min3;
     #3#0 = #0#4;
     #3#1 = 0000;
|FPRC;

|PROCESO Max3;
     #3#0 = #0#4;
     #3#1 = 9999;
|FPRC;

|PROCESO Dir66; |TIPO 66;
     |ABRE #3;
     #3#0 = #0#4;
     #3#1 = #0#6;
     |LEE 000#3];
     |CONSULTA_F_CLAVE #1#3, Min3, Max3;
     |SI FSalida = 0;
          #0#6 = #3#1; |PINTA #0#6;
     |SINO;
          |ERROR;
     |FINSI;
     |CIERRA #3;
|FPRC;

|PROCESO Codigo7; |TIPO 7;
     aCod = #0#4;
|FPRC;

|PROCESO Codigo0; |TIPO 0;
     |SI aCod ! #0#4;
          |ABRE #24;
          #24#0 = #0#4;
          |LEE 000#24=;
          |SI FSalida = 0;
               #0#5 = #24#2; |PINTA #0#5;
               #0#8 = #24#37; |PINTA #0#8;
               #0#9 = #24#38; |PINTA #0#9;
               #0#10 = #24#156; |PINTA #0#10;
               #0#11 = #24#20; |PINTA #0#11;
          |SINO;
               |MENAV "0000No existe c¢digo de cliente...";
               |ERROR;
          |FINSI;
          |CIERRA #24;
     |FINSI;
|FPRC;

|PROCESO Codigo66; |TIPO 66;
     |ABRE #24;
     #24#0 = #0#4;
     |LEE 000#24];
     |CONSULTA_CLAVE #1#24;
     |SI FSalida = 0;
          #0#4 = #24#0; |PINTA #0#4;
     |SINO;
          |ERROR;
     |FINSI;
     |CIERRA #24;
|FPRC;
