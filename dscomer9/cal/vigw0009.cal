|FICHEROS;
 vigw0009 #0;
 vigm0010 #3;
 vigm0009 #2;
|FIN;

|VARIABLES;
 &mes = 0;
 &a¤o = 0;
 unid = 0;
 t1 = 0;
 t2 = 0;
 t3 = 0;
 tt = 0;
 si = 0;
 &el_a¤o;
 &el_mes;
|FIN;

|PROCESO p1;
#0#1 = "             ";
#0#0 = 01;
|FPRC;

|PROCESO p2;
#0#1 = "zzzzzzzzzzzzz";
#0#0 = 12;
|FPRC;

|PROCESO modif;
|ABRE #3;
#3#0 = #0#0;
#3#10 = el_a¤o;
#3#11 = #0#10;
#3#1 = #0#1;
#3#2 = #0#2;
#3#3 = #0#3;
#3#4 = #0#4;
#3#5 = #0#5;
#3#6 = #0#6;
#3#7 = #0#7;
#3#8 = #0#8;
#3#9 = #0#9;
  |GRABA 010#3n;
|LIBERA #3;
|CIERRA #3;
|FPRC;

|DEFBUCLE modifica;
#0#1;
;
INICIO;
FINAL;
be;
NULL,modif;
|FIN;

|PROGRAMA;
|PINPA #0#0;
|ENTLINEAL #1#0,2,2,21,0,p1,p2;
|CONFI "2400S ¨Son correctos los datos introducidos?";

|SI FSalida = 0;
 |ABRE #2;
 #2#0 = el_mes;
 #2#1 = el_a¤o;
 |LEE 010#2=;
 |SI FSalida = 0;
   |MENAV "0000 ­ATENCION! Este mes ya ha sido calculado ¨Sustituir?";
||   |SI FSalida = 0;
||     si = 0;
||   |SINO
     si = 0;
||   |FINSI;
 |SINO;
   |DDEFECTO #2;
   #2#0 = el_mes;
   #2#1 = el_a¤o;
   |GRABA 010#2n;
   |LIBERA #2;
   si = 2;
 |FINSI;
 |SI si > 0;
     |BUCLE modifica;
 |FINSI;
|FINSI;
|CONFI "2400S ¨Imprimir el informe?                 ";
|SI FSalida = 0;
  mes = el_mes;
  a¤o = el_a¤o;
  |SUB_EJECUTA "vigz0011";
|FINSI;
|FPRO;

|CALCULO precio;
 unid = #0#3 + #0#5 + #0#7;
 t1 = #0#3 * #0#4;
 t2 = #0#5 * #0#6;
 t3 = #0#7 * #0#8;
 tt = t1 + t2 + t3;
 #0#9 = tt / unid;
 |PINTA #0#9;
|FCAL;

|CALCULO difkg;
 #0#7 = #0#2 - #0#3 - #0#5;
 |SI #0#7 < 0;
   #0#7 = 0;
 |FINSI;
 |PINTA #0#7;
|FCAL;
