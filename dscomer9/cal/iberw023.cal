|FICHEROS;
     iberw023 #0;
     agifa145 #1;
     agifa065 #65;
     agifa019 #19;
|FIN;

|VARIABLES;
     i         = 0;
     paso      = 0;
     aCentro   = "";
     nAntes    = 0;
     aArti     = "";
     nStock    = 0;
     nLin      = 0;
     aAlfa     = "";
     nPrime    = 0;
|FIN;

|PROCESO Tmp;
     #19#0 = #1#1;
     |LEE 000#19=;

     |SI #1#17 ! nAntes; |Y nPrime = 1;
          |PIEINF;
     |FINSI;
     nPrime = 1;
     nAntes = #1#17;
     |PRINT;
|FPRC;

|DEFBUCLE Tmp;
     #1#2;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Tmp;
|FIN;

|PROCESO agifa065;
     |SI #0#14 = "S";
         paso = 0;
         |PARA i = 8; |SI i [ 13; |HACIENDO i = i + 1;
               |SI #65#2 = #0i; paso = 1;  |FINSI;
         |SIGUE;
     |SINO;
         paso = 1;
         |PARA i = 8; |SI i [ 13; |HACIENDO i = i + 1;
               |SI #65#2 = #0i; paso = 0; |FINSI;
         |SIGUE;
     |FINSI;
     |SI paso = 1; |ACABA; |FINSI;




     |SI aArti = ""; |O aArti ! #65#0;
          aArti = #65#0;
          nStock = 0;
     |FINSI;

     |DDEFECTO #1;
     nLin = nLin + 1;
     nStock = nStock + #65#6;

     #1#0  = nLin;
     #1#1  = #65#0;
     #1#2  = #65#1;
     #1#3  = #65#2;
     #1#4  = #65#3;
     #1#5  = #65#4;
     #1#6  = #65#5;
     #1#7  = #65#6;
     #1#8  = nStock;
     #1#9  = #65#8;
     #1#10 = #65#9;
     #1#11 = #65#10;
     #1#12 = #65#11;
     #1#13 = #1#8 * #1#9;
     #1#14 = #65#14;
     #1#15 = #65#17;

     aCentro = ("00000" + #1#6) % -105;
     aCentro = aCentro % 103;

     #1#17 = aCentro;

     |SI #1#17 ] #0#2; |Y #1#17 [ #0#3;
          |GRABA 020#1n;
     |FINSI;
|FPRC;

|DEFBUCLE agifa065;
     #65#1;
     ;
     #0#6, #0#0, "  ", 000001, 00001, "     "; ||EV
     #0#7, #0#1, "zz", 999999, 99999, "zzzzz";
     ;
     NULL, agifa065;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     aAlfa = Usuario; |QBF aAlfa;
     |NOME_DAT #1 aAlfa;
     |DELINDEX #1;

     |IMPRE 0;
     |SI FSalida = 0;
          |INFOR "iberw023";
          |SI FSalida = 0;
               |ABRE #19;
               |ABRE #1;
               |BUCLE agifa065;
               |CIERRA #1;
               |CIERRA #19;
               |BUCLE Tmp;
               |SI nPrime ! 0; |PIEINF; |FINSI;
               |FININF;
          |FINSI;
          |FINIMP;
     |FINSI;

     |DELINDEX #1;
|FPRC;
