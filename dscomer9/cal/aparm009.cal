|FICHEROS;
     aparm009 #0;
|FIN;

|VARIABLES;
     &enTiva = 0;
     &efFiva = @;
     &eaDiva = "";
     &enIva = 0;
     &enRec = 0;
     &enBtnModoApa = 4;
     &nDeci_Base = 0;
     &nDeci_PreBase = 0;
     &cambio_base = 0;
     &eaArticulo = "";
     &pvp1 = 0;
     &pvp2 = 0;
     &pvp3 = 0;
     &pvp4 = 0;
     &pvp5 = 0;
     &pvp6 = 0;
 {-1}aMenu = "";
     aMenu1 = "2400";
     aMenu2 = "1";
     aMenu3 = " ";
     aMenu4 = "RAC";
     aMenu5 = " Repasar ";
     aMenu6 = " Actualizar ";
     aMenu7 = " Cancelar ";
     nTari = 0;
     nSal = 0;
     nBoton1 = 0;
     nBoton2 = 0;
     nBoton3 = 0;
     aAlfa = "";
|FIN;

|PROCESO Boton1;
     nSal = 1;
     |PTEC 802;
|FPRC;

|PROCESO Boton2;
     nSal = 2;
     |PTEC 802;
|FPRC;

|PROCESO Boton3;
     nSal = 3;
     |PTEC 802;
|FPRC;

|PROCESO MiMenu;
     |CONTROL_SIMPLE 0, "BOTON,Repasar", 2427, 2437, Boton1;
     nBoton1 = FSalida;
     |CONTROL_SIMPLE 0, "BOTON,Actualizar", 2439, 2449, Boton2;
     nBoton2 = FSalida;
     |CONTROL_SIMPLE 0, "BOTON,Cancelar", 2451, 2461, Boton3;
     nBoton3 = FSalida;
     |PARA nSal = 0; |SI nSal = 0; |HACIENDO;
          |LEETECLA aAlfa;
     |SIGUE;
     |FIN_CONTROL_WINDOWS nBoton1;
     |FIN_CONTROL_WINDOWS nBoton2;
     |FIN_CONTROL_WINDOWS nBoton3;
     |PULSATECLA;
     FSalida = nSal;
|FPRC;

|PROCESO PvpNeto;
     |SI nTari = 0; |O nTari = 1;
          #0#9 = #0#10 / (1 + (enIva/100)); |PINTA #0#9;
     |FINSI;
     |SI nTari = 0; |O nTari = 2;
          #0#13 = #0#14 / (1 + (enIva/100)); |PINTA #0#13;
     |FINSI;
     |SI nTari = 0; |O nTari = 3;
          #0#17 = #0#18 / (1 + (enIva/100)); |PINTA #0#17;
     |FINSI;
     |SI nTari = 0; |O nTari = 4;
          #0#21 = #0#22 / (1 + (enIva/100)); |PINTA #0#21;
     |FINSI;
     |SI nTari = 0; |O nTari = 5;
          #0#25 = #0#26 / (1 + (enIva/100)); |PINTA #0#25;
     |FINSI;
     |SI nTari = 0; |O nTari = 6;
          #0#29 = #0#30 / (1 + (enIva/100)); |PINTA #0#29;
     |FINSI;
|FPRC;

|PROCESO ImpoBene;
     |SI nTari = 0; |O nTari = 1;
          #0#8 = #0#9 - #0#1; |PINTA #0#8;
     |FINSI;
     |SI nTari = 0; |O nTari = 2;
          #0#12 = #0#13 - #0#1; |PINTA #0#12;
     |FINSI;
     |SI nTari = 0; |O nTari = 3;
          #0#16 = #0#17 - #0#1; |PINTA #0#16;
     |FINSI;
     |SI nTari = 0; |O nTari = 4;
          #0#20 = #0#21 - #0#1; |PINTA #0#20;
     |FINSI;
     |SI nTari = 0; |O nTari = 5;
          #0#24 = #0#25 - #0#1; |PINTA #0#24;
     |FINSI;
     |SI nTari = 0; |O nTari = 6;
          #0#28 = #0#29 - #0#1; |PINTA #0#28;
     |FINSI;
|FPRC;

|PROCESO PorceBene;
     |SI nTari = 0; |O nTari = 1;
          #0#7 = #0#8 * 100 / #0#1; |PINTA #0#7;
     |FINSI;
     |SI nTari = 0; |O nTari = 2;
          #0#11 = #0#12 * 100 / #0#1; |PINTA #0#11;
     |FINSI;
     |SI nTari = 0; |O nTari = 3;
          #0#15 = #0#16 * 100 / #0#1; |PINTA #0#15;
     |FINSI;
     |SI nTari = 0; |O nTari = 4;
          #0#19 = #0#20 * 100 / #0#1; |PINTA #0#19;
     |FINSI;
     |SI nTari = 0; |O nTari = 5;
          #0#23 = #0#24 * 100 / #0#1; |PINTA #0#23;
     |FINSI;
     |SI nTari = 0; |O nTari = 6;
          #0#27 = #0#28 * 100 / #0#1; |PINTA #0#23;
     |FINSI;
|FPRC;

|PROCESO Neto;
     |SI nTari = 0; |O nTari = 1;
          #0#9 = #0#1 + #0#8; |PINTA #0#9;
     |FINSI;
     |SI nTari = 0; |O nTari = 2;
          #0#13 = #0#1 + #0#12; |PINTA #0#13;
     |FINSI;
     |SI nTari = 0; |O nTari = 3;
          #0#17 = #0#1 + #0#16; |PINTA #0#17;
     |FINSI;
     |SI nTari = 0; |O nTari = 4;
          #0#21 = #0#1 + #0#20; |PINTA #0#21;
     |FINSI;
     |SI nTari = 0; |O nTari = 5;
          #0#25 = #0#1 + #0#24; |PINTA #0#25;
     |FINSI;
     |SI nTari = 0; |O nTari = 6;
          #0#29 = #0#1 + #0#28; |PINTA #0#29;
     |FINSI;
|FPRC;

|PROCESO Beneficio;
     |SI nTari = 0; |O nTari = 1;
          #0#8 = #0#1 % #0#7; |PINTA #0#8;
     |FINSI;
     |SI nTari = 0; |O nTari = 2;
          #0#12 = #0#1 % #0#11; |PINTA #0#12;
     |FINSI;
     |SI nTari = 0; |O nTari = 3;
          #0#16 = #0#1 % #0#15; |PINTA #0#16;
     |FINSI;
     |SI nTari = 0; |O nTari = 4;
          #0#20 = #0#1 % #0#19; |PINTA #0#20;
     |FINSI;
     |SI nTari = 0; |O nTari = 5;
          #0#24 = #0#1 % #0#23; |PINTA #0#24;
     |FINSI;
     |SI nTari = 0; |O nTari = 6;
          #0#28 = #0#1 % #0#27; |PINTA #0#28;
     |FINSI;
|FPRC;

|PROCESO Iva;
     |SI nTari = 0; |O nTari = 1;
          #0#10 = #0#9 + (#0#9 * enIva / 100); |PINTA #0#10;
     |FINSI;
     |SI nTari = 0; |O nTari = 2;
          #0#14 = #0#13 + (#0#13 * enIva / 100); |PINTA #0#14;
     |FINSI;
     |SI nTari = 0; |O nTari = 3;
          #0#18 = #0#17 + (#0#17 * enIva / 100); |PINTA #0#18;
     |FINSI;
     |SI nTari = 0; |O nTari = 4;
          #0#22 = #0#21 + (#0#21 * enIva / 100); |PINTA #0#22;
     |FINSI;
     |SI nTari = 0; |O nTari = 5;
          #0#26 = #0#25 + (#0#25 * enIva / 100); |PINTA #0#26;
     |FINSI;
     |SI nTari = 0; |O nTari = 6;
          #0#30 = #0#29 + (#0#29 * enIva / 100); |PINTA #0#30;
     |FINSI;
|FPRC;

|PROCESO ModiCampo; |TIPO 0;
     |SI #0Campo = Contenido; |ACABA; |FINSI;


     nTari = 0;
     |SI Campo = 7; |O Campo = 8; |O Campo = 9; nTari = 1; |FINSI;
     |SI Campo = 11; |O Campo = 12; |O Campo = 13; nTari = 2; |FINSI;
     |SI Campo = 15; |O Campo = 16; |O Campo = 17; nTari = 3; |FINSI;
     |SI Campo = 19; |O Campo = 20; |O Campo = 21; nTari = 4; |FINSI;
     |SI Campo = 23; |O Campo = 24; |O Campo = 25; nTari = 5; |FINSI;
     |SI Campo = 27; |O Campo = 28; |O Campo = 29; nTari = 6; |FINSI;

     |SI Campo = 7; |O Campo = 11; |O Campo = 15; || %Beneficio
               |O Campo = 19; |O Campo = 23; |O Campo = 27;
          |HAZ Beneficio;
          |HAZ Neto;
          |HAZ Iva;
          |ACABA;
     |FINSI;
     |SI Campo = 8; |O Campo = 12; |O Campo = 16; || Imp Beneficio
               |O Campo = 20; |O Campo = 24; |O Campo = 28;
          |HAZ PorceBene;
          |HAZ Neto;
          |HAZ Iva;
          |ACABA;
     |FINSI;
     |SI Campo = 9; |O Campo = 13; |O Campo = 17; || PVP Neto
               |O Campo = 21; |O Campo = 25; |O Campo = 29;
          |HAZ ImpoBene;
          |HAZ PorceBene;
          |HAZ Iva;
          |ACABA;
     |FINSI;
     |SI Campo = 10; |O Campo = 14; |O Campo = 18; || PVP IVA
               |O Campo = 24; |O Campo = 26;
          |HAZ PvpNeto;
          |HAZ ImpoBene;
          |HAZ PorceBene;
          |ACABA;
     |FINSI;

     |SI nTari = 0;
          #0#1 = (((#0#0 < #0#2) < #0#3) < #0#4) + #0#5 + #0#6;
          |PINTA #0#1;
          |HAZ Beneficio;
          |HAZ Neto;
          |HAZ Iva;
     |FINSI;
|FPRC;

|PROCESO Tipo12; |TIPO 12;
     nSal = FSalida;
|FPRC;

|PROGRAMA;
     |SI PARAMETRO = "BAJA";
          |ABRE #0;
          #0#31 = eaArticulo;
          |BORRA 000#0c;
          |CIERRA #0;
          |ACABA;
     |FINSI;

     efFiva = ~;
     |HAZ SacaIVA;

     |ABRE #0;
     #0#31 = eaArticulo;
     |SI enBtnModoApa = 4;
          |LEE 000#0=;
     |SINO;
          |LEE 101#0=;
          |SI FSalida ! 0; |GRABA 020#0b; |FINSI;
     |FINSI;

     |SI PARAMETRO = "AUTO";
          Campo = 9; Contenido = #0Campo; #0Campo = pvp1; |HAZ ModiCampo;
          Campo = 13; Contenido = #0Campo; #0Campo = pvp2; |HAZ ModiCampo;
          Campo = 17; Contenido = #0Campo; #0Campo = pvp3; |HAZ ModiCampo;
          Campo = 21; Contenido = #0Campo; #0Campo = pvp4; |HAZ ModiCampo;
          Campo = 25; Contenido = #0Campo; #0Campo = pvp5; |HAZ ModiCampo;
          Campo = 29; Contenido = #0Campo; #0Campo = pvp6; |HAZ ModiCampo;
          |GRABA 020#0a;
     |SINO;
          |SI PARAMETRO = "ALTA";
               Campo = 9; Contenido = #0Campo; #0Campo = pvp1; |HAZ ModiCampo;
               Campo = 13; Contenido = #0Campo; #0Campo = pvp2; |HAZ ModiCampo;
               Campo = 17; Contenido = #0Campo; #0Campo = pvp3; |HAZ ModiCampo;
               Campo = 21; Contenido = #0Campo; #0Campo = pvp4; |HAZ ModiCampo;
               Campo = 25; Contenido = #0Campo; #0Campo = pvp5; |HAZ ModiCampo;
               Campo = 29; Contenido = #0Campo; #0Campo = pvp6; |HAZ ModiCampo;
               |GRABA 020#0a;
          |FINSI;
          |CLS;
          |PINPA #0#0;
          |PINDA #0#0;
          |SI enBtnModoApa = 4;
               |PAUSA; |ACABA;
          |FINSI;

          |PARA; |SI; |HACIENDO;
               |ENDATOS #1#0;
               |SI nSal = 7;
                    eaArticulo = "";
                    |SAL;
               |FINSI;
           ||    |MENU aMenu;

               |HAZ MiMenu;

               |SI FSalida = 2;
                    pvp1 = #0#9;
                    pvp2 = #0#13;
                    pvp3 = #0#17;
                    pvp4 = #0#21;
                    pvp5 = #0#25;
                    pvp6 = #0#29;
                    |SAL;
               |FINSI;
               |SI FSalida = 3;
                    eaArticulo = "";
                    |SAL;
               |FINSI;
          |SIGUE;

          |SI eaArticulo ! "";
               |GRABA 020#0a;
          |FINSI;
     |FINSI;
     |CIERRA #0;

     |PULSATECLA;
|FPRO;

|PROCESO NoCero; |TIPO 0;
     |SI #0Campo ! 0;
          |SI Campo = 32; #0#33 = 0; |PINTA #0#33; |FINSI;
          |SI Campo = 33; #0#32 = 0; |PINTA #0#32; |FINSI;
     |FINSI;
|FPRC;
