|FICHEROS;
     champi09 #0;
     referen@ #1;
     champi06 #6;   || Envase
|FIN;

|VARIABLES;
     &eaTipo = "";
     &eaSerie = "";
     &enCodigo = 0;
     &enLinea = 0;
     &enUnidades = 0;
     aDef = "";
|FIN;

|PROCESO Tara; |TIPO 0;
     |SI #0Campo ! Contenido;
          |ABRE #6;
          #6#0 = #0#1;
          |LEE 020#6=;
          |CIERRA #6;
          #0#4 = #0#2 * #6#2;
          |PINTA #0#4;
     |FINSI;
|FPRC;

|PROCESO Min;
     #0#0 = 1;
|FPRC;

|PROCESO Max;
     #0#0 = 999;
|FPRC;

|PROGRAMA;
     |BLANCO 1212 2355;
     |NOME_DAT #0 PARAMETRO;
     |ENTLINEAL #1#0, 1, 1, 22, 1, Min, Max;

     |DDEF aDef;
     |SI eaTipo = "AV"; aDef = aDef + "champi04"; |FINSI;
     |SI eaTipo = "AC"; aDef = aDef + "champi05"; |FINSI;
     |SI eaTipo = "PV"; aDef = aDef + "champi10"; |FINSI;
     |SI eaTipo = "PR"; aDef = aDef + "champi11"; |FINSI;

     |CARGA_DEF aDef, referen@;
     |SI FSalida = 0;
          |ABRE #0;
          |ABRE #1;
          |LEE 000#0p;
          |SI FSalida = 0;
               |DDEFECTO #1;
               #1#0 = eaSerie;
               #1#1 = enCodigo;
               #1#2 = enLinea;
               |LEE 101#1=;
               |SI FSalida ! 0; |GRABA 020#1b; |FINSI;
               #1#3 = #0#2;
               #1#4 = #0#3;
               #1#5 = #0#4;
               #1#6 = #0#1;
               |GRABA 020#1a;
               enUnidades = #0#3 - #0#4;
          |SINO;
               enUnidades = 0;
          |FINSI;
          |CIERRA #1;
          |CIERRA #0;
     |SINO;
          |MENAV "0000ERROR al cargar champi0?";
     |FINSI;
|FPRO;
