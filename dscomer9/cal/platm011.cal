|FICHEROS;
 platm011 #0;
 platm020 #1; ||historico mercancia
 platm012 #2; ||tipos mercancia
|FIN;

|VARIABLES;
 nModo = 0;
 aPrograma = "";
 aAux = "";
 &aOrigen = "";
 &fFecha = @;
 aAlfa1 = "";
|FIN;

|PROCESO AltaLin;
nModo = (FEntrada/100)!0;
|SI nModo = 1;
  |ABRE #1;
  #1#0 = #0#0;
  #1#1 = "ENTRADA";
  #1#2 = #0#10;
  #1#3 = 1;
  |SI #0#8 = "S";
    #1#6 = 1;
  |SINO;
    #1#6 = 0;
  |FINSI;
  |GRABA 000#1n;
  |LIBERA #1;
  |CIERRA #1;
|FINSI;
|FPRC;

|PROCESO tipo;|TIPO 0;
|SI FSalida = 0;
  |HAZ AltaLin;
|FINSI;
|FPRC;

|PROCESO SumaMercan;
     |ABRE #platm012;
     #platm012#0 = #platm011#2;
     |LEE 000#platm012.=;
     |SI FSalida = 0;
          #platm012#2 = #platm012#2 +. 1;
          #platm012#6 = #platm012#2 + #platm012#3 + #platm012#4+ #platm012#5;
          |GRABA 020#platm012.a;
     |FINSI;
     |LIBERA #platm012;
     |CIERRA #platm012;
|FPRC;

|PROCESO BajaLineas;
|BORRA 010#platm020.a;
|LIBERA #platm020;
|FPRC;

|PROCESO tipo2;|TIPO 2;
|SI #0#8 = "S";
  |HAZ SumaMercan;
|FINSI;
nModo = (FEntrada/100)!0;
|SI nModo = 3;
 |BUCLELIN 1BajaLineas#0;
|FINSI;
|FPRC;


|PROCESO Fecha;|TIPO 6;
     |SI aOrigen = "platm029";
          #0#10 = fFecha;
          |PINTA #0#10;
     |FINSI;
     aOrigen = "";
|FPRC;

|PROCESO FechaDiaAlta; |TIPO 7;
     nModo = (FEntrada/100)!0;
     |SI nModo = 1;|Y #platm011#10 = "01.01.2000";
          #platm011#10 = ~;
          |PINTA #platm011#10;
     |FINSI;
|FPRC;
