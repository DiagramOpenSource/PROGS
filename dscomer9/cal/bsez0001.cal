|FICHEROS;
bsez0001 #0;
bsew0001 #1;   ||        alba1019
agifa010 #2;
agifa071 #3;
agifa019 #4;
agifa025 #5;
agifa553 #6;  ||Lineas De Producto
agifa060 #7;  ||Familias
agifa120 #8;  ||Subfamilias
agi00063 #9;  ||Marcas
bsem0001 #10; ||            alba0018 #10; ||Escalado De Comisiones
agifa084 #20;
agifa069 #30;
|FIN;

|VARIABLES;
     aAlfa = "";
informe = "bsez0001"; ||"alba0019";
clave = "";
repre = "";
articulo = "";
&tipo = "";
&texto = "";
&comis = 0;
i = 0;
ii = 0;
iii = 0;
sw = 0;
|FIN;


|CALCULO leelinalb;          ||Albaranes
articulo = #3#2;
|HAZ lee_art;
#1#0 = #2#6;
#1#1 = clave;
|LEE 000#1=;
|SI FSalida ! 0;
  |GRABA 000#1c;
  |LIBERA #1;
|FINSI;
#1#2 = #1#2 + #3#9;
|GRABA 000#1a;
|LIBERA #1;
#1#0 = "";
#1#1 = "";
#1#2 = 0;
#1#3 = 0;
#1#4 = 0;
|FCAL;

|CALCULO pasa_alb;
|BUCLELIN 2leelinalb#2;
|FCAL;

|DEFBUCLE lee_alb;
#2#1;
1,6;
#0#2 , 000000 , #0#4 , #0#0;
#0#3 , 999999 , #0#5 , #0#1;
be;
NULL,pasa_alb;
|FIN;

|CALCULO leelinfc;        ||Facturas Contado
articulo = #30#2;
|HAZ lee_art;
#1#0 = #20#6;
#1#1 = clave;
|LEE 000#1=;
|SI FSalida ! 0;
  |GRABA 000#1c;
  |LIBERA #1;
|FINSI;
#1#2 = #1#2 + ((((#30#9)< #20#5) < #20#32 ) < #20#7);
|GRABA 000#1a;
|LIBERA #1;
#1#0 = "";
#1#1 = "";
#1#2 = 0;
#1#3 = 0;
#1#4 = 0;
|FCAL;

|CALCULO pasa_fc;
|BUCLELIN 2leelinfc#20;
|FCAL;

|DEFBUCLE lee_fc;
#20#1;
1,6;
#0#2 , 000000 , #0#4 , #0#0;
#0#3 , 999999 , #0#5 , #0#1;
be;
NULL,pasa_fc;
|FIN;

|CALCULO imprime;
comis = 0;
texto = "";
i = 0;
ii = 0;
iii = 0;
|ABRE #5;
#5#0 = #1#0;
|LEE 000#5=;
|LIBERA #5;
|CIERRA #5;
|SI #0#7 = 1;
  |ABRE #6;
  #6#0 = #1#1;
  |LEE 000#6=;
  texto = #6#1;
  |LIBERA #6;
  |CIERRA #6;
|FINSI;
|SI #0#7 = 2;
  |ABRE #7;
  #7#0 = #1#1;
  |LEE 000#7=;
  texto = #7#1;
  |LIBERA #7;
  |CIERRA #7;
|FINSI;
|SI #0#7 = 3;
  |ABRE #8;
  #8#0 = #1#1;
  |LEE 000#8=;
  texto = #8#1;
  |LIBERA #8;
  |CIERRA #8;
|FINSI;
|SI #0#7 = 4;
  |ABRE #9;
  #9#0 = #1#1;
  |LEE 000#9=;
  texto = #9#1;
  |LIBERA #9;
  |CIERRA #9;
|FINSI;

|SI sw = 0;
  sw = 1;
  repre = #1#0;
|FINSI;
|SI repre ! #1#0;
  repre = #1#0;
  |PIEINF;
|FINSI;
|ABRE #10;
#10#0 = #1#0;
#10#1 = #0#7;
#10#20 = #1#1;
|LEE 000#10=;
|SI FSalida = 0;
  |PARA i = 2;|SI i [ 7;|HACIENDO i = i + 1;
     |SI #1#2 [ #10i;
        ii = i + 6;
        iii = i + 12;
        #1#3 = #10ii;
        #1#4 = #1#2 % #10iii;
        comis = #10iii;
        |GRABA 000#1a;
        |LIBERA #1;
        i = 8;
      |FINSI;
   |SIGUE;
|FINSI;
|LIBERA #10;
|CIERRA #10;
|PRINT;
|FCAL;

|DEFBUCLE impresion;
#1#1;
;
#0#0 , "      ";
#0#1 , "zzzzzz";
be;
NULL,imprime;
|FIN;

|CALCULO alba0019;|TIPO 3;
|SI #0#8 = "SI";|O #0#8 = "si";
  aAlfa = Usuario; |NOME_DAT #1 aAlfa;
  |DELINDEX #1;
  |INFOR informe;
  |IMPRE 1;
  |SI FSalida = 0;
    |ABRE #1;
    |BUCLE lee_alb;
    |BUCLE lee_fc;
    |BUCLE impresion;
    |LIBERA #1;
    |CIERRA #1;
    |PIEINF;
  |FINSI;
  |FININF;
  |FINIMP;
  |DELINDEX #1;
|FINSI;
|FCAL;

|CALCULO lee_art;
|ABRE #4;
#4#0 = articulo;
|LEE 000#4=;
|SI #0#7 = 1;
  clave = #4#125;
  tipo = "linea";
|FINSI;
|SI #0#7 = 2;
  clave = #4#2;
  tipo = "Familia";
|FINSI;
|SI #0#7 = 3;
  clave = #4#3;
  tipo = "Subfamilia";
|FINSI;
|SI #0#7 = 4;
  clave = #4#126;
  tipo = "Marca";
|FINSI;
|LIBERA #4;
|CIERRA #4;
|FCAL;
