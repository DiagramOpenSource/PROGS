|FICHEROS;
     tpv00021 #0;
     agifa501 #1;
     agifa502 #2;
     temp0021 #3;
     agifa505 #4;
     agifa514 #5;
|FIN;

|VARIABLES;
     &Tempo   = "";
     aTempo3  = "";
     jj       = "";
     hor      = 0;
     salida   = 0;
     fichero  = "";
     horaen   = "";
     horab    = 0;
     dh1      = 0;
     hh1      = 0;
     dh2      = 0;
     hh2      = 0;
     informe  = "retifcc";
     hora     = "";
     &fei      = "";
     cam      = 0;
     &cai      = "";
     &tip      = 0;
     &tota     = 0;
     &toti     = 0;
     sw       = 0;
     fec      = @;
|FIN;


|PROCESO butemp;

        |SI sw = 0;
          fei = #3#0;
          cam = #3#1;
          cai = #3#1;
          fec = #3#0;
          sw = 1;
        |FINSI;

     |SI cam ! #3#1;  |O fec ! #3#0;
      tip = 1;
      |PRINT;
      tip = 0;
      tota = 0;
      cai = #3#1;
      cam = #3#1;
      fei = #3#0;
      fec = #3#0;
     |FINSI;

      tota = tota + #3#4;
      tip = 0;
      |PRINT;
      fei = "   '' ";
      cai = "''";

|FPRC;

|DEFBUCLE leetemp;
    #3#1;
    ;
#0#4,#0#6,#0#12;
#0#5,#0#7,#0#13;
;
NULL,butemp;
|FIN;

---------------------------------------------------------------------------
|PROCESO tiqdesC501;

  |SI #1#31 = "R"; |O #1#31 = "A"; |O #1#31 = "L"; |ACABA; |FINSI;

     || -------------------- Grabacion Fichero Temporal....

     #3#0 = #1#14;
     #3#1 = #1#33;
     #3#2 = #1#12;
     |LEE 000#3=;
     salida = FSalida;
     |SI salida = 0;
            #3#4 = #3#4 + #1#9;
            |GRABA 020#3a;
     |FINSI;
     |SI salida ! 0;
           |ABRE #4;
           #4#0 = #3#2;
           |LEE 000#4=;
           #3#3 = #4#1;
           |CIERRA #4;
           |ABRE #5;
           #5#0 = #3#1;
           |LEE 000#5=;
           #3#5 = #5#1;
           |CIERRA #5;
           #3#4 = #1#9;
           |GRABA 020#3n;
     |FINSI;
|FPRC;

|DEFBUCLE tiq501;
     #1#3;
     33, 12,13; || Fecha, Cli, Tipo Ser, Num, / Camarero, Caja , Impreso
     #0#4,"      ", " ", #0#0, #0#2, #0#6, #0#12, " ";
     #0#5,"zzzzzz", "z", #0#1, #0#3, #0#7, #0#13, "z";
     ;
     NULL, tiqdesC501;
|FIN;
---------------------------------------------------------------------------
|PROCESO inicio; |TIPO 3;
     |HAZ CreaTempo; aTempo3 = Tempo;
     |NOME_DAT #3 aTempo3; |DELINDEX #3;
     |ABRE #3;
     |IMPRE 0;
     |SI FSalida = 0;
           |INFOR informe;
           |SI FSalida = 0;
                |BUCLE tiq501;
                |BUCLE leetemp;
                |SI sw ! 0;
                    tip = 1;
                    |PRINT;
                    |PIEINF;
                    |FININF;
                |FINSI;
            |FINSI;
            |FINIMP;
     |FINSI;
     |CIERRA #3;
     |DELINDEX #3; Tempo = aTempo3; |HAZ BoraTempo;
|FPRC;

|PROCESO mayus; |TIPO 0;
     #0Campo = #0Campo > "";
     |PINTA #0Campo;
|FPRC;
