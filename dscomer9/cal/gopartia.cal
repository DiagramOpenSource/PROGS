|FICHEROS;
     gopartia #0;
     goptrbca #1;
     gopre003 #2;
     goptrbli #3;
     gopre004 #5;
     goparame #10;
|FIN;
-----------------------------------------------------------------------------
|VARIABLES;
     aAlfa = "";
     aAlfa1 = "";
     &eaSerPre      = "";
     &enNumPre      = 0;
     &eaCapi        = "";
     &eaParti       = "";
     &eaDesPa       = "";

     &cParam        = "";

     &nCambio       = 0;

     &cCodMonBase   = "";
     &cCodMonTrab   = "";
     &cCodMonConv   = "";
     &cCodMonActu     = "";
     &cDesMonBase   = "";
     &cDesMonTrab   = "";

     &nDeci_PBase   = 0;
     &nDeci_TBase   = 0;
     &nDeci_PTrab   = 0;
     &nDeci_TTrab   = 0;
     &nDeci_TotVis  = 0;

     &nEurComTrab   = 0;
     &nEurComBase   = 0;
     &nEurVenTrab   = 0;
     &nEurVenBase   = 0;
     &nPreComTrab   = 0;
     &nPreComBase   = 0;
     &nPreVenTrab   = 0;
     &nPreVenBase   = 0;
     &nPrecioComp   = 0;
     &nPrecioVent   = 0;

     &enHorasAnt    = 0;

     nActu          = 0;
     nModo          = 0;
     nBotParti      = 0;

     cParti         = "";

|FIN;
-----------------------------------------------------------------------------
|PROCESO MiraPend; |TIPO 2;
     #1#19 = #1#19 -. #0#10;
     |SI enHorasAnt ! 0;
        enHorasAnt = enHorasAnt +. #0#10;
     |FINSI;
     |HAZ CalcuGopartia;
|FPRC;
-----------------------------------------------------------------------------
|PROCESO PinPen; |TIPO 7;
     #0#0 = #1#16;                                ||Serie Pres.
     #0#1 = #1#17;                                ||No. Presup.


     |PINTA 1269, #1#18;
     |PINTA 1369, #1#19;
     |ATRI 0;
|FPRC;
-----------------------------------------------------------------------------
|PROCESO MirAct; |TIPO 0;
     nActu = #1#19;

     |SI nActu < #0#10;
          |MENAV "0000LA CANTIDAD ASIGNADA ES SUPERIOR AL TOTAL";
          |ERROR10;
     |FINSI;

     #0#15 = #1#7;                                ||Codigo de Cliente.
     #0#16 = #1#8;                                ||Nombre del Cliente.
     #0#2  = #1#0;                                ||Serie Expediente.
     #0#3  = #1#1;                                ||No. Expediente.
     #0#20 = #3#22;                               ||Codigo M.O.
     #0#21 = #1#14;                               ||Moneda de Trabajo.
     #0#28 = #3#2;                                ||Fecha Documento.
     #0#29 = "T";                                 ||Tipo Documeto(Trabajos).
     ||Ä
     #0#37 = #3#12;
     #0#38 = 0;
     #0#39 = 0;
     #0#40 = 0;
     #0#41 = #3#13;
     #0#42 = 0;
     #0#43 = 0;
     #0#44 = 0;
     |HAZ CalcuGopartia;
|FPRC;
-----------------------------------------------------------------------------
|PROCESO Salida; |TIPO 11;

     |SI FSalida ! 1; |Y FSalida ! 7;
          |ACABA;
     |FINSI;

     |SI #1#19 ! 0;
          |SI enHorasAnt = 0;
             |MENAV "0000QUEDAN CANTIDADES POR ADJUDICAR";
          |SINO;
             aAlfa1 = "0000QUEDAN CANTIDADES POR ADJUDICAR. EL PENDIENTE DEBE SER 0 o " + enHorasAnt;
             |MENAV aAlfa1; |ERROR;
          |FINSI;
     |FINSI;

|FPRC;
-----------------------------------------------------------------------------
|PROCESO LisPar; |TIPO 0;
     aAlfa = #0#8; |QBF aAlfa;
     |SI FSalida = 0; |Y #10#124 = "S"; |Y aAlfa = "";
          || permite blanco en capitulo y partida
     |SINO;
          eaSerPre = #0#0;
          enNumPre = #0#1;
          eaCapi = #0#33;
          eaParti = #0#8;
          |HAZ GuerPartid;
          |SI eaParti ! "";
               #0#33 = eaCapi;
               #0#8 = eaParti;
               #0#9 = eaDesPa;
               |PINTA #0#8;
               |PINTA #0#9;
          |FINSI;

          |HAZ BuscPart;
     |FINSI;
     |HAZ BHpar;
|FPRC;
-----------------------------------------------------------------------------
|PROCESO BuscPart;
     |ABRE #2;  |SELECT #2#2;
     #2#0 = #1#16;
     #2#1 = #1#17;
     #2#2 = #0#33;
     #2#4 = #0#8;
     |LEE 000#2=;
     |SI FSalida ! 0;
          |MENAV "0000NO EXISTE LA PARTIDA EN ESTE PRESUPUESTO";
          |ERROR;
     |SINO;
          |ABRE #5;
          |SELECT #3#5;
          #5#0 = #2#0;
          #5#1 = #2#1;
          #5#3 = #2#4;
          #5#5 = #3#22;
          |LEE 000#5=;

          |SI FSalida ! 0; |Y #10#95 = "S";
               |CONFI "0000NEL ARTICULO INTRODUCIDO NO SE ENCUENTRA EN LA PARTIDA. ¿CONTINUAR?";

               |SI FSalida = -1;
                    |ERROR;
                    |ACABA;
               |FINSI;

          |FINSI;

          |CIERRA #5;
          #0#0 = #2#0;                            ||Serie Pres.
          #0#1 = #2#1;                            ||N§ Pres.
          #0#4 = #1#15;                           ||Serie Albaran.
          #0#5 = #1#3;                            ||N§ Alabaran.
          #0#6 = #3#3;                            ||Linea Documento.
          #0#8 = #2#4;                            ||Partida.
          #0#9 = #2#5;                            ||Descricion Partida.
          #0#20 = #3#22;                          ||Codigo M.O.
          #0#30 = #3#7;                           ||Descripcion.
          |PINTA #0#8;
          |PINTA #0#9;
     |FINSI;

     |CIERRA #2;
|FPRC;
-----------------------------------------------------------------------------
|PROCESO BIpar; |TIPO 80;
     |CLS;
     |CONTROL_SIMPLE 0, "BOTON,F2 - Partidas Presupuesto", 2440, 2460, F2par;
     nBotParti = FSalida;
     |ESTADO_CONTROL nBotParti, "HIDE"; ||"SHOW""HIDE""ENABLE""DISABLE".
|FPRC;
------------------------------------------------------------------------------
|PROCESO BFpar; |TIPO 90;
     |PULSATECLA;
     |FIN_CONTROL_WINDOWS nBotParti;
     |PULSATECLA;
|FPRC;
------------------------------------------------------------------------------
|PROCESO BSpar; |TIPO 7;
     |SI Campo = 8;
          |ESTADO_CONTROL nBotParti, "SHOW"; ||"SHOW""HIDE""ENABLE""DISABLE".
     |SINO;
          |ESTADO_CONTROL nBotParti, "HIDE"; ||"SHOW""HIDE""ENABLE""DISABLE".
     |FINSI;
|FPRC;
-------------------------------------------------------------------------------
|PROCESO BHpar; |TIPO 0;
     |ESTADO_CONTROL nBotParti, "HIDE"; ||"SHOW""HIDE""ENABLE""DISABLE".
|FPRC;
-------------------------------------------------------------------------------
|PROCESO F2par;
     |PTEC 824;
|FPRC;
-------------------------------------------------------------------------------
