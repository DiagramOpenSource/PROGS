|FICHEROS;
     tagz0007 #0;
     agifa019 #19;
     tagm0021 #21;
     tagm0036 #36;
     agifa024 #24;
|FIN;

|VARIABLES;
     nPrime = 0;
     &eaCliente = "";
     &eaArticulo = "";
     &Tempo = "";
     nHay = 0;
     nConta = 0;
|FIN;

|PROCESO Tmp;
     |SI #0#3 = #0#2; |O #0#6 = " ";
          |ACABA;
     |FINSI;

     |ABRE #21; |SELECT #2#21;
     #21#0 = #0#0; || Cli
     #21#2 = #0#1; || Art
     |LEE 101#21=;
     |SI FSalida = 0;
          #21#12 = #0#3;
          |GRABA 020#21a;
          |LIBERA #21;
     |FINSI;
     |CIERRA #21;

     |ABRE #36;
     |LEE 000#36u;
     |SI FSalida = 0;
          nConta = #36#0 + 1;
     |SINO;
          nConta = 1;
     |FINSI;
     |DDEFECTO #36;
     #36#0 = nConta;
     #36#1 = #0#0;
     #36#2 = #0#1;
     #36#3 = ~;
     #36#4 = #0#2 - #0#3;
     |GRABA 020#36n;
     |CIERRA #36;
|FPRC;

|DEFBUCLE Tmp;
     #0#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Tmp;
|FIN;

|PROCESO Tecla; |TIPO 0;
     |SI nPrime = 0;
          Contenido = #0Campo;
          nPrime = 1;
     |FINSI;
     |SI Contenido = #0Campo; |Y FSalida = 0;
          |ENCAMPO #3#0;
          |SI FSalida = 0;
               #0#6 = "*"; |PINTA #0#6;
               |GRABA 020#0a;
          |SINO;
               |LEE 020#0=;
          |FINSI;
          |PINTA #0#3;
     |FINSI;
|FPRC;

|PROCESO Nuevas;
     |SI #0#3 > #0#2;
          |MENAV "0000No puede superar a la uniades en Stock";
          |ERROR;
     |FINSI;
|FPRC;

|PROCESO tagm0021;
     |DDEFECTO #19;
     #19#0 = #21#2;
     |LEE 000#19=;

     |DDEFECTO #24;
     #24#0 = #21#0;
     |LEE 000#24=;

     |SI #21#12 > 0;
          #0#0 = #21#0;
          #0#1 = #21#2;
          #0#2 = #21#12;
          #0#3 = 0;
          #0#4 = #19#1;
          #0#5 = #21#13;
          |GRABA 000#0n;
          nHay = 1;
     |FINSI;
|FPRC;

|DEFBUCLE tagm0021;
     #21#1;
     ;
     eaCliente, 00001;
     eaCliente, 99999;
     ;
     NULL, tagm0021;
|FIN;

|PROCESO Min;
     #0#0 = "      ";
     #0#1 = "                    ";
|FPRC;

|PROCESO Max;
     #0#0 = "zzzzzz";
     #0#1 = "zzzzzzzzzzzzzzzzzzzz";
|FPRC;

|PROGRAMA;
     |HAZ CreaTempo;
     |NOME_DAT #0 Tempo; |DELINDEX #0;
     |ABRE #0;
     |ABRE #19;
     |ABRE #24;
     |BUCLE tagm0021;
     |CIERRA #24;
     |CIERRA #19;
     |CIERRA #0;
     |SI nHay = 0;
          |MENAV "0000No hay registros...";
     |SINO;
          |PINPA #0#0;
          |ENTLINEAL #1#0, 2, 4, 22, 0, Min, Max;
          |CONFI "0000SActualizar entradas?";
          |SI FSalida = 0;
               |BUCLE Tmp;
          |FINSI;
     |FINSI;
     |HAZ BoraTempo; |DELINDEX #0;
|FPRO;
