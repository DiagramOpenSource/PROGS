|FICHEROS;
     dsz00103 #0;
     dsm00044 #44;
     agifa065 #65;
|FIN;

|VARIABLES;
     &enTipo = 0;
     nPrime = 0;
     nInfor = -1;
     nImpre = -1;
     aOpe = "";
     nSw = 0;
     nUni1 = 0;
     nUni2 = 0;
     nAntes = 0;
|FIN;

|PROCESO Imprime;
     nSw = 1;
     |SI #0#0 = "S";
          |SI nPrime = 0;
               nPrime = 1;
               |IMPRE 0;
               nImpre = FSalida;
               |SI FSalida = 0;
                    |INFOR "dsz00103";
                    nInfor = FSalida;
               |FINSI;
          |FINSI;
          |SI nImpre = 0; |Y nInfor = 0;
               |SI nAntes ! enTipo;
                    nAntes = enTipo;
                    enTipo = enTipo + 3;
                    |PRINT;
                    enTipo = nAntes;
               |FINSI;
               |PRINT;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO Historico;
     enTipo = 0;
     |SI #65#2 = "ES"; |O #65#2 = "SS";
          #44#21 = #65#11;
          #44#18 = #65#3;
          #44#8 = #65#4;
          |LEE 000#44=;
          |SI FSalida = 0;
               |SI #44#7 = "E"; |Y #65#2 = "SS";
                    enTipo = 1; |HAZ Imprime;
               |FINSI;
               |SI #44#7 = "S"; |Y #65#2 = "ES";
                    enTipo = 1; |HAZ Imprime;
               |FINSI;
          |SINO;
               enTipo = 1; |HAZ Imprime;
          |FINSI;
          |SI enTipo ! 0; |Y #0#1 = "S";
               |BORRA 020#65a;
          |FINSI;
     |FINSI;
     |LIBERA #65;
|FPRC;

|DEFBUCLE Historico;
     #65#1;
     ;
     #0#4, "01.01.0000", "  ", 000000, 00000, "     ";
     #0#5, "31.12.9999", "zz", 999999, 99999, "zzzzz";
     be;
     NULL, Historico;
|FIN;

|PROCESO Regulariza;
     enTipo = 0;

     |SI #44#7 = "E";
          aOpe = "ES";
     |SINO;
          aOpe = "SS";
     |FINSI;
     #65#0 = #44#0;
     #65#1 = #44#5;
     #65#2 = aOpe;
     #65#3 = #44#18;
     #65#4 = #44#8;
     #65#11 = #44#21;
     |LEE 000#65=;
     |SI FSalida ! 0;
          enTipo = 2; |HAZ Imprime;
     |FINSI;

     |SI enTipo ! 0; |Y #0#2 = "S";
          |BORRA 020#44a;
     |FINSI;

     |LIBERA #44;
|FPRC;

|DEFBUCLE Regulariza;
     #44#1;
     0;
     "     ", 000000, 00000, #0#4;
     "zzzzz", 999999, 99999, #0#5;
     be;
     NULL, Regulariza;
|FIN;

|PROCESO Historico1;
     enTipo = 0;

     |SI #65#2 ! "ES"; |Y #65#2 ! "SS"; |ACABA; |FINSI;


     #44#21 = #65#11;
     #44#18 = #65#3;
     #44#8 = #65#4;
     |LEE 000#44=;
     |SI FSalida = 0;
          |SI #44#7 = "E";
               nUni1 = #44#4;
               nUni2 = #44#12;
               aOpe = "ES";
          |SINO;
               nUni1 = -#44#4;
               nUni2 = -#44#12;
               aOpe = "SS";
          |FINSI;

          |SI #44#0 ! #65#0;
                   |O #44#1 ! #65#5; |O #65#6 ! nUni1; |O #65#17 ! nUni2;
               enTipo = 3; |HAZ Imprime;
               |SI #0#3 = "S";
                    |BORRA 020#65a;
                    #65#0 = #44#0;
                    #65#2 = aOpe;
                    #65#5 = #44#1;
                    #65#6 = nUni1;
                    #65#17 = nUni2;
                    |BORRA 000#65c;
                    |GRABA 020#65n;
               |FINSI;
          |FINSI;
          |LIBERA #44;
     |FINSI;
     |LIBERA #65;
|FPRC;


|DEFBUCLE Historico1;
     #65#1;
     ;
     #0#4, "01.01.0000", "  ", 000000, 00000, "     ";
     #0#5, "31.12.9999", "zz", 999999, 99999, "zzzzz";
     be;
     NULL, Historico1;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |ABRE #44;
     |BUCLE Historico;
     |CIERRA #44;

     |ABRE #65;
     |BUCLE Regulariza;
     |CIERRA #65;

     |ABRE #44;
     |BUCLE Historico1;
     |CIERRA #44;

     |SI nInfor = 0; |PIEINF; |FININF; |FINSI;
     |SI nImpre = 0; |FINIMP; |FINSI;
     |SI nSw = 0;
          |MENAV "0000No existen errores...";
     |FINSI;
|FPRC;
