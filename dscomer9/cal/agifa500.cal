|FICHEROS;
     agifa500 #0;
     agifa505 #5;
|FIN;

|VARIABLES;
     nNume     = 0;
     &eaEsEuro = "";
|FIN;

|PROCESO EntraPago; |TIPO 7;
     |SI eaEsEuro = "S";
          #0#7 = #0#1 * 166.386;
          |PINTA #0#7;
     |FINSI;
     |HAZ Cambio500;
|FPRC;

|PROCESO Cambio500;
     #0#3 = (#0#8 / 166.386) + #0#2;
     #0#3 = #0#3 - #0#1;

     |SI #0#3 < 0; #0#3 = 0; |FINSI;
     |PINTA #0#3;

     #0#9 = #0#8 + (#0#2 * 166.386);
     #0#9 = #0#9 - #0#7;
     |SI #0#9 < 0; #0#9 = 0; |FINSI;
     |PINTA #0#9;

     |ATRI I; |PINTA 2009, " CAMBIO..:"; |ATRI 0;
     |SI #0#0 = "T"; |O #0#0 = "C";
          |SI #0#2 > #0#1;
               |ATRI S; |PINTA 2009, " DIFEREN.:"; |ATRI 0;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO Transforma; |TIPO 0;
     nNume = Contenido;
     |SI nNume = #0Campo;
          |HAZ Cambio500;
          |ACABA;
     |FINSI;

     |SI Campo = 1;
          #0#7 = #0#1 * 166.386;
          |PINTA #0#7;
          #0#3 = #0#2 - #0#1;
          |PINTA #0#3;
     |FINSI;
     |SI Campo = 7;
          #0#1 = #0#7 / 166.386;
          |PINTA #0#1;
          #0#3 = #0#2 - #0#1;
          |PINTA #0#3;
     |FINSI;
     |HAZ Cambio500;
|FPRC;

|PROCESO Paga;
     |SI #5#167 ! "S";
          |SI #0#2 > #0#1;
               |MENAV "0000No se permite un valor superior al tiquet";
               |ERROR;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO PagaPtas;
     |SI #5#167 ! "S";
          |SI #0#8 > #0#7;
               |MENAV "0000No se permite un valor superior al tiquet";
               |ERROR;
          |FINSI;
     |FINSI;
|FPRC;
