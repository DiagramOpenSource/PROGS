|FICHEROS;
     coima036 #36;
     coima037 #37;
|FIN;

|VARIABLES;
     aRuta = "";
     aImg = "";
     aLon = "";
     aNom = "";
     i = 0;
     nPos = 0;
     aCar = "";

     aOrg = "";
     aDes = "";
     aIP = "";
|FIN;

|PROCESO Browse36;
     aRuta = "F*.*";
     |BROWSE aRuta;
     aRuta = aRuta % 2; |QBF aRuta;
     |SI aRuta ! "F";
          #36Campo = aRuta; |PINTA #36Campo;
     |SINO;
          |ERROR;
     |FINSI;
|FPRC;

|PROCESO BorraImagen36;
     |SI aImg = ""; |ACABA; |FINSI;
     |HAZ SacaNom36;
     |DBASE aOrg;
     aImg = aOrg + "000web/imagenes/" + aNom;
     |FBORRA aImg;
|FPRC;

|PROCESO SacaNom36;
     aLon = aImg % A0;
     aNom = "";
     |PARA i = 1; |SI i [ aLon; |HACIENDO i = i + 1;
          nPos = -(i * 100 + 1)
          aCar = aImg % nPos;
          |SI aCar = "\"; |O aCar = "/"; |SAL; |FINSI;
          aNom = aCar + aNom;
     |SIGUE;
|FPRC;

|PROCESO CopiaImagen36;
     |SI aImg = ""; |ACABA; |FINSI;
     |DBASE aDes;
     aDes = aDes + "000web/"; |MKDIR aDes;
     aDes = aDes + "imagenes/"; |MKDIR aDes;
     |HAZ SacaNom36;
     aDes = aDes + aNom;
     aOrg = aImg;
     |SI aIP = "";
          |COPIA_FICHERO aOrg, aDes;
     |SINO;
          |RECIBE_FICHERO aOrg, aDes;
     |FINSI;
|FPRC;

|PROCESO Foto36; |TIPO 0;
     |SI FSalida = 10;
          |HAZ Browse36;
     |FINSI;
     |SI #36Campo ! Contenido;
          aIP = ""; |IP_REMOTO aIP; |QBF aIP;
          aImg = Contenido; |QBF aImg;
          |HAZ BorraImagen36;
          aImg = #36Campo; |QBF aImg;
          |HAZ CopiaImagen36;
     |FINSI;
|FPRC;

|PROCESO Browse37;
     aRuta = "F*.*";
     |BROWSE aRuta;
     aRuta = aRuta % 2; |QBF aRuta;
     |SI aRuta ! "F";
          #37Campo = aRuta; |PINTA #37Campo;
     |SINO;
          |ERROR;
     |FINSI;
|FPRC;

|PROCESO Foto37; |TIPO 0;
     |SI FSalida = 10;
          |HAZ Browse37;
     |FINSI;
     |SI #37Campo ! Contenido;
          aIP = ""; |IP_REMOTO aIP; |QBF aIP;
          aImg = Contenido; |QBF aImg;
          |HAZ BorraImagen36;
          aImg = #37Campo; |QBF aImg;
          |HAZ CopiaImagen36;
     |FINSI;
|FPRC;
