|FICHEROS;
     albw0037 #0;
     albw0036 #36;

     referen@ #100;
|FIN;

|VARIABLES;
     nEstaRepe = 0;
     aMensaje = "";

     &enContador = 0;
     &eaNomDef = "";
     aFichero = "";
     aDef = "";
|FIN;

|PROGRAMA;
     aFichero = eaNomDef;
     |QBF aFichero;
     |SI aFichero ! "";
          |NOME_DAT #36 aFichero;
     |SINO;
          |ACABA;
     |FINSI;

     |DDEF aDef; aDef = aDef + "albw0036";
     |CARGA_DEF aDef, referen@;
     |SI FSalida ! 0; |ACABA; |FINSI;

     |NOME_DAT #100 aFichero;

     |ABRE #100;
     |ABRE #albw0036;

     #albw0036#0 = enContador;
     |LEE 000#albw0036.=;

     |PINPA #0#albw0037;
     #albw0037#0 = #albw0036#18;
     |PINTA #albw0037#0;
     aMensaje = "0000Numero Contador " + enContador;
     ||MENAV aMensaje;
     |ENCAMPO #0#albw0037;
     |SI FSalida = 0;
          #albw0036#0 = enContador;
          |LEE 101#albw0036.=;
          |SI FSalida = 0;
               #albw0036#18 = #albw0037#0;
               |GRABA 020#albw0036.a;
               |LIBERA #albw0036;
          |FINSI;
     |FINSI;

     |CIERRA #albw0036;
     |CIERRA #100;
     |DESCARGA_DEF #referen@;
|FPRO;

|PROCESO albw0036;
     |SI enContador ! #referen@#0;
          nEstaRepe = 1;
          |ERROR10;
     |FINSI;
|FPRC;

|DEFBUCLE albw0036;
 #referen@#2001;
 ;
 #albw0037#0;
 #albw0037#0;
 ;
 NULL, albw0036;
|FIN;

|PROCESO NoRepe; TIPO 0;
     nEstaRepe = 0;
     |SI #albw0037#0 ! 0;
          |BUCLE albw0036;
     |FINSI;
     |SI nEstaRepe = 1;
          |MENAV "0000Orden de Programacion ya introducida...";
          |ERROR;
     |FINSI;
|FPRC;
