|FICHEROS;
     albw0019 #0;
||     albw0020 #1,MANTE;          ||YA No se usa para nada

     albm0037 #37;       ||Orden (C)
     albm0038 #38;       ||Orden (L)

     albw0042 #42,MANTE; ||Aux.Partidas Orden
     albm0062 #62;       ||Rel.Orden-Partidas

     albm0063 #63,MANTE; ||PesoMtsPzas OrdenFab
     albm0026 #26;       ||Articulos Lin Fab(C)

     albm0040 #40;       ||Rel. Orden/Pedido
     albm0064 #64;       ||Partida-Pedidos
     albm0065 #65;       ||Partida-Ordenes

     agifa073 #73;       ||Pedidos Vta. Lineas
     albm0046 #46;       ||Art./Alm./PartidaCAB
     agifa112 #112;      ||Proveedores

     referen@ #100;      ||CARGA_DEF

     agifa019 #19;
     agifa029 #29;

     albm0060 #60;       ||Rel. Orden/Mezclada
|FIN;

|VARIABLES;
     nLineaReal = 0;
     aAuxPar = "";
     nUnPar = 0;

     nSwCrearPartida = 0;

     aTexto = "";
     nExistencias = 0;
     nLinea = 0;
     nSwHay = 0;
     nSwSalte = 0;
     aAux = "";
     nSwEsta = 0;

     &eaProducido = "";
     &eaDesPro = "";
     &enLinOF = 0;

     nPiezas = 0;
     nUdPedido = 0;
     nServidas = 0;

     &enUni1 = 0;
     &enUni2 = 0;
     &enAlbForma = 0;
     &eaIncPar = "";
     &eaArtOF = "";
     &enAlmOF = 0;
     &eaSerOF = "";
     &eaNumOF = "";
     &eaParOF = "";
     &efFecOF = @;

     aSerie = "";

     nModo = 0;
     nMulti1 = 0;
     nMulti2 = 0;
     nPeso = 0;
     nMetros = 0;
     nLinPro = 0;
     aMensaje = "";
     aTempo42 = "";
     &Tempo = "";

 {-1}aMenu  = "";
     aMenu1 = "2400";
     aMenu2 = "1";
     aMenu3 = " ";
     aMenu4 = "RAC";
     aMenu5 = " Repasar ";
     aMenu6 = " Aceptar ";
     aMenu7 = " Cancelar ";
     aAlfa = "";
     nHay = 0;
|FIN;

|PROCESO albm0063_piezas;
     nPiezas = nPiezas + #albm0063#7;
|FPRC;

|DEFBUCLE albm0063_piezas;
 #albm0063#1;
 ;
 #37#16, #37#0, #37#6, 0001;
 #37#16, #37#0, #37#6, 9999;
 ;
 NULL, albm0063_piezas;
|FIN;

|PROCESO albm0062_partidasOF2;
     enAlbForma = 1;
     eaArtOF = "";
     enAlmOF = #albm0062#2;
     aSerie = #albw0019#6;
     |QBT aSerie;
     eaSerOF = ("00" + aSerie) % -102;
     eaNumOF = #albw0019#0;
     eaParOF = #albm0062#3;
     enLinOF = #albm0062#1;

     efFecOF = #albw0019#7;
     enUni1 = -#albm0062#5;
     enUni2 = 0;
     eaIncPar = "N";
     eaProducido = #albw0019#1;
     eaDesPro = #albw0019#2;

     |HAZ AlberoActPartidasOF2;
|FPRC;

|DEFBUCLE albm0062_partidasOF2;
 #albm0062#1;
 ;
 #albw0019#6, #albw0019#0, 00001, "               ";
 #albw0019#6, #albw0019#0, 99999, "zzzzzzzzzzzzzzz";
 ;
 NULL, albm0062_partidasOF2;
|FIN;

|PROCESO ActOrden;
     |SI #0#4 ! 0; |Y #0#5 = "S";
          #37#16 = #0#6;
          #37#0 = #0#0;
          |LEE 121#37=;
          |SI FSalida = 0;
               #37#13 = #0#4;
               #37#15 = #0#5;           ||Finalizada
               #37#19 = #0#7;
               |GRABA 020#37a;
               |LIBERA #37;
          |FINSI;

          nPiezas = 0;
          |BUCLE albm0063_piezas;
          |HAZ CreaPartida;

          |BUCLE albm0062_partidasOF2;
     |FINSI;
|FPRC;

|DEFBUCLE ActOrden;
     #0#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, ActOrden;
|FIN;



|PROCESO Tecla; |TIPO 0;
     |SI #0Campo = Contenido; |Y FSalida = 0;
       |ET E1;

            nSwSalte = 0;
            nMetros = 0;
            nPeso = 0;
            |HAZ LasPartidas;
            |SI nSwSalte = 0;
                 #albw0019#4 = nMetros;
                 |PINTA #albw0019#4;
                 #albw0019#5 = "S";
                 |PINTA #albw0019#5;
                 |ENCAMPO #5#0;
                 |GRABA 020#0a;
                 |PINTA #0#4;
                 |PINTA #0#5;
            |FINSI;
     |FINSI;
|FPRC;

|PROCESO Min0;
     #0#6 = "     ";
     #0#0 = 1;
|FPRC;

|PROCESO Max0;
     #0#6 = "zzzzz";
     #0#0 = 999999;
|FPRC;

|PROCESO Ordenes;
     nHay = 1;
     #0#0 = #37#0;
     #0#1 = #37#2;
     #0#2 = #37#3;
     #0#3 = #37#12;
     #0#6 = #37#16;
     |GRABA 020#0n;
|FPRC;

|DEFBUCLE Ordenes;
     #37#1;
     15;
     "     ", 000001, "N";
     "zzzzz", 999999, "N";
     ;
     NULL, Ordenes;
|FIN;

|PROGRAMA;
     |C_V #albm0063#9, 1, "N";
     |C_V #albm0063#10, 1, "N";
     |C_V #albm0063#11, 1, "N";
     |C_V #albm0063#12, 1, "N";

     |CLS;
     aAlfa = Usuario;
     |NOME_DAT #0 aAlfa; |DELINDEX #0;

     |ENTLINEAL #1#0, 1, 7, 21, 1, Min0, Max0;
     |ABRE #0;
     |BUCLE Ordenes;
     |CIERRA #0;
     |SI nHay = 0;
          |MENAV "0000No hay ordenes pendientes...";
     |SINO;
          |PARA; |SI aMenu2 = 1; |HACIENDO;
               |ENTLINEAL #1#0, 1, 4, 22, 0, Min0, Max0;
               |MENU aMenu;
               aMenu2 = FSalida;
          |SIGUE;
          |SI aMenu2 = 2;
               |ABRE #37;
               |ABRE #38;
               |BUCLE ActOrden;
               |CIERRA #38;
               |CIERRA #37;
          |FINSI;
     |FINSI;
     |DELINDEX #0;
|FPRO;

|PROCESO MiniPar;
     #42#4 = #albw0019#6;
     #42#0 = #albw0019#0;
||     #42#1 = #albw0020#1;
     #42#2 = 00001;
     #42#3 = "               ";
|FPRC;

|PROCESO MaxiPar;
     #42#4 = #albw0019#6;
     #42#0 = #albw0019#0;
||     #42#1 = #albw0020#1;
     #42#2 = 99999;
     #42#3 = "zzzzzzzzzzzzzzz";
|FPRC;

|PROCESO albm0062_borra;
     |BORRA 020#albm0062.a;
|FPRC;

|DEFBUCLE albm0062_borra;
 #albm0062#1;
 ;
|| #albw0019#6, #albw0019#0, #albw0020#1, 00001, "               ";
|| #albw0019#6, #albw0019#0, #albw0020#1, 99999, "zzzzzzzzzzzzzzz";
 #albw0019#6, #albw0019#0, 00001, "               ";
 #albw0019#6, #albw0019#0, 99999, "zzzzzzzzzzzzzzz";
 ;
 NULL, albm0062_borra;
|FIN;

|PROCESO albm0062;
     |DDEFECTO #albw0042;
     #albw0042#4 = #albm0062#4;
     #albw0042#0 = #albm0062#0;
     #albw0042#1 = #albm0062#1;
     #albw0042#2 = #albm0062#2;
     #albw0042#3 = #albm0062#3;
     |LEE 101#albw0042.=;
     |SI FSalida ! 0;
          #albw0042#5 = #albm0062#5;
          |GRABA 020#albw0042.n;
     |SINO;
          #albw0042#5 = #albm0062#5;
          |GRABA 020#albw0042.a;
     |FINSI;
     |LIBERA #albw0042;
|FPRC;

|DEFBUCLE albm0062;
 #albm0062#1;
 ;
|| #albw0019#6, #albw0019#0, #albw0020#1, 00001, "               ";
|| #albw0019#6, #albw0019#0, #albw0020#1, 99999, "zzzzzzzzzzzzzzz";
 #albw0019#6, #albw0019#0, 00001, "               ";
 #albw0019#6, #albw0019#0, 99999, "zzzzzzzzzzzzzzz";
 ;
 NULL, albm0062;
|FIN;


|PROCESO albm0060;
     |DDEFECTO #albw0042;
     #albw0042#4 = #albm0060#2;
     #albw0042#0 = #albm0060#0;
     #albw0042#1 = #albm0060#5;
     #albw0042#2 = 1;
     aAux = #albm0060#1;
     |QBF aAux;
     aAux = aAux + "/" + #albm0060#3;
     |QBF aAux;
     #albw0042#3 = aAux;
     |LEE 101#albw0042.=;
     |SI FSalida ! 0;
          |GRABA 020#albw0042.n;
     |FINSI;
     |LIBERA #albw0042;
|FPRC;

|DEFBUCLE albm0060;
 #albm0060#1;
 4;
 #albw0019#6, #albw0019#0, "     ", 000000, "O";
 #albw0019#6, #albw0019#0, "zzzzz", 999999, "O";
 ;
 NULL, albm0060;
|FIN;

|PROCESO albw0042;
     nLineaReal = #albw0042#6;
     |SI nLineaReal = 0;
          nLineaReal = #albw0042#1;
     |FINSI;

     |ABRE #albm0038;
     |DDEFECTO #albm0038;
     #albm0038#16 = #0#6;
     #albm0038#0 = #0#0;
     #albm0038#1 = nLineaReal;
     |LEE 101#albm0038.=;
     |SI FSalida = 0;
          aAuxPar = #albm0038#6;
          |QBF aAuxPar;
          nUnPar = #albm0038#9;
          |SI aAuxPar ! ""; |Y nUnPar ! 0;
               |LIBERA #albm0038;

               #albm0038#16 = #0#6;
               #albm0038#0 = #0#0;
               #albm0038#1 = 99;
               |LEE 000#albm0038.];
               |SI FSalida = 0;
                    |LEE 000#albm0038.a;
               |SINO;
                    |LEE 000#albm0038.u;
               |FINSI;
               |SI FSalida = 0; |Y #albm0038#16 = #0#6; |Y #albm0038#0 = #0#0;
                    nLinea = #albm0038#1 + 1;
               |SINO;
                    nLinea = 1;
               |FINSI;
               |DDEFECTO #albm0038;
               #albm0038#16 = #0#6;
               #albm0038#0 = #0#0;
               #albm0038#1 = nLinea;
               |LEE 101#albm0038.=;
               |SI FSalida ! 0; |GRABA 020#albm0038.b; |FINSI;

               nLineaReal = nLinea;

               #albm0038#2 = #albm0046#0;
               |ABRE #agifa019;
               |DDEFECTO #agifa019;
               #agifa019#0 = #albm0046#0;
               |LEE 000#agifa019.=;
               |SI FSalida = 0;
                    #albm0038#3 = #agifa019#1;
               |FINSI;
               |CIERRA #agifa019;
               #albm0038#4 = #albw0042#2;         ||Almacen
               |ABRE #agifa029;
               |DDEFECTO #agifa029;
               #agifa029#0 = #albw0042#2;
               |LEE 000#agifa029.=;
               |SI FSalida = 0;
                    #albm0038#5 = #agifa029#1;
               |FINSI;
               |CIERRA #agifa029;

          |FINSI;
          #albm0038#6 = #albw0042#3;
          #albm0038#9 = #albw0042#5;

          |ABRE #albm0046;
          #albm0046#1 = #albw0042#2;
          #albm0046#2 = #albw0042#3;
          |LEE 000#albm0046.=;
          |SI FSalida = 0;
               #albm0038#14 = #albm0046#38;
               #albm0038#15 = #albm0038#14 * #albm0038#9;
               #albm0038#10 = #albm0046#3;
               |ABRE #agifa112;
               |DDEFECTO #agifa112;
               #agifa112#0 = #albm0038#10;
               |LEE 000#agifa112.=;
               #albm0038#11 = #agifa112#1;
               |CIERRA #agifa112;
          |FINSI;
          |CIERRA #albm0046;
          |GRABA 020#albm0038.a;
          |LIBERA #albm0038;
     |FINSI;
     |CIERRA #albm0038;


     |DDEFECTO #albm0062;
     #albm0062#4 = #albw0042#4;
     #albm0062#0 = #albw0042#0;
     #albm0062#1 = nLineaReal;
     #albm0062#2 = #albw0042#2;
     #albm0062#3 = #albw0042#3;
     |LEE 101#albm0062.=;
     |SI FSalida ! 0;
          #albm0062#5 = #albw0042#5;
          |GRABA 020#albm0062.n;
     |SINO;
          #albm0062#5 = #albw0042#5;
          |GRABA 020#albm0062.a;
     |FINSI;
     |LIBERA 020#albm0062;
|FPRC;

|DEFBUCLE albw0042;
 #albw0042#1;
 ;
|| #albw0019#6, #albw0019#0, #albw0020#1, 00001, "               ";
|| #albw0019#6, #albw0019#0, #albw0020#1, 99999, "zzzzzzzzzzzzzzz";
 #albw0019#6, #albw0019#0, 00001, "               ";
 #albw0019#6, #albw0019#0, 99999, "zzzzzzzzzzzzzzz";
 ;
 NULL, albw0042;
|FIN;

|PROCESO LasPartidas;
     |HAZ CreaTempo; aTempo42 = Tempo;
     |NOME_DAT #42 aTempo42; |DELINDEX #42;

     |ABRET #albw0042;
     |BUCLE albm0062;
     |BUCLE albm0060;
     |PUSHV 0623 2355;
     |PINPA #0#42;
     |ENTLINEAL #1#42, 4, 2, 22, 0, MiniPar, MaxiPar;
     |POPV;
     |CIERRAT #albw0042;

     |SI nSwSalte = 1;
          |ACABA;
     |FINSI;

     |BUCLE albm0062_borra;
     |ABRE #albm0062;
     |BUCLE albw0042;
     |CIERRA #albm0062;

     |ABRE #albm0063;

     |ABRE #albm0037;
     |DDEFECTO #albm0037;
     #albm0037#16 = #0#6;
     #albm0037#0 = #0#0;
     |LEE 101#albm0037.=;
     nLinPro = #albm0037#6

     |PUSHV 0742 2380;
     |PINPA #0#63;
     |ENTLINEAL #1#63, 4, 1, 22, 0, MiniPeso, MaxiPeso;
     |POPV;
     |CIERRA #albm0063;

     |HAZ SacaTotales;

     |CIERRA #albm0037;

     |DELINDEX #42; Tempo = aTempo42; |HAZ BoraTempo;
|FPRC;

|PROCESO MiniPeso;
     #albm0063#0 = #albw0019#6;
     #albm0063#1 = #albw0019#0;
||     #albm0063#2 = #albw0020#1;
     #albm0063#3 = nLinPro;
     #albm0063#4 = 0001;
|FPRC;

|PROCESO MaxiPeso;
     #albm0063#0 = #albw0019#6;
     #albm0063#1 = #albw0019#0;
||     #albm0063#2 = #albw0020#1;
     #albm0063#3 = nLinPro;
     #albm0063#4 = 9999;
|FPRC;

|PROCESO SacaPiezas; |TIPO 7;
     nModo = (FEntrada/100) ! 0;
     |SI nModo = 1;
          |ABRE #albm0026;
          |DDEFECTO #albm0026;
          #albm0026#0 = #albw0019#1;
          |LEE 000#albm0026.=;
          #albm0063#7 = #albm0026#5;
          |PINTA #albm0063#7;
          |CIERRA #albm0026;
     |FINSI;
|FPRC;


|PROCESO albm0063;
     nMulti1 = #albm0063#5 * #albm0063#7;
     nPeso = nPeso + nMulti1;
     ||Tiquet. 3026/794. No debe de multiplicar los metros por numero de piezas.
     ||nMulti2 = #albm0063#6;
     ||Tiquet. 3026/843. Rectificacion SI debe de multiplicar los metros por numero de piezas.
     nMulti2 = #albm0063#6 * #albm0063#7;
     nMetros = nMetros + nMulti2;
|FPRC;

|DEFBUCLE albm0063;
 #albm0063#1;
 ;
|| #albw0019#6, #albw0019#0, #albw0020#1, nLinPro, 0001;
|| #albw0019#6, #albw0019#0, #albw0020#1, nLinPro, 9999;
 #albw0019#6, #albw0019#0, nLinPro, 0001;
 #albw0019#6, #albw0019#0, nLinPro, 9999;
 ;
 NULL, albm0063;
|FIN;

|PROCESO SacaTotales;
     nPeso = 0;
     nMetros = 0;
     |BUCLE albm0063;
     aMensaje = "0000Total Peso: " + nPeso + " Total Metros: " + nMetros;
     |MENAV aMensaje;
|FPRC;

|PROCESO CreaPartida;
     enAlbForma = 1;
     eaArtOF = #albw0019#1;
     enAlmOF = 00001;
     aSerie = #albw0019#6;
     |QBT aSerie;
     eaSerOF = ("00" + aSerie) % -102;
     eaNumOF = #albw0019#0;
     eaParOF = eaNumOF + "/" + eaSerOF;


     |ABRE #albm0065;
     |DDEFECTO #albm0065;
     #albm0065#0 = enAlmOF;
     #albm0065#1 = eaParOF;
     |LEE 101#albm0065.=;
     |SI FSalida ! 0; |GRABA 020#albm0065.b; |FINSI;
     #albm0065#2 = eaSerOF;
     #albm0065#3 = eaNumOF;
     |GRABA 020#albm0065.a;
     |LIBERA #albm0065;
     |CIERRA #albm0065;


     |ABRE #albm0037;
     |DDEFECTO #albm0037;
     #albm0037#16 = #0#6;
     #albm0037#0 = #0#0;
     |LEE 000#albm0037.=;
     |CIERRA #albm0037;
     ||efFecOF = #albm0037#1;
     efFecOF = #albw0019#7;
     enUni1 = #albm0037#13;
     enUni2 = nPiezas;
     eaIncPar = "N";

     ||Crea La Partida
     |HAZ AlberoActPartidasOF;

     |HAZ CreaPedidosPartida;
|FPRC;

|PROCESO albm0040;
     |DDEFECTO #albm0064;
     #albm0064#0 = enAlmOF;
     #albm0064#1 = eaParOF;
     #albm0064#2 = #albm0040#1;
     #albm0064#3 = #albm0040#2;
     |LEE 101#albm0064.=;
     |SI FSalida ! 0; |GRABA 020#albm0064.b; |FINSI;
     #albm0064#4 = #albm0040#3;

     |ABRE #agifa073;
     |DDEFECTO #agifa073;
     #agifa073#28 = #albm0040#1;
     #agifa073#0 = #albm0040#2;
     #agifa073#1 = #albm0040#3;
     |LEE 000#agifa073.=;
     |SI FSalida = 0;
          nUdPedido = #agifa073#5;
          nServidas = #agifa073#12 + #agifa073#43;
          |SI nUdPedido = nServidas;
               #albm0064#6 = "S";
          |FINSI;
     |SINO;
          nUdPedido = 0;
     |FINSI;
     |CIERRA #agifa073;
     #albm0064#5 = nUdPedido;
     |GRABA 020#albm0064.a;
     |LIBERA #albm0064;
|FPRC;

|DEFBUCLE albm0040;
 #albm0040#1;
 ;
 #albw0019#6, #albw0019#0, "     ", 000000, 001;
 #albw0019#6, #albw0019#0, "zzzzz", 999999, 999;
 ;
 NULL, albm0040;
|FIN;

|PROCESO CreaPedidosPartida;
     |ABRE #albm0064;
     |BUCLE albm0040;
     |CIERRA #albm0064;
|FPRC;

|PROCESO FechaFin; |TIPO 0;
     |SI #albw0019#5 = "N";
          #albw0019#7 = "01.01.0000";
          |PINTA #albw0019#7;
          |C_M #albw0019#7, 1, "N";
     |SINO;
          |C_M #albw0019#7, 1, "S";
          |SI #albw0019#7 = "01.01.0000";
               #albw0019#7 = ~;
          |FINSI;
          |ENCAMPO #7#albw0019;
     |FINSI;
|FPRC;

|PROCESO albm0038;
     |SI #albm0038#2 = #albm0046#0;
          nSwEsta = 1;
          |ERROR10;
     |FINSI;
|FPRC;

|DEFBUCLE albm0038;
 #albm0038#1;
 ;
 #albw0019#6, #albw0019#0, 01;
 #albw0019#6, #albw0019#0, 99;
 ;
 NULL, albm0038;
|FIN;

|PROCESO CtrlArtPartida;
     aAux = #albw0042#3;
     |QBF aAux;
     |SI aAux ! "";
          |ABRE #albm0046;
          #albm0046#1 = #albw0042#2;
          #albm0046#2 = #albw0042#3;
          |LEE 000#albm0046.=;
          |SI FSalida ! 0;
               aMensaje = "0000Partida inexistente";
               |MENAV aMensaje;
               |ERROR;
          |SINO;
               nExistencias = #albm0046#31;
               nSwEsta = 0;
               |BUCLE albm0038;
               |SI nSwEsta = 0;
                    nSwCrearPartida = 0;
                    aMensaje = "0000La partida introducida NO corresponde a ningun articulo de la formula de la Orden de Fabricacion";
                    |MENAV aMensaje;
                    aMensaje = "0000N¿Aceptar partida?";
                    |CONFI aMensaje;
                    |SI FSalida = 0;
                         nSwCrearPartida = 1;
                         |ABRE #albm0038;
                         |DDEFECTO #albm0038;
                         #albm0038#16 = #0#6;
                         #albm0038#0 = #0#0;
                         #albm0038#1 = 99;
                         |LEE 000#albm0038.];
                         |SI FSalida = 0;
                              |LEE 000#albm0038.a;
                         |SINO;
                              |LEE 000#albm0038.u;
                         |FINSI;
                         |SI FSalida = 0; |Y #albm0038#16 = #0#6; |Y #albm0038#0 = #0#0;
                              nLinea = #albm0038#1 + 1;
                         |SINO;
                              nLinea = 1;
                         |FINSI;
                         |DDEFECTO #albm0038;
                         #albm0038#16 = #0#6;
                         #albm0038#0 = #0#0;
                         #albm0038#1 = nLinea;
                         |LEE 101#albm0038.=;
                         |SI FSalida ! 0; |GRABA 020#albm0038.b; |FINSI;

                         #albw0042#6 = nLinea;

                         #albm0038#2 = #albm0046#0;
                         |ABRE #agifa019;
                         |DDEFECTO #agifa019;
                         #agifa019#0 = #albm0046#0;
                         |LEE 000#agifa019.=;
                         |SI FSalida = 0;
                              #albm0038#3 = #agifa019#1;
                         |FINSI;
                         |CIERRA #agifa019;
                         #albm0038#4 = #albw0042#2;         ||Almacen
                         |ABRE #agifa029;
                         |DDEFECTO #agifa029;
                         #agifa029#0 = #albw0042#2;
                         |LEE 000#agifa029.=;
                         |SI FSalida = 0;
                              #albm0038#5 = #agifa029#1;
                         |FINSI;
                         |CIERRA #agifa029;

/*
                         #albm0038#6 = #albw0042#3;
                         #albm0038#9 = #albw0042#5;
                         #albm0038#10 = #albm0046#3;
                         |ABRE #agifa112;
                         |DDEFECTO #agifa112;
                         #agifa112#0 = #albm0038#10;
                         |LEE 000#agifa112.=;
                         #albm0038#11 = #agifa112#1;
                         |CIERRA #agifa112;
                         #albm0038#14 = #albm0046#38;
                         #albm0038#15 = #albm0038#9 * #albm0038#14;
*/

                         |GRABA 020#albm0038.a;
                         |LIBERA #albm0038;
                         |CIERRA #albm0038;
                    |SINO;
                         |ERROR;
                         |ACABA;
                    |FINSI;
               |FINSI;
               aTexto = "Stock Partida: " + nExistencias;
               |PINTA 0627, aTexto;
          |FINSI;
          |CIERRA #albm0046;
     |SINO;
          aMensaje = "0000Introduzca Partida";
          |MENAV aMensaje;
          |ERROR;
     |FINSI;
|FPRC;

|PROCESO albw0042_hay;
     nSwHay = 1;
     |ERROR10;
|FPRC;

|DEFBUCLE albw0042_hay;
 #albw0042#1;
 ;
 #albw0019#6, #albw0019#0, 00001, "               ";
 #albw0019#6, #albw0019#0, 99999, "zzzzzzzzzzzzzzz";
 ;
 NULL, albw0042_hay;
|FIN;

|PROCESO HayDatos;
     |BUCLE albw0042_hay;
|FPRC;

|PROCESO Control2; |TIPO 11;
     nSwSalte = 0;
     |SI FSalida ! 7; |Y FSalida ! 1;
          |SI FSalida = 17;
               |C_M #albw0042#2, 1, "S";
               |ENCAMPO #2#albw0042;
               |C_M #albw0042#2, 1, "N";
          |FINSI;
          |HAZ CtrlArtPartida;
     |SINO;
          nSwHay = 0;
          |HAZ HayDatos;
          |SI nSwHay = 0;
               nSwSalte = 1;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO Tipo7C3w0042; |TIPO 7;
     aTexto = "                      ";
     |PINTA 0627, aTexto;
|FPRC;
