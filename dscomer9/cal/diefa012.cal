|FICHEROS;
     diefa012 #0;
     dsm00226 #226;
     dsm00237 #237;
     dsm00226@ #1;
|FIN;

|VARIABLES;
     aDef = "";
     nLinea = 0;
|FIN;

|PROCESO Tipo00; |TIPO 0;
     |ABRE #226;
     #226#0 = #0#0;
     |LEE 000#226=;
     |SI FSalida ! 0;
          |MENAV "0000No existe";
          |ERROR;
     |FINSI;
     |CIERRA #226;
|FPRC;

|PROCESO Tipo0; |TIPO 0;
     |ABRE #226;
     #226#0 = #0#1;
     |LEE 000#226=;
     |SI FSalida = 0;
          |MENAV "0000Ya existe";
          |ERROR;
     |FINSI;
     |CIERRA #226;
|FPRC;

|PROCESO dsm00237;
     |SI #237#2 ] #0#4; |Y #237#2 [ #0#5;
          #1#0 = #0#1;
          #1#1 = 9999;
          |LEE 000#1];
          |SI FSalida = 0;
               |LEE 000#1a;
          |SINO;
               |LEE 000#1u;
          |FINSI;
          |SI FSalida = 0; |Y #1#0 = #0#1;
               nLinea = #1#1 + 1;
          |SINO;
               nLinea = 1;
          |FINSI;
          |DDEFECTO #1;
          #1#0 = #0#1;
          #1#1 = nLinea;
          #1#2 = #237#2;
          #1#3 = #237#3;
          #1#4 = #237#4;
          #1#5 = #237#5;
          #1#6 = #237#6;
          #1#7 = #237#7;
          |GRABA 020#1n;
     |FINSI;
|FPRC;

|PROCESO Tipo3; |TIPO 3;
     |DDEF aDef;
     aDef = aDef + "dsm00237";
     |CARGA_DEF aDef, dsm00226@;
     |SI FSalida = 0;
          |ABRE #226;
          #226#0 = #0#0;
          |LEE  020#226=;
          |SI FSalida = 0;
               |ABRE #1;
               |BUCLELIN 2 dsm00237 #226;
               |CIERRA #1;
               #226#0 = #0#1
               #226#2 = #0#2;
               #226#3 = #0#3;
               |GRABA 000#226n;
               |SI FSalida ! 0;
                    #226#0 = #0#1;
                    |LEE 101#226=;
                    #226#2 = #0#2;
                    #226#3 = #0#3;
                    |GRABA 000#226a;
               |FINSI;
          |FINSI;
          |CIERRA #226;
          |DESCARGA_DEF #dsm00226@;
     |FINSI;
|FPRC;

|PROCESO Tipo7; |TIPO 7;
     |ABRE #226;
     |LEE 000#226u;
     |SI FSalida = 0;
          #0#1 = #226#0 + 1;
     |SINO;
          #0#1 = 1;
     |FINSI;
     |PINTA #0#1;
     |CIERRA #226;
|FPRC;
