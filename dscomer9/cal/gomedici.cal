|FICHEROS;
     gomedici #0;
     gopre003 #1;
     gomedive #2;
     goparame #3;
     gopre009 #9,MANTE;

     gopre003@ #10;
     gomedici@ #11;
|FIN;
-------------------------------------------------------------------------------
|VARIABLES;
     &nDeci_Meda    = 0;
     &nDeci_Medi    = 0;
     &Tempo         = "";
     &enSwCopia     = 0;
     &eaSer         = "";
     &eaCapi        = "";
     &enNum         = 0;
     &eaRefe        = "";
     &enPresu       = 0;
     nLin           = 0;
     i              = 0;
     nHay           = 0;
     aDef           = "";
     aPath          = "";
     cDesc          = "";
     cEstado        = "";
     cCampo         = "";
|FIN;
-------------------------------------------------------------------------------
|PROCESO CopiaMedi; |TIPO 11;
     |SI FSalida = 14;
          |PTEC 807;
          eaCapi = #9#0;
          eaRefe = #9#2;
          eaSer = #9#4;
          enNum = #9#5;
          enPresu = #9#5;
          enSwCopia = 1;
     |FINSI;
|FPRC;


|PROCESO gopre003Ref;
     |SI #10#2 = #0#2; |Y #10#4 = #0#3;
          |ACABA;
     |FINSI;

     #11#0 = #10#0;
     #11#1 = #10#1;
     #11#2 = #10#2;
     #11#3 = 0;
     |LEE 000#11];
     |SI FSalida = 0; |Y #11#0 = #10#0; |Y #11#1 = #10#1; |Y #11#2 = #10#2;
          #9#0 = #10#2; ||Capi
          #9#1 = #10#3; ||Lin
          #9#2 = #10#4; ||Refe
          #9#3 = #10#5; ||Des
          #9#4 = #10#0; ||Ser
          #9#5 = #10#1; ||N§
          |GRABA 020#9n;
          nHay = 1;
     |FINSI;
|FPRC;

|DEFBUCLE gopre003Ref;
     #10#1004;
     ;
     #0#0, #0#1, "                    ", 001;
     #0#0, #0#1, "zzzzzzzzzzzzzzzzzzzz", 999;
     ;
     NULL, gopre003Ref;
|FIN;

|PROCESO Min9;
     #9#0 = "                    ";
     #9#1 = 001;
|FPRC;

|PROCESO Max9;
     #9#0 = "zzzzzzzzzzzzzzzzzzzz";
     #9#1 = 999;
|FPRC;

|PROCESO TeclaCopia; |TIPO 11;
     |SI FSalida = 14;
          |HAZ CreaTempo; |NOME_DAT #9 Tempo; |DELINDEX #9;
          |DDEF aDef;
          aPath = aDef + "gopre003";
          |CARGA_DEF aPath, gopre003@;
          |SI FSalida = 0;
               aPath = aDef + "gomedici";
               |CARGA_DEF aPath, gomedici@;
               |SI FSalida = 0;
                    nHay = 0;
                    |ABRE #11;
                    |ABRE #9;
                    |BUCLE gopre003Ref;
                    |CIERRA #9;
                    |CIERRA #11;
                    |SI nHay ! 0;
                         |PUSHV 0501 2380;
                         |ENTLINEAL #1#9, 2, 4, 22, 1, Min9, Max9;
                         |POPV;
                    |FINSI;
                    |DESCARGA_DEF #gomedici@;
               |FINSI;
               |DESCARGA_DEF #gopre003@;
          |FINSI;
          |DELINDEX #9; |HAZ BoraTempo;
          |SI enSwCopia = 1;
               |PTEC 807;
               |PTEC 807;
          |SINO;
               |ERROR;
          |FINSI;
     |FINSI;
|FPRC;
-------------------------------------------------------------------------------
|PROCESO Entra; |TIPO 7;
     |ABRE #3;
     #3#0 = "A";
     |LEE 000#3=;
     |SI FSalida = 0;
          |SI #3#41 = "S";
               |ABRE #2;
               #2#0 = #1#6;
               |LEE 000#2=;
               |SI FSalida = 0;
                    |SI #2#3 = "S";
                         |C_M #0#6, 1, "S";
                    |SINO;
                         |C_M #0#6, 1, "N";
                    |FINSI;
                    |SI #2#4 = "S";
                         |C_M #0#7, 1, "S";
                    |SINO;
                         |C_M #0#7, 1, "N";
                    |FINSI;
                    |SI #2#5 = "S";
                         |C_M #0#8, 1, "S";
                    |SINO;
                         |C_M #0#8, 1, "N";
                    |FINSI;
               |FINSI;
               |CIERRA #2;
          |SINO;
               |C_M #0#6, 1, "S";|C_M #0#7, 1, "S";|C_M #0#8, 1, "S";
          |FINSI;
     |FINSI;
     |CIERRA #3;
     |ATRI I;
     cDesc = "Total " + #1#6 + " ";
     cDesc = cDesc + #1#5;
     |QBF cDesc;
     cDesc = cDesc + ":";
     cDesc = cDesc % 150;
     |PINTA 2204, cDesc;
     |PINTA 2270, #1#7;
     |ATRI 0;
|FPRC;
-------------------------------------------------------------------------------
|PROCESO Cambios; |TIPO 2;
     #1#7 = #1#7 +. #0#9;
|FPRC;
-------------------------------------------------------------------------------
|PROCESO CalLinMed; |TIPO 0;

     ||Laro,Ancho y Alto.

     |SI #0#6 = 0; |Y #0#7 = 0;|Y #0#8 = 0;
          #0#9 = #0#5;
     |FINSI;

     |SI #0#6 ! 0; |Y #0#7 ! 0;|Y #0#8 ! 0;
          #0#9 = #0#5 * #0#6 * #0#7 * #0#8;
     |FINSI;

     ||Largo y Ancho;

     |SI #0#6 ! 0; |Y #0#7 ! 0;|Y #0#8 = 0;
          #0#9 = #0#5 * #0#6 * #0#7;
     |FINSI;

     ||Largo y Alto.

     |SI #0#6 ! 0; |Y #0#7 = 0;|Y #0#8 ! 0;
          #0#9 = #0#5 * #0#6 * #0#8;
     |FINSI;

     ||Largo;

     |SI #0#6 ! 0; |Y #0#7 = 0;|Y #0#8 = 0;
          #0#9 = #0#5 * #0#6;
     |FINSI;

     ||Ancho y Alto.

     |SI #0#6 = 0; |Y #0#7 ! 0;|Y #0#8 ! 0;
          #0#9 = #0#5 * #0#7 * #0#8;
     |FINSI;

     ||Ancho.

     |SI #0#6 = 0; |Y #0#7 ! 0;|Y #0#8 = 0;
          #0#9 = #0#5 * #0#7;
     |FINSI;

     ||Alto.

     |SI #0#6 = 0; |Y #0#7 = 0;|Y #0#8 ! 0;
          #0#9 = #0#5 * #0#8;
     |FINSI;

     |PINTA #0#9;
|FPRC;
-------------------------------------------------------------------------------
|PROCESO TerProMed; |TIPO 3;
     |SI #0#9 = 0;
          |MENAV "0000EXISTE ALGUN OPERANDO SIN VALOR O ESTA A 0";
     |FINSI;
|FPRC;
-------------------------------------------------------------------------------
|PROCESO Mira0; |TIPO 0;
     |SI #3#41 = "S";
          |C_M #0Campo, 0, cCampo;
          |SI #0Campo = 0; |Y cCampo = "S";
               |MENAV "0000TIENE QUE ASIGNAR LA MEDIDA EN ESTE CAMPO";
               |ERROR10;
          |FINSI;
     |FINSI;
|FPRC;
-------------------------------------------------------------------------------
