|FICHEROS;
   godiarec #0;

   godiacaj #10;
   godiacal #11;
   godiatmp #12;
   godiatm5 #13;
|FIN;

|PROCESO Tipo12; |TIPO 12;
|FPRC;

|PROCESO RecalcLin;
   #godiatmp#0 = #godiacal#19;
   #godiatmp#1 = #godiacal#20;
   #godiatmp#2 = #godiacal#21;
   |LEE 000#godiatmp.=;
   |SI FSalida ! 0;
      |DDEFECTO #godiatmp;
      #godiatmp#0 = #godiacal#19;
      #godiatmp#1 = #godiacal#20;
      #godiatmp#2 = #godiacal#21;
      #godiatmp#3 = #godiacal#0;
      #godiatmp#4 = #godiacal#15;
      #godiatmp#5 = #godiacal#1;
      #godiatmp#6 = #godiacal#2;
      |GRABA 020#godiatmp.n;
   |FINSI;
|FPRC;

|DEFBUCLE RecalcLin;
#godiacal#1;
;
#godiacaj#0, #godiacaj#2, #godiacaj#1, 00001;
#godiacaj#0, #godiacaj#2, #godiacaj#1, 99999;
;
NULL,RecalcLin;
|FIN;

|PROCESO Recalcula;
   |SI #godiacaj#35 = "N"; |ACABA; |FINSI;

   #godiatm5#0 = #godiacaj#32;
   #godiatm5#1 = #godiacaj#33;
   |LEE 000#godiatm5.=;
   |SI FSalida ! 0;
      |DDEFECTO #godiatm5;
      #godiatm5#0 = #godiacaj#32;
      #godiatm5#1 = #godiacaj#33;
      #godiatm5#2 = #godiacaj#0;
      #godiatm5#3 = #godiacaj#2;
      #godiatm5#4 = #godiacaj#1;
      |GRABA 020#godiatm5.n;
   |FINSI;

   |BUCLE RecalcLin;
|FPRC;

|DEFBUCLE Recalcula;
#godiacaj#1;
;
INICIO;
FINAL;
;
NULL, Recalcula;
|FIN;

|PROGRAMA;
   |SI PARAMETRO = "";
      |CLS;
      |CABEZA " Recuperacion datos vinculos control de caja/albaranes";
      |PINPA #0#0; |PINDA #0#0;
      |ENDATOS #1#godiarec;
      |SI FSalida = 0; |Y #0#0 = "S";
         |DELINDEX #godiatm5; |ABRE #godiatm5;
         |DELINDEX #godiatmp; |ABRE #godiatmp;
         |BUCLE Recalcula;
         |CIERRA #godiatmp; |CIERRA #godiatm5;
      |FINSI;
   |SINO;
      |DELINDEX #godiatm5; |ABRE #godiatm5;
      |DELINDEX #godiatmp; |ABRE #godiatmp;
      |BUCLE Recalcula;
      |CIERRA #godiatmp; |CIERRA #godiatm5;
   |FINSI;
|FPRO;
