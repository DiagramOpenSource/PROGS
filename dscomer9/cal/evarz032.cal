|FICHEROS;
     evarz032 #0;
     tmp00000 #1;   ||Tmp
     evarm004 #4;
     evarm005 #5;
     evarm021 #21;
     agifa104 #104;
     agifa073 #73;
     referen@;
|FIN;

|VARIABLES;
     aServi = "N";
     aAlfa = "";
     &eaTempo = "";
|FIN;

|PROCESO evarm021;
     |BORRA 020#21a;
|FPRC;

|DEFBUCLE evarm021;
     #21#1;
     ;
     #73#28, #73#0, #73#1, "            ";
     #73#28, #73#0, #73#1, "zzzzzzzzzzzz";
     ;
     NULL, evarm021;
|FIN;

|PROCESO evarm005;
/*
     #5#1 = #0#4;
     |GRABA 020#5a;
*/
     |BORRA 020#5a;
|FPRC;

|DEFBUCLE evarm005;
     #5#2;
     ;
     #73#28, #73#0, #73#1, "            ";
     #73#28, #73#0, #73#1, "zzzzzzzzzzzz";
     be;
     NULL, evarm005;
|FIN;

|PROCESO CambiaLin;
     |BORRA 020#73a;

     #4#30 = #73#28;
     #4#31 = #73#0;
     #4#32 = #73#1;
     |LEE 101#4=;
     |SI FSalida = 0;
          |BORRA 020#4a;
          #4#30 = #0#4;
          |GRABA 000#4n;
          |SI FSalida ! 0;
               |BORRA 020#4c;
               |GRABA 020#4n;
          |FINSI;
          |BUCLE evarm005;
          |BUCLE evarm021;

          #73#28 = #0#4;
          |HAZ Etiquetas;
     |FINSI;

     #73#28 = #0#4;
     |GRABA 020#73n;
|FPRC;

|PROCESO Tmp;
     #104#25 = #0#4;
     #104#0 = #1#1;
     |LEE 000#104=;
     |SI FSalida = 0;
          aAlfa = ("000000" + #104#0) % -106;
          aAlfa = "0000Pedido existente:" + #104#25 + "/" + aAlfa;
          |MENAV aAlfa;
     |SINO;
          #104#25 = #1#0;
          #104#0 = #1#1;
          |LEE 121#104=;
          |SI FSalida = 0;
               |BUCLELIN 0 CambiaLin #104;
               |BORRA 020#104a;
               #104#25 = #0#4;
               |GRABA 020#104n;
               |LIBERA #104;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE Tmp;
     #1#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Tmp;
|FIN;

|PROCESO FinCab;
     |SI aServi = "N";
          #1#0 = #104#25;
          #1#1 = #104#0;
          |GRABA 020#1n;
     |SINO;
          aAlfa = ("000000" + #104#0) % -106;
          aAlfa = "0000Pedido con unidades servidas:" + #104#25 + "/" + aAlfa;
          |MENAV aAlfa;
     |FINSI;
|FPRC;

|PROCESO Lineas;
     |SI #73#43 ! 0; |O #73#48 ! 0;
          aServi = "S";
     |FINSI;
|FPRC;

|PROCESO Cabecera;
     aServi = "N";
|FPRC;

|DEFBUCLE agifa104;
     #104#1;
     ;
     #0#0, #0#2;
     #0#1, #0#3;
     be;
     NULL, Cabecera, Lineas, FinCab;
|FIN;

|PROCESO T3; |TIPO 3;
     |HAZ CreaTempo;
     |NOME_DAT #1 eaTempo; |DELINDEX #1;

     |ABRE #1;
     |BUCLE agifa104;
     |CIERRA #1;

     |ABRE #104;
     |ABRE #4;
     |BUCLE Tmp;
     |CIERRA #4;
     |CIERRA #104;

     |DELINDEX #1;
|FPRC;
