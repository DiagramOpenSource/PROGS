|FICHEROS;
     tagy0003 #0;
     agifa010 #10;
     agifa019 #19;
     agifa071 #71;
     agifa084 #84;
     agifa069 #69;
     agifa060 #60;
     tagw0022 #22;  ||TMP
     tagw0023 #23;  ||TMP
     tagw0030 #30;  ||TMP
     agifa024 #24;
     agifa025 #25;
     agif0041 #41;
     tagm0076 #76;
     tagm0077 #77;
     tagm0096 #96;
     tagm0097 #97;
     agifm001 #99;
     agifa120 #120;
     tagw0030@;
|FIN;

|VARIABLES;
     nOk = 0;
     &eaNomRepre = "";
     &Tempo = "";
     aTmp22 = "";
     aTmp23 = "";
     aTmp30 = "";
     nCam = 0;
     aInforme = "";
     aRepre = "";
     aFecha = "";
     nNume = 0;
     fFecha = @;
     aDAno = "";
     aHAno = "";
     aAlfa = "";
     nAlfa = 0;
     nHay = 0;
     nHayEmp = 0;
     aCli = "";
     aRep = "";
     nImpo = 0;
     aFam = "";
     i = 0;
     nCampo = 0;
     nMensa1 = 0;
     nMensa21 = 0;
     nMensa2 = 0;
     nEsFam = 0;
     nTotAct = 0;
     nTotAnt = 0;
     aFamilia = "";
|FIN;

|PROCESO Tmp;
     #23#0 = #22#0;
     |LEE 020#23=;
     |SI #23#1 < #0#4; |O #23#1 > #0#5;
          |ACABA;
     |FINSI;

     |SI aRepre ! ""; |Y aRepre ! #22#0; |Y #0#39 = "D";
          |PIEINF;
     |FINSI;
     aRepre = #22#0;

     |DDEFECTO #24;
     #24#0 = #22#1;
     |LEE 000#24=;

     |SI #0#28 = "3";
          |DDEFECTO #99;
          #99#0 = #22#0;
          |LEE 000#99=;
          |SI FSalida = 0;
               eaNomRepre = #99#1;
          |FINSI;
     |SINO;
          |DDEFECTO #25;
          #25#0 = #22#0;
          |LEE 000#25=;
          |SI FSalida = 0;
               eaNomRepre = #25#1;
          |FINSI;
     |FINSI;

     nHay = 1;
     |PRINT;
|FPRC;

|DEFBUCLE Tmp;
     #22#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Tmp;
|FIN;

|PROCESO TmpCrystal;
     |SI #0#58 = "F";
          |DDEFECTO #60;
          #60#0 = #30#0;
          |LEE 000#60=;
     |SINO;
          |DDEFECTO #120;
          #120#0 = #30#0;
          |LEE 000#120=;
     |FINSI;

     |DDEFECTO #25;
     #25#0 = #30#1;
     |LEE 000#25=;

     nHay = 1;
     |PRINT;
|FPRC;

|DEFBUCLE TmpCrystal;
     #30#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, TmpCrystal;
|FIN;

|PROCESO Graba;
     |SI #0#28 = "2";
          #24#0= aCli;
          |LEE 000#24=;
          |SI FSalida = 0;
               aRep = #24#25;
               |SI aRep < #0#2; |O aRep > #0#3;
                    |ACABA;
               |FINSI;
          |FINSI;
     |FINSI;

     |SI #0#28 = "3";
          #24#0= aCli;
          |LEE 000#24=;
          |SI FSalida = 0;
               aRep = #24#3;
               |SI aRep < #0#2; |O aRep > #0#3;
                    |ACABA;
               |FINSI;
          |FINSI;
     |FINSI;


     |SI #0#39 = "R"; aCli = ""; |FINSI;

     |SI #0#58 = "F";
          |HAZ Familia;
     |SINO;
          |HAZ Subfamilia;
     |FINSI;
|FPRC;

|PROCESO Familia;
     |SI #0#41 = 0;
          |DDEFECTO #22;
          #22#0 = aRep;
          #22#1 = aCli;
          |LEE 101#22=;
          |SI FSalida ! 0; |GRABA 020#22b; |FINSI;

          aAlfa = aFecha % -104;
          |SI aAlfa ! #0#27;
               #22#13 = #22#13 + nImpo;
          |SINO;
               nEsFam = 0;
               |SI aFam = #0#6; #22#2 = #22#2 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#7; #22#3 = #22#3 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#8; #22#4 = #22#4 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#9; #22#5 = #22#5 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#10; #22#6 = #22#6 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#11; #22#7 = #22#7 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#12; #22#8 = #22#8 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#13; #22#9 = #22#9 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#14; #22#10 = #22#10 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#15; #22#11 = #22#11 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#29; #22#15 = #22#15 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#30; #22#16 = #22#16 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#31; #22#17 = #22#17 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#32; #22#18 = #22#18 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#33; #22#19 = #22#19 + nImpo; nEsFam = 1;|FINSI;
               |SI nEsFam = 0; ||No es ninguna
                    #22#20 = #22#20 + nImpo;
               |FINSI;
               #22#12 = #22#2 + #22#3 + #22#4 + #22#5 + #22#6 + #22#7
               #22#12 = #22#12 + #22#8 + #22#9 + #22#10 + #22#11 + #22#15
               #22#12 = #22#12 + #22#16 + #22#17 + #22#18 + #22#19 + #22#20;

               #23#0 = aRep;
               |LEE 101#23=;
               |SI FSalida ! 0; |GRABA 020#23b; |FINSI;
               #23#1 = #23#1 + nImpo;
               |GRABA 020#23a;
               |LIBERA #23;
          |FINSI;

          #22#14 = #22#12 * 100 / #22#13;

          |GRABA 020#22a;
          |LIBERA #22;
     |SINO;
          #77#0 = #0#41;
          #77#1 = aFam;
          |LEE 000#77=;
          |SI FSalida ! 0; aFam = "ZZZ"; |FINSI;

          |DDEFECTO #30;
          #30#0 = aFam;
          #30#1 = aRep;
          |LEE 101#30=;
          |SI FSalida ! 0; |GRABA 020#30b; |FINSI;
          aAlfa = aFecha % -104;
          |SI aAlfa ! #0#27;
               #30#3 = #30#3 + nImpo;
          |SINO;
               #30#2 = #30#2 + nImpo;
          |FINSI;
          #30#4 = #30#2 * 100 / #30#3;
          |GRABA 020#30a;
          |LIBERA #30;
     |FINSI;
|FPRC;

|PROCESO Subfamilia;
     |SI #0#42 = 0;
          |DDEFECTO #22;
          #22#0 = aRep;
          #22#1 = aCli;
          |LEE 101#22=;
          |SI FSalida ! 0; |GRABA 020#22b; |FINSI;

          aAlfa = aFecha % -104;
          |SI aAlfa ! #0#27;
               #22#13 = #22#13 + nImpo;
          |SINO;
               nEsFam = 0;
               |SI aFam = #0#43; #22#2 = #22#2 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#44; #22#3 = #22#3 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#45; #22#4 = #22#4 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#46; #22#5 = #22#5 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#47; #22#6 = #22#6 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#48; #22#7 = #22#7 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#49; #22#8 = #22#8 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#50; #22#9 = #22#9 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#51; #22#10 = #22#10 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#52; #22#11 = #22#11 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#53; #22#15 = #22#15 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#54; #22#16 = #22#16 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#55; #22#17 = #22#17 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#56; #22#18 = #22#18 + nImpo; nEsFam = 1; |FINSI;
               |SI aFam = #0#57; #22#19 = #22#19 + nImpo; nEsFam = 1;|FINSI;
               |SI nEsFam = 0; ||No es ninguna
                    #22#20 = #22#20 + nImpo;
               |FINSI;
               #22#12 = #22#2 + #22#3 + #22#4 + #22#5 + #22#6 + #22#7
               #22#12 = #22#12 + #22#8 + #22#9 + #22#10 + #22#11 + #22#15
               #22#12 = #22#12 + #22#16 + #22#17 + #22#18 + #22#19 + #22#20;

               #23#0 = aRep;
               |LEE 101#23=;
               |SI FSalida ! 0; |GRABA 020#23b; |FINSI;
               #23#1 = #23#1 + nImpo;
               |GRABA 020#23a;
               |LIBERA #23;
          |FINSI;

          #22#14 = #22#12 * 100 / #22#13;

          |GRABA 020#22a;
          |LIBERA #22;
     |SINO;
          #97#0 = #0#42;
          #97#1 = aFam;
          |LEE 000#97=;
          |SI FSalida ! 0; aFam = "ZZZZZ"; |FINSI;

          |DDEFECTO #30;
          #30#0 = aFam;
          #30#1 = aRep;
          |LEE 101#30=;
          |SI FSalida ! 0; |GRABA 020#30b; |FINSI;
          aAlfa = aFecha % -104;
          |SI aAlfa ! #0#27;
               #30#3 = #30#3 + nImpo;
          |SINO;
               #30#2 = #30#2 + nImpo;
          |FINSI;
          #30#4 = #30#2 * 100 / #30#3;
          |GRABA 020#30a;
          |LIBERA #30;
     |FINSI;
|FPRC;

|PROCESO agifa069;
     #19#0 = #69#2;
     |LEE 000#19=;
     |SI #19#2 ! #69#13; |Y nMensa2 = 0; |Y #0#58 = "F";
          aAlfa = "0000Factura:" + #69#20 + "/" + #69#0 + "/" + #69#1 + " familia distinta al articulo";
          |MENAV aAlfa;
          |SI nMensa1 = 0;
               aAlfa = "2400NPulse NO para que no se muestren mas mensajes.";
               |CONFI aAlfa;
               |SI FSalida = -1;
                    ||Ha pulsado NO
                    nMensa2 = 1;
               |FINSI;
               nMensa1 = 1;
          |FINSI;
     |FINSI;

     aFecha = #84#1;
     nImpo = #69#9;
     |SI #0#58 = "F";
          aFam = #69#13;
     |SINO;
          aFam = #19#3;
     |FINSI;
     aCli = #84#3;
     aRep = #84#6;
     |HAZ Graba;
|FPRC;

|DEFBUCLE agifa084;
     #84#3;
     6;
     #0#0, aDAno, "     ", 000001, #0#2;
     #0#1, aHAno, "zzzzz", 999999, #0#3;
     ;
     NULL, NULL, agifa069;
|FIN;

|DEFBUCLE agifa084_23;
     #84#3;
     ;
     #0#0, aDAno, "     ", 000001;
     #0#1, aHAno, "zzzzz", 999999;
     ;
     NULL, NULL, agifa069;
|FIN;


|PROCESO agifa071;
     #19#0 = #71#2;
     |LEE 000#19=;
     |SI #19#2 ! #71#13; |Y nMensa2 = 0; |Y #0#58 = "F";
          aAlfa = "0000Albaran:"+ #71#29 + "/" + #71#0 + "/" + #71#1 + " familia distinta al articulo";
          |MENAV aAlfa;
          |SI nMensa21 = 0;
               aAlfa = "2400NPulse NO para que no se muestren mas mensajes.";
               |CONFI aAlfa;
               |SI FSalida = -1;
                    ||Ha pulsado NO
                    nMensa2 = 1;
               |FINSI;
               nMensa21 = 1;
          |FINSI;
     |FINSI;

     aFecha = #10#1;
     |SI #10#43 = "S";
          nImpo = -#71#9;
     |SINO;
          nImpo = #71#9;
     |FINSI;
     |SI #0#58 = "F";
          aFam = #71#13;
     |SINO;
          aFam = #19#3;
     |FINSI;
     aCli = #10#3;
     aRep = #10#6;
     |HAZ Graba;
|FPRC;

|DEFBUCLE agifa010;
     #10#3;
     6;
     #0#0, aDAno, "     ", 000001, #0#2;
     #0#1, aHAno, "zzzzz", 999999, #0#3;
     ;
     NULL, NULL, agifa071;
|FIN;

|DEFBUCLE agifa010_23;
     #10#3;
     ;
     #0#0, aDAno, "     ", 000001;
     #0#1, aHAno, "zzzzz", 999999;
     ;
     NULL, NULL, agifa071;
|FIN;


|PROCESO HayEmpresa;
     |DBASE aAlfa;
     aAlfa = aAlfa + "fich/";
     |PATH_DAT #41 aAlfa;
     |ABRE #41;
     #41#0 = #0#26;
     |LEE 000#41=;
     |SI FSalida = 0;
          nHayEmp = 1;
     |FINSI;
     |CIERRA #41;
|FPRC;


|PROCESO DefFec; |TIPO 7;
     fFecha = ~;
     aAlfa = fFecha % -104;
     #0#27 = aAlfa;
     |PINTA #0#27;
|FPRC;


|PROCESO GraTotaRep;
     |SI aFamilia ! "";
          #tagw0030@#0 = aFamilia;
          #tagw0030@#1 = "ZZ";
          #tagw0030@#2 = nTotAct;
          #tagw0030@#3 = nTotAnt;
          #tagw0030@#4 = #tagw0030@#2 * 100 / #tagw0030@#3;
          |GRABA 020#tagw0030@.n;
     |FINSI;

     nTotAct = 0;
     nTotAnt = 0;
     aFamilia = #30#0;
|FPRC;

|PROCESO SumTotaRep;
     |SI aFamilia ! #30#0;
          |HAZ GraTotaRep;
     |FINSI;
     nTotAct = nTotAct + #30#2;
     nTotAnt = nTotAnt + #30#3;
|FPRC;

|DEFBUCLE SumTotaRep;
     #30#2;
     ;
     INICIO;
     FINAL;
     ;
     NULL, SumTotaRep;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     aDAno = "01.01." + (("0000" + #0#27) % -104);
     aHAno = "31.12." + (("0000" + #0#27) % -104);
     |SI #0#58 = "F";
          |ABRE #60;
          |PARA i = 6; |SI i [ 15; |HACIENDO i = i + 1;
               |DDEFECTO #60;
               #60#0 = #0i;
               |LEE 000#60=;
               nCampo = i - 6 + 16;
               #0nCampo = #60#1;
          |SIGUE;
          |PARA i = 29; |SI i [ 33; |HACIENDO i = i + 1;
               |DDEFECTO #60;
               #60#0 = #0i;
               |LEE 000#60=;
               nCampo = i + 5;
               #0nCampo = #60#1;
          |SIGUE;
          |CIERRA #60;
     |SINO;
          |ABRE #120;
          |PARA i = 43; |SI i [ 52; |HACIENDO i = i + 1;
               |DDEFECTO #120;
               #120#0 = #0i;
               |LEE 000#120=;
               nCampo = i - 43 + 16;
               #0nCampo = #120#1;
          |SIGUE;
          |PARA i = 53; |SI i [ 57; |HACIENDO i = i + 1;
               |DDEFECTO #120;
               #120#0 = #0i;
               |LEE 000#120=;
               nCampo = i - 53 + 34;
               #0nCampo = #120#1;
          |SIGUE;
          |CIERRA #120;
     |FINSI;


     |HAZ CreaTempo; aTmp22 = Tempo; |NOME_DAT #22 Tempo; |DELINDEX #22;
     |HAZ CreaTempo; aTmp23 = Tempo; |NOME_DAT #23 Tempo; |DELINDEX #23;
     |HAZ CreaTempo; aTmp30 = Tempo; |NOME_DAT #30 Tempo; |DELINDEX #30;

     |SI #0#41 = 0; |Y #0#58 = "F";
          |SI #0#39 = "D";
               aInforme = "tagy0003";
          |SINO;
               aInforme = "tagyr003";
          |FINSI;
          |IMPRE 0;
          nOk = 1;
     |FINSI;

     |SI #0#42 = 0; |Y #0#58 = "S";
          |SI #0#39 = "D";
               aInforme = "tagy0003";
          |SINO;
               aInforme = "tagyr003";
          |FINSI;
          |IMPRE 0;
          nOk = 1;
     |FINSI;

     |SI nOk = 0;
          aInforme = "tacy0003";
          Impresora = "CrystalReport";
          |IMPRE -1;
     |FINSI;

     |SI FSalida = 0;
          |INFOR aInforme;
          |SI FSalida ! 0;
               aInforme = "0000No existe informe '" + aInforme + "'";
               |MENAV aInforme;
          |SINO;
               |ABRE #23;
               |ABRE #22;
               |ABRE #30;
               |ABRE #77;
               |ABRE #97;
               |ABRE #19;
               |ABRE #24;
               |SI #0#28 = 1;
                    |BUCLE agifa010;
                    |BUCLE agifa084;
               |SINO;
                    |BUCLE agifa010_23;
                    |BUCLE agifa084_23;
               |FINSI;
               |CIERRA #19;
               |CIERRA #24;

               nNume = #0#27 - 1;
               aDAno = "01.01." + (("0000" + nNume) % -104);
               aHAno = "31.12." + (("0000" + nNume) % -104);
               |HAZ HayEmpresa;
               |SI nHayEmp = 0;
                    |ABRE #19;
                    |ABRE #24;
                    |SI #0#28 = 1;
                         |BUCLE agifa010;
                         |BUCLE agifa084;
                    |SINO;
                         |BUCLE agifa010_23;
                         |BUCLE agifa084_23;
                    |FINSI;
                    |CIERRA #24;
                    |CIERRA #19;
               |SINO;
                    |DBASE aAlfa;
                    aAlfa = aAlfa + "fich/" + (("00000" + #0#26) % -105) + "/";
                    |PATH_DAT #10 aAlfa;
                    |PATH_DAT #71 aAlfa;
                    |PATH_DAT #84 aAlfa;
                    |PATH_DAT #69 aAlfa;
                    |PATH_DAT #19 aAlfa;
                    |PATH_DAT #24 aAlfa;
                    nNume = #0#27 - 1;
                    aDAno = "01.01." + (("0000" + nNume) % -104);
                    aHAno = "31.12." + (("0000" + nNume) % -104);
                    |ABRE #19;
                    |ABRE #24;
                    |SI #0#28 = 1;
                         |BUCLE agifa010;
                         |BUCLE agifa084;
                    |SINO;
                         |BUCLE agifa010_23;
                         |BUCLE agifa084_23;
                    |FINSI;
                    |CIERRA #24;
                    |CIERRA #19;
               |FINSI;
               |CIERRA #77;
               |CIERRA #97;
               |CIERRA #22;
               |CIERRA #30;

               |ABRE #24;
               |ABRE #25;
               |ABRE #99;
               |ABRE #60;
               |ABRE #77;
               |ABRE #97;
               |SI nOk = 1;
                    |BUCLE Tmp;
               |SINO;
                    |DDEF aAlfa;
                    aAlfa = aAlfa + "tagw0030";
                    |CARGA_DEF aAlfa, tagw0030@;
                    |SI FSalida = 0;
                         |NOME_DAT #tagw0030@#aTmp30#;
                         |ABRE #tagw0030@;
                         |BUCLE SumTotaRep;
                         |HAZ GraTotaRep;
                         |CIERRA #tagw0030@;
                         |DESCARGA_DEF #tagw0030@;
                    |FINSI;
                    |BUCLE TmpCrystal;
               |FINSI;
               |CIERRA #97;
               |CIERRA #77;
               |CIERRA #60;
               |CIERRA #99;
               |CIERRA #25;
               |CIERRA #24;
               |CIERRA #23;
               |SI nHay ! 0;
                    |PIEINF;
               |FINSI;
               |FININF;
          |FINSI;
          |FINIMP;
     |FINSI;
     Tempo = aTmp22; |HAZ BoraTempo; |DELINDEX #22;
     Tempo = aTmp23; |HAZ BoraTempo; |DELINDEX #23;
     Tempo = aTmp30; |HAZ BoraTempo; |DELINDEX #30;
|FPRC;

|PROCESO GrupoFam; |TIPO 0;
     |SI #0#41 = 0;
          |PARA i = 6; |SI i [ 15; |HACIENDO i = i + 1;
               |C_M #0i, 1, "S";
          |SIGUE;
          |PARA i = 29; |SI i [ 33; |HACIENDO i = i + 1;
               |C_M #0i, 1, "S";
          |SIGUE;
     |FINSI;
     |SI #0#41 ! 0; |O #0#58 = "S";
          |PARA i = 6; |SI i [ 15; |HACIENDO i = i + 1;
               |C_M #0i, 1, "N";
               #0i = "..."; |PINTA #0i;
          |SIGUE;
          |PARA i = 29; |SI i [ 33; |HACIENDO i = i + 1;
               |C_M #0i, 1, "N";
               #0i = "..."; |PINTA #0i;
          |SIGUE;
          |SI #0#58 = "F";
               |ABRE #76;
               #76#0 = #0#41;
               |LEE 000#76=;
               |SI FSalida ! 0;
                    |MENAV "0000No existe grupo familia...";
                    |ERROR;
               |FINSI;
               |CIERRA #76;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO GrupoSub; |TIPO 0;
     |SI #0#42 = 0;
          |PARA i = 43; |SI i [ 57; |HACIENDO i = i + 1;
               |C_M #0i, 1, "S";
          |SIGUE;
     |FINSI;
     |SI #0#42 ! 0; |O #0#58 = "F";
          |PARA i = 43; |SI i [ 57; |HACIENDO i = i + 1;
               |C_M #0i, 1, "N";
               #0i = "....."; |PINTA #0i;
          |SIGUE;
          |SI #0#58 = "S";
               |ABRE #96;
               #96#0 = #0#42;
               |LEE 000#96=;
               |SI FSalida ! 0;
                    |MENAV "0000No existe grupo subfamilia...";
                    |ERROR;
               |FINSI;
               |CIERRA #96;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO FamSub; |TIPO 0;
     |SI #0#58 = "F";
          |C_M #0#41, 1, "S";
          |PARA i = 6; |SI i [ 15; |HACIENDO i = i + 1;
               |C_M #0i, 1, "S";
          |SIGUE;
          |PARA i = 29; |SI i [ 33; |HACIENDO i = i + 1;
               |C_M #0i, 1, "S";
          |SIGUE;

          |C_M #0#42, 1, "N";
          |PARA i = 43; |SI i [ 57; |HACIENDO i = i + 1;
               |C_M #0i, 1, "N";
          |SIGUE;
     |SINO;
          |C_M #0#41, 1, "N";
          |PARA i = 6; |SI i [ 15; |HACIENDO i = i + 1;
               |C_M #0i, 1, "N";
          |SIGUE;
          |PARA i = 29; |SI i [ 33; |HACIENDO i = i + 1;
               |C_M #0i, 1, "N";
          |SIGUE;

          |C_M #0#42, 1, "S";
          |PARA i = 43; |SI i [ 57; |HACIENDO i = i + 1;
               |C_M #0i, 1, "S";
          |SIGUE;
     |FINSI;
|FPRC;

|PROGRAMA;
     |ABRE #0;
     |LEE 101#0p;
     |SI FSalida ! 0; |GRABA 020#0b; |FINSI;
     |CLS;
     |PINPA #0#0;
     |PINDA #0#0;
     |ENDATOS #1#0;
     |SI FSalida = 0;
          |GRABA 020#0a;
     |FINSI;
     |CIERRA #0;
|FPRO;
