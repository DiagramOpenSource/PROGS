|FICHEROS;
     aparz010 #0;
     agifa079 #79;  || Cab Fac
     agifa072 #72;  || Lin Fac
     agifa077 #77;  || Cab Alb
|FIN;

|VARIABLES;
     &enTipo = 0;
|FIN;

|PROCESO Albaranes;
     |SI #77#38 = "S";
          #79#66 = #77#51;
          #79#0 = #77#39;
          |LEE 000#79=;
          |SI FSalida ! 0;
               enTipo = 1; |PRINT;
          |SINO;
               |SI #77#10 ! #79#45;
                    enTipo = 2; |PRINT;
               |FINSI;
          |FINSI;
     |SINO;
          |SI #77#51 ! "     "; |O #77#39 ! 0;
               enTipo = 3; |PRINT;
          |FINSI;
          |SI #77#10 = "S";
               enTipo = 4; |PRINT;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE Albaranes;
     #77#1;
     1;
     #0#0, 000001, #0#2;
     #0#1, 999999, #0#3;
     ;
     NULL, Albaranes;
|FIN;

|PROCESO Facturas;
     #77#50 = #72#17;
     #77#0 = #72#2;
     |LEE 000#77=;
     |SI FSalida ! 0;
          enTipo = 5; |PRINT;
     |SINO;
          |SI #77#51 ! #79#66; |O #77#39 ! #79#0;
               enTipo = 6; |PRINT;
          |FINSI;
          |SI #77#10 ! #79#45;
               enTipo = 7; |PRINT;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE Facturas;
     #79#1;
     1;
     #0#0, 000001, #0#2;
     #0#1, 999999, #0#3;
     ;
     NULL, NULL, Facturas;
|FIN;

|PROCESO T3; |TIPO 3;
     |IMPRE 0;
     |SI FSalida = 0;
          |INFOR "aparz010";
          |SI FSalida = 0;
               |ABRE #77;
               |BUCLE Facturas;
               |CIERRA #77;

               |ABRE #79;
               |BUCLE Albaranes;
               |CIERRA #79;
               |SI enTipo ! 0; |PIEINF; |FINSI;
               |FININF;
          |FINSI;
          |FINIMP;
     |FINSI;
|FPRC;
