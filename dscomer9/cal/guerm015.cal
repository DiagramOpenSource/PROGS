|FICHEROS;
     guerm015 #0; || Este
     guerm014 #1; || Cabecera
     guerm005 #5;
     agifa023 #23;
     agifa024 #24;
     agifa019 #19;
     agifa017 #17;
     guerm011 #11;
     dsm00043 #43;
     dsm00044 #44;
|FIN;

|VARIABLES;
     &enCodigo = 0;
     &enForma  = 0;
     nForma    = 0;
     aResul    = "";
     nHandle   = 0;
     aFic      = "":
     nCuenta   = 0;
     nLinea    = 0;
     nBytes    = 0;
     nNum      = 0;
     &sumalin  = 0;
     &programa = 1;
     &EURODB   = 0;
     &estoyen   = "";
     nPrecio   = 0;
     aPuerto   = "";
     aParidad  = "";
     nVelocidad= 0;
     nBits     = 0;
     nStop     = 0;
     nSw       = 0;
     i         = 0;
     j         = 0;
     nPos      = 0;
     aLon      = "";
     aAlfa     = "";
     aHandle   = "";
     aValor    = "";
     aInicio   = "";
     aFin      = "";
     niDato    = 0;
     aDato     = "";
     nNumValores = 0;
   {200}pValor  = "";
     nVueltas  = 0;
     nNume = 0;
     nMaximo  = 0;
     nPara1 = 0;
     nSwEspa = 0;
     bruto     = 0;
     descu     = 0;
|FIN;
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|PROCESO Stock;
     |DDEFECTO #19;
     |ABRE #19;
     #19#0 = #0#2;
     |LEE 000#19=;
     |CIERRA #19;
     |DDEFECTO #17;
     |ABRE #17;
     #17#0 = #0#2;
     #17#1 = #1#41;
     |LEE 000#17=;
     |CIERRA #17;

     |ABRE #43;
     |ABRE #44;
     |DDEFECTO #43;
     |DDEFECTO #44;
     #43#4 = "";
     #43#0 = #0#1;
     #43#1 = #1#1;
     |LEE 000#43=;
     |SI FSalida ! 0; |GRABA 020#43n; |FINSI;

     #44#21 = #43#4;
     #44#18 = #43#0;
     #44#8 = #0#0;

     #44#0 = #0#2;
     #44#1 = #1#41;
     #44#2 = #0#3;
     #44#3 = #17#39;
     #44#4 = #0#4;
     #44#5 = #43#1;
     #44#6 = #19#6;
     #44#7 = "S";
     #44#19 = #17#5;
     #44#20 = #19#104;
     |SI nForma = 1;
          |GRABA 020#44n;
     |SINO;
          |BORRA 020#44c;
     |FINSI;

     enForma = nForma;
     enCodigo = #44#18;
     |HAZ AcumulaES_SS;

     |CIERRA #44;
     |CIERRA #43;
|FPRC;
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|PROCESO total; |TIPO 0;
  |SI FSalida = 9;
      |CAMPO_MODIFICA #0#5, 1, "S";
  |FINSI;
  bruto = (#0#4 * #0#5) ! EURODB;
  descu = (bruto % #0#8) ! EURODB;;
  #0#6 = bruto - descu;
  |PINTA #0#6;
|FPRC;

|PROCESO alsalir1;
  |CAMPO_MODIFICA #0#5, 1, "N";
|FPRC;

|PROCESO suma; |TIPO 2;
     nForma = 0 +. 1;
     |HAZ Stock;

  sumalin = sumalin +. #0#6;
  #1#34 = #1#34 +. #0#4;

  #1#20 = sumalin;
  #1#22 = #1#20 - #1#21;
  #1#23 = ((#1#22 * #1#14) / 100) ! EURODB;
  #1#24 = #1#22 + #1#23;
  |SI #1#15 = "A";
       #1#21 = 0;
       #1#22 = 0;
       #1#23 = 0;
       #1#24 = 0;
  |FINSI;
  |SI #1#15 = "T";
      #1#23 = 0;
      #1#24 = #1#22;
  |FINSI;
  |PINTA #1#20;
  |PINTA #1#34;
  |SI programa = 1;
      |PINTA #1#22;
      |PINTA #1#23;
      |PINTA #1#24;
  |FINSI;
|FPRC;

|PROCESO articuloficina;
  |ABRE #11;
  #11#0 = #1#3;
  #11#1 = #1#29;
  #11#2 = #0#2;
  |LEE 101#11=;
  |SI FSalida ! 0;
      |DDEFECTO #11;
      #11#0 = #1#3;
      #11#1 = #1#29;
      #11#2 = #0#2;
      #11#3 = #1#4;
      #11#4 = #1#30;
      #11#5 = #0#3;
      |PUSHV 0501 2380;
      |PINPA #0#11;
      |PINDA #0#11;
      |ENDATOS #1#11;
      |SI FSalida = 0;
          #0#5 = #11#6;
          #0#8 = #11#7;
          |GRABA 101#11n;
      |SINO;
          |MENAV "     ARTICULO CLIENTE OBRA INEXISTENTE";
          |ERROR;
      |FINSI;
      |POPV;
  |FINSI;
  |CIERRA #11;
  #0#5 = #11#6;
  #0#8 = #11#7;
  |PINTA #0#5;
  |PINTA #0#8;
|FPRC;

|PROCESO Precio; |TIPO 0;

  |SI estoyen = "O";
      |HAZ articuloficina;
      |ACABA;
  |FINSI;

     |SI #0Campo = Contenido; |ACABA; |FINSI;

     |ABRE #24;
     #24#0 = #1#3;
     |LEE 000#24=;
     |CIERRA #24;

     |ABRE #23;
     #23#0 = #24#0;
     #23#1 = #0#2;
     |LEE 000#23=;
     |SI FSalida = 0; |Y #23#28 ] #1#1; |Y #23#29 [ #1#1;
          nPrecio = #23#2;
     |SINO;
          |ABRE #19;
          #19#0 = #0#2;
          |LEE 000#19=;
          |SI FSalida = 0;
               |SI #24#39 = 1; nPrecio = #19#18; |FINSI;
               |SI #24#39 = 2; nPrecio = #19#19; |FINSI;
               |SI #24#39 = 3; nPrecio = #19#20; |FINSI;
               |SI #24#39 = 4; nPrecio = #19#147; |FINSI;
               |SI #24#39 = 5; nPrecio = #19#148; |FINSI;
               |SI #24#39 = 6; nPrecio = #19#149; |FINSI;
          |FINSI;
          |CIERRA #19;
     |FINSI;
     |CIERRA #23;
     #0#5 = nPrecio;
     |PINTA #0#5;
|FPRC;
