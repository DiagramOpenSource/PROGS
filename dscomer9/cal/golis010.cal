|FICHEROS;
     golis010 #0;
     gopartia #1;
     agifa077 #77;
     agifa080 #80;
|FIN;

|VARIABLES;
     aAsignado = "";
     aInforme = "golis010";
     &enSw = 0;
     nHay  = 0;
     nConta = 0;
     aAlfa = "";
     &aArtAnt = "";
     &nUniAnt = 0;
     &nImpAnt = 0;
     &aTipAnt = "";
|FIN;

|PROCESO Impre;
  |SI #1#34 = "T"; |O #1#34 = "A";  |ACABA;  |FINSI;
     nHay = 1;
     |PRINT;
     enSw = enSw + 1;
|FPRC;

|PROCESO gopartia;
  |SI #1#34 = "T";  |O #1#34 = "A";  |ACABA;  |FINSI;
     nConta = nConta + 1;
     aArtAnt = #1#20;
     nUniAnt = #1#10;
     nImpAnt = #1#14;
     aTipAnt = #1#34;
|FPRC;

|DEFBUCLE gopartiaImpre;
     #1#1;
     ;
     " ", #80#27, #80#0, #80#1, 001;
     "z", #80#27, #80#0, #80#1, 999;
     ;
     NULL, Impre;
|FIN;

|DEFBUCLE gopartia;
     #1#1;
     ;
     " ", #80#27, #80#0, #80#1, 001;
     "z", #80#27, #80#0, #80#1, 999;
     ;
     NULL, gopartia;
|FIN;

|PROCESO agifa080;
  nConta = 0;
  |BUCLE gopartia;
  |SI nConta = 0;
      enSw = -1;     ||No hay
      |SI #80#2 ! "                    ";  ||codigo vacio
          nHay = 1;
          |PRINT;
          aAsignado = "PE";
      |FINSI;
      |ACABA;
  |FINSI;
  enSw = 0;
  |SI nConta = 1;
      |SI aArtAnt ! #80#2; ||Aticulo
          |O nUniAnt ! #80#5;||Unidades
          |O nImpAnt ! #80#9;||Importe
          |SI aTipAnt ! "T"; |Y aTipAnt ! "A";
              nHay = 1;
              |PRINT;
              enSw = enSw + 1;
          |FINSI;
      |FINSI;
  |SINO;
      |BUCLE gopartiaImpre;
  |FINSI;
|FPRC;

|PROCESO agifa_077;
     aAsignado = #77#34;
|FPRC;

|PROCESO agifa077Fin;
     #77#34 = aAsignado;
     |GRABA 020#77a;
     |LIBERA #77;
|FPRC;

|DEFBUCLE agifa077;
     #77#3;
     ;
     "      ", #0#2, #0#0, 000001;
     "zzzzzz", #0#3, #0#1, 999999;
     be;
     NULL, agifa_077, agifa080, agifa077Fin;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |HAZ MiraLogos; || Copia Logos para el Crystal
     |IMPRE 0;
     |SI FSalida = 0;
          |INFOR aInforme;
          |SI FSalida = 0;
               |BUCLE agifa077;
               |SI nHay ! 0; |PIEINF; |FINSI;
               |FININF;
          |SINO;
               aInforme = "0000No existe informe " + aInforme;
               |MENAV aInforme;
          |FINSI;
          |FINIMP;
     |FINSI;
|FPRC;
