|FICHEROS;
     agifa019 #19,MANTE;
     agifa017 #17,MANTE;
     agifa029 #29,MANTE;
|FIN;

|VARIABLES;
     &eaArticulo = "";
     &enAlmacen = 0;
     &enSalida = 0;
     nExiste = 0;
     aParam = "";
|FIN;

|PROCESO AltaAlmacen;
     |ABRE #29;
     #29#0 = enAlmacen;
     |LEE 101#29=;
     nExiste = FSalida;
     |PINPA #0#29;
     |PINDA #0#29;
     |SI nExiste ! 0;
          |GRABA 020#29b;
          |CONFI "0000SConfirma el alta (S/N)";
     |SINO;
          FSalida = 0;
     |FINSI;
     enSalida = FSalida;
     |SI FSalida ! 0;
          |SI nExiste ! 0; |BORRA 020#29c; |FINSI;
     |SINO;
          |SI nExiste = 0;
               |ENDATOS #2#29;
          |SINO;
               |ENDATOS #1#29;
          |FINSI;
          enSalida = FSalida;
          |SI FSalida ! 0;
               |SI nExiste ! 0; |BORRA 020#29c; |FINSI;
          |SINO;
               |GRABA 020#29a;
          |FINSI;
     |FINSI;
     |CIERRA #29;
|FPRC;

|PROCESO AltaArtiAlma;
     |ABRE #17;
     #17#0 = eaArticulo;
     #17#1 = enAlmacen;
     |LEE 101#17=;
     nExiste = FSalida;
     |PINPA #0#17;
     |PINDA #0#17;
     |SI nExiste ! 0;
          |GRABA 020#17b;
          |CONFI "0000SConfirma el alta (S/N)";
     |SINO;
          FSalida = 0;
     |FINSI;
     enSalida = FSalida;
     |SI FSalida ! 0;
          |SI nExiste ! 0; |BORRA 020#17c; |FINSI;
     |SINO;
          |SI nExiste = 0;
               |ENDATOS #2#17;
          |SINO;
               |ENDATOS #1#17;
          |FINSI;
          enSalida = FSalida;
          |SI FSalida ! 0;
               |SI nExiste ! 0; |BORRA 020#17c; |FINSI;
          |SINO;
               |GRABA 020#17a;
          |FINSI;
     |FINSI;
     |CIERRA #17;
|FPRC;

|PROCESO AltaArticulo;
     |ABRE #19;
     #19#0 = eaArticulo;
     |LEE 101#19=;
     nExiste = FSalida;
     |PINPA #0#19;
     |PINDA #0#19;
     |SI nExiste ! 0;
          |GRABA 020#19b;
          |CONFI "0000SConfirma el alta (S/N)";
     |SINO;
          FSalida = 0;
     |FINSI;
     enSalida = FSalida;
     |SI FSalida ! 0;
          |SI nExiste ! 0; |BORRA 020#19c; |FINSI;
     |SINO;
          |SI nExiste = 0;
               |ENDATOS #2#19;
          |SINO;
               |ENDATOS #1#19;
          |FINSI;
          enSalida = FSalida;
          |SI FSalida ! 0;
               |SI nExiste ! 0; |BORRA 020#19c; |FINSI;
          |SINO;
               |GRABA 020#19a;
          |FINSI;
     |FINSI;
     |CIERRA #19;
|FPRC;

|PROGRAMA;
     aParam = PARAMETRO;
     |CLS;
     |SI aParam = "ARTI";
          |HAZ AltaArticulo;
     |SINO;
          |ABRE #29;
          #29#0 = enAlmacen;
          |LEE 000#29=;
          |SI FSalida ! 0;
               |HAZ AltaAlmacen;
               |SI enSalida = 0;
                    |HAZ AltaArtiAlma;
               |FINSI;
          |SINO;
               |HAZ AltaArtiAlma;
          |FINSI;
          |CIERRA #29;
     |FINSI;
|FPRO;
