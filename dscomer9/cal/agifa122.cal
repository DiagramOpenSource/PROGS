|FICHEROS;
     agifa122 #0;
     gestempo;
|FIN;

|VARIABLES;
     aFic = "";
     aCar = "";
     aAlfa = "";
     aLon = "";
     i = 0;
     nPos = 0;
     aPosibles = "";
|FIN;

|PROCESO PrimeCar;
     aLon = aFic % A0;
     |PARA i = 1; |SI i [ aLon; |HACIENDO i = i + 1;
          nPos = -(i * 100 + 1);
          aAlfa = aFic % nPos;
          |SI aAlfa = "\"; |O aAlfa = "/"; |SAL; |FINSI;
          aCar = aAlfa;
     |SIGUE;
|FPRC;

|PROCESO Borralo;
     |HAZ PrimeCar;
     aPosibles = "_0123456789";
     aPosibles = aPosibles - aCar;
     |SI FSalida ! 0;
          ||aAlfa = "0000" + aFic; |MENAV aAlfa;
          |FBORRA aFic;
     |FINSI;
|FPRC;

|PROCESO Tipo3; |TIPO 3;
     |SI #0#0 = "SI";
          |DELINDEX #gestempo;

          |DFICE aFic;
          aFic = aFic + "*.*";
          |_PDIR aFic;
          |PARA; |SI FSalida = 0; |HACIENDO;
               |HAZ Borralo;
               |_SDIR aFic;
          |SIGUE;

          |DFICE aFic;
          aFic = aFic + "*";
          |_PDIR aFic;
          |PARA; |SI FSalida = 0; |HACIENDO;
               |HAZ Borralo;
               |_SDIR aFic;
          |SIGUE;
     |FINSI;
|FPRC;
