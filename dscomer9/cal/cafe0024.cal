|FICHEROS;
     cafe0024 #0;
     agifa010 #10;
     agifa025 #25;

     dscam003@;
     dscam045@;
|FIN;

|VARIABLES;
     aAlfa = "";
     aBase = "";
     aEmp = "";
     nEmp = 0;
|FIN;

|PROCESO dscam003;
     |SI #dscam003@#33 = "  ";
          #dscam003@#33 = #25#0;
          #dscam003@#34 = #25#1;
          |GRABA 020#dscam003@.a;
     |FINSI;
     |LIBERA #dscam003@;
|FPRC;

|DEFBUCLE dscam003;
     #dscam003@#12006;
     69;
     #10#52, #10#0, 000, "01.01.0000", "            ", "      ", "A";
     #10#52, #10#0, 999, "31.12.9999", "zzzzzzzzzzzz", "zzzzzz", "A";
     be;
     NULL, dscam003;
|FIN;

|PROCESO dscam045;
     |SI #10#52 ] #dscam045@#4; |Y #10#52 [ #dscam045@#5;
          aEmp = ("00000" + #dscam045@#6) % -105;
          aAlfa = aBase + "dscarter/fich/" + aEmp + "/";
          |PATH_DAT #dscam003@#aAlfa#;
          |BUCLE dscam003;
     |FINSI;
|FPRC;

|DEFBUCLE dscam045;
     #dscam045@#3003;
     ;
     nEmp, 001, "V";
     nEmp, 999, "V";
     ;
     NULL, dscam045;
|FIN;

|PROCESO Albaranes;
     |DDEFECTO #25;
     #25#0 = #10#6;
     |LEE 000#25=;

     |BUCLE dscam045;
|FPRC;

|DEFBUCLE Albaranes;
     #10#4;
     ;
     #0#2, #0#0, #0#4;
     #0#3, #0#1, #0#5;
     ;
     NULL, Albaranes;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |DFICE aAlfa;
     nEmp = (A\(aAlfa % -205));
     |DBASS aBase;

     aAlfa = aBase + "dscarter/def/dscam045";
     |CARGA_DEF aAlfa, dscam045@;
     |SI FSalida = 0;
          aAlfa = aBase + "dscarter/def/dscam003";
          |CARGA_DEF aAlfa, dscam003@;
          |SI FSalida = 0;
               aAlfa = aBase + "dscarter/fich/";
               |PATH_DAT #dscam045@#aAlfa#;
               |ABRE #25;
               |BUCLE Albaranes;
               |CIERRA #25;
               |DESCARGA_DEF #dscam003@;
          |FINSI;
          |DESCARGA_DEF #dscam045@;
     |FINSI;
|FPRC;
