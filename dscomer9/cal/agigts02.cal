     PROCESO Taller

|FICHEROS;
     agigts01 #0;
     agifa007 #7;
     agifa065 #65;
     agifa071 #71;
     con00625@ #5;
     con00626@ #6;
     con00683@ #683
|FIN;

|VARIABLES;
     aAlfa = "";
     aPath = "";
     nUni = 0;
     aCreaAlb = "";
|FIN;

|PROCESO OrdenLin;
     |SI #con00626@#9 = 2; |O #con00626@#9 = 4;
          |SI aCreaAlb = "N";
               #71#29 = #con00626@#25;
               #71#0 = #con00626@#26;
               #71#1 = #con00626@#27;
               |LEE 000#71=;
               |SI FSalida ! 0; |DDEFECTO #71; |FINSI;
               nUni = #con00626@#4 - #71#5;
               |SI nUni = 0; |ACABA; |FINSI;
          |SINO;
               nUni = #con00626@#4;
          |FINSI;

          |DDEFECTO #65;
          #65#0 = #con00626@#2;
          #65#11= #con00626@#0;
          #65#1 = #con00626@#22;
          #65#2 = "OR";
          #65#3 = #con00626@#1;
          #65#4 = #con00626@#11;

          #7#26 = #65#11;
          |LEE 000#7=;
          |SI FSalida = 0;
               #65#5 = #7#29;
          |SINO;
               #65#5 = 1;
          |FINSI;

          #65#6 = nUni * -1 ;
          #65#7 = 0;
          #65#8 = 0;
          |SI #con00626@#14 = "G"; |O #con00626@#14 = "S";
               #65#9 = 0;
               #65#14 = 0;
          |SINO;
               #65#9 = #con00626@#5;
               #65#14 = #con00626@#5 < #con00626@#6;
          |FINSI;
          #65#10 = #con00625@#11;
          #65#12 = #con00626@#6;
          #65#13 = 0;
          ||#65#15 = #0#3; || matricula
          |GRABA 020#65n;
     |FINSI;
|FPRC;

|DEFBUCLE OrdenLin;
     #con00626@#1003;
     ;
     #con00625@#0, #con00625@#1, 0001;
     #con00625@#0, #con00625@#1, 9999;
     ;
     NULL, OrdenLin;
|FIN;

|PROCESO Orden;
     #0#1 = "OR";
     #0#2 = #con00625@#0;
     #0#3 = #con00625@#1;
     |PINTA #0#1;
     |PINTA #0#2;
     |PINTA #0#3;
     |BUCLE OrdenLin;
|FPRC;

|DEFBUCLE Orden;
     #con00625@#1002;
     2;
     "     ", "      ", #0#5;
     "zzzzz", "zzzzzz", #0#6;
     ;
     NULL, Orden;
|FIN;

|PROCESO Taller;
     |DDEF aPath;

     aAlfa = aPath + "con00683";
     |CARGA_DEF aAlfa, con00683@;
     |SI FSalida = 0;
          |ABRE #con00683@;
          |LEE 000#con00683@.p;
          |CIERRA #con00683@;
          aCreaAlb = #con00683@#36;
          |DESCARGA_DEF #con00683@;
     |FINSI;

     aAlfa = aPath + "con00625";
     |CARGA_DEF aAlfa, con00625@;
     |SI FSalida = 0;
          aAlfa = aPath + "con00626";
          |CARGA_DEF aAlfa, con00626@;
          |SI FSalida = 0;
               |ABRE #65;
               |ABRE #7;
               |ABRE #71;
               |BUCLE Orden;
               |CIERRA #71;
               |CIERRA #7;
               |CIERRA #65;
               |DESCARGA_DEF #con00626@;
          |FINSI;
          |DESCARGA_DEF #con00625@;
     |FINSI;
|FPRC;
