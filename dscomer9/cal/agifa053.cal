|FICHEROS;
     agifa053 #0;
     agifa049 #2;
     agifa019 #3;
     agifa017 #4;
|FIN;

|VARIABLES;
     &Tempo = "";
     &eaArticulo = "";
     &aVar     = "";
     &enCanti  = "";
     &enPre    = 0;
     aRayaHori = "";
     aEspacio  = "";
     nSwCheq   = 0;
|FIN;

|INCLUYE i_escand;

|PROCESO Salir;
     |SI FSalida = 1;
          |ERROR;
          |PTEC 807;
     |SINO;
          eaArticulo = #0Campo;
          |HAZ LlenaArticulo;
          |SI FSalida = 0;
               #0Campo = eaArticulo;
               |PINTA #0Campo;
          |SINO;
               |ERROR; |ACABA;
          |FINSI;
     |FINSI;
|FPRC;

||----Lo llama el incluye 'i_escand'
||---- que devuelve 'nCantiEscan'
|PROCESO LinEscan;
     |SI nSwCheq = 1; |ACABA; |FINSI;

     #3#0 = #2#2;
     |LEE 000#3=;
     |SI FSalida ! 0; |DDEFECTO #3; |FINSI;
     #4#0 = #2#2;
     #4#1 = #2#9;
     |LEE 000#4=;
     |SI FSalida ! 0; |DDEFECTO #4; |FINSI;

     enPre = #2#15;
     enCanti = nCantiEscan;
     aVar = (aEspacio * (nNivelEscan - 1)) + aRayaHori + #2#2 + " " + #2#3;
     |QBF aVar;
     aVar = aVar + ("." * 100);
     |PRINT;
|FPRC;

|PROCESO explo; |TIPO 3;
     aRayaHori = &124 + (&45 * 3);
     aEspacio = &124 + (&32 * 3);
     |IMPRE 0;
     |SI FSalida = 0;
          |INFOR "agifa053";
          |SI FSalida = 0;
               |ABRE #3;
               |ABRE #4;
               ||---------------- Llamada al incluye 'i_escand'
               nCantiEscan = 1;
               aEscan = #0#2;
               nMaxNivel = #0#1;
               |HAZ DesglosaEscan;
               ||----------------
               |CIERRA #4;
               |CIERRA #3;
               |PIEINF;
               |FININF;
          |FINSI;
          |FINIMP;
     |FINSI;
|FPRC;

|PROGRAMA;
     aEscan = PARAMETRO;
     |SI aEscan ! "";
          nSwCheq = 1;
          |HAZ DesglosaEscan;
     |SINO;
          |CLS;
          |CABEZA "Explosion de Materiales";
          |PINPA #0#0;
          |PINDA #0#0;
          |ENDATOS #1#0;
     |FINSI;
|FPRO;
