|FICHEROS;
     gopre007 #0;
     gopre002 #1;
     gopre004 #4;
     gopre003 #2;
     goartdes #9;
     gopre001 #10;
     goparame #100;
|FIN;
-----------------------------------------------------------------------------
|VARIABLES;
     nSwAjuste = 0;
     nConta = 0;
     nParti = 0;
     nNume1 = 0;
     nNume2 = 0;
     nImporte = 0;
     nDife = 0;
     nPrecio = 0;
     nIncremento = 0;
     &cCodMonBase   = "";
     &cDesMonBase   = "";
     &cCodMonTrab   = "";
     &cDesMonTrab   = "";

     &nDeci_PBase   = 0;
     &nDeci_TBase   = 0;
     &nDeci_PTrab   = 0;
     &nDeci_TTrab   = 0;
     &nDeci_TotVis  = 0;
     &nEurComTrab   = 0;
     &nEurComBase   = 0;
     &nEurVenTrab   = 0;
     &nEurVenBase   = 0;

     nModo          = 0;
     nIncrem        = 0;
     nBotF02        = 0;

|FIN;
-----------------------------------------------------------------------------
|PROCESO MiraAsigCap; |TIPO 0;
     |ABRE #10;
     #10#0 = #0#0;
     #10#1 = #0#1;
     |LEE 000#10=;

     |SI FSalida = 0;

          |SI #10#17 ! " "; |Y #10#17 ! "E";
               |MENAV "0000EL PRESUPUESTO, YA ESTA ASIGNADO. NO SE PUEDE VARIAR";
               |ERROR;
               |ACABA;
          |FINSI;

     |FINSI;

     |CIERRA #10;
|FPRC;
-----------------------------------------------------------------------------
|PROCESO MonTra006; |TIPO 14;
     cCodMonTrab = #0#4;
     ||SUB_EJECUTA_NP "gomoneda";
     |HAZ MonBas;
|FPRC;
-----------------------------------------------------------------------------
|PROCESO ActuPrecPres;
     |SI #0#11 = #1#12;
          |SI nSwAjuste = 1;
               #1#7 = #0#9;
               |HAZ AjusteCapitulo;
          |SINO;
               #1#11 = #0#10;
               |HAZ AjusteCapituloInc;
          |FINSI;
          #0#9 = #1#9;
          #0#10 = #1#11;
     |FINSI;
|FPRC;

|PROCESO Ajuste;
     |ABRE #10;
     #10#0 = #0#0;
     #10#1 = #0#1;
     |LEE 101#10=;
     |SI FSalida = 0;
          #10#5 = 0;
          #10#21 = 0;
          |BUCLELIN 0 ActuPrecPres #10;
          #10#21 = #10#5 - #10#6;            ||MARGEN BENEFICIO PRESUPUESTO
          |GRABA 020#10a;
     |FINSI;
     |CIERRA #10;
     |PINTA #0#10;
     |PINTA #0#9;
|FPRC;

|PROCESO CalPor;
     |SI #0#9 < #0#14;
          |AVISO;
          |MENAV "0000EL IMPORTE INTRODUCIDO ESTA POR DEBAJO DEL COSTE";
          |CONFI "2400NCONTINUAR";
          |SI FSalida ! 0;
               |ERROR;
               |ACABA;
          |FINSI;
     |FINSI;
     |SI #0#9 ! Contenido;
          |SI #10#42 = "+";
               nIncrem = ((#0#9-#0#13)/#0#13)*100; ||Calcula el Incremento.
          |SINO;
               nIncrem = (1 - (#0#13/#0#9))*100;
          |FINSI;
          |SI nIncrem >  999.999;
               |MENAV "0000ESTA SUPERANDO EL INCREMENTO PERMITIDO DE 999,999%";
          |SINO;
               #0#10 = nIncrem;
               |PINTA #0#10;
               nSwAjuste = 1;
               |HAZ Ajuste;
          |FINSI;
     |FINSI;
|FPRC;
-----------------------------------------------------------------------------
|PROCESO CalPre; |TIPO 0;
     |SI #0#10 ! Contenido;
          nSwAjuste = 2;
          |HAZ Ajuste;
     |FINSI;
|FPRC;
-----------------------------------------------------------------------------
|PROCESO Capi; |TIPO 0;
     |SI FSalida = 10;
          |ABRE #1;
          |CONSULTA_F_CLAVE #1#1, MinCap, MaxCap;
          |SI FSalida = 0;
               #0#9 = #1#9;
               #0#11 = #1#12;
               #0#12 = #1#4;
               #0#13 = #1#9;
               #0#14 = #1#10;
               |PINTA #0#9;
               |PINTA #0#11;
               |PINTA #0#12;
               |PINTA #0#13;
               |PINTA #0#14;
          |SINO;
               |ERROR;
               |ACABA;
          |FINSI;
          |CIERRA #1;
     |SINO;
          |ERROR10;
          |ACABA;
     |FINSI;
     |HAZ BH007;
|FPRC;
-----------------------------------------------------------------------------
|PROCESO MinCap;
     #1#0 = #0#0;
     #1#1 = #0#1;
     #1#2 = 1;
|FPRC;
-----------------------------------------------------------------------------
|PROCESO MaxCap;
     #1#0 = #0#0;
     #1#1 = #0#1;
     #1#2 = 999;
|FPRC;
-----------------------------------------------------------------------------
|PROCESO BI007; |TIPO 80;
     |CLS;
     |CONTROL_SIMPLE 0, "BOTON,F2 - Capitulos de Presupuesto", 2430, 2450, F2007;
     nBotF02 = FSalida;
     |ESTADO_CONTROL nBotF02, "HIDE";             ||"SHOW""HIDE""ENABLE""DISABLE".
|FPRC;
------------------------------------------------------------------------------
|PROCESO BF007; |TIPO 90;
     |PULSATECLA;
     |FIN_CONTROL_WINDOWS nBotF02;
     |PULSATECLA;
|FPRC;
------------------------------------------------------------------------------
|PROCESO BS007; |TIPO 7;

     |SI Campo = 11;
          |ESTADO_CONTROL nBotF02, "SHOW";        ||"SHOW""HIDE""ENABLE""DISABLE".
     |FINSI;

|FPRC;
-------------------------------------------------------------------------------
|PROCESO BH007; |TIPO 0;
     |ESTADO_CONTROL nBotF02, "HIDE";             ||"SHOW""HIDE""ENABLE""DISABLE".
|FPRC;
-------------------------------------------------------------------------------
|PROCESO F2007;
     |PTEC 824;
|FPRC;
-------------------------------------------------------------------------------
|PROCESO DesAmpSuCap0;
|FPRC;
|PROCESO DesAmpSuCap11;
|FPRC;
|PROCESO DesAmpSuCap2;
|FPRC;

|PROCESO Tipo13; |TIPO 13;
     |ABRE #100; |LEE 000#100p; |CIERRA #100;
     |SI #100#141 = "O";
          |PINTA 604, "O.E........:";
          |PINTA 1316, "O.E........";
          |PINTA 1416, "O.E........";
     |FINSI;
|FPRC;
