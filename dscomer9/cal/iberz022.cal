|FICHEROS;
   iberz022 #0;

   iberw015 #1;

   agifa501 #10;
|FIN;

|VARIABLES;
   aAlfa = "";
   nCalc = 0;

   nBase1 = 0; nCuota1 = 0;
   nBase2 = 0; nCuota2 = 0;
   nBase3 = 0; nCuota3 = 0;
   nTotal = 0;
|FIN;

|PROCESO Diferencias;
   nBase1 = #iberw015#3; nCuota1 = #iberw015#4;
   nBase2 = #iberw015#5; nCuota2 = #iberw015#6;
   nBase3 = #iberw015#7; nCuota3 = #iberw015#8;
   nTotal = #iberw015#9;

   #agifa501#14 = #iberw015#1;
   #agifa501#1  = "      ";
   #agifa501#35 = "F"
   #agifa501#57 = (("000" + #iberw015#0) % -103) + "  ";
   #agifa501#58 = 1;
   |LEE 000#agifa501.];
   |PARA; |SI FSalida = 0; |Y #agifa501#14 = #iberw015#1; |HACIENDO;
      |SI #agifa501#12 = #iberw015#2; |Y #agifa501#58 ! 0;
         |SI #agifa501#35 = "F"; |O #agifa501#35 = "T";
            aAlfa = #agifa501#57; |QBF aAlfa; aAlfa = aAlfa % 0103; nCalc = aAlfa;
            |SI nCalc = #iberw015#0;
               |SI #agifa501#20 ] nBase1;
                  #agifa501#20 = #agifa501#20 - nBase1;
                  nBase1 = 0;
               |SINO;
                  nBase1 = nBase1 - #agifa501#20;
                  #agifa501#20 = 0;
               |FINSI;
               |SI #agifa501#21 ] nCuota1;
                  #agifa501#21 = #agifa501#21 - nCuota1;
                  nCuota1 = 0;
               |SINO;
                  nCuota1 = nCuota1 - #agifa501#21;
                  #agifa501#21 = 0;
               |FINSI;

               |SI #agifa501#20 ] nBase2;
                  #agifa501#23 = #agifa501#23 - nBase2;
                  nBase2 = 0;
               |SINO;
                  nBase2 = nBase2 - #agifa501#23;
                  #agifa501#23 = 0;
               |FINSI;
               |SI #agifa501#24 ] nCuota2;
                  #agifa501#24 = #agifa501#24 - nCuota2;
                  nCuota2 = 0;
               |SINO;
                  nCuota2 = nCuota2 - #agifa501#24;
                  #agifa501#24 = 0;
               |FINSI;
               |SI #agifa501#20 ] nBase3;
                  #agifa501#26 = #agifa501#26 - nBase3;
                  nBase3 = 0;
               |SINO;
                  nBase3 = nBase3 - #agifa501#26;
                  #agifa501#26 = 0;
               |FINSI;
               |SI #agifa501#27 ] nCuota3;
                  #agifa501#27 = #agifa501#27 - nCuota3;
                  nCuota3 = 0;
               |SINO;
                  nCuota3 = nCuota3 - #agifa501#27;
                  #agifa501#27 = 0;
               |FINSI;
               |SI #agifa501#9 ] nTotal;
                  #agifa501#9 = #agifa501#9 - nTotal;
                  nTotal = 0;
               |SINO;
                  nTotal = nTotal - #agifa501#9;
                  #agifa501#9 = 0;
               |FINSI;
               |GRABA 020#agifa501.a;
               |SI nBase1 = 0; |Y nCuota1 = 0; |Y nBase2 = 0; |Y nCuota2 = 0;
                |Y nBase3 = 0; |Y nCuota3 = 0; |Y nTotal = 0;
                   |SAL;
               |FINSI;
            |FINSI;
         |FINSI;
      |FINSI;
      |LEE 000#agifa501.s;
   |SIGUE;
|FPRC;

|DEFBUCLE Diferencias;
#iberw015#1;
;
INICIO;
FINAL;
;
NULL,Diferencias;
|FIN;

|PROGRAMA;
   |CLS;
   |CABEZA "Cuadre de bases y cuotas de tiquets por centro y por caja";
   |PINPA #0#0; |PINDA #0#0;
   |ENDATOS #1#0;
   |SI FSalida = 0; |Y #0#0 = "S";
      |ABRE #agifa501;     |SELECT #3#agifa501;
      |BUCLE Diferencias;
      |SELECT #1#agifa501; |CIERRA #agifa501;
   |FINSI;
|FPRO;
