     COPIA DE  LOS FICHEROS:
          agifa080 <-> vigm0017


|FICHEROS;
     vigm0017 #17;
     agifa080 #80;
|FIN;

|VARIABLES;
     &enEstaDentro = 0; || sirve para evitar reentradas
     i = 0;
     aPath = "";
|FIN;


|PROCESO EsIber___21; ||Igual que EsIber21
     |DBASE aPath;
     aPath = aPath + "/bin/iber0001.tab";
     |XABRE "E", aPath, 0;
|FPRC;

|PROCESO Es__Vigor;
     |DBASE aPath;
     aPath = aPath + "/def/vigm0001.mas";
     |XABRE "E", aPath, 0;
     |SI FSalida = 0;
          |HAZ EsIber___21;
          |SI FSalida = 0;
              FSalida = 1;
          |SINO;
              FSalida = 0;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO &Tipo080_15; |TIPO 15;
     |HAZ Tipo080_16;
|FPRC;

|PROCESO &Tipo080_16; |TIPO 16;
     |SI enEstaDentro = 1; |ACABA; |FINSI;
     enEstaDentro = 1;

     |HAZ Es__Vigor;
     |SI FSalida = 0;
          |HAZ VigPedMod;
     |FINSI;
     enEstaDentro = 0;
|FPRC;

|PROCESO &Tipo080_17; |TIPO 17;
     |SI enEstaDentro = 1; |ACABA; |FINSI;
     enEstaDentro = 1;

     |HAZ Es__Vigor;
     |SI FSalida = 0;
          |HAZ VigPedBor;
     |FINSI;
     enEstaDentro = 0;
|FPRC;

|PROCESO &Copia80_15; |TIPO 15;
     |HAZ Copia80_16;
|FPRC;

|PROCESO &Copia80_16; |TIPO 16;
     |SI enEstaDentro = 1; |ACABA; |FINSI;
     enEstaDentro = 1;

     |HAZ Es__Vigor;
     |SI FSalida = 0;
          |HAZ VigModPed;
     |FINSI;
     enEstaDentro = 0;
|FPRC;

|PROCESO &Copia80_17; |TIPO 17;
     |SI enEstaDentro = 1; |ACABA; |FINSI;
     enEstaDentro = 1;

     |HAZ Es__Vigor;
     |SI FSalida = 0;
          |HAZ VigBorPed;
     |FINSI;
     enEstaDentro = 0;
|FPRC;

|PROCESO VigPedMod;
     |ABRE #17;
     #17#27 = #80#27;
     #17#0 = #80#0;
     #17#1 = #80#1;
     |LEE 101#17=;
     |SI FSalida ! 0; |GRABA 020#17b; |FINSI;
     |PARA i = 0; |SI i [ 44; |HACIENDO i = i + 1;
          #17i = #80i;
     |SIGUE;
     |GRABA 020#17a;
     |CIERRA #17;
|FPRC;

|PROCESO VigPedBor;
     |ABRE #17;
     #17#27 = #80#27;
     #17#0 = #80#0;
     #17#1 = #80#1;
     |BORRA 000#17c;
     |CIERRA #17;
|FPRC;

|PROCESO VigModPed;
     |ABRE #80;
     #80#27 = #17#27;
     #80#0 = #17#0;
     #80#1 = #17#1;
     |LEE 101#80=;
     |SI FSalida ! 0; |GRABA 020#80b; |FINSI;
     |PARA i = 0; |SI i [ 44; |HACIENDO i = i + 1;
          #80i = #17i;
     |SIGUE;
     |GRABA 020#80a;
     |CIERRA #80;
|FPRC;

|PROCESO VigBorPed;
     |ABRE #80;
     #80#27 = #17#27;
     #80#0 = #17#0;
     #80#1 = #17#1;
     |BORRA 020#80c;
     |CIERRA #80;
|FPRC;
