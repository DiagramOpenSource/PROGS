|FICHEROS;
    evarz006 #14;
    evarw001 #1,MANTE;
    agifa104 #15,MANTE;
    agifa073 #16;
|FIN;

|VARIABLES;
    &Tempo = "";
    aTmp1 = "";
    &vercon = "";
    alfa = "";
    mensajeq = "0000Cliente sin Pedidos en esas condiciones";
    m = 0;
    mensaje = "";
    pintar = "";
    c = 0;
|FIN;


|PROCESO pro11;
  #1#3 = #14#1;
  #1#0 = 0;
|FPRC;

|PROCESO pro21;
  #1#3 = #14#5;
  #1#0 = 999999;
|FPRC;

|PROCESO salire;|TIPO 11;
  m = m + 1;
  |SI FSalida = 9; |Y m ! 1;        ||Se ha pulsado F1
      |HAZ imprime1;
  |FINSI;
|FPRC;

|PROCESO imprime1;
  |PUSHV 0501 2380;
  |HAZ albaval;
  |POPV;
|FPRC;

|PROCESO albaval;
  |ABRE #16;
  |ABRE #15;
  #15#25 = #1#1;
  #15#0 = #1#2;
  |LEE 101#15=;
  |SI FSalida = 0;
      |PINPA #0#15;
      |PINDA #0#15;
      |ENDATOS #4#15;
  |SINO;
      mensaje = "0000No Encuentro el Pedido " + #1#1 + "\" + #1#2;
      |MENAV mensaje;
  |FINSI;
  |CIERRA #15;
  |CIERRA #16;
|FPRC;


|PROCESO grabar;
     alfa = "N";
     |SI #14#2 = "S";|Y #15#13 ! 0;     alfa = "S";    |FINSI;
     |SI #14#2 = "P";|Y #15#12 ! 0;     alfa = "S";    |FINSI;
     |SI #14#2 = "A";                   alfa = "S";    |FINSI;

     |SI alfa = "N";  |ACABA;  |FINSI;

     pintar = "Procesando Pedido : " + #15#25 + "/"+ #15#0;
     |PINTA 1410 , pintar;

     |DDEFECTO #1;
     c = c + 1;
     #1#0 = c;
     #1#1 = #15#25; ||serie
     #1#2 = #15#0;  ||pedido
     #1#3 = #15#1;  ||fecha
     #1#4 = #15#12; ||por servir
     #1#5 = #15#13; ||servido
     #1#6 = #15#11; ||total
     #1#7 = #15#3;  ||su pedido
     #1#8 = #15#18; ||tipo cliente
     #1#9 = #15#9;  ||forma de pago
     |GRABA 020#1n;
|FPRC;

|DEFBUCLE pasa;
 #15#2;
 1;
 #14#0, #14#3,      0, #14#1;
 #14#0, #14#4, 999999, #14#5;
 ;
 NULL, grabar;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |HAZ CreaTempo; |NOME_DAT #1 Tempo; |DELINDEX #1; aTmp1 = Tempo;
     |ABRE #1;
     |BUCLE pasa;
     |CIERRA #1;
     |SI c ! 0;
          |ENTLINEAL #1#1 , -1 , 4 , 23 , 1 , pro11 , pro21;
     |SINO;
          |MENAV mensajeq;
     |FINSI;
     |DELINDEX #1; Tempo = aTmp1; |HAZ BoraTempo;
|FPRC;
