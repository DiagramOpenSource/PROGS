|FICHEROS;
     platw001 #0;
     platm018 #1;
     platm011 #2;
|FIN;

|VARIABLES;
     aContrato = "";
     aInstalac = "";
     aEstado = "";
     aAlfa1 = "";
     nCampo = 0;
|FIN;

|PROCESO Mercancia_Des1;
     aAlfa1 = #0Campo;
     |QBF aAlfa1;
     |SI aAlfa1 = "";    |ACABA;   |FINSI;

     |ABRE #platm011;
     #platm011#0 = #0Campo;
     |LEE 000#platm011.=;
     |SI FSalida = 0;

          nCampo = Campo + 5;
          aEstado = #platm011#7;   |QBF aEstado;
          |SI #0nCampo = "S"; |Y aEstado ! "INSTALADO";
               |MENAV "0000La mercancia no esta en 'INSTALADO'";
               |ERROR;
          |FINSI;
          |SI #0nCampo = "N"; |Y aEstado ! "ALMACEN";
               |MENAV "0000La mercancia no esta en 'ALMACEN'";
               |ERROR;
          |FINSI;

          |SI #platm011#8 = "O";
               |MENAV "0000Mercancia no seriada.";
               |ERROR;
          |FINSI;

          aContrato = #platm011#5; |QBT aContrato;
          |SI aContrato ! ""; |Y #platm011#7 = "AVERIADO  ";
               |SI #platm011#6 ! #platm018#1;|O #platm011#5 ! #platm018#0;
                    aContrato = #platm011#5; |QBF aContrato;
                    aInstalac = #platm011#6; |QBF aInstalac;
                    aContrato = "0000Material recogido en contrato: " + aContrato;
                    aContrato = aContrato + " Instal: " + aInstalac;
                    |MENAV aContrato;
                    |ERROR;
               |FINSI;
          |FINSI;
     |FINSI;
     |CIERRA #platm011;
|FPRC;
