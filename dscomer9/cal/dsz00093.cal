|FICHEROS;
     dsz00093 #0;
     dsm00089 #89;
     dsm00090 #90;
|FIN;

|VARIABLES;
     aAlfa = "";
     aInforme = "";
     i = 0;
     &enEtiq = 0;
|FIN;

|PROCESO Historico;
     |SI #0#2 ! "T";
          |SI #0#2 = "I";
               |SI #90#2 = "N"; |ACABA; |FINSI;
          |FINSI;
          |SI #0#2 = "N";
               |SI #90#2 = "S"; |ACABA; |FINSI;
          |FINSI;
     |FINSI;
     |SI #0#3 ! "T";
          |SI #0#3 = "A";
               |SI #90#1 = "N"; |ACABA; |FINSI;
          |FINSI;
          |SI #0#3 = "N";
               |SI #90#1 = "S"; |ACABA; |FINSI;
          |FINSI;
     |FINSI;

     |PARA i = 1; |SI i [ #0#4; |HACIENDO i = i + 1;
          enEtiq = i;
          |PRINT;
          |PIEINF;
     |SIGUE;

     #90#2 = "S";
     |GRABA 020#90a;
     |LIBERA #90;
|FPRC;

|DEFBUCLE Historico;
     #90#1;
     ;
     #0#0;
     #0#1;
     be;
     NULL, Historico;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |ABRE #89; |LEE 000#89p; |CIERRA #89;
     aInforme = #89#3; |QBF aInforme;

     |IMPRE 0;
     |SI FSalida = 0;
          |INFOR aInforme;
          |SI FSalida ! 0;
               aAlfa = "0000Error en informe '" + aInforme + "'";
               |MENAV aAlfa;
          |SINO;
               |BUCLE Historico;
               |FININF;
          |FINSI;
          |FINIMP;
     |FINSI;
|FPRC;
