|FICHEROS;
    obras007  #0; || Seleccion.
    obras005  #1; || Cab.Presupuesto.
    obras006  #2; || Lineas Presupuesto.
    obras001  #3; || Obras.
    agifa048  #7; ||Escandallos.
    agifa049  #8; ||Lineas Escandallos.

|FIN;

|VARIABLES;
    impre=0;
    &ag  =0;
    &pa  =0;
    &des ="";
    sw   =0;
   &imp  =0;
   &toag =0;
   &toap =0;
   &toob =0;
   &tl   =0;
    tj   =0;
|FIN;

|PROCESO prolin;

            |SI #2#7 = 0;
              imp=#2#8;
            |SINO;
              imp= (#2#7 * #2#8);
            |FINSI;

  |SI #0#1 ! "A"; |Y #0#1 ! "P";
      |PRINT;
      impre=1;
      ||HAZ leees;
      tl=2;
  |FINSI;

              toag=toag+imp;
              toap=toap+imp;
              toob=toob+imp;

|FPRC;

|PROCESO propre;

     |SI sw = 0;
      ag = #1#1;
      pa = #1#2;
      des= #1#3;
      sw = 1;
      tl = 0;
     |FINSI;
   |SI ag ! #1#1;
    |SI #0#1= "P";
      |PRINT;
      impre=0;
    |FINSI;
      tl = 4;
      |PRINT;
      impre=1;
      pa=#1#2;
      des=#1#3;
      ag=#1#1;
      tl=0;
      toag=0;
      toap=0;
   |FINSI;
   |SI pa ! #1#2;
    |SI #0#1 ! "A";
    |SI #0#1 ! "P"; tl = 3;  |FINSI;
      |PRINT;
      |PIEINF;
      tl = 0;
      impre=1;
    |FINSI;
      pa=#1#2;
      des=#1#3;
      tl = 1;
      toap=0;
   |FINSI;
|FPRC;



|DEFBUCLE leepre;
   #1#1;
;
#0#0,00,#0#2;
#0#0,99,#0#3;
;
NULL,propre,prolin;
|FIN;








|PROCESO lista;  |TIPO 3;

             |IMPRE 0;
               |SI FSalida ! 0; |ACABA; |FINSI;
          |SI #0#1 ="O";
             |INFOR "obras007";
          |FINSI;
          |SI #0#1 ="A";
             |INFOR "obrasa07";
          |FINSI;
          |SI #0#1 ="P";
             |INFOR "obrasp07";
          |FINSI;
               |SI FSalida ! 0; |FINIMP; |ACABA; |FINSI;

             |BUCLE leepre;
               |SI impre = 1;
                |SI #0#1 = "P";
                  |PRINT;
                |FINSI;
                  tl = 4;
                  |PRINT;
                  tl = 88;
                  |PIEINF;
               |FINSI;
               |FININF;
               |FINIMP;

|FPRC;


|PROCESO  mayus;  |TIPO 0;
        #0#1 = #0#1 > " ";
        |PINTA #0#1;
|FPRC;



|PROCESO proesca;
      tl=33;
      |PRINT;
      impre=1;
|FPRC;

|DEFBUCLE lee_es;
   #8#1;
;
#2#5,1;
#2#5,999;
;
NULL,proesca;
|FIN;

|PROCESO leees;
   tj=tl;
   |BUCLE lee_es;
   tl=tj;
|FPRC;
