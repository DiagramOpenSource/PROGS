|FICHEROS;
  con00850 #0; ||este def
  agifa154 #1; ||la tabla de cambios
  con00626 #2; ||lineas de ordenes de reparacion
|FIN;

|VARIABLES;
  tabla = 0;
  ant = "";
  nue = "";
  des = "";
|FIN;

|PROCESO cambio;
  #2#2 = nue;
  #2#3 = des;
  |GRABA 021#2a;
  |LIBERA #2;
|FPRC;

|DEFBUCLE piezas;
  #2#1; ||serie,numero,linea
  2;
  "  ","      ",1000,ant;
  "zz","zzzzzz",1999,ant;
  be;
  NULL,cambio;
|FIN;

|DEFBUCLE lubricantes;
  #2#1; ||serie,numero,linea
  2;
  "  ","      ",3000,ant;
  "zz","zzzzzz",3999,ant;
  be;
  NULL,cambio;
|FIN;

|PROCESO busca;
  ant = #1#2;
  nue = #1#3;
  des = #1#4;
  |BUCLE piezas;
  |BUCLE lubricantes;
|FPRC;

|DEFBUCLE lineas;
  #1#1; ||tabla,linea
  ;
  tabla,00000;
  tabla,99999;
  e;
  NULL,busca;
|FIN;

|PROCESO comienza; |TIPO 3;
  |SI FSalida = 0; |Y #0#2 = "s"; |O #0#2 = "S";
      tabla = #0#0;
      |BUCLE lineas;
    |SINO;
      |MENAV "0000PROCESO CANCELADO";
  |FINSI;
|FPRC;
