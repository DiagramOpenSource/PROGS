|FICHEROS;
     tecaz006 #0;
     tecam012 #12;
|FIN;

|VARIABLES;
     aPinta    = "";
     nSegAnt2  = 0;
     nConta2   = 0;
     nEspera2  = 0;
     aLF       = "";
     aFecha    = "";
     aAlfa     = "";
     aHora     = "";
     aTecla    = "";
     aBarra    = "";
     nEspera   = 0;
     nMinu     = 0;
     nNume     = 0;
     nHora     = 0;
     nSegu     = 0;
     nSegAnt   = 0;
     nPorcien  = 0;
     nConta    = 0;
     aLon      = "";
     nLon      = 0;
     aBlanco   = "";
     nHandle   = 0;
     aValor    = "";
     aPath     = "";
     aFic      = "";
|FIN;

|PROCESO Segundos;
     |HORA aHora;
     aAlfa = aHora % 702;
     nSegu = aAlfa;
     |SI nSegAnt ! nSegu;
          nPorcien = nConta * 100 / nEspera;
          nPorcien = 60 - (nPorcien * 60 / 100);
          aBarra = "Þ" * nPorcien;
          aBarra = aBarra + ( " " * 60);
          aBarra = aBarra % 160;
          |SI aPinta ! "";
               |ATRI I; |PINTA 1214, aBarra; |ATRI 0;
               |PINTA 1206, "       ";
               |SI nConta > 0; |PINTA 1206, nConta; |FINSI;
          |FINSI;
          nConta = nConta - 1;
          nSegAnt = nSegu;
     |FINSI;
|FPRC;

|PROCESO Segundos2;
     |HORA aHora;
     aAlfa = aHora % 702;
     nSegu = aAlfa;
     |SI nSegAnt2 ! nSegu;
          nPorcien = nConta2 * 100 / nEspera2;
          nPorcien = 60 - (nPorcien * 60 / 100);
          aBarra = "Þ" * nPorcien;
          aBarra = aBarra + ( " " * 60);
          aBarra = aBarra % 160;
          |SI aPinta ! "";
               |ATRI N; |PINTA 1414, aBarra; |ATRI 0;
               |PINTA 1406, "       ";
               |SI nConta2 > 0; |PINTA 1406, nConta2; |FINSI;
          |FINSI;
          nSegAnt2 = nSegu;
          nConta2 = nConta2 - 1;
     |FINSI;
|FPRC;

|| Si se llama con un parametro pinta la pantalla

|PROGRAMA;
     aPinta = PARAMETRO; |QBF aPinta;
     |SI aPinta ! "";
          |CLS;
          |PINPA #0#0;
     |FINSI;

     aLF = &13 + &10;
     |ABRE #12; |LEE 000#12p; |CIERRA #12;
     nConta = #12#2 * 60;
     nEspera = #12#2 * 60;
     nConta2 = #12#9 * 60;
     nEspera2 = #12#9 * 60;
     |PARA; |SI; |HACIENDO;
          |HAZ Segundos;
          |HAZ Segundos2;
          |SLEEP 1;
          |PULSATECLA;
          aTecla = FSalida;
          |SI aTecla = 27; |O aTecla = 816; |O aTecla = 806;
               |ACABA;
          |FINSI;
          |SI nConta = 0;          ||Envio
               |HAZ TecaAbreLog;
               nConta = nEspera;
               |SUB_EJECUTA_NP "tecaz005;auto";
               |HAZ TecaCierraLog;
          |FINSI;
          |SI nConta2 = 0;         ||Recepcion
               |HAZ TecaAbreLog;
               nConta2 = nEspera2;
               |SUB_EJECUTA_NP "tecaz003;algo";
               |HAZ TecaCierraLog;
          |FINSI;
     |SIGUE;
|FPRO;
