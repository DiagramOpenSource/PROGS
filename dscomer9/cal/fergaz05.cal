|FICHEROS;
     fergam03 #3;
     fergam06 #6;
     fergam07 #7;
     fergam08 #8;
     fergam11 #11;
     agifa073 #73;
|FIN;

|VARIABLES;
     &enModo104 = 0;
     &Tempo = "";
     &ser_ped = "";
     &num_ped = 0;
     nLin = 0;
     &eaFergaCli = "";
     &eaFergaDir = "";
     aAlfa = "";
|FIN;

|INCLUYE i_escand;

|PROCESO fergam03;
     #11#0 = #7#0
     #11#1 = #7#1
     #11#2 = #3#4;
     |GRABA 000#11n; || Sin errores, se puede repetir
|FPRC;

|DEFBUCLE fergam03;
     #3#2;
     ;
     aEscan, 001;
     aEscan, 999;
     ;
     NULL, fergam03;
|FIN;

|PROCESO LinEscan;
     nLin = nLin + 1;
     #7#0 = #6#0;
     #7#1 = nLin;
     #7#2 = aEscan;
     #7#3 = #401#3;
     #7#4 = #401#12; ||nCantiEscan;
     |GRABA 020#7n;
/*
     |BUCLE fergam03;
*/
|FPRC;

|PROCESO Borra11;
     |BORRA 020#11a;
|FPRC;

|PROCESO Borra8;
     |BORRA 020#8a;
|FPRC;

|PROCESO Borra7;
     |BORRA 020#7a;
|FPRC;

|DEFBUCLE Borra7;
     #7#1;
     ;
     #6#0, 001;
     #6#0, 999;
     be;
     NULL, Borra7;
|FIN;

|DEFBUCLE Borra8;
     #8#1;
     ;
     #6#0, 001, 001;
     #6#0, 999, 999;
     be;
     NULL, Borra8;
|FIN;

|DEFBUCLE Borra11;
     #11#1;
     ;
     #6#0, 001, "                              ";
     #6#0, 999, "zzzzzzzzzzzzzzzzzzzzzzzzzzzzzz";
     be;
     NULL, Borra11;
|FIN;

|PROGRAMA;
     |DDEFECTO #6;
     |ABRE #6;
     #6#0 = num_ped;
     |LEE 101#6=;
     |SI FSalida ! 0; |GRABA 020#6b; |FINSI;

     |BUCLE Borra7;
     |BUCLE Borra11;
     |SI enModo104 = 1;
          |BUCLE Borra8;
     |FINSI;

     |ABRE #73;
     #73#28 = ser_ped;
     #73#0 = num_ped;
     #73#1 = 0;
     |LEE 000#73];
     |SI FSalida = 0; |Y #73#28 = ser_ped; |Y #73#0 = num_ped;
          #6#0 = num_ped;
          #6#1 = ~;
          #6#2 = ser_ped;
          #6#3 = num_ped;
          #6#4 = #73#2;
          #6#5 = #73#4;
          #6#6 = #73#5;
          #6#12 = eaFergaCli % 106
          #6#13 = eaFergaCli % 7;
          aAlfa = eaFergaDir % 104;
          #6#14 = aAlfa;
          #6#15 = eaFergaDir % 5;
          |GRABA 020#6a;
          |ABRE #7;
          |ABRE #11;
          nLin = 0;
          nMaxNivel = 1;
          aEscan = #6#4;
          nCantiEscan = #6#6;
          |HAZ DesglosaEscan;
          |CIERRA #11;
          |CIERRA #7;
     |FINSI;
     |CIERRA #6;
|FPRO;
