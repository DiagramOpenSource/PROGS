|FICHEROS;
     conz0007 #0;
     agifa134 #134;
     con00637 #637;
     dscam003@;
     dscam045@;
|FIN;

|VARIABLES;
     aPath = "";
     aAlfa = "";
     nEmpresa = 0;
|FIN;

|PROCESO Recibos;
     |SI #dscam003@#14 = "C"; |O #dscam003@#14 = "P";
          #dscam003@#80 = #134#11;
          |GRABA 020#dscam003@.a;
     |FINSI;
     |LIBERA #dscam003@;
|FPRC;

|DEFBUCLE Recibos;
     #dscam003@#9005;
     ;
     00, #134#49, #134#0, 000, 000000001;
     99, #134#49, #134#0, 999, 999999999;
     be;
     NULL, Recibos;
|FIN;

|PROCESO Empresas;
     |SI #dscam045@#2 = "V";
          |DBASS aAlfa; |QBF aAlfa; aAlfa = aAlfa + "dscarter/fich/";
          aAlfa = aAlfa + (("00000" + #dscam045@#6) % -105) + "/";
          |PATH_DAT #dscam003@#aAlfa#;
          |BUCLE Recibos;
     |FINSI;
|FPRC;

|DEFBUCLE Empresas;
     #dscam045@#1002;
     ;
     nEmpresa, 001;
     nEmpresa, 999;
     ;
     NULL, Empresas;
|FIN;

|PROCESO Cartera;
     |DBASS aPath; |QBF aPath; aPath = aPath + "dscarter/def/";
     aAlfa = aPath + "dscam045.mas";
     |CARGA_DEF aAlfa, dscam045@;
     |SI FSalida = 0;
          aAlfa = aPath + "dscam003.mas";
          |CARGA_DEF aAlfa, dscam003@;
          |SI FSalida = 0;
               |DBASS aAlfa; |QBF aAlfa; aAlfa = aAlfa + "dscarter/fich/";
               |PATH_DAT #dscam045@#aAlfa#;
               |BUCLE Empresas;
               |DESCARGA_DEF #dscam003@;
          |FINSI;
          |DESCARGA_DEF #dscam045@;
     |FINSI;
|FPRC;

|PROCESO con00637;
     #134#49 = #637#0;
     #134#0 = #637#1;
     |LEE 101#134=;
     |SI FSalida = 0;
          |SI #134#11 ! #637#20;
               #134#11 = #637#20;
               |GRABA 020#134a;
               |HAZ Cartera;
          |FINSI;
          |LIBERA #134;
     |FINSI;
|FPRC;

|DEFBUCLE con00637;
     #637#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, con00637;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     nEmpresa = #48#0;
     |ABRE #134;
     |BUCLE con00637;
     |CIERRA #134;
|FPRC;
