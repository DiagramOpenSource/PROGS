|FICHEROS;
   dsm00225 #0;

   refere1@ #100;
   refere2@;
|FIN;

|VARIABLES;
   aTipo = "";
   nBoton = 0;

   nPos1 = 0;
   nPos2 = 0;

   nCalc = 0;
   nCont = 0;

   aAlfa = "";
|FIN;

|PROCESO BotonClick;
   aAlfa = "    NSe perderán los datos actuales. " + &13+ &191 + " Continuar ?";
   |CONFI aAlfa;
   |SI FSalida ! 0; |ACABA; |FINSI;

   |DBASE aAlfa; |QBF aAlfa;
   aAlfa = aAlfa + "def/dsm00225.mas";
   |CARGA_DEF aAlfa, refere1@;
   |SI FSalida = 0;
      |DBASE aAlfa; |QBF aAlfa;
      aAlfa = aAlfa + "fich/patrones/"; |PATH_DAT #refere1@#aAlfa#;
      |ABRE #refere1@;
      |LEE 000#refere1@.p;
      |SI FSalida = 0;
         |CIERRAT #dsm00225; |DELINDEX #dsm00225;   |ABRET #dsm00225;
         aAlfa = "|NC"; aAlfa = #dsm00225#aAlfa#; nCalc = aAlfa;
         |PARA; |SI FSalida = 0; |HACIENDO;
            |DDEFECTO #dsm00225;
            |PARA nCont = 0; |SI nCont < nCalc; |HACIENDO nCont = nCont + 1;
               #dsm00225#nCont# = #refere1@#nCont#;
            |SIGUE;
            |GRABA 020#dsm00225.n;
            |LEE 000#refere1@.s;
         |SIGUE;
         |LEE 000#dsm00225.p;
         |MENAV "    Proceso completado";
      |FINSI;
      |CIERRA #refere1@; |DESCARGA_DEF #refere1@;
   |SINO;
      |MENAV "    No se encuentra el def de paises";
   |FINSI;
|FPRC;

|PROCESO Tipo8m00225; |TIPO 8;
   nPos1 = 2055; nPos2 = 2078;
   |CONTROL_SIMPLE 0, "BOTON,{{197}}Recoger paises del fichero patron", nPos1, nPos2, BotonClick;
   nBoton = FSalida;
|FPRC;

|PROCESO Tipo9m00225; |TIPO 9;
   |SI nBoton ! 0;
      |FIN_CONTROL_WINDOWS nBoton;
   |FINSI;
|FPRC;

|PROCESO T15_255; |TIPO 15;
     |HAZ EsSocitransa;
     |SI FSalida = 0;
          aTipo = "M";
          |HAZ CopiaPais;
     |FINSI;
|FPRC;

|PROCESO T16_255; |TIPO 16;
     |HAZ EsSocitransa;
     |SI FSalida = 0;
          aTipo = "M";
          |HAZ CopiaPais;
     |FINSI;
|FPRC;

|PROCESO T17_255; |TIPO 17;
     |HAZ EsSocitransa;
     |SI FSalida = 0;
          aTipo = "B";
          |HAZ CopiaPais;
     |FINSI;
|FPRC;

|PROCESO CopiaPais;
     |DDEF aAlfa;
     aAlfa = aAlfa + "sctrm005";
     |CARGA_DEF aAlfa, refere2@;
     |SI FSalida = 0;
          |ABRE #refere2@;
          #refere2@#0 = #0#0;
          |LEE 101#refere2@.=;
          |SI aTipo = "B";
               |SI FSalida = 0; |BORRA 020#refere2@.a; |FINSI;
          |SINO;
               |SI FSalida ! 0; |GRABA 020#refere2@.b; |FINSI;
               #refere2@#1 = #0#1;
               #refere2@#2 = #0#2;
               #refere2@#3 = #0#3;
               #refere2@#4 = #0#4;
               #refere2@#5 = #0#5;
               #refere2@#6 = #0#6;
               #refere2@#7 = #0#7;
               |GRABA 020#refere2@.a;
          |FINSI;
          |CIERRA #refere2@;
          |DESCARGA_DEF #refere2@;
     |FINSI;
|FPRC;
