|FICHEROS;
     aparz008 #0;
     aparm034 #34;
     aparm032 #32;
|FIN;

|VARIABLES;
     nAntes = 0;
     nModo = 0;
     nConta = 0;
     nSurtidor = 0;
     aAlfa = "";
     {-1}aMenu = "";
     aMenu1 = "2400";
     aMenu2 = "1";
     aMenu3 = "Opciones:";
     aMenu4 = "RAC";
     aMenu5 = " Repasar ";
     aMenu6 = " Aceptar ";
     aMenu7 = " Cancelar ";
|FIN;

|PROCESO Actualiza;
     |DDEFECTO #34;
     |SELECT #4#34;
     #34#3 = #0#0;
     #34#6 = #0#1;
     #34#7 = #0#3;
     #34#1 = #0#5;
     |LEE 000#34=;
     nAntes = #34#4;
     |SELECT #1#34;

     #32#0 = #0#5;
     |LEE 121#32=;
     |SI FSalida = 0;
          #32#2 = #32#2 - #0#7 + nAntes;
          |GRABA 020#32a;
          |LIBERA #32;
          |SI #32#2 < #32#4;
               |SI nSurtidor ! #32#0;
                    nSurtidor = #32#0;
                    aAlfa = "0000Surtidor: '" + #32#0 + "' bajo mínimos...";
                    |MENAV aAlfa;
               |FINSI;
          |FINSI;

          |SI #0#8 = "S";
               |SI #0#7 = 0;
                    |BORRA 020#34c;
               |SINO;
                    |LEE 121#34=;
                    #34#4 = #0#7;
                    #34#5 = #0#7 * #32#5;
                    |GRABA 020#34a;
                    |LIBERA #34;
               |FINSI;
          |SINO;
               |LEE 000#34u;
               |SI FSalida = 0;
                    nConta = #34#0 + 1;
               |SINO;
                    nConta = 1;
               |FINSI;
               |DDEFECTO #34;
               #34#0 = nConta;
               #34#1 = #0#5;
               #34#2 = "G";
               #34#3 = #0#0;
               #34#4 = #0#7;
               #34#5 = #0#7 * #32#5;
               #34#6 = #0#1;
               #34#7 = #0#3;
               |GRABA 020#34n
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE Actualiza;
     #0#2;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Actualiza;
|FIN;

|PROCESO Min;
     #0#0 = "01.01.0000";
     #0#1 = " " * 10;
     #0#3 = "   ";
     #0#5 = 0;
|FPRC;

|PROCESO Max;
     #0#0 = "31.12.9999";
     #0#1 = "z" * 10;
     #0#3 = "zzz";
     #0#5 = 999;
|FPRC;

|PROCESO Tipo0; |TIPO 0;
     |SELECT #4#34;
     #34#3 = #0#0;
     #34#6 = #0#1;
     #34#7 = #0#3;
     #34#1 = #0#5;
     |LEE 000#34=;
     |SI FSalida = 0;
          #0#8 = "S";
          #0#7 = #34#4;
     |SINO;
          #0#8 = "N";
     |FINSI;
|FPRC;

|PROCESO Tipo7; |TIPO 7;
     |SI #0#0 = "01.01.0000";
          #0#0 = ~;
     |FINSI;
|FPRC;

|PROCESO Tipo2; |TIPO 2;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 3; |Y #0#8 = "S";
          |MENAV "0000No se puede borrar, deje los litros a '0'";
          |ERROR;
     |FINSI;
|FPRC;

|PROGRAMA;
     aAlfa = Usuario;
     |NOME_DAT #0 aAlfa; |DELINDEX #0;

     |ABRET #0;
     |ABRE #34;
     |CLS;
     |PINPA #0#0;
     |PARA; |SI aMenu2 = 1; |HACIENDO;
          |ENTLINEAL #1#0, 1, 2, 19, 0, Min, Max;
          |LEE 000#0p;
          |SI FSalida = 0;
               |MENU aMenu;
               aMenu2 = FSalida;
          |SINO;
               aMenu2 = "3";
          |FINSI;
     |SIGUE;
     |CIERRA #34;
     |CIERRAT #0;

     |SI aMenu2 = 2;
          |ABRE #34;
          |ABRE #32;
          |BUCLE Actualiza;
          |CIERRA #32;
          |CIERRA #34;
     |FINSI;
     |DELINDEX #0;
|FPRO;
