|FICHEROS;
     tecaz004 #0;
     tecam005 #5;
     tecam006 #6;
     tecam007 #7;
     tecam008 #8;
     agifa010 #10;
     agifa017 #17;
     agifa019 #19;
     dsm00020 #20;
     agifa071 #71;
     agifa104 #104;
     agifa073 #73;
     agifa024 #24;
     agifa025 #25;
     agifa321 #321;
     agifa324 #324;
     dsm00053 #53;
|FIN;

|VARIABLES;
 {-1}aMenu = "";
     aMenu1 = "2400";
     aMenu2 = "1";
     aMenu3 = " ";
     aMenu4 = "RAC";
     aMenu5 = " Repasar ";
     aMenu6 = " Aceptar ";
     aMenu7 = " Cancelar ";
     nHay = 0;
     aAlfa = "";
     aCli = "";
     nAge = 0;
     &nDeci_IVADiv = 0;
     &enSwMenu = 0;
     &aDivisa = "";
     &aMoneda = "";
     &enForma = 0;
     &enCoste = 0;
     nImpDiv = 0;
     nBultos = 0;
     nLinea = 0;
     nMult = 0;
|FINSI;

|PROCESO tecam008;
     #53#0 = "A";
     #53#1 = #8#1;
     #53#2 = #8#2;
     #53#3 = #8#3;
     #53#4 = 1;
     #53#5 = #8#5;
     |GRABA 020#53n;
|FPRC;

|DEFBUCLE tecam008;
     #8#1;
     ;
     #7#0, #7#1, #7#2, #7#3, -99999;
     #7#0, #7#1, #7#2, #7#3, 99999;
     ;
     NULL, tecam008;
|FIN;

|PROCESO ActPedido;
     #73#43 = #73#43 + #7#8;
     |ABRE #19;
     |ABRE #17;
     #19#0 = #73#2;
     |LEE 121#19=;
     #17#0 = #73#2;
     #17#1 = #73#3;
     |LEE 121#17=;
     #19#15 = #19#15 - #7#8;
     #17#42 = #17#42 - #7#8;
     |GRABA 020#19a;
     |GRABA 020#17a;
     |CIERRA #17;
     |CIERRA #19;
|FPRC;


|PROCESO FinCab;
     |SI aCli ! "";
          |HAZ LimCabAgifa010;
          |BUCLELIN 0 CalCabAgifa010 #10;
          |GRABA 020#10a;
     |FINSI;
|FPRC;

|PROCESO Cabecera;
     |DDEFECTO #24;
     #24#0 = #104#4;
     |LEE 020#24=;

     |DDEFECTO #25;
     #25#0 = #104#7;
     |LEE 020#25=;

     |DDEFECTO #10;
     #10#52 = #104#25;
     #10#0 = 0;
     enSwMenu = 1;
     |HAZ ContaAV7;
     |GRABA 020#10b;
     #10#3 = #104#4;
     #10#4 = #104#8;
     #10#5 = #104#5;
     #10#6 = #104#7;
     #10#7 = #104#6;
     #10#8 = #104#9;

     #20#0 = #6#4;
     |LEE 020#20=;
     #10#9 = #20#1;
     #10#88 = #20#0;

     #10#29 = #104#19;
     #10#30 = #104#14;
     #10#31 = #104#20;
     #10#32 = #104#17;
     #10#33 = #104#21;
     #10#34 = #25#7;
     #10#35 = #24#4;
     #10#36 = #24#47;
     #10#40 = #24#41;
     #10#50 = #24#40;
     #10#51 = #24#28;
     #10#55 = #104#53;
     #10#56 = #104#54;
     #10#57 = #104#55;
     #10#62 = #104#59;
     #10#63 = #24#15;
     #10#68 = #104#35;  ||Divisa
     #10#83 = #104#51;
     #10#91 = #24#206;  ||Rete.

     #324#0 = #10#68;
     |LEE 020#324=;

     #10#69 = #324#2; ||Cambio
     #10#70 = #104#37;
     #10#73 = #321#9; ||Moneda Base

     #324#0 = #10#73;
     |LEE 020#324=;

     #10#74 = #324#2; ||Cambio
     #10#91 = #24#206;

     aDivisa = #10#68;
     aMoneda = #10#70;
     |HAZ Divisas010;
|FPRC;

|PROCESO Linea;
     #10#2 = #10#2 + nBultos;
     nBultos = 0;
     ||ÄÄÄÄ
     |ABRE #19;
     |DDEFECTO #19;
     #19#0 = #7#4;
     |LEE 020#19=;
     |CIERRA #19;

     nLinea = nLinea + 1;
     |DDEFECTO #71;
     #71#29 = #10#52;
     #71#0 = #10#0;
     #71#1 = nLinea;
     |GRABA 000#71b;

     #71#2 = #73#2;
     #71#3 = #73#3;
     #71#4 = #73#4;
     #71#5 = #7#8;
     #71#6 = #73#6;
     #71#8 = #73#8;
     #71#10 = #73#10;
     #71#11 = #73#14;
     #71#12 = #73#0;
     #71#13 = #73#18;
     #71#15 = #104#4;
     #71#16 = #73#17;
     #71#17 = #73#19;
     #71#21 = #73#1;
     #71#27 = #73#27;
     #71#31 = #73#28;
     #71#33 = #73#29;
     #71#36 = #73#38;
     #71#38 = #73#41;
     |HAZ TotalLin71;

     enForma = 1;
     |HAZ AcumulaAV;
     #71#14 = enCoste;
     |GRABA 020#71a;
     |LIBERA #71;
|FPRC;

|PROCESO tecam007;
     #104#25 = #7#1;
     #104#0 = #7#2;
     |LEE 121#104=;

     #73#28 = #7#1;
     #73#0 = #7#2;
     #73#1 = #7#3;
     |LEE 121#73=;

     |SI aCli ! #6#5; |O nAge ! #6#4;
          |HAZ FinCab;
          |HAZ Cabecera;
          nLinea = 0;
          aCli = #6#5;
          nAge = #6#4;
     |FINSI;

     |HAZ ActPedido;
     |HAZ Linea;
     |ABRE #53;
     |BUCLE tecam008;
     |CIERRA #53;

     |GRABA 020#73a;
     |LIBERA #73;

     aDivisa = #104#35;
     aMoneda = #104#37;
     |HAZ Divisas104;
     |HAZ CalCabAgifa104;
     |GRABA 020#104a;
     |LIBERA #104;

     #5#2 = #7#1;
     #5#3 = #7#2;
     #5#0 = #7#0;
     |LEE 121#5=;
     |SI FSalida = 0;
          #5#6 = "A";
          |GRABA 020#5a;
          |LIBERA #5;
     |FINSI;
|FPRC;

|PROCESO tecam006;
     nBultos = #6#16;
|FPRC;

|DEFBUCLE tecam006;
     #6#1;
     ;
     #0#0, #0#2, #0#3;
     #0#0, #0#2, #0#3;
     ;
     NULL, tecam006, tecam007;
|FIN;

|PROCESO Procesa;
     |BUCLE tecam006;
|FPRC;

|PROCESO Ordena;
     #6#0 = #0#0;
     #6#1 = #0#2;
     #6#2 = #0#3;
     |LEE 020#6=;
|FPRC;

|DEFBUCLE Procesa;
     #0#1;
     6;
     00000, 001, "*";
     99999, 999, "*";
     ;
     NULL, Ordena, NULL, NULL, FinCab, Procesa;
     #6#5, #6#4;
|FIN;

|PROCESO tecam005;
     #0#0 = #5#0;
     #0#1 = #5#1;
     #0#2 = #5#2;
     #0#3 = #5#3;
     #0#4 = #5#4;
     #0#5 = #5#5;
     |GRABA 020#0n;
     nHay = 1;
|FPRC;

|DEFBUCLE tecam005;
     #5#1;
     6;
     00000, 001, "D";
     99999, 999, "D";
     ;
     NULL, tecam005;
|FIN;

|PROCESO TeclaF5; |TIPO 11;
     |SI FSalida = 13;
          |SI #0#6 = "*";
               #0#6 = "";
          |SINO;
               #0#6 = "*";
          |FINSI;
          |GRABA 020#0a;
          |PINTA #0#6;
     |FINSI;
|FPRC;

|PROCESO Tecla; |TIPO 0;
     |SI #0Campo = Contenido; |Y FSalida = 0;
          |SI #0#6 = "*";
               #0#6 = "";
          |SINO;
               #0#6 = "*";
          |FINSI;
          |GRABA 020#0a;
          |PINTA #0#6;
     |FINSI;
|FPRC;

|PROCESO Min;
     #0#0 = 1;
     #0#1 = 1;
|FPRC;

|PROCESO Max;
     #0#0 = 99999;
     #0#1 = 999;
|FPRC;

|PROGRAMA;
     |CLS;
     |PINPA #0#0;
     aAlfa = Usuario;
     |NOME_DAT #0 aAlfa;
     |DELINDEX #0;
     |ABRE #0;
     |BUCLE tecam005;
     |CIERRA #0;
     |SI nHay = 0;
          |MENAV "0000No hay registros...";
     |SINO;
          |PARA; |SI aMenu2 = 1; |HACIENDO;
               |ENTLINEAL #1#0, 1, 4, 22, 0, Min, Max;
               |MENU aMenu;
               aMenu2 = FSalida;
          |SIGUE;
          |SI aMenu2 = 2;
               |ABRE #321; |LEE 000#321p; |CIERRA #321;
               |ABRE #324;
               |ABRE #104;
               |ABRET #73;
               |ABRE #20;
               |ABRE #24;
               |ABRE #25;
               |ABRE #10;
               |ABRET #71;
               |ABRE #5;   |SELECT #2#5;
               |ABRE #6;
               |BUCLE Procesa;
               |CIERRA #6;
               |CIERRA #5;
               |CIERRAT #71;
               |CIERRA #10;
               |CIERRA #25;
               |CIERRA #24;
               |CIERRA #20;
               |CIERRAT #73;
               |CIERRA #104;
               |CIERRA #324;
          |FINSI;
     |FINSI;
     |DELINDEX #0;
|FPRO;
