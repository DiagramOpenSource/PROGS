     Partes

|FICHEROS;
     gesiz006 #0;
     gesim010 #10;
     gesim005 #17;
     gesim006 #18;

     &referp2@;
     &referp3@;
|FIN;

|VARIABLES;
     &enPestana = 0;
     &eaCliDoc = "";
     &enModo = 0;
     &enError = 0;
     &eaMatricula = "";
     &eaSerAviso = "";
     &enNumAviso = 0;
     v0 = "000000";
     v1 = "                              ";
     v2 = 0;
     aPath = "";
     nPanta = 0;
     aAlfa = "";
     nRango = 0;
     nPos1 = 0;
     nPos2 = 0;
     nEvtFoco = 0;
     nBtnSalir6 = 0;
     nBtnModi6 = 0;
     nBtnCierra6 = 0;
     nBtnHisMaq6 = 0;
     nBtnAsgMat6 = 0;

     nGrid2 = 0;
     nGrid3 = 0;
|FIN;

|PROCESO EventoFoco6;
     enPestana = 6;
|FPRC;

|PROCESO BtnModi6;
     |LEE 000#referp2@.=;
     |SI FSalida ! 0; |ACABA; |FINSI;

     |SI #referp2@#3 = "C";
          |MENAV "0000Parte cerrado..."; |ACABA;
     |FINSI;

     |ABRE #17;
     #17#0 = #referp2@#0;
     #17#1 = #referp2@#1;
     |LEE 020#17=;
     |CIERRA #17;

     |SALVA_DATOS #referp2@;
     |REPON_DATOS #18;

     enModo = 2; |HAZ EditaParte;

     |SI enError = 0;
          |HAZ NoReindexa;
          #referp2@#1 = 0; |REFRESCACONTROL nGrid3;
          |SALVA_DATOS #18;
          |REPON_DATOS #referp2@;
          |LEE 000#referp2@.=;
          |REFRESCACONTROL nGrid2;
          |PULSATECLA;
     |FINSI;
|FPRC;

|PROCESO BtnCierra6;
     |LEE 000#referp2@.=;
     |SI FSalida ! 0; |ACABA; |FINSI;
     |SI #referp2@#3 = "C";
          |MENAV "0000Parte ya cerrado..."; |ACABA;
     |FINSI;

     |ABRE #17;
     #17#0 = #referp2@#0;
     #17#1 = #referp2@#1;
     |LEE 020#17=;
     |CIERRA #17;

     aAlfa = #referp2@#41; |QBF aAlfa
     |SI aAlfa = "";
          |ABRE #10;
          #10#0 = #17#17;
          |LEE 000#10=;
          |SI FSalida ! 0; |DDEFECTO #10; |FINSI;
          |CIERRA #10;
          |SI #10#13 = "N";
               |MENAV "0000Debe de asignar una m quina..."; |ACABA;
          |FINSI;
     |FINSI;

     |SALVA_DATOS #referp2@;
     |REPON_DATOS #18;

     |HAZ CierraParte;
     |SI enError = 0;
          #referp2@#1 = 0; |REFRESCACONTROL nGrid3;
          |SALVA_DATOS #18;
          |REPON_DATOS #referp2@;
          |LEE 000#referp2@.=;
          |REFRESCACONTROL nGrid2;
          |REFRESCACONTROL nGrid3;
     |FINSI;
|FPRC;

|PROCESO BtnHisMaq6;
     |LEE 000#referp2@.=;
     |SI FSalida ! 0; |ACABA; |FINSI;

     eaMatricula = #referp2@#41;
     eaSerAviso = #referp2@#0;
     enNumAviso = #referp2@#1;
     |HAZ HistoMaquina;
|FPRC;

|PROCESO BtnAsgMat6;
     |LEE 000#referp2@.=;
     |SI FSalida ! 0; |ACABA; |FINSI;

     |ABRE #17;
     #17#0 = #referp2@#0;
     #17#1 = #referp2@#1;
     |LEE 020#17=;
     |CIERRA #17;
     |SALVA_DATOS #referp2@;
     |REPON_DATOS #18;
     |HAZ AsignaMatriPar;
     |SI enError = 0;
          |REFRESCACONTROL nGrid3;
          |REFRESCACONTROL nGrid2;
     |FINSI;
|FPRC;

|PROCESO Evento62;
     |SI FSalida = 1; |O FSalida = 2;
          |LEE 000#referp2@.=;
          |SI FSalida = 0;
               eaCliDoc = #referp2@#39;
               #0#6 = #referp2@#12;
               #0#7 = #referp2@#13;
               #0#8 = #referp2@#14;

               #0#9 = #referp2@#44;
               #0#10 = #referp2@#45;
               #0#11 = #referp2@#46;
               #0#12 = #referp2@#47;
               #0#13 = #referp2@#48;
               #0#14 = #referp2@#49;
               #0#15 = #referp2@#50;
               #0#16 = #referp2@#51;
               #0#17 = #referp2@#52;
               #0#18 = #referp2@#53;
               #0#19 = #referp2@#54;
               #0#20 = #referp2@#55;
               #0#21 = #referp2@#56;
               #0#22 = #referp2@#57;
               #0#23 = #referp2@#58;
               #0#24 = #referp2@#59;
               #0#25 = #referp2@#60;
               #0#26 = #referp2@#61;
          |SINO;
               #0#6 = "";
               #0#7 = "";
               #0#8 = "";

               #0#9 = "";
               #0#10 = "";
               #0#11 = "";
               #0#12 = "";
               #0#13 = "";
               #0#14 = "";
               #0#15 = "";
               #0#16 = "";
               #0#17 = "";
               #0#18 = "";
               #0#19 = "";
               #0#20 = "";
               #0#21 = "";
               #0#22 = "";
               #0#23 = "";
               #0#24 = "";
               #0#25 = "";
               #0#26 = "";
          |FINSI;
          |PINPA #5#0;
          |PINTA 509, #0#6;
          |PINTA 609, #0#7;
          |PINTA 709, #0#8;
          |HAZ PinCam6;
          |REFRESCACONTROL nGrid3;
     |FINSI;
|FPRC;

|PROCESO Evento63;
     |SI FSalida = 1; |O FSalida = 2;
          |LEE 000#referp3@.=;
     |FINSI;
|FPRC;

|PROCESO Min62;
     #referp2@#0 = "     ";
     #referp2@#1 = 000000;
     #referp2@#2 = 1;
     #referp2@#39 = #0#0;
     #referp2@#41 = #0#1;
     #referp2@#10 = #0#2;
     |SI #0#0 = "000000"; #referp2@#39# = "      "; |FINSI;
|FPRC;

|PROCESO Max62;
     #referp2@#0 = "zzzzz";
     #referp2@#1 = 999999;
     #referp2@#2 = 999;
     #referp2@#39 = #0#0;
     #referp2@#41 = #0#1;
     #referp2@#10 = #0#2;
     |SI #0#0 = "000000"; #referp2@#39# = "zzzzzz"; |FINSI;
     |SI #0#1 = "                              "; #referp2@#41# = "zzzzzzzzzzzzzzzzzzzzzzzzzzzzzz"; |FINSI;
     |SI #0#2 = 0; #referp2@#10# = 99999; |FINSI;
|FPRC;

|PROCESO Min63;
     #referp3@#0 = #referp2@#0;
     #referp3@#1 = #referp2@#1;
     #referp3@#2 = #referp2@#2;
     #referp3@#3 = 1;
|FPRC;

|PROCESO Max63;
     #referp3@#0 = #referp2@#0;
     #referp3@#1 = #referp2@#1;
     #referp3@#2 = #referp2@#2;
     #referp3@#3 = 999;
|FPRC;

|PROCESO Actualiza6;
     |DESTRUYECONTROL nGrid2;

     |PINPA #5#0; nPanta = FSalida;
     nRango = 4 + 8 + 16 + 32;
     nPos1 = 0902;
     nPos2 = 2098;

     |SI #0#0 ! v0;
          |SI #0#1 ! v1;
               |LINEAL_SIMPLE #2#referp2@, nRango, nPos1, nPos2, Min62, Max62, Evento62;
          |SINO;
               |LINEAL_SIMPLE #3#referp2@, nRango, nPos1, nPos2, Min62, Max62, Evento62;
          |FINSI;
     |SINO;
          |SI #0#1 ! v1;
               |SI #0#0 ! v0;
                    |LINEAL_SIMPLE #4#referp2@, nRango, nPos1, nPos2, Min62, Max62, Evento62;
               |SINO;
                    |LINEAL_SIMPLE #5#referp2@, nRango, nPos1, nPos2, Min62, Max62, Evento62;
               |FINSI;
          |SINO;
               |SI #0#0 ! v0;
                    |LINEAL_SIMPLE #6#referp2@, nRango, nPos1, nPos2, Min62, Max62, Evento62;
               |SINO;
                    |LINEAL_SIMPLE #7#referp2@, nRango, nPos1, nPos2, Min63, Max62, Evento62;
               |FINSI;
          |FINSI;
     |FINSI;
     nGrid2 = FSalida;
     #referp2@#1 = 0; |REFRESCACONTROL nGrid3;
     |REFRESCACONTROL nGrid2;
|FPRC;

|PROCESO PinCam6;
     |PINPA #5#0;
     |PINTA 1409, #0#6;
     |PINTA 1509, #0#7;
     |PINTA 1609, #0#8;

     |PINTA 3125, #0#9;
     |PINTA 3147, #0#10;
     |PINTA 3159, #0#11;
     |PINTA 3171, #0#12;
     |PINTA 3184, #0#13;
     |PINTA 3193, #0#14;

     |PINTA 3225, #0#15;
     |PINTA 3247, #0#16;
     |PINTA 3259, #0#17;
     |PINTA 3271, #0#18;
     |PINTA 3284, #0#19;
     |PINTA 3293, #0#20;

     |PINTA 3325, #0#21;
     |PINTA 3347, #0#22;
     |PINTA 3359, #0#23;
     |PINTA 3371, #0#24;
     |PINTA 3384, #0#25;
     |PINTA 3393, #0#26;
|FPRC;

|PROCESO PintaPan6;
     |DDEF aPath;
     aAlfa = aPath + "gesim006"; |CARGA_DEF aAlfa, referp2@;
     aAlfa = aPath + "gesim007"; |CARGA_DEF aAlfa, referp3@;
     |ABRET #referp2@;
     |ABRET #referp3@;

     |PINPA #5#0; nPanta = FSalida;
     nRango = 4 + 8 + 16 + 32;
     nPos1 = 2102;
     nPos2 = 2998;
     |LINEAL_SIMPLE #1#referp3@, nRango, nPos1, nPos2, Min63, Max63, Evento63;
     nGrid3 = FSalida;
/*
     nRango = 4 + 8 + 16 + 32;
     nPos1 = 0902;
     nPos2 = 2498;
     |LINEAL_SIMPLE #1#referp2@, nRango, nPos1, nPos2, Max62, Min62, Evento62;
     nGrid2 = FSalida;
*/
     |CONTROL_SIMPLE nPanta, "EVENTOPAN", 0000, 0000, EventoFoco6;
     nEvtFoco = FSalida;

     |CONTROL_SIMPLE nPanta, "BOTON,Modificar", 0801, 0813, BtnModi6;
     nBtnModi6 = FSalida;
     |CONTROL_SIMPLE nPanta, "BOTON,Cerrar", 0814, 0826, BtnCierra6;
     nBtnCierra6 = FSalida;
     |CONTROL_SIMPLE nPanta, "BOTON,Histo. Maq.", 0827, 0839, BtnHisMaq6;
     nBtnHisMaq6 = FSalida;
     |CONTROL_SIMPLE nPanta, "BOTON,Asig. Maq.", 0840, 0852, BtnAsgMat6;
     nBtnAsgMat6 = FSalida;

     |CONTROL_SIMPLE nPanta, "BOTON,{{207}} Salir", 3688, 3698, BtnSalir;
     nBtnSalir6 = FSalida;

     |PINTA 509, #0#6;
     |PINTA 609, #0#7;
     |PINTA 709, #0#8;
     |HAZ PinCam6;
|FPRC;

|PROCESO DestruyePan6;
/*
     |DESTRUYECONTROL nGrid2;
     |DESTRUYECONTROL nGrid3;

     |FIN_CONTROL_WINDOWS nEvtFoco;
     |FIN_CONTROL_WINDOWS nBtnModi6;
     |FIN_CONTROL_WINDOWS nBtnCierra6;
     |FIN_CONTROL_WINDOWS nBtnHisMaq6;
     |FIN_CONTROL_WINDOWS nBtnAsgMat6;

     |FIN_CONTROL_WINDOWS nBtnSalir6;
*/

     |CIERRAT #referp3@;
     |CIERRAT #referp2@;
     |DESCARGA_DEF #referp3@;
     |DESCARGA_DEF #referp2@;
|FPRC;
