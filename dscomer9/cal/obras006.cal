|FICHEROS;
      obras006 #0; ||lineas Presupuesto.
      obras202 #1; ||Bloques.
      obras203 #2; ||Plantas.
      obras204 #3; ||Pisos.
      agifa048 #4; ||Escandallos...
|FIN;

|VARIABLES;
     &EURODB = 0;
|FIN;

|PROCESO pide;  |TIPO 0;

      #0#4 = #0#4 > " ";
      |PINTA #0#4;

     |SI #0#4 ! "OB"; |Y #0#4 ! "BL"; |Y #0#4 ! "PL"; |Y #0#4 ! "PI";
         #0#4="OB";
         |PINTA #0#4;
     |FINSI;

      |SI #0#4  = "OB";
          #0#9  = "000";
          #0#10 = "000";
          #0#11 = "000";
      |FINSI;

      |SI #0#4 = "BL";
         |PUSHV 1629 2044;
         |CUADRO 16292044;
         |PINTA 1730, "              ";
         |PINTA 1830, "              ";
         |PINTA 1930, "              ";
         |PINTA 1731, "Bloque.:";
         |HAZ pidebl;
         |POPV;
      |FINSI;

      |SI #0#4 = "PL";
         |PUSHV 1629 2044;
         |CUADRO 16292044;
         |PINTA 1730, "              ";
         |PINTA 1830, "              ";
         |PINTA 1930, "              ";
         |PINTA 1731, "Bloque.:";
         |PINTA 1831, "Planta.:";
         |HAZ pidebl;
         |HAZ pidepl;
         |POPV;
      |FINSI;

      |SI #0#4 = "PI";
         |PUSHV 1629 2044;
         |CUADRO 16292044;
         |PINTA 1730, "              ";
         |PINTA 1830, "              ";
         |PINTA 1930, "              ";
         |PINTA 1731, "Bloque.:";
         |PINTA 1831, "Planta.:";
         |PINTA 1931, "Piso...:";
         |HAZ pidebl;
         |HAZ pidepl;
         |HAZ pidepi;
         |POPV;
      |FINSI;
|FPRC;

|PROCESO nomodifi;
         |CAMPO_MODIFICA #0#9,  1 , "N";
         |CAMPO_VISUAL   #0#9,  1 , "N";
         |CAMPO_MODIFICA #0#10, 1 , "N";
         |CAMPO_VISUAL   #0#10, 1 , "N";
         |CAMPO_MODIFICA #0#11, 1 , "N";
         |CAMPO_VISUAL   #0#11, 1 , "N";
|FPRC;

|PROCESO pidebl;
         |HAZ nomodifi;
         |CAMPO_POSICION #0#9, 1 , 1740;
         |CAMPO_MODIFICA #0#9, 1 , "S";
         |CAMPO_VISUAL   #0#9, 1 , "S";
         |PINTA #0#9;
         |ENCAMPO #9#0;
         |CAMPO_POSICION #0#9, 1 , 1526;
         |HAZ nomodifi;
|FPRC;

|PROCESO pidepl;
         |HAZ nomodifi;
         |CAMPO_POSICION #0#10, 1 , 1840;
         |CAMPO_MODIFICA #0#10, 1 , "S";
         |CAMPO_VISUAL   #0#10, 1 , "S";
         |PINTA #0#10;
         |ENCAMPO #10#0;
         |CAMPO_POSICION #0#10, 1 , 1526;
         |HAZ nomodifi;
|FPRC;

|PROCESO pidepi;
         |HAZ nomodifi;
         |CAMPO_POSICION #0#11, 1 , 1940;
         |CAMPO_MODIFICA #0#11, 1 , "S";
         |CAMPO_VISUAL   #0#11, 1 , "S";
         |PINTA #0#11;
         |ENCAMPO #11#0;
         |CAMPO_POSICION #0#11, 1 , 1526;
         |HAZ nomodifi;
|FPRC;

|PROCESO nodeja; |TIPO 13;
     |HAZ nomodifi;
|FPRC;

|PROCESO sacapre; |TIPO 0;
     |ABRE #4;
     #4#0 = #0#5;
     |LEE 000#4=;
     |SI FSalida ! 0; |CIERRA #4; |ACABA; |FINSI;
     #0#8 = #4#9;
     |PINTA #0#8;
     |CIERRA #4;
|FPRC;

|PROCESO sacap;
  |SI FSalida = 9;
    |PUSHV 0501 2380;
    |ENTLINEAL #1#3, 4 , 4 , 11 , 1, menosp , masp;
    #0#11 = #3#3;
    |POPV;
    |PINTA #0#11;
  |FINSI;
|FPRC;

|RUTINA menosp;
     #3#0 = #0#0;
     #3#1 = #0#9;
     #3#2 = #0#10;
     #3#3 = 1;
|FRUT;

|RUTINA masp;
     #3#0 = #0#0;
     #3#1 = #0#9;
     #3#2 = #0#10;
     #3#3 = 999;
|FRUT;

|PROCESO sacal;
  |SI FSalida = 9;
    |PUSHV 0501 2380;
    |ENTLINEAL #1#2, 3 , 4 , 11 , 1, menosl , masl;
    #0#10 = #2#2;
    |POPV;
    |PINTA #0#10;
  |FINSI;
|FPRC;

|RUTINA menosl;
     #2#0 = #0#0;
     #2#1 = #0#9;
     #2#2 = 1;
|FRUT;

|RUTINA masl;
     #2#0 = #0#0;
     #2#1 = #0#9;
     #2#2 = 999;
|FRUT;

|PROCESO sacab;
  |SI FSalida = 9;
    |PUSHV 0501 2380;
    |ENTLINEAL #1#1, 2 , 4 , 11 , 1, menosb , masb;
    #0#9 = #1#1;
    |POPV;
    |PINTA #0#9;
  |FINSI;
|FPRC;

|RUTINA menosb;
     #1#0 = #0#0;
     #1#1 = 1;
|FRUT;

|RUTINA masb;
     #1#0 = #0#0;
     #1#1 = 999;
|FRUT;
