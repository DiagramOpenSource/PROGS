|FICHEROS;
   dsdocume #0;

   dsdocuav #10;
|FIN;

|VARIABLES;
   aAlfa = "";

   nContador = 0;
|FIN;

|PROCESO RegsAv;
|FPRC;

|DEFBUCLE RegsAv;
#dsdocuav#1;
;
INICIO;
FINAL;
;
NULL, RegsAv;
|FIN;

|PROGRAMA;
   || Compruebo si puedo entrar al proceso o hay alguien funcionando.
   |ABRE #dsdocume;
   |LEE 000#dsdocume.p;
   |SI FSalida = 0;
      nContador = #dsdocume#1;
      |PARA nCont = 1; |SI nCont = 10; |HACIENDO nCont = nCont + 1;
         |SLEEP 1;
         |SI nContador ! #dsdocume#1; nCont = 1; |FINSI;
         |LEE 000#dsdocume.p;
         |SI FSalida ! 0; |SAL; |FINSI;
      |SIGUE;
      |LEE 000#dsdocume.p;
      |SI FSalida = 0; |Y nContador = #dsdocume#1; || Tarea bloqueada

      |FINSI;
   |FINSI;

   ||Bloqueo el pase
   |DDEFECTO #dsdocume;
   |GRABA 020#dsdocume.n;

   aAlfa = PARAMETRO; |QBF aAlfa; || Camino completo al fichero puente
   |NOME_DAT #dsdocuav#aAlfa#;
   |ABRE #dsdocuav;
   |BUCLE RegsAv;
   |CIERRA #dsdocuav;

   |LEE 000#dsdocume.p;
   |SI FSalida = 0; |BORRA 020#dsdocume.a; |FINSI;
   |CIERRA #dsdocume;
|FPRO;
