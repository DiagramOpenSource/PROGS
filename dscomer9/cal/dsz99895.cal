|FICHEROS;
     agifa019 #0,MANTE;
|FIN;

|VARIABLES;
     aAlfa = "";
     aArti = "";
     aCB = "";
     nNume = 0;
     aPos = "";
|FIN;

|PROGRAMA;
     aAlfa = PARAMETRO;  || articulo + tab + cod.barras

     aArti = aAlfa - &9;
     |SI FSalida > 0;
          aPos = FSalida - "01";
          nNume = aPos;
          nNume = nNume + 1;
          aCB = aAlfa % nNume;
          nNume = nNume  - 2 + 100;
          aArti = aAlfa % nNume;
     |SINO;
          aArti = aAlfa;
     |FINSI;

     |DDEFECTO #0;
     |ABRE #0;
     #0#0 = aArti;
     |LEE 000#0=;
     |SI FSalida = 0;
          |PUSHV 0501 2380;
          |LEE 121#0=;
          |PINPA #0#0;
          |PINDA #0#0;
          |ENDATOS #2#0;
          |SI FSalida = 0;
               |GRABA 020#0a;
          |FINSI;
          |POPV;
     |SINO;
          |SI aCB = "";
               #0#128 = #0#0; || CB
          |SINO;
               #0#128 = aCB;
          |FINSI;

          |HAZ EsCongecar;
          |SI FSalida = 0;
               #0#134 = #0#0
          |FINSI;

          |PUSHV 0501 2380;
          |CLS;
          |PINPA #0#0;
          |PINDA #0#0;
          |CONFI "0000SConfirma alta (S/N):";
          |SI FSalida = 0;
               |GRABA 020#0b;
               |ENDATOS #1#0;
               |SI FSalida = 0;
                    |GRABA 020#0a;
               |SINO;
                    |BORRA 020#0c;
               |FINSI;
          |FINSI;
          |POPV;
     |FINSI;
     |CIERRA #0;
|FPRO;
