|FICHEROS;
     conz0006 #0;
     agifa010 #10;
     agifa071 #71;
     con00612 #612;
     con00626 #626;
     conp0626 #1626;
     con00683 #683;
|FIN;

|VARIABLES;
     aArticulo = "";
     nLinea = 0;
     nEmp1 = 0;
     nEmp2 = 0;
     nEmp3 = 0;
     aEmp1 = "";
     aEmp2 = "";
     aEmp3 = "";
     direc1 = "";
     direc = "";

|FIN;

|PROCESO agifa071;
     |SI #71#2 = aArticulo; |Y nLinea = 0;
          nLinea = #71#1;
     |FINSI;
|FPRC;

|DEFBUCLE agifa071;
     #71#1;
     ;
     #10#52, #10#0, 001;
     #10#52, #10#0, 999;
     ;
     NULL, agifa071;
|FIN;

|PROCESO BuscaLinPres;
     aArticulo = #1626#2;
     nLinea = 0;
     |BUCLE agifa071;
     |SI nLinea ! 0;
          #1626#24 = #10#52;
          #1626#25 = #10#0;
          #1626#26 = nLinea;
          |GRABA 020#1626a;
     |FINSI;
     |LIBERA #1626;
|FPRC;

|DEFBUCLE BuscaLinPres;
     #1626#1;
     ;
     #612#2, #612#3, 0001;
     #612#2, #612#3, 9999;
     be;
     NULL, BuscaLinPres;
|FIN;

|PROCESO BuscaLinOrd;
     aArticulo = #626#2;
     nLinea = 0;
     |BUCLE agifa071;
     |SI nLinea ! 0;
          #626#25 = #10#52;
          #626#26 = #10#0;
          #626#27 = nLinea;
          |GRABA 020#626a;
     |FINSI;
     |LIBERA #1626;
|FPRC;

|DEFBUCLE BuscaLinOrd;
     #626#1;
     ;
     #612#2, #612#3, 0001;
     #612#2, #612#3, 9999;
     be;
     NULL, BuscaLinOrd;
|FIN;

|PROCESO agifa010;
     #612#0 =  #10#52;
     #612#1 = #10#0;
     |LEE 000#612=;
     |SI FSalida ! 0; |ACABA; |FINSI;

     nEmp1 = #683#2; nEmp2 = #683#7; nEmp3 = #683#8;
     aEmp1 = ("00000" + nEmp1) % -105;
     aEmp2 = ("00000" + nEmp2) % -105;
     aEmp3 = ("00000" + nEmp3) % -105;
     |SI nEmp1 ! 0; |Y #683#3 = #10#3; |O #683#4 = #10#3; |O #683#5 = #10#3;
          |DFICE direc1;     ||empresa origen
          |SI #10#3 = #683#3;
                  |DFICB direc;
                  direc = direc + aEmp1 + "/";    ||empresa destino
          |FINSI;
          |SI #10#3 = #683#4;
                  |DFICB direc;
                  direc = direc + aEmp2 + "/";    ||empresa destino
          |FINSI;
          |SI #10#3 = #683#5;
                  |DFICB direc;
                  direc = direc + aEmp3 + "/";    ||empresa destino
          |FINSI;

          |PATH_DAT #626 direc;
          |PATH_DAT #1626 direc;

          |SI #612#3 ! "      ";
               |SI #10#52 = "PP   ";
                    |BUCLE BuscaLinPres;
               |SINO;
                    |BUCLE BuscaLinOrd;
               |FINSI;
          |FINSI;

         |PATH_DAT #626 direc1;
         |PATH_DAT #1626 direc1;

     |FINSI;
|FPRC;

|DEFBUCLE agifa010;
     #10#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, agifa010;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |ABRE #683; |LEE 000#683p; |CIERRA #683;
     |ABRE #612;
     |BUCLE agifa010;
     |CIERRA #612;
|FPRC;
