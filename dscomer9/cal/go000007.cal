|FICHEROS;
     go000007 #0;
     agifv030 #3;
     agifa019 #19;
     agifa017 #17;
||     agifv030 #30;
     dsm00043 #43;
     dsm00044 #44;
     dsm00056 #56;
     dsm00057 #57;
     agifa065 #65;
     go000004 #120;
     go000005 #121;
|FIN;

|VARIABLES;
     &efFecha1 = @;
     &efFecha2 = @;
     fFecha = @;
     dArt = "                    ";
     hArt = "zzzzzzzzzzzzzzzzzzzz";
     nUni = 0;
     aActS = "";
     aActN = "";
     nDAlma = 0;
     nHAlma = 0;
     &nDeci_PreBaseMx = 0;
     &nDeci_PreBase = 0;
     &eaProve  = "";
     &enForma  = 1;
     &enCodigo = 0;
     nSw       = 0;
     nNum      = 0;
     nLin      = 0;
|FIN;
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|PROCESO dsm00121;
     #121#9 = "S";
     |GRABA 020#121a;

     |ABRE #19;
     #19#0 = #121#1;
     |LEE 000#19=;
     |CIERRA #19;
     |SI #19#137 = "N"; |ACABA; |FINSI;

     |SI #121#6 = 0;
          |LIBERA #121;
          |ACABA;
     |FINSI;
     nLin = nLin + 1;
     |DDEFECTO #44;
     #44#21 = #43#4;
     #44#18 = #43#0;
     #44#8 = nLin;

     |SI #121#6 > 0;
          #44#7 = "E";
          #44#4 = #121#6;
     |SINO;
          #44#7 = "S";
          #44#4 = -#121#6;
     |FINSI;
     #44#0 = #121#1;
     #44#1 = #121#3;
     #44#2 = #121#2;
     #44#5 = #43#1;

     enCodigo = #44#18;
     |HAZ AcumulaES_SS;

     #44#3 = #17#39;            || Disponible que queda
     #44#19 = #17#5;

     |GRABA 020#44n;

     #3#0 = "I";
     #3#1 = #44#1;
     #3#2 = #43#1;
     #3#3 = #43#4;
     #3#4 = #43#0;
     |LEE 000#3=;
     |SI FSalida ! 0; |GRABA 020#3n; |FINSI;

     #121#10 = nLin;
     |GRABA 020#121a;
     |LIBERA #121;
|FPRC;

|PROCESO FinCab;
     nSw = 1;
     |CIERRA #3;
     |CIERRA #43;
     |CIERRA #44;
|FPRC;

|DEFBUCLE dsm00121;
     #121#1;
     9;
     nDAlma, #120#0, "                    ", "N";
     nHAlma, #120#0, "zzzzzzzzzzzzzzzzzzzz", "N";
     be;
     NULL, dsm00121;
|FIN;

|PROCESO Ini;
     nNum = #120#7;
     |SI #120#1 = "S";
          |ACABA;
     |FINSI;

     |ABRE #3;
     |ABRE #43;
     |ABRE #44;
     #43#4 = #0#3;      ||SERIE
     #43#0 = 999999;
     |LEE 000#43];
     |SI FSalida = 0;
          |LEE 000#43a;
     |SINO;
          |LEE 000#43u;
     |FINSI;
     |SI FSalida = 0; |Y #43#4 = #0#3;
          nNum = #43#0 + 1;
     |SINO;
          nNum = 1;
     |FINSI;
     |DDEFECTO #43;
     #43#0 = nNum;
     #43#1 = #0#0;
     #43#4 = #0#3;
     #43#2 = "REGULARIZACION INVENTARIO";
     |GRABA 020#43b;
     |BUCLE dsm00121;
     |HAZ FinCab;

     #120#1 = "S";
     #120#5 = #43#4;
     #120#6 = #43#0;
     |GRABA 020#120a;
     |LIBERA #120;
|FPRC;

|DEFBUCLE dsm00120;
     #120#1;
     ;
     #0#4, #0#0;
     #0#4, #0#0;
     be;
     NULL, Ini;
|FIN;

컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|PROCESO Tipo_3; |TIPO 3;
     nDAlma = #0#4;
     nHAlma = #0#4;

     |HAZ DecimalesBase;
     nDeci_PreBaseMx = nDeci_PreBase;

     |SI #0#1 = "SI";
          |ABRE #120;
          #120#4 = #0#4;
          #120#0 = #0#0;
          |LEE 000#120=;
          |CIERRA #120;

          |SI #120#1 = "S";
               |MENSA "0000EL INVENTARIO ESTA ACTUALIZADO";
               |ACABA;
          |FINSI;

          |BUCLE dsm00120;

          |SI nSw = 0;
               |MENAV "0000Este Inventario esta actualizado...";
          |FINSI;
     |FINSI;
|FPRC;
