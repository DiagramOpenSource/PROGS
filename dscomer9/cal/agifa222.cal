|FICHEROS;
     agifa222 #0;
     agifa019 #1;   || Articulos.
     agifa017 #2;   || Stock Almacenes.
     agifa029 #3;   || Almacenes.
     dsm00004 #904;
     dsm00010 #910;
     dsm00015 #915;
     dsm00016 #916;
|FIN;

|VARIABLES;
     &eaArticulo = "";
     aCod1 = "";
     aCod2 = "";
     aCod3 = "";
|FIN;

|PROCESO Llena222; |TIPO 6;
     eaArticulo = #0Campo;
     |HAZ LlenaArticulo;
     |SI FSalida = 0;
          #0Campo = eaArticulo;
          |PINTA #0Campo;
     |SINO;
          |ERROR; |ACABA;
     |FINSI;
|FPRC;

|PROCESO dsm00016;
     |DDEFECTO #904;
     #904#0 = #2#0;
     #904#1 = #2#1;
     #904#2 = #916#3;
     |LEE 000#904=;
     |SI FSalida ! 0;
          |GRABA 020#904n;
     |FINSI;
|FPRC;

|DEFBUCLE dsm00016;
     #916#1;
     ;
     #915#0, #915#1, #915#2, #915#5, "      ";
     #915#0, #915#1, #915#2, #915#5, "zzzzzz";
     ;
     NULL, dsm00016;
|FIN;

|PROCESO dsm00015;
     |BUCLE dsm00016;
|FPRC;

|DEFBUCLE dsm00015;
     #915#1;
     ;
     #1#177, aCod2, aCod2, aCod2;
     #1#177, aCod3, aCod3, aCod3;
     ;
     NULL, dsm00015;
|FIN;

|CALCULO graba;|TIPO 0;
     #3#0 = #0#2;
     |LEE 000#3=;
     #2#0 = #1#0;
     #2#1 = #0#2;
     |LEE 000#2=;
     |SI FSalida ! 0;
          |DDEFECTO #2;
          #2#0 = #1#0;
          #2#1 = #0#2;
          |GRABA 021#2b;
     |FINSI;
     #2#40 = #1#1;
     #2#41 = #3#1;
     |GRABA 021#2a;
     |LIBERA #2;
     |SI #910#19 = "S"; |Y #910#44 = "T"; |Y #1#176 = "S";
          aCod1 = #1#177;
          |ABRE #904;
          |BUCLE dsm00015;
          |CIERRA #904;
     |FINSI;
|FCAL;

|DEFBUCLE genera;
     #1#1;
     ;
     #0#0;
     #0#1;
     be;
     NULL,graba;
|FIN;

|CALCULO genealma;|TIPO 3;
     |ABRE #910; |LEE 000#910p; |CIERRA #910;
     aCod2 = " " * 20;
     aCod3 = "z" * 20;

     |SI #0#3 = "SI";
          |ABRE #0;
          |ABRE #1;
          |ABRE #2;
          |ABRE #3;
          |BUCLE genera;
          |CIERRA #0;
          |CIERRA #1;
          |CIERRA #2;
          |CIERRA #3;
     |FINSI;
|FCAL;
