|FICHEROS;
     palm0001 #0;  ||Este Def.
     ||-------------------------------------- Ficheros Trabajo.
     palm0002 #1;  ||Clientes Resumido.
     palm0003 #2;  ||Articulos Resumido.
     palm0005 #4;  ||Temporal Pedidos.
     ||-------------------------------------- Ficheros.
     agifa024 #10; ||Clientes.
     agifa019 #20; ||Articulos.
     agifa104 #44; ||Pedidos (C).
|FIN;

|VARIABLES;
     {-1}vPopup = "";
          vPopup1 = "0105";
          vPopup2 = "2399";
          vPopup3 = "0000";
          vPopup4 = "IMPRESION PEDIDOS";
     &ser_ped = "";
     &num_ped = 0;
     nSal = 0;
     ||----------------
     {-1}pvisual = "";
     dll = "dsacpferia1.dll";
     mortrar = "0";
     aArtSelect="";
|FIN;

|PROCESO Especifica;
Ipvisual = dll<-;
aArtSelect="";
|ESPECIFICA "INTERFACE_VISUAL",pvisual;
|FPRC;

||--------------------------- PROCESO CARGA FICHEROS TRABAJO.........
|PROCESO por00025;
     |DDEFECTO #2;
     #2#0 = #20#0;   ||Codigo Articulo
     #2#1 = #20#1;   ||Descripcion
     #2#2 = #20#4;   ||Unidades Minimo
     #2#3 = #20#18;  ||Precio PVP-1
     #2#4 = #20#128; ||Codigo Barras
     #2#5 = #20#104; ||Stok Total.
     |GRABA 020#2n;
|FPRC;

|DEFBUCLE por00025;
     #20#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL,por00025;
|FIN;

|PROCESO agifa024;
     #1#0 = #10#0;
     #1#1 = #10#2;
     |GRABA 020#1n;
|FPRC;

|DEFBUCLE agifa024;
     #10#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL,agifa024;
|FIN;

|PROGRAMA;
     dll = PARAMETRO;
     |DELINDEX #4;
     |ABRE #4;
     |CIERRA #4;
     |ABRE #1;
     |LEE 000#1p;
     |SI FSalida ! 0;
          |BUCLE agifa024;
     |FINSI;
     |CIERRA #1;
     |ABRE #2;
     |LEE 000#2p;
     |SI FSalida ! 0;
          |BUCLE por00025;
     |FINSI;
     |CIERRA #2;
     |HAZ Especifica;
|FPRO;

|PROCESO &Pedido;
     |SUB_EJECUTA "palm0004";
     |DELINDEX #4;
     |ABRE #4;
     |CIERRA #4;
|FPRC;

|PROCESO &CargaDat;
     |DELINDEX #1;
     |ABRE #1;
     |BUCLE agifa024;
     |CIERRA #1;
     |DELINDEX #2;
     |ABRE #2;
     |BUCLE por00025;
     |CIERRA #2;
|FPRC;

|PROCESO &GestiPed;
     |PUSHV 0101 2380;
/*
     IvPopup = vPopup1<-;
     vPopup1 = "0105";
     vPopup2 = "2399";
     vPopup3 = "0001";
     vPopup4 = "IMPRIMIR PEDIDOS";
     |ESPECIFICA "POPUPMODE",vPopup;
*/

     |ABRE #44;
     |CONSULTA_F_CLAVE #1#44,minIP,maxIP;
     nSal = FSalida;
/*
     IvPopup = vPopup1<-;
     |ESPECIFICA "FIN_POPUPMODE",vPopup;
*/
     |POPV;
     |SI nSal = 0;
          ser_ped = #44#25;
          num_ped = #44#0;
          |SUB_EJECUTA_NP "agifa105.run;marhv105";
     |FINSI;
     |CIERRA #44;
|FPRC;

|RUTINA minIP;
     #44#25 = "P1   ";
     #44#0  = 000001;
|FRUT;

|RUTINA maxIP;
     #44#25 = "P9   ";
     #44#0  = 999999;
|FRUT;
