|FICHEROS;
     vigz0041 #0; || alba0025 #0;
     vigm0012 #1; || piens075 #1;   ||Fabricaciones Lineas
     vigm0011 #2; || piens074 #2;   ||Fabricaciones Cabecera
     agifa019 #3;
|FIN;

|VARIABLES;
     informe   = "vigz0041";
     fecha     = @;
     orden     = 0;
     sw        = 0;
     &despien  = "";
     &swlis    = 0;
     &tt1      = 0;
     &tt2      = 0;
     &tt3      = 0;
|FIN;

|CALCULO pasa_fabr;
     |DDEFECTO #2;
     #2#0 = #1#0;
     |LEE 000#2=;

     despien = "";
     |SI #2#1 ] #0#10;|Y #2#1 [ #0#11;
         |SI #2#2 ] #0#8;|Y #2#2 [ #0#9;
             |SI #2#7 ] #0#6;|Y #2#7 [ #0#7;
                 |DDEFECTO #3;
                 #3#0 = #2#2;
                 |LEE 000#3=;
                 |SI FSalida = 0;
                     despien = #3#1;
                 |FINSI;

                 |SI orden ! #2#0;|O sw = 0;
                     |SI sw ! 0;
                         swlis = 3;
                         |PRINT;
                         swlis = 0;
                         tt3 = 0;
                     |FINSI;
                     sw = 1;
                     orden = #2#0;
                     swlis = 1;
                     |PRINT;
                     swlis = 0;
                     tt1 = tt1 + #2#3;
                 |FINSI;
                 |PRINT;
                 tt2 = tt2 + #1#4;
                 tt3 = tt3 + #1#4;
             |FINSI;
         |FINSI;
     |FINSI;
|FCAL;

|DEFBUCLE lee_fabr;
     #1#1;
     2;
     0        ,   0 , #0#2;
     99999999 , 999 , #0#3;
     be;
     NULL,pasa_fabr;
|FIN;

|CALCULO alba0025;|TIPO 3;
     |SI #0#4 = "SI";
         |IMPRE 0;
         |SI FSalida = 0;
             |INFOR informe;
             |SI FSalida = 0;
                 |ABRE #2;
                 |ABRE #3;
                 |BUCLE lee_fabr;
                 |CIERRA #2;
                 |CIERRA #3;
                 swlis = 3;
                 |PRINT;
                 swlis = 0;
                 |PIEINF;
             |FINSI;
             |FININF;
         |FINSI;
         |FINIMP;
     |FINSI;
|FCAL;
