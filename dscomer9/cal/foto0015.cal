|FICHEROS;
     foto0015 #0;
     foto0016 #1;
     agifa019 #2;
     agifa024 #3;
     foto0026 #10;
     agifa321 #321;
     agifa324 #324;
     foto0042 #4;
|FIN;

|VARIABLES;
     Modo=0;
     Hora="";
     encontrado=0;
     &nDeci_sob = 2;
     &nDeci_sob1= 4;
     &nNumlin = 0;
     &nDeci_Base = 0;
     &nDeci_PreBase = 0;
     a39="";          ||etiqueta *
     a1="";          ||cliente *
     a2="";          ||nombre cliente *
     a15="";          ||telefono cliente *
     a16="";          ||tienda *
     a17="";          ||exportado *
     a23="";          ||fecha exportado *
     a5="";          ||estado *
     a8="";          ||enviado fecha *
     a9="";          ||enviado hora *
     a20="";          ||facturado fecha *
     a21="";          ||facturado hora *
     a6="";          ||recogido cajero *
     a7="";          ||recogido nombre cajero *
     a10="";          ||recogido fecha *
     a11="";          ||recogido hora *
     a40="";          ||recogido se/alba *
     a41="";          ||recogido nu/alba *
     a12="";          ||recogido se/tiqu *
     a13="";          ||recogido nu/tiqu *
     a42="";          ||recogido se/fra *
     a43="";          ||recogido nu/fra *
     a44="";          ||tipo facturacion
     a19 = "";         ||cajero
     a18 = "";     ||envio cajero
     &a123="";        ||codigo
     &a124="";        ||descripcion
     &a125="";        ||precio
     &a126="";        ||descuento
     &a127="";        ||total linea
     a22="";          ||pack *
     r_guar = "";
     r_alfa = "";
     r_long = "";
     r_num  = 0;
     r_masc = "000000000000000000000000000";
     gsalida = "";
     SWEnPesetas   = 1;
     &SWArtPetas    = 1;
     &SWLeerPrecios = 2;
     SWDefectoImpr = "S";
     aBajaSobres   = "S";
     aModiSobres   = "S";
     nModo         = 0;
|FIN;

||*************************************************************
||CalcHora:
||Imprime la hora actual del sistema

|PROCESO CalcHora; |TIPO 7;
     Modo=((FEntrada / 100) ! 0);
     |SI Modo = 1;
          |HORA Hora;
          Hora = Hora % 105;
          #foto0015#9 = Hora;
          |PINTA #0#9;
     |FINSI;
|FPRC;

|PROCESO Modif; |TIPO 0;
     Modo=((FEntrada / 100) ! 0);
     |SI Modo=2; ||Modificacion o Alta
         |LEE 020#foto0015.=;
         |SI FSalida=0;
             #foto0015#5="F";
             #foto0015#17="N";
             #foto0015#20=~;
             |HORA Hora;
             Hora = Hora % 105;
             #foto0015#21 = Hora;
             |GRABA 020#foto0015.a;
             |PINTA #0#21;
             |PINTA #foto0015#5;
             |PINTA #foto0015#17;
             |PINTA #foto0015#20;
             |PAUSA;
         |FINSI;
     |FINSI;
|FPRC;

|PROCESO Fecha;
     Modo=((FEntrada / 100) ! 0);
     |SI Modo = 1;
         #foto0015#10="00.00.0000"
         |PINTA #foto0015#10;
     |FINSI;
|FPRC;


||******************************************************************
|| Proceso que nos indica el pack de regalo que corresponde al sobre
||******************************************************************

|PROCESO foto0026_1;
     |SI #0#14>#10#2;|Y #0#14<#10#3;
          encontrado=1;
          #0#22=#10#4;
          |PINTA #0#22;
          ||PAUSA;
          |ACABA;
     |FINSI;
|FPRC;

|DEFBUCLE foto0026;
  #10#1;
  ;
  "A",0001;
  "A",9999;
  be;
  NULL,foto0026_1;
|FIN;

|PROCESO Tipo30; |TIPO 30;
     |BUCLE foto0026;
     |SI encontrado=1;
         |C_M #0#22,-1,"S";
         |ENCAMPO #22#0;
         |C_M #0#22,-1,"N";
     |FINSI;
          |GRABA 010#0a;
|FPRC;

|PROCESO Tipo8; |TIPO 8;
     |ABRE #agifa321;
     |ABRE #agifa324;
     |LEE 001#agifa321.p;
     #agifa324#0 = #agifa321#9; ||Igualo a moneda base
     |LEE 001#agifa324.=;
     nDeci_Base = #agifa324#7;  ||Decimales moneda base
     nDeci_PreBase = #agifa324#9;  ||Decimales precio de moneda base
     |CIERRA #agifa321;
     |CIERRA #agifa324;
|FPRC;

||configuracion foto
|PROCESO LeerDefectos;
     |ABRE #4;
     #4#0="A";
     |LEE 000#4=;
     a39=#4#2;     ||etiqueta *
     a1=#4#3;      ||cliente *
     a2=#4#4;      ||nombre cliente *
     a15=#4#5;     ||telefono cliente *
     a16=#4#6;     ||tienda *
     a17=#4#7;     ||exportado *
     a23=#4#8;     ||fecha exportado *
     a5=#4#9;      ||estado *
     a8=#4#10;     ||enviado fecha *
     a9=#4#11;     ||enviado hora *
     a20=#4#12;    ||facturado fecha *
     a21=#4#13;    ||facturado hora *
     a6=#4#14;     ||recogido cajero *
     a7=#4#15;     ||recogido nombre cajero *
     a10=#4#16;    ||recogido fecha *
     a11=#4#17;    ||recogido hora *
     a40=#4#18;    ||recogido se/alba *
     a41=#4#19;    ||recogido nu/alba *
     a12=#4#20;    ||recogido se/tiqu *
     a13=#4#21;    ||recogido nu/tiqu *
     a42=#4#22;    ||recogido se/fra *
     a43=#4#23;    ||recogido nu/fra *
     a124=#4#25;   ||descripcion
     a125=#4#26;   ||precio
     a126=#4#27;   ||descuento
     a127=#4#28;   ||total linea
     a22=#4#29;    ||pack *
     a44=#4#43;    ||tipo facturacion
     a19 = #4#47;   ||cajero
     a18 = #4#48;  || envio cajero
     |CIERRA #4;
|FPRC;

|PROCESO PonDefectos;|TIPO 7;
|HAZ LeerDefectos;;
     |C_M #0#1, 1, a1;
     |C_M #0#2, 1, a2;
     |C_M #0#5, 1, a5;
     |C_M #0#6, 1, a6;
     |C_M #0#7, 1, a7;
     |C_M #0#8, 1, a8;
     |C_M #0#9, 1, a9;
     |C_M #0#10, 1, a10;
     |C_M #0#11, 1, a11;
     |C_M #0#12, 1, a12;
     |C_M #0#13, 1, a13;
     |C_M #0#15, 1, a15;
     |C_M #0#16, 1, a16;
     |C_M #0#17, 1, a17;
     |C_M #0#20, 1, a20;
     |C_M #0#21, 1, a21;
     |C_M #0#19, 1, a19;
     |C_M #0#18, 1, a18;

|FPRC;

