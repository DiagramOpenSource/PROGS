|FICHEROS;
     iber0014 #0; ||Este Def.
     iber0015 #1; ||Ficheros Lineas.
     iber0021 #2; ||Temporal Origen/Destino
     iber0012 #3; ||Tipo de Negocio.
     iberz205 #4,MANTE; ||Seleccion Arti
     iber0013 #13;|| Param Arti
     agifa019 #19;
     iber0015@ #10; ||Ficheros Lineas.

     agifa142 #142;
|FIN;

|VARIABLES;
     &eaGuarda = "";
     aDef      = "";
     aAlfa     = "";
     nTecla    = 0;
     nModo     = 0;
     nSal      = 0;
     nModoCab  = 0;
|FIN;

|PROCESO tipo20; |TIPO 20;
     aAlfa = FSalida;
     |SI aAlfa = "OPCION";
         FSalida = "Copiar";
         |ACABA;
     |FINSI;
     |HAZ copia;
|FPRC;

|PROCESO Modo; |TIPO 7;
     nModoCab = (FEntrada / 100) ! 0;
|FPRC;

|PROCESO Modo0; |TIPO 0;
     nModoCab =  0;
|FPRC;

|PROCESO iber0015;
     #1#0 = #2#1;
     |LEE 101#1=;
     nSal = FSalida;
     |SI nSal = 0; |GRABA 020#1a; |FINSI;
     |SI nSal ! 0; |GRABA 020#1n; |FINSI;
     |LIBERA #1;
|FPRC;

|DEFBUCLE iber0015;
     #1#1;
     ;
     #2#0,"                    ";
     #2#0,"zzzzzzzzzzzzzzzzzzzz";
     ;
     NULL,iber0015;
|FIN;

|PROCESO iber0014;
     #0#0 = #2#1;
     |LEE 101#0=;
     |SI FSalida = 0;
          |LIBERA #0;
          |ERROR;
     |SINO;
          #3#0 = #2#1;
          |LEE 000#3=;
          #0#1 = #3#1;
          |GRABA 020#0n;
     |FINSI;
     |LIBERA #0;
|FPRC;

|DEFBUCLE iber0014;
     #0#1;
     ;
     #2#0;
     #2#0;
     ;
     NULL,iber0014
|FIN;

|PROCESO copia;
     |PUSHV 0501 2380;
     |PINPA #0#2;
     |PINDA #0#2;
     |ENDATOS #1#2;
     |POPV;
     |SI FSalida = 0;
          |ABRE #3;
          |BUCLE iber0014;
          |BUCLE iber0015;
          |CIERRA #3;
     |FINSI;
|FPRC;
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|PROCESO iber0013;
     |DDEFECTO #19;
     #19#0 = #13#0;
     |LEE 000#19=;
     |SI #19#2 ] #4#0; |Y #19#2 [ #4#1;
          |SI #19#3 ] #4#2; |Y #19#3 [ #4#3;
               |DDEFECTO #1;
               #1#0 = #0#0;
               #1#1 = #19#0;
               |LEE 101#1=;
               |SI FSalida ! 0;
                    #1#2 = #19#1;
                    #1#3 = #13#1;  || Natu
                    #1#4 = #13#2;  || Fab
                    #1#5 = #13#3;  ||Seccion
                    #1#6 = #13#8;  || T.Vta
                    #1#7 = #13#2;  || Fabri Propia
                    #1#8 = #13#9;  || Se Pide
                    #1#10= #13#10; || Plato
                    |SI #1#8 = "P";
                         #1#9 = #19#27; || Provee
                    |FINSI;
                    #1#11 = #13#12;
                    |GRABA 020#1n;
               |SINO;
                    #1#2 = #19#1;
                    |SI #1#8 = "P";
                         #1#9 = #19#27; || Provee
                    |FINSI;
                    |GRABA 020#1a;
               |FINSI;
               |LIBERA #1;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE iber0013;
     #13#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, iber0013;
|FIN;

|PROCESO Referencia;
     #19#0 = #10#1;
     |LEE 000#19=;
     |SI FSalida = 0;
          |SI #19#2 ] #4#0; |Y #19#2 [ #4#1;
               |SI #19#3 ] #4#2; |Y #19#3 [ #4#3;
                    #10#5 = eaGuarda;
                    |GRABA 020#10a;
               |FINSI;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE Referencia;
     #10#1002;
     ;
     #0#0, "                    ";
     #0#0, "zzzzzzzzzzzzzzzzzzzz";
     be;
     NULL, Referencia;
|FIN;

|PROCESO Carga; |TIPO 12;
     |SI FSalida ! 0; |ACABA; |FINSI;
     eaGuarda = #4#4;
     |SI nTecla = 12;
          |DDEF aDef;
          aDef = aDef + "iber0015";
          |CARGA_DEF aDef, iber0015@;
          |SI FSalida = 0;
               |ABRE #19;
               |BUCLE Referencia;
               |CIERRA #19;
               |DESCARGA_DEF #iber0015@;
               |PONCONTROL 23, "SI";
               |PTEC 802;
          |SINO;
               aDef = "0000ERROR al cargar " + aDef;
               |MENAV aDef;
          |FINSI;
     |SINO;
          |ABRE #19;
          |BUCLE iber0013;
          |CIERRA #19;
     |FINSI;
|FPRC;

|PROCESO PideCarga;
     |PUSHV 0501 2380;
     |BLANCO 0922 1954;
     #4#4 = eaGuarda;
     |PINPA #0#4;
     |SI nTecla = 12;
          |C_V #4#4, 1, "S";
          |ATRI I;
          |PINTA 1724, "Seccion:";
          |ATRI 0;
     |FINSI;
     |PINDA #0#4;
     |ENDATOS #2#4;
     |C_V #4#4, 1, "N";
     |POPV;
|FPRC;

|PROCESO Tipo5; |TIPO 5;
     |SI nModoCab = 1;
          |HAZ PideCarga;
          nModoCab = 0;
     |FINSI;
|FPRC;

|PROCESO Tipo11; |TIPO 11;
     nModo = (FEntrada / 100) ! 0;

     nTecla = FSalida;
     |SI FSalida = 10;
          |SI nModo = 4; |ERROR; |ACABA |FINSI;
          |HAZ PideCarga;
          |ERROR;
     |FINSI;
     |SI FSalida = 11;   || Repite
          |SI nModo = 4; |ERROR; |ACABA |FINSI;
          #1#5 = eaGuarda;
          |PINTA #1#5;
          |GRABA 000#1a;
          |ERROR;
          |PTEC 809;
     |FINSI;
     |SI FSalida = 12;
          |SI nModo = 4; |ERROR; |ACABA |FINSI;
          |HAZ PideCarga;
          |ERROR;
     |FINSI;
|FPRC;
