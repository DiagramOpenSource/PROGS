                    ||CAMBIOS DE CODIGO DE CLIENTES
|FICHEROS;
     agifa156 #0;
     agifa154 #1;        ||Lineas de Ajusete de clientes
     agifa024 #2;        ||Clientes
     agifa010 #3;        ||Albaran
     agifa071 #4;        ||Lineas de Albaran
     agifa023 #5;        ||Precio Clientes Articulos
     agifa036 #6;        ||Depositos
     agifa070 #7;        ||Lineas de Depositos
     agifa039 #8;        ||Descuentos
     agifa065 #9;        ||Historico
     agifa084 #10;       ||Facturas Contado
     agifa069 #11;       ||Lineas Facturas Contado
     agifa104 #12;       ||Pedidos
     agifa073 #13;       ||Lineas de Pedidos
     agifa134 #15;       ||Facturas
     agifa146 #16;       ||Facturas Proforma
     agifa147 #17;       ||Lineas Facturas Proforma
     dsm00003 #20;       ||Direccion Entrega Clientes
     agifa142 #142;
     agifa020 #120;
     agis0002 #122;

     agifa030 #30;
     agifa095 #95;
     dsm00209 #209;
     agifa310 #310;
     dsm00113 #113;||IVA Cli
     dsm00045 #45; ||F.Pago importes
     dsm00018 #18; ||Obser
|FIN;

|VARIABLES;
     &eaFic = "";
     &eaOrg = "";
     &eaDes = "";
     &enErr = 0;

     &eaSer = "";
     &enNum = 0;
     &eaCli = "";
     &eaTipo = "";

     aPath = "";
     aAlfa = "";
     &enSwAltaCli = 0;
     &eaCliOrg = "";
     &eaCliDes = "";
     &eaNom = "";

     &CambDesc = "";
     &AltaArt  = "";

     aLon      = "";
     nLon      = 0;
     aCuenta   = "";
     &tabla = 0;
     &sust = " ";
     &stock = " ";
     &tipo = " ";
     cli = "";
     cli1 = "";
     i = 0;
|FIN;


|PROCESO Cuenta;
     aCuenta = #2#16; |QBF aCuenta;
     aLon = aCuenta % A0;
     nLon = aLon;
     nLon = nLon - 6 + 100;
     aCuenta = aCuenta % nLon;
     aCuenta = aCuenta + cli1;
|FPRC;

|PROCESO miraclien;
     |ABRE #2;
     #2#0 = cli;
     |LEE 001#2=;
     |SI FSalida = 0;
          |SI sust = "S";
               |BORRA 021#2a;
          |SINO;
               |SI stock = "S";
                    #2#50 = 0;
                    #2#110 = 0;
                    #2#46 = 0;
                    |PARA i = 54; |SI i [ 110; |HACIENDO i = i + 1;
                         #2i = 0;
                    |SIGUE;
                    |PARA i = 114; |SI i [ 155; |HACIENDO i = i + 1;
                         #2i = 0;
                    |SIGUE;
               |FINSI;
          |FINSI;
          #2#0 = cli1;        ||Codigo cliente
                              ||Nombre Fiscal
          |SI CambDesc = "S"; #2#1 = #1#5; |FINSI;

          |HAZ Cuenta;

          #2#16 = aCuenta;
          |SI AltaArt = "S";
               enSwAltaCli = 1;
               |GRABA 000#2b;   || No cambiar
               |SI FSalida ! 0;
                    enErr = FSalida;
                    eaFic = "agifa024";
                    eaOrg = cli;
                    eaDes = cli1;
                    |HAZ Print;
               |FINSI;
               |GRABA 000#2a;   || para ejecucion TIPO 16
          |FINSI;
          |LIBERA #2;
     |FINSI;
     |CIERRA #2;
|FPRC;
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|PROCESO agifa020;
     |ABRE #120;
     #120#0 = cli;
     |LEE 101#120=;
     |SI FSalida = 0;
          |SI sust = "S";
               |BORRA 020#120a;
          |FINSI;
          #120#0 = cli1;
          |GRABA 000#120n;
          |SI FSalida ! 0;
               enErr = FSalida;
               eaFic = "agifa020";
               eaOrg = cli;
               eaDes = cli1;
               |HAZ Print;
          |FINSI;
     |FINSI;
     |CIERRA #120;
|FPRC;

|PROCESO dsm00018;
     |SI sust = "S";
          |BORRA 020#18a;
     |FINSI;
     #18#0 = cli1;
     |GRABA 000#18n;
     |SI FSalida ! 0;
          enErr = FSalida;
          eaFic = "dsm00018";
          eaOrg = cli;
          eaDes = cli1;
          |HAZ Print;
     |FINSI;
|FPRC;

|DEFBUCLE dsm00018;
     #18#1;
     ;
     cli, "CL", 001;
     cli, "CL", 999;
     be;
     NULL, dsm00018;
|FIN;

|PROCESO dsm00045;
     |SI sust = "S";
          |BORRA 020#45a;
     |FINSI;
     #45#0 = cli1;
     |GRABA 000#45n;
     |SI FSalida ! 0;
          enErr = FSalida;
          eaFic = "dsm00045";
          eaOrg = cli;
          eaDes = cli1;
          |HAZ Print;
     |FINSI;
|FPRC;

|DEFBUCLE dsm00045;
     #45#1;
     ;
     cli, 01;
     cli, 99;
     be;
     NULL, dsm00045;
|FIN;

|PROCESO agifa030;
     |BORRA 020#30a;
     #30#0 = cli1;
     |GRABA 000#30n;
     |SI FSalida ! 0;
          enErr = FSalida;
          eaFic = "agifa030";
          eaOrg = cli;
          eaDes = cli1;
          |HAZ Print;
     |FINSI;
|FPRC;

|DEFBUCLE agifa030;
     #30#1;
     ;
     cli;
     cli;
     be;
     NULL, agifa030;
|FIN;

|PROCESO agifa095;
     |BORRA 020#95a;
     #95#0 = cli1;
     |GRABA 000#95n;
     |SI FSalida ! 0;
          enErr = FSalida;
          eaFic = "agifa095";
          eaOrg = cli;
          eaDes = cli1;
          |HAZ Print;
     |FINSI;
|FPRC;

|DEFBUCLE agifa095;
     #95#1;
     ;
     cli, 001;
     cli, 999;
     be;
     NULL, agifa095;
|FIN;

|PROCESO dsm00209;
     |PARA i = 1; |SI i [ 24; |HACIENDO i = i + 1;
          |SI #209i = cli;
               #209i = cli1;
               |GRABA 020#209a;
          |FINSI;
     |SIGUE;
     |LIBERA #209;
|FPRC;

|DEFBUCLE dsm00209;
     #209#1;
     ;
     INICIO;
     FINAL;
     be;
     NULL, dsm00209;
|FIN;

|PROCESO agifa310;
     |BORRA 020#310a;
     #310#0 = cli1;
     |GRABA 000#310n;
     |SI FSalida ! 0;
          enErr = FSalida;
          eaFic = "agifa310";
          eaOrg = cli;
          eaDes = cli1;
          |HAZ Print;
     |FINSI;
|FPRC;

|DEFBUCLE agifa310;
     #310#1;
     ;
     cli, "   ", "     ";
     cli, "zzz", "zzzzz";
     be;
     NULL, agifa310;
|FIN;

|PROCESO dsm00113;
     |BORRA 020#113a;
     #113#0 = cli1;
     |GRABA 000#113n;
     |SI FSalida ! 0;
          enErr = FSalida;
          eaFic = "dsm00113";
          eaOrg = cli;
          eaDes = cli1;
          |HAZ Print;
     |FINSI;
|FPRC;

|DEFBUCLE dsm00113;
     #113#1;
     ;
     cli, 0;
     cli, 5;
     be;
     NULL, dsm00113;
|FIN;
||============================ CAMBIO CODIGO EN ALBARANES =================

|PROCESO cabalb;
     #3#3 = cli1;        ||Cliente
     |GRABA 020#3a;
     |LIBERA #3;

     eaSer = #3#52;
     enNum = #3#0;
     eaCli = #3#3;
     eaTipo = "A";
     |HAZ CambiaCartera;
|FPRC;

|PROCESO linalb;
     |LEE 101#4=;
     #4#15 = cli1;
     |GRABA 020#4a;
     |LIBERA #4;
|FPRC;

|DEFBUCLE albaran;
     #3#1;
     3;
     "     ", 000001, cli;
     "zzzzz", 999999, cli;
     be;
     NULL , cabalb , linalb;
|FIN;

||=========================== CAMBIO CODIGO EN CLIENTES/ARTICULOS ==========

|PROCESO cliart1;
     |BORRA 021#5a;
     #5#0 = cli1;
     |GRABA 000#5n;
     |SI FSalida ! 0;
          enErr = FSalida;
          eaFic = "agifa023";
          eaOrg = cli;
          eaDes = cli1;
          |HAZ Print;
     |FINSI;
     |LIBERA #5;
|FPRC;

|DEFBUCLE cliart;
#5#1;
;
cli , "                    ";
cli , "zzzzzzzzzzzzzzzzzzzz";
be;
NULL , cliart1;
|FIN;

||============================ CAMBIO CODIGO EN DEPOSITOS =================

|PROCESO cabdepo;
     #6#3 = cli1;
     |SI CambDesc = "S"; #6#4 = #1#5; |FINSI;
     |GRABA 020#6a;
     |LIBERA #6;
|FPRC;

|PROCESO lindepo;
     |LEE 101#7=;
     #7#15 = cli1;
     |GRABA 020#7a;
     |LIBERA #7;
|FPRC;

|DEFBUCLE deposito;
     #6#1;
     3;
     "     ", 000001, cli;
     "zzzzz", 999999, cli;
     be;
     NULL , cabdepo , lindepo;
|FIN;

||============================ CAMBIO CODIGO EN DESCUENTOS ================

|PROCESO descu1;
     |BORRA 021#8a;
     #8#0 = cli1;
     |GRABA 000#8n;
     |SI FSalida ! 0;
          enErr = FSalida;
          eaFic = "agifa039";
          eaOrg = cli;
          eaDes = cli1;
          |HAZ Print;
     |FINSI;
     |LIBERA #8;
|FPRC;

|DEFBUCLE descuento;
     #8#1;
     ;
     cli , "   ";
     cli , "zzz";
     be;
     NULL , descu1;
|FIN;

||============================ CAMBIO CODIGO EN HISTORICO =================

|PROCESO histo;
     #9#10 = cli1;
     ||GRABA 021#9a;     modificado para inforpor
     |BORRA 020#9a;
     |GRABA 020#9n;
     |LIBERA #9;
|FPRC;

|DEFBUCLE historico;
#9#1;
10;
"                    " , "00.00.0000" , "  " ,       0 ,     0 , "     " , cli;
"zzzzzzzzzzzzzzzzzzzz" , "31.12.9999" , "zz" ,  999999 , 99999 , "zzzzz" , cli;
be;
NULL , histo;
|FIN;


||========================== CAMBIO CODIGO EN FACTURAS CONTADO =============

|PROCESO cabcont;
     #10#3 = cli1;
     |SI CambDesc = "S"; #10#4 = #1#5; |FINSI;
     #10#40 = aCuenta;
     |GRABA 021#10a;
     |LIBERA #10;

     eaSer = #10#48;
     enNum = #10#0;
     eaCli = #10#3;
     eaTipo = "D";
     |HAZ CambiaCartera;
|FPRC;

|PROCESO lincont;
     |LEE 101#11=;
     #11#15 = cli1;
     |GRABA 020#11a;
     |LIBERA #11;
|FPRC;

|DEFBUCLE contado;
     #10#1;
     3;
     "     ", 000001, cli;
     "zzzzz", 999999, cli;
     be;
     NULL , cabcont , lincont;
|FIN;

||============================ CAMBIO CODIGO EN PEDIDO ====================

|PROCESO cabpedi;
     #12#4 = cli1;
     |GRABA 020#12a;
     |LIBERA #12;

     eaSer = #12#25;
     enNum = #12#0;
     eaCli = #12#4;
     eaTipo = "P";
     |HAZ CambiaCartera;
|FPRC;

|PROCESO linpedi;
     |LEE 101#13=;
     #13#20 = cli1;
     |GRABA 020#13a;
     |LIBERA #13;
|FPRC;

|DEFBUCLE pedido;
     #12#1;
     4;
     "     ",      1, cli;
     "zzzzz", 999999, cli;
     be;
     NULL , cabpedi , linpedi;
|FIN;

||========================== CAMBIO CODIGO EN RECIBOS =====================

|PROCESO cabfact;
     #15#2 = cli1;
     |SI CambDesc = "S"; #15#3 = #1#5; |FINSI;
     #15#12 = aCuenta;
     |GRABA 020#15a;
     |LIBERA #15;

     eaSer = #15#49;
     enNum = #15#0;
     eaCli = #15#2;
     eaTipo = "F";
     |HAZ CambiaCartera;
|FPRC;

|DEFBUCLE facturas;
     #15#1;
     2;
     "     ", 000001, cli;
     "zzzzz", 999999, cli;
     be;
     NULL , cabfact;
|FIN;

||======================== CAMBIO CODIGO EN FACTURA PROFORMA ==============

|PROCESO cabprof;
     #16#3 = cli1;
     |SI CambDesc = "S"; #16#4 = #1#5; |FINSI;
     |GRABA 020#16a;
     |LIBERA #16;
|FPRC;

|PROCESO linprof;
     |LEE 101#17=;
     #17#15 = cli1;
     |GRABA 021#17a;
     |LIBERA #17;
|FPRC;

|DEFBUCLE proforma;
     #16#1;
     3;
     "     ", 000001, cli;
     "zzzzz", 999999, cli;
     be;
     NULL , cabprof ,linprof;
|FIN;

||=================== CAMBIO CODIGO EN DIRECCION ENTREGA ==============

|PROCESO cadireccion;
     |SI sust = "S";
          |BORRA 020#20a;
     |FINSI;
     #20#0 = cli1;
     |GRABA 000#20n;
     |SI FSalida ! 0;
          enErr = FSalida;
          eaFic = "dsm00003";
          eaOrg = cli;
          eaDes = cli1;
          |HAZ Print;
     |FINSI;
     |LIBERA #20;
|FPRC;

|DEFBUCLE direccion;
     #20#1;
     ;
     cli , 0001;
     cli , 9999;
     be;
     NULL , cadireccion;
|FIN;


|PROCESO empieza;
     cli = #1#2 % 106;
     cli1 = #1#3 % 106;
     #0#0 = cli;
     #0#1 = cli1;


     |PINTA #0#0;   |PINTA #0#1;
     |HAZ miraclien;
     |SI sust = "S";
          |BUCLE albaran;
          |BUCLE cliart;
          |BUCLE deposito;
          |BUCLE descuento;
          |BUCLE historico;
          |BUCLE contado;
          |BUCLE pedido;
          |BUCLE facturas;
          |BUCLE proforma;
          |BUCLE agifa030;
          |BUCLE agifa095;
          |BUCLE dsm00209;
          |BUCLE agifa310;
          |BUCLE dsm00113;
          |HAZ agifa020;
          ||컴컴컴컴컴컴컴컴컴컴컴컴컴
          eaCliOrg = cli;
          eaCliDes = cli1;
          eaNom = #1#5;
          |HAZ EsTaller;
          |SI FSalida = 0;
               |HAZ TallerCamCli;
          |FINSI;
          |HAZ EsPCEGroup;
          |SI FSalida = 0;
               |HAZ Pcegroup;
          |FINSI;
     |FINSI;
     |BUCLE direccion;
     |BUCLE dsm00045;
     |BUCLE dsm00018;
|FPRC;

|DEFBUCLE primero;
#1#1;
6;
tabla ,     0 , tipo;
tabla , 99999 , tipo;
e;
NULL , empieza;
|FIN;

|PROCESO agis0002;
     #1#2 = #122#2;
     #1#0 = tabla;
     #1#6 = tipo;
     |LEE 000#1=;
     |SI FSalida = 0;
          #122#2 = #1#3;
          |SI CambDesc = "S"; #122#3 = #1#5; |FINSI;
          |GRABA 020#122a;
     |FINSI;
|FPRC;

|DEFBUCLE agis0002;
     #122#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, agis0002;
|FIN;

|PROGRAMA;
     |ABRE #142; |LEE 000#142p; |CIERRA #142;

     |PINPA #0#0;
     |BUCLE primero;

     ||...................... sin clave cliente
     |ABRE #1; |SELECT #4#1;
     |BUCLE agis0002;
     |CIERRA #1;
|FPRO;
