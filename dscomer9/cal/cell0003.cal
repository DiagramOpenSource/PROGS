|FICHEROS;
     cell0003 #0;
     agifa019 #19;
     agifa023 #23;
     dsl00001 #1;
|FIN;

|VARIABLES;
     nBoton1   = 0;
     nBoton2   = 0;
     nBoton3   = 0;
     nHandle   = 0;
     aRuta     = "";
     aReg      = "";
     aCb       = "";
     aFic      = "";
     aTab      = "";
|FIN;

|PROCESO dsl00001;
     |DDEFECTO #19;
     #19#0 = #1#1;
     |LEE 000#19=;

     #23#0 = #0#2;
     #23#1 = #19#0;
     |LEE 000#23=;
     |SI FSalida ! 0; |DDEFECTO #23; |FINSI;

     aReg = #1#3 + aTab;
     aReg = aReg + #19#1 + aTab;
     aReg = aReg + #1#1 + aTab;
     aReg = aReg + (("000000" + #19#18) % -106) + aTab;
     aReg = aReg + (("000000" + #23#2) % -106);
     aReg = aReg + &10 + &13;

     |XGRABA nHandle, aReg;
|FPRC;

|DEFBUCLE dsl00001;
     #1#3;
     ;
     #0#0, "                    ";
     #0#1, "zzzzzzzzzzzzzzzzzzzz";
     ;
     NULL, dsl00001;
|FIN;

|PROCESO agifa019;
     #23#0 = #0#2;
     #23#1 = #19#0;
     |LEE 000#23=;
     |SI FSalida ! 0; |DDEFECTO #23; |FINSI;

     aCb = #19#128;
     #1#1 = #19#0;
     #1#3 = "";
     |LEE 000#1];
     |SI FSalida = 0; |Y #1#1 = #19#0;
          aCb = #1#3;
     |FINSI;

     aReg = #19#0 + aTab;
     aReg = aReg + #19#1 + aTab;
     aReg = aReg + aCb + aTab;
     aReg = aReg + (("000000" + #19#18) % -106) + aTab;
     aReg = aReg + (("000000" + #23#2) % -106);
     aReg = aReg + &10 + &13;

     |XGRABA nHandle, aReg;
|FPRC;

|PROCESO agifa019_2;
     #23#0 = #0#2;
     #23#1 = #19#0;
     |LEE 000#23=;
     |SI FSalida ! 0; |DDEFECTO #23; |FINSI;

     aCb = #19#128;
     #1#1 = #19#0;
     #1#3 = "";
     |LEE 000#1];
     |SI FSalida = 0; |Y #1#1 = #19#0;
          aCb = #1#3;
     |FINSI;

     aReg = aCb + aTab;
     aReg = aReg + #19#1 + aTab;
     aReg = aReg + #19#0 + aTab;
     aReg = aReg + (("000000" + #19#18) % -106) + aTab;
     aReg = aReg + (("000000" + #23#2) % -106);
     aReg = aReg + &10 + &13;

     |XGRABA nHandle, aReg;
|FPRC;

|DEFBUCLE agifa019_2;
     #19#4;
     ;
     #0#0;
     #0#1;
     ;
     NULL,  agifa019_2;
|FIN;

|DEFBUCLE agifa019;
     #19#1;
     ;
     #0#0;
     #0#1;
     ;
     NULL,  agifa019;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     aFic = #0#3; |QBF aFic;
     |XABRE "CW", aFic, nHandle;
     |SI FSalida < 0;
          |MENAV "0000No puedo crear el fichero1...";
     |SINO;
          |ABRE #1; |SELECT #3#1;
          |ABRE #23;
          |BUCLE agifa019;
          |CIERRA #23;
          |CIERRA #1;
          |XCIERRA nHandle;
     |FINSI;

     aFic = #0#5; |QBF aFic;
     |XABRE "CW", aFic, nHandle;
     |SI FSalida < 0;
          |MENAV "0000No puedo crear el fichero2...";
     |SINO;
          |ABRE #1; |SELECT #3#1;
          |ABRE #23;
          |BUCLE agifa019_2;
          |CIERRA #23;
          |CIERRA #1;
          |XCIERRA nHandle;
     |FINSI;

     aFic = #0#6; |QBF aFic;
     |XABRE "CW", aFic, nHandle;
     |SI FSalida < 0;
          |MENAV "0000No puedo crear el fichero3...";
     |SINO;
          |ABRE #19;
          |ABRE #23;
          |BUCLE dsl00001;
          |CIERRA #23;
          |CIERRA #19;
          |XCIERRA nHandle;
     |FINSI;
|FPRC;

|PROCESO Boton;
     |PTEC 824;
|FPRC;


|PROCESO Browser;
     |SI FSalida ! 10; |ACABA; |FINSI;

     aRuta = #0#3;  |QBF aRuta;
     |SI aRuta = "";
         aRuta = "\*.*";
     |FINSI;
     aRuta = "F" + aRuta;

     |BROWSE aRuta;

     aRuta = aRuta % 299;
     #0#3 = aRuta;
     |PINTA #0#3;
|FPRC;

|PROCESO Browser2;
     |SI FSalida ! 10; |ACABA; |FINSI;

     aRuta = #0#5;  |QBF aRuta;
     |SI aRuta = "";
         aRuta = "\*.*";
     |FINSI;
     aRuta = "F" + aRuta;

     |BROWSE aRuta;

     aRuta = aRuta % 299;
     #0#5 = aRuta;
     |PINTA #0#5;
|FPRC;

|PROCESO Browser3;
     |SI FSalida ! 10; |ACABA; |FINSI;

     aRuta = #0#6;  |QBF aRuta;
     |SI aRuta = "";
         aRuta = "\*.*";
     |FINSI;
     aRuta = "F" + aRuta;

     |BROWSE aRuta;

     aRuta = aRuta % 299;
     #0#6 = aRuta;
     |PINTA #0#6;
|FPRC;

|PROCESO Quita; |TIPO 0;
     |ESTADO_CONTROL nBoton1, "DISABLE";
|FPRC;

|PROCESO Pone; |TIPO 7;
     |ESTADO_CONTROL nBoton1, "ENABLE";
     |ESTADO_CONTROL nBoton2, "DISABLE";
     |ESTADO_CONTROL nBoton3, "DISABLE";
|FPRC;

|PROCESO Quita2; |TIPO 0;
     |ESTADO_CONTROL nBoton2, "DISABLE";
|FPRC;

|PROCESO Pone2; |TIPO 7;
     |ESTADO_CONTROL nBoton2, "ENABLE";
     |ESTADO_CONTROL nBoton1, "DISABLE";
     |ESTADO_CONTROL nBoton3, "DISABLE";
|FPRC;

|PROCESO Quita3; |TIPO 0;
     |ESTADO_CONTROL nBoton3, "DISABLE";
|FPRC;

|PROCESO Pone3; |TIPO 7;
     |ESTADO_CONTROL nBoton3, "ENABLE";
     |ESTADO_CONTROL nBoton1, "DISABLE";
     |ESTADO_CONTROL nBoton2, "DISABLE";
|FPRC;

|PROGRAMA;
     aTab = &9;

     |CONTROL_SIMPLE 0, "BOTON, Fichero", 0920, 0927, Boton;
     nBoton1 = FSalida;
     |CONTROL_SIMPLE 0, "BOTON, Fichero", 1020, 1027, Boton;
     nBoton2 = FSalida;
     |CONTROL_SIMPLE 0, "BOTON, Fichero", 1120, 1127, Boton;
     nBoton3 = FSalida;
     |HAZ Pone;

     |CLS;
     |ABRE #0;
     |LEE 101#0p;
     |SI FSalida ! 0; |GRABA 020#0b; |FINSI;
     |PINPA #0#0;
     |PINDA #0#0;
     |ENDATOS #1#0;
     |SI FSalida = 0;
          |HAZ Tipo3;
          |GRABA 020#0a;
     |FINSI;
     |CIERRA #0;

     |FIN_CONTROL_WINDOWS nBoton1;
     |FIN_CONTROL_WINDOWS nBoton2;
     |FIN_CONTROL_WINDOWS nBoton3;
     |PULSATECLA;
|FPRO;
