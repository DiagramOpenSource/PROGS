|FICHEROS;
     coimz019 #0;

     coima027 #27;
     coima006 #6;
     coima001 #1;
     agifa073 #73;
|FIN;

|VARIABLES;
     nPedServir = 0;
     nExiste = 0;
     aMensaje = "";
     aRespuesta = "";

     &enModoCoimasa = 1;
|FIN;

|PROCESO coima027_cero;
     #coima027#6 = 0;
     |GRABA 020#coima027.a;
|FPRC;

|DEFBUCLE coima027_cero;
 #coima027#1;
 ;
 INICIO;
 FINAL;
 be;
 NULL, coima027_cero;
|FIN;

|PROCESO agifa073;
     enModoCoimasa = 5;
     |HAZ CtrlPrioridaReservarPed;
/*
     nPedServir = #agifa073#5 - #agifa073#43;
     |DDEFECTO #coima027;
     #coima027#0 = #agifa073#2;
     #coima027#1 = #agifa073#3;
     |LEE 101#coima027.=;
     |SI FSalida ! 0; |GRABA 020#coima027.b; |FINSI;
     #coima027#6 = #coima027#6 + nPedServir;
     |GRABA 020#coima027.a;
     |LIBERA #coima027;
*/
|FPRC;

|DEFBUCLE agifa073;
 #agifa073#1;
 ;
 #coima006#0, #coima006#1,   1;
 #coima006#0, #coima006#1, 999;
 ;
 NULL, agifa073;
|FIN;

|PROCESO coima006;
     |SI #coima006#2 [ #coima001#27;
          |BUCLE agifa073;
     |FINSI;
|FPRC;

|DEFBUCLE coima006;
 #coima006#1;
 ;
 INICIO;
 FINAL;
 ;
 NULL, coima006;
|FIN;

|PROCESO Principal;
     |ABRE #coima001;
     |DDEFECTO #coima001;
     |LEE 000#coima001.=;
     |CIERRA #coima001;

     |BUCLE coima027_cero;

     |ABRE #coima027;
     |BUCLE coima006;
     |CIERRA #coima027;
|FPRC;

|PROGRAMA;
     |CLS;
     |ABRE #0;
     |DDEFECTO #0;
     |LEE 101#0p;
     nExiste = FSalida;
     |PINPA #0#0;
     |PINDA #0#0;
     |ENDATOS #1#0;
     |SI FSalida = 0;
          aRespuesta = #coimz019#1;
          #coimz019#1 = "NO";
          |SI nExiste = 0;
               |GRABA 020#0a;
          |SINO;
               |GRABA 020#0n;
          |FINSI;
          |SI aRespuesta = "SI";
               |HAZ Principal;
          |FINSI;
     |FINSI;
     |LIBERA #0;
     |CIERRA #0;
|FPRO;
