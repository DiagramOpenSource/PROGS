|FICHEROS;
     dsz00104 #0;
     agifa010 #10;
     dsm00047 #47;
     agifa065 #65;
     agifa071 #71;
     dsw00097 #97,MANTE;
|FIN;

|VARIABLES;
     aAlfa = "";
     nHay = 0;
|FIN;

|PROCESO Actualiza;
     |SI #97#22 ! "*";
          |ACABA;
     |FINSI;
     #65#0 = #97#0;
     #65#1 = #97#1;
     #65#2 = #97#2;
     #65#3 = #97#3;
     #65#4 = #97#4;
     #65#5 = #97#5;
     #65#6 = #97#6;
     #65#7 = #97#7;
     #65#8 = #97#8;
     #65#9 = #97#9;
     #65#10 = #97#10;
     #65#11 = #97#11;
     #65#12 = #97#12;
     #65#13 = #97#13;
     #65#14 = #97#14;
     #65#15 = #97#15;
     #65#16 = #97#16;
     #65#17 = #97#17;
     #65#18 = #97#18;
     #65#19 = #97#19;
     #65#20 = #97#20;
     #65#21 = #97#21;
     |BORRA 000#65c;
     |GRABA 020#65n;
|FPRC;

|DEFBUCLE Actualiza;
     #97#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Actualiza;
|FIN;

|PROCESO Tecla; |TIPO 0;
     |SI #97Campo = Contenido; |Y FSalida = 0;
          |SI #97#22 = "*";
               #97#22 = "";
          |SINO;
               #97#22 = "*";
          |FINSI;
          |GRABA 020#97a;
          |PINTA #97;
     |FINSI;
|FPRC;

|PROCESO Tmp;
     #65#0 = #97#0;
     #65#1 = #97#1;
     #65#2 = #97#2;
     #65#3 = #97#3;
     #65#4 = #97#4;
     #65#11 = #97#11;
     |LEE 000#65=;
     |SI FSalida = 0;
          #97#23 = #65#6;
          |GRABA 020#97a;
     |FINSI;
     |LIBERA #97;
|FPRC;

|DEFBUCLE Tmp;
     #97#1;
     ;
     INICIO;
     FINAL;
     be;
     NULL, Tmp;
|FIN;

|PROCESO dsm00047;
     |DDEFECTO #97;
     #97#11 = #47#0;
     #97#3 = #47#1;
     #97#4 = #47#2;
     #97#1 = #10#1;
     #97#2 = "AV";
     #97#0 = #47#3;
     |LEE 101#97=;
     |SI FSalida ! 0; |GRABA 020#97b; |FINSI;
     #97#5 = #47#4;
     #97#6 = #97#6 - (#71#5 * #47#5);
     #97#8 = #47#8;
     #97#9 = #71#6;
     #97#10 = #10#3;
     #97#12 = #71#8;
     #97#13 = #71#33;
     #97#14 = (#97#9 < #97#12) < #97#13;
     #97#17 = #97#17 - (#71#48 * #47#9);
     |GRABA 020#97a;
     |LIBERA #97;
     nHay = 1;
|FPRC;

|DEFBUCLE dsm00047;
     #47#1;
     ;
     #71#29, #71#0, #71#1, 001;
     #71#29, #71#0, #71#1, 999;
     ;
     NULL, dsm00047;
|FIN;

|PROCESO agifa071;
     |BUCLE dsm00047;
|FPRC;

|DEFBUCLE agifa010;
     #10#7;
     43;
     #0#1, "     ", 000001, "N";
     #0#2, "zzzzz", 999999, "N";
     ;
     NULL, NULL, agifa071;
|FIN;

|PROCESO Min;
     #97#11 = "     ";
     #97#3 = 000001;
     #97#4 = 00001;
     #97#1 = "01.01.0000";
     #97#2 = "  ";
     #97#0 = "                    ";
|FPRC;

|PROCESO Max;
     #97#11 = "zzzzz";
     #97#3 = 999999;
     #97#4 = 99999;
     #97#1 = "31.12.9999";
     #97#2 = "zz";
     #97#0 = "zzzzzzzzzzzzzzzzzzzz";
|FPRC;

|PROCESO Tipo3; |TIPO 3;
     aAlfa = Usuario;
     |NOME_DAT #97 aAlfa;
     |DELINDEX #97;
     |ABRE #97;
     |BUCLE agifa010;
     |CIERRA #97;
     |ABRE #65;
     |BUCLE Tmp;
     |CIERRA #65;
     |SI nHay = 0;
          |MENAV "0000No hay registros...";
     |SINO;
          |PINPA #0#97;
          |ENTLINEAL #1#97, 1, 4, 22, 0, Min, Max;
          |CONFI "0000NActualizar histórico con lineas marcadas?";
          |SI FSalida = 0;
               |ABRE #65;
               |BUCLE Actualiza;
               |CIERRA #65;
          |FINSI;
     |FINSI;
     |DELINDEX #97;
|FPRC;
