|FICHEROS;
     guerz209 #0;
     guerm116 #116;
     guerm117 #117;
     guerm118 #118;
     referen@;
|FIN;

|VARIABLES;
     aDef = "";
     aAlfa = "";
     aOrg = "";
     aDes = "";
     aIP = "";
     aFic = "";
     aPath = "";
     aAnt = "";
|FIN;

|PROCESO Copia;
     |SI aIP = "";
          |COPIA_FICHERO aOrg, aDes;
     |SINO;
          |ENVIA_FICHERO aOrg, aDes;
     |FINSI;
     |SI FSalida ! 0; |Y aAnt ! #118#2;
          aAnt = #118#2;
          aAlfa = "0000Error al copiar " + #118#2;
          |MENAV aAlfa;
     |FINSI;
|FPRC;

|PROCESO guerm118;
     |PINTA 1723, #117#1;
     |PINTA 1823, #118#2;

     aAlfa = aDef + #118#2; |QBF aAlfa;  ||Crea el fichero si no existe
     |CARGA_DEF aAlfa, referen@;
     |SI FSalida = 0;
          |ABRE #referen@;
          |CIERRA #referen@;
          |DESCARGA_DEF #referen@;
     |FINSI;

     aOrg = aFic + #118#2; |QBF aOrg;
     aDes = aPath + #118#2; |QBF aDes;
     aOrg = aOrg + ".ddx";
     aDes = aDes + ".ddx";
     |HAZ Copia;

     aOrg = aFic + #118#2; |QBF aOrg;
     aDes = aPath + #118#2; |QBF aDes;
     aOrg = aOrg + ".dat";
     aDes = aDes + ".dat";
     |HAZ Copia;

     aOrg = aFic + #118#2; |QBF aOrg;
     aDes = aPath + #118#2; |QBF aDes;
     aOrg = aOrg + ".ixx";
     aDes = aDes + ".ixx";
     |HAZ Copia;
|FPRC;

|DEFBUCLE guerm118;
     #118#1;
     ;
     #117#0, 001;
     #117#0, 999;
     ;
     NULL, guerm118;
|FIN;

|PROCESO guerm117;
     |SI #117#2 = "S";
          |BUCLE guerm118;
     |FINSI;
|FPRC;

|DEFBUCLE guerm117;
     #117#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, guerm117;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |SI #0#0 = "NO"; |ACABA; |FINSI;

     aIP = "";
     |IP_REMOTO aIP;

     |ABRE #116; |LEE 000#116p; |CIERRA #116;
     aPath = #116#1; |QBF aPath;
     |DDEF aDef;

     aAlfa = aPath % -101;
     |SI aAlfa !  "/"; |Y aAlfa ! "\";
          aPath = aPath + "/";
     |FINSI;

     |DFICE aFic;
     |BUCLE guerm117;
|FPRC;
