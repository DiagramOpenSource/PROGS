|FICHEROS;
     gopre011 #0;
     agifa010 #10;
     agifa084 #84;
     agifa134 #134;
     gopre012 #12;
     agifa007 #7;
|FIN;

|VARIABLES;
     aInforme  = "gopre011";
     aAlfa     = "";
     nHay      = 0;
     nMayus    = 0;
|FIN;

|PROCESO TeclaF7; |TIPO 6;    ||TECLA OCULTA
     |SI FSalida = 15;
          |AVISO; |SLEEP 1; |AVISO;
          nMayus = 1;
     |FINSI;
|FPRC;

|PROCESO Tmp;
     nHay      = 1;
     |PRINT;
|FPRC;

|DEFBUCLE Tmp;
     #12#2;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Tmp;
|FIN;

|PROCESO agifa084;
     aAlfa = #84#87;
     aAlfa = aAlfa % 105;
     |SI aAlfa < #0#4; |O aAlfa > #0#5; |ACABA; |FINSI;

     |DDEFECTO #12;
     #12#0 = "D";
     #12#1 = #84#48;
     #12#2 = #84#0;
     |LEE 000#12=;
     |SI FSalida ! 0;
          #12#3 = #84#3;
          #12#4 = #84#4;
          #12#5 = #84#9;
          #12#6 = #84#16+#84#19+#84#22+#84#42+#84#45+#84#28;||BASE
          #12#7 = #84#24;                       ||IVA
          #12#8 = #84#73;                       ||Tot
          #12#9 = #84#1;
          #12#10 = #84#6;
          |GRABA 020#12n;
     |FINSI;
|FPRC;

|DEFBUCLE agifa084;
     #84#3;
     6;
     #0#2, #0#0, #0#10, #0#6, #0#8;
     #0#3, #0#1, #0#11, #0#7, #0#9;
     ;
     NULL, agifa084;
|FIN;

|PROCESO agifa010;
     #134#49 = #10#53;
     #134#0 = #10#39;
     |LEE 000#134=;
     |SI FSalida = 0; |Y #134#1 ] #0#0; |Y #134#1 [ #0#1;
          |DDEFECTO #12;
          #12#0 = "F";
          #12#1 = #134#49;
          #12#2 = #134#0;
          |LEE 000#12=;
          |SI FSalida ! 0;
               |DDEFECTO #7;
               #7#26 = #12#1
               |LEE 000#7=;

               #12#3 = #134#2;
               #12#4 = #134#3;
               #12#5 = #7#27;
               #12#6 = #134#91+#134#94+#134#97+#134#102+#134#105+#134#47;||BASE
               #12#7 = #134#99 + #134#100;                       ||IVA
               #12#8 = #134#101;                                 ||Tot
               #12#9 = #134#1;
               #12#10 = #agifa010#6;
               |GRABA 020#12n;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE agifa010;
     #10#3;
     6, 38, 53;
     #0#2, "01.01.0000", #0#4, #0#6, #0#8, "S", #0#10;
     #0#3, "31.12.9999", #0#5, #0#7, #0#9, "S", #0#11;
     ;
     NULL, agifa010;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |SI nMayus = 0;
          #0#10 = #0#10 > ""
          #0#11 = #0#11 > ""
     |FINSI;

     aAlfa = Usuario; |QBF aAlfa;
     |NOME_DAT #12 aAlfa; |DELINDEX #12;

     |IMPRE 0;
     |SI FSalida = 0
          aInforme = #0#12; |QBF aInforme;
          |INFOR aInforme;
          |SI FSalida = 0;

               |ABRE #12;
               |ABRE #7;
               |ABRE #134;
               |BUCLE agifa010;
               |CIERRA #134;
               |CIERRA #7;
               |BUCLE agifa084;
               |CIERRA #12;

               |BUCLE Tmp;

               |SI nHay ! 0; |PIEINF; |FINSI;
               |FININF;
          |SINO;
               aInforme = "0000Falta informe:" + aInforme;
               |MENAV aInforme;
          |FINSI;
          |FINIMP;
     |FINSI;

     |DELINDEX #12;
|FPRC;

|PROGRAMA;
     |ABRE #0;
     |LEE 101#0p;
     |SI FSalida ! 0; |GRABA 020#0b; |FINSI;
     #0#0 = ~;
     |PDEFECTO #0, 1, 12;
     |PINPA #0#0;
     |PINDA #0#0;
     |ENDATOS #1#0;
     |SI FSalida = 0;
          |GRABA 020#0a;
     |FINSI;
     |CIERRA #0;
|FPRO;
