|FICHEROS;
     rucom006 #0;
     rucom002 #2;
     rucom003 #3;
     rucom004 #4;
     rucom011 #11;
     rucom012 #12;
     rucom013 #13;
     rucoz001 #101,MANTE;
     rucoz002 #102,MANTE;
|FIN;

|VARIABLES;
     &enCtrFin = 0;
     nModo = 0;
     nModoInc = 0;
     nModoMan = 0;
     aAlfa = "";
     nPan = 0;
     nPanEdita = 0;
     nBtnObs = -1;
     nBtnInc = -1;
     nBtnMan = -1;
     nBtnAltaInc = 0;
     nBtnBajaInc = 0;
     nBtnModiInc = 0;
     nBtnConsInc = 0;
     nBtnAltaMan = 0;
     nBtnBajaMan = 0;
     nBtnModiMan = 0;
     nBtnConsMan = 0;
 {-1}aVent = "";
     aVent1 = 0;
     aVent2 = 0;
     aVent3 = 0;
     aVent4 = 0;
     aVent5 = "";
     nVentana = 0;
     nVenEdita = 0;
     nGrid = 0;
     nRango = 0;
     nLin = 0;
     nSw = 0;
     i = 0;
     aConte = "";
|FIN;

|PROCESO Min;
     #12#0 = #0#0; #12#1 = 1;
     #13#0 = #0#0; #13#1 = 1;
|FPRC;

|PROCESO Max;
     #12#0 = #0#0; #12#1 = 99999;
     #13#0 = #0#0; #13#1 = 99999;
|FPRC;

|PROCESO BtnObs;
     |VENTANA 1301, 3198, -1, 17, "Observaciones";
     nVentana = FSalida;
     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nVentana;
     aVent5 = "MODAL";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     |ABRE #11;
     #11#0 = #0#0;
     |LEE 101#11=;
     |SI FSalida ! 0; |GRABA 020#11b; |FINSI;
     |PINPA #0#11;
     |PINDA #0#11;
     |ENDATOS #1#11;
     |SI FSalida = 0; |GRABA 020#11a; |FINSI;
     |CIERRA #11;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nVentana;
     aVent5 = "MODELESS";
     |ESPECIFICA "ESTADO_VENTANA", aVent;
     |FINVENTANA nVentana;
     |PULSATECLA;
|FPRC;

|PROCESO Incidencia; |TIPO 0;
     |ABRE #4;
     #4#0 = #101#3;
     |LEE 000#4=;
     |SI FSalida = 0;
          |SI aConte ! #101#3;
               #101#4 = #4#1; |PINTA #101#4;
               #101#5 = #4#2; |PINTA #101#5;
          |FINSI;
     |SINO;
          |MENAV "0000No existe c¢digo...";
          |ERROR;
     |FINSI;
     |CIERRA #4;
|FPRC;

|PROCESO Conte1; |TIPO 7;
     aConte = #101#3;
|FPRC;

|PROCESO EditaInc;
     |SI nModoInc = 1; |VENTANA 2501, 3198, -1, 17, "Nueva Incidencia"; |FINSI;
     |SI nModoInc = 2; |VENTANA 2501, 3198, -1, 17, "Modifica Incidencia"; |FINSI;
     |SI nModoInc = 4; |VENTANA 2501, 3198, -1, 17, "Consulta Incidencia"; |FINSI;
     nVenEdita = FSalida;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nVenEdita;
     aVent5 = "MODAL";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     |SI nModoInc = 1;
          #12#0 = #0#0;
          #12#1 = 99999;
          |LEE 000#12];
          |SI FSalida = 0;
               |LEE 000#12a;
          |SINO;
               |LEE 000#12u;
          |FINSI;
          |SI FSalida = 0; |Y #12#0 = #0#0;
               nLin = #12#1 + 1;
          |SINO;
               nLin = 1;
          |FINSI;
          |DDEFECTO #12;
          #12#0 = #0#0;
          #12#1 = nLin;
          |GRABA 020#12b;

          |DDEFECTO #101;
          #101#0 = #0#0;
          #101#1 = nLin;
     |SINO;
          |PARA i = 0; |SI i [ 5; |HACIENDO i = i + 1;
               #101i = #12i;
          |SIGUE;
     |FINSI;
     nSw = 1;
     nSw = 0;
     |PINPA #0#101; nPanEdita = FSalida;
     |PINDA #0#101;
     |SI nModoInc = 1; |ENDATOS #1#101; |FINSI;
     |SI nModoInc = 2; |ENDATOS #2#101; |FINSI;
     |SI nModoInc = 4; |PAUSA; |FINSI;
     |SI FSalida = 0; |Y nModoInc ! 4;
          |PARA i = 0; |SI i [ 5; |HACIENDO i = i + 1;
               #12i = #101i;
          |SIGUE;
          |GRABA 020#12a;
          |REFRESCACONTROL nGrid;
     |SINO;
          |SI nModoInc = 1;
               |BORRA 020#12c;
               |REFRESCACONTROL nGrid;
          |FINSI;
     |FINSI;
     |LIBERA #12;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nVenEdita;
     aVent5 = "MODELESS";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     |FINVENTANA nVenEdita;
     |PULSATECLA;
|FPRC;

|PROCESO BtnAltaInc;
     nModoInc = 1;
     |HAZ EditaInc;
|FPRC;

|PROCESO BtnModiInc;
     |LEE 101#12=;
     |SI FSalida ! 0; |ACABA; |FINSI;
     nModoInc = 2;
     |HAZ EditaInc;
     |LIBERA #12;
|FPRC;

|PROCESO BtnBajaInc;
     |LEE 101#12=;
     |SI FSalida ! 0; |ACABA; |FINSI;
     aAlfa = "0000N¿Borrar linea: " + (("00000" + #12#1) % -105) + "?";
     |CONFI aAlfa;
     |SI FSalida = 0;
          |BORRA 020#12a;
          |REFRESCACONTROL nGrid;
     |FINSI;
     |LIBERA #12;
|FPRC;

|PROCESO BtnConsInc;
     |LEE 000#12=;
     |SI FSalida ! 0; |ACABA; |FINSI;
     nModoInc = 4;
     |HAZ EditaInc;
|FPRC;

|PROCESO EvtInc;
     |SI FSalida = 1; |O FSalida = 2;
          |LEE 000#12=;
     |FINSI;
     |SI FSalida = 4;
          |HAZ BtnModiInc;
     |FINSI;
|FPRC;

|PROCESO BtnInc;
     |VENTANA 1301, 3198, -1, 17, "Incidencias";
     nVentana = FSalida;
     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nVentana;
     aVent5 = "MODAL";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     |ABRE #12;
     |CONTROL_SIMPLE 0, "BOTON,{{193}}Alta", 1403, 1413, BtnAltaInc;
     nBtnAltaInc = FSalida;
     |CONTROL_SIMPLE 0, "BOTON,{{197}}Modificar", 1415, 1425, BtnModiInc;
     nBtnModiInc = FSalida;
     |CONTROL_SIMPLE 0, "BOTON,{{199}}Baja", 1427, 1437, BtnBajaInc;
     nBtnBajaInc = FSalida;
     |CONTROL_SIMPLE 0, "BOTON,{{155}}Consulta", 1439, 1449, BtnConsInc;
     nBtnConsInc = FSalida;
     nRango = 4 + 8 + 16 + 32;
     |LINEAL_SIMPLE #1#12, nRango, 1503, 2997, Min, Max, EvtInc;
     nGrid = FSalida;
     enCtrFin = nGrid;
     |HAZ EsperaFin;
     |DESTRUYECONTROL nGrid;
     |FIN_CONTROL_WINDOWS nBtnAltaInc;
     |FIN_CONTROL_WINDOWS nBtnModiInc;
     |FIN_CONTROL_WINDOWS nBtnBajaInc;
     |FIN_CONTROL_WINDOWS nBtnConsInc;
     |CIERRA #12;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nVentana;
     aVent5 = "MODELESS";
     |ESPECIFICA "ESTADO_VENTANA", aVent;
     |FINVENTANA nVentana;
     |PULSATECLA;
|FPRC;

|PROCESO Taller; |TIPO 0;
     |ABRE #2;
     #2#0 = #102#5;
     |LEE 000#2=;
     |SI FSalida = 0;
          #102#8 = #2#1; |PINTA #102#8;
     |SINO;
          |SI nSw = 0;
               |MENAV "0000No existe c¢digo...";
               |ERROR;
          |FINSI;
     |FINSI;
     |CIERRA #2;
|FPRC;

|PROCESO Concepto; |TIPO 0;
     |ABRE #3;
     #3#0 = #102#3;
     |LEE 000#3=;
     |SI FSalida = 0;
          |SI aConte ! #102#3;
               #102#4 = #3#1; |PINTA #102#4;
          |FINSI;
     |SINO;
          |MENAV "0000No existe c¢digo...";
          |ERROR;
     |FINSI;
     |CIERRA #4;
|FPRC;

|PROCESO Conte2; |TIPO 7;
     aConte = #102#3;
|FPRC;

|PROCESO EditaMan;
     |SI nModoMan = 1; |VENTANA 2401, 3198, -1, 17, "Nueva Mantenimiento"; |FINSI;
     |SI nModoMan = 2; |VENTANA 2401, 3198, -1, 17, "Modifica Mantenimiento"; |FINSI;
     |SI nModoMan = 4; |VENTANA 2401, 3198, -1, 17, "Consulta Mantenimiento"; |FINSI;
     nVenEdita = FSalida;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nVenEdita;
     aVent5 = "MODAL";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     |SI nModoMan = 1;
          #13#0 = #0#0;
          #13#1 = 99999;
          |LEE 000#13];
          |SI FSalida = 0;
               |LEE 000#13a;
          |SINO;
               |LEE 000#13u;
          |FINSI;
          |SI FSalida = 0; |Y #13#0 = #0#0;
               nLin = #13#1 + 1;
          |SINO;
               nLin = 1;
          |FINSI;
          |DDEFECTO #13;
          #13#0 = #0#0;
          #13#1 = nLin;
          |GRABA 020#13b;

          |DDEFECTO #102;
          #102#0 = #0#0;
          #102#1 = nLin;
     |SINO;
          |PARA i = 0; |SI i [ 7; |HACIENDO i = i + 1;
               #102i = #13i;
          |SIGUE;
     |FINSI;
     nSw = 1;
     |HAZ Taller;
     nSw = 0;
     |PINPA #0#102; nPanEdita = FSalida;
     |PINDA #0#102;
     |SI nModoMan = 1; |ENDATOS #1#102; |FINSI;
     |SI nModoMan = 2; |ENDATOS #2#102; |FINSI;
     |SI nModoMan = 4; |PAUSA; |FINSI;
     |SI FSalida = 0; |Y nModoMan ! 4;
          |PARA i = 0; |SI i [ 7; |HACIENDO i = i + 1;
               #13i = #102i;
          |SIGUE;
          |GRABA 020#13a;
          |REFRESCACONTROL nGrid;
     |SINO;
          |SI nModoMan = 1;
               |BORRA 020#13c;
               |REFRESCACONTROL nGrid;
          |FINSI;
     |FINSI;
     |LIBERA #13;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nVenEdita;
     aVent5 = "MODELESS";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     |FINVENTANA nVenEdita;
     |PULSATECLA;
|FPRC;

|PROCESO BtnAltaMan;
     nModoMan = 1;
     |HAZ EditaMan;
|FPRC;

|PROCESO BtnModiMan;
     |LEE 101#13=;
     |SI FSalida ! 0; |ACABA; |FINSI;
     nModoMan = 2;
     |HAZ EditaMan;
     |LIBERA #13;
|FPRC;

|PROCESO BtnBajaMan;
     |LEE 101#13=;
     |SI FSalida ! 0; |ACABA; |FINSI;
     aAlfa = "0000N¿Borrar linea: " + (("00000" + #13#1) % -105) + "?";
     |CONFI aAlfa;
     |SI FSalida = 0;
          |BORRA 020#13a;
          |REFRESCACONTROL nGrid;
     |FINSI;
     |LIBERA #13;
|FPRC;

|PROCESO BtnConsMan;
     |LEE 000#13=;
     |SI FSalida ! 0; |ACABA; |FINSI;
     nModoMan = 4;
     |HAZ EditaMan;
|FPRC;

|PROCESO EvtMan;
     |SI FSalida = 1; |O FSalida = 2;
          |LEE 000#13=;
     |FINSI;
     |SI FSalida = 4;
          |HAZ BtnModiMan;
     |FINSI;
|FPRC;

|PROCESO BtnMan;
     |VENTANA 1301, 3198, -1, 17, "Mantenimientos";
     nVentana = FSalida;
     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nVentana;
     aVent5 = "MODAL";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     |ABRE #13;
     |CONTROL_SIMPLE 0, "BOTON,{{193}}Alta", 1403, 1413, BtnAltaMan;
     nBtnAltaMan = FSalida;
     |CONTROL_SIMPLE 0, "BOTON,{{197}}Modificar", 1415, 1425, BtnModiMan;
     nBtnModiMan = FSalida;
     |CONTROL_SIMPLE 0, "BOTON,{{199}}Baja", 1427, 1437, BtnBajaMan;
     nBtnBajaMan = FSalida;
     |CONTROL_SIMPLE 0, "BOTON,{{155}}Consulta", 1439, 1449, BtnConsMan;
     nBtnConsMan = FSalida;
     nRango = 4 + 8 + 16 + 32;
     |LINEAL_SIMPLE #1#13, nRango, 1503, 2997, Min, Max, EvtMan;
     nGrid = FSalida;
     enCtrFin = nGrid;
     |HAZ EsperaFin;
     |DESTRUYECONTROL nGrid;
     |FIN_CONTROL_WINDOWS nBtnAltaMan;
     |FIN_CONTROL_WINDOWS nBtnModiMan;
     |FIN_CONTROL_WINDOWS nBtnBajaMan;
     |FIN_CONTROL_WINDOWS nBtnConsMan;
     |CIERRA #13;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nVentana;
     aVent5 = "MODELESS";
     |ESPECIFICA "ESTADO_VENTANA", aVent;
     |FINVENTANA nVentana;
     |PULSATECLA;
|FPRC;

|PROCESO T5_13; |TIPO 13;
     |SI nBtnObs = -1;
          |PINPA #0#0; nPan = FSalida;
          |CONTROL_SIMPLE nPan, "BOTON,{{137}}Observaciones", 1079, 1196, BtnObs;
          nBtnObs = FSalida;
          |CONTROL_SIMPLE nPan, "BOTON,{{137}}Incidencias", 1279, 1396, BtnInc;
          nBtnInc = FSalida;
          |CONTROL_SIMPLE nPan, "BOTON,{{137}}Mantenimientos", 1479, 1596, BtnMan;
          nBtnMan = FSalida;
     |FINSI;
|FPRC;

|PROCESO T5_7; |TIPO 7;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 1;
          |ESTADO_CONTROL nBtnObs, "DISABLE";
          |ESTADO_CONTROL nBtnInc, "DISABLE";
          |ESTADO_CONTROL nBtnMan, "DISABLE";
     |FINSI;
|FPRC;

|PROCESO T5_20; |TIPO 20;
     |ESTADO_CONTROL nBtnObs, "ENABLE";
     |ESTADO_CONTROL nBtnInc, "ENABLE";
     |ESTADO_CONTROL nBtnMan, "ENABLE";
     FSalida = "";
|FPRC;

|PROCESO Borra13;
     |BORRA 020#13a;
|FPRC;

|DEFBUCLE Borra13;
     #13#1;
     ;
     #0#0, 00000;
     #0#0, 99999;
     be;
     NULL, Borra13;
|FIN;

|PROCESO Borra12;
     |BORRA 020#12a;
|FPRC;

|DEFBUCLE Borra12;
     #12#1;
     ;
     #0#0, 00000;
     #0#0, 99999;
     be;
     NULL, Borra12;
|FIN;

|PROCESO Borra11;
     |ABRE #11;
     #11#0 = #0#0;
     |LEE 101#11=;
     |SI FSalida = 0;
          |BORRA 020#11a;
     |FINSI;
     |CIERRA #11;
|FPRC;

|PROCESO T5_2; |TIPO 2;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 3;
          |HAZ Borra11;
          |BUCLE Borra12;
          |BUCLE Borra13;
     |FINSI;
|FPRC;
