|FICHEROS;
 ortig012 #0;
 ortig010 #1;
 agifa104 #2;
 agifa073 #3;
 ortig011 #4;
 agifa019 #5;
 agifa024 #6;
 agifa321 #321;
 agifa324 #324;
 agifa142 #142;
|FIN;

|VARIABLES;
|FIN;

|PROCESO monbase;
|ABRE #321;
|LEE 010#321p;
|SI FSalida ! 0;|DDEFECTO #321;|FINSI;
|LIBERA #321;
|CIERRA #321;
|ABRE #324;
#324#0 = #321#9;
|LEE 010#324=;
|SI FSalida ! 0;|DDEFECTO #324;|FINSI;
|LIBERA #324;
|CIERRA #324;
|FPRC;

|PROCESO divisa;
|ABRE #2;
#2#35 = #6#192;
#2#37 = #6#193;
#2#40 = #321#9;
#2#36 = #324#2;
|HAZ monbase;
#2#41 = #324#2;
#2#42 = #2#11 / #2#41 * #2#36; ||Div importe total
#2#43 = #2#12 / #2#41 * #2#36; ||Div imp por servir
#2#44 = #2#13 / #2#41 * #2#36; ||Div imp servido
|SI #2#37 = "D";
   #2#45 = #2#42;
   #2#46 = #2#43;
   #2#47 = #2#44;
   #2#48 = #2#11;
   #2#49 = #2#12;
   #2#50 = #2#13;
|SINO;
   #2#45 = #2#11;
   #2#46 = #2#12;
   #2#47 = #2#13;
   #2#48 = #2#42;
   #2#49 = #2#43;
   #2#50 = #2#44;
|FINSI;
|FPRC;

|PROCESO leecliente;
|ABRE #6;
#6#0 = #2#4;
|LEE 010#6=;
|SI FSalida ! 0;|DDEFECTO #6;|FINSI;
|LIBERA #6;
|CIERRA #6;
|FPRC;

|PROCESO contapedido;
     |DDEFECTO #2;
     #2#25 = #0#1;
     |HAZ ContaPV7;
     #0#1 = #2#25;  |PINTA #0#1;
|FPRC;


|PROCESO cabepedido;
|ABRE #2;
|DDEFECTO #2;
#2#25 = #0#1; ||SERIE
#2#0 = #0#3;
#2#1 = #0#2;
#2#2 = #0#2;
#2#4 = #1#1;
#2#8 = #1#2;
#2#11 = #1#8;
#2#12 = #2#11;
#2#14 = #1#4;
#2#19 = #1#2;
#2#20 = #1#5;
#2#21 = #1#7;
|HAZ leecliente;
|HAZ divisa;
|GRABA 010#2n;
|LIBERA #2;
|FPRC;

|PROCESO lipedido;
|ABRE #3;
|DDEFECTO #3;
|ABRE #5;
#5#0 = #4#2;
|LEE 010#5=;
|SI FSalida ! 0;|DDEFECTO #5;|FINSI;
|LIBERA #5;
|CIERRA #5;
#3#0 = #2#0;
#3#1 = #4#1;
#3#2 = #4#2;
#3#3 = 1; ||ALMACEN
#3#4 = #4#3;
#3#5 = #4#6;
#3#6 = #4#7;
#3#7 = #3#5 * #3#6;
#3#9 = #3#7 < #3#8;
#3#11 = #3#9;
#3#13 = #2#1;
#3#14 = 2; ||TIPO IVA
#3#16 = #2#7;
#3#18 = #5#3;
#3#20 = #2#4;
#3#28 = #2#25;
#3#42 = #3#5;
#3#38 = #3#6 / #2#41 * #2#36;
#3#39 = #3#9 / #2#41 * #2#36;
|SI #2#37 = "D";
  #3#40 = #3#38;
  #3#41 = #3#39;
|SINO;
  #3#40 = #3#6;
  #3#51 = #3#9;
|FINSI;
|GRABA 010#3n;
|LIBERA #3;
|CIERRA #3;
|FPRC;

|CALCULO tipo33;|TIPO 3;
|SI FSalida = 0;
  |ABRE #1;
  #1#0 = #0#0;
  |LEE 010#1=;
  |SI FSalida = 0;
    |HAZ cabepedido;
    |BUCLELIN 0lipedido#1;
  |FINSI;
|FINSI;
|FCAL;
