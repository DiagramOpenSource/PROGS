|FICHEROS;
     defelw05 #0;
     defelm03 #3;
     agifa049 #49;
     agifa074 #74;
|FIN;

|VARIABLES;
     &enUniDefe = 0;
     aSer = "";
     nNum = 0;
     nLin = 0;
     aArt = "";
     fFec = @;
     aTmp = "";
     aAlfa = "";
     nHay = 0;
     nModo = 0;
|FIN;

|PROCESO Actualiza;
     |DDEFECTO #3;
     #3#0 = #0#0;
     #3#1 = #0#1;
     #3#2 = #0#2;
     #3#3 = #0#4;
     |LEE 101#3=;
     |SI FSalida ! 0; |GRABA 020#3b; |FINSI;
     #3#4 = #0#3;
     #3#5 = #0#5;
     #3#6 = #0#7;
     #3#7 = #3#7 + #0#6;
     |GRABA 020#3a;
     |LIBERA #3;
|FPRC;

|DEFBUCLE Actualiza;
     #0#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Actualiza;
|FIN;

|PROCESO NoAlta; |TIPO 0;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 1;
          |AVISO;
          |ERROR;
     |FINSI;
|FPRC;

|PROCESO Min;
     #0#0 = aSer;
     #0#1 = nNum;
     #0#2 = "                    ";
     #0#8 = aArt;
|FPRC;

|PROCESO Max;
     #0#0 = aSer;
     #0#1 = nNum;
     #0#2 = "zzzzzzzzzzzzzzzzzzzz";
     #0#8 = aArt;
|FPRC;

|PROCESO Carga;
     nHay = 1;
     #0#0 = aSer;
     #0#1 = nNum;
     #0#2 = #49#2;
     #0#3 = #49#3;
     #0#6 = #49#4 * enUniDefe;
     #0#7 = fFec;
     #0#8 = aArt;
     |GRABA 000#0n;
|FPRC;

|DEFBUCLE Carga;
     #49#1;
     10;
     aArt, 001, 2;
     aArt, 999, 2;
     ;
     NULL, Carga;
|FIN;

|PROGRAMA;
     aAlfa = PARAMETRO % 103;
     |SI aAlfa = "ENT";
          aAlfa = PARAMETRO % 405; aSer = aAlfa;
          aAlfa = PARAMETRO % 906; nNum = aAlfa;
          aAlfa = PARAMETRO % 1503; nLin = aAlfa;
          aAlfa = PARAMETRO % 1820; aArt = aAlfa;
          aAlfa = PARAMETRO % 3810; fFec = aAlfa;
          aTmp = PARAMETRO % 48;
          |NOME_DAT #0 aTmp;
          |ABRE #0;
          |BUCLE Carga;
          |LEE 000#0p;
          |SI FSalida = 0;
               |ENTLINEAL #1#0, 4, 2, 20, 1, Min, Max;
          |FINSI;
          |CIERRA #0;
     |FINSI;
     |SI aAlfa = "ACT";
          aTmp = PARAMETRO % 4;
          |NOME_DAT #0 aTmp;
          |ABRE #3;
          |BUCLE Actualiza;
          |CIERRA #3;
     |FINSI;
     |SI aAlfa = "INI";
          aTmp = PARAMETRO % 4;
          |NOME_DAT #0 aTmp;
          |DELINDEX #0;
     |FINSI;
|FPRO;
