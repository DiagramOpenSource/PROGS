|FICHEROS;
     guerz035 #35;
     gomantho #0;
     gomantl1 #1;
     gopre001 #11;
|FIN;

|VARIABLES;
     aAlfa = "";
     nLin = 0;
|FIN;

|PROCESO UltLin1;
     #1#0 = #0#0;
     #1#1 = #0#1;
     #1#2 = 999;
     |LEE 000#1];
     |SI FSalida = 0;
          |LEE 000#1a;
     |SINO;
          |LEE 000#1u
     |FINSI;
     |SI #1#0 = #0#0; |Y #1#1 = #0#1;
          nLin = #1#2 + 1;
     |SINO;
          nLin = 1;
     |FINSI;
|FPRC;

|PROCESO Tipo3; |TIPO 3;
     |ABRE #11;
     #11#0 = #0#6;
     #11#1 = #0#7;
     |LEE 000#11=;
     |SI FSalida = 0;
          |MENAV "0000El presupuesto destino existe...";
     |SINO;
          |ABRE #1; |SELECT #2#1;
          #1#0 = #0#0;
          #1#1 = #0#1;
          #1#3 = #0#2;
          #1#4 = #0#3;
          |LEE 000#1=;
          |SI FSalida ! 0;
               |MENAV "0000No existe Presupuesto en Expediente..";
               |ACABA;
          |FINSI;

          aAlfa = "gopredup" + &59 + #0#6 + (("000000" + #0#7) % -106);
          |SUB_EJECUTA_NP aAlfa;
          #11#0 = #0#6;
          #11#1 = #0#7;
          |LEE 000#11=;
          |SI FSalida ! 0;
               |MENAV "0000ERROR al duplicar presupuesto...";
               |ACABA;
          |FINSI;
          |CIERRA #1;

          |SALVA_DATOS #1;
          |SELECT #1#1;
          |HAZ UltLin1;
          |REPON_DATOS #1;

          #1#0 = #0#4;
          #1#1 = #0#5;
          #1#2 = nLin;
          |GRABA 020#1n;
     |FINSI;
     |CIERRA #11;
|FPRC;
