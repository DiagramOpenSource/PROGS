/*


|FICHEROS;
     guerw057 #0;   ||TMP
     gosecive #1;
     goarticu #2;
     goapaive #3;
     gosubive #4;
     gofamive #5;
     godeivel #6;
     referen@ #7;
|FIN;

|VARIABLES;
     aLon = "";
     &eaPar = "";
     &Tempo = "";
     nSal = 0;
     aAlfa = "";
     aDef = "";
     aSec = "";
     aFam = "";
     aSub = "";
     aCap = "";
     aDes = "";
|FIN;

|PROCESO Ampliada;
     aAlfa = #6#2; |QBF aAlfa;
     aLon = aDes % A0;
     |SI aAlfa ! ""; |Y aLon < 180;
          |SI aDes = "";
               aDes = aAlfa;
          |SINO;
               aDes = aDes + " " + aAlfa;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE Ampliada;
     #6#1;
     ;
     #referen@#0, 001;
     #referen@#0, 999;
     ;
     NULL, Ampliada;
|FIN;

|PROCESO CargaFinal;
     aDes = "";
     |BUCLE Ampliada;
     #0#0 = #referen@#0;
     #0#1 = #referen@#1;
     #0#2 = aDes;
     |GRABA 020#0n;
|FPRC;

|DEFBUCLE CargaFinal;
     #referen@#1001;
     ;
     "                    ";
     "zzzzzzzzzzzzzzzzzzzz";
     ;
     NULL, CargaFinal;
|FIN;

|PROCESO Articulos;
|| ***ESTO PETA al hacer |CONSULTA_CLAVE
||     aAlfa = "SELECT goarticu.0,goarticu.1 FROM goarticu INTO sq" + Usuario + ".def WHERE ";

     nSal = 1;
     aAlfa = "SELECT * FROM goarticu INTO sq" + Usuario + ".def WHERE ";
||     aAlfa = aAlfa + "125 BETWEEN '" + aSec + "','" + aSec + "' AND ";
||     aAlfa = aAlfa + "2 BETWEEN '" + aFam + "','" + aFam + "' AND ";
||     aAlfa = aAlfa + "3 BETWEEN '" + aSub + "','" + aSub + "' AND ";
||     aAlfa = aAlfa + "127 BETWEEN '" + aCap + "','" + aCap + "'";
     aAlfa = aAlfa + "125 == '" + aSec + "' AND ";
     aAlfa = aAlfa + "2 == '" + aFam + "' AND ";
     aAlfa = aAlfa + "3 == '" + aSub + "' AND ";
     aAlfa = aAlfa + "127 == '" + aCap + "'";
     |SQL aAlfa;
     |SI FSalida = 0;
          |DDEF aDef; |QBF aDef;
          aDef = aDef + "sq" + Usuario + ".mas";
          |CARGA_DEF aDef, referen@;
          |SI FSalida = 0;
           ||***PETA
           ||ABRE #referen@;
           ||CONSULTA_CLAVE #1#referen@;
           ||CIERRA #referen@;

               |HAZ CreaTempo; |NOME_DAT #0 Tempo; |DELINDEX #0;
               |ABRE #0;
               |ABRE #6;
               |BUCLE CargaFinal;
               |CIERRA #6;
               |LEE 000#0p;
               |CONSULTA_CLAVE #1#0;
               |SI FSalida = 0;
                    eaPar = #0#0;
               |FINSI;
               |CIERRA #0;
               |HAZ BoraTempo; |DELINDEX #0;

               |DELINDEX #referen@;
               |DESCARGA_DEF #referen@;
          |FINSI;
          |FBORRA aDef;
     |FINSI;
|FPRC;

|PROCESO Capitulos;
     nSal = 1;
     aAlfa = "SELECT * FROM goapaive INTO sq" + Usuario + ".def WHERE ";
||     aAlfa = aAlfa + "2 BETWEEN '" + aSub + "','" + aSub + "'";
     aAlfa = aAlfa + "2 == '" + aSub + "'";
     |SQL aAlfa;
     |SI FSalida = 0;
          |DDEF aDef; |QBF aDef;
          aDef = aDef + "sq" + Usuario + ".mas";
          |CARGA_DEF aDef, referen@;
          |SI FSalida = 0;
               |ABRE #referen@;
               |CONSULTA_CLAVE #1#referen@;
               nSal = FSalida;
               aCap = #referen@#0;
               |CIERRA #referen@;
               |DELINDEX #referen@;
               |DESCARGA_DEF #referen@;
          |FINSI;
          |FBORRA aDef;
          |SI nSal = 0;
               |HAZ Articulos;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO Subfamilia;
     nSal = 1;
     aAlfa = "SELECT * FROM gosubive INTO sq" + Usuario + ".def WHERE ";
||     aAlfa = aAlfa + "2 BETWEEN '" + aFam + "','" + aFam + "'";
     aAlfa = aAlfa + "2 == '" + aFam + "'";
     |SQL aAlfa;
     |SI FSalida = 0;
          |DDEF aDef; |QBF aDef;
          aDef = aDef + "sq" + Usuario + ".mas";
          |CARGA_DEF aDef, referen@;
          |SI FSalida = 0;
               |ABRE #referen@;
               |CONSULTA_CLAVE #1#referen@;
               nSal = FSalida;
               aSub = #referen@#0;
               |CIERRA #referen@;
               |DELINDEX #referen@;
               |DESCARGA_DEF #referen@;
          |FINSI;
          |FBORRA aDef;
          |SI nSal = 0;
               |HAZ Capitulos;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO Familia;
     nSal = 1;
     aAlfa = "SELECT * FROM gofamive INTO sq" + Usuario + ".def WHERE ";
||     aAlfa = aAlfa + "2 BETWEEN '" + aSec + "','" + aSec + "'";
     aAlfa = aAlfa + "2 == '" + aSec + "'";
     |SQL aAlfa;
     |SI FSalida = 0;
          |DDEF aDef; |QBF aDef;
          aDef = aDef + "sq" + Usuario + ".mas";
          |CARGA_DEF aDef, referen@;
          |SI FSalida = 0;
               |ABRE #referen@;
               |CONSULTA_CLAVE #1#referen@;
               nSal = FSalida;
               aFam = #referen@#0;
               |CIERRA #referen@;
               |DELINDEX #referen@;
               |DESCARGA_DEF #referen@;
          |FINSI;
          |FBORRA aDef;
          |SI nSal = 0;
               |HAZ Subfamilia;
          |FINSI;
     |FINSI;
|FPRC;

|PROGRAMA;
     |ABRE #1;
     |LEE 020#1p;
     |CONSULTA_CLAVE #1#1;
     |SI FSalida = 0;
          aSec = #1#0;
          |HAZ Familia;
     |FINSI;
     |CIERRA #1;
|FPRO;
*/
