          Una copia de esto esta en el agifa292

|FICHEROS;
     agifa292 #0;
     agifa293 #1;
     dsm00010 #910;
     agifa142 #142;
     agifa019 #19;
     dsz00082 #82; || ESTA!!!   (Pantalla Nivel)
     agifa292@;
     agifa293a@;
     agifa293b@;
|FIN;

|VARIABLES;
     nHayLin = 0;
     &enSwBorra = 0;
     nNivel = 0;
     nModo = 0;
     nSw = 0;
     &Tempo = "";
     nLin = 0;
     aDef = "";
     aAlfa = "";
     nHay = 0;
     &eaDes = "";
     &enAlta = 0;
     &eaArticulo = "";
     &eAlfa  = "";
     &eAlfa1 = "";
     &eAlfa2 = "";
     &eAlfa3 = "";
     &eAlfa4 = "";
     &eaArtiSeri = "";
     aArtEqui = "";
     aArtPrin = "";
     nPrime = 0;
|FIN;

|PROCESO Crea;
     |SELECT #2#agifa293b@;
     #agifa293b@#2 = aArtEqui;
     #agifa293b@#0 = aArtPrin;
     |LEE 000#agifa293b@.=;
     |SI FSalida = 0; |ACABA; |FINSI;

     |SELECT #1#agifa293b@;
     #agifa293b@#0 = aArtPrin;
     #agifa293b@#1 = 99;
     |LEE 000#agifa293b@.];
     |SI FSalida = 0;
          |LEE 000#agifa293b@.a;
     |SINO;
          |LEE 000#agifa293b@.u;
     |FINSI;
     |SI FSalida = 0; |Y #agifa293b@#0 = aArtPrin;
          nLin = #agifa293b@#1 + 1;
     |SINO;
          nLin = 1;
     |FINSI;
     |DDEFECTO #agifa293b@;
     #agifa293b@#0 = aArtPrin;
     #agifa293b@#1 = nLin;
     #agifa293b@#2 = aArtEqui;
     |DDEFECTO #19;
     #19#0 = #agifa293b@#2;
     |LEE 000#19=;
     #agifa293b@#3 = #19#1;
     |GRABA 020#agifa293b@.n;

     |DDEFECTO #agifa292@;
     #agifa292@#0 = #agifa293b@#0;
     |LEE 000#agifa292@.=;
     |SI FSalida ! 0;
          |DDEFECTO #19;
          #19#0 = #agifa292@#0;
          |LEE 000#19=;
          #agifa292@#1 = #19#1;
          |GRABA 020#agifa292@.n;
     |FINSI;
|FPRC;

|PROCESO Borra;
     |SELECT #2#agifa293b@;
     #agifa293b@#2 = aArtEqui;
     #agifa293b@#0 = aArtPrin;
     |LEE 101#agifa293b@.=;
     |SI FSalida = 0;
          |BORRA 020#agifa293b@.a;

          |SELECT #1#agifa293b@;
          #agifa293b@#0 = aArtPrin;
          #agifa293b@#1 = 0;
          |LEE 000#agifa293b@.];
          |SI FSalida ! 0; |O #agifa293b@#0 ! aArtPrin;
               #agifa292@#0 = aArtPrin;
               |LEE 101#agifa292@.=;
               |SI FSalida = 0;
                    |BORRA 020#agifa292@.a;
               |FINSI;
               |LIBERA #agifa292@;
          |FINSI;
     |FINSI;
     |LIBERA #agifa293b@;
|FPRC;

|PROCESO CreaEquiva;
     |SI aArtPrin ! aArtEqui;
          nNivel = nNivel + 1;
          |SI enSwBorra = 1;
               |HAZ Borra;
          |SINO;
               |HAZ Crea;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO LinEquiva2;
     |SI nNivel < #0#2;
          |SI nPrime = 0;
               nPrime = 1;
               aArtPrin = #1#2;
               aArtEqui = #1#0;
               |HAZ CreaEquiva;
          |FINSI;
          |SI nNivel < #0#2;
               aArtPrin = #1#2;
               aArtEqui = #agifa293a@#2;
               |HAZ CreaEquiva;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE LinEquiva2;
     #agifa293a@#1002;
     ;
     #1#0, 01;
     #1#0, 99;
     ;
     NULL, LinEquiva2;
|FIN;

|PROCESO LinEquiva1;
     nPrime = 0;
     nNivel = 0;
     |BUCLE LinEquiva2;
|FPRC;

|PROCESO Procesa;
     |DDEF aDef;
     aAlfa = aDef + "agifa292";
     |CARGA_DEF aAlfa, agifa292@;
     |SI FSalida = 0;
          aAlfa = aDef + "agifa293";
          |CARGA_DEF aAlfa, agifa293a@;
          |SI FSalida = 0;
               aAlfa = aDef + "agifa293";
               |CARGA_DEF aAlfa, agifa293b@;
               |SI FSalida = 0;
                    |ABRE #agifa292@;
                    |ABRE #agifa293b@;
                    |ABRE #19;
                    |BUCLELIN 0 LinEquiva1 #0;
                    |CIERRA #19;
                    |CIERRA #agifa292@;
                    |CIERRA #agifa293b@;
                    |DESCARGA_DEF #agifa293b@;
               |FINSI;
               |DESCARGA_DEF #agifa293a@;
          |FINSI;
          |DESCARGA_DEF #agifa292@;
     |FINSI;
|FPRC;

|PROCESO MiraLin;
     nHayLin = 1;
|FPRC;

|PROGRAMA;
     |ABRE #0;
     #0#0 = eaArticulo;
     |LEE 101#0=;
     |SI FSalida ! 0;
          |MENAV "0000Articulo sin Equivalentes";
     |SINO;
          nHayLin = 0;
          |BUCLELIN 2MiraLin#0;
          |SI nHayLin = 0;
               |MENAV "0000Articulo sin Equivalentes";
          |SINO;
               |SI enSwBorra = 0;
                    #82#0 = 1;
                    #82#1 = #0#0;
                    #82#2 = #0#1;
                    |PINPA #0#82;
                    |PINDA #0#82;
                    |ENCAMPO #0#82;
                    #0#2 = #82#0; || Nivel
               |FINSI;
               #0#1 = eaDes;
               |GRABA 020#0a;
               |HAZ Procesa;
          |FINSI;
     |FINSI;
     |CIERRA #0;
|FPRO;
