                    Actualizar necesidades
|FICHEROS;
  agifa006 #0;
  agifa019 #4;
  dsm00010 #910;
|FIN;

|CAMPOS;
  #4#0    artcodig ;     #4#6    artstock ;
  #4#13   artfabri ;     #4#104  artdispo ;
  #4#9    artpreco ;     #4#10   artvastk ;
  #4#11   artneces ;     #4#15   artpeser ;
  #4#16   artperec ;     #4#17   artpeval ;
  #4#7    artminim ;     #4#12   artreser;
|FIN;

|VARIABLES;
     &eaArticulo = "";
     &eAlfa  = "";
     &eAlfa1 = "";
     &eAlfa2 = "";
     &eAlfa3 = "";
     &eAlfa4 = "";
|FIN;

|PROCESO Calc6;  |TIPO 6;
     |ABRE #910;
     |LEE 040#910p;
     |SI FSalida ! 0;  |DDEFECTO #910;  |FINSI;
     |CIERRA #910;

     |SI #910#1 ! "S";  |ACABA;  |FINSI;

     |SI #910#2 [ 2;
         eAlfa = #0Campo;
         |SUB_EJECUTA_NP "dsz99990";         || Por Puntos
         |SI eAlfa ! "-1";

               eaArticulo = eAlfa;      || 700000-4215

               #0Campo = eAlfa;
               |PINTA #0Campo;
         |SINO;
               |ERROR;
         |FINSI;
     |FINSI;
|FPRC;

|PROCESO PideArt;  |TIPO 7;
     |ABRE #910;
     |LEE 040#910p;
     |SI FSalida ! 0;  |DDEFECTO #910;  |FINSI;
     |CIERRA #910;

     |SI #910#2 [ 2;    |ACABA;  |FINSI;

     eAlfa = #0Campo;
     |SUB_EJECUTA_NP "dsz99990";                 || Por Pantalla
     |SI eAlfa = "-1";  |PTEC 807;  |ACABA;  |FINSI;
     |SI eAlfa = "-2";              |ACABA;  |FINSI;

     ||eaArticulo = eAlfa;      || 700000-4215

     #0Campo = eAlfa;
     |PINTA #0Campo;
     |PTEC 802;
|FPRC;

|CALCULO condi;|TIPO 0;
 |ERROR;
|FCAL;


|CALCULO hazlo;|TIPO 0;
|LEE 120#4=;
artneces = artminim + artpeser;
artneces = artneces - artdispo;
artneces = artneces - artfabri;
artneces = artneces - artreser;
artneces = artneces - artperec;
artneces = artneces - artpeval;
|GRABA 001#4a;
|FCAL;


|DEFBUCLE agifa4060;
#4#1;
;
#0#0;
#0#1;
e;
condi,hazlo;
|FIN;


|CALCULO actua;|TIPO 3;
 |BUCLE agifa4060;
|FCAL;
