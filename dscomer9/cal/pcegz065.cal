|FICHEROS;
     pcegz065 #0;
     pcegw014 #14;
     agifa019 #19;
     pcegm041 #41;
     agifa065 #65;
     agifa071 #71;
|FIN;

|VARIABLES;
     aAlfa = "";
|FIN;

|PROCESO Historico;
     |DDEFECTO #19;
     #19#0 = #65#0;
     |LEE 000#19=;
     |SI FSalida = 0; |Y #19#2 ] #0#0; |Y #19#2 [ #0#1;
          |DDEFECTO #14;
          #14#0 = #19#0;
          |LEE 101#14=;
          |SI FSalida ! 0; |GRABA 020#14b; |FINSI;
          #14#1 = #19#1;
          |SI #65#1 [ #0#4;
               #14#2 = #14#2 + #65#6;
          |SINO;
               |SI #65#2 = #41#27; |Y #65#11 = #41#28; ||SS Donacion
                    |SI #41#30 = "S";
                         #14#15 = #14#15 + #65#6;
                    |SINO;
                         #14#15 = #14#15 - #65#6;
                    |FINSI;
               |SINO;
                 |SI #65#2 = #41#31; |Y #65#11 = #41#32; ||SS Reparacion
                      |SI #41#34 = "S";
                           #14#16 = #14#16 + #65#6;
                      |SINO;
                           #14#16 = #14#16 - #65#6;
                      |FINSI;
                 |SINO;
                    |SI #65#2 = #41#2;  ||AV
                         |DDEFECTO #71;
                         #71#29 = #65#11;
                         #71#0 = #65#3;
                         #71#1 = #65#4;
                         |LEE 000#71=;
                         |SI #71#9 = 0;
                              |SI #41#3  = "S"
                                   #14#14 = #14#14 + #65#6;
                              |SINO;
                                   #14#14 = #14#14 - #65#6;
                              |FINSI;
                         |SINO;
                              |SI #71#5 > 0;
                                   |SI #41#3  = "S"
                                        #14#3 = #14#3 + #65#6;
                                   |SINO;
                                        #14#3 = #14#3 - #65#6;
                                   |FINSI;
                              |SINO;
                                   |SI #41#3  = "S"
                                        #14#13 = #14#13 + #65#6;
                                   |SINO;
                                        #14#13 = #14#13 - #65#6;
                                   |FINSI;
                              |FINSI;
                         |FINSI;
                    |SINO;
                         |SI #65#2 = #41#5;
                              |SI #41#6 = "S";
                                   #14#4 = #14#4 + #65#6;
                              |SINO;
                                   #14#4 = #14#4 - #65#6;
                              |FINSI;
                         |SINO;
                              |SI #65#2 = #41#8;
                                   |SI #41#9 = "S";
                                        #14#5 = #14#5 + #65#6;
                                   |SINO;
                                        #14#5 = #14#5 - #65#6;
                                   |FINSI;
                              |SINO;
                                   |SI #65#2 = #41#11;
                                        |SI #41#12 = "S";
                                             #14#6 = #14#6 + #65#6;
                                        |SINO;
                                             #14#6 = #14#6 - #65#6;
                                        |FINSI;
                                   |SINO;
                                        |SI #65#2 = #41#14;
                                             |SI #41#15 = "S";
                                                  #14#7 = #14#7 + #65#6;
                                             |SINO;
                                                  #14#7 = #14#7 - #65#6;
                                             |FINSI;
                                        |SINO;
                                             |SI #65#2 = #41#17;
                                                  |SI #41#18 = "S";
                                                       #14#8 = #14#8 + #65#6;
                                                  |SINO;
                                                       #14#8 = #14#8 - #65#6;
                                                  |FINSI;
                                             |SINO;
                                                  |SI #65#2 = #41#20;
                                                       |SI #41#21 = "S";
                                                            #14#9 = #14#9 + #65#6;
                                                       |SINO;
                                                            #14#9 = #14#9 - #65#6;
                                                       |FINSI;
                                                  |SINO;
                                                       |SI #65#2 = #41#23;
                                                            |SI #41#24 = "S";
                                                                 #14#10 = #14#10 + #65#6;
                                                            |SINO;
                                                                 #14#10 = #14#10 + #65#6;
                                                            |FINSI;
                                                       |SINO;
                                                            #14#11 = #14#11 + #65#6;
                                                       |FINSI;
                                                  |FINSI;
                                             |FINSI;
                                        |FINSI;
                                   |FINSI;
                              |FINSI;
                         |FINSI;
                    |FINSI;
                 |FINSI;
               |FINSI;
          |FINSI;
          #14#12 = #14#2+#14#3+#14#4+#14#5+#14#6+#14#7+#14#8+#14#9+#14#10+#14#11+#14#13+#14#14;
          #14#12 = #14#12 + #14#15 + #14#16;
          |GRABA 020#14a;
          |LIBERA #14;
     |FINSI;
|FPRC;

|DEFBUCLE Historico;
     #65#1;
     ;
     #0#2, "01.01.0000", "  ", 000000, 00000, "     ";
     #0#3,         #0#5, "zz", 999999, 99999, "zzzzz";
     ;
     NULL, Historico;
|FIN;

|PROCESO Tmp;
     |PRINT;
|FPRC;

|DEFBUCLE Tmp;
     #14#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Tmp;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     aAlfa = Usuario;
     |NOME_DAT #14 aAlfa; |DELINDEX #14;

     |ABRE #41; |LEE 000#41p; |CIERRA #41;

     Impresora = "CrystalReport";
     |IMPRE -1;
     |SI FSalida = 0;
          |INFOR "pcegz065";
          |SI FSalida = 0;
               |ABRE #14;
               |ABRE #19;
               |ABRE #71;
               |BUCLE Historico;
               |CIERRA #71;
               |CIERRA #14;
               |CIERRA #19;
               |BUCLE Tmp;
               |PIEINF;
               |FININF;
          |FINSI;
          |FINIMP;
     |FINSI;

     |DELINDEX #14;
|FPRC;
