|FICHEROS;
   agifa762 #0;

   agifa704 #10;
   agifa722 #11;

   canempr@ #100;
|FIN;

|VARIABLES;
   aAlfa = "";

   &enAnyo1 = 0;
   &enAnyo2 = 0;

   nSwPrimero = 0;
|FIN;

|PROCESO EsMalo;
   |SI #agifa762#1 = "I"; |O #agifa762#1 = "A";
      |SI nSwPrimero = 1;
         |IMPRE -1;
         |SI FSalida ! 0; |ACABA; |FINSI;

         |INFOR "agifa762";
         |SI FSalida ! 0; |FINIMP; |ACABA; |FINSI;

         nSwPrimero = 0;
      |FINSI;
      |PRINT;
   |FINSI;

   |SI #agifa762#1 = "R"; |O #agifa762#1 = "A";
      |BORRA 020#agifa722.a;
   |FINSI;
|FPRC;

|PROCESO HistoricoEnlaces;
   #agifa704#0 = #agifa722#10;
   |LEE 000#agifa704.=;
   |SI FSalida = 0;
      aAlfa = #agifa704#6; |QBF aAlfa;
      aAlfa = aAlfa + "def/canempre.mas";
      |CARGA_DEF aAlfa, canempr@;
      |SI FSalida = 0;
         aAlfa = #agifa704#6; |QBF aAlfa; aAlfa = aAlfa + "fich/";
         |PATH_DAT #canempr@#aAlfa#; |ABRE #canempr@;
         #canempr@#2 = #agifa722#8;
         #canempr@#3 = #agifa722#9;
         |LEE 000#canempr@.=;
         |SI FSalida = 0;
            enAnyo1 = #canempr@#26;
            |SI enAnyo1 > 80; enAnyo1 = enAnyo1 + 1900; |SINO; enAnyo1 = enAnyo1 + 2000; |FINSI;
            aAlfa = #agifa722#5; |QBF aAlfa; aAlfa = aAlfa % -104; enAnyo2 = aAlfa;
            |SI enAnyo1 ! enAnyo2; |HAZ EsMalo; |FINSI;
         |FINSI;
         |CIERRA #canempr@; |DESCARGA_DEF #canempr@;
      |FINSI;
   |FINSI;
|FPRC;

|DEFBUCLE HistoricoEnlaces;
#agifa722#1;
;
INICIO;
FINAL;
;
NULL, HistoricoEnlaces;
|FIN;

|PROGRAMA;
   |CLS;
   |CABEZA "Revision historico enlaces";
   |PINPA #0#0; |PINDA #0#0;
   |ENDATOS #1#0;
   |SI FSalida = 0; |Y #0#0 = "S";
      nSwPrimero = 1;
      |ABRE #agifa704; |BUCLE HistoricoEnlaces; |CIERRA #agifa704;
      |SI nSwPrimero = 0; |PIEINF; |FININF; |FINIMP; |FINSI;
   |FINSI;
|FPRO;
