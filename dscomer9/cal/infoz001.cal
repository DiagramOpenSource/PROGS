|FICHEROS;
     infoz001 #0;
     infow001 #1;
     infow002 #2;
     agifa010 #10;
     agifa071 #71;
     agifa077 #77;
     agifa080 #80;
     agifa019 #19;
|FIN;

|VARIABLES;
     &Tempo = "";
     aTmp1 = "";
     aTmp2 = "";
     aAlfa = "";
     nHay = 0;
     nPrecio = 0;
|FIN;

|PROCESO Tmp;
     |DDEFECTO #2;
     #2#0 = #1#5;
     |LEE 000#2=;

     #1#9 = #2#2;             || P.compra
     #1#10 = #1#6 * #1#9;     || Coste
     #1#11 = #1#8 - #1#10;    || Beneficio

     |PRINT;
     nHay = 1;

     #19#0 = #2#0;
     |LEE 101#19=;
     |SI FSalida = 0;
          #19#117 = #2#2;
          |GRABA 020#19a;
          |LIBERA #19;
     |FINSI;
|FPRC;

|DEFBUCLE Tmp;
     #1#2;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Tmp;
|FIN;

|PROCESO agifa080;
     #2#0 = #80#2;
     |LEE 101#2=;
     |SI FSalida = 0;
          |SI #2#1 < #77#1;
               nPrecio = ((((#80#6 < #80#8) < #80#26) < #77#5) < #77#32) < #77#7;
               #2#1 = #77#1;
               #2#2 = nPrecio;
               |GRABA 020#2a;
          |FINSI;
          |LIBERA #2;
     |FINSI;
|FPRC;

|DEFBUCLE agifa077;
     #77#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, NULL, agifa080;
|FIN;

|PROCESO agifa071;
     |SI #71#2 < #0#2; |O #71#2 > #0#3;
          |ACABA;
     |FINSI;

     |DDEFECTO #1;
     #1#0 = #71#29;
     #1#1 = #71#0;
     #1#5 = #71#2;
     |LEE 101#1=;
     |SI FSalida ! 0; |GRABA 020#1b; |FINSI;
     #1#2 = #10#1;
     #1#3 = #10#3;
     #1#4 = #10#6;
     #1#5 = #71#2;
     #1#6 = #71#5;
     nPrecio = ((((#71#6 < #71#8) < #71#33) < #10#5) < #10#32) < #10#7;
     #1#7 = nPrecio;
     #1#8 = #1#6 * #1#7;
     #1#12 = #71#3;
     |GRABA 020#1a;
     |LIBERA #1;


     #2#0 = #71#2;
     |LEE 000#2=;
     |SI FSalida ! 0; |GRABA 020#2n; |FINSI;
|FPRC;

|DEFBUCLE agifa010;
     #10#3;
     ;
     #0#4, #0#0, "     ", 000001;
     #0#5, #0#1, "zzzzz", 999999;
     ;
     NULL, NULL, agifa071;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |HAZ CreaTempo; aTmp1 = Tempo; |NOME_DAT #1 Tempo; |DELINDEX #1;
     |HAZ CreaTempo; aTmp2 = Tempo; |NOME_DAT #2 Tempo; |DELINDEX #2;

     |IMPRE 0;
     |SI FSalida = 0;
          |INFOR "infoz001";
          |SI FSalida = 0;
               |ABRE #2;
               |ABRE #1;
               |BUCLE agifa010;
               |CIERRA #1;

               |BUCLE agifa077;
               |ABRE #19;
               |BUCLE Tmp;
               |CIERRA #19;
               |CIERRA #2;
               |SI nHay ! 0; |PIEINF; |FINSI;
               |FININF;
          |SINO;
               |MENAV "0000No existe informe 'infoz001'";
          |FINSI;
          |FINIMP;
     |FINSI;


     Tempo = aTmp1; |HAZ BoraTempo; |DELINDEX #1;
     Tempo = aTmp2; |HAZ BoraTempo; |DELINDEX #2;
|FPRC;
