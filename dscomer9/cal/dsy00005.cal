|FICHEROS;
     dsy00005 #0;
     dsm00031 #1;
     dsm00030 #2;
     agifa019 #19;
     agifa324 #324;
     agifa321 #321;
|FIN;

|VARIABLES;
     &enCaja   = 0;
     &efFecha  = @;

     aInforme  = "dsy00005";
     nCaja     = 0;
     fFecha    = @;
     nLin      = 0;
     &nDeci_PreBase = 0;
     t1        = 0;
     t2        = 0;
     t3        = 0;
     t4        = 0;
     t5        = 0;
     t6        = 0;
     nSw       = 0;
     nSwi      = 0;
|FIN;

|PROCESO Decimal;
     |ABRE #agifa324;
     |ABRE #agifa321;
     #agifa324#0 = #agifa019#165;
     |LEE 001#agifa324.=;
     |LEE 001#agifa321.p;
     #agifa324#0 = #agifa321#9;
     |LEE 001#agifa324.=;
     nDeci_PreBase = #agifa324#9;  ||Decimales precio de moneda base
     |CIERRA #agifa321;
     |CIERRA #agifa324;
|FPRC;

|PROCESO dsm00031;
     #19#0 = #1#3;
     |LEE 000#19=;
     |HAZ Decimal;

     |SI nCaja ! #1#0; |O fFecha ! #1#1; |O nLin ! #1#2;
          |SI nLin ! 0; |Y nSwi ! 0;
               |PIEINF;
               nSwi = 0;
          |FINSI;

          |ABRE #2;
          #2#0 = #1#0;
          |LEE 000#2=;
          |CIERRA #2;
     |FINSI;

     t1 = #1#6 + #1#12;
     t2 = #1#7 + #1#13;
     t3 = #1#8 + #1#14;
     t4 = #1#9 + #1#15;
     t5 = #1#10 + #1#16;
     t6 = #1#11 + #1#17;

     |SI t1 ! 0; |Y #2#7 = "S"; nSw = 1; |FINSI;
     |SI t2 ! 0; |Y #2#8 = "S"; nSw = 1; |FINSI;
     |SI t3 ! 0; |Y #2#9 = "S"; nSw = 1; |FINSI;
     |SI t4 ! 0; |Y #2#10 = "S"; nSw = 1; |FINSI;
     |SI t5 ! 0; |Y #2#11 = "S"; nSw = 1; |FINSI;
     |SI t6 ! 0; |Y #2#12 = "S"; nSw = 1; |FINSI;

     |SI nSw = 1;
          |PRINT;
          nSwi = 1;
     |FINSI;
     nSw = 0;

     nCaja = #1#0;
     fFecha = #1#1;
     nLin = #1#2;
|FPRC;

|DEFBUCLE dsm00031;
     #1#1;
     ;
     #0#0, #0#2, 001, #0#4;
     #0#1, #0#3, 999, #0#5;
     ;
     NULL, dsm00031;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |IMPRE 0;
     |SI FSalida = 0;
          |INFOR aInforme;
          |SI FSalida = 0;
               |ABRE #19;
               |BUCLE dsm00031;
               |CIERRA #19;
               |SI nLin ! 0; |Y nSwi ! 0;
                    |PIEINF;
               |FINSI;
               |FININF;
          |FINSI;
          |FINIMP;
     |FINSI;
|FPRC;

|PROGRAMA;
     |SI enCaja ! 0;          || Viene del agift550
          |DDEFECTO #0;
          #0#0 = enCaja;
          #0#1 = enCaja;
          #0#2 = efFecha;
          #0#3 = efFecha;
          |HAZ Tipo3;
     |SINO;
          |MANTE #0;
     |FINSI;
|FPRO;
