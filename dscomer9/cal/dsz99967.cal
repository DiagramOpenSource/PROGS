|FICHEROS;
     dsz99967 #0;
     agifa077 #77;
     agifa080 #80;
     agifa081 #81;
     agifa067 #67;
     agifa019 #19;
|FIN;

|VARIABLES;
     &enForma = 0;
     &nDeci_PreDiv  = 0;
     &nDeci_PreDivP = 0;
     &eaDocu   = 0;
     nLin      = 0;
     &enDesprecia = 0;
     {-1}aMenu = "";
     aMenu1    = "2400";
     aMenu2    = "1";
     aMenu3    = "Despreciar:  ";
     aMenu4    = "NDIF";
     aMenu5    = "  NO  ";
     aMenu6    = " Despreciar ";
     aMenu7    = " Incidencia ";
     aMenu8    = " F. Entrega ";
     nPPort1   = 0;
     nPPort2   = 0;
     nImpDiv   = 0;
     nNume7    = 0;
     nNume11   = 0;
|FIN;
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

|PROCESO Linea;
     #67#28 = #81#25;
     #67#0 = #81#0;
     #67#1 = 999;
     |LEE 000#67];
     |SI FSalida = 0;
          |LEE 000#67a;
     |SINO;
          |LEE 000#67u;
     |FINSI;
     |SI FSalida = 0; |Y #67#28 = #81#25; |Y #67#0 = #81#0;
          nLin = #67#1 + 1;
     |SINO;
          nLin = 1;
     |FINSI;
     #67#28 = #80#29;
     #67#0 = #80#12;
     #67#1 = #80#21;
     |LEE 020#67=;
     #67#28 = #81#25;
     #67#0 = #81#0;
     #67#1 = nLin;
     #67#5 = -#67#12;
     #67#12 = 0;
     #67#37 = #67#5;
     #67#38 = 0;
     |HAZ TotalLin67;
     |GRABA 020#67n;
     eaDocu = "agifa067";
     enForma = 1;
     |HAZ StockEntra;
|FPRC;

|PROCESO PideFechaEnt;
     |PUSHV 0501 2380;
     |BLANCO 1527 1948;
     |PINPA #0#0;
     |PINDA #0#0;
     |ENCAMPO #0#0;
     |SI FSalida = 0;
          |ABRE #67;
          #67#28 = #80#29;
          #67#0 = #80#12;
          #67#1 = #80#21;
          |LEE 121#67=;
          |SI FSalida = 0;
               #67#13 = #0#0;
               |GRABA 020#67a;
          |FINSI;
          |CIERRA #67;
     |FINSI;
     |POPV;
|FPRC;

|PROCESO DespreDiexpa1;
     |MENU aMenu;

     enDesprecia = FSalida;
     |SI FSalida [ 1;
          FSalida = 1;
     |SINO;
          |SI enDesprecia = 4;
               |HAZ PideFechaEnt;
          |FINSI;
          FSalida = 0;
     |FINSI;
|FPRC;

|PROCESO DespreDiexpa2;
     |SI enDesprecia = 3; ||Incidencia, Crea nuevo pedido
          nDeci_PreDivP = nDeci_PreDiv;
          |ABRE #81;
          |ABRE #67;
          #81#25 = #80#29;
          #81#0 = #80#12;
          |LEE 020#81=;
          #81#25 = "I";
          |LEE 101#81=;
          |SI FSalida ! 0;
               #81#24 = 0;
               |GRABA 020#81b;
          |FINSI;
          |HAZ Linea;
          |HAZ CalCabAgifa081;
          |CIERRA #81;
          |CIERRA #67;
     |FINSI;
     enDesprecia = 0;
|FPRC;

|PROCESO DesprePedLin;
     |ABRE #81;
     |ABRE #67;
     #81#25 = #80#29;
     #81#0 = #80#12;
     |LEE 121#81=;
     |SI FSalida = 0;
          #67#28 = #80#29;
          #67#0 = #80#12;
          #67#1 = #80#21;
          |LEE 121#67=;
          |SI FSalida = 0;
               #67#12 = -1*(#67#5 - #67#38);
               enForma = -1;
               eaDocu = "agifa067";
               |HAZ StockEntra;
               #67#5 = #67#37 + #67#12;
               |HAZ TotalLin67;
               |GRABA 020#67a;
          |FINSI;
          |HAZ CalCabAgifa081;
     |FINSI;
     |CIERRA #67;
     |CIERRA #81;
|FPRC;

|PROCESO DespreDiexpa3;
     |MENU aMenu;
     enDesprecia = FSalida;

     |SI enDesprecia = 2;
          |HAZ DesprePedLin;
     |FINSI;
     |SI enDesprecia = 3;
          |HAZ DesprePedLin;
          |HAZ DespreDiexpa2;
     |FINSI;
     |SI enDesprecia = 4;
          |HAZ PideFechaEnt;
     |FINSI;
     enDesprecia = 0;
|FPRC;
