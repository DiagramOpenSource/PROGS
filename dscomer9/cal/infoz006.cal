|FICHEROS;
     infoz006 #0;
     agifa210 #10;
     dsm00020 #20;
     agifa104 #104,MANTE;
     agifa142 #142;
|FIN;

|VARIABLES;
     nTecla = 0;
     &abono = "";
     &enSwNoImp = 0;
     &enInfoAuto = 0;
     &eaImpresora = "";
     &eaRepreAdj = "";
     &Tempo = "";
     &fec_alb = @;
     &ser_ped = "";
     &num_ped = 0;
     &eaSerAlb = "";
     &enNumAlb = 0;
     &eaSerPedido = "";
     &enNumPedido = 0;
     &eaSerDefe = "";
     &eaFecAlb = "";
     &ser_alb = "";
     &num_alb = 0;
     &abo_alb = "N";

     &enInfoAge = 0;
     &enInfoBul = 0;
     &enInfoPes = 0;
     &eaInfoFac = "";
     &enInforpConfi = -1;

     aTmp = "";
     nSal = 0;
     nLin = 0;
     aAlfa = "";
     nSwSal = 0;

     {-1}aMenu = "";
     aMenu1 = "2400";
     aMenu2 = "1";
     aMenu3 = "Opciones: ";
     aMenu4 = "RAC";
     aMenu5 = " Repasar ";
     aMenu6 = " Aceptar ";
     aMenu7 = " Cancelar ";
|FIN;

|PROCESO ModiPedido;
     |ABRE #104;
     #104#25 = #0#1;
     #104#0 = #0#2;
     |LEE 121#104=;
     |SI FSalida = 0;
          |PUSHV 0501 2380;
          |PINPA #0#104;
          |PINDA #0#104;
          |ENDATOS #2#104;
          |SI FSalida = 0;
               |GRABA 020#104a;
          |FINSI;
          |POPV;
     |FINSI;
     |CIERRA #104;
|FPRC;

|PROCESO Pedido6; |TIPO 6;
     nTecla = FSalida;
     |ABRE #104;
     #104#25 = #0#1;
     #104#0 = #0#2;
     |LEE 000#104=;
     |SI FSalida ! 0;
          |MENAV "0000No existe pedido...";
          |ERROR;
     |FINSI;
     |CIERRA #104;
|FPRC;

/*
|PROCESO ModiAlb;
     enSwNoImp = 1;
     |ABRE #10;
     #10#52 = eaSerAlb;
     #10#0 = enNumAlb;
     |LEE 121#10=;
     |SI FSalida = 0;
          |PUSHV 0501 2380;
          |CLS;
          |PINPA #0#10;
          |PINDA #0#10;
          |PTEC 806;     ||Lo meto en las lineas
          |ENDATOS #2#10;
          |SI FSalida = 0;
               |GRABA 020#10a;
          |FINSI;
          |POPV;
     |FINSI;
     |CIERRA #10;
     enSwNoImp = 0;
|FPRC;
*/
|PROCESO Tempo;
     eaSerAlb = #0#1;
     |SI #142#185 = "S";
          eaSerAlb = #142#188;
     |FINSI;
     enNumAlb = 0;
     eaFecAlb = ~;
     eaSerPedido = #0#1;
     enNumPedido = #0#2;
     eaRepreAdj = #0#18;

     enInfoAge = #0#7;
     enInfoBul = #0#5;
     enInfoPes = #0#6;
     eaInfoFac = #0#8;

     |SUB_EJECUTA_NP "agifa098";
     |SI enNumAlb ! 0;
          ||SI #0#19 = "S"; |HAZ ModiAlb; |FINSI;

          ser_alb = eaSerAlb;
          num_alb = enNumAlb;
          enInforpConfi = 2;
          eaImpresora  = #48#10; |QBF eaImpresora;
          abono = "N";
          |SUB_EJECUTA_NP "guiz0001";

          |ABRE #10;
          #10#52 = eaSerAlb;
          #10#0 = enNumAlb;
          |LEE 000#10=;
          |SI FSalida = 0; |Y #10#51 = "S"; |Y #10#40 = "D";
               ser_alb = eaSerAlb;
               num_alb = enNumAlb;
               fec_alb = #10#1;
               abo_alb = "N";
               enInfoAuto = 1;
             || eaSerDefe = "N";
               |SUB_EJECUTA_NP "agifa057";
          |FINSI;
          |CIERRA #10;
     |FINSI;
|FPRC;

|DEFBUCLE Tempo;
     #0#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Tempo;
|FIN;

|PROCESO TipoFac; |TIPO 0;
     |SI #0#8 = "D"; #0#9 = "Diaria"; |FINSI;
     |SI #0#8 = "S"; #0#9 = "Semanal"; |FINSI;
     |SI #0#8 = "M"; #0#9 = "Mensual"; |FINSI;
     |SI #0#8 = "Q"; #0#9 = "Quinsenal"; |FINSI;
     |SI #0#8 = "V"; #0#9 = "Varias"; |FINSI;
     |PINTA #0#9;
|FPRC;

|PROCESO Cliente; |TIPO 0;
     |SI #0#3 ! #0#4;
          aAlfa = "0000Cliente del pedido: " + #0#3;
          |MENAV aAlfa;
          |ERROR;
     |FINSI;
|FPRC;

|PROCESO Pedido; |TIPO 0;
     |SI nTecla = 13;
          |HAZ ModiPedido;
          |ERROR; |ACABA;
     |FINSI;
     |SI #0Campo = Contenido; |ACABA; |FINSI;
     |SALVA_FICHA #0;
     |SELECT #2#0;
     |LEE 000#0=;
     nSal = FSalida;
     nLin = #0#0;
     |SELECT #1#0;
     |REPON_FICHA #0;
     |SI nSal = 0; |Y nLin ! #0#0;
          aAlfa = "0000Pedido existente en la linea: " + nLin;
          |MENAV aAlfa; |ERROR; |ACABA;
     |FINSI;

     |ABRE #104;
     #104#25 = #0#1;
     #104#0 = #0#2;
     |LEE 020#104=;
     |SI FSalida = 0;
          #0#3 = #104#4;
          #0#7 = #104#60; |PINTA #0#7;
          #0#8 = #104#23; |PINTA #0#8;
          #0#10 = #104#19; |PINTA #0#10;
          #0#11 = #104#14; |PINTA #0#11;
          #0#12 = #104#59; |PINTA #0#12;
          #0#13 = #104#20; |PINTA #0#13;
          #0#14 = #104#21; |PINTA #0#14;
          #0#15 = #104#15; |PINTA #0#15;
          #0#16 = #104#51; |PINTA #0#16;
          #0#18 = #104#7;

          |ABRE #20;
          #20#0 = #0#7;
          |LEE 020#20=;
          |SI FSalida = 0;
               #0#17 = #20#1; |PINTA #0#17;
          |FINSI;
          |CIERRA #20;

          |HAZ TipoFac;
     |SINO;
          |ERROR;
     |FINSI;
     |CIERRA #104;
|FPRC;

|PROCESO Min;
     #0#0 = 1;
|FPRC;

|PROCESO Max;
     #0#0 = 999;
|FPRC;

|PROGRAMA;
     |HAZ CreaTempo; |NOME_DAT #0Tempo; |DELINDEX #0; aTmp = Tempo;

     |ABRE #142; |LEE 000#142p; |CIERRA #142;

|ET Otra;
     |PINPA #0#0;
     |ENTLINEAL #1#0, 1, 1, 14, 0, Min, Max;

     |PARA; |SI; |HACIENDO;
          |MENU aMenu;
          |SI FSalida = 3; |SAL; |FINSI;
          |SI FSalida = 1; |VETE Otra; |FINSI;
          |SI FSalida = 2; |BUCLE Tempo; |SAL; |FINSI;
     |SIGUE;

     Tempo = aTmp; |HAZ BoraTempo; |DELINDEX #0;
|FPRO;
