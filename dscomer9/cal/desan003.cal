|FICHEROS;
     desan003 #0;
     desan004 #1;
     dsw00047 #2,MANTE;
     agifa321 #321;
     agifa324 #324;
     dsz00070 #70;  || Copia Oferta

     dsm00226 #226; || Ofertas de la estandar
     dsm00237 #237; || ' '

     desan004a@;
     desan004b@;
     desan004c@;
|FIN;

|VARIABLES;
     &Tempo = "";
     nNume = 0;
     nConta = 0;
     &nDeci_PreBase = 0;
     &nDeci_PreDiv  = 0;
     nCambioD       = 0;
     nCambioB       = 0;
     nModo          = 0;
     i              = 0;
     aAlfa          = "";
     aDef           = "";
|FIN;


|PROCESO Tipo0_226; |TIPO 0;
     |HAZ Tipo13_226;
|FPRC;

|PROCESO Tipo13_226; |TIPO 13;
     |ABRE #321; |LEE 000#321p; |CIERRA #321;

     |ABRE #324;

     #324#0 = #321#9;
     |LEE 000#324=;
     nDeci_PreBase = #324#9;
     nCambioB = #324#3;

     #324#0 = #0#4;
     |LEE 000#324=;
     nDeci_PreDiv = #324#9;
     nCambioD = #324#3;

     |CIERRA #324;
|FPRC;

|PROCESO ModiLinPrv;
     #1#7 = #0#1;
     #1#4 = #1#5 / nCambioD * nCambioB;
     |GRABA 020#1a;
|FPRC;

|PROCESO ModiPrv; |TIPO 0;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 2; |Y #0Campo ! Contenido;
          |HAZ Tipo13_226;
          |BUCLELIN 0 ModiLinPrv #0;
     |FINSI;
|FPRC;

|PROCESO Tipo2; |TIPO 2;
     #1#7 = #0#1;
|FPRC;

|PROCESO Precio226; |TIPO 0;
     #1#4 = #1#5 / nCambioD * nCambioB;
     |PINTA #1#4;
|FPRC;

|PROCESO ActProveedor;
     #1#7 = #0#1;
     |GRABA 020#1a;
     |LIBERA #1;
|FPRC;

|PROCESO Tipo3_226; |TIPO 3;
     |BUCLELIN 0 ActProveedor #0;
|FPRC;
컴컴컴컴컴컴컴
|PROCESO LlenaTmp;
     |SALVA_DATOS #desan004b@;
     |REPON_DATOS #desan004a@;
     |GRABA 020#desan004a@.n;
|FPRC;

|DEFBUCLE LlenaTmp;
     #desan004b@#3003;
     ;
     #2#0, #0#0, 0001;
     #2#0, #0#0, 9999;
     ;
     NULL, LlenaTmp;
|FIN;

|PROCESO ConsuOrden; |TIPO 11;
     |SI FSalida = 13;
          |DDEF aDef;
          aAlfa = aDef + "desan004";
          |CARGA_DEF aAlfa, desan004b@;
          |SI FSalida = 0;
               aAlfa = aDef + "desan004";
               |CARGA_DEF aAlfa, desan004a@;
               |SI FSalida = 0;
                    |HAZ CreaTempo; |NOME_DAT #desan004a@#Tempo#; |DELINDEX #desan004a@;
                    |PUSHV 0501 2380;
                    |BLANCO 1026 1655;
                    #2#0 = #1#2;
                    |PINPA #0#2;
                    |PINDA #0#2;
                    |ENDATOS #1#2;
                    |SI FSalida = 0;
                         |ABRE #desan004a@;
                         |BUCLE LlenaTmp;
                         |LEE 000#desan004a@.p;
                         |SI FSalida ! 0;
                              |MENAV "0000No se encuentra el articulo...";
                         |SINO;
                              |CONSULTA_CLAVE #1#desan004a@;
                              |SI FSalida = 0;
                                   #1#1 = #desan004a@#1;
                                   |PTEC 802;
                              |FINSI;
                         |FINSI;
                         |CIERRA #desan004a@;
                    |FINSI;
                    |DELINDEX #desan004a@; |HAZ BoraTempo;
                    |DESCARGA_DEF #desan004a@;
                    |POPV;
               |FINSI;
               |DESCARGA_DEF #desan004b@;
               |ERROR;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO Min;
     #desan004c@#0 = #0#0;
     #desan004c@#1 = 1;
|FPRC;

|PROCESO Max;
     #desan004c@#0 = #0#0;
     #desan004c@#1 = 9999;
|FPRC;

|PROCESO Tipo66; |TIPO 66;
     |DDEF aDef;
     aAlfa = aDef + "desan004";
     |CARGA_DEF aAlfa, desan004c@;
     |SI FSalida = 0;
          |ABRE #desan004c@;
          |CONSULTA_F_CLAVE #1#desan004c@, Min, Max;
          |SI FSalida = 0;
               #2#0 = #desan004c@#2;
          |SINO;
               |ERROR;
          |FINSI;
          |CIERRA #desan004c@;
          |DESCARGA_DEF #desan004c@;
     |FINSI;
|FPRC;

|PROCESO Tipo12; |TIPO 12;
|FPRC;

|PROCESO Tipo20_226; |TIPO 20;
     |SI FSalida = "OPCION";
          FSalida = "Consulta";
     |SINO;
          FSalida = 13;
          |HAZ ConsuOrden;
     |FINSI;
|FPRC;

|PROCESO ModSerie; |TIPO 7;
     aAlfa = #0#5;
     |C_M #0#6, 1, aAlfa;
|FPRC;

|PROCESO CopiaLin;
     #1#0 = nConta;
     #1#12 = #70#1;
     #1#13 = #70#2;
     |GRABA 020#1b;
     |GRABA 020#1a;
|FPRC;

|PROCESO Copia_226; |TIPO 0;
     |SI FSalida = 17;
          |PUSHV 0501 2380;
          |BLANCO 922 1759;
          #70#0 = #0#0;
          |PINPA #0#70;
          |PINDA #0#70;
          |ENDATOS #1#70;
          |SI FSalida ! 0;
               |ERROR;
          |SINO;
               #0#0 = #70#0;
               |LEE 000#0=;
               |SI FSalida ! 0;
                    |MENAV "0000No existe oferta...";
                    |ERROR;
               |SINO;
                    |LEE 020#0u;
                    nConta = #0#0 + 1;
                    #0#0 = #70#0;
                    |LEE 121#0=;
                    |SI FSalida = 0;
                         nNume = #70#2;
                         nNume = nNume - 1;
                         #0#3 = nNume;
                         |GRABA 020#0a;

                         |BUCLELIN 2CopiaLin#0;
                         #0#0 = nConta;
                         #0#2 = #70#1;
                         #0#3 = #70#2;
                         |GRABA 020#0b;
                         |GRABA 020#0a;
                         |SI FSalida = 0;
                              |LEE 121#0=;
                         |FINSI;
                    |FINSI;
               |FINSI;
          |FINSI;
          |POPV;
     |FINSI;
|FPRC;
/*********************
|PROCESO &XC3_15; |TIPO 15;
     |ABRE #226;
     #226#0 = #0#0;
     |LEE 101#226=;
     |SI FSalida ! 0; |GRABA 020#226b; |FINSI;
     |PARA i = 1; |SI i [ 6; |HACIENDO i = i + 1;
          #226i = #0i;
     |SIGUE;
     |GRABA 020#226a;
     |CIERRA #226;
|FPRC;

|PROCESO &XC3_16; |TIPO 16;
     |HAZ XC3_15;
|FPRC;

|PROCESO &XC3_17; |TIPO 17;
     |ABRE #226;
     #226#0 = #0#0;
     |BORRA 000#226c;
     |CIERRA #226;
|FPRC;
*******************/
|PROCESO &XC4_15; |TIPO 15;
     |ABRE #237;
     #237#0 = #1#0;
     #237#1 = #1#1;
     |LEE 101#237=;
     |SI FSalida ! 0; |GRABA 020#237b; |FINSI;
     |PARA i = 1; |SI i [ 7; |HACIENDO i = i + 1;
          #237i = #1i;
     |SIGUE;
     |GRABA 020#237a;
     |CIERRA #237;
|FPRC;

|PROCESO &XC4_16; |TIPO 16;
     |HAZ XC4_15;
|FPRC;

|PROCESO &XC4_17; |TIPO 17;
     |ABRE #237;
     #237#0 = #1#0;
     #237#1 = #1#1;
     |BORRA 000#237c;
     |CIERRA #237;
|FPRC;
