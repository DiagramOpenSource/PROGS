|FICHEROS;
     obras022 #0; ||Seleccion.
     obras001 #1; ||Obras.
     obras021 #2; ||Gastos consumo/Directos/Indirectos.
     obras012 #3; ||Ingresos Pisos
|FIN;


|VARIABLES;
     alf1="";
     mes="";
     ano="";
     depe=@;
     hape=@;
     &totiacu=0;
     &totimes=0;
     impre=0;
|FIN;


|PROCESO proing;

       |SI depe > #3#8; totiacu=totiacu+#3#7; |ACABA; |FINSI;
       |SI hape > #3#8; totimes=totimes+#3#7; |ACABA; |FINSI;

|FPRC;

|DEFBUCLE leeing;
    #3#1;
;
#2#0,000,000,000,000,0;
#2#0,999,999,999,999,999;
;
NULL,proing;
|FIN;


|PROCESO progas;

     |ABRE #1;
     #1#0=#2#0;
     |LEE 000#1=;

      mes=(100 + #2#2) % -102;
      ano=(10000 + #2#1) % -104;
      alf1="01."+mes+"."+ano;
      depe=alf1;
      mes=(100 + #2#2) % -102;
      ano=(10000 + #2#1) % -104;
      alf1="31."+mes+"."+ano;
      hape=alf1;

      |BUCLE leeing;

      |PRINT;
      impre=1;
      totiacu=0;
      totimes=0;
      |CIERRA #1;

|FPRC;



|DEFBUCLE leegas;
    #2#1;
;
#0#0,#0#4,#0#2;
#0#1,#0#5,#0#3;
;
NULL,progas;
|FIN;




|PROCESO listar;  |TIPO 3;


             |IMPRE 0;

               |SI FSalida ! 0; |ACABA; |FINSI;

             |INFOR "obras022";

               |SI FSalida ! 0; |FINIMP; |ACABA; |FINSI;

             |BUCLE leegas;

               |SI impre = 1;  |PIEINF; |FINSI;
             |FININF;
             |FINIMP;

|FPRC;
