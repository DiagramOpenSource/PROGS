|FICHEROS;
     sctrz003 #0;
     sctrm007 #7;
     sctrm008 #8;
     sctrm017 #17;
     sctrm018 #18;
     sctrm019 #19;
     sctrm001 #100;
     sctrz004 #104,MANTE;     || Pan Cab
     sctrz005 #105,MANTE;     || Pan Suple
     sctrz006 #106,MANTE;     || Pan Fecha
     referen@;
|FIN;

|VARIABLES;
     &eaNomLogo = "";
     &enPantaLogo = 0;
     &enCtrFin = 0;
     aAlfa = "";
     nModoCab = 0;
     nModoSup = 0;
     nModoFec = 0;
     nPanta = 0;
     nPantaCab = 0;
     nPantaSup = 0;
     nPantaFec = 0;
     nRango = 0;
     nGridCab = 0;
     nGridSup = 0;
     nGridFec = 0;
     nBtnAlta = 0;
     nBtnModi = 0;
     nBtnBaja = 0;
     nBtnCons = 0;
     nBtnAltaSup = 0;
     nBtnModiSup = 0;
     nBtnBajaSup = 0;
     nBtnConsSup = 0;
     nBtnAltaFec = 0;
     nBtnModiFec = 0;
     nBtnBajaFec = 0;
     nBtnConsFec = 0;
     nBloquea = 0;
     nId = 0;
     i = 0;
     aReg0 = "";
     nReg2 = 0;
     nReg4 = 0;
     aRegSup0 = "";
     nRegSup2 = 0;
     nRegSup4 = 0;
     nRegSup6 = 0;
     aRegFec0 = "";
     nRegFec2 = 0;
     nRegFec4 = 0;
     nRegFec6 = 0;
     nLin = 0;
     nError = 0;
     nDia1 = 0;
     nDia2 = 0;
     nDia3 = 0;
     nDia4 = 0;
     nDia5 = 0;
     nDia6 = 0;
     nDia7 = 0;
     aLon = "";
     aCar = "";
     nPos = 0;
     aDias = "";
|FIN;

|PROCESO CheqDias;
     nError = 0;
     nDia1 = 0;
     nDia2 = 0;
     nDia3 = 0;
     nDia4 = 0;
     nDia5 = 0;
     nDia6 = 0;
     nDia7 = 0;
     |QBF aDias;
     aLon = aDias % A0;
     |SI aLon ! 1; |O aDias ! "*";
          |SI aLon = 0; nError = 1; |FINSI;
          |PARA i = 1; |SI  i [ aLon; |HACIENDO i = i + 1;
               nPos = i * 100 + 1;
               aCar = aDias % nPos;
               |SI aCar = "*";
                    nError = 1;
               |SINO;
                    aAlfa = "LMXJVSD" - aCar;
                    |SI FSalida [ 0; nError = 1; |FINSI;
                    |SI aCar = "L"; nDia1 = nDia1 + 1; |FINSI;
                    |SI aCar = "M"; nDia2 = nDia2 + 1; |FINSI;
                    |SI aCar = "X"; nDia3 = nDia3 + 1; |FINSI;
                    |SI aCar = "J"; nDia4 = nDia4 + 1; |FINSI;
                    |SI aCar = "V"; nDia5 = nDia5 + 1; |FINSI;
                    |SI aCar = "S"; nDia6 = nDia6 + 1; |FINSI;
                    |SI aCar = "D"; nDia7 = nDia7 + 1; |FINSI;
               |FINSI;
          |SIGUE;
     |FINSI;
     |SI nDia1 > 1; |O nDia2 > 1; |O nDia3 > 1; |O nDia4 > 1;
               |O nDia5 > 1; |O nDia6 > 1; |O nDia7 > 1;
          nError = 1;
     |FINSI;
     |SI nError ! 0;
          |MENAV "0000Error en dias...";
     |FINSI;
|FPRC;

|PROCESO HastaFecha; |TIPO 0;
     |SI FSalida ! 2;
          |SI #106#9 < #106#8;
               |MENAV "0000Fecha incorrecta, debe ser igual o mayor a fecha desde...";
               |ERROR;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO Dias106; |TIPO 0;
     aDias = #106#7;
     |HAZ CheqDias;
     |SI nError ! 0; |ERROR; |FINSI;
|FPRC;

|PROCESO EditaFec;
     aRegFec0 = #19#0;
     nRegFec2 = #19#2;
     nRegFec4 = #19#4;
     nRegFec6 = #19#6;

     |SI nModoFec = 1; |VENTANA 2401, 3098, -1, 17, "Nueva Fecha Validez"; |FINSI;
     |SI nModoFec = 2; |VENTANA 2401, 3098, -1, 17, "Modifica Fecha Validez"; |FINSI;
     |SI nModoFec = 4; |VENTANA 2401, 3098, -1, 17, "Consulta Fecha Validez"; |FINSI;
     |HAZ PushVenModal;

     |SI nModoFec = 1;
          #19#0 = #104#0;
          #19#2 = #104#2;
          #19#4 = #104#4;
          #19#6 = 999;
          |LEE 000#19];
          |SI FSalida = 0;
               |LEE 000#19a;
          |SINO;
               |LEE 000#19u;
          |FINSI;
          |SI FSalida = 0; |Y #19#0 = #104#0; |Y #19#2 = #104#2;
                    |Y #19#4 = #104#4;
               nLin = #19#6 + 1;
          |SINO;
               nLin = 1;
          |FINSI;
          |DDEFECTO #19;
          #19#0 = #104#0;
          #19#2 = #104#2;
          #19#4 = #104#4;
          #19#6 = nLin;
          |GRABA 020#19b;
          |DDEFECTO #106;
          #106#0 = #104#0;
          #106#1 = #104#1;
          #106#2 = #104#2;
          #106#3 = #104#3;
          #106#4 = #104#4;
          #106#5 = #104#5;
          #106#6 = nLin;
     |SINO;
          |PARA i = 0; |SI i [ 9; |HACIENDO i = i + 1;
               #106i = #19i;
          |SIGUE;
     |FINSI;

     |PINPA #0#106; nPantaFec = FSalida;
     |PINDA #0#106;
  |ET OtraFec;
     |SI nModoFec = 1; |ENDATOS #1#106; |FINSI;
     |SI nModoFec = 2; |ENDATOS #2#106; |FINSI;
     |SI nModoFec = 4; |PAUSA; |FINSI;
     |SI FSalida = 0; |Y nModoFec ! 4;
          aDias = #106#7;
          |HAZ CheqDias;
          |SI nError ! 0; |VETE OtraFec; |FINSI;
          |SI #106#9 < #106#8;
               |MENAV "0000Fecha incorrecta, debe ser igual o mayor a fecha desde...";
               |VETE OtraFec;
          |FINSI;
          #19#0 = #106#0;
          #19#2 = #106#2;
          #19#4 = #106#4;
          #19#6 = #106#6;
          |LEE 121#19=;
          |PARA i = 0; |SI i [ 9; |HACIENDO i = i + 1;
               #19i = #106i;
          |SIGUE;
          |GRABA 020#19a;
          aRegFec0 = #19#0;
          nRegFec2 = #19#2;
          nRegFec4 = #19#4;
          nRegFec6 = #19#6;
     |SINO;
          |SI nModoFec = 1;
               #19#0 = #106#0;
               #19#2 = #106#2;
               #19#4 = #106#4;
               #19#6 = #106#6;
               |BORRA 020#19c;
          |FINSI;
     |FINSI;
     |LIBERA #19;

     |HAZ PopVenModal;

     #19#0 = aRegFec0;
     #19#2 = nRegFec2;
     #19#4 = nRegFec4;
     #19#6 = nRegFec6;
     |LEE 000#19=;
     |REFRESCACONTROL nGridFec;
|FPRC;

|PROCESO BtnAltaFec;
     nModoFec = 1; |HAZ EditaFec;
     |HAZ TieneLineasFec;
|FPRC;

|PROCESO BtnModiFec;
     |LEE 100#19=;
     |SI FSalida ! 0; |ACABA; |FINSI;
     nModoFec = 2; |HAZ EditaFec;
|FPRC;

|PROCESO BtnBajaFec;
     |LEE 100#19=;
     |SI FSalida ! 0; |ACABA; |FINSI;
     aAlfa = "0000N¨Borrar l¡nea fecha: " + #19#6 + "?";
     |CONFI aAlfa;
     |SI FSalida = 0;
          |BORRA 020#19a;
          |HAZ TieneLineasFec;
          |REFRESCACONTROL nGridFec;
     |FINSI;
     |LIBERA #19;
|FPRC;

|PROCESO BtnConsFec;
     |LEE 000#19=;
     |SI FSalida ! 0; |ACABA; |FINSI;
     nModoFec = 4; |HAZ EditaFec;
|FPRC;

|PROCESO TieneLineasFec;
     |DDEF aAlfa;
     aAlfa = aAlfa + "sctrm019";
     |CARGA_DEF aAlfa, referen@;
     |SI FSalida = 0;
          |ABRE #referen@;
          #referen@#0 = #104#0;
          #referen@#2 = #104#2;
          #referen@#4 = #104#4;
          #referen@#6 = 0;
          |LEE 000#referen@.];
          |SI FSalida = 0; |Y #referen@#0 = #104#0; |Y #referen@#2 = #104#2;
                    |Y #referen@#4 = #104#4;
               |SI nModoCab = 4;
                    |ESTADO_CONTROL nBtnAltaFec, "DISABLE";
                    |ESTADO_CONTROL nBtnModiFec, "DISABLE";
                    |ESTADO_CONTROL nBtnBajaFec, "DISABLE";
                    |ESTADO_CONTROL nBtnConsFec, "ENABLE";
               |SINO;
                    |ESTADO_CONTROL nBtnAltaFec, "ENABLE";
                    |ESTADO_CONTROL nBtnModiFec, "ENABLE";
                    |ESTADO_CONTROL nBtnBajaFec, "ENABLE";
                    |ESTADO_CONTROL nBtnConsFec, "ENABLE";
               |FINSI;
          |SINO;
               |SI nModoCab = 4;
                    |ESTADO_CONTROL nBtnAltaFec, "DISABLE";
                    |ESTADO_CONTROL nBtnModiFec, "DISABLE";
                    |ESTADO_CONTROL nBtnBajaFec, "DISABLE";
                    |ESTADO_CONTROL nBtnConsFec, "DISABLE";
               |SINO;
                    |ESTADO_CONTROL nBtnAltaFec, "ENABLE";
                    |ESTADO_CONTROL nBtnModiFec, "DISABLE";
                    |ESTADO_CONTROL nBtnBajaFec, "DISABLE";
                    |ESTADO_CONTROL nBtnConsFec, "DISABLE";
               |FINSI;
          |FINSI;
          |CIERRA #referen@;
          |DESCARGA_DEF #referen@;
     |FINSI;
|FPRC;

|PROCESO Evento19;
     |SI FSalida = 1; |O FSalida = 2;
          |SELECT #1#19;
          |LEE 000#19=;
          |HAZ TieneLineasFec;
     |FINSI;
     |SI FSalida = 4;
          |HAZ BtnConsFec;
     |FINSI;
|FPRC;

|PROCESO Min19;
     #19#0 = #104#0;
     #19#2 = #104#2;
     #19#4 = #104#4;
     #19#6 = 000;
|FPRC;

|PROCESO Max19;
     #19#0 = #104#0;
     #19#2 = #104#2;
     #19#4 = #104#4;
     #19#6 = 999;
|FPRC;

|PROCESO Dias105; |TIPO 0;
     aDias = #105#8;
     |HAZ CheqDias;
     |SI nError ! 0; |ERROR; |FINSI;
|FPRC;

|PROCESO EditaSup;
     aRegSup0 = #18#0;
     nRegSup2 = #18#2;
     nRegSup4 = #18#4;
     nRegSup6 = #18#6;

     |SI nModoSup = 1; |VENTANA 2001, 3098, -1, 17, "Nuevo Suplemento"; |FINSI;
     |SI nModoSup = 2; |VENTANA 2001, 3098, -1, 17, "Modifica Suplemento"; |FINSI;
     |SI nModoSup = 4; |VENTANA 2001, 3098, -1, 17, "Consulta Suplemento"; |FINSI;
     |HAZ PushVenModal;

     |SI nModoSup = 1;
          #18#0 = #104#0;
          #18#2 = #104#2;
          #18#4 = #104#4;
          #18#6 = 999;
          |LEE 000#18];
          |SI FSalida = 0;
               |LEE 000#18a;
          |SINO;
               |LEE 000#18u;
          |FINSI;
          |SI FSalida = 0; |Y #18#0 = #104#0; |Y #18#2 = #104#2;
                    |Y #18#4 = #104#4;
               nLin = #18#6 + 1;
          |SINO;
               nLin = 1;
          |FINSI;
          |DDEFECTO #18;
          #18#0 = #104#0;
          #18#2 = #104#2;
          #18#4 = #104#4;
          #18#6 = nLin;
          |GRABA 020#18b;
          |DDEFECTO #105;
          #105#0 = #104#0;
          #105#1 = #104#1;
          #105#2 = #104#2;
          #105#3 = #104#3;
          #105#4 = #104#4;
          #105#5 = #104#5;
          #105#6 = nLin;
     |SINO;
          |PARA i = 0; |SI i [ 16; |HACIENDO i = i + 1;
               #105i = #18i;
          |SIGUE;
     |FINSI;

     |PINPA #0#105; nPantaSup = FSalida;
     |PINDA #0#105;
  |ET OtroSup;
     |SI nModoSup = 1; |ENDATOS #1#105; |FINSI;
     |SI nModoSup = 2; |ENDATOS #2#105; |FINSI;
     |SI nModoSup = 4; |PAUSA; |FINSI;
     |SI FSalida = 0; |Y nModoSup ! 4;
          aDias = #105#8;
          |HAZ CheqDias;
          |SI nError ! 0; |VETE OtroSup; |FINSI;
          #18#0 = #105#0;
          #18#2 = #105#2;
          #18#4 = #105#4;
          #18#6 = #105#6;
          |LEE 121#18=;
          |PARA i = 0; |SI i [ 16; |HACIENDO i = i + 1;
               #18i = #105i;
          |SIGUE;
          |GRABA 020#18a;
          aRegSup0 = #18#0;
          nRegSup2 = #18#2;
          nRegSup4 = #18#4;
          nRegSup6 = #18#6;
     |SINO;
          |SI nModoSup = 1;
               #18#0 = #105#0;
               #18#2 = #105#2;
               #18#4 = #105#4;
               #18#6 = #105#6;
               |BORRA 020#18c;
          |FINSI;
     |FINSI;
     |LIBERA #18;

     |HAZ PopVenModal;

     #18#0 = aRegSup0;
     #18#2 = nRegSup2;
     #18#4 = nRegSup4;
     #18#6 = nRegSup6;
     |LEE 000#18=;
     |REFRESCACONTROL nGridSup;
|FPRC;

|PROCESO BtnAltaSup;
     nModoSup = 1; |HAZ EditaSup;
     |HAZ TieneLineasSup;
|FPRC;

|PROCESO BtnModiSup;
     |LEE 100#18=;
     |SI FSalida ! 0; |ACABA; |FINSI;
     nModoSup = 2; |HAZ EditaSup;
|FPRC;

|PROCESO BtnBajaSup;
     |LEE 100#18=;
     |SI FSalida ! 0; |ACABA; |FINSI;
     aAlfa = "0000N¨Borrar l¡nea suplemento: " + #18#6 + "?";
     |CONFI aAlfa;
     |SI FSalida = 0;
          |BORRA 020#18a;
          |HAZ TieneLineasSup;
          |REFRESCACONTROL nGridSup;
     |FINSI;
     |LIBERA #18;
|FPRC;

|PROCESO BtnConsSup;
     |LEE 000#18=;
     |SI FSalida ! 0; |ACABA; |FINSI;
     nModoSup = 4; |HAZ EditaSup;
|FPRC;

|PROCESO TieneLineasSup;
     |DDEF aAlfa;
     aAlfa = aAlfa + "sctrm018";
     |CARGA_DEF aAlfa, referen@;
     |SI FSalida = 0;
          |ABRE #referen@;
          #referen@#0 = #104#0;
          #referen@#2 = #104#2;
          #referen@#4 = #104#4;
          #referen@#6 = 0;
          |LEE 000#referen@.];
          |SI FSalida = 0; |Y #referen@#0 = #104#0; |Y #referen@#2 = #104#2;
                    |Y #referen@#4 = #104#4;
               |SI nModoCab = 4;
                    |ESTADO_CONTROL nBtnAltaSup, "DISABLE";
                    |ESTADO_CONTROL nBtnModiSup, "DISABLE";
                    |ESTADO_CONTROL nBtnBajaSup, "DISABLE";
                    |ESTADO_CONTROL nBtnConsSup, "ENABLE";
               |SINO;
                    |ESTADO_CONTROL nBtnAltaSup, "ENABLE";
                    |ESTADO_CONTROL nBtnModiSup, "ENABLE";
                    |ESTADO_CONTROL nBtnBajaSup, "ENABLE";
                    |ESTADO_CONTROL nBtnConsSup, "ENABLE";
               |FINSI;
          |SINO;
               |SI nModoCab = 4;
                    |ESTADO_CONTROL nBtnAltaSup, "DISABLE";
                    |ESTADO_CONTROL nBtnModiSup, "DISABLE";
                    |ESTADO_CONTROL nBtnBajaSup, "DISABLE";
                    |ESTADO_CONTROL nBtnConsSup, "DISABLE";
               |SINO;
                    |ESTADO_CONTROL nBtnAltaSup, "ENABLE";
                    |ESTADO_CONTROL nBtnModiSup, "DISABLE";
                    |ESTADO_CONTROL nBtnBajaSup, "DISABLE";
                    |ESTADO_CONTROL nBtnConsSup, "DISABLE";
               |FINSI;
          |FINSI;
          |CIERRA #referen@;
          |DESCARGA_DEF #referen@;
     |FINSI;
|FPRC;

|PROCESO Evento18;
     |SI FSalida = 1; |O FSalida = 2;
          |SELECT #1#18;
          |LEE 000#18=;
          |HAZ TieneLineasSup;
     |FINSI;
     |SI FSalida = 4;
          |HAZ BtnConsSup;
     |FINSI;
|FPRC;

|PROCESO Min18;
     #18#0 = #104#0;
     #18#2 = #104#2;
     #18#4 = #104#4;
     #18#6 = 000;
|FPRC;

|PROCESO Max18;
     #18#0 = #104#0;
     #18#2 = #104#2;
     #18#4 = #104#4;
     #18#6 = 999;
|FPRC;

|PROCESO Chequea; |TIPO 0;
     |SI nModoCab = 1; |Y nBloquea = 0;
          |DDEFECTO #17;
          #17#0 = #104#0;
          #17#2 = #104#2;
          #17#4 = #104#4;
          |GRABA 000#17b;
          |SI FSalida ! 0;
               |MENAV "0000Registro existente...";
               |ERROR;
          |SINO;
               |ESTADO_CONTROL nBtnAltaSup, "ENABLE";
               |ESTADO_CONTROL nBtnAltaFec, "ENABLE";
               |C_M #104#0, 1, "N"; |PINTA #104#0;
               |C_M #104#2, 1, "N"; |PINTA #104#2;
               |C_M #104#4, 1, "N"; |PINTA #104#4;
               nBloquea = 1;

               aAlfa = "|X000"; aAlfa = #104aAlfa; nId = aAlfa;
               |ESTADO_CONTROL nId, "ENABLE";
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO Grupo; |TIPO 0;
     |ABRE #7;
     #7#0 = #104#2;
     |LEE 000#7=;
     |SI FSalida = 0;
          #104#3 = #7#1; |PINTA #104#3;
     |SINO;
          |MENAV "0000No existe c¢digo grupo tarifa...";
          |ERROR;
     |FINSI;
     |CIERRA #7;
|FPRC;

|PROCESO Temporada; |TIPO 0;
     |ABRE #8;
     #8#0 = #104#0;
     |LEE 000#8=;
     |SI FSalida = 0;
          #104#1 = #8#1; |PINTA #104#1;
     |SINO;
          |MENAV "0000No existe c¢digo temporada...";
          |ERROR;
     |FINSI;
     |CIERRA #8;
|FPRC;

|PROCESO Valida7; |TIPO 7;
     |SI nModoCab = 1;
          aAlfa = "|X000"; aAlfa = #104aAlfa; nId = aAlfa;
          |ESTADO_CONTROL nId, "DISABLE";
     |FINSI;
|FPRC;

|PROCESO PintaCampos;
|FPRC;

|PROCESO Borra19;
     |BORRA 020#19a;
|FPRC;

|DEFBUCLE Borra19;
     #19#1;
     ;
     #17#0, #17#2, #17#4, 000;
     #17#0, #17#2, #17#4, 999;
     be;
     NULL, Borra19;
|FIN;

|PROCESO Borra18;
     |BORRA 020#18a;
|FPRC;

|DEFBUCLE Borra18;
     #18#1;
     ;
     #17#0, #17#2, #17#4, 000;
     #17#0, #17#2, #17#4, 999;
     be;
     NULL, Borra18;
|FIN;

|PROCESO Edita;
     aReg0 = #17#0;
     nReg2 = #17#2;
     nReg4 = #17#4;

     |SI nModoCab = 1; |VENTANA 0501, 3098, -1, 17, "Nuevo Tipo Tarifas por Temporada"; |FINSI;
     |SI nModoCab = 2; |VENTANA 0501, 3098, -1, 17, "Modifica Tipo Tarifas por Temporada"; |FINSI;
     |SI nModoCab = 4; |VENTANA 0501, 3098, -1, 17, "Consulta Tipo Tarifas por Temporada"; |FINSI;
     |HAZ PushVenModal;

     |SI nModoCab = 1;
          |DDEFECTO #104;
          |C_M #104#0, 1, "S";
          |C_M #104#2, 1, "S";
          |C_M #104#4, 1, "S";
     |SINO;
          |PARA i = 0; |SI i [ 16; |HACIENDO i = i + 1;
               #104i = #17i;
          |SIGUE;
          |C_M #104#0, 1, "N";
          |C_M #104#2, 1, "N";
          |C_M #104#4, 1, "N";
     |FINSI;

     |PINPA #0#104; nPantaCab = FSalida;
     |PINDA #0#104;
     |HAZ PintaCampos;

     |CONTROL_SIMPLE nPantaCab, "BOTON,{{193}}Alta", 1618, 1628, BtnAltaSup;
     nBtnAltaSup = FSalida;
     |CONTROL_SIMPLE nPantaCab, "BOTON,{{197}}Modificar", 1630, 1640, BtnModiSup;
     nBtnModiSup = FSalida;
     |CONTROL_SIMPLE nPantaCab, "BOTON,{{199}}Baja", 1642, 1652, BtnBajaSup;
     nBtnBajaSup = FSalida;
     |CONTROL_SIMPLE nPantaCab, "BOTON,{{155}}Consulta", 1654, 1665, BtnConsSup;
     nBtnConsSup = FSalida;

     |CONTROL_SIMPLE nPantaCab, "BOTON,{{193}}Alta", 2318, 2328, BtnAltaFec;
     nBtnAltaFec = FSalida;
     |CONTROL_SIMPLE nPantaCab, "BOTON,{{197}}Modificar", 2330, 2340, BtnModiFec;
     nBtnModiFec = FSalida;
     |CONTROL_SIMPLE nPantaCab, "BOTON,{{199}}Baja", 2342, 2352, BtnBajaFec;
     nBtnBajaFec = FSalida;
     |CONTROL_SIMPLE nPantaCab, "BOTON,{{155}}Consulta", 2354, 2365, BtnConsFec;
     nBtnConsFec = FSalida;

     |SI nModoCab = 1;
          |ESTADO_CONTROL nBtnAltaSup, "DISABLE";
          |ESTADO_CONTROL nBtnModiSup, "DISABLE";
          |ESTADO_CONTROL nBtnBajaSup, "DISABLE";
          |ESTADO_CONTROL nBtnConsSup, "DISABLE";
          |ESTADO_CONTROL nBtnAltaFec, "DISABLE";
          |ESTADO_CONTROL nBtnModiFec, "DISABLE";
          |ESTADO_CONTROL nBtnBajaFec, "DISABLE";
          |ESTADO_CONTROL nBtnConsFec, "DISABLE";
     |FINSI;

     nRango = 4 + 8 + 16 + 32;
     |LINEAL_SIMPLE #1#18, nRango, 1702, 2298, Min18, Max18, Evento18;
     nGridSup = FSalida;
     |LINEAL_SIMPLE #1#19, nRango, 2402, 2998, Min19, Max19, Evento19;
     nGridFec = FSalida;

     nBloquea = 0;
     |SI nModoCab = 1; |ENDATOS #1#104; |FINSI;
     |SI nModoCab = 2; |ENDATOS #2#104; |FINSI;
     |SI nModoCab = 4; |PAUSA; |FINSI;
     |SI FSalida = 0; |Y nModoCab ! 4;
          #17#0 = #104#0;
          #17#2 = #104#2;
          #17#4 = #104#4;
          |LEE 121#17=;
          |PARA i = 0; |SI i [ 16; |HACIENDO i = i + 1;
               #17i = #104i;
          |SIGUE;
          |GRABA 020#17a;
          aReg0 = #17#0;
          nReg2 = #17#2;
          nReg4 = #17#4;
     |SINO;
          |SI nBloquea = 1;
               #17#0 = #104#0;
               #17#2 = #104#2;
               #17#4 = #104#4;
               |BORRA 020#17c;
               |BUCLE Borra18;
               |BUCLE Borra19;
          |FINSI;
     |FINSI;
     |LIBERA #17;

     |HAZ PopVenModal;

     #17#0 = aReg0;
     #17#2 = nReg2;
     #17#4 = nReg4;
     |LEE 000#17=;
     |REFRESCACONTROL nGridCab;
|FPRC;

|PROCESO BtnAlta;
     nModoCab = 1; |HAZ Edita;
     |HAZ TieneLineas;
|FPRC;

|PROCESO BtnModi;
     |LEE 100#17=;
     |SI FSalida ! 0; |ACABA; |FINSI;
     nModoCab = 2; |HAZ Edita;
|FPRC;

|PROCESO BtnBaja;
     |LEE 100#17=;
     |SI FSalida ! 0; |ACABA; |FINSI;
     aAlfa = "0000N¨Borrar tipo tarifa: " + #17#0 + "/" + #17#1 + "/" + #17#2 + "?";
     |CONFI aAlfa;
     |SI FSalida = 0;
          |BORRA 020#17a;
          |BUCLE Borra18;
          |BUCLE Borra19;
          |HAZ TieneLineas;
          |REFRESCACONTROL nGridCab;
     |FINSI;
     |LIBERA #17;
|FPRC;

|PROCESO BtnCons;
     |LEE 000#17=;
     |SI FSalida ! 0; |ACABA; |FINSI;
     nModoCab = 4; |HAZ Edita;
|FPRC;

|PROCESO Evento17;
     |SI FSalida = 1; |O FSalida = 2;
          |SELECT #1#17;
          |LEE 000#17=;
          |HAZ TieneLineas;
     |FINSI;
     |SI FSalida = 4;
          |HAZ BtnCons;
     |FINSI;
|FPRC;

|PROCESO TieneLineas;
     |DDEF aAlfa;
     aAlfa = aAlfa + "sctrm017";
     |CARGA_DEF aAlfa, referen@;
     |SI FSalida = 0;
          |ABRE #referen@;
          |LEE 000#referen@.p;
          |SI FSalida = 0;
               |ESTADO_CONTROL nBtnModi, "ENABLE";
               |ESTADO_CONTROL nBtnBaja, "ENABLE";
               |ESTADO_CONTROL nBtnCons, "ENABLE";
          |SINO;
               |ESTADO_CONTROL nBtnModi, "DISABLE";
               |ESTADO_CONTROL nBtnBaja, "DISABLE";
               |ESTADO_CONTROL nBtnCons, "DISABLE";
          |FINSI;
          |CIERRA #referen@;
          |DESCARGA_DEF #referen@;
     |FINSI;
|FPRC;

|PROCESO LogoPanta;
     eaNomLogo = #100#1;
     |HAZ TraeLogoPan;
     enPantaLogo = nPanta;
     |HAZ PintaLogoPan;
|FPRC;

|PROGRAMA;
     |ABRE #100; |LEE 000#100p; |CIERRA #100;

     |PINPA #0#0; nPanta = FSalida;
     |PINDA #0#0;
     |HAZ LogoPanta;

     |CONTROL_SIMPLE nPanta, "BOTON,{{193}}Alta", 1002, 1012, BtnAlta;
     nBtnAlta = FSalida;
     |CONTROL_SIMPLE nPanta, "BOTON,{{197}}Modificar", 1014, 1024, BtnModi;
     nBtnModi = FSalida;
     |CONTROL_SIMPLE nPanta, "BOTON,{{199}}Baja", 1026, 1036, BtnBaja;
     nBtnBaja = FSalida;
     |CONTROL_SIMPLE nPanta, "BOTON,{{155}}Consulta", 1038, 1048, BtnCons;
     nBtnCons = FSalida;

     |HAZ TieneLineas;
     |ABRET #17;
     |ABRET #18;
     |ABRET #19;
     nRango = 4 + 8 + 16 + 32;
     |LINEAL_SIMPLE #1#17, nRango, 1102, 2999, NULL, NULL, Evento17;
     nGridCab = FSalida;
     enCtrFin = nGridCab;
     |HAZ EsperaFin;
     |PULSATECLA;
     |CIERRAT #19;
     |CIERRAT #18;
     |CIERRAT #17;
|FPRO;
