|FICHEROS;
     iber0004 #0;
     agifa019 #19;
     dsm00241 #241;

     agifa067 #67;       ||Lineas Pedidos Compra
     agifa007 #7;        ||Series
|FIN;

|VARIABLES;
     nModo     = 0;
     nUni      = 0;
     nFactor   = 0;
     aAlmacen = "";
|FIN;

|INCLUYE i_varart;

|PROCESO LeeArti4;
     |ABRE #19;
     #19#0 = #0#3;
     |LEE 000#19=;
     |CIERRA #19;
|FPRC;

|PROCESO MinMulti4;
     #241#0 = #19#5;
     #241#1 = 1;
|FPRC;

|PROCESO MaxMulti4;
     #241#0 = #19#5;
     #241#1 = 999;
|FPRC;

|PROCESO Medida4_66; |TIPO 66;
     |HAZ LeeArti4;
     |ABRE #241;
     |CONSULTA_F_CLAVE #1#241, MinMulti4, MaxMulti4;
     |SI FSalida = 0;
          #0#10 = #241#2; |PINTA #0#10;
     |SINO;
          |ERROR;
     |FINSI;
     |CIERRA #241;
|FPRC;

|PROCESO Medida4_0; |TIPO 0;
     |HAZ LeeArti4;
     |SI #19#204 = "N"; |ACABA; |FINSI;
     |ABRE #241;
     |SELECT #2#241;
     #241#0 = #19#5;
     #241#2 = #0#10;
     |LEE 000#241=;
     |SI FSalida ! 0;
          |MENAV "0000Codigo no definido...";
          |ERROR; |ACABA;
     |FINSI;

     |SI #0Campo ! Contenido;
          #241#0 = #19#5;
          #241#2 = Contenido;
          |LEE 000#241=;
          nUni = #0#5;
          |SI #241#6 = "D";
               nFactor = 1 * #241#5;
          |SINO;
               nFactor = 1 / #241#5;
          |FINSI;
          nUni = #0#5 * nFactor;
          #241#0 = #19#5;
          #241#2 = #0#10;
          |LEE 000#241=;
          |SI #241#6 = "D";
               nFactor = 1 * #241#5;
          |SINO;
               nFactor = 1 / #241#5;
          |FINSI;
          nUni = nUni / nFactor;
          #0#5 = nUni;
          |PINTA #0#5;
     |FINSI;
     |CIERRA #241;
|FPRC;

|PROCESO Medida4_7; |TIPO 7;
     nModo = (FEntrada / 100) ! 0;
     |HAZ LeeArti4;
     |SI #19#204 = "N";
          |C_M #0#10, 1, "N";
          #0#10 = #19#5;
     |SINO;
          |C_M #0#10, 1, "S";
          |SI #0#10 = "     ";
               #0#10 = #19#5;
          |SINO;
               |SI nModo = 1;
                    #0#10 = #19#5;
               |FINSI;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO Tipo2; |TIPO 2;
     |ABRE #agifa067;
     |ABRE #agifa007;
     #agifa007#26 = #iber0004#7;
     |LEE 000#agifa007.=;
     |SI FSalida = 0;
          aAlmacen = #agifa007#31;
     |FINSI;
     |CIERRA #agifa007;
     |DDEFECTO #agifa067;
     #agifa067#2 = #iber0004#3;
     #agifa067#3 = aAlmacen;
     #agifa067#5 = #iber0004#5;

     enForma = 0 +. 1;
     eaDocu = "agifa067";
     |HAZ StockEntra;

     ||||HAZ AcumulaPC;
     |CIERRA #agifa067;
|FPRC;


|PROCESO Llena004; |TIPO 6;
     enAlta = 1;
     eaArticulo = #0Campo;
     |HAZ LlenaArticulo;
     |SI FSalida = 0;
          #0Campo = eaArticulo;
          |PINTA #0Campo;
     |SINO;
          |ERROR; |ACABA;
     |FINSI;
|FPRC;
