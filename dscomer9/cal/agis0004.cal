|FICHEROS;
     agis0004 #0;
     agis0002 #1;
     agifa321 #5;
     agifa324 #6;
|FIN;

|VARIABLES;
     &eaDivisa = "";
     &nDeci_Base = 0;
     &nDeci_PreBase = 0;
     &nDeci_PreBaseMx = 0;
     &TipoCta = "";
     modo = 0;
     numero = 0;
     &TPedido = 0;
     &BAdela  = 0;
     &Cliente = "";
     &SPedido = "";
     &NPedido = 0;
     &FPedido = @;
     &PPedido = "";
     mensaje1 = "2400NDesea imprimir recibo S/N: ";
     imprimir = "";
     &ser = "";
     &doc = 0;
|FIN;

||INC-LUYE llena_c5;

|PROCESO numero; |TIPO 7;
     modo = (FEntrada / 100) ! 0;
     |SI modo = 1;
          |LEE 000#0u;
          |SI FSalida = 0;
               numero = #0#0 + 1;
          |SINO;
               numero = 1;
          |FINSI;
          |DDEFECTO #0;
          #0#0 = numero;
          |PINTA #0#0;
          |PTEC 802;
     |FINSI;
|FPRC;

|PROCESO lineas;
     #0#7 = #0#7 + #1#9;
     #0#8 = #0#8 + 1;
     |PINTA #0#7;
     |PINTA #0#8;
     |SI imprimir = "SI";
          ser = #0#1;
          doc = #0#2;
          eaDivisa = "";
          |HAZ ImpreACta;
     |FINSI;
|FPRC;

|DEFBUCLE suma;
     #1#1;
     ;
     TipoCta,#0#1,#0#2,01;
     TipoCta,#0#1,#0#2,99;
     be;
     NULL,lineas;
|FIN;

|PROCESO pago;|TIPO 0;
     |SI FSalida ! 9;  |ACABA;  |FINSI;
     TipoCta = "P";
     Cliente = #0#3;
     SPedido = #0#1;
     NPedido = #0#2;
     FPedido = ~;
     PPedido = "";
     BAdela = 0;
     TPedido = 0;
     |SUB_EJECUTA_NP "agis0002";
     #0#7 = 0;
     #0#8 = 0;
     |BLIN 24;
     |CONFI mensaje1;
     |SI FSalida = 0;
          ser = SPedido;
          doc = NPedido;
          |SUB_EJECUTA_NP "agifa149";
     |FINSI;
     |BUCLE suma;
     |PINTA #0#7;
|FPRC;

|PROCESO LeeDecimBase; |TIPO 13;
     |ABRE #agifa321;
     |ABRE #agifa324;
     |LEE 001#agifa321.p;
     #agifa324#0 = #agifa321#9; ||Igualo a moneda base
     |LEE 001#agifa324.=;
     nDeci_Base = #agifa324#7;  ||Decimales moneda base
     nDeci_PreBase = #agifa324#9;  ||Decimales precio de moneda base
     nDeci_PreBaseMx = #agifa324#9;  ||Decimales precio de moneda base
     |CIERRA #agifa321;
     |CIERRA #agifa324;
|FPRC;
