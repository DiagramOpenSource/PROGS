|FICHEROS;
     pcegz059 #0;
     pcegm002 #2;
     pcegw012 #12,MANTE;
|FIN;

|VARIABLES;
     aAlfa = "";
     nMes = 0;
     nA¤o = 0;
     fFecha = "";
     nHay = 0;
     aMarca = "";
     nTecla = 0;
|FIN;

|PROCESO Tmp;
     #2#48 = #12#0;
     #2#0 = #12#1;
     |LEE 121#2=;
     |SI FSalida = 0;
          |SI #0#0 = "E";
               |BUCLELIN 1 NULL #2;
               |BORRA 020#2a;
          |FINSI;
          |SI #0#0 = "R";
               #2#83 = "R";
               #2#100 = Usuario % 810;
               #2#101 = #0#2;
               #2#110 = #0#1;
               #2#129 = #0#3;
               |GRABA 020#2a;
          |FINSI;
          |LIBERA #2;
     |FINSI;
|FPRC;

|DEFBUCLE Tmp;
     #12#1;
     5;
     "     ", 000001, "*";
     "zzzzz", 999999, "*";
     ;
     NULL, Tmp;
|FIN;

|PROCESO MarcaTodo;
     #12#5 = aMarca;
     |GRABA 020#12a;
     |LIBERA #12;
|FPRC;

|DEFBUCLE MarcaTodo;
     #12#1;
     ;
     INICIO;
     FINAL;
     be;
     NULL, MarcaTodo;
|FIN;

|PROCESO Tecla11; |TIPO 11;
     |SI FSalida = 13; |O FSalida = 14;
          nTecla = FSalida;
          |PTEC 807;
     |FINSI;
|FPRC;

|PROCESO Tecla0; |TIPO 0;
     |SI #12#5 = "*";
          #12#5 = "";
     |SINO;
          #12#5 = "*";
     |FINSI;
     |GRABA 020#12a;
|FPRC;

|PROCESO Ofertas;
     #12#0 = #2#48;
     #12#1 = #2#0;
     #12#2 = #2#1;
     #12#3 = #2#3;
     #12#4 = #2#4;
     |GRABA 020#12n;
     nHay = 1;
|FPRC;

|DEFBUCLE Ofertas;
     #2#4;
     1;
     "P", "      ", 0001, "     ", 000001, "01.01.0000";
     "P", "zzzzzz", 9999, "zzzzz", 999999, fFecha;
     ;
     NULL, Ofertas;
|FIN;

|PROCESO Rechaza; |TIPO 0;
     |SI #0#0 = "E";
          |C_M #0#2, 1, "N";
          |C_M #0#3, 1, "N";
     |SINO;
          |C_M #0#2, 1, "S";
          |C_M #0#3, 1, "S";
     |FINSI;
|FPRC;

|PROCESO Min;
     #12#0 = "     ";
     #12#1 = 1;
|FPRC;

|PROCESO Max;
     #12#0 = "zzzzz";
     #12#1 = 999999;
|FPRC;

|PROCESO Tipo3; |TIPO 3;
     aAlfa = #0#1 % 402; nMes = aAlfa;
     aAlfa = #0#1 % 704; nA¤o = aAlfa;
     nMes = nMes - 3;
     |SI nMes < 1;
          nA¤o = nA¤o - 1;
          nMes = nMes + 12;
     |FINSI;
     aAlfa = (#0#1 % 103) + (("00" + nMes) % -102) + "." + (("0000" + nA¤o) % -104);
     fFecha = aAlfa;

     aAlfa = Usuario;
     |NOME_DAT #12 aAlfa; |DELINDEX #12;

     |ABRE #12;
     |BUCLE Ofertas;
     |CIERRA #12;
     |SI nHay = 0;
          |MENAV "0000No hay ofertas pendientes...";
     |SINO;
          |PINPA #0#12;
          |PARA nTecla = 1; |SI nTecla ! 0; |HACIENDO;
               nTecla = 0;
               |ENTLINEAL #1#12, 1, 4, 22, 0, Min, Max;
               |SI nTecla = 13; aMarca = "*"; |BUCLE MarcaTodo; |FINSI;
               |SI nTecla = 14; aMarca = " "; |BUCLE MarcaTodo; |FINSI;
          |SIGUE;
          |CONFI "0000N¿Conforme con lo seleccionado?";
          |SI FSalida = 0;
               |ABRE #2;
               |BUCLE Tmp;
               |CIERRA #2;
          |FINSI;
     |FINSI;

     |DELINDEX #12;
|FPRC;
