|FICHEROS;
     goarquit #0;
|FIN;
----------------------------------------------------------------------
|VARIABLES;
     puente    = "";
     puente1   = "";

     nConta    = 0;
     nModo     = 0;

     aAlfa      = "";
     aNifQbf1   = "";
     aNifQbf2   = "";

     &eaVarDni  = "";
     &enCalcCif = 0;
|FIN;
----------------------------------------------------------------------

|PROCESO letrarel; |TIPO 6;
     |SI FSalida = 9;
          eaVarDni  = #0Campo;
          |HAZ CalculoNIFCIF;
          #0Campo = eaVarDni;
          |PINTA #0Campo;
          |ERROR; |ACABA;
     |FINSI;

     eaVarDni  = #0Campo;
     |HAZ CalculoNIFCIF;

     aNifQbf1 = #0Campo;   |QBF aNifQbf1;
     aNifQbf2 = eaVarDni;  |QBF aNifQbf2;

     |SI aNifQbf1 ! aNifQbf2; |Y aNifQbf1 ! "";
          aAlfa = "0000NEl NIF puede ser erróneo."+&13+"¿Desea calcularlo?";
          |CONFI aAlfa;
          |SI FSalida = 0;
               #0Campo = eaVarDni; |PINTA #0Campo;
          |FINSI;
     |FINSI;
|FPRC;

----------------------------------------------------------------------
|PROCESO cp4;
     puente = #0#10; puente = "00" + puente; puente = puente % -102;
     puente1 = puente;
     puente = #0#11; puente = "000" + puente; puente = puente % -103;
     puente1 = puente1 + puente;
     #0#12 = puente1;
|FPRC;
-------------------------------------------------------------------------------
|PROCESO ContArqu; |TIPO 7;
     nModo = (FEntrada/100)!0

     |SI nModo = 1;
          |LEE 000#0u;

          |SI FSalida = 0;
               nConta = #0#0 + 1;
          |SINO;
               nConta = 1;
          |FINSI;

          |DDEFECTO #0;
          #0#0 = nConta;
          |PINTA #0#0;

     |FINSI;


|FPRC;
-------------------------------------------------------------------------------
