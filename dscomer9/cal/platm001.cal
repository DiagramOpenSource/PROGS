|FICHEROS;
 platm001 #0;
 platm006 #1;
|FIN;

|VARIABLES;
     nHay = 0;
     aDPlata = "";
     aHPlata = "";
     aComu = "";
     aHDir = "";
     aHNum = "";;
     aHEsca = "";
     aHPiso = "";
     nHCod1 = 0;
     nHCod2 = 0;
     aDDir = "";
     aDNum = "";;
     aDEsca = "";
     aDPiso = "";
     nDCod1 = 0;
     nDCod2 = 0;

 nModo = 0;
 nNumero = 0;
 &aCod1 = "";
 &aCod2 = "";
 &aCodigo = "";
 aDirec = "";
 aNumer = "";
 aPlata = "";

     aAlfa      = "";
     aNifQbf1   = "";
     aNifQbf2   = "";

     &eaVarDni  = "";
     &enCalcCif = 0;
|FIN;

|PROCESO LetraDni001;
     |SI Campo ! 13; |ACABA; |FINSI;
     eaVarDni  = #0Campo;
     |HAZ CalculoNIFCIF;

     aNifQbf1 = #0Campo;   |QBF aNifQbf1;
     aNifQbf2 = eaVarDni;  |QBF aNifQbf2;

     |SI aNifQbf1 ! aNifQbf2; |Y aNifQbf1 ! "";
          aAlfa = "0000NEl NIF puede ser erróneo."+&13+"¿Desea calcularlo?";
          |CONFI aAlfa;
          |SI FSalida = 0;
               #0Campo = eaVarDni; |PINTA #0Campo;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO CodPos;
 aCod1 = #0#6;
 aCod2 = #0#7;
 |HAZ cp1;
 #0#8 = aCodigo;
|FPRC;


|CALCULO Comunidad1;
     |SI #0Campo ! Contenido;
          |ABRE #1;
          |SELECT #3#1;
          #1#2 = #0#3;
          #1#3 = #0#4;
          #1#8 = #0#14;
          |LEE 000#1=;
          |SI FSalida = 0;
               #0#12 = #1#0;
               #0#17 = #1#1;
               |PINTA #0#12;
               |PINTA #0#17;
          |FINSI;
          |CIERRA #1;
     |FINSI;
|FCAL;
