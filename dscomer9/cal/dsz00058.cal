|FICHEROS;
     dsz00058 #0;
     agifa501 #501;
     agifa502 #502;
|FIN;

|INCLUYE i_varart;

|VARIABLES;
     &EURODB = 0;
     nTotal = 0;
     nBase = 0;
     nIva = 0;
|FIN;

|PROCESO agifa502;
     eaCli = #501#1; enTiva = #502#13; efFiva = #501#14; |HAZ IVACli;
     #502#10 = #502#6 / (1 + (enIva / 100));

     nTotal = ((#502#6 * #502#5) < #502#14) ! EURODB;
     nBase = (nTotal / (1 + (enIva / 100))) ! EURODB;
     nIva = nTotal - nBase;
     #502#7 = nTotal;
     #502#21 = nBase;
     #502#19 = nIva;

     |GRABA 020#502a;
|FPRC;

|DEFBUCLE agifa502;
     #502#1;
     ;
     #501#36, #501#0, 001;
     #501#36, #501#0, 999;
     ;
     NULL, agifa502;
|FIN;

|PROCESO agifa501;
     |BUCLE agifa502;
     |HAZ Recal501;
     |GRABA 020#501a;
     |LIBERA #501;
|FPRC;


|DEFBUCLE agifa501;
     #501#3;
     ;
     #0#4, "      ", " ", #0#0, #0#2;
     #0#5, "zzzzzz", "z", #0#1, #0#3;
     be;
     NULL, agifa501;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |BUCLE agifa501;
|FPRC;
