|FICHEROS;
     dsz00016 #0;
     agifa019 #1;
     agifa017 #2;
     dsm00004 #3;

     refer19@ #11
     refer17@ #12;
     refer04@ #13;
     refer24@ #14;
|FIN;

|VARIABLES;
     &eaArticulo = "";
     &Tempo      = "";
     aTempo11    = "";
     aTempo12    = "";
     aTempo13    = "";
     aTempo14    = "";
     &eaDarti    = "";
     &eaHarti    = "";
     &eaFichero1 = "";
     &eaFichero2 = "";
     &eaFichero3 = "";
     &eaFichero4 = "";

     &enSw       = 0;
     aAlfa       = "";
     aDef        = "";
     aMas        = "";
     aInforme    = "dsz00016";
|FIN;

|PROCESO dsm00004;
     #13#0 = #3#0;
     #13#1 = #3#1;
     #13#2 = #3#2;
     |LEE 000#13=;
     |SI FSalida ! 0; |DDEFECTO #13; |FINSI;

     ||      Total         P.Servir           P.Recibir
     |SI #3#12 ! #13#12; |O #3#4 ! #13#4; |O #3#5 ! #13#5;
          #0#3 = #3#12;
          #0#4 = #3#4;
          #0#5 = #3#5;
          #0#6 = #13#12;
          #0#7 = #13#4;
          #0#8 = #13#5;
          enSw = 3;
          |PRINT;
     |FINSI;
|FPRC;

|DEFBUCLE dsm00004;
     #3#1;
     ;
     #0#0, 00001, "      ";
     #0#1, 99999, "zzzzzz";
     ;
     NULL, dsm00004;
|FIN;

|PROCESO agifa017;
     #12#0 = #2#0;
     #12#1 = #2#1;
     |LEE 000#12=;
     |SI FSalida ! 0; |DDEFECTO #12; |FINSI;

     ||      Total         P.Servir           P.Recibir
     |SI #2#5 ! #12#5; |O #2#42 ! #12#42; |O #2#43 ! #12#43;
          #0#3 = #2#5;
          #0#4 = #2#42;
          #0#5 = #2#43;
          #0#6 = #12#5;
          #0#7 = #12#42;
          #0#8 = #12#43;
          enSw = 2;
          |PRINT;
     |FINSI;
|FPRC;

|DEFBUCLE agifa017;
      #2#1;
     ;
     #0#0, 00001;
     #0#1, 99999;
     ;
     NULL, agifa017;
|FIN;

|PROCESO  agifa019;
     #11#0 = #1#0;
     |LEE 000#11=;
     |SI FSalida ! 0; |DDEFECTO #11; |FINSI;

     ||      Total         P.Servir           P.Recibir
     |SI #1#6 ! #11#6; |O #1#15 ! #11#15; |O #1#16 ! #11#16;
          #0#3 = #1#6;
          #0#4 = #1#15;
          #0#5 = #1#16;
          #0#6 = #11#6;
          #0#7 = #11#15;
          #0#8 = #11#16;
          enSw = 1;
          |PRINT;
     |FINSI;
|FPRC;

|DEFBUCLE agifa019;
     #1#1;
     ;
     #0#0;
     #0#1;
     ;
     NULL, agifa019;
|FIN;
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|PROCESO agifa019Gra;
     |SALVA_DATOS #1;
     |REPON_DATOS #11;
     |GRABA 020#11n;
|FPRC;

|DEFBUCLE agifa019Gra;
     #1#1;
     ;
     #0#0;
     #0#1;
     ;
     NULL, agifa019Gra;
|FIN;
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|PROCESO Tipo3; |TIPO 3;
     |DDEF aDef;
     aMas = aDef + "agifa019.mas";
     |CARGA_DEF aMas, refer19@;
     |SI FSalida ! 0
          aAlfa = "0000Error al cargar" + aMas;
     |SINO;
          aMas = aDef + "agifa017.mas";
          |CARGA_DEF aMas, refer17@;
          |SI FSalida ! 0;
               aAlfa = "0000Error al cargar" + aMas;
          |SINO;
               aMas = aDef + "dsm00004.mas";
               |CARGA_DEF aMas, refer04@;
               |SI FSalida ! 0;
                    aAlfa = "0000Error al cargar" + aMas;
               |SINO;
                    aMas = aDef + "dsm00024.mas";
                    |CARGA_DEF aMas, refer24@;
                    |SI FSalida ! 0;
                         aAlfa = "0000Error al cargar" + aMas;
                    |FINSI;
               |FINSI;
          |FINSI;
     |FINSI;
     |SI aAlfa ! "";
          |MENAV aAlfa;
          |ACABA;
     |FINSI;

     |HAZ CreaTempo; aTempo11 = Tempo; |NOME_DAT #11 aTempo11;
     |HAZ CreaTempo; aTempo12 = Tempo; |NOME_DAT #12 aTempo12;
     |HAZ CreaTempo; aTempo13 = Tempo; |NOME_DAT #13 aTempo13;
     |HAZ CreaTempo; aTempo14 = Tempo; |NOME_DAT #14 aTempo14;
     |DELINDEX #11;
     |DELINDEX #12;
     |DELINDEX #13;
     |DELINDEX #14;
     eaFichero1 = aTempo11;
     eaFichero2 = aTempo12;
     eaFichero3 = aTempo13;
     eaFichero4 = aTempo14;

     |IMPRE 0;
     |SI FSalida = 0;
          |INFOR aInforme;
          |SI FSalida = 0;
               eaDarti = #0#0;
               eaHarti = #0#1;
               |ABRE #11;
               |BUCLE agifa019Gra;
               |CIERRA #11;
               |SUB_EJECUTA "agifa068;CHEQUEO";
               |ABRE #11;
               |ABRE #12;
               |ABRE #13;
               |BUCLE agifa019;
               |BUCLE agifa017;
               |BUCLE dsm00004;
               |CIERRA #11;
               |CIERRA #12;
               |CIERRA #13;
               |SI enSw ! 0; |PIEINF; |FINSI;
               |FININF;
          |FINSI;
          |FINIMP;
     |FINSI;

     |DELINDEX #11; Tempo = aTempo11; |HAZ BoraTempo;
     |DELINDEX #12; Tempo = aTempo12; |HAZ BoraTempo;
     |DELINDEX #13; Tempo = aTempo13; |HAZ BoraTempo;
     |DELINDEX #14; Tempo = aTempo14; |HAZ BoraTempo;

     |DESCARGA_DEF #refer19@;
     |DESCARGA_DEF #refer17@;
     |DESCARGA_DEF #refer04@;
     |DESCARGA_DEF #refer24@;
|FPRC;

|PROCESO Llena016; |TIPO 6;
     eaArticulo = #0Campo;
     |HAZ LlenaArticulo;
     |SI FSalida = 0;
          #0Campo = eaArticulo;
          |PINTA #0Campo;
     |SINO;
          |ERROR; |ACABA;
     |FINSI;
|FPRC;
