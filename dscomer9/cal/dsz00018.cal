|FICHEROS;
     dsz00018 #0;
     agifa081 #81;
     agifa067 #67;
     agifa019 #19;
     agifa142 #142;
     dsz00115 #115,MANTE;
|FIN;

|VARIABLES;
     &Tempo    = "";
     aTempo0   = "";
     nClave    = 0;
     aDProv    = "";
     aHProv    = "";
     aFichero  = "";
     aDSer     = "";
     aHSer     = "";
     nPen1     = 0;
     nPen2     = 0;
     nHay      = 0;
     nDdocu    = 0;
     nHdocu    = 0;
     aSer = "";
     nPed = 0;
     nLin = 0;
     aArti = "";
     nSali = 0;
|FIN;

|INCLUYE i_varart;

|PROCESO Tipo_12; |TIPO 12;
     nSali = FSalida;
|FPRC;

|PROCESO agifa067;
     #19#0 = #67#2;
     |LEE 000#19=;
/*
     nPen1 = #67#5 - #67#38;
     nPen2 = #67#41 - #67#46;
     |SI #19#179 = "N"; |O #142#117 = "N";
          |SI nPen1 = 0; |ACABA; |FINSI;
     |SINO;
          |SI nPen1 = 0; |O nPen2 = 0; |ACABA; |FINSI;
     |FINSI;
*/
     |SI #142#225 = "B";
          |SI #19#179 = "S"; |Y  #142#117 = "S";
               |SI #67#38 = #67#5; |Y #67#46 = #67#41; |ACABA;  |FINSI;
          |SINO;
               |SI #67#38 = #67#5; |ACABA;  |FINSI;
          |FINSI;
     |SINO;
          |SI #67#38 = #67#5; |ACABA;  |FINSI;
          |SI #19#179 = "S"; |Y #142#117 = "S";
               |SI #67#46 = #67#41; |ACABA; |FINSI;
          |FINSI;
     |FINSI;


     #81#25 = #67#28;
     #81#0 = #67#0;
     |LEE 000#81=;
     |SI FSalida = 0;
          #0#0 = #67#28;
          #0#1 = #67#0;
          #0#2 = #67#1;
          #0#3 = #81#1;
          #0#4 = #67#2;
          #0#5 = #67#4;
          #0#6 = #67#5;        || Ped
          #0#7 = #67#38;       || Ser
          #0#8 = #0#6-#0#7;    || Pend
          #0#9 = #81#4;
          #0#10= #81#8;
          #0#11= #81#37;
          |GRABA 020#0n;
          nHay = 1;
     |FINSI;
|FPRC;

|DEFBUCLE agifa067;
     #67#2;
     ;
     aDProv, "00.00.0000",   0,   0,   0, "  ", aDSer, nDdocu;
     aHProv, "31.12.9999", 100, 100, 100, "zz", aHSer, nHdocu;
     ;
     NULL, agifa067;
|FIN;

|PROCESO Tecla11; |TIPO 11;
     |HAZ Tecla;
|FPRC;

|PROCESO Tecla; |TIPO 0;
     |SI FSalida = 11;
          |PUSHV 0501 2380;
          |BLANCO 921 1559;
          |PINPA #0#115;
          |PINDA #0#115;
          |ENDATOS #1#115;
          |SI nSali = 0;
               aSer = #0#0;
               nPed = #0#1;
               nLin = #0#2;
               aArti = #115#0;
               |PTEC 806;
          |FINSI;
          |ERROR;
          |POPV;
     |FINSI;

     |SI FSalida = 13; |O FSalida = 14;
          |C_M #0#0, 1, "N";
          |C_M #0#1, 1, "N";
          |C_M #0#2, 1, "N";
          |ERROR;
          |PTEC 807;
          eaSer = #0#0;
          enDocu = #0#1;
          enLinea = #0#2;
          |SI FSalida = 14;
               enLinea = 0;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO Inf;
     |SI FSalida = "POSICION";
          #0#0 = aSer;
          #0#1 = nPed;
          #0#2 = nLin;
     |SINO;
          #0#0 = "     ";
          #0#1 = 1;
          #0#2 = 1;
     |FINSI;
|FPRC;

|PROCESO Sup;
     #0#0 = "zzzzz";
     #0#1 = 999999;
     #0#2 = 999;
|FPRC;

|PROCESO BusArti2;
     |ABRE #0;
     #0#0 = aSer;
     #0#1 = nPed;
     #0#2 = nLin;
     |LEE 000#0];
     |LEE 000#0s;
     |PARA; |SI FSalida = 0; |HACIENDO;
          |SI #0#4 = aArti;
               aSer = #0#0;
               nPed = #0#1;
               nLin = #0#2;
               nHay = 1;
               |SAL;
          |FINSI;
          |LEE 000#0s;
     |SIGUE;
     |CIERRA #0;
|FPRC;

|PROGRAMA;
     |ABRE #142; |LEE 000#142p; |CIERRA #142;

     nClave = -1;
     |SI eaProve = "";
          aDProv = "    ";
          aHProv = "zzzz";
     |SINO;
          aDProv = eaProve;
          aHProv = eaProve;
     |FINSI;

     |SI eaSer = "";
          aDSer = "  ";
          aHSer = "zz";
     |SINO;
          aDSer = eaSer;
          aHSer = eaSer;
          |C_M #0#0, 1, "N";
          nClave = -2;
     |FINSI;

     |SI enDocu = 0;
          nDdocu = 0;
          nHdocu = 999999;
     |SINO;
          nDdocu = enDocu;
          nHdocu = enDocu;
          |C_M #0#0, 1, "N";
          |C_M #0#1, 1, "N";
         nClave = -3;
     |FINSI;

     |HAZ CreaTempo; aTempo0 = Tempo;
     |NOME_DAT #0 aTempo0; |DELINDEX #0;

     |ABRE #0;
     |ABRE #81;
     |ABRE #19;
     |BUCLE agifa067;
     |CIERRA #19;
     |CIERRA #81;
     |CIERRA #0;
     |SI nHay = 0;
          |MENAV "0000No hay pedidos pendientes...";
     |SINO;
          |PINPA #0#0;
       |ET Otra;
          enLinea = 0;
          |ENTLINEAL #1#0, nClave, 4, 20, 0, Inf, Sup;
          |SI aArti ! "";
               nHay = 0;
               |HAZ BusArti2;
               |SI nHay = 0;
                    |MENAV "0000El articulo no se encuentra en las lineas pendientes.";
               |FINSI;
               aArti = "";
               #0#0 = aSer;
               #0#1 = nPed;
               #0#2 = nLin;
               |LEE 000#0=;
               |VETE Otra;
          |FINSI;
     |FINSI;
     |DELINDEX #0; Tempo = aTempo0; |HAZ BoraTempo;
|FPRO;
