|FICHEROS;
     berz0003 #0;
     berm0001 #1;
     berm0002 #2;
     berm0003 #3;
     agifa019 #19;
|FIN;

|VARIABLES;
     nError = 0;
     aAlfa = "";
|FIN;

|PROCESO Copia2;
     #2#0 = #0#1;
     |GRABA 020#2n;
|FPRC;

|PROCESO Copia3;
     #3#0 = #0#1;
     |GRABA 020#3n;
|FPRC;

|DEFBUCLE Copia3;
     #3#1;
     ;
     #0#0, 001, 001;
     #0#0, 999, 999;
     e;
     NULL, Copia3;
|FIN;

|DEFBUCLE Copia2;
     #2#1;
     ;
     #0#0, 001;
     #0#0, 999;
     e;
     NULL, Copia2;
|FIN;

|PROCESO Borra2;
     |BORRA 020#2a;
     |LIBERA #2;
|FPRC;

|PROCESO Borra3;
     |BORRA 020#3a;
     |LIBERA #3;
|FPRC;

|DEFBUCLE Borra3;
     #3#1;
     ;
     #0#1, 001, 001;
     #0#1, 999, 999;
     be;
     NULL, Borra3;
|FIN;

|DEFBUCLE Borra2;
     #2#1;
     ;
     #0#1, 001;
     #0#1, 999;
     be;
     NULL, Borra2;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |BUCLE Borra2;
     |BUCLE Borra3;

     |ABRE #1;
     #1#0 = #0#0;
     |LEE 020#1=;
     |SI FSalida = 0;
          #1#0 = #0#1;
          |GRABA 020#1n;
          |SI FSalida = 0;
               |BUCLE Copia2;
               |BUCLE Copia3;
               aAlfa = "0000Escandallo creado: " + #0#1;
               |MENAV aAlfa;
          |FINSI;
     |FINSI;
     |CIERRA #1;
|FPRC;

|PROCESO CompruLin;
     |SI #2#2 = #0#1;
          nError = 1;
          |MENAV "0000El escandallo origen tiene el art¡culo como componente...";
          |ERROR10;
     |FINSI;
|FPRC;

|DEFBUCLE CompruLin;
     #2#1;
     ;
     #0#0, 001;
     #0#0, 999;
     ;
     NULL, CompruLin;
|FIN;

|PROCESO Destino; |TIPO 0;
     |ABRE #19;
     #19#0 = #0#1;
     |LEE 000#19=;
     |SI FSalida ! 0;
          |MENAV "0000No existe art¡culo...";
          |ERROR;
     |SINO;
          #0#3 = #19#1; |PINTA #0#3;
          |ABRE #1;
          #1#0 = #0#1;
          |LEE 000#1=;
          |SI FSalida = 0;
               |MENAV "0000El escandallo destino ya existe...";
               |ERROR;
          |SINO;
               nError = 0;
               |BUCLE CompruLin;
               |SI nError ! 0;
                    |ERROR;
               |FINSI;
          |FINSI;
          |CIERRA #1;
     |FINSI;
     |CIERRA #19;
|FPRC;

|PROCESO Origen66; |TIPO 66;
     |ABRE #1;
     #1#0 = #0#0;
     |LEE 000#1];
     |CONSULTA_CLAVE #1#1;
     |SI FSalida = 0;
          #0#0 = #1#0; |PINTA #0#0;
     |SINO;
          |ERROR;
     |FINSI;
     |CIERRA #1;
|FPRC;

|PROCESO Origen; |TIPO 0;
     |ABRE #1;
     #1#0 = #0#0;
     |LEE 000#1=;
     |SI FSalida = 0;
          #0#2 = #1#1; |PINTA #0#2;
     |SINO;
          |MENAV "0000El escandallo no existe...";
          |ERROR;
     |FINSI;
     |CIERRA #1;
|FPRC;

|PROGRAMA;
     |PINPA #0#0;
     |PARA; |SI; |HACIENDO;
          |DDEFECTO #0;
          |PINDA #0#0;
          |ENDATOS #1#0;
          |SI FSalida ! 0; |SAL; |FINSI;
     |SIGUE;
|FPRO;
