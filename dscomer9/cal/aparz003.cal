|FICHEROS;
     aparz003 #0;
     aparm032 #32;
     aparm034 #34;
|FIN;

|VARIABLES;
     nImp = 0;
     nLts = 0;
     nError = 0;
     nValor = 0;
     aAlfa = "";
     nLitro = 0;
     nModo = 0;
     nLin = 0;
     {-1}aMenu = "";
     aMenu1 = "2400";
     aMenu2 = "1";
     aMenu3 = "Opciones:";
     aMenu4 = "RAC";
     aMenu5 = " Repasar ";
     aMenu6 = " Aceptar ";
     aMenu7 = " Cancelar ";
|FIN;

|PROCESO Actualiza;
     |DDEFECTO #34;
     |SELECT #4#34;
     #34#3 = #0#1;
     #34#6 = "";
     #34#7 = "";
     #34#1 = #0#0;
     |LEE 000#34=;
     nLts = #34#4;
     nImp = #34#5;

     |SI #0#5 = "S";
          |SI #0#2 = 0; |Y #0#3 = 0;
               |BORRA 020#34c;
          |SINO;
               |LEE 121#34=;
               #34#4 = #0#2;
               #34#5 = #0#3;
               |GRABA 020#34a;
          |FINSI;
     |SINO;
          |SELECT #1#34;
          |LEE 000#34u;
          |SI FSalida = 0;
               nLin = #34#0 + 1;
          |SINO;
               nLin = 1;
          |FINSI;
          |DDEFECTO #34;
          #34#0 = nLin;
          #34#1 = #0#0;
          #34#2 = "C";
          #34#3 = #0#1;
          #34#4 = #0#2;
          #34#5 = #0#3;
          |GRABA 020#34n;
     |FINSI;

     #32#0 = #0#0;
     |LEE 121#32=;
     |SI FSalida = 0;
          nValor = #32#2 * #32#5;
          nValor = nValor + #0#3 - nImp;
          #32#2 = #32#2 + #0#2 - nLts;
          #32#5 = nValor / #32#2;
          |GRABA 020#32a;
     |FINSI;
|FPRC;

|DEFBUCLE Actualiza;
     #0#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Actualiza;
|FIN;

|PROCESO Chequea;
     #32#0 = #0#0;
     |LEE 020#32=;
     |SI FSalida = 0;
          nLitro = #32#2 + #0#2;
          |SI nLitro > #32#3;
               aAlfa = "0000El surtidor [" + #0#0 + "] excede de litros:" + nLitro + " Max:"+ #32#3;
               |MENAV aAlfa;
               nError = 1;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE Chequea;
     #0#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Chequea;
|FIN;

|PROCESO Min;
     #0#0 = 000;
|FPRC;

|PROCESO Max;
     #0#0 = 999;
|FPRC;

|PROCESO Tipo0; |TIPO 0;
     |SELECT #4#34;
     #34#3 = #0#1;
     #34#6 = "";
     #34#7 = "";
     #34#1 = #0#0;
     |LEE 000#34=;
     |SI FSalida = 0;
          #0#5 = "S";
          #0#2 = #34#4; |PINTA #0#2;
          #0#3 = #34#5; |PINTA #0#3;
     |SINO;
          #0#5 = "N";
     |FINSI;
|FPRC;

|PROCESO Tipo2; |TIPO 2;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 3; |Y #0#5 = "S";
          |MENAV "0000No se puede borrar, deje los litros e importe a '0'";
          |ERROR;
     |FINSI;
|FPRC;

|PROGRAMA;
     |CLS;

     aAlfa = Usuario;
     |NOME_DAT #0 aAlfa;
     |DELINDEX #0;

     |PINPA #0#0;
     |PARA; |SI; |HACIENDO;
          |ABRE #34;
          |ENTLINEAL #1#0, 1, 1, 22, 0, Min, Max;
          |CIERRA #34;
          |ABRE #0;
          |LEE 000#0p;
          |SI FSalida ! 0; |SAL; |FINSI;
          |MENU aMenu;
          aMenu2 = FSalida;
          |SI aMenu2 ! 1;
               |SI aMenu2 = 2;
                    nError = 0;
                    |ABRE #32;
                    |BUCLE Chequea;
                    |SI nError = 0;
                         |ABRE #34;
                         |BUCLE Actualiza;
                         |CIERRA #34;
                         |SAL;
                    |FINSI;
                    |CIERRA #32;
               |SINO;
                    |SAL;
               |FINSI;
          |FINSI;
     |SIGUE;
     |CIERRA #0;
     |DELINDEX #0;
|FPRO;
