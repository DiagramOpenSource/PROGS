|FICHEROS;
     ortsm021 #0,MANTE;
     agifa024 #24;
     agifa025 #25;
|FIN;

|VARIABLES;
     &eaTipo = "";
     &eaCliente = "";
     &eaSerie = "";
     &enCodigo = 0;
     &enLinea = 0;
     &enModo = 0;
     nPos = 0;
     nSal = 0;
|FIN;

|PROCESO T12; |TIPO 12;
|FPRC;

|PROGRAMA;
     |SI PARAMETRO = "menu";
          |ABRE #0;
          |CONSULTA_CLAVE #1#0;
          |CIERRA #0;
          |ACABA;
     |FINSI;

     |DDEFECTO #0;
     |ABRE #0;
     #0#0 = eaTipo;
     #0#1 = eaSerie;
     #0#2 = enCodigo;
     |LEE 101#0=;
     |SI PARAMETRO = "BAJA";
          |SI FSalida = 0;
               |BORRA 020#0a;
          |FINSI;
     |SINO;
          nSal = FSalida;
          |SI PARAMETRO = "DEFECTO";
               #0#3 = eaCliente;
               |ABRE #24;
               #24#0 = #0#3;
               |LEE 000#24=;
               |CIERRA #24;
               #0#4 = #24#26;
               |SI nSal = 0;
                    |GRABA 020#0a;
               |SINO;
                    |GRABA 020#0b;
               |FINSI;
          |SINO;
               |SI eaTipo = "P"; nPos = 838; |FINSI;
               |SI eaTipo = "A"; nPos = 845; |FINSI;
               |SI eaTipo = "AD"; nPos = 838; |FINSI;
               |SI eaTipo = "F"; nPos = 934; |FINSI;
               |C_P #0#4, 1, nPos;

               |SI #0#3 ! eaCliente; |O enModo = 1;
                    #0#3 = eaCliente;
                    |ABRE #24;
                    #24#0 = #0#3;
                    |LEE 000#24=;
                    |CIERRA #24;
                    #0#4 = #24#26;
               |FINSI;
               |SI nSal = 0;
                    |ENDATOS #2#0;
               |SINO;
                    |GRABA 020#0b;
                    |ENDATOS #1#0;
               |FINSI;
          |FINSI;
          |ABRE #25;
          #25#0 = #0#4;
          |LEE 000#25=;
          |CIERRA #25;
          #0#5 = #25#7;
          |GRABA 020#0a;
     |FINSI;
     |CIERRA #0;
|FPRO;
