     Este proceso verifica que no exista un escandallo que se llame a si
     mismo.

|FICHEROS;
     agifa042 #0;
     agifa048 #1;
     agifa049 #2;
|FIN;

|VARIABLES;
     &eaArticulo    = "";
     &aModulo       = "agifa042";
     &aEscanOri     = "";
     &aEscanFin     = "";

     aEscanNuevo    = "";
     aTmp           = "";

     nEscanLin      = 0;
     nPuntero       = 0;
|FIN;

|INCLUYE escand_i;

|PROGRAMA;
     |SI aModulo = "agifa042";
          |CLS;
          |CABEZA "Verif.Escand.";
          |PINPA #0#0;
          |PINDA #0#0;
          |ENDATOS #1#0;
          |SI FSalida = 0;
               |HAZ Empieza042;
          |FINSI;
     |SINO;
          #agifa042#0 = aEscanOri;
          #agifa042#1 = aEscanFin;
          |HAZ Empieza042;
     |FINSI;
|FPRO;

|PROCESO Empieza042;
     |ABRE #agifa048;
     |ABRE #agifa049;
     #agifa048#0 = #agifa042#0;
     |LEE 001#agifa048.];
     |PARA ; |SI FSalida = 0; |Y #agifa048#0 ] #agifa042#0;
                              |Y #agifa048#0 [ #agifa042#1;     |HACIENDO;
          aEscanOri = #agifa048#0; |QBF aEscanOri;
          nPuntero = 0;
          nError = 0;
          |SI aModulo = "agifa042";
               |PINTA 2032 , "                    ";
               |PINTA 2032 , #agifa048#0;
          |FINSI;
          |HAZ InicioEscan;
          #agifa048#0 = aEscanOri;
          |LEE 001#agifa048.=;
          |LEE 001#agifa048.s;
     |SIGUE;
     |CIERRA #agifa048;
     |CIERRA #agifa049;
|FPRC;


|PROCESO EscanLinea;
|FPRC;


|PROCESO EntrarPuntero;
     aEscanNuevo = #agifa049#2;    |QBF aEscanNuevo;
     |HAZ BuscandoEscan;
     nPuntero = nPuntero + 1;
|FPRC;


|PROCESO BuscandoEscan;
     |SI nPuntero ] 1;
          IPaEscan = PaEscan1<-;
          IPnLinea = PnLinea1<-;
     |PARA i = 1; |SI i [ nPuntero; |Y nError = 0; |HACIENDO i = i + 1;
          aTmp = PaEscan; |QBF aTmp;
          |SI aTmp = aEscanNuevo;
               |SI aModulo = "agifa042";
                    |PINTA 1247 , "                    ";
                    |PINTA 1247 , #agifa049#0;
                    |PINTA 1447 , "                    ";
                    |PINTA 1447 , #agifa049#2;
                    |AVISO;
                    |PAUSA;
               |SINO;
                    aTmp = "0000Error en Esc.:"+#agifa049#0 +" Componente:"+#agifa049#2;
                    |MENAV aTmp;
               |FINSI;
               nError = 1;
          |FINSI;
          IPaEscan = IPaEscan + 1;
          IPnLinea = IPnLinea + 1;
     |SIGUE;

     IPaEscan = PaEscan1<-;
     IPnLinea = PnLinea1<-;
     |PARA i = 1; |SI i [ nPuntero; |Y nError = 0; |HACIENDO i = i + 1;
          IPaEscan = IPaEscan + 1;
          IPnLinea = IPnLinea + 1;
     |SIGUE;
     aEscan = aEscanNuevo;
     nLinea = nEscanLin;
     |FINSI;
|FPRC;


|PROCESO SacarPuntero;
     nPuntero = nPuntero - 1;
|FPRC;

|PROCESO Llena042; |TIPO 6;
     eaArticulo = #0Campo;
     |HAZ LlenaArticulo;
     |SI FSalida = 0;
          #0Campo = eaArticulo;
          |PINTA #0Campo;
     |SINO;
          |ERROR; |ACABA;
     |FINSI;
|FPRC;
