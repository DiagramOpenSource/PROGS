|FICHEROS;
     dsm00279 #279;
     referen@;
     &caenlac@;
|FIN;

|VARIABLES;
     &eaBloqLiquiVta = "";
     &eaBloqLiquiCom = "";
     &eaDef = "";
     &Tempo = "";
     aAlfa = "";
     nLin = 0;
     nDiario = 0;
     fFecha = @;
     nDocu = 0;
     nApunte = 0;
|FIN;

|PROCESO Parametros2;
     |ABRE #279; |LEE 000#279p; |CIERRA #279;
     eaBloqLiquiVta = #279#13;
     eaBloqLiquiCom = #279#22;
|FPRC;

|PROCESO Caenlace2;
     |SALVA_DATOS #referen@;
     |REPON_DATOS #caenlac@;
     |GRABA 020#caenlac@.n;
|FPRC;

|PROCESO Caenlace1;
     |SI nDiario ! #caenlac@#0; |O fFecha ! #caenlac@#1;
               |O nDocu ! #caenlac@#2; |O nApunte = #caenlac@#3;
          nLin = 0;
     |FINSI;
     nDiario = #caenlac@#0;
     fFecha = #caenlac@#1;
     nDocu = #caenlac@#2;
     nApunte = #caenlac@#3;

     nLin = nLin + 10;
     |SALVA_DATOS #caenlac@;
     |REPON_DATOS #referen@;
     #referen@#3 = nLin;
     |GRABA 020#referen@.n;
|FPRC;

|PROCESO Renumera;
     aAlfa = eaDef + "caenlace.mas";
     |CARGA_DEF aAlfa, referen@;
     |SI FSalida = 0;
          |HAZ CreaTempo; |NOME_DAT #referen@#Tempo#; |DELINDEX #referen@;

          |ABRE #referen@;
          |ABRE #caenlac@;
          |LEE 000#caenlac@.p;
          |PARA; |SI FSalida = 0; |HACIENDO;
               |HAZ Caenlace1;
               |LEE 000#caenlac@.s;
          |SIGUE;
          |CIERRA #caenlac@;
          |CIERRA #referen@;

          |DELINDEX #caenlac@;

          |ABRE #caenlac@;
          |ABRE #referen@;
          |LEE 000#referen@.p;
          |PARA; |SI FSalida = 0; |HACIENDO;
               |HAZ Caenlace2;
               |LEE 000#referen@.s;
          |SIGUE;
          |CIERRA #referen@;
          |CIERRA #caenlac@;

          |DELINDEX #referen@; |HAZ BoraTempo;
          |DESCARGA_DEF #referen@;
     |FINSI;
|FPRC;
