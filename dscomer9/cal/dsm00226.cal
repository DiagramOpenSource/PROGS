|FICHEROS;
     dsm00226 #0;
     dsm00237 #1;
     dsw00047 #2,MANTE;
     agifa321 #321;
     agifa324 #324;
     dsz00070 #70;  || Copia Oferta

     dsm00237a@;
     dsm00237b@;
     dsm00237c@;
|FIN;

|VARIABLES;
     &Tempo = "";
     nNume = 0;
     nConta = 0;
     &nDeci_PreBase = 0;
     &nDeci_PreDiv  = 0;
     nCambioD       = 0;
     nCambioB       = 0;
     nModo          = 0;
     i              = 0;
     aAlfa          = "";
     aDef           = "";
|FIN;

|PROCESO Tipo0_226; |TIPO 0;
     |HAZ Tipo13_226;
|FPRC;

|PROCESO Tipo13_226; |TIPO 13;
     |ABRE #321; |LEE 000#321p; |CIERRA #321;

     |ABRE #324;

     #324#0 = #321#9;
     |LEE 000#324=;
     nDeci_PreBase = #324#9;
     nCambioB = #324#3;

     #324#0 = #0#4;
     |LEE 000#324=;
     nDeci_PreDiv = #324#9;
     nCambioD = #324#3;

     |CIERRA #324;
|FPRC;

|PROCESO ModiLinPrv;
     #1#7 = #0#1;
     #1#4 = #1#5 / nCambioD * nCambioB;
     |GRABA 020#1a;
|FPRC;

|PROCESO ModiPrv; |TIPO 0;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 2; |Y #0Campo ! Contenido;
          |HAZ Tipo13_226;
          |BUCLELIN 0 ModiLinPrv #0;
     |FINSI;
|FPRC;

|PROCESO Tipo2; |TIPO 2;
     #1#7 = #0#1;
|FPRC;

|PROCESO Precio226; |TIPO 0;
     #1#4 = #1#5 / nCambioD * nCambioB;
     |PINTA #1#4;
|FPRC;

|PROCESO ActProveedor;
     #1#7 = #0#1;
     |GRABA 020#1a;
     |LIBERA #1;
|FPRC;

|PROCESO Tipo3_226; |TIPO 3;
     |BUCLELIN 0 ActProveedor #0;
|FPRC;
컴컴컴컴컴컴컴
|PROCESO LlenaTmp;
     |SALVA_DATOS #dsm00237b@;
     |REPON_DATOS #dsm00237a@;
     |GRABA 020#dsm00237a@.n;
|FPRC;

|DEFBUCLE LlenaTmp;
     #dsm00237b@#3003;
     ;
     #2#0, #0#0, 0001;
     #2#0, #0#0, 9999;
     ;
     NULL, LlenaTmp;
|FIN;

|PROCESO ConsuOrden; |TIPO 11;
     |SI FSalida = 13;
          |DDEF aDef;
          aAlfa = aDef + "dsm00237";
          |CARGA_DEF aAlfa, dsm00237b@;
          |SI FSalida = 0;
               aAlfa = aDef + "dsm00237";
               |CARGA_DEF aAlfa, dsm00237a@;
               |SI FSalida = 0;
                    |HAZ CreaTempo; |NOME_DAT #dsm00237a@#Tempo#; |DELINDEX #dsm00237a@;
                    |PUSHV 0501 2380;
                    |BLANCO 1026 1655;
                    #2#0 = #1#2;
                    |PINPA #0#2;
                    |PINDA #0#2;
                    |ENDATOS #1#2;
                    |SI FSalida = 0;
                         |ABRE #dsm00237a@;
                         |BUCLE LlenaTmp;
                         |LEE 000#dsm00237a@.p;
                         |SI FSalida ! 0;
                              |MENAV "0000No se encuentra el articulo...";
                         |SINO;
                              |CONSULTA_CLAVE #1#dsm00237a@;
                              |SI FSalida = 0;
                                   #1#1 = #dsm00237a@#1;
                                   |PTEC 802;
                              |FINSI;
                         |FINSI;
                         |CIERRA #dsm00237a@;
                    |FINSI;
                    |DELINDEX #dsm00237a@; |HAZ BoraTempo;
                    |DESCARGA_DEF #dsm00237a@;
                    |POPV;
               |FINSI;
               |DESCARGA_DEF #dsm00237b@;
               |ERROR;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO Min;
     #dsm00237c@#0 = #0#0;
     #dsm00237c@#1 = 1;
|FPRC;

|PROCESO Max;
     #dsm00237c@#0 = #0#0;
     #dsm00237c@#1 = 9999;
|FPRC;

|PROCESO Tipo66; |TIPO 66;
     |DDEF aDef;
     aAlfa = aDef + "dsm00237";
     |CARGA_DEF aAlfa, dsm00237c@;
     |SI FSalida = 0;
          |ABRE #dsm00237c@;
          |CONSULTA_F_CLAVE #1#dsm00237c@, Min, Max;
          |SI FSalida = 0;
               #2#0 = #dsm00237c@#2;
          |SINO;
               |ERROR;
          |FINSI;
          |CIERRA #dsm00237c@;
          |DESCARGA_DEF #dsm00237c@;
     |FINSI;
|FPRC;

|PROCESO Tipo12; |TIPO 12;
|FPRC;

|PROCESO Tipo20_226; |TIPO 20;
     |SI FSalida = "OPCION";
          FSalida = "Consulta";
     |SINO;
          FSalida = 13;
          |HAZ ConsuOrden;
     |FINSI;
|FPRC;

|PROCESO ModSerie; |TIPO 7;
     aAlfa = #0#5;
     |C_M #0#6, 1, aAlfa;
|FPRC;

|PROCESO CopiaLin;
     #1#0 = nConta;
     |GRABA 020#1n;
|FPRC;

|PROCESO Copia_226; |TIPO 0;
     |SI FSalida = 17;
          |PUSHV 0501 2380;
          |BLANCO 922 1759;
          #70#0 = #0#0;
          |PINPA #0#70;
          |PINDA #0#70;
          |ENDATOS #1#70;
          |SI FSalida ! 0;
               |ERROR;
          |SINO;
               #0#0 = #70#0;
               |LEE 000#0=;
               |SI FSalida ! 0;
                    |MENAV "0000No existe oferta...";
                    |ERROR;
               |SINO;
                    |LEE 020#0u;
                    nConta = #0#0 + 1;
                    #0#0 = #70#0;
                    |LEE 121#0=;
                    |SI FSalida = 0;
                         nNume = #70#2;
                         nNume = nNume - 1;
                         #0#3 = nNume;
                         |GRABA 020#0a;

                         |BUCLELIN 2CopiaLin#0;
                         #0#0 = nConta;
                         #0#2 = #70#1;
                         #0#3 = #70#2;
                         |GRABA 020#0n;
                         |SI FSalida = 0;
                              |LEE 121#0=;
                         |FINSI;
                    |FINSI;
               |FINSI;
          |FINSI;
          |POPV;
     |FINSI;
|FPRC;

|PROGRAMA;
     |HAZ EsDesanch;
     |SI FSalida = 0;
          |CORRE "desan003";
     |SINO;
          |MANTE #0;
     |FINSI;
|FPRO;
