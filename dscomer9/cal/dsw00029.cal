|FICHEROS;
     dsw00029 #0;
     referen@ #1;
|FIN;

|VARIABLES;
 {100}Fichero  = "";
     aBase     = "";
     aDef      = "";
     aBorra    = "";
     aCampo    = "";
     aAlfa     = "";
     aLon      = "";
     nCampo    = 0;
     nReg      = 0;
     &eaPinta = "";
     aPath = "";
|FIN;

|PROCESO Conversion;
     nCampo = aCampo;

     aAlfa = #1nCampo;

     |QBF aAlfa;

     aAlfa = ("000000" + aAlfa) % -106;

     #1nCampo = aAlfa;

     |SI aBorra = "S";
          |BORRA 020#1a;
          |GRABA 020#1n;
     |SINO;
          |GRABA 020#1a;
     |FINSI;
|FPRC;

|PROCESO BucleFichero;
     aAlfa = "             " + aDef;
     |SI eaPinta ! "N"; |PINTA 1716, aAlfa; |FINSI;
     nReg = 0;

     |ABRE #1;
     |LEE 101#1p;
     |PARA; |SI FSalida = 0; |HACIENDO;
          |SI eaPinta = "N"; nReg = nReg + 1; |PINTA 1716, nReg; |FINSI;

          |HAZ Conversion;
          |LIBERA #1;
          |LEE 101#1s;
     |SIGUE;
     |CIERRA #1;
|FPRC;

|PROCESO Modifica;
     |DBASE aBase;
     IFichero = Fichero1<-;
     |PARA; |SI Fichero ! "FIN"; |HACIENDO;
          aDef = Fichero % 108;
          aBorra = Fichero % 1001;
          aCampo = Fichero % 1103;

          aDef = aBase + "def/" + aDef;
          |CARGA_DEF aDef, referen@;
          |SI FSalida = 0;
               |SI aPath ! ""; |PATH_DAT #referen@#aPath#; |FINSI;
               |HAZ BucleFichero;
               |DESCARGA_DEF #referen@;
          |FINSI;

          IFichero = IFichero + 1;
     |SIGUE;
|FPRC;

|PROCESO Tipo3; |TIPO 3;
     |SI #0#0 ! "SI"; |ACABA; |FINSI;

     Fichero1  = "agi00014 S  0";
     Fichero2  = "agi00028 N  4";
     Fichero3  = "agifa019 N 27";
     Fichero4  = "agifa065 N 10";
     Fichero5  = "agifa067 N 20";
     Fichero6  = "agifa077 N  3";
     Fichero7  = "agifa078 N  2";
     Fichero8  = "agifa079 N  2";
     Fichero9  = "agifa080 N 15";
     Fichero10 = "agifa081 N  4";
     Fichero11 = "agifa112 S  0";
     Fichero12 = "agifa322 S  0";
     Fichero13 = "agifa323 S  0";
     Fichero14 = "agifa561 S  1";
     Fichero15 = "agifv001 N 27";
     Fichero16 = "agitp001 S  0";
     Fichero17 = "dsm00018 N  3";
     Fichero18 = "dsm00024 N  3";
     Fichero19 = "dsm00057 N  5";
     Fichero20 = "dsm00112 S  0";
     Fichero21 = "dsm00114 N  1";
     Fichero22 = "dsm00115 N  5";
     Fichero23 = "dsm00226 N  1";
     Fichero24 = "dsm00237 N  7";
     Fichero25 = "iber0002 N  2";
     Fichero26 = "marhu204 N  4";
     Fichero27 = "FIN";

     |HAZ Modifica;

     Fichero1  = "agifa010 N  3";
     Fichero2  = "agifa020 S  0";
     Fichero3  = "agifa024 S  0";
     Fichero4  = "agifa030 S  0";
     Fichero5  = "agifa036 N  3";
     Fichero6  = "agifa039 S  0";
     Fichero7  = "agifa063 N  2";
     Fichero8  = "agifa065 N 10";
     Fichero9  = "agifa069 N 15";
     Fichero10 = "agifa070 N 15";
     Fichero11 = "agifa071 N 15";
     Fichero12 = "agifa073 N 20";
     Fichero13 = "agifa084 N  3";
     Fichero14 = "agifa104 N  4";
     Fichero15 = "agifa114 N  2";
     Fichero16 = "agifa117 N  2";
     Fichero17 = "agifa134 N  2";
     Fichero18 = "agifa146 N  3";
     Fichero19 = "agifa148 N  2";
     Fichero20 = "agifa174 N  4";
     Fichero21 = "agifa310 S  0";
     Fichero22 = "agifa328 S  0";
     Fichero23 = "agifa329 S  0";
     Fichero24 = "agifa501 N  1";
     Fichero25 = "agifa502 N  4";
     Fichero26 = "agifa505 N 36";
     Fichero27 = "agifa513 N  1";
     Fichero28 = "agifa571 S  0";
     Fichero29 = "agifa572 S  0";
     Fichero30 = "agifa573 S  0";
     Fichero31 = "agifa591 N  1";
     Fichero32 = "agifa592 N  4";
     Fichero33 = "agifv010 S  0";
     Fichero34 = "agis0002 N  2";
     Fichero35 = "agis0004 N  3";
     Fichero36 = "agi00002 N  5";
     Fichero37 = "dsm00003 S  0";
     Fichero38 = "FIN";

     |HAZ Modifica;

|FPRC;


|PROGRAMA;
     |SI PARAMETRO = "";
          |MANTE #0;
     |SINO;
          |SI eaPinta ! "";
               aPath = PARAMETRO;
          |FINSI;
          #0#0 = "SI";
          |HAZ Tipo3;
     |FINSI;
|FPRO;
