     ||El formato de la estandar: agi00223
     ||El formato para el cliente: primz005

|FICHEROS;
     primz005 #0;        || Este def.
     agifa019 #1;        || Articulos.
     prim0004 #4;
     agifa077 #77;       || Albaranes de Compra(C).
     agifa080 #2;        || Albaranes de Compra(L).
     agi01223 #3,MANTE;  || Temporal Etiquetas.
     dsm00010 #910;
     dsm00016 #916;
     dsm00005 #905;
     agifa321;
     agifa324;
     dsm00040 #40;
     dsm00278 #278;
|FIN;

|VARIABLES;
     nLin = 0;
     &eaAlfa = "";
     &eaUni = "";
     &eaArti = "";
     &eaCB = "";
     &eaCBFijo = "";
     &eaCBVari = "";
     nConta = 0;
     fFecha = @;
     nModo = 0;
     &eaArticulo = "";
     nLinV       = 0;
     &Tempo      = "";
     aTempo3     = "";
     nHay        = 0;
     alfa        = "";
     esc         = "";
     neti        = "";
     cb          = "";
     pvp         = "";
     usu         = "";
     fichero     = "";
     varalfa     = "";
     alfa1       = "";
     barras      = "";
     barras1     = "";
     informe     = "agi00223";
     i           = 0;
     sw          = 0;
     sw1         = 0;
     &l1         = "";
     &l2         = "";
     &l3         = "";
     &l4         = "";
     &l5         = "";
     &l6         = "";
     &l7         = "";
     &l8         = "";
     &l9         = "";
     &l10        = "";
     para1 = 0;

     &eAlfa  = "";
     &eAlfa1 = "";
     &eAlfa2 = "";
     &eAlfa3 = "";
     &eAlfa4 = "";

     nNume     = 0;
     aAlfa     = "";
     aDCodF1   = "";
     aDCodF2   = "";
     aDCodF3   = "";
     aDCodF4   = "";
     aHCodF1   = "";
     aHCodF2   = "";
     aHCodF3   = "";
     aHCodF4   = "";

     &nDeci_PreDiv  = 0;
     &nDeci_Base = 0;
     &nDeci_PreBase = 0;
|FIN;

|PROCESO bloqueo; |TIPO 0;
     |SI #3#3 = "S";
          |C_M #3#2,1,"S";
     |SINO;
          |C_M #3#2,1,"N";
     |FINSI;
|FPRC;

|PROCESO CheqUni; |TIPO 6;
     |ABRE #1;
     #1#0 = #0#24;
     |LEE 000#1=;
     |SI FSalida = 0; |Y #0#27 ! 1;
          nNume = #1#114;
          |SI nNume ! #0#27;
               nNume = #1#117;
               |SI nNume ! #0#27;
                    |CONFI "0000NNúmero de unidades no permitido. ¿Confirma las unidades introducidas?";
                    |SI FSalida ! 0; |ERROR; |FINSI;
               |FINSI;
          |FINSI;
     |FINSI;
     |CIERRA #1;
|FPRC;

______________________________/ BLOQUE LOS CAMPOS SEGUN LA ELECCION ART./ALB.
|CALCULO tipol; |TIPO 0;
     |C_M #0#24 , 1 , "N";
     |C_M #0#25 , 1 , "N";
     |C_M #0#26 , 1 , "N";
     |C_M #0#27 , 1 , "N";
     |C_M #0#28 , 1 , "N";
     |C_M #0#29 , 1 , "N";
     |C_M #0#23 , 1 , "S";
     |SI #0#9 = 1;
          |C_M #0#0 , 1 , "S";
          |C_M #0#1 , 1 , "S";
          |C_M #0#2 , 1 , "S";
          |C_M #0#3 , 1 , "S";
          |C_M #0#4 , 1 , "N";
          |C_M #0#5 , 1 , "N";
          |C_M #0#6 , 1 , "N";
          |C_M #0#7 , 1 , "N";
          |C_M #0#8 , 1 , "S";
          |C_M #0#15 , 1 , "S";
          |C_M #0#16 , 1 , "S";
          |C_M #0#17 , 1 , "S";
          |C_M #0#18 , 1 , "S";
     |SINO;
          |SI #0#9 ! 4;
               |C_M #0#0 , 1 , "N";
               |C_M #0#1 , 1 , "N";
               |C_M #0#2 , 1 , "N";
               |C_M #0#3 , 1 , "N";
               |C_M #0#4 , 1 , "S";
               |C_M #0#5 , 1 , "S";
               |C_M #0#6 , 1 , "S";
               |C_M #0#7 , 1 , "S";
               |C_M #0#8 , 1 , "N";
               |C_M #0#15 , 1 , "N";
               |C_M #0#16 , 1 , "N";
               |C_M #0#17 , 1 , "N";
               |C_M #0#18 , 1 , "N";
          |SINO;
               |C_M #0#0 , 1 , "N";
               |C_M #0#1 , 1 , "N";
               |C_M #0#2 , 1 , "N";
               |C_M #0#3 , 1 , "N";
               |C_M #0#4 , 1 , "N";
               |C_M #0#5 , 1 , "N";
               |C_M #0#6 , 1 , "N";
               |C_M #0#7 , 1 , "N";
               |C_M #0#8 , 1 , "S";
               |C_M #0#15 , 1 , "N";
               |C_M #0#16 , 1 , "N";
               |C_M #0#17 , 1 , "N";
               |C_M #0#18 , 1 , "N";
               |C_M #0#19 , 1 , "N";
               |C_M #0#20 , 1 , "N";
               |C_M #0#24 , 1 , "S";
               |C_M #0#25 , 1 , "S";
               |C_M #0#26 , 1 , "S";
               |C_M #0#27 , 1 , "S";
               |C_M #0#28 , 1 , "S";
               |C_M #0#29 , 1 , "S";
               |C_M #0#23 , 1 , "N";
          |FINSI;
     |FINSI;
|FCAL;

____________________/ RELLENA EL TEMPORAL CON LOS ARTICULOS DE LOS ALBARANES.
|PROCESO dsm00005;
     |DDEFECTO #1;
     #1#0 = #2#2;
     |LEE 020#1=;

     nHay = 1;
     |DDEFECTO #3;
     #3#0 = #2#2;
     #3#4 = #905#4;
     |SI #0#9 = 2;
          #3#12 = 0;
     |SINO;
          |SI #0#4 = #0#5; |Y #0#6 = #0#7;
               #3#12 = #2#1;
          |SINO;
               nLin = nLin + 1;
               #3#12 = nLin;
          |FINSI;
     |FINSI;
     |LEE 000#3=;
     |SI FSalida ! 0; |GRABA 020#3b; |FINSI;
     #3#1 = #2#4;
     #3#2 = #3#2 + #905#6;
     #3#3 = #0#11;
     #3#5 = #905#5;
     #3#11 = #agifa080#1;
     |SI #910#24 = "S";
          eAlfa = #3#0;  |SUB_EJECUTA_NP "dsz99990;V";

          |SI #910#26 = 1;
              aDCodF1 = eAlfa1;     aHCodF1 = eAlfa1;
              aDCodF2 = " " * 20;   aHCodF2 = " " * 20;
              aDCodF3 = " " * 20;   aHCodF3 = " " * 20;
              aDCodF4 = " " * 20;   aHCodF4 = " " * 20;
          |FINSI;

          |SI #910#26 = 2;
              aDCodF1 = eAlfa1;     aHCodF1 = eAlfa1;
              aDCodF2 = eAlfa2;     aHCodF2 = eAlfa2;
              aDCodF3 = " " * 20;   aHCodF3 = " " * 20;
              aDCodF4 = " " * 20;   aHCodF4 = " " * 20;
          |FINSI;

          |SI #910#26 = 3;
              aDCodF1 = eAlfa1;     aHCodF1 = eAlfa1;
              aDCodF2 = eAlfa2;     aHCodF2 = eAlfa2;
              aDCodF3 = eAlfa3;     aHCodF3 = eAlfa3;
              aDCodF4 = " " * 20;   aHCodF4 = " " * 20;
          |FINSI;

          |SI #910#26 = 4;
              aDCodF1 = eAlfa1;     aHCodF1 = eAlfa1;
              aDCodF2 = eAlfa2;     aHCodF2 = eAlfa2;
              aDCodF3 = eAlfa3;     aHCodF3 = eAlfa3;
              aDCodF4 = eAlfa4;     aHCodF4 = eAlfa4;
          |FINSI;

          |SI #910#44 = "T";
              eAlfa1  = #1#177;  |QBF eAlfa1;
              eAlfa1  = eAlfa1 + ((" " * 20) % 120);

              aDCodF1 = eAlfa1;     aHCodF1 = eAlfa1;
              aDCodF2 = " " * 20;   aHCodF2 = " " * 20;
              aDCodF3 = " " * 20;   aHCodF3 = " " * 20;
              aDCodF4 = " " * 20;   aHCodF4 = " " * 20;
          |FINSI;
          #916#0 = aDCodF1;
          #916#1 = aDCodF2;
          #916#2 = aDCodF3;
          #916#3 = #905#4;
          #916#15 = aDCodF4;
          |LEE 000#916=;
          |SI FSalida = 0;
               |SI #0#10 = 1; #3#6 = #916#5;   |FINSI;   || TARIFA 1.
               |SI #0#10 = 2; #3#6 = #916#6;   |FINSI;   || TARIFA 2.
               |SI #0#10 = 3; #3#6 = #916#7;   |FINSI;   || TARIFA 3.
               |SI #0#10 = 4; #3#6 = #916#8;   |FINSI;   || TARIFA 4.
               |SI #0#10 = 5; #3#6 = #916#9;   |FINSI;   || TARIFA 5.
               |SI #0#10 = 6; #3#6 = #916#10;  |FINSI;   || TARIFA 6.
          |FINSI;
     |FINSI;
     |GRABA 021#3a;
     |LIBERA #3;
|FPRC;

|DEFBUCLE dsm00005;
     #905#1;
     ;
     "AC", #2#27, #2#0, nLinV, "      ";
     "AC", #2#27, #2#0, nLinV, "zzzzzz";
     ;
     NULL, dsm00005;
|FIN;

|PROCESO etialb2;
     aAlfa = #2#2; |QBF aAlfa;
     |SI aAlfa = ""; |ACABA; |FINSI;

     |DDEFECTO #1;
     #1#0 = #2#2;
     |LEE 000#1=;
     |SI #0#23 = "S";
          |SI #1#6 [ 0; |ACABA; |FINSI;
     |FINSI;

     nHay = 0;
     nLinV = #2#1;
     |BUCLE  dsm00005;
     |SI nHay ! 0; |ACABA; |FINSI;

     |DDEFECTO #3;
     #3#0 = #2#2;
     #3#12 = #2#1;
     |SI #0#9 = 2;
          #3#12 = 0;
     |SINO;
          |SI #0#4 = #0#5; |Y #0#6 = #0#7;
               #3#12 = #2#1;
          |SINO;
               nLin = nLin + 1;
               #3#12 = nLin;
          |FINSI;
     |FINSI;
     |LEE 000#3=;
     |SI FSalida ! 0; |GRABA 020#3b; |FINSI;
     #3#1 = #2#4;
     #3#2 = #3#2 + #2#5;
     #3#3 = #0#11;
     #3#8 = #agifa080#27;
     #3#9 = #agifa080#0;
     #agifa077#0 = #agifa080#0;
     #agifa077#50 = #agifa080#27;
     |LEE 000#agifa077.=;
     #3#7 = #agifa077#1;
     #3#10= #agifa077#3;
     #3#11 = #agifa080#1
     |GRABA 021#3a;
     |LIBERA #3;
|FPRC;

|DEFBUCLE etialb;
     #2#1;
     ;
     #0#4, #0#6, 1;
     #0#5, #0#7, 999;
     be;
     NULL,etialb2;
|FIN;

_____________/ RELLENA EL TEMPORAL CON LOS ARTICULO DEL FICHERO DE ARTICULOS.
|PROCESO GrabaFijos;
     #3#0 = #1#0;
     #3#4 = #916#3;
     #3#12 = 0;
     |LEE 000#3=;
     |SI FSalida ! 0;
          #3#1 = #1#1;
          #3#2 = #0#8;
          #3#3 = #0#11;
          #3#5 = #916#4;
          |SI #910#24 = "S";
               |SI #0#10 = 1; #3#6 = #916#5;   |FINSI;   || TARIFA 1.
               |SI #0#10 = 2; #3#6 = #916#6;   |FINSI;   || TARIFA 2.
               |SI #0#10 = 3; #3#6 = #916#7;   |FINSI;   || TARIFA 3.
               |SI #0#10 = 4; #3#6 = #916#8;   |FINSI;   || TARIFA 4.
               |SI #0#10 = 5; #3#6 = #916#9;   |FINSI;   || TARIFA 5.
               |SI #0#10 = 6; #3#6 = #916#10;  |FINSI;   || TARIFA 6.
          |FINSI;
          |GRABA 021#3n;
     |FINSI;
     |LIBERA #3;
|FPRC;

|DEFBUCLE dsm00016;
     #916#1;
     ;
     aDCodF1, aDCodF2, aDCodF3, aDCodF4, "      ";
     aHCodF1, aHCodF2, aHCodF3, aHCodF4, "zzzzzz";
     ;
     NULL, GrabaFijos;
|FIN;

|PROCESO etiart;
     |SI #0#23 = "S";
          |SI #1#6 [ 0; |ACABA; |FINSI;
     |FINSI;
     |DDEFECTO #3;
     |SI #1#176 = "S";
          eAlfa = #1#0;  |SUB_EJECUTA_NP "dsz99990;V";

          |SI #910#26 = 1;
              aDCodF1 = eAlfa1;     aHCodF1 = eAlfa1;
              aDCodF2 = " " * 20;   aHCodF2 = " " * 20;
              aDCodF3 = " " * 20;   aHCodF3 = " " * 20;
              aDCodF4 = " " * 20;   aHCodF4 = " " * 20;
          |FINSI;

          |SI #910#26 = 2;
              aDCodF1 = eAlfa1;     aHCodF1 = eAlfa1;
              aDCodF2 = eAlfa2;     aHCodF2 = eAlfa2;
              aDCodF3 = " " * 20;   aHCodF3 = " " * 20;
              aDCodF4 = " " * 20;   aHCodF4 = " " * 20;
          |FINSI;

          |SI #910#26 = 3;
              aDCodF1 = eAlfa1;     aHCodF1 = eAlfa1;
              aDCodF2 = eAlfa2;     aHCodF2 = eAlfa2;
              aDCodF3 = eAlfa3;     aHCodF3 = eAlfa3;
              aDCodF4 = " " * 20;   aHCodF4 = " " * 20;
          |FINSI;

          |SI #910#26 = 4;
              aDCodF1 = eAlfa1;     aHCodF1 = eAlfa1;
              aDCodF2 = eAlfa2;     aHCodF2 = eAlfa2;
              aDCodF3 = eAlfa3;     aHCodF3 = eAlfa3;
              aDCodF4 = eAlfa4;     aHCodF4 = eAlfa4;
          |FINSI;

          |SI #910#44 = "T";
              eAlfa1  = #1#177;  |QBF eAlfa1;
              eAlfa1  = eAlfa1 + ((" " * 20) % 120);

              aDCodF1 = eAlfa1;     aHCodF1 = eAlfa1;
              aDCodF2 = " " * 20;   aHCodF2 = " " * 20;
              aDCodF3 = " " * 20;   aHCodF3 = " " * 20;
              aDCodF4 = " " * 20;   aHCodF4 = " " * 20;
          |FINSI;

          |BUCLE dsm00016;
     |SINO;
          #3#0 = #1#0;
          #3#4 = "";
          #3#12 = 0;
          |LEE 000#3=;
          |SI FSalida ! 0;
               #3#0 = #1#0;
               #3#1 = #1#1;
               #3#2 = #0#8;
               #3#3 = #0#11;
               |GRABA 021#3n;
          |FINSI;
          |LIBERA #3;
     |FINSI;
|FPRC;

|DEFBUCLE etiart;     ||Bucle Ordenado.
     #1#1;
     128,2,3, 27;
     #0#0, #0#2, #0#15, #0#17, #0#19;
     #0#1, #0#3, #0#16, #0#18, #0#20;
     be;
     NULL,NULL,NULL,NULL,NULL,etiart;
     #1#2,#1#1;
|FIN;
_______________________________________/ IMPRIME LAS ETIQUETAS SELECCIONADAS.
|PROCESO impr;

     #1#0 = #3#0;
     |LEE 000#1=;

     |SI #0#27 = 1;
          eaAlfa = #1#111;
     |SINO;
          eaAlfa = #1#112;
     |FINSI;

     cb = #1#128;             || CODIGO DE BARRAS.
     |QBF cb;
     ||ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ ||Conversion CB
     #40#0 = #3#0;
     #40#1 = #3#4;
     |LEE 000#40=;
     |SI FSalida = 0;
          cb = #40#2;
     |SINO;
          cb = cb + #3#4;
     |FINSI;
     ||ÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄÄ
     |QBF cb;


     |SI #0#9 = 4; cb = eaCB; |FINSI;

     pvp = #3#6; |QBF pvp;
     |SI pvp = "";
          |SI #0#10 = 1; pvp = #1#18;   |FINSI;   || TARIFA 1.
          |SI #0#10 = 2; pvp = #1#19;   |FINSI;   || TARIFA 2.
          |SI #0#10 = 3; pvp = #1#20;   |FINSI;   || TARIFA 3.
          |SI #0#10 = 4; pvp = #1#147;  |FINSI;   || TARIFA 4.
          |SI #0#10 = 5; pvp = #1#148;  |FINSI;   || TARIFA 5.
          |SI #0#10 = 6; pvp = #1#149;  |FINSI;   || TARIFA 6.
          |QBF pvp;
     |FINSI;

     |SI #3#2 [ 0; #3#2 = 1; |FINSI;    || CONTROLA QUE NUNCA SEA MENOR DE 1.
     neti = #3#2;
     |QBF neti;
     |SI #3#2 < 100;
          neti = "00" + neti;
          neti = neti % -102;
          neti = "P" + neti;
     |SINO;
          neti = "000" + neti;
          neti = neti % -103;
          neti = "p" + neti;
     |FINSI;

     || INICIALIZACION Y DESCRIPCION DEL ARTICULO............................
     |SI #0#12 = "S";
         l1 = esc + "S2" + esc + "D5" + esc + "Q176" + esc + "B" + esc + "M08";
         l1 = l1 + esc + "A10" + #3#1;
     |SINO;
         l1 = #3#1;
     |FINSI;

     || CODIGO DE BARRAS.....................................................
     |SI #0#12 = "S";

         l2 = esc + "?3" + esc + "M10" + esc + "A12" + esc + "{" + cb + "}";
     |SINO;
         l2 = cb;
     |FINSI;

     || REFERENCIA DEL PROVEEDOR(ARTICULO)...................................
     |SI #0#12 = "S";
         l3 = esc + "A10" + esc + "M08" + #1#134;
     |SINO;
         l3 = #1#134;
     |FINSI;

     || P.V.P................................................................
     |DDEFECTO #agifa321;
     |ABRE #agifa321;
     |LEE 000#agifa321.=;
     |CIERRA #agifa321;

     |DDEFECTO #agifa324;
     |ABRE #agifa324;
     #agifa324#0 = #agifa321#9;
     |LEE 000#agifa324.=;
     |CIERRA #agifa324;

     |SI #agifa324#2 ! 1;          || en no euros
          |SI #0#12 = "S";
              l4 = esc + "A10" + esc + "M15" + "PVP:" + pvp + "pts.";
          |SINO;
              l4 = "PVP:" + pvp + "pts.";
          |FINSI;
     |SINO;                        || en euros
          |SI #0#12 = "S";
              l4 = esc + "A10" + esc + "M15" + "PVP:" + pvp + "euros";
          |SINO;
              l4 = "PVP:" + pvp + "euros";
          |FINSI;
     |FINSI;

     || TEXTO IVA INCLUIDO...................................................
     |SI #0#12 = "S";
         l5 = esc + "A00" + esc + "M30IVA INCLUIDO";
     |SINO;
         l5 = "IVA INCLUIDO";
     |FINSI;

     || REPETICION DE LA ETIQUETA............................................
     |SI #0#12 = "S";
          l6 = esc + "E" + esc + neti;
     |FINSI;
     l7 = #3#7;
     l8 = #3#8;
     l9 = #3#9;

     l9 = "00000"+l9;
     l9= l9 % -106;
     l10 = #3#10;
     |PRINT;
     |PIEINF;
|FPRC;

|PROCESO ArtLote;
     nConta = #0#26;
     |PARA i = 0; |SI i < #0#8; |HACIENDO i = i + 1;
          eaCB = (#0#24%114)+(("000"+#0#27)%-103)+#0#25+(("00000"+nConta)%-105);
          eaCBFijo = (#0#24%114)+(("000"+#0#27)%-103)+#0#25;
          eaCBVari = (("00000"+nConta)%-105);
          eaArti = #0#24%114;
          eaUni = ("000"+#0#27)%-103;
          |DDEFECTO #3;
          #3#0 = #0#24;
          #3#2 = #0#8;
          #3#3 = "S";
          #3#6 = "";
          #3#7 = ~;
          |HAZ impr;
          nConta = nConta + 1;
     |SIGUE;
|FPRC;


|PROCESO Leyendo;
     |SI #0#12 = "S";
          |HAZ impr;
     |SINO;
          |PARA para1 = 1; |SI para1 [ #3#2; |HACIENDO para1 = para1 + 1;
               |HAZ impr;
          |SIGUE;
     |FINSI;
|FPRC;

|DEFBUCLE leetemp;
     #3#1;
     3;
     "                    ", "      ", 00000, "S";
     "zzzzzzzzzzzzzzzzzzzz", "zzzzzz", 99999, "S";
     ;
     NULL, Leyendo;
|FIN;
_________________________________________________________________/ PRINCIPIO.
|PROCESO mini;
     #3#0 = "                    ";
     #3#4 = "      ";
     #3#12 = 00000;
|FPRC;

|PROCESO maxi;
     #3#0 = "zzzzzzzzzzzzzzzzzzzz";
     #3#4 = "zzzzzz";
     #3#12 = 99999;
|FPRC;

|PROCESO Divisas;
     |DDEFECTO #agifa321;
     |ABRE #agifa321;
     |LEE 000#agifa321.=;
     |CIERRA #agifa321;

     |DDEFECTO #agifa324;
     |ABRE #agifa324;
     #agifa324#0 = #agifa321#9;
     |LEE 000#agifa324.=;
     |CIERRA #agifa324;

     nDeci_PreDiv = #agifa324#9;
     nDeci_Base = #agifa324#7;     ||Decimales moneda base
     nDeci_PreBase = #agifa324#9;  ||Decimales precio de moneda base
|FPRC;

|PROCESO Tipo3;
     |SI #0#9 = 4;
          |ABRE #4;
          #4#0 = #0#24;
          #4#1 = #0#25;
          #4#3 = #0#27;
          |LEE 000#4=;
          |SI FSalida ! 0; |GRABA 020#4b; |FINSI;
          #4#2 = #0#26 + #0#8;
          |GRABA 020#4a;
          |CIERRA #4;
     |FINSI;
     |SI #0#22 = "S";
          |ABRE #278;
          #278#0 = #0#21;
          |LEE 020#278=;
          |CIERRA #278;
          #0#13 = #278#2;
     |FINSI;

     informe = #0#13;
     |QBF informe;
     |INFOR informe;
     |SI FSalida ! 0;
          aAlfa = "    Cuadre inaccesible o inexistente '" + informe + "'";
          |MENAV aAlfa;
          |ACABA;
     |FINSI;
     |FININF;

     |HAZ Divisas;

     |HAZ CreaTempo;  aTempo3 = Tempo;
     |NOME_DAT #3 aTempo3; |DELINDEX #3;

     |SI #0#9 ! 4;
          |ABRE #3;
          sw = 0;
          sw1 = 0;
          |SI #0#9 = 1;
               |BUCLE etiart;
          |SINO;
               |ABRE #916;
               |ABRE #1;
               |BUCLE etialb;
               |CIERRA #1;
               |CIERRA #916;
          |FINSI;

          |PINPA #0#3;
          |SI #910#19 = "S";
               aAlfa = #910#20; aAlfa = aAlfa % 106;
               |ATRI R; |PINTA 0723, aAlfa; |ATRI 0;
               |SI #0#9 = 3;
               |SINO;
                    |ATRI R; |PINTA 730, "DESCRIPCION                                "; |ATRI r;
                    |C_V #3#12, 1, "N";
                    |C_P #3#1, 1, 830;
                    |C_A #3#1, 1, 30;
               |FINSI;
          |SINO;
               |C_V #3#4, 1, "N";
               |SI #0#9 = 3;
                    |ATRI R; |PINTA 723, "LIN   DESCRIPCION                                 "; |ATRI r;
                    |C_P #3#12, 1, 823;
                    |C_P #3#1, 1, 829;
                    |C_A #3#1, 1, 43;
               |SINO;
                    |ATRI R; |PINTA 723, "DESCRIPCION                                       "; |ATRI r;
                    |C_V #3#12, 1, "N";
                    |C_P #3#1, 1, 823;
                    |C_A #3#1, 1, 38;
               |FINSI;
          |FINSI;

          |ENTLINEAL #1#3,1,2,20,0,mini,maxi;
          |CIERRA #3;
     |FINSI;

     |CONFI "2400SImprimir Etiquetas";

     |SI FSalida = 0;
          |IMPRE 0;
          |SI FSalida = 0;
               |INFOR informe;
               |SI FSalida = 0;
                    esc = &027 + "027";
                    |ABRE #1;
                    |ABRE #40;
                    |SI #0#9 ! 4;
                         |BUCLE leetemp;
                    |SINO;
                         |HAZ ArtLote;
                    |FINSI;
                    |CIERRA #40;
                    |CIERRA #1;
                    |FININF;
               |FINSI;
               |FINIMP;
          |FINSI;
     |FINSI;
     |DELINDEX #3;  Tempo = aTempo3; |HAZ BoraTempo;
|FPRC;

______________________________/ REPITE EN HASTA EL VALOR QUE TENGAN EN DESDE.
___________________________________________________________________ARTICULOS.
|PROCESO repe; |TIPO 0;
     |SI #0#0 ! "                    "; |Y #0#1 = "zzzzzzzzzzzzzzzzzzzz";
          #0#1 = #0#0;
     |FINSI;
|FPRC;

___________________________________________________________CODIGOS DE BARRAS.
|PROCESO repe2; |TIPO 0;
     |SI #0#2 ! ""; |Y #0#2 ! "             "; |Y #0#3 = ""; |O #0#3 = "zzzzzzzzzzzzz";
          #0#3 = #0#2;
     |FINSI;
|FPRC;

___________________________________________________________SERIES DE ALBARAN.
|PROCESO repe3; |TIPO 0;
     |SI #0#4 ! ""; |Y #0#4 ! "  "; |Y #0#5 = ""; |O #0#5 = "zz";
          #0#5 = #0#4;
     |FINSI;
|FPRC;

__________________________________________________________NUMEROS DE ALBARAN.
|PROCESO repe4; |TIPO 0;
     |SI #0#6 ! ""; |Y #0#6 ! "      "; |Y #0#7 = ""; |O #0#7 = "zzzzzz";
          #0#7 = #0#6;
     |FINSI;
|FPRC;

___________________/ RELLENA DE CEROS POR LA IZQUIERDA EL NUMERO DEL ALBARAN.
|PROCESO ceros; |TIPO 0;
     alfa = "000000" + #0Campo;
     |QBF alfa;
     #0Campo = alfa % -106;
     |PINTA #0Campo;
|FPRC;


|PROCESO Calc6;  |TIPO 6;
     eaArticulo = #0Campo;
     |HAZ LlenaArticulo;
     |SI FSalida = 0;
          #0Campo = eaArticulo;
          |PINTA #0Campo;
     |SINO;
          |ERROR; |ACABA;
     |FINSI;
|FPRC;

|PROCESO PideArt;  |TIPO 7;
     |SI #910#2 [ 2;    |ACABA;  |FINSI;

     eAlfa = #0Campo;
     |SUB_EJECUTA_NP "dsz99990";                 || Por Pantalla

     |SI eAlfa = "-1";  |PTEC 807;  |ACABA;  |FINSI;
     |SI eAlfa = "-2";              |ACABA;  |FINSI;

     eaArticulo = eAlfa;      ||  700000-4215

     #0Campo = eAlfa;
     |PINTA #0Campo;
     |PTEC 802;
|FPRC;

|PROCESO MontaClave; |TIPO 0;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 1;
          aAlfa = #3#0 + #3#4 + (("000" + #3#11) % -103);
          #3#12 = aAlfa;
     |FINSI;
|FPRC;

|PROCESO Calc62;  |TIPO 6;
     eaArticulo = #3Campo;
     |HAZ LlenaArticulo;
     |SI FSalida = 0;
          #3Campo = eaArticulo;
          |PINTA #3Campo;
     |SINO;
          |ERROR; |ACABA;
     |FINSI;
|FPRC;

|PROCESO PideArt2;  |TIPO 7;
     |SI #910#2 [ 2;    |ACABA;  |FINSI;

     eAlfa = #3Campo;
     |SUB_EJECUTA_NP "dsz99990";                 || Por Pantalla

     |SI eAlfa = "-1";  |PTEC 807;  |ACABA;  |FINSI;
     |SI eAlfa = "-2";              |ACABA;  |FINSI;

     eaArticulo = eAlfa;      ||  700000-4215

     #3Campo = eAlfa;
     |PINTA #3Campo;
     |PTEC 802;
|FPRC;

|PROCESO Varios; |TIPO 0;
     |SI #0#22 = "N";
          |C_M #0#13, 1, "S";
          |C_M #0#21, 1, "N";
          #0#21 = 1; |PINTA #0#21;
     |SINO;
          |C_M #0#13, 1, "N";
          |C_M #0#21, 1, "S";
     |FINSI;
|FPRC;

|PROCESO Articulo; |TIPO 0;
     |SI #0#9 = 4;
          fFecha = ~;
          aAlfa = (fFecha % -102) + (fFecha % 102) + (fFecha % 402);
          #0#25 = aAlfa; |PINTA #0#25;
     |FINSI;
|FPRC;

|PROCESO Unidades;
     |SI #0#9 = 4;
          |ABRE #4;
          #4#0 = #0#24;
          #4#1 = #0#25;
          #4#3 = #0#27;
          |LEE 000#4=;
          |SI FSalida = 0;
               #0#26 = #4#2;
          |SINO;
               #0#26 = 1;
          |FINSI;
          |CIERRA #4;
          |PINTA #0#26;
     |FINSI;
|FPRC;

|PROGRAMA;
     |HAZ Divisas;
     |ABRE #910;
     |LEE 040#910p;
     |SI FSalida ! 0;  |DDEFECTO #910;  |FINSI;
     |CIERRA #910;

     |CLS;
     |CABEZA "Codigos Barras";
     |PINPA #0#0;
     |DDEFECTO #0;
     |ABRE #0;
     |LEE 101#0p;
     |SI FSalida ! 0;    |GRABA 020#0b; |FINSI;

     #0#25 = "";
     #0#24 = "";
     #0#26 = 0;
     #0#27 = 0;

     |PINDA #0#0;
     |ENDATOS #1#0;
     |SI FSalida = 0;
          |GRABA 020#0a;
          |HAZ Tipo3;
     |FINSI;
     |LIBERA #0;
     |CIERRA #0;
|FPRO;
