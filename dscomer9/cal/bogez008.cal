|FICHEROS;
     bogez008 #0;
     bogem003 #3;
     bogem005 #5;
     agifa010 #10;
     bogem009 #9;
     bogem011 #11;
     bogem012 #12;
     bogem015 #15;
     bogem016 #16;
     bogem020 #20;
     bogem023 #23;
     bogem027 #27;
     bogem028 #28;
     bogem029 #29;  || Cuadro Resultados
|FIN;

|VARIABLES;
     aAlfa = "";
     aInf = "";
     fHoy = @;
     nHayLinPed = 0;
     nHayLinCam = 0;
     nRefe = 0;
|FIN;

|PROCESO bogem020_1;
     #29#25 = #29#25 + #20#14;
|FPRC;

|DEFBUCLE bogem020_1;
     #20#1;
     ;
     #29#0, 001;
     #29#0, 999;
     ;
     NULL, bogem020_1;
|FIN;

|PROCESO bogem029;
     #5#0 = #29#0;
     #5#25 = #29#1;
     |LEE 000#5=;
     |SI FSalida = 0;
          #29#15 = #5#6;
          #29#16 = #5#27;
          |SI #5#27 = 0;
               #9#0 = #29#0;
               #9#25 = #29#1
               |LEE 000#9=;
               |SI FSalida = 0;
                    #29#15 = #9#6;
                    #29#16 = #9#27;
               |FINSI;
          |FINSI;          
     |SINO;
          #9#0 = #29#0;
          #9#25 = #29#1
          |LEE 000#9=;
          |SI FSalida = 0;
               #29#15 = #9#6;
               #29#16 = #9#27;
          |FINSI;
     |FINSI;
     |BUCLE bogem020_1;
     |GRABA 020#29a;
     |LIBERA #29;
|FPRC;

|DEFBUCLE bogem029;
     #29#2;
     ;
     #0#1, #0#3, #0#5;
     #0#2, #0#4, #0#6;
     be;
     NULL, bogem029;
|FIN;

|PROCESO bogem012;
     |ABRE #15;
     |ABRE #16;
	|ABRE #23;
     |SELECT #2#16;
     |DDEFECTO #16;
     #16#17 = #12#16;
     #16#3 = #12#3;
     |LEE 000#16=;
     |SI FSalida = 0;
          |DDEFECTO #15;
          #15#0 = #16#0;
          #15#24 = #16#1;
          |LEE 000#15=;
          |SI FSalida = 0;
               #29#23 = #15#0;
               #29#24 = #15#33;
               |LEE 101#29=;
               |SI FSalida ! 0; 
				|GRABA 020#29b; 
				#29#12 = 0;
			|FINSI;
               #29#12 = #29#12 + #12#6;
               #29#6 = #15#3;
			|DDEFECTO #23;
			|SELECT #2#23;
			#23#0 = #15#0;
			#23#1 = #15#34;
			|LEE 000#23=;
			|SI FSalida = 0;
     	          #29#13 = #23#6;
			|SINO;
	               #29#13 = #16#7;
			|FINSI;			
               |GRABA 020#29a;
               |LIBERA #29;
               nHayLinCam = 1;
          |FINSI;                         
     |FINSI;
	|CIERRA #23;
     |CIERRA #15;
     |CIERRA #16;
|FPRC;

|DEFBUCLE bogem012;
     #12#1;
     ;
     #11#0, #11#31, 001;
     #11#0, #11#31, 999;
     ;
     NULL, bogem012;
|FIN;

|PROCESO bogem023;
     nHayLinPed = 1;
     |SI #23#6 ! 0;
          #29#13 =  #23#6;
     |FINSI;
|FPRC;

|DEFBUCLE bogem023;
     #23#2;
     ;
     #20#0, #20#33;
     #20#0, #20#33;
     ;
     NULL, bogem023;
|FIN;

|PROCESO NoPedCompra;
     |DDEFECTO #27;
     #27#0 = #20#0;
     #27#19 = 1;
     |LEE 000#27=;
     |SI FSalida = 0;
          #29#10 = #27#1;
          #29#11 = #27#3;
          #10#52 = #27#20;
          #10#0 = #27#21;
          |LEE 000#10=;
          |SI FSalida = 0;
               #29#2 = #10#39;
          |FINSI;
          #28#0 = #27#0;
          #28#1 = #27#19;
          #28#2 = #20#33;
          |LEE 000#28=;
          |SI FSalida = 0;
               #29#12 = #28#5;
               #29#14 = #28#6;
               #29#18 = #28#8;
               #29#19 = #28#9;
          |FINSI;
          #11#0 = #20#0;
          #11#31 = #20#33;
          |LEE 000#11=;
          |SI FSalida = 0;
               #29#4 = #11#1;
               #29#26 = #11#13;
               #29#17 = #11#14;
               #29#12 = 0;
               nHayLinCam = 0;
               |BUCLE bogem012;
               |SI nHayLinCam = 0;
                    aAlfa = (("00" + #20#3)%-102)+"."+(("00" + #20#4)%-102)+"."+(("0000" + #20#29)%-104);
                    #29#4 = aAlfa;
                    #29#12 = #28#5;
                    #29#23 = #20#0;
                    #29#24 = #20#33;
                    #29#13 = #20#15;
                    |GRABA 020#29n;
               |FINSI;
		|SINO;
               aAlfa = (("00" + #20#3)%-102)+"."+(("00" + #20#4)%-102)+"."+(("0000" + #20#29)%-104);
               #29#4 = aAlfa;
               #29#12 = #28#5;
               #29#23 = #20#0;
               #29#24 = #20#33;
               #29#13 = #20#15;
               |GRABA 020#29n;
          |FINSI;
     |FINSI;
|FPRC;
|PROCESO bogem020;
     |DDEFECTO #29;
     #29#0 = #20#0;
     #29#1 = #20#33;
     #29#3 = #20#30;
     #29#5 = #20#6;
     #29#7 = #20#7;
     #29#8 = #20#8;
     #29#9 = #20#10;
     #29#22 = #20#11;
     #29#27 = #20#29;
     #29#28 = #20#31;
     |DDEFECTO #23;
     #23#0 = #20#0;
     #23#1 = #20#33;
     |SELECT #2#23;
     |LEE 000#23=;
     |SI FSalida = 0;
          aAlfa = (("00" + #20#3)%-102)+"."+(("00" + #20#4)%-102)+"."+(("0000" + #20#29)%-104);
          #29#4 = aAlfa;
          #29#23 = #23#0;
          #29#24 = #23#1;
          #29#13 = #23#6
          #27#0 = #20#0;
          #27#19 = 1; || El nº albaran es siempre el 1.
          |LEE 000#27=;
          |SI FSalida = 0;
               #29#10 = #27#1;
               #29#11 = #27#3;

               #10#52 = #27#20;
               #10#0 = #27#21;
               |LEE 000#10=;
               |SI FSalida = 0;
                    #29#2 = #10#39;
               |FINSI;

               #28#0 = #27#0;
               #28#1 = #27#19;
               #28#2 = #20#33;
               |LEE 000#28=;
               |SI FSalida = 0;
                    #29#12 = #28#5;
                    #29#14 = #28#6;
                    #29#18 = #28#8;
                    #29#19 = #28#9;
               |FINSI;
          |SINO;
               || Analiza si es muestra.
               |SI #20#11 = "S";
                    #29#12 = #23#5;
               |FINSI;
          |FINSI;
          |GRABA 020#29n;
          |LIBERA #29;
     |SINO;
          |HAZ NoPedCompra;
          |LIBERA #29;
     |FINSI;
|FPRC;

|DEFBUCLE bogem020;
     #20#2;
     ;
     #0#1, #0#3, #0#5;
     #0#2, #0#4, #0#6;
     ;
     NULL, bogem020;
|FIN;

|PROCESO B_bogem029;
     |BORRA 020#29a;
     |LIBERA #29;
|FPRC;

|DEFBUCLE B_bogem029;
     #29#2;
     ;
     #0#1, #0#3, #0#5;
     #0#2, #0#4, #0#6;
     be;
     NULL, B_bogem029;
|FIN;

|PROCESO P_bogem029;
     |PRINT;
|FPRC;

|DEFBUCLE P_bogem029;
     #29#2;
     ;
     #0#1, #0#3, #0#5;
     #0#2, #0#4, #0#6;
     be;
     NULL, P_bogem029;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |BUCLE B_bogem029;
     |ABRE #3;
     |ABRE #10;
     |ABRE #11;
     |ABRE #23;
     |ABRE #27;
     |ABRE #28;
     |ABRE #29;
     |BUCLE bogem020;
     |CIERRA #29;
     |CIERRA #28;
     |CIERRA #27;
     |CIERRA #23;
     |CIERRA #11;
     |CIERRA #10;
     |CIERRA #3;

     |ABRE #5;
     |ABRE #9;
     |BUCLE bogem029;
     |CIERRA #9;
     |CIERRA #5;

     aInf = #0#7; |QBF aInf;
     Impresora = "CrystalReport";
     |IMPRE -1;
     |SI FSalida = 0;
          |INFOR aInf;
          |SI FSalida = 0;
               |BUCLE P_bogem029;
               |PIEINF;
               |FININF;
          |SINO;
               aAlfa = "0000Error en informe:" + aInf;
               |MENAV aAlfa;
          |FINSI;
          |FINIMP;
     |SINO;
          |MENAV "0000Error en impresora";
     |FINSI;
|FPRC;

|PROGRAMA;
     |CLS;
     |ABRE #0;
     |LEE 101#0p;
     |SI FSalida ! 0; |GRABA 020#0b; |FINSI;
     |PDEFECTO #0, 1, 8;
     fHoy = ~;
     aAlfa = fHoy % 704;
     #0#1 = aAlfa; #0#2 = aAlfa;
     |PINPA #0#0;
     |PINDA #0#0;
     |ENDATOS #1#0;
     |SI FSalida = 0; |GRABA 020#0a; |FINSI;
     |CIERRA #0;
|FPRO;
