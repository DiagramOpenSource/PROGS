|FICHEROS;
     iberz011 #0;
     agifa501 #501;
     agifa502 #502;
     agifa509 #509;
|FIN;

|VARIABLES;
     aParam    = "";
     &eDFecha  = @;
     &eHFecha  = @;

     &nA      = 0;
     &nR      = 0;
     &nEfe    = 0;
     &nTar    = 0;
     &nChe    = 0;
     &nTotal  = 0;
     &nTotLin = 0;
     &aErr    = "";
     &nSw     = 0;
     nSum     = 0;
     nPta     = 0;
|FIN;

|PROCESO agifa501Fin;
     |SI nTotLin ! #501#9;
          nSum = #501#9 - nTotLin;
          |SI nSum = 1; |O nSum = -1;
               |ABRE #502;
               #502#20 = #501#36;
               #502#0 = #501#0;
               #502#1 = 0;
               |LEE 121#502];
               |SI FSalida = 0;
                    #502#7 = #502#7 + nSum;
                    |GRABA 020#502a;
                    |LIBERA #502;
               |FINSI;
               |CIERRA #502;
               #501#38 = #501#38 + nSum;
               |GRABA 020#501a;
               |LIBERA #501;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO agifa502;
     nTotLin = nTotLin + #502#7;
|FPRC;

|DEFBUCLE agifa502;
     #agifa502#1;
     ;
     #agifa501#36, #agifa501#0, 001;
     #agifa501#36, #agifa501#0, 999;
     ;
     NULL, agifa502;
|FIN;

|PROCESO agifa501;
     nTotLin = 0;
     |BUCLE agifa502;
     |HAZ agifa501Fin;
|FPRC;

|DEFBUCLE agifa501;
     #501#3;
     ;
     #0#1, "      ", " ", "     ", 000001;
     #0#2, "zzzzzz", "z", "zzzzz", 999999;
     be;
     NULL, agifa501;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |SI #0#0 = "SI";
          |BUCLE agifa501;
     |FINSI;
|FPRC;

|PROGRAMA;
     aParam = PARAMETRO;
     |SI aParam = "";
          |MANTE #0;
     |SINO;
          #0#0 = "SI";
          #0#1 = eDFecha;
          #0#2 = eHFecha;
          |HAZ Tipo3;
     |FINSI;
|FPRO;
