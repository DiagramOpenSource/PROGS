|FICHEROS;
    obras026  #0; || Seleccion.
    obras005  #1; || Cab.Presupuesto.
    obras006  #2; || Lineas Presupuesto.
    obras001  #3; || Obras.
    obras016  #9; ||Desglose Presupuesto......
    agifa019  #10; || Articulos...............
|FIN;

|VARIABLES;
     nObra = 0;
     aAlfa = "";
    ob   = 0;
    bl   = 0;
    pl   = 0;
    pi   = 0;
    impre=0;
    &ag  =0;
    &pa  =0;
    &des ="";
     li  =0;
    sw   =0;
    sw2  =0;
   &total=0;
   &tl   =0;
|FIN;


|PROCESO propre;
     #1#0 = #2#0;
     #1#1 = #2#1;
     #1#2 = #2#2;
     |LEE 000#1=;
     ||SI #1#4 ! #0#4; |ACABA; |FINSI;

     nObra = #1#0;
     aAlfa = #1#5; |QBF aAlfa;
     |SI aAlfa ! "";             ||Es una copia
           aAlfa = aAlfa % 103;
           |SI #1#0 ! #0#0; |Y aAlfa ! #0#0; |ERROR; |ACABA; |FINSI;
           |SI #0#4 = "O";
               nObra = aAlfa;
               |SI nObra = #0#0; |ACABA; |FINSI;
           |FINSI;
     |SINO;
           |SI #1#0 ! #0#0; |ERROR; |ACABA; |FINSI;
           |SI #1#4 ! #0#4; |ERROR; |ACABA; |FINSI;
     |FINSI;

     |SI #2#9 = 0;
          |ACABA;
     |FINSI;
     |SI sw = 0;
          ob = #2#0;
          bl = #2#9;
          pl = #2#10;
          pi = #2#11;
          sw = 1;
     |FINSI;
     |SI ob ! #2#0; |O bl ! #2#9; |O pl ! #2#10; |O pi ! #2#11;
         |SI sw2 ! 0;
               sw2 = 0;
               tl = 2;
               |PRINT;
               impre=1;
          |FINSI;
          total = 0;
          ob = #2#0;
          bl = #2#9;
          pl = #2#10;
          pi = #2#11;
     |FINSI;

     |SALVA_FICHA #2;
     #2#0 = nObra;
     |LEE 000#2=;

     |HAZ sacalin;

     |REPON_FICHA #2;
|FPRC;



|DEFBUCLE leepre;
   #2#2;
   ;
   000,000,000,000;
   999,999,999,999;
   ;
   NULL,propre;
|FIN;
/*
|DEFBUCLE leepre;
   #2#2;
   ;
   #0#0,000,000,000;
   #0#0,999,999,999;
   ;
   NULL,propre;
|FIN;
*/

|PROCESO  mayus;  |TIPO 0;
        #0#1 = #0#1 > " ";
        |PINTA #0#1;
|FPRC;


|PROCESO prolee_con2;
    |SI sw2 = 0;
          tl = 3;
          |PRINT;
          impre = 1;
        sw2 = 1;
    |FINSI;
      #10#0 = #9#9;
      |LEE 000#10=;
      tl = 4;
      |PRINT;
      total=total + #9#8;
|FPRC;


|DEFBUCLE lee_con2;
     #9#2;
     ;
     #2#0,#2#1,#2#2,#2#3;
     #2#0,#2#1,#2#2,#2#3;
     ;
     NULL,prolee_con2;
|FIN;

|PROCESO sacalin;
     |ABRE #10;
     |BUCLE lee_con2;
     |CIERRA #10;
|FPRC;

|PROCESO lista;  |TIPO 3;
     |IMPRE 0;
     |SI FSalida ! 0; |ACABA; |FINSI;
     |INFOR "obras026";
     |SI FSalida ! 0; |FINIMP; |ACABA; |FINSI;
     |ABRE #1;
     |BUCLE leepre;
     |CIERRA #1;
     |SI sw2 ! 0;
          tl = 2;
          |PRINT;
          impre=1;
     |FINSI;
     |SI impre ! 0;
          |PIEINF;
     |FINSI;
     |FININF;
     |FINIMP;
|FPRC;
