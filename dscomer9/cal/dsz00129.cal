|FICHEROS;
     dsz00129 #0;
     agifa065 #65;
|FIN;

|VARIABLES;
     aArti = "";
     nStock = 0;
     nOpera = 0;
|FIN;

|PROCESO Historico;
     |SI aArti ! #65#0;
          nStock = #65#6;
          aArti = #65#0;
     |SINO;
          nStock = nStock + #65#6;
     |FINSI;
     #65#7 = nStock;
     |GRABA 020#65a;
     |LIBERA #65;
|FPRC;

|PROCESO Ordena;
     nOpera = 0;
     |SI #65#2 = "SA"; nOpera = 1; |FINSI;
     |SI #65#2 = "EV"; nOpera = 2; |FINSI;
     |SI #65#2 = "ES"; nOpera = 3; |FINSI;
     |SI #65#2 = "ME"; nOpera = 4; |FINSI;
     |SI #65#2 = "AC"; nOpera = 5; |FINSI;
     |SI #65#2 = "BC"; nOpera = 6; |FINSI;
     |SI #65#2 = "FB"; nOpera = 7; |FINSI;

     |SI #65#2 = "SS"; nOpera = 8; |FINSI;
     |SI #65#2 = "MS"; nOpera = 9; |FINSI;
     |SI #65#2 = "AV"; nOpera = 10; |FINSI;
     |SI #65#2 = "BV"; nOpera = 11; |FINSI;
     |SI #65#2 = "FC"; nOpera = 12; |FINSI;
     |SI #65#2 = "TI"; nOpera = 13; |FINSI;
     |SI #65#2 = "SF"; nOpera = 14; |FINSI;
     |SI #65#2 = "S1"; nOpera = 15; |FINSI;

     |SI #65#2 = "DV"; nOpera = 16; |FINSI;

     |SI #65#2 = "DE"; nOpera = 17; |FINSI;

     |SI nOpera = 0; nOpera = 99; |FINSI;
|FPRC;

|DEFBUCLE Historico;
     #65#1;
     ;
     #0#0, "01.01.0000", "  ", 000000, 00000, "     ";
     #0#1, "31.12.9999", "zz", 999999, 99999, "zzzzz";
     be;
     NULL, Ordena, NULL, NULL, NULL, Historico;
     #65#0, #65#5, #65#1, nOpera, #65#3, #65#4;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |BUCLE Historico;
|FPRC;
