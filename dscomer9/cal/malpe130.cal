|FICHEROS;
     malpe130 #0;
|FIN;

|VARIABLES;
     nHandle = 0;
     aAlma = "";
     aLector = "";
     aFic = "";
|FIN;

|PROCESO Graba;
     |XABRE "CW", aFic, nHandle;
     |SI FSalida ] 0;
          |XGRABA nHandle, aAlma;
          |XGRABA nHandle, aLector;
          |XCIERRA nHandle;
     |FINSI;
|FPRC;

|PROCESO GrabaTxt;
     aFic = #0#1; |QBF aFic; aFic = "C:/" + aFic + ".txt";
     aAlma = #0#4;
     aLector = #0#5;
     |HAZ Graba;
     aFic = #0#2; |QBF aFic; aFic = "C:/" + aFic + ".txt";
     aAlma = #0#6;
     aLector = #0#7;
     |HAZ Graba;
     aFic = #0#3; |QBF aFic; aFic = "C:/" + aFic + ".txt";
     aAlma = #0#8;
     aLector = #0#9;
     |HAZ Graba;
|FPRC;

|PROCESO Lee;
     aAlma = "";
     aLector = "";
     |XABRE "CU", aFic, nHandle;
     |SI FSalida ] 0;
          |XLEE nHandle, 250, aAlma;
          |XLEE nHandle, 250, aLector;
          |XCIERRA nHandle;
     |FINSI;
|FPRC;

|PROCESO LeeTxt;
     aFic = #0#1; |QBF aFic; aFic = "C:/" + aFic + ".txt";
     |HAZ Lee;
     #0#4 = aAlma;
     #0#5 = aLector;
     aFic = #0#2; |QBF aFic; aFic = "C:/" + aFic + ".txt";
     |HAZ Lee;
     #0#5 = aAlma;
     #0#6 = aLector;
     aFic = #0#3; |QBF aFic; aFic = "C:/" + aFic + ".txt";
     |HAZ Lee;
     #0#7 = aAlma;
     #0#8 = aLector;
|FPRC;

|PROGRAMA;
     |CLS;
     |ABRE #0;
     |LEE 101#0=;
     |SI FSalida ! 0; |GRABA 020#0b; |FINSI;
     |HAZ LeeTxt;
     |PINPA #0#0;
     |PINDA #0#0;
     |ENDATOS #1#0;
     |SI FSalida = 0;
          |HAZ GrabaTxt;
          |GRABA 020#0a;
     |FINSI;
     |CIERRA #0;
|FPRO;
