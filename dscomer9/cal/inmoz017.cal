|FICHEROS;
     inmoz017 #0;
     inmom001 #1;
     inmom007 #7;
|FIN;

|VARIABLES;
     &enSwImp = 0;
     nSwCheq = 0;
     nPrime = 0;
     nImpre = 1;
     nInfor = 1;
     aAlfa1 = "";
     aAlfa2 = "";
|FIN;

|PROCESO Imprime;
     |SI nPrime = 0;
          nPrime = 1;
          |IMPRE 0;
          nImpre = FSalida;
          |SI FSalida ! 0; |ACABA; |FINSI;
          |INFOR "inmoz017";
          nInfor = FSalida;
          |SI FSalida ! 0; |ACABA; |FINSI;
     |FINSI;
     |SI nInfor = 0; |PRINT; |FINSI;
|FPRC;

|PROCESO inmom007;
     |SI #7#8 ! "S";
          |SI nSwCheq = 1;
               #7#8 = "N";
               #7#9 = "";
               aAlfa1 = #7#2;
               aAlfa2 = #7#3 % -120;
               |SI aAlfa1 ! aAlfa2;
                    #7#8 = "E";
                    #7#9 = "No coinciden los codigos de barras";
                    enSwImp = 1;
                    |HAZ Imprime;
               |SINO;
                    #1#0 = #7#2;
                    |LEE 000#1=;
                    |SI FSalida ! 0;
                         #7#8 = "E";
                         #7#9 = "No existe el codigo de barras";
                         enSwImp = 2;
                         |HAZ Imprime;
                    |SINO;
                         aAlfa1 = "";
                         |SI #1#9 ! #7#4;
                              aAlfa1 = "obra";
                         |FINSI;
                         |SI #1#11 ! #7#5;
                              |SI aAlfa1 ! ""; aAlfa1 = aAlfa1 + ","; |FINSI;
                              aAlfa1 = aAlfa1 + "serie";
                         |FINSI;
                         |SI #1#12 ! #7#6;
                              |SI aAlfa1 ! ""; aAlfa1 = aAlfa1 + ","; |FINSI;
                              aAlfa1 = aAlfa1 + " n§ orden";
                         |FINSI;
                         |SI aAlfa1 ! "";
                              aAlfa2 = "No coincide " + aAlfa1;
                              #7#8 = "E";
                              #7#9 = aAlfa2;
                              enSwImp = 3;
                              |HAZ Imprime;
                         |FINSI;
                    |FINSI;
               |FINSI;
          |SINO;
               #7#8 = "S";
          |FINSI;
          |GRABA 020#7a;
     |FINSI;
     |LIBERA #7;
|FPRC;

|DEFBUCLE inmom007;
     #7#2;
     ;
     #0#0;
     #0#0;
     be;
     NULL, inmom007;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     nSwCheq = 1;
     |ABRE #1;
     |BUCLE inmom007;
     |CIERRA #1;
     |SI nPrime = 0;
          nSwCheq = 0;
          |BUCLE inmom007;
     |SINO;
          |SI nInfor = 0; |PIEINF; |FININF; |FINSI;
          |SI nImpre = 0; |FINIMP; |FINSI;
     |FINSI;
|FPRC;
