|FICHEROS;
     albz0032 #0;

     albm0047 #47;       ||Art./Alm./PartidaLIN
     dsm00044 #44;       ||Reg. Existencias (L)
|FIN;

|VARIABLES;
     aMensaje = "";
     aSerie = "";
     aObs = "";
     aAntes = "";
     aObs1 = "";
     aObs2 = "";
|FIN;

|PROCESO albm0047;
     |SI #albm0047#13 = "ES";
          aSerie = #albm0047#14;
          |QBF aSerie;
          |SI aSerie = "";
               aObs = #albm0047#12;
               |QBF aObs;
               |SI aObs ! "";
                    aAntes = aObs;
                    aObs = aObs - "PASA A SER";
                    |SI aAntes ! aObs;
                         ||GRABA dsm00044
                         #dsm00044#21 = #albm0047#14;
                         #dsm00044#18 = #albm0047#15;
                         #dsm00044#8 = #albm0047#16;
                         |LEE 101#dsm00044.=;
                         |SI FSalida = 0;
                              aObs = #albm0047#12;
                              |QBF aObs;
                              aObs1 = aObs % 140;
                              aObs2 = aObs % 4140;
                              #dsm00044#9 = aObs1;
                              #dsm00044#10 = aObs2;
                              |GRABA 020#dsm00044.a;
                              |LIBERA #dsm00044;
                         |FINSI;
                    |FINSI;
               |FINSI;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE albm0047;
 #albm0047#1;
 ;
 INICIO;
 FINAL;
 ;
 NULL, albm0047;
|FIN;

|PROGRAMA;
     |CLS;
     |ABRE #dsm00044;
     |BUCLE albm0047;
     |CIERRA #dsm00044;
|FPRO;
