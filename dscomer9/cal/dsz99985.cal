|FICHEROS;
     agifa324 #324;
     agifa321 #321;
     agifa046 #46;
     agifa010;
|FIN;

|VARIABLES;
     ||컴컴컴컴컴컴컴컴컴횱scandallos
     &nDeci_EsCab = 0;
     &nDeci_EsLin = 0;
     ||컴컴컴컴컴컴컴컴컴횵VAS
     &nDeci_IVADiv  = 0;
     &nDeci_IVAImp  = 0;
     &nDeci_IVA     = 0;
     &nDeci_IVACDiv  = 0;
     &nDeci_IVACImp  = 0;
     &nDeci_IVAC     = 0;
     ||컴컴컴컴컴컴컴컴컴훆tos
     &nDeci_Vto= 0;
     ||컴컴컴컴컴컴컴컴컴횯ivision Vertical
     &nDeci_TBas = 0;
     &nDeci_TDiv = 0;
     &nDeci_PBas = 0;
     &nDeci_PDiv = 0;
     &nDeci_VTot = 0;
     ||컴컴컴컴컴컴컴컴컴
     &aDivisa  = "";
     &aMoneda  = "";
     &nFactor  = 0;
     nDivi     = 0;
     nBase     = 0;
     ||컴컴컴컴컴컴컴컴컴
     &decim_divisa = 0;     || Decimales de la divisa
     &precio_divisa = 0;    || Decimales del precio en divisa
     &decim_base = 0;       || Decimales de la moneda base
     &precio_base = 0;      || Decimales del precio en moneda base
     ||컴컴컴컴컴컴컴컴컴훍gifa134
     &nDeci_Base     = 0;   || Decimales en Totales de la moneda base
     &nDeci_PreBase  = 0;   || Decimales en el Precio en moneda base
     &nDeci_BaseMx   = 0;   || Decimales en Totales de la moneda base
     &nDeci_PreBaseMx= 0;   || Decimales en el Precio en moneda base
     &nDeci_DivF     = 0;   || Decimales en Totales de la divisa
     &nDeci_PreDivF  = 0;   || Decimales en el Precio en divisa
     &nDeci_TotVisF  = 0;   || Decimales en Totales visibles (el de la moneda de trabajo)
     &nDeci_TotNoVisF= 0;  || Decimales en Totales no visibles (el de la otra moneda)
     &nDeci_PreVisF  = 0;   || Decimales en el Precio visual. (lineas)
     &nDeci_ImpVisF  = 0;   || Decimales en el Importe visual. (lineas)
     ||컴컴컴컴컴컴컴컴컴훍gifa104
||     &nDeci_Base     = 0;   || Decimales en Totales de la moneda base
||     &nDeci_PreBase  = 0;   || Decimales en el Precio en moneda base
     &nDeci_BaseMxP  = 0;   || Decimales en Totales de la moneda base (Maxima precision)
     &nDeci_PreBasMxP= 0;   || Decimales en el Precio en moneda base (Maxima precision)
     &nDeci_DivP     = 0;   || Decimales en Totales de la divisa
     &nDeci_PreDivP  = 0;   || Decimales en el Precio en divisa
     &nDeci_TotVisP  = 0;   || Decimales en Totales visibles (el de la moneda de trabajo)
     &nDeci_TotNoVisP = 0;  || Decimales en Totales no visibles (el de la otra moneda)
     &nDeci_PreVisP  = 0;   || Decimales en el Precio visual. (lineas)
     &nDeci_ImpVisP  = 0;   || Decimales en el Importe visual. (lineas)
     ||컴컴컴컴컴컴컴컴컴훍gifa036
||     &nDeci_Base      = 0;   || Decimales en Totales de la moneda base
||     &nDeci_PreBase   = 0;   || Decimales en el Precio en moneda base
     &nDeci_BaseMxD   = 0;   || Decimales en Totales de la moneda base (Maxima precision)
     &nDeci_PreBasMxD = 0;   || Decimales en el Precio en moneda base (Maxima precision)
     &nDeci_DivD      = 0;   || Decimales en Totales de la divisa
     &nDeci_PreDivD   = 0;   || Decimales en el Precio en divisa
     &nDeci_TotVisD   = 0;   || Decimales en Totales visibles (el de la moneda de trabajo)
     &nDeci_TotNoVisD = 0;   || Decimales en Totales no visibles (el de la otra moneda)
     &nDeci_PreVisD   = 0;   || Decimales en el Precio visual. (lineas)
     &nDeci_ImpVisD   = 0;   || Decimales en el Importe visual. (lineas)
     ||컴컴컴컴컴컴컴컴컴훍gifa010
||     &nDeci_Base     = 0;   || Decimales en Totales de la moneda base
||     &nDeci_PreBase  = 0;   || Decimales en el Precio en moneda base
||     &nDeci_BaseMx   = 0;   || Decimales en Totales de la moneda base (Maxima precision)
||     &nDeci_PreBaseMx= 0;   || Decimales en el Precio en moneda base (Maxima precision)
     &nDeci_Div      = 0;   || Decimales en Totales de la divisa
     &nDeci_PreDiv   = 0;   || Decimales en el Precio en divisa
     &nDeci_TotVis   = 0;   || Decimales en Totales visibles (el de la moneda de trabajo)
     &nDeci_TotNoVis = 0;   || Decimales en Totales no visibles (el de la otra moneda)
     &nDeci_PreVis   = 0;   || Decimales en el Precio visual. (lineas)
     &nDeci_ImpVis   = 0;   || Decimales en el Importe visual. (lineas)
     ||컴컴컴컴컴컴컴컴컴훍gifa084
||     &nDeci_Base     = 0;   || Decimales en Totales de la moneda base
||     &nDeci_PreBase  = 0;   || Decimales en el Precio en moneda base
||     &nDeci_BaseMx   = 0;   || Decimales en Totales de la moneda base (Maxima precision)
||     &nDeci_PreBaseMx= 0;   || Decimales en el Precio en moneda base (Maxima precision)
||     &nDeci_Div      = 0;   || Decimales en Totales de la divisa
||     &nDeci_PreDiv   = 0;   || Decimales en el Precio en divisa
||     &nDeci_TotVis   = 0;   || Decimales en Totales visibles (el de la moneda de trabajo)
||     &nDeci_TotNoVis = 0;   || Decimales en Totales no visibles (el de la otra moneda)
||     &nDeci_PreVis   = 0;   || Decimales en el Precio visual. (lineas)
||     &nDeci_ImpVis   = 0;   || Decimales en el Importe visual. (lineas)
     ||컴컴컴컴컴컴컴컴컴훍gifa146
||     &nDeci_Base     = 0;   || Decimales en Totales de la moneda base
||     &nDeci_PreBase  = 0;   || Decimales en el Precio en moneda base
||     &nDeci_BaseMx   = 0;   || Decimales en Totales de la moneda base (Maxima precision)
||     &nDeci_PreBaseMx= 0;   || Decimales en el Precio en moneda base (Maxima precision)
||     &nDeci_Div      = 0;   || Decimales en Totales de la divisa
||     &nDeci_PreDiv   = 0;   || Decimales en el Precio en divisa
||     &nDeci_TotVis   = 0;   || Decimales en Totales visibles (el de la moneda de trabajo)
||     &nDeci_TotNoVis = 0;   || Decimales en Totales no visibles (el de la otra moneda)
||     &nDeci_PreVis   = 0;   || Decimales en el Precio visual. (lineas)
||     &nDeci_ImpVis   = 0;   || Decimales en el Importe visual. (lineas)
     ||컴컴컴컴컴컴컴컴컴훍gifa081
||     &nDeci_Base     = 0;   || Decimales en Totales de la moneda base
||     &nDeci_PreBase  = 0;   || Decimales en el Precio en moneda base
||     &nDeci_BaseMxP  = 0;   || Decimales en Totales de la moneda base (Maxima precision)
||     &nDeci_PreBasMxP = 0;   || Decimales en el Precio en moneda base (Maxima precision)
||     &nDeci_DivP      = 0;   || Decimales en Totales de la divisa
||     &nDeci_PreDivP   = 0;  || Decimales en el Precio en divisa
||     &nDeci_TotVisP   = 0;  || Decimales en Totales visibles (el de la moneda de trabajo)
||     &nDeci_TotNoVisP = 0;  || Decimales en Totales no visibles (el de la otra moneda)
||     &nDeci_PreVisP   = 0;  || Decimales en el Precio visual. (lineas)
||     &nDeci_ImpVisP   = 0;  || Decimales en el Importe visual. (lineas)
     ||컴컴컴컴컴컴컴컴컴훍gifa077
||     &nDeci_Base     = 0;   || Decimales en Totales de la moneda base
||     &nDeci_PreBase  = 0;   || Decimales en el Precio en moneda base
||     &nDeci_BaseMx   = 0;   || Decimales en Totales de la moneda base (Maxima precision)
||     &nDeci_PreBaseMx= 0;   || Decimales en el Precio en moneda base (Maxima precision)
||     &nDeci_Div      = 0;   || Decimales en Totales de la divisa
||     &nDeci_PreDiv   = 0;   || Decimales en el Precio en divisa
||     &nDeci_TotVis   = 0;   || Decimales en Totales visibles (el de la moneda de trabajo)
||     &nDeci_TotNoVis = 0;   || Decimales en Totales no visibles (el de la otra moneda)
||     &nDeci_PreVis   = 0;   || Decimales en el Precio visual. (lineas)
||     &nDeci_ImpVis   = 0;   || Decimales en el Importe visual. (lineas)
     ||컴컴컴컴컴컴컴컴컴훍gifa079
||     &nDeci_Base     = 0;   || Decimales en Totales de la moneda base
||     &nDeci_PreBase  = 0;   || Decimales en el Precio en moneda base
||     &nDeci_BaseMx   = 0;   || Decimales en Totales de la moneda base
||     &nDeci_PreBaseMx= 0;   || Decimales en el Precio en moneda base
||     &nDeci_DivF      = 0;   || Decimales en Totales de la divisa
||     &nDeci_PreDivF   = 0;   || Decimales en el Precio en divisa
||     &nDeci_TotVisF   = 0;   || Decimales en Totales visibles (el de la moneda de trabajo)
||     &nDeci_TotNoVisF = 0;   || Decimales en Totales no visibles (el de la otra moneda)
||    &nDeci_PreVisF   = 0;   || Decimales en el Precio visual. (lineas)
||     &nDeci_ImpVisF   = 0;   || Decimales en el Importe visual. (lineas)
|FIN;

|PROCESO HallaFactor;
     |ABRE #321; |LEE 000#321p; |CIERRA #321;
     |ABRE #324;

     #324#0 = #321#9;
     |LEE 000#324=;
     nBase = #324#2;

     #324#0 = aDivisa;
     |LEE 000#324=;
     nDivi = #324#2;
     |CIERRA #324;

     nDeci_Vto = #324#7;
     nFactor = nDivi / nBase;
|FPRC;

|PROCESO MonedaBase; ||Lee los parametros de la moneda base
     |ABRE #agifa321;
     |LEE 010#agifa321.p;
     |CIERRA #agifa321;

     #agifa324#0 = #agifa321#9;
     |LEE 000#agifa324.=;
     decim_base = #agifa324#7;
     precio_base = #agifa324#9;
|FPRC;

|PROCESO LeeDivisas;
     |ABRE #agifa324;
     |HAZ MonedaBase;
     #agifa324#0 = aDivisa;
     |LEE 020#agifa324.=;
     |CIERRA #agifa324;
     decim_divisa = #agifa324#7;
     precio_divisa = #agifa324#9;
|FPRC

|PROCESO Divisas134;
     |HAZ LeeDivisas;

     nDeci_DivF = decim_divisa;   || Decimales de la divisa
     nDeci_PreDivF = precio_divisa;  || Decimales en el precio de la divisa
     |SI aMoneda = "B";   ||Si trabajo con la moneda base ...
          nDeci_PreVisF   = precio_divisa;
          nDeci_ImpVisF   = decim_divisa;
          nDeci_Base      = decim_base;
          nDeci_PreBase   = precio_base;
          nDeci_BaseMx    = decim_base;
          nDeci_PreBaseMx = precio_base;
          nDeci_TotVisF   = decim_base;
          nDeci_TotNoVisF = decim_divisa;
     |SINO;     ||Si trabajo con la divisa ...
          nDeci_PreVisF   = precio_base;
          nDeci_ImpVisF   = decim_base;
          nDeci_BaseMx    = #agifa321#10; ||Max precision en los decimales de la moneda base
          nDeci_PreBaseMx = #agifa321#11;  || Max. precision en los dec. del precio de la moneda base
          nDeci_Base      = decim_base;
          nDeci_PreBase   = precio_base;
          nDeci_TotVisF   = decim_divisa;
          nDeci_TotNoVisF = decim_base;
     |FINSI;
     nDeci_Div = nDeci_DivF;
     nDeci_ImpVis = nDeci_ImpVisF;
     |HAZ Deci_IVA;
|FPRC;

|PROCESO Divisas104;
     |HAZ LeeDivisas;

     nDeci_DivP = decim_divisa;   || Decimales de la divisa
     nDeci_PreDivP = precio_divisa;  || Decimales en el precio de la divisa
     |SI aMoneda = "B";   ||Si trabajo con la moneda base ...
          nDeci_PreVisP   = precio_divisa;
          nDeci_ImpVisP   = decim_divisa;
          nDeci_Base     = decim_base;
          nDeci_PreBase  = precio_base;
          nDeci_BaseMxP  = decim_base;
          nDeci_PreBasMxP = precio_base;
          nDeci_TotVisP   = decim_base;
          nDeci_TotNoVisP = decim_divisa;
     |SINO;     ||Si trabajo con la divisa ...
          nDeci_PreVisP   = precio_base;
          nDeci_ImpVisP   = decim_base;
          nDeci_Base     = decim_base; || Max. precision en los decimales de la moneda base
          nDeci_PreBase  = precio_base;  || Max. precision en los dec. del precio de la moneda base
          nDeci_BaseMxP   = #agifa321#10;  || Max. precision en los decimales de la moneda base
          nDeci_PreBasMxP = #agifa321#11;  || Max. precision en los dec. del precio de la moneda base
          nDeci_TotVisP   = decim_divisa;
          nDeci_TotNoVisP = decim_base;
     |FINSI;
     nDeci_TBas = nDeci_Base;
     nDeci_TDiv = nDeci_DivP;
     nDeci_PBas = nDeci_PreBase;
     nDeci_PDiv = nDeci_PreDivP;
|FPRC;

|PROCESO Divisas036;
     |HAZ LeeDivisas;

     nDeci_DivD = decim_divisa;   || Decimales de la divisa
     nDeci_PreDivD = precio_divisa;  || Decimales en el precio de la divisa
     |SI aMoneda = "B";   || Si trabajo con la moneda base ...
          nDeci_PreVisD   = precio_divisa;
          nDeci_ImpVisD   = decim_divisa;
          nDeci_Base      = decim_base;
          nDeci_PreBase   = precio_base;
          nDeci_BaseMxD   = decim_base;
          nDeci_PreBasMxD = precio_base;
          nDeci_TotVisD   = decim_base;
          nDeci_TotNoVisD = decim_divisa;
     |SINO;     || Si trabajo con la divisa ...
          nDeci_PreVisD   = precio_base;
          nDeci_ImpVisD   = decim_base;
          nDeci_Base      = decim_base; || Max. precision en los decimales de la moneda base
          nDeci_PreBase   = precio_base;  || Max. precision en los dec. del precio de la moneda base
          nDeci_BaseMxD   = #agifa321#10;  || Max. precision en los decimales de la moneda base
          nDeci_PreBasMxD = #agifa321#11;  || Max. precision en los dec. del precio de la moneda base
          nDeci_TotVisD   = decim_divisa;
          nDeci_TotNoVisD = decim_base;
     |FINSI;
     nDeci_TBas = nDeci_Base;
     nDeci_TDiv = nDeci_DivD;
     nDeci_PBas = nDeci_PreBase;
     nDeci_PDiv = nDeci_PreDivD;

     nDeci_BaseMx = nDeci_BaseMxD;
     nDeci_Div = nDeci_DivD;
     nDeci_ImpVis = nDeci_ImpVisD;
     |HAZ Deci_IVA;
|FPRC;

|PROCESO Divisas010;
     |HAZ LeeDivisas;

     nDeci_Div = decim_divisa;   || Decimales de la divisa
     nDeci_PreDiv = precio_divisa;  || Decimales en el precio de la divisa
     |SI aMoneda = "B";   || Si trabajo con la moneda base ...
          nDeci_PreVis   = precio_divisa;
          nDeci_ImpVis   = decim_divisa;
          nDeci_Base     = decim_base;
          nDeci_PreBase  = precio_base;
          nDeci_BaseMx  = decim_base;
          nDeci_PreBaseMx = precio_base;
          nDeci_TotVis   = decim_base;
          nDeci_TotNoVis = decim_divisa;
     |SINO;     || Si trabajo con la divisa ...
          nDeci_PreVis   = precio_base;
          nDeci_ImpVis   = decim_base;
          nDeci_Base     = decim_base; || Max. precision en los decimales de la moneda base
          nDeci_PreBase  = precio_base;  || Max. precision en los dec. del precio de la moneda base
          nDeci_BaseMx    = #agifa321#10;  || Max. precision en los decimales de la moneda base
          nDeci_PreBaseMx = #agifa321#11;  || Max. precision en los dec. del precio de la moneda base
          nDeci_TotVis   = decim_divisa;
          nDeci_TotNoVis = decim_base;

/* viernes, 29 de julio de 2011, 14:38:51 CEST */
          ||cambio esta linea
          ||nDeci_BaseMx    = decim_divisa;  ||OJO
          ||y pongo lo mismo que en el agifa010 (Tiquet 3308/888)
          |SI #agifa010#69 = 1;
               nDeci_BaseMx    = decim_base;    || sin triangulacion
               nDeci_PreBaseMx = precio_base;
          |SINO;
               nDeci_BaseMx    = #agifa321#10;  || con triangulacion
               nDeci_PreBaseMx = #agifa321#11;
          |FINSI;
/* --- */

     |FINSI;
     nDeci_TBas = nDeci_Base;
     nDeci_TDiv = nDeci_Div;
     nDeci_PBas = nDeci_PreBase;
     nDeci_PDiv = nDeci_PreDiv;

     |HAZ Deci_IVA;
|FPRC;

|PROCESO Divisas084;
     |HAZ LeeDivisas;

     nDeci_Div = decim_divisa;   || Decimales de la divisa
     nDeci_PreDiv = precio_divisa;  || Decimales en el precio de la divisa
     |SI aMoneda = "B";   || Si trabajo con la moneda base ...
          nDeci_PreVis   = precio_divisa;
          nDeci_ImpVis   = decim_divisa;
          nDeci_Base     = decim_base;
          nDeci_PreBase  = precio_base;
          nDeci_BaseMx  = decim_base;
          nDeci_PreBaseMx = precio_base;
          nDeci_TotVis   = decim_base;
          nDeci_TotNoVis = decim_divisa;
     |SINO;     || Si trabajo con la divisa ...
          nDeci_PreVis   = precio_base;
          nDeci_ImpVis   = decim_base;
          nDeci_Base     = decim_base; || Max. precision en los decimales de la moneda base
          nDeci_PreBase  = precio_base;  || Max. precision en los dec. del precio de la moneda base
          nDeci_BaseMx    = #agifa321#10;  || Max. precision en los decimales de la moneda base
          nDeci_PreBaseMx = #agifa321#11;  || Max. precision en los dec. del precio de la moneda base
          nDeci_TotVis   = decim_divisa;
          nDeci_TotNoVis = decim_base;

          nDeci_BaseMx    = decim_divisa;  ||OJO
     |FINSI;
     nDeci_TBas = nDeci_Base;
     nDeci_TDiv = nDeci_Div;
     nDeci_PBas = nDeci_PreBase;
     nDeci_PDiv = nDeci_PreDiv;

     |HAZ Deci_IVA;
|FPRC;

|PROCESO Divisas146;
     |HAZ LeeDivisas;

     nDeci_Div = decim_divisa;   || Decimales de la divisa
     nDeci_PreDiv = precio_divisa;  || Decimales en el precio de la divisa
     |SI aMoneda = "B";   || Si trabajo con la moneda base ...
          nDeci_PreVis   = precio_divisa;
          nDeci_ImpVis   = decim_divisa;
          nDeci_Base     = decim_base;
          nDeci_PreBase  = precio_base;
          nDeci_BaseMx  = decim_base;
          nDeci_PreBaseMx = precio_base;
          nDeci_TotVis   = decim_base;
          nDeci_TotNoVis = decim_divisa;
     |SINO;     || Si trabajo con la divisa ...
          nDeci_PreVis   = precio_base;
          nDeci_ImpVis   = decim_base;
          nDeci_Base     = decim_base; || Max. precision en los decimales de la moneda base
          nDeci_PreBase  = precio_base;  || Max. precision en los dec. del precio de la moneda base
          nDeci_BaseMx    = #agifa321#10;  || Max. precision en los decimales de la moneda base
          nDeci_PreBaseMx = #agifa321#11;  || Max. precision en los dec. del precio de la moneda base
          nDeci_TotVis   = decim_divisa;
          nDeci_TotNoVis = decim_base;

          nDeci_BaseMx    = decim_divisa;  ||OJO
     |FINSI;
     nDeci_TBas = nDeci_Base;
     nDeci_TDiv = nDeci_Div;
     nDeci_PBas = nDeci_PreBase;
     nDeci_PDiv = nDeci_PreDiv;

     |HAZ Deci_IVA;
|FPRC;

|PROCESO Divisas081;
     |HAZ LeeDivisas;

     nDeci_DivP = decim_divisa;   || Decimales de la divisa
     nDeci_PreDivP = precio_divisa;  || Decimales en el precio de la divisa
     |SI aMoneda = "B";   ||Si trabajo con la moneda base ...
          nDeci_PreVisP   = precio_divisa;
          nDeci_ImpVisP   = decim_divisa;
          nDeci_Base     = decim_base;
          nDeci_PreBase  = precio_base;
          nDeci_BaseMxP  = decim_base;
          nDeci_PreBasMxP= precio_base;
          nDeci_TotVisP  = decim_base;
          nDeci_TotNoVisP = decim_divisa;
     |SINO;     ||Si trabajo con la divisa ...
          nDeci_PreVisP   = precio_base;
          nDeci_ImpVisP   = decim_base;
          nDeci_Base     = decim_base; || Max. precision en los decimales de la moneda base
          nDeci_PreBase  = precio_base;  || Max. precision en los dec. del precio de la moneda base
          nDeci_BaseMxP   = #agifa321#10;  || Max. precision en los decimales de la moneda base
          nDeci_PreBasMxP= #agifa321#11;  || Max. precision en los dec. del precio de la moneda base
          nDeci_TotVisP   = decim_divisa;
          nDeci_TotNoVisP = decim_base;
     |FINSI;
     nDeci_TBas = nDeci_Base;
     nDeci_TDiv = nDeci_DivP;
     nDeci_PBas = nDeci_PreBase;
     nDeci_PDiv = nDeci_PreDivP;
     |HAZ Deci_IVAC;
|FPRC;

|PROCESO Divisas077;
     |HAZ LeeDivisas;

     nDeci_Div = decim_divisa;   || Decimales de la divisa
     nDeci_PreDiv = precio_divisa;  || Decimales en el precio de la divisa
     |SI aMoneda = "B";   ||Si trabajo con la moneda base ...
          nDeci_PreVis   = precio_divisa;
          nDeci_ImpVis   = decim_divisa;
          nDeci_Base     = decim_base;
          nDeci_PreBase  = precio_base;
          nDeci_BaseMx  = decim_base;
          nDeci_PreBaseMx = precio_base;
          nDeci_TotVis   = decim_base;
          nDeci_TotNoVis = decim_divisa;
     |SINO;     ||Si trabajo con la divisa ...
          nDeci_PreVis   = precio_base;
          nDeci_ImpVis   = decim_base;
          nDeci_Base     = decim_base;
          nDeci_PreBase  = precio_base;
          nDeci_BaseMx    = #agifa321#10;  || Max. precision en los decimales de la moneda base
          nDeci_PreBaseMx = #agifa321#11;  || Max. precision en los dec. del precio de la moneda base
          nDeci_TotVis     = decim_divisa;
          nDeci_TotNoVis   = decim_base;
     |FINSI;
     nDeci_TBas = nDeci_Base;
     nDeci_TDiv = nDeci_DivP;
     nDeci_PBas = nDeci_PreBase;
     nDeci_PDiv = nDeci_PreDivP;
     |HAZ Deci_IVAC;
|FPRC;

|PROCESO Divisas079;
     |HAZ LeeDivisas;

     nDeci_DivF = decim_divisa;   || Decimales de la divisa
     nDeci_PreDivF = precio_divisa;  || Decimales en el precio de la divisa
     |SI aMoneda = "B";   ||Si trabajo con la moneda base ...
          nDeci_PreVisF   = precio_divisa;
          nDeci_ImpVisF   = decim_divisa;
          nDeci_Base     = decim_base;
          nDeci_PreBase  = precio_base;
          nDeci_BaseMx   = decim_base;
          nDeci_PreBaseMx= precio_base;
          nDeci_TotVisF   = decim_base;
          nDeci_TotNoVisF = decim_divisa;
     |SINO;     ||Si trabajo con la divisa ...
          nDeci_PreVisF   = precio_base;
          nDeci_ImpVisF   = decim_base;
          nDeci_BaseMx   = #agifa321#10; ||Max precision en los decimales de la moneda base
          nDeci_PreBaseMx= #agifa321#11;  || Max. precision en los dec. del precio de la moneda base
          nDeci_Base     = decim_base;
          nDeci_PreBase  = precio_base;
          nDeci_TotVisF   = decim_divisa;
          nDeci_TotNoVisF = decim_base;
     |FINSI;
     nDeci_Div = nDeci_DivF;
     nDeci_ImpVis = nDeci_ImpVisF;
     |HAZ Deci_IVAC;
|FPRC;

|PROCESO Deci_IVA;
     |ABRE #agifa321; |LEE 000#agifa321.p; |CIERRA #agifa321;

     nDeci_IVA = #agifa321#12 + nDeci_BaseMx;
     nDeci_IVADiv = #agifa321#12 + nDeci_Div;
     nDeci_IVAImp = #agifa321#12 + nDeci_ImpVis;
|FPRC;

|PROCESO Deci_IVAC;
     |ABRE #agifa321; |LEE 000#agifa321.p; |CIERRA #agifa321;

     nDeci_IVAC = #agifa321#13 + nDeci_BaseMx;
     nDeci_IVACDiv = #agifa321#13 + nDeci_Div;
     nDeci_IVACImp = #agifa321#13 + nDeci_ImpVis;
|FPRC;

|PROCESO DecimalesBase;
     |ABRE #agifa321;
     |ABRE #agifa324;
     |LEE 000#agifa321.p;
     |SI FSalida ! 0; |GRABA 020#agifa321.n; |FINSI;
     #agifa324#0 = #agifa321#9;
     |LEE 000#agifa324.=;
     |CIERRA #agifa324;
     |CIERRA #agifa321;
     nDeci_PreDiv = #agifa324#9;
     nDeci_Base = #agifa324#7;
     nDeci_PreBase = #agifa324#9;
     nDeci_TBas = nDeci_Base;      || Division Vertical
     nDeci_PBas = nDeci_PreBase;
     nDeci_PreBaseMx = #agifa321#11
     nDeci_Div = nDeci_Base;       || Recibos Cartera

     |ABRE #46; |LEE 040#46p;|CIERRA #46;
     nDeci_EsCab = #46#15;
     nDeci_EsLin = #46#16;
|FPRC;
