|FICHEROS;
     guerz052 #0;
     guerz053 #53,MANTE; ||tmp
     dsm00054 #54;
     dsm00055 #55;
     agifa065 #65;
|FIN;

|VARIABLES;
     &eaDarti    = "";
     &eaHarti    = "";
     i = 0;
     aAlfa = "";
|FIN;

|PROCESO Tmp;
     |SI #53#29 ! "*";
          |ACABA;
     |FINSI;
     |MENSA "000Borrando Registro...";
     #55#28 = #53#28;
     #55#27 = #53#27;
     #55#11 = #53#11;
     |LEE 121#55=;
     |SI FSalida = 0;
          |BORRA 020#55a;
          |SALVA_DATOS #55;
          #55#28 = #53#28;
          #55#27 = #53#27;
          #55#11 = 1;
          |LEE 101#55];
          |SI FSalida = 0; |Y #55#28 = #53#28; |Y #55#27 = #53#27;
               || hay lineas
          |SINO;
               || no hay, borra la cabecera
               #54#2 = #55#28;
               #54#0 = #55#27;
               |BORRA 020#54c;
          |FINSI;
          |REPON_DATOS #55;
          #65#0 = #55#0;
          #65#1 = #55#8;
          #65#2 = "ME";
          #65#3 = #55#27;
          #65#4 = #55#11;
          #65#11 = #55#28;
          |BORRA 020#65c;
          #65#2 = "MS";
          |BORRA 020#65c;

          |MENSA "0000Recalculando articulo...";
          eaDarti = #55#0;
          eaHarti = #55#0;
          |SUB_EJECUTA_NP "agifa068;RECALCULA";
     |FINSI;
|FPRC;

|DEFBUCLE Tmp;
     #53#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Tmp;
|FIN;

|PROCESO Tecla; |TIPO 0;
     |SI FSalida = 0;
          |SI #53#29 = "*";
               #53#29 = "";
          |SINO;
               #53#29 = "*";
          |FINSI;
          |GRABA 020#53a;
          |PINTA #53#29;
     |FINSI;
|FPRC;

|PROCESO dsm00055;
     |SI #55#8 > #0#0; |Y #55#1 ] #0#1; |Y #55#1 [ #0#2;
          |PARA i = 0; |SI i [ 28; |HACIENDO i = i + 1;
               #53i = #55i;
          |SIGUE;
          #53#29 = "*";
          |GRABA 020#53n;
     |FINSI;
|FPRC;

|DEFBUCLE dsm00055;
     #55#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, dsm00055;
|FIN;

|PROCESO Min;
     #53#28 = "     ";
     #53#27 = 000001;
     #53#8 = "01.01.0000";
     #53#0 = " " *20;
|FPRC;

|PROCESO Max;
     #53#28 = "zzzzz";
     #53#27 = 999999;
     #53#8 = "99.99.9999";
     #53#0 = "z" *20;
|FPRC;

|PROCESO Tipo3; |TIPO 3;
     aAlfa = Usuario;
     |NOME_DAT #53 aAlfa;
     |DELINDEX #53;

     |ABRE #53;
     |BUCLE dsm00055;
     |CIERRA #53;

     |SI i = 0;
          |MENAV "0000Seleccion vacia...";
     |SINO;
          |PINPA #0#53;
          |ENTLINEAL #2#53, 1, 4, 20, 0, Min, Max;
          |CONFI "0000NBorrar movimientos seleccionados";
          |SI FSalida = 0;
               |ABRE #54;
               |ABRE #55;
               |ABRE #65;
               |BUCLE Tmp;
               |CIERRA #65;
               |CIERRA #55;
               |CIERRA #54;
          |FINSI;
     |FINSI;

     |DELINDEX #53;
|FPRC;
