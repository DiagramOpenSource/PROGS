|FICHEROS;
     ortsz002 #0;
     agifa019 #19;
     agifa104 #104;
     agifa073 #73;
     ortsm003 #3;
     ortsm004 #4;
     ortsm005 #5;
|FIN;

|VARIABLES;
     nNume     = 0;
     aAlfa     = "";
     nUni      = 0;
     nUni1     = 0;
     nUni2     = 0;
|FIN;

|PROCESO ortsm004;
     nUni1 = (#4#5 / #4#8);
     nUni2 = nUni1 ! 0;       ||Redondeo abajo
     |SI nUni2 > nUni1; nUni1 = nUni2 - 1; |FINSI;

     |SI nUni1 < nUni;        ||Me quedo con el menor
          nUni  = nUni1;
     |FINSI;
|FPRC;

|DEFBUCLE ortsm004;
     #4#1;
     ;
     #3#0, #3#1, #3#2, "                    ";
     #3#0, #3#1, #3#2, "zzzzzzzzzzzzzzzzzzzz";
     ;
     NULL, ortsm004;
|FIN;

|PROCESO Tipo12; |TIPO 12;
     |SI FSalida ! 0;
          |SI FSalida = 1; |PTEC 807; |FINSI;
          |ACABA;
     |FINSI;

     || CB = Escandallo + Componente + Serie + Pedido

     nNume = #5#1 + 100;
     aAlfa = #0#0 % nNume; #0#8 = aAlfa;

     nNume = #5#2 + 100 + (#5#1 * 100);
     aAlfa = #0#0 % nNume; #0#9 = aAlfa;

     nNume = 2 + 100 + (#5#1*100+#5#2*100);
     aAlfa = #0#0 % nNume; #0#1 = aAlfa;

     nNume = 6 + 100 + (#5#1*100+#5#2*100+2*100);
     aAlfa = #0#0 % nNume; #0#2 = aAlfa;

     |ABRE #19; |SELECT #4#19;
     #19#128 = #0#8;
     |LEE 000#19=;
     |SI FSalida = 0;
          #0#4 = #19#0;
     |FINSI;
     #19#128 = #0#9;
     |LEE 000#19=;
     |SI FSalida = 0;
          #0#6 = #19#0;
     |FINSI;
     |CIERRA #19;

     #104#25 = #0#1;
     #104#0 = #0#2;
     |LEE 000#104=;
     |SI FSalida ! 0;
          |MENAV "0000Pedido Inexistente...";
     |SINO;
          #3#0 = #0#1;
          #3#1 = #0#2;
          #3#2 = #0#4;
          |LEE 101#3=;
          |SI FSalida = 0;
               |SI #0#4 = #0#6;  || No tiene desglose
                    #3#4 = #3#4 + 1;
                    #3#7 = #3#4;
               |SINO;
                    |ABRE #4;
                    #4#0 = #0#1;
                    #4#1 = #0#2;
                    #4#2 = #0#4;
                    #4#3 = #0#6;
                    |LEE 101#4=;
                    |SI FSalida = 0;
                         #4#5 = #4#5 + 1;
                         |GRABA 020#4a;
                         |LIBERA #4;
                    |SINO;
                         |MENAV "0000No existe Mantenimiento de carga (desglose)...";
                    |FINSI;
                    |CIERRA #4;
                    nUni = 999999;
                    |BUCLE ortsm004;
                    |SI nUni ! 999999; #3#4 = nUni; |FINSI;
               |FINSI;
               #3#11 = #3#4;
               |GRABA 020#3a;
               |LIBERA #3;
          |SINO;
               |MENAV "0000No existe Mantenimiento de carga...";
          |FINSI;
     |FINSI;
     |PINDA #0#0;
|FPRC;

|PROGRAMA;
     |ABRE #5; |LEE 000#5p; |CIERRA #5;

     |CLS;
     |PINPA #0#0;
     |PINDA #0#0;
     |ABRE #104;
     |ABRE #3;
     |PARA FSalida = 0; |SI FSalida = 0; |HACIENDO;
          #0#0 = "";
          |ENDATOS #1#0;
     |SIGUE;
     |CIERRA #3;
     |CIERRA #104;
|FPRO;
