|FICHEROS;
     berz0007 #0;
     berw0001 #1;
     berw0002 #2;
     dsm00052 #52;
     agifa071 #71;
     agifa074 #74;
     agifa142 #142;
|FIN;

|VARIABLES;
     &Tempo = "";
 {-1}aGet = 0;
     aGet1 = 0;
     aGet2 = 0;
     nPanta = 0;
     nGrid = 0;
     nGridAlb = 0;
     nGridFab = 0;
     nBtnActualiza = 0;
     nBtnPed = 0;
     nBtnAlb = 0;
     nBtnFac = 0;
     nBtnCom = 0;
     nBtnSal1 = 0;
     nBtnSal2 = 0;
     aAlfa = "";
     nRango = 0;
     aTmp1 = "";
     aTmp2 = "";
     i = 0;
     nPos = 0;
|FIN;

|PROCESO BtnPed;
     aAlfa = "*berz0008;P"+#1#29+(("000000"+#1#0)%-106)+(("000"+#1#1)%-103);
     |SUB_EJECUTA_NP aAlfa;
|FPRC;

|PROCESO BtnAlb;
     aAlfa = "*berz0008;A"+#1#29+(("000000"+#1#0)%-106)+(("000"+#1#1)%-103);
     |SUB_EJECUTA_NP aAlfa;
|FPRC;

|PROCESO BtnFac;
     aAlfa = "*berz0009;F"+#1#29+(("000000"+#1#0)%-106)+(("000"+#1#1)%-103);
     |SUB_EJECUTA_NP aAlfa;
|FPRC;

|PROCESO Min;
     #52#6 = #2#9;
     #52#0 = #2#0;
     #52#1 = #2#1;
     #52#2 = 000;
|FPRC;

|PROCESO Max;
     #52#6 = #2#9;
     #52#0 = #2#0;
     #52#1 = #2#1;
     #52#2 = 999;
|FPRC;

|PROCESO BtnCom;
     |VENTANA 1201, 3398, -1, 17, "Componentes";
     |HAZ PushVenModal;

     |ABRE #52;
     nRango = 4 + 8 + 16 + 32;
     |LINEAL_SIMPLE #1#52, nRango, 1302, 3097, Min, Max, NULL;
     nGrid = FSalida;
     |PAUSA;
     |CIERRA #52;
     |DESTRUYECONTROL nGrid;

     |HAZ PopVenModal;
|FPRC;

|PROCESO BtnSal;
     |PTEC 807;
|FPRC;

|PROCESO PinPanta;
     |PINPA #1#0; nPanta = FSalida;
     nRango = 4 + 8 + 16 + 32;
     |LINEAL_SIMPLE #1#1, nRango, 0602, 3098, NULL, NULL, NULL;
     nGridAlb = FSalida;
     |CONTROL_SIMPLE nPanta, "BOTON,{{155}} Pedido", 3202, 3216, BtnPed;
     nBtnPed = FSalida;
     |CONTROL_SIMPLE nPanta, "BOTON,{{155}} Albaran", 3218, 3232, BtnAlb;
     nBtnAlb = FSalida;
     |CONTROL_SIMPLE nPanta, "BOTON,{{155}} Factura", 3234, 3248, BtnFac;
     nBtnFac = FSalida;
     |CONTROL_SIMPLE nPanta, "BOTON,{{001}} Salir", 3286, 3298, BtnSal;
     nBtnSal1 = FSalida;
     |ESTADO_CONTROL nBtnPed, "DISABLE";
     |ESTADO_CONTROL nBtnAlb, "DISABLE";
     |ESTADO_CONTROL nBtnFac, "DISABLE";

     |PINPA #2#0; nPanta = FSalida;
     nRango = 4 + 8 + 16 + 32;
     |LINEAL_SIMPLE #1#2, nRango, 0602, 3098, NULL, NULL, NULL;
     nGridFab = FSalida;
     |CONTROL_SIMPLE nPanta, "BOTON,{{155}} Composici¢n", 3202, 3216, BtnCom;
     nBtnCom = FSalida;
     |CONTROL_SIMPLE nPanta, "BOTON,{{001}} Salir", 3286, 3298, BtnSal;
     nBtnSal2 = FSalida;
     |ESTADO_CONTROL nBtnCom, "DISABLE";
|FPRC;

|PROCESO LlenaFab;
     |SI #74#10 = #0#0;
          |PARA i = 0; |SI i [ 12; |HACIENDO i = i + 1;
               #2i = #74i;
          |SIGUE;
          |GRABA 020#2n;
     |FINSI;
|FPRC;

|DEFBUCLE LlenaFab;
     #74#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, LlenaFab;
|FIN;

|PROCESO LlenaAlb;
     |SI #71#49 = #0#0;
          |PARA i = 0; |SI i [ 66; |HACIENDO i = i + 1;
               #1i = #71i;
          |SIGUE;
          |GRABA 020#1n;
     |FINSI;
|FPRC;

|DEFBUCLE LlenaAlb;
     #71#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, LlenaAlb;
|FIN;

|PROCESO Relleno; |TIPO 0;
     |SI #142#122 = "S";
          aAlfa = #0#0; |QBF aAlfa;
          aAlfa = (#142#121 * #142#120) + aAlfa;
          nPos = -(100 + #142#120);
          aAlfa = aAlfa % nPos;
          #0#0 = aAlfa; |PINTA #0#0;
     |FINSI;
|FPRC;

|PROCESO BtnActualiza;
     |REFERENCIA_DEF aGet1, #0;
     aGet2  = 0;    || numero de campo
     IaGet = aGet1<-;
     |ESPECIFICA "GETDATACONTROL", aGet;
     #0#0 = FSalida;
     |HAZ Relleno;

     |CIERRAT #1;
     |CIERRAT #2;
     |DELINDEX #1;
     |DELINDEX #2;
     |ABRET #1;
     |ABRET #2;
     |BUCLE LlenaAlb;
     |BUCLE LlenaFab;
     |REFRESCACONTROL nGridAlb;
     |REFRESCACONTROL nGridFab;
     |ESTADO_CONTROL nBtnPed, "ENABLE";
     |ESTADO_CONTROL nBtnAlb, "ENABLE";
     |ESTADO_CONTROL nBtnFac, "ENABLE";
     |ESTADO_CONTROL nBtnCom, "ENABLE";
|FPRC;

|PROCESO T12; |TIPO 12;
|FPRC;

|PROGRAMA;
     |ABRE #142; |LEE 000#142p; |CIERRA #142;

     |CLS;
     |PINPA #0#0;  nPanta = FSalida;
     |PINDA #0#0;

     |CONTROL_SIMPLE nPanta, "BOTON,Actualizar", 0702, 0711, BtnActualiza;
     nBtnActualiza = FSalida;

     |HAZ CreaTempo; |NOME_DAT #1 Tempo; |DELINDEX #1; aTmp1 = Tempo;
     |HAZ CreaTempo; |NOME_DAT #2 Tempo; |DELINDEX #2; aTmp2 = Tempo;

     |ABRET #1;
     |ABRET #2;
     |PINDA #0#0;
     |HAZ PinPanta;
     |PARA; |SI; |HACIENDO;
          |ENDATOS #1#0;
          |SI FSalida ! 0; |SAL; |FINSI;
     |SIGUE;

     |CIERRAT #1;
     |CIERRAT #2;
     Tempo = aTmp1; |HAZ BoraTempo; |DELINDEX #1;
     Tempo = aTmp2; |HAZ BoraTempo; |DELINDEX #2;

     |DESTRUYECONTROL nGridAlb;
     |DESTRUYECONTROL nGridFab;
     |FIN_CONTROL_WINDOWS nBtnActualiza;
     |FIN_CONTROL_WINDOWS nBtnPed;
     |FIN_CONTROL_WINDOWS nBtnAlb;
     |FIN_CONTROL_WINDOWS nBtnFac;
     |FIN_CONTROL_WINDOWS nBtnCom;
     |FIN_CONTROL_WINDOWS nBtnSal1;
     |FIN_CONTROL_WINDOWS nBtnSal2;
     |PULSATECLA;
|FPRO;
