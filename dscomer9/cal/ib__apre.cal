|FICHEROS;
     ib__apre #0; ||Este Def.
     ib__arti #219;
     ib__fami #260;
     referen@ #100;
     iber081@ #81;
|FIN;

|VARIABLES;
     aAlfa     = "";
     aDef      = "";
     nError    = 0;
     aOrden    = "";
|FIN;

|INCLUYE i_puntov;

|PROCESO NoRepe; |TIPO 0;
     |DDEF aDef;
     aDef = aDef + aMod;
     |CARGA_DEF aDef, referen@;
     |SI FSalida = 0;
          |NOME_DAT #100 aFich;
          |ABRE #100;
          nError = 0;
          |SI Campo = 1;
               |SELECT #2#100;
               #100#1 = #0#1;
               |LEE 000#100];
               |PARA; |SI FSalida = 0; |Y #100#1 = #0#1; |HACIENDO;
                    |SI #100#0 ! #0#0;
                         aAlfa = "0000Orden existente en linea: [" + #100#0 + "]";
                         nError = 1; |SAL;
                    |FINSI;
                    |LEE 000#100s;
               |SIGUE;
          |SINO;
               |SELECT #3#100;
               #100#2 = #0#2;
               |LEE 000#100];
               |PARA; |SI FSalida = 0; |Y #100#2 = #0#2; |HACIENDO;
                    |SI #100#0 ! #0#0;
                         aAlfa = "0000Orden existente en linea: [" + #100#0 + "]";
                         nError = 1; |SAL;
                    |FINSI;
                    |LEE 000#100s;
               |SIGUE;
          |FINSI;
          |CIERRA #100;
          |SI nError ! 0;
               |MENAV aAlfa;
               |ERROR;
          |FINSI;
          |DESCARGA_DEF #referen@;
     |SINO;
          aAlfa = "0000ERROR al cargar " + aDef;
          |MENAV aAlfa;
     |FINSI;
|FPRC;

|PROCESO Min;
     #0#0 = 1;
|FPRC;

|PROCESO Max;
     #0#0 = 999;
|FPRC;
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|PROCESO ib__apre;
     #81#0 = #0#1;
     |LEE 000#81=;
     |SI FSalida ! 0; |DDEFECTO #81; |FINSI;

     aOrden = ("   " + #0#1) % -103;

     |DDEFECTO #260;
     #260#0 = aOrden;
     #260#1 = #81#1;
     |GRABA 000#260n;

     |DDEFECTO #219;
     #219#0 = aOrden;
     #219#1 = #0#2#;
     #219#2 = #0#3;
     #219#3 = "N";
     #219#5 = #0#5;
     |GRABA 000#219n;
|FPRC;

|DEFBUCLE ib__apre;
     #0#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, ib__apre;
|FIN;
컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|PROGRAMA;
     |CLS;
     |HAZ CargaFich;
     |ENTLINEAL #1#0, -1, 2, 22, 1, Min, Max;

     aNom = "arti";
     aPun = ("00" + aPun) % -102;
     aFich = "ib" + aPun + aNom;
     |NOME_DAT #219 aFich;

     aNom = "fami";
     aPun = ("00" + aPun) % -102;
     aFich = "ib" + aPun + aNom;
     |NOME_DAT #260 aFich;

     |DDEF aDef;
     aDef = aDef + "iber0081.mas";
     |CARGA_DEF aDef, iber081@;
     |SI FSalida = 0;
          |ABRE #219;
          |ABRE #260;
          |ABRE #81;
          |BUCLE ib__apre;
          |CIERRA #81;
          |CIERRA #219;
          |CIERRA #260;
          |DESCARGA_DEF #iber081@;
     |SINO;
          aAlfa = "0000ERROR al cargar " + aDef;
          |MENAV aAlfa;
     |FINSI;
|FPRO;
