|FICHEROS;
     tecam032 #0;
     tecam033 #1;
     tecam034 #34;
     agif0041 #41;
     agifa112 #112;
     agifa007 #7;
|FIN;

|VARIABLES;
     &eaSer = "";
     &enNume = 0;

     nSer = 0;
     aSer = "";
     nConta = 0;
     aDirEmp = "";
     aDatos = "";
     nCodEmp = 0;
     nModo = 0;
     nForma = 0;
|FIN;

|PROCESO DatosEmp; |TIPO 7;
     nModo = (FEntrada / 100) ! 0;

     |SI nModo ! 1; |ACABA;   |FINSI;

     |DFICE aDirEmp;
     |DFICB aDatos;
     aDirEmp = aDirEmp % -205;
     nCodEmp = aDirEmp;
     |PATH_DAT #41 aDatos;
     |ABRE #41;
     #41#0 = nCodEmp;
     |LEE 000#41=;
     |SI FSalida = 0;
          #0#6 = #41#1;        || nombre de la empresa

         || #0#7 = #41#2;        || direccion de la empresa
         || #0#8 = #41#3;        || poblacion de la empresa
         || #0#9 = #41#4;        || provincia de la empresa
          |ABRE #112;
          #112#0 = #0#3;
          |LEE 000#112=;
          |CIERRA #112;
          #0#7 = #112#3;
          #0#8 = #112#4;
          #0#9 = #112#5;

          |PINTA #0#6;
          |PINTA #0#7;
          |PINTA #0#8;
          |PINTA #0#9;
     |FINSI;
     |CIERRA #41;
|FPRC;

|PROCESO Servidas;
     nSer = nSer + #1#7;
|FPRC;

|PROCESO Tipo2Cab; |TIPO 2;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 3;
          nSer = 0;
          |BUCLELIN 2 Servidas #0;
          |SI nSer ! 0;
               |MENAV "0000Imposible borrar, tiene unidades adjudicadas";
               |ERROR;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO Tipo2Lin; |TIPO 2;
     nForma = 0 +. 1;
     nModo = (FEntrada / 100) ! 0;

     |SI #1#7 ! 0; |Y nModo = 3;
          |SI nForma = -1;
               |MENAV "0000Linea adjudicada...";
          |FINSI;
          |ERROR; |ACABA;
     |FINSI;

     |DDEFECTO #34;
     |ABRE #34;
     #34#0 = #1#3;
     #34#1 = #1#5;
     |LEE 101#34=;
     |SI FSalida ! 0; |GRABA 020#34b; |FINSI;
     #34#2 = #34#2 +. #1#6;  ||Pedidas
     #34#4 = #34#4 +. #1#6;  ||Pte Recibir
     |GRABA 020#34a;
     |CIERRA #34;
     #1#8 = #1#6 - #1#7; |PINTA #1#8;
|FPRC;

|PROCESO Conta; |TIPO 7;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 1;
          aSer = #0#0;
          #0#1 = 999999;
          |LEE 000#0];
          |SI FSalida = 0;
               |LEE 000#0a;
          |SINO;
               |LEE 000#0u;
          |FINSI;
          |SI FSalida = 0; |Y #0#0 = aSer;
               nConta = #0#1 + 1;
          |SINO;
               nConta = 1;
          |FINSI;
          |DDEFECTO #0;
          #0#0 = aSer;
          #0#1 = nConta;
     |FINSI;
|FPRC;

|PROCESO Tipo4; |TIPO 4;
     |CIERRAT #0;
     eaSer = #0#0;
     enNume = #0#1;
     |SUB_EJECUTA_NP "tecaz032";
     |ABRET #0;
     |LEE 000#0=;
|FPRC;

|PROCESO Tipo3; |TIPO 3;
     |CONFI "0000SImprimir Documento";
     |SI FSalida = 0;
          |GRABA 020#0a;
          |HAZ Tipo4;
     |FINSI;
|FPRC;

|PROCESO DefeAlma; |TIPO 7;
     |SI #1#5 = 0;
          |ABRE #7;
          #7#26 = #0#0;
          |LEE 020#7=;
          |CIERRA #7;
          #1#5 = #7#31;
          |SI #1#5 = 0; #1#5 = 1; |FINSI;
     |FINSI;
|FPRC;
