|FICHEROS;
     ibery013 #0;
     iber0067 #67;
     agifa019 #19;
     iber0136 #136;
|FIN;

|VARIABLES;
     &enPrecio = 0;
     aInforme  = "ibery013";
     aCentro   = "";
     aArticulo = "";
     nCentro   = 0;
     nHayPre   = 0;
     nHay      = 0;
|FIN;

|PROCESO BuscaPre;

     #136#0 = #19#3;
     |LEE 000#136=;
     |SI FSalida = 0;
          |SI #136#3 = "P"; enPrecio = #19#9; |FINSI;
          |SI #136#3 = "U"; enPrecio = #19#28; |FINSI;
          |SI #136#3 = "D"; enPrecio = #19#133; |FINSI;

          |SI #136#2 = "B";
               enPrecio = enPrecio + (enPrecio * #136#1 / 100);
          |SINO;
               enPrecio = enPrecio / ((100 - #136#1) / 100);
          |FINSI;
          |SI #67#9 < enPrecio;
               nHay = 1;
               |PRINT;
          |FINSI;
     |FINSI;

     |ERROR10;
|FPRC;

|DEFBUCLE BuscaPre;
     #67#2;
     ;
     nCentro, #0#3, 01, aArticulo, " ", #0#5;
     nCentro, #0#4, 99, aArticulo, "z", "01.01.0000";
     ;
     NULL, BuscaPre;
|FIN;

|PROCESO agifa019;
     aArticulo = #19#0;
     |BUCLE BuscaPre;
|FPRC;

|DEFBUCLE agifa019;
     #19#1;
     3;
     "                    ", #0#1;
     "zzzzzzzzzzzzzzzzzzzz", #0#2;
     ;
     NULL, agifa019;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |HAZ DecimalesBase;
     |DFICE aCentro;
     aCentro = aCentro % -403;
     nCentro = aCentro;

     |IMPRE 0;
     |SI FSalida = 0;
          |INFOR aInforme;
          |SI FSalida = 0;
               |ABRE #136;
               |BUCLE agifa019;
               |CIERRA #136;
               |SI nHay ! 0; |PIEINF; |FINSI;
               |FININF;
          |SINO;
               aInforme = "0000Falta informe: " + aInforme;
               |MENAV aInforme;
          |FINSI;
          |FINIMP;
     |FINSI;
|FPRC;
