      Orts
|FICHEROS;
     agifa048 #0;
     agifa049 #1,MANTE;
     agifa019 #19;
     ortsm020@;
     ortsm027@;
     ortsm028@;
     ortsm036@;
|FIN;

|VARIABLES;
     aDef = "";
     aAlfa = "";
     nVol = 0;
     aPack = "";
     aPath = "";
|FIN;

|PROCESO Bortsm027;
     |BORRA 020#ortsm027@.a;
|FPRC;

|PROCESO Bortsm028;
     |BORRA 020#ortsm028@.a;
|FPRC;

|DEFBUCLE Bortsm028;
     #ortsm028@#1004;
     ;
     #1#0, #1#1, 0, " ";
     #1#0, #1#1, 9, "z";
     ;
     NULL, Bortsm028;
|FIN;

|DEFBUCLE Bortsm027;
     #ortsm027@#1003;
     ;
     #1#0, #1#1, "                    ";
     #1#0, #1#1, "zzzzzzzzzzzzzzzzzzzz";
     ;
     NULL, Bortsm027;
|FIN;

|PROCESO BorraTipo1;
     |BUCLE Bortsm027;
     |BUCLE Bortsm028;

     |BORRA 020#1a;

     #ortsm020@#0 = #1#0;
     #ortsm020@#1 = #1#1;
     |LEE 101#ortsm020@.=;
     |SI FSalida = 0;
          |BORRA 020#ortsm020@.a;
     |FINSI;
|FPRC;

|DEFBUCLE BorraTipo1;
     #1#1;
     10;
     #0#0, 001, 1;
     #0#0, 999, 1;
     ;
     NULL, BorraTipo1;
|FIN;

|PROCESO OrtsBorraTipo1;
     |DDEF aDef;
     aAlfa = aDef + "ortsm020";
     |CARGA_DEF aAlfa, ortsm020@;
     |SI FSalida = 0;
          aAlfa = aDef + "ortsm027";
          |CARGA_DEF aAlfa, ortsm027@;
          |SI FSalida = 0;
               aAlfa = aDef + "ortsm028";
               |CARGA_DEF aAlfa, ortsm028@;
               |SI FSalida = 0;
                    |BUCLE BorraTipo1;
                    |DESCARGA_DEF #ortsm028@;
               |FINSI;
               |DESCARGA_DEF #ortsm027@;
          |FINSI;
          |DESCARGA_DEF #ortsm020@;
     |FINSI;

     |MENAV "0000Proceso realizado, vuelva a consultar el escandallo";
|FPRC;

|PROCESO Ortsm020;
     nVol = nVol + #ortsm020@#20;
|FPRC;

|DEFBUCLE Ortsm020;
     #ortsm020@#1002;
     ;
     #1#0, #1#1;
     #1#0, #1#1;
     ;
     NULL, Ortsm020;
|FIN;

|PROCESO OrtSumVolumen;
     |SI aPack = "S";
          |SI #1#10 = 4;
               |BUCLE Ortsm020;
          |FINSI;
     |SINO;
          |SI #1#10 ! 4;
               |BUCLE Ortsm020;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE OrtSumVolumen;
     #1#1;
     ;
     #0#0, 001;
     #0#0, 999;
     ;
     NULL, OrtSumVolumen;
|FIN;

|PROCESO OrtsVolumen;
     |DDEF aPath;
     aAlfa = aPath + "ortsm036";
     |CARGA_DEF aAlfa, ortsm036@;
     |SI FSalida = 0;
          |ABRE #ortsm036@;
          |LEE 000#ortsm036@.=;
          |CIERRA #ortsm036@;
          aPack = #ortsm036@#25;
          |DESCARGA_DEF #ortsm036@;

          aAlfa = aPath + "ortsm020";
          |CARGA_DEF aAlfa, ortsm020@;
          |SI FSalida = 0;
               nVol = 0;
               |BUCLE OrtSumVolumen;
               |DESCARGA_DEF #ortsm020@;
          |FINSI;

          |ABRE #19;
          #19#0 = #0#0;
          |LEE 121#19=;
          |SI FSalida = 0;
               #19#114 = nVol;
               |GRABA 020#19a;
          |FINSI;
          |CIERRA #19;
     |FINSI;
|FPRC;
