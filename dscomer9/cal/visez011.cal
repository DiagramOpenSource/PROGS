|FICHEROS;
     visez011 #0;
     goartmer #1;
     visem007 #7;
     visem008 #8;
     agifa065 #65;
     agifa019 #19;
|FIN;

|VARIABLES;
     aAlfa = "";
|FIN;

|PROCESO visem008Act;
     #1#0 = #8#4;
     |LEE 000#1=;
     |SI FSalida ! 0; |O #1#1 = 0;
          aAlfa = "0000Articulo sin precio mercado:" + #8#4;
          |MENAV aAlfa;
          |MENAV "0000Proceso cancelado...";
          |ERROR10; |ACABA;
     |FINSI;
     #8#7 = #1#1;
     |GRABA 020#8a;
     |LIBERA #8;

     |DDEFECTO #19;
     #19#0 = #8#4;
     |LEE 000#19=;
     |SI FSalida ! 0; |O #19#9 = 0;
          aAlfa = "0000Articulo sin PCM :" + #8#4;
          |MENAV aAlfa;
          |MENAV "0000Proceso cancelado...";
          |ERROR10; |ACABA;
     |FINSI;

     |SI #7#5 ! "S"; |ACABA; |FINSI;

     #65#0 = #8#4;
     #65#1 = #7#3;
     #65#2 = #8#2;
     #65#3 = #8#1;
     #65#4 = #8#3;
     #65#11 = #8#0;
     |LEE 121#65=;
     |SI FSalida = 0;
          #65#9 = #19#9;   ||#8#7;
          #65#14 = #19#9;  ||#8#7;
          |GRABA 020#65a;
          |LIBERA #65;
     |FINSI;
|FPRC;

|DEFBUCLE visem008Act;
     #8#1;
     ;
     #7#0, #7#1, "FB", 001;
     #7#0, #7#1, "FB", 999;
     be;
     NULL, visem008Act;
|FIN;

|PROCESO visem007;
     |BUCLE visem008Act;
     |SI aAlfa ! ""; |ERROR10; |FINSI;
|FPRC;

|DEFBUCLE visem007;
     #7#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, visem007;
|FIN;

|PROCESO visem008;
     |SI #8#7 = 0; |Y #8#2 = "FB";
          aAlfa = ("000000" + #8#1) % -106;
          aAlfa = "0000Produccion " + #8#0 + "/" + aAlfa + "/" + #8#3 + " con precio 0";
          |MENAV aAlfa;
     |FINSI;
|FPRC;

|DEFBUCLE visem008;
     #8#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, visem008;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |SI #0#0 ! "SI"; |ACABA; |FINSI;
||     |BUCLE visem008;
     |SI aAlfa ! "";
          |MENAV "0000Proceso anulado, hay registros sin precio mercado";
          |ACABA;
     |FINSI;

     aAlfa = "";

     |ABRE #1;
     |ABRE #65;
     |ABRE #19;
     |BUCLE visem007;
     |CIERRA #19;
     |CIERRA #65;
     |CIERRA #1;
|FPRC;
