|FICHEROS;
     sctrz036 #0;
     sctrm008 #8;
     sctrm023 #23;
     sctrm026 #26;
     sctrm001 #100;
     sctrz014 #114; ||Pan Trafico diario
|FIN;

|VARIABLES;
     &eaTempo = "";
     &eaModo = "";
     &eaNomLogo = "";
     &enPantaLogo = 0;
     nPanta = 0;
     aTemporada = "";
     aDSentido = "";
     aHSentido = "";
     nSw = 0;
     i = 0;
|FIN;

|PROCESO TraficoDiario;
     |VENTANA 901, 2899, -1, 17, "Consulta Fecha Viaje";
     |HAZ PushVenModal;

     |PARA i = 0; |SI i [ 38; |HACIENDO i = i + 1;
          #114i = #26i;
     |SIGUE;
     |SI #114#4 = "I";
          #114#39 = "IDA";
     |SINO;
          #114#39 = "VUELTA";
     |FINSI;
     |PINPA #0#114;
     |PINDA #0#114;
     |PAUSA;

     |HAZ PopVenModal;
|FPRC;

|PROCESO sctrm026;
     nSw = 0;
     |SI #26#26 ! 0;
          |MENAV "0000El viaje ya tiene billetes asignados...";
          nSw = 1;
     |FINSI;
     |SI #26#27 ! 0;
          |MENAV "0000El viaje ya est  incluido en una hoja de ruta...";
          nSw = 1;
     |FINSI;
     |SI nSw = 1;
          |HAZ TraficoDiario;
          |CONFI "0000¨Confirma la cancelaci¢n?";
          |SI FSalida = 0;
               #26#24 = "S";
               |GRABA 020#26a
          |FINSI;
     |SINO;
          #26#24 = "S";
          |GRABA 020#26a;
     |FINSI;
|FPRC;

|DEFBUCLE sctrm026;
     #26#1;
     13;
     aTemporada, #0#0, aDSentido, #0#4, #0#2, #0#6;
     aTemporada, #0#0, aHSentido, #0#5, #0#2, #0#7;
     be;
     NULL, sctrm026;
|FIN;

|PROCESO BuscaTempo;
     |SI #0#2 ] #8#2; |Y #0#2 [ #8#3;
          aTemporada = #8#0;
          |ERROR10;
     |FINSI;
|FPRC;

|DEFBUCLE BuscaTempo;
     #8#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, BuscaTempo;
|FIN;

|PROCESO Min23;
     #23#0 = aTemporada;
     #23#2 = #0#0;
     #23#4 = " ";
     #23#5 = 000000;
|FPRC;

|PROCESO Max23;
     #23#0 = aTemporada;
     #23#2 = #0#0;
     #23#4 = " ";
     #23#5 = 999999;
|FPRC;

|PROCESO Servicio66; |TIPO 66;
     |BUCLE BuscaTempo;
     |ABRE #23;
     |CONSULTA_F_CLAVE #1#23, Min23, Max23;
     |SI FSalida = 0;
          #0Campo = #23#5; |PINTA #0Campo;
     |SINO;
          |ERROR;
     |FINSI;
     |CIERRA #23;
|FPRC;

|PROCESO T3; |TIPO 3;
     |SI #0#3 = "T";
          aDSentido = " ";
          aHSentido = "z";
     |SINO;
          aDSentido = #0#3;
          aHSentido = #0#3;
     |FINSI;
     |BUCLE BuscaTempo;
     |BUCLE sctrm026;
|FPRC;

|PROCESO LogoPanta;
     eaNomLogo = #100#1;
     |HAZ TraeLogoPan;
     enPantaLogo = nPanta;
     |HAZ PintaLogoPan;
|FPRC;

|PROGRAMA;
     |ABRE #100; |LEE 000#100p; |CIERRA #100;

     |PINPA #0#0; nPanta = FSalida;
     |PINDA #0#0;
     |HAZ LogoPanta;
     |ENDATOS #1#0;
|FPRO;
