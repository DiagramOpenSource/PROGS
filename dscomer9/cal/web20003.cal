|FICHEROS;
     web20003 #0;

     web20001 #1;   ||Control
|FIN;

|VARIABLES;
     aPath = "";
     aMensaje = "";
     aUbica = "";
     aAlfa1 = "";
     nNume1 = 0;
     nNume2 = 0;
     aAlfa2 = "";
     nPara1 = 0;
     aNombre = "";
     aOrigen = "";
     aDestino = "";
     aIPRemoto = "";
|FIN;

|PROCESO min;
     #0#0 = "                    ";
|FPRC;

|PROCESO max;
     #0#0 = "zzzzzzzzzzzzzzzzzzzz";
|FPRC;

|PROGRAMA;
     |CLS;
     |ABRE #0;
     |ABRE #web20001;
     |LEE 000#web20001.p;
     |SI FSalida ! 0;
          aMensaje = "0000Control no definido.";
          |MENAV aMensaje;
          |ACABA;
     |SINO;
          aUbica = #web20001#1;
          |QBF aUbica;
          |SI aUbica = ""; |O aUbica = "/";
               aMensaje = "0000Ubicaciones de las imagenes no definida. [Control]";
               |MENAV aMensaje;
               |ACABA;
          |SINO;
               |MKDIR aUbica;
          |FINSI;
     |FINSI;
     |ENTLINEAL #1#0, 1, 2, 22, 1, min, max;
     |SI FSalida=0;

     |FINSI;
     |CIERRA #web20001;
     |CIERRA #0;
|FPRO;

|PROCESO Browse;| TIPO 7;
     aPath = "C" + "";
     |BROWSE aPath;
     aPath = (aPath % 270);
     |QBF aPath;
     |SI aPath ! "";
          aNombre = aPath;
          |HAZ QuitaPath;
          |HAZ Copia;
          #0#4 = aNombre;
          |PINTA #0#4;
     |FINSI;
|FPRC;


|PROCESO QuitaPath;
     aAlfa1 = aNombre % 0;
     nNume1 = aAlfa1;
     aAlfa2 = "";
     |PARA nPara1 = nNume1; |SI nPara1 ] 1; |HACIENDO nPara1 = nPara1 - 1;
          nNume2 = (nPara1 * 100) + 1;
          aAlfa1 = aNombre % nNume2;
          |SI aAlfa1 = "\";|O aAlfa1 = "/";
               |SAL;
          |SINO;
               aAlfa2 = aAlfa2 + aAlfa1;
          |FINSI;
     |SIGUE;

     aNombre = aAlfa2;
     aAlfa1 = aNombre % 0;
     nNume1 = aAlfa1;
     aAlfa2 = "";
     |PARA nPara1 = nNume1; |SI nPara1 ] 1; |HACIENDO nPara1 = nPara1 - 1;
          nNume2 = (nPara1 * 100) + 1;
          aAlfa1 = aNombre % nNume2;
          aAlfa2 = aAlfa2 + aAlfa1;
     |SIGUE;
     aNombre = aAlfa2;
|FPRC;


|PROCESO Copia;
     aOrigen = aPath;
     aDestino = aUbica + aNombre;
     |HAZ EnviaFichero;
|FPRC;


|PROCESO EnviaFichero;
     aIPRemoto = "";
     |IP_REMOTO aIPRemoto;  |QBT aIPRemoto;

     |SI aIPRemoto ! "";
         |RECIBE_FICHERO aOrigen, aDestino;
     |SINO;
         |COPIA_FICHERO aOrigen, aDestino;
     |FINSI;
|FPRC;
