|FICHEROS;
     dsm00209 #0; ||Promociones por Clientes (C).
     dsm00210 #1; ||Promociones por Clientes (L).
     agifa023 #2; ||Clientes/Articulos
     agifa024 #4; ||Clientes.
     agifa019 #19;
     agifa020 #20;
     agifa321;
     agifa324;
|FIN;

|VARIABLES;
     aCli = "";
     nForma = 0;
     nVic = 0;
     nSal = 0;
     nMod = 0;
     nCon = 0;
     i    = 0;
     aAlfa1 = "";

     &nDeci_Base = 0;
     &nDeci_PreBase = 0;
|FINSI;

|PROCESO contad; |TIPO 7;
     nMod = (FEntrada / 100 ) ! 0;
     |SI nMod = 1;
          |LEE 000#0u;
          |SI FSalida = 0;
               nCon = #0#0 + 1;
          |SINO;
               nCon = 1;
          |FINSI;
          |DDEFECTO #0;
          #0#0 = nCon;
     |FINSI;
|FPRC;

|PROCESO Tipo202;  |TIPO 20;
     aAlfa1 = FSalida;
     |SI aAlfa1 = "OPCION";
         FSalida = "Generar";
         |ACABA;
     |FINSI;
     |HAZ genera;
|FPRC;

|PROCESO dsm00210;
     |DDEFECTO #19;
     #19#0 = #1#1;
     |LEE 000#19=;

     |DDEFECTO #2;
     #2#0 = aCli;   ||Cliente
     #2#1 = #1#1;   ||Articulo
     |LEE 101#2=;
     nSal = FSalida;
     #2#2  = #1#3;  ||Precio
     #2#32 = #1#4;  ||Descuento
     #2#34 = #1#7;  ||Comision
     #2#28 = #1#5;  ||Desde F.
     #2#29 = #1#6;  ||Hasta F.
     #2#35 = #19#1;
     |SI nSal = 0; |GRABA 020#2a; |FINSI;
     |SI nSal ! 0; |GRABA 020#2n; |FINSI;
     |LIBERA #2;

     #20#0 = #2#0;
     |LEE 000#20=;
     |SI FSalida ! 0; |GRABA 020#20n; |FINSI;

|FPRC;

|DEFBUCLE dsm00210;
     #1#1;
     ;
     #0#0,"                    ";
     #0#0,"zzzzzzzzzzzzzzzzzzzz";
     ;
     NULL,dsm00210;
|FIN;

|PROCESO genera;
     nMod = (FEntrada / 100) ! 0;
     |SI nMod = 3; |ACABA; |FINSI;
     |LEE 000#0=;
     |SI FSalida ! 0; |ACABA; |FINSI;

     #0#25 = "GENERADA";
     |GRABA 020#0a;
     |PINTA #0#25;

     |ABRE #20;
     |ABRE #2;
     |ABRE #19;
     |PARA nVic = 1; |SI nVic [ 24; |HACIENDO nVic = nVic + 1;
          aCli = #0nVic;
          |QBF aCli;
          |SI aCli ! "";
               |BUCLE dsm00210;
          |FINSI;
     |SIGUE;
     |CIERRA #2;
     |CIERRA #20;
     |CIERRA #19;
|FPRC;

|PROCESO f11; |TIPO 66;
     |ABRE #4;
     |LEE 000#4p;
     |CONSULTA_CLAVE #1#4;
     |SI FSalida = 0;
          #Campo = #4#0;
          |PINTA #Campo;
     |FINSI;
     |CIERRA #4;
|FPRC;

|PROCESO Borrar;
     |PARA i = 1; |SI i [ 24; |HACIENDO i = i + 1;
          #2#0 = #0i;
          #2#1 = #1#1;
          |LEE 101#2=;
          |SI FSalida = 0;
               |BORRA 020#2a;
          |FINSI;
     |SIGUE;
|FPRC;

|PROCESO Tipo2; |TIPO 2;
     |SI #0#25 ! "GENERADA "; |ACABA; |FINSI;
     nForma = 0 +.1;
     |SI nForma = 1; |ACABA; |FINSI;

     |CONFI "0000NBorrar Precio Cliente Articulo...";
     |SI FSalida ! 0; |ACABA; |FINSI;

     |ABRE #2;
     |BUCLELIN 0 Borrar #0;
     |CIERRA #2;
     #0#25 = "PENDIENTE";
     |PINTA #0#25;
|FPRC;

|PROCESO Tipo8; |TIPO 8;
       |ABRE #agifa321;
       |ABRE #agifa324;
       |LEE 001#agifa321.p;
       #agifa324#0 = #agifa321#9; ||Igualo a moneda base
       |LEE 001#agifa324.=;
       nDeci_Base = #agifa324#7;  ||Decimales moneda base
       nDeci_PreBase = #agifa324#9;  ||Decimales precio de moneda base
       |CIERRA #agifa321;
       |CIERRA #agifa324;
|FPRC;
