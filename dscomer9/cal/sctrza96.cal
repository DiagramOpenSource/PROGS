    AnulaReserva

|FICHEROS;
     sctrz096 #0;
     sctrm052 #52;
     sctrm053 #53;
     sctrm084 #84;
|FIN;

|VARIABLES;
     &enForma = 0;
     &enPax = 0;
     &enLinea = 0;
     &eaSentido = "";
     &efFechaViaje = @;
     nNume = 0;
|FIN;

|PROCESO Borra53;
     |BORRA 020#53a;
|FPRC;

|DEFBUCLE Borra53;
     #53#1;
     ;
     #52#0, 00;
     #52#0, 99;
     ;
     NULL, Borra53;
|FIN;

|PROCESO Reserva;
     |SELECT #2#84;
     #84#1 = #0#0;
     |LEE 101#84=;
     |SI FSalida = 0;
          #84#3 = "S";
          |GRABA 020#84a;
          |LIBERA #84;
     |FINSI;

     #52#0 = #0#0;
     |LEE 101#52=;
     |SI FSalida = 0;

          enForma = -1;
          |HAZ Actualiza;

          nNume = #52#20 - #52#99 + 1;
          enPax = -1;
          enLinea = #52#75;
          eaSentido = #52#101;
          efFechaViaje = nNume;
          |HAZ CtrlViajerosAct;

          |BORRA 020#52a;
          |BUCLE Borra53;
          |LIBERA #52;
     |FINSI;
|FPRC;

|DEFBUCLE Reserva;
     #0#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Reserva;
|FIN;

|PROCESO AnulaReserva;
     |ABRE #52;
     |ABRE #53;
     |ABRE #84;
     |BUCLE Reserva;
     |CIERRA #84;
     |CIERRA #52;
     |CIERRA #53;
|FPRC;
