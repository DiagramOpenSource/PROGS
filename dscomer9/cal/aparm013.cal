|FICHEROS;
     aparm013 #0;
     aparm009 #9;
     agifa019 #19;
|FIN;

|VARIABLES;
     &enTiva = 0;
     &efFiva = @;
     &eaDiva = "";
     &enIva = 0;
     &enRec = 0;
     &eaArticulo = "";
     &EURODB = 0;
     aAlfa = "";
     nNume = 0;
     nCampo = 0;
     nTari = 0;
|FIN;

|PROCESO ImpoBene;
     |SI nTari = 0; |O nTari = 1;
          #9#8 = #9#9 - #9#1;
     |FINSI;
     |SI nTari = 0; |O nTari = 2;
          #9#12 = #9#13 - #9#1;
     |FINSI;
     |SI nTari = 0; |O nTari = 3;
          #9#16 = #9#17 - #9#1;
     |FINSI;
     |SI nTari = 0; |O nTari = 4;
          #9#20 = #9#21 - #9#1;
     |FINSI;
     |SI nTari = 0; |O nTari = 5;
          #9#24 = #9#25 - #9#1;
     |FINSI;
     |SI nTari = 0; |O nTari = 6;
          #9#28 = #9#29 - #9#1;
     |FINSI;
|FPRC;

|PROCESO PorceBene;
     |SI nTari = 0; |O nTari = 1;
          #9#7 = #9#8 * 100 / #9#1;
     |FINSI;
     |SI nTari = 0; |O nTari = 2;
          #9#11 = #9#12 * 100 / #9#1;
     |FINSI;
     |SI nTari = 0; |O nTari = 3;
          #9#15 = #9#16 * 100 / #9#1;
     |FINSI;
     |SI nTari = 0; |O nTari = 4;
          #9#19 = #9#20 * 100 / #9#1;
     |FINSI;
     |SI nTari = 0; |O nTari = 5;
          #9#23 = #9#24 * 100 / #9#1;
     |FINSI;
     |SI nTari = 0; |O nTari = 6;
          #9#27 = #9#28 * 100 / #9#1;
     |FINSI;
|FPRC;

|PROCESO Beneficio;
     |SI nTari = 0; |O nTari = 1;
          #9#8 = #9#1 % #9#7;
     |FINSI;
     |SI nTari = 0; |O nTari = 2;
          #9#12 = #9#1 % #9#11;
     |FINSI;
     |SI nTari = 0; |O nTari = 3;
          #9#16 = #9#1 % #9#15;
     |FINSI;
     |SI nTari = 0; |O nTari = 4;
          #9#20 = #9#1 % #9#19;
     |FINSI;
     |SI nTari = 0; |O nTari = 5;
          #9#24 = #9#1 % #9#23;
     |FINSI;
     |SI nTari = 0; |O nTari = 6;
          #9#28 = #9#1 % #9#27;
     |FINSI;
|FPRC;

|PROCESO Neto;
     |SI nTari = 0; |O nTari = 1;
          #9#9 = #9#1 + #9#8;
     |FINSI;
     |SI nTari = 0; |O nTari = 2;
          #9#13 = #9#1 + #9#12;
     |FINSI;
     |SI nTari = 0; |O nTari = 3;
          #9#17 = #9#1 + #9#16;
     |FINSI;
     |SI nTari = 0; |O nTari = 4;
          #9#21 = #9#1 + #9#20;
     |FINSI;
     |SI nTari = 0; |O nTari = 5;
          #9#25 = #9#1 + #9#24;
     |FINSI;
     |SI nTari = 0; |O nTari = 6;
          #9#29 = #9#1 + #9#28;
     |FINSI;
|FPRC;

|PROCESO Iva;
     |SI nTari = 0; |O nTari = 1;
          #9#10 = #9#9 + (#9#9 * enIva / 100);
     |FINSI;
     |SI nTari = 0; |O nTari = 2;
          #9#14 = #9#13 + (#9#13 * enIva / 100);
     |FINSI;
     |SI nTari = 0; |O nTari = 3;
          #9#18 = #9#17 + (#9#17 * enIva / 100);
     |FINSI;
     |SI nTari = 0; |O nTari = 4;
          #9#22 = #9#21 + (#9#21 * enIva / 100);
     |FINSI;
     |SI nTari = 0; |O nTari = 5;
          #9#26 = #9#25 + (#9#25 * enIva / 100);
     |FINSI;
     |SI nTari = 0; |O nTari = 6;
          #9#30 = #9#29 + (#9#29 * enIva / 100);
     |FINSI;
|FPRC;

|PROCESO Calcula;
     |SI #0#29 = "I";
          #9#0 = #9#0 + #0#30;
     |SINO;
          #9#0 = #9#0 + (#9#0 * #0#30 / 100);
     |FINSI;
     #9#2 = #9#2 + #0#31;
     #9#3 = #9#3 + #0#32;
     #9#4 = #9#4 + #0#33;
     #9#5 = #9#5 + #0#34;
     #9#6 = #9#6 + #0#35;

     #9#1 = (((#9#0 < #9#2) < #9#3) < #9#4) + #9#5 + #9#6;
     |PARA nTari = 1; |SI nTari = 6; |HACIENDO nTari = nTari + 1;
          nCampo = 20 + nTari;
          |SI #0nTari = "S";
               |HAZ Beneficio;
               |HAZ Neto;
                |HAZ Iva;
          |FINSI;
     |SIGUE;

     |SI #0#21 = "S";
          nTari = 1;
          |SI #0#36 = "I";
               #9#8 = #9#8 + #0#5;
               |HAZ PorceBene;
          |SINO;
               #9#7 = #9#7 + #0#5;
               |HAZ Beneficio;
          |FINSI;
          |HAZ Neto;
          |HAZ Iva;
     |FINSI;
     |SI #0#22 = "S";
          nTari = 2;
          |SI #0#36 = "I";
               #9#12 = #9#12 + #0#6;
               |HAZ PorceBene;
          |SINO;
               #9#11 = #9#11 + #0#6;
               |HAZ Beneficio;
          |FINSI;
          |HAZ Neto;
          |HAZ Iva;
     |FINSI;
     |SI #0#23 = "S";
          nTari = 3;
          |SI #0#36 = "I";
               #9#16 = #9#16 + #0#7;
               |HAZ PorceBene;
          |SINO;
               #9#15 = #9#15 + #0#7;
               |HAZ Beneficio;
          |FINSI;
          |HAZ Neto;
          |HAZ Iva;
     |FINSI;
     |SI #0#24 = "S";
          nTari = 4;
          |SI #0#36 = "I";
               #9#20 = #9#20 + #0#8;
               |HAZ PorceBene;
          |SINO;
               #9#19 = #9#19 + #0#8;
               |HAZ Beneficio;
          |FINSI;
          |HAZ Neto;
          |HAZ Iva;
     |FINSI;
     |SI #0#25 = "S";
          nTari = 5;
          |SI #0#36 = "I";
               #9#24 = #9#24 + #0#9;
               |HAZ PorceBene;
          |SINO;
               #9#23 = #9#23 + #0#9;
               |HAZ Beneficio;
          |FINSI;
          |HAZ Neto;
          |HAZ Iva;
     |FINSI;
     |SI #0#26 = "S";
          nTari = 6;
          |SI #0#36 = "I";
               #9#28 = #9#28 + #0#10;
               |HAZ PorceBene;
          |SINO;
               #9#27 = #9#27 + #0#10;
               |HAZ Beneficio;
          |FINSI;
          |HAZ Neto;
          |HAZ Iva;
     |FINSI;
|FPRC;

|PROCESO agifa019;
     |DDEFECTO #9;
     #9#31 = #19#0;
     |LEE 101#9=;
     |SI FSalida ! 0; |GRABA 020#9b; |FINSI;

     enTiva = #19#30;
     efFiva = ~;
     |HAZ SacaIVA;

     |HAZ Calcula;

     |GRABA 020#9a;
     |LIBERA #9;

     #19#18 = #9#9;
     #19#19 = #9#13;
     #19#20 = #9#17;
     #19#147 = #9#21;
     #19#148 = #9#25;
     #19#149 = #9#29;

     |GRABA 020#19a;
     |LIBERA #19;
|FPRC;

|DEFBUCLE agifa019;
     #19#1;
     125, 2, 3, 27;
     #0#0, #0#17, #0#13, #0#15, #0#19;
     #0#1, #0#18, #0#14, #0#16, #0#20;
     be;
     NULL, agifa019;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |ABRE #9;
     |BUCLE agifa019;
     |CIERRA #9;
|FPRC;

|PROCESO Calculo;
     nCampo = Campo - 16;
     |C_M #0nCampo, 1, "S";
     |SI #0Campo = "N";
         |C_M #0nCampo, 1, "N";
         #0nCampo = 0;  |PINTA #0nCampo;
     |FINSI;
|FPRC;

|PROCESO Proveedor; |TIPO 0;
     aAlfa = #0#19; |QBF aAlfa;
     |SI aAlfa ! "";
          #0#19 = ("000000" + aAlfa) % -106;
          |PINTA #0#19;
     |FINSI;
|FPRC;

|PROCESO DefeRedon; |TIPO 7;
|FPRC;

|PROCESO Llena004; |TIPO 6;
     eaArticulo = #0Campo;
     |HAZ LlenaArticulo;
     |SI FSalida = 0;
          #0Campo = eaArticulo;
          |PINTA #0Campo;
     |SINO;
          |ERROR; |ACABA;
     |FINSI;
|FPRC;

|PROGRAMA;
     |HAZ DecimalesBase;
     |MANTE #0;
|FPRO;
