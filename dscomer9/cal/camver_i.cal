|FICHEROS;
    ver00000 #39;         || cambios de version AGICOMER
|FIN;

|VARIABLES;
    v_switch = 0;
    v_ultimo = 0;
    &v_path = "";
|FIN;

|CALCULO lee_version2;
|SI #39#1 = #0#2;
        alfa1 = "    ATENCION!!! Cambio de Version YA Realizado!!!: " + #39#2;
    |MENAV alfa1;
    |ERROR10;
        v_switch = 1;
|FINSI;
     v_ultimo = #39#0;
|FCAL;

|DEFBUCLE lee_version1;
 #39#1;
 ;
   1;
 999;
 e;
 NULL, lee_version2;
|FIN;

|PROCESO lee_version; |TIPO 8;
    v_ultimo = 0;
    v_switch = 0;
|SI enganche = 1;
    |PATH_DAT #39 v_path;
|FINSI;
|BUCLE lee_version1;
|SI v_switch = 1;
    |PTEC 807;
|FINSI;
|FPRC;

|CALCULO gra_version;
|SI v_switch = 0;
    |ABRE #39;
        #39#0 = v_ultimo + 1;
        #39#1 = #0#2;
        #39#2 = ~;
    |GRABA 020#39n;
    |CIERRA #39;
|FINSI;
|FCAL;

****************************************************************************
      SACA LOS DIRECTORIOS DE LOS DEF Y DE LOS FICH Y CARGA VARIABLE COPIA
****************************************************************************

|CALCULO base;
||QUE_SISTEMA sis;
|SI enganche = 1;
        fich = v_path;        || viene cargado de 'caversi1'
|SINO;
    |DFICE fich;
|FINSI;
|DDEF def;
||SI sis = "ESDOS";
||        copy = "copy ";  || d.o.s.
|||SINO;
||        copy = "cp ";    || xenix
|||FINSI;
copy = "";
|DIRECTORIO copy;   |QBF copy;
copy = copy + "bin/agicopy";     |QBF copy;

|FCAL;

****************************************************************************
      CAMBIOS AUTOMATICOS
****************************************************************************

|CALCULO engan1; |TIPO 7;
|SI enganche = 1;
        #0#1 = "SI";
    |PINTA #0#1;
    |PTEC 802;
    |PTEC 802;
|FINSI;
|FCAL;
