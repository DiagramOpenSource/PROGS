|FICHEROS;
     dsz00096 #0;
     agifa010 #10;
     agifa019 #19;
     agifa073 #73;
     agifa104 #104;
     agifa142 #142;
     agifa134 #134;
     agifa084 #84;
|FIN;

|VARIABLES;
     &eaNif = "";
     &eaCliente = "";
     nSirve = 0;
     nPendiente = 0;
     nPendiente2 = 0;
|FIN;

|PROCESO Directas;
     |SI #0#6 = "T"; |O #84#39 = "N";
          #84#60 = eaNif;
          |GRABA 020#134a;

          #0#4 = #84#48; |PINTA #0#4;
          #0#5 = #84#0; |PINTA #0#5;
     |FINSI;
     |LIBERA #134;
|FPRC;

|DEFBUCLE Directas;
     #134#3;
     ;
     eaCliente, "01.01.0000", "     ", 000001;
     eaCliente, "31.12.9999", "zzzzz", 999999;
     be;
     NULL, Directas;
|FIN;

|PROCESO Facturas;
     |SI #0#2 = "T"; |O #134#48 = "N";
          #134#124 = eaNif;
          |GRABA 020#134a;

          #0#4 = #134#49; |PINTA #0#4;
          #0#5 = #134#0; |PINTA #0#5;
     |FINSI;
     |LIBERA #134;
|FPRC;

|DEFBUCLE Facturas;
     #134#3;
     ;
     eaCliente, "01.01.0000", "     ", 000001;
     eaCliente, "31.12.9999", "zzzzz", 999999;
     be;
     NULL, Facturas;
|FIN;

|PROCESO Albaranes;
     |SI #0#1 = "T"; |O #10#38 = "N";
          #10#63 = eaNif;
          |GRABA 020#10a;

          #0#4 = #10#52; |PINTA #0#4;
          #0#5 = #10#0; |PINTA #0#5;
     |FINSI;
     |LIBERA #10;
|FPRC;

|DEFBUCLE Albaranes;
     #10#3;
     ;
     eaCliente, "01.01.0000", "     ", 000001;
     eaCliente, "31.12.9999", "zzzzz", 999999;
     be;
     NULL, Albaranes;
|FIN;

|PROCESO PedFin;
     |SI #0#0 = "T"; |O nSirve = 0;
          #104#64 = eaNif;
          |GRABA 020#104a;

          #0#4 = #104#25; |PINTA #0#4;
          #0#5 = #104#0; |PINTA #0#5;
     |FINSI;
     |LIBERA #104;
|FPRC;

|PROCESO PedLin;
     #19#0 = #73#2;
     |LEE 000#19=;
     |SI FSalida ! 0; |DDEFECTO #19; |FINSI;

     nPendiente = #73#5 - #73#43;
     nPendiente2 = #73#44 - #73#49;
     |SI #19#179 = "N"; |O #142#117 = "N";||Sin Doble Stock
          |SI nPendiente ! 0;
               nSirve = 0;
          |FINSI;
     |SINO;
          |SI #142#224 = "B";
               |SI nPendiente ! 0; |O nPendiente2 ! 0;
                    nSirve = 0;
               |FINSI;
          |SINO;
               |SI nPendiente ! 0; |Y nPendiente2 ! 0;
                    nSirve = 0;
               |FINSI;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO Pedidos;
     nSirve = 1;
|FPRC;

|DEFBUCLE Pedidos;
     #104#2;
     ;
     eaCliente, "     ", 000001;
     eaCliente, "zzzzz", 999999;
     be;
     NULL, Pedidos, PedLin, PedFin;
|FIN;

|PROGRAMA;
     |ABRE #142; |LEE 000#142p; |CIERRA #142;
     |BLANCO 8141760;
     |PINPA #0#0;
     |PINDA #0#0;
     |ENDATOS #1#0;
     |SI FSalida = 0;
          |C_V #0#3, 1, "S";
          |C_V #0#4, 1, "S";
          |C_V #0#5, 1, "S";
          |SI #0#0 ! "N";
               #0#3 = "Pedido"; |PINTA #0#3;
               |ABRE #19;
               |BUCLE Pedidos;
               |CIERRA #19;
          |FINSI;
          |SI #0#1 ! "N";
               #0#3 = "Albaran"; |PINTA #0#3;
               |BUCLE Albaranes;
          |FINSI;
          |SI #0#2 ! "N";
               #0#3 = "Factura"; |PINTA #0#3;
               |BUCLE Facturas;
          |FINSI;
          |SI #0#6 ! "N";
               #0#3 = "Directa"; |PINTA #0#3;
               |BUCLE Directas;
          |FINSI;
     |FINSI;
|FPRO;
