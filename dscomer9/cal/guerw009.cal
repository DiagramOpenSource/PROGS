|FICHEROS;
  guerw009 #0;
  guerm001 #1;    ||Cabeceras
  guerm002 #2;    ||Lineas;
  guerm004 #4;    ||Camiones;
  guerm009 #9,MANTE;    ||CLietes Obras
  guerm010 #10;   ||Conductores
  guerm011 #11;   ||Articulo Clientes Obras;
  agifa024 #24;   ||CLIENTES
|FIN;

|VARIABLES;
  nConta = 0;
  nCheq = 0;
  nTotaNeto = 0;
  aAlfa = "";
  informe = "guerw009";
  novale = 0;
  &incide = "";
  &EURODB = 0;
  total = 0;
  descu = 0;
  sumalin = 0;
  hayimpre = 0;
|FIN;

|PROCESO Corrige;
     aAlfa = #2#2; |QBF aAlfa;
     |SI aAlfa ] 901; |Y aAlfa [ 999;
          #2#7 = 0; ||Bruto
          #2#4 = nTotaNeto;
          |GRABA 020#2a;
     |FINSI;
     |LIBERA #2;
|FPRC;

|PROCESO Chequea;
     aAlfa = #2#2; |QBF aAlfa;
     |SI aAlfa ] 901; |Y aAlfa [ 999;
          nCheq = 1;
     |SINO;
          nTotaNeto = nTotaNeto + #2#4;
     |FINSI;
|FPRC;

|PROCESO pideimpre;
  |IMPRE 0;
  |SI FSalida ! 0;  |ACABA;  |FINSI;
  |INFOR informe;
  |SI FSalida ! 0;  |FINIMP;  |ACABA;  |FINSI;
  hayimpre = 1;
|FPRC;

|PROCESO guerm002;
  #11#0 = #1#3;
  #11#1 = #1#29;
  #11#2 = #2#2;
  |LEE 000#11=;
  |SI FSalida = 0;
      #2#5 = #11#6;
      #2#8 = #11#7;
      total = ((#2#4 * #2#5) / 1000) ! EURODB;
      descu = (total % #2#8) ! EURODB;
      #2#6 = total - descu;
      |GRABA 020#2a;
  |SINO;
      |DDEFECTO #11;
      #11#0 = #1#3;
      #11#1 = #1#29;
      #11#2 = #2#2;
      #11#3 = #1#4;
      #11#4 = #1#30;
      #11#5 = #2#3;
      |PUSHV 0501 2380;
      |PINPA #0#11;
      |PINDA #0#11;
      |ENDATOS #1#11;
      |SI FSalida = 0;
          #2#5 = #11#6;
          #2#8 = #11#7;
          total = ((#2#4 * #2#5) / 1000) ! EURODB;
          descu = (total % #2#8) ! EURODB;
          #2#6 = total - descu;
          |GRABA 020#11n;
      |SINO;
          novale = 1;
          |SI hayimpre = 0;
              |HAZ pideimpre;
          |FINSI;
          |SI hayimpre = 1;
              incide = "NO EXISTE CLIENTE OBRA ARTICULO " + #11#0 + " " + #11#1 + " " + #11#2;
              |PRINT;
          |FINSI;
      |FINSI;
  |FINSI;
  sumalin = sumalin + #2#6;
|FPRC;

|PROCESO guerm001;
  nConta = nConta + 1;
  |PINTA 1821, #1#0;
  novale = 0;
  #24#0 = #1#3;
  |LEE 000#24=;
  |SI FSalida ! 0;
      |SI hayimpre = 0;
          |HAZ pideimpre;
      |FINSI;
      |SI hayimpre = 1;
          incide = "Cliente Inexistente   en movimiento " + #1#0;
          |PRINT;
      |FINSI;
      |ACABA;
  |FINSI;

  #4#0 = #1#11;
  |LEE 000#4=;
  |SI FSalida ! 0;
      |DDEFECTO #4;
      #4#0 = #1#11;
      #4#1 = #1#12;
      #4#2 = #1#13;
      |GRABA 020#4n;
      |SI FSalida = 0;
          |SI hayimpre = 0;
              |HAZ pideimpre;
          |FINSI;
          |SI hayimpre = 1;
              incide = "Camion dado de ALTA " + #1#11;
              |PRINT;
          |FINSI;
      |SINO;
          novale = 1;
      |FINSI;
  |FINSI;

  #9#0 = #1#3;
  #9#2 = #1#29;
  |LEE 000#9=;
  |SI FSalida ! 0;
      |DDEFECTO #9;
      #9#0 = #1#3;
      #9#1 = #1#4;
      #9#2 = #1#29;
      #9#3 = #1#30;
      |GRABA 020#9n;
      |SI FSalida = 0;
          |SI hayimpre = 0;
              |HAZ pideimpre;
          |FINSI;
          |SI hayimpre = 1;
              incide = "CLIENTE OBRA dado de Alta " + #9#0 + " "  + #9#2;
              |PRINT;
          |FINSI;
      |SINO;
          novale = 1;
      |FINSI;
  |FINSI;

  #10#0 = #1#31;
  |LEE 000#10=;
  |SI FSalida ! 0;
      |DDEFECTO #10;
      #10#0 = #1#31;
      #10#1 = #1#32;
      |GRABA 020#10n;
      |SI FSalida = 0;
          |SI hayimpre = 0;
              |HAZ pideimpre;
          |FINSI;
          |SI hayimpre = 1;
              incide = "Camionero dado de ALTA " + #10#0;
              |PRINT;
          |FINSI;
      |SINO;
          novale = 1;
      |FINSI;
  |FINSI;

  nCheq = 0;
  nTotaNeto = 0;
  |BUCLELIN 2Chequea#1;
  |SI nCheq = 1;
     |BUCLELIN 0Corrige#1
  |FINSI;

  sumalin = 0;
  |BUCLELIN 0guerm002#1;
  |SI novale = 0;
     #1#20 = sumalin;
     #1#22 = #1#20 - #1#21;
     #1#23 = ((#1#22 * #1#14) / 100) ! EURODB;
     #1#24 = #1#22 + #1#23;
     #1#36 = "S";
     |GRABA 020#1a;
  |FINSI;
  |LIBERA #1;
|FPRC;

|DEFBUCLE guerm001;
#1#9;
36;
#0#4, #0#0, #0#2, "N";
#0#5, #0#1, #0#3, "N";
e;
NULL,guerm001;
|FIN;

|PROCESO tipo33;  |TIPO 3;
  |ABRE #4;
  |ABRE #9;
  |ABRE #10;
  |ABRE #11;
  |ABRE #24;
  |BUCLE guerm001;
  |CIERRA #4;
  |CIERRA #9;
  |CIERRA #10;
  |CIERRA #11;
  |CIERRA #24;
  |SI hayimpre = 1;
      |PIEINF;
      |FININF;
      |FINIMP;
  |FINSI;
  aAlfa = "0000Procesado [" + nConta + "] Registros.";
  |MENAV aAlfa;
|FPRC;
