|FICHEROS;
     con00638 #0;
     agifa007 #1; || series
     agifa027 #13; ||contadores
     con00637 #3; || facturas taller
     agifa091 #10;
     con00683 #683;
     agifa024 #24;
     agifa142 #142;
|FIN;

|VARIABLES;
     nNum = 0;
     aAlfa = "";
     expor = "";
 {-1}menu = "";
     menu1 = "2400";
     menu2 = "1";
     menu3 = "Contador:  ";
     menu4 = "AM";
     menu5 = " Automatico ";
     menu6 = " Manual ";
|FIN;

|PROCESO NoEsc; |TIPO 6;
     |SI FSalida = 1;
          |AVISO; |ERROR;
     |FINSI;
|FPRC;

|PROCESO Contador7; |TIPO 7;
     |C_M #0#0, 0, aAlfa;
     |SI aAlfa = "N"; |ACABA; |FINSI;

     |ABRE #142; |LEE 000#142p; |CIERRA #142;
     |MENU menu;
     |SI FSalida = 1;
          |SI #142#137 = "F";
               |ABRE #13;
               #13#2 = #0#0;
               #13#0 = "facturao";
               |LEE 101#13=;
               |SI FSalida ! 0;
                    #13#1 = 1;
                    |GRABA 020#13b;
               |FINSI;
               #0#1 = #13#1; |PINTA #0#1;
               #13#1 = #13#1 + 1;
               |GRABA 021#13a;
               |CIERRA #13;
          |SINO;
               |ABRE #3;
               #3#0 = #0#0;
               #3#1 = 999999;
               |LEE 000#3];
               |SI FSalida = 0;
                    |LEE 000#3a;
               |SINO;
                    |LEE 000#3u;
               |FINSI;
               |SI FSalida = 0; |Y #3#0 = #0#0;
                    nNum = #3#1 + 1;
               |SINO;
                    nNum = 1;
               |FINSI;
               |CIERRA #3;
               #0#1 = nNum; |PINTA #0#1;
          |FINSI;
          |PTEC 802;
     |FINSI;
|FPRC;

|PROCESO Contador0; |TIPO 0;
     |ABRE #3;
     #3#0 = #0#0;
     #3#1 = #0#1;
     |LEE 001#3=;
     |SI FSalida = 0;
          |MENAV "0000La factura ya existe";
          |ERROR;
     |FINSI;
     |CIERRA #3;
|FPRC;

|PROCESO suma_base;
     |C_M #0#0, 0, aAlfa;
     |SI aAlfa = "N"; |ACABA; |FINSI;

     |ABRE #24;
     #24#0 = #0#3;
     |LEE 000#24=;
     |CIERRA #24;
     |ABRE #1;
     #1#26 = #0#0;
     |LEE 000#1=;
     |CIERRA #1;

     expor = "N";
     |SI #24#28 = "S"; expor = "S"; |FINSI;
     |SI #1#30 = "S"; expor = "S"; |FINSI;

     |ABRE #683; |LEE 000#683p; |CIERRA #683;
     |SI #0#0 = #683#11; |O #0#0 = #683#12; |O #0#0 = #683#13;
      |O #0#0 = #683#17; |O #0#0 = #683#18; |O #0#0 = #683#19;
      |O #0#0 = #683#21; |O #0#0 = #683#22; |O #0#0 = #683#23;
      |O #0#0 = #683#24; |O #0#0 = #683#25; |O #0#0 = #683#26;
      |O #0#0 = #683#27; |O #0#0 = #683#28; |O #0#0 = #683#29;
      |O #0#0 = #683#30; |O #0#0 = #683#31; |O #0#0 = #683#32;
      |O #0#0 = #683#33; |O #0#0 = #683#34; |O #0#0 = #683#35;
      |O expor = "S";
          #1#30 = "S";
      |FINSI;

     |SI #1#30 = "N";
          #0#11 = #0#7 + #0#10 + #0#26 + #0#29 + #0#6;
     |SINO;
        #0#6 = #0#7 + #0#26;
        #0#11 = #0#6;
        #0#7 = 0;
        #0#26 = 0;
        #0#10 = 0;
        #0#29 = 0;
        #0#8 = 0;
        #0#9 = 0;
        #0#27 = 0;
        #0#28 = 0;
     |FINSI;
     |PINTA #0#6;
     |PINTA #0#11;
     |PINTA #0#7;
     |PINTA #0#10;
     |PINTA #0#26;
     |PINTA #0#29;
     |PINTA #0#8;
     |PINTA #0#9;
     |PINTA #0#27;
     |PINTA #0#28;


     |C_M #0#0, 1, "N";
     |C_M #0#1, 1, "N";
     |C_M #0#2, 1, "N";
|FPRC;

|PROCESO puede;
     |SI #10#3 > 1; |Y #0#23 ! #0#11 ; |Y #0#23 ! 0;
          |MENAV "0000Hay mas de un vencimiento";
          |ERROR;
     |FINSI;
|FPRC;
