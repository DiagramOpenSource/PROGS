|FICHEROS;
     tlfz0003 #0;
     agifa505 #505;
     agifa515 #515;
|FIN;


|PROCESO mayor;
     |SI #0#2 > #0#1;
          |MENAV "0000El Importe a Cobrar supera el Pendiente del Recibo";
     |FINSI;
|FPRC;

|PROCESO abierta; |TIPO 0;
     |SI #0#10 = 0; |ACABA; |FINSI;

     |ABRE #505;     || Configuracion tpv
     #505#0 = #0#10;
     |LEE 000#505=;
     |SI FSalida ! 0;
          |MENAV "0000ATENCION No existe la caja";
          |ERROR;
     |SINO;
          |SI #505#23 = "N";
               |MENAV "0000ATENCION La caja esta cerrada"
               |ERROR;
          |SINO;
               #0#7 = #505#24;
               #0#11 = #505#24;
               |PINTA #0#7;
               |PINTA #0#11;
          |FINSI;
     |FINSI;
     |CIERRA #505;
|FPRC;

|PROCESO Pago; |TIPO 0;
     |SI #0#12 = "T";
          |C_M #0#13, 1, "S";
     |SINO;
          |C_M #0#13, 1, "N";
     |FINSI;
|FPRC;

|PROCESO Tarjeta0; |TIPO 0;
     |SI #0#12 = "T";
          |ABRE #515;
          #515#0 = #0#13;
          |LEE 000#515=;
          |SI FSalida ! 0;
               |MENAV "0000No existe codigo de tarjeta...";
               |ERROR;
          |FINSI;
          |CIERRA #515;
     |FINSI;
|FPRC;

|PROCESO Tarjeta66; |TIPO 66;
     |ABRE #515;
     #515#0 = #0#13;
     |LEE 000#515];
     |CONSULTA_CLAVE #1#515;
     |SI FSalida = 0;
          #0#13 = #515#0; |PINTA #0#13;
     |SINO;
          |ERROR;
     |FINSI;
     |CIERRA #515;
|FPRC;
