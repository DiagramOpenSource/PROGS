|FICHEROS;
     obras005 #0;
     obras005@ #100;
     obras006 #1;
     agifa321 #321;
     agifa324 #324;
     obraz001 #10,MANTE;
     obras001 #11;
|FIN;

|VARIABLES;
     nModo     = 0;
     nForma    = 0;
     aAlfa     = "";
     aAlf1     = "";
     aAlf2     = "";
     aAlf3     = "";
     aOrg      = "";
     aDes      = "";
     aMensaje = "";
     &nDeci_PreBase = 0;
     &nDeci_Base = 0;
|FIN;

|PROCESO Divisas; |TIPO 7;
     ||aMensaje = "0000Entrando en la ficha";
     ||MENAV aMensaje;
     |HAZ LeeDecimBase;
|FPRC;

|PROCESO LeeDecimBase; |TIPO 8;
     |ABRE #agifa321;
     |ABRE #agifa324;
     |LEE 001#agifa321.p;
     #agifa324#0 = #agifa321#9; ||Igualo a moneda base
     |LEE 001#agifa324.=;
     nDeci_Base = #agifa324#7;  ||Decimales moneda base
     nDeci_PreBase = #agifa324#9;  ||Decimales precio de moneda base
     |CIERRA #agifa321;
     |CIERRA #agifa324;
|FPRC;

|PROCESO Tipo2; |TIPO 2;
     nModo = (FEntrada / 100) ! 0;
     nForma = 0 +. 1;
     aAlfa = #0#6; |QBF aAlfa;
     |SI aAlfa ! "";
          |SI nForma = 1;
               aAlfa = "0000Copiado al codigo '" + #0#6 + "'";
               |MENAV aAlfa;
          |FINSI;
          |ERROR;
          |ACABA;
     |FINSI;
     |SI nModo = 3;
          |DDEF aAlfa;
          aAlfa = aAlfa + "obras005";
          |CARGA_DEF aAlfa, obras005@;
          |SI FSalida = 0;
               aAlf1 = #0#5 % 103;
               aAlf2 = #0#5 % 402;
               aAlf3 = #0#5 % 704;
               |ABRE #100;
               #100#0 = aAlf1;
               #100#1 = aAlf2;
               #100#2 = aAlf3;
               |LEE 121#100=;
               |SI FSalida = 0;
                    #100#6 = "";
                    |GRABA 020#100a;
               |FINSI;
               |CIERRA #100;
               |DESCARGA_DEF #obras005@;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO CopiLin;
     #1#0 = #10#0;
     #1#1 = #10#1;
     #1#2 = #10#2;
     |GRABA 020#1n;
|FPRC;

|PROCESO Tipo20;
/*                       ANULADO
 |TIPO 20;
     |SI FSalida = "OPCION";
          FSalida = "Copiar";
     |SINO;
          |LEE 101#0=;
          |SI FSalida ! 0; |ACABA; |FINSI;
          |PUSHV 0501 2380;
          |BLANCO 917 1662;
          |DDEFECTO #10;
          |PINPA #0#10;
          |PINDA #0#10;
          |ENDATOS #1#10;
          |SI FSalida = 0;
               aOrg = (("000" + #0#0) % -103)+(("00" + #0#1) % -102)+(("0000" + #0#2) % -104);
               |SALVA_FICHA #0;
               #0#0 = #10#0;
               #0#1 = #10#1;
               #0#2 = #10#2;
               aDes = (("000" + #0#0) % -103)+(("00" + #0#1) % -102)+(("0000" + #0#2) % -104);
               |LEE 000#0=;
               |SI FSalida = 0;
                    |REPON_FICHA #0;
                    |MENAV "0000Destino existente...";
                    |POPV;
                    |ACABA;
               |FINSI;
               |REPON_FICHA #0;
               #0#6 = aDes;
               |GRABA 020#0a;
               |BUCLELIN 2 CopiLin #0;
               #0#0 = #10#0;
               #0#1 = #10#1;
               #0#2 = #10#2;
               #0#4 = "C";
               #0#5 = aOrg;
               #0#6 = "";
               |GRABA 020#0n;
               |MENAV "0000Copia completada...";
          |FINSI;
          |POPV;
     |FINSI;
*/
|FPRC;
