|FICHEROS;
     retotren #6;
     redatcon #7;
     retotpat #16;
     reliquid #20;
     retotrea #9;
     reprogra #10;
     reincide #5;
|FIN;

|INCLUYE i_varcal;

|PROCESO liqborra;
    |BORRA 020#6a;
|FPRC;

|PROCESO patborra;
    |BORRA 020#16a;
    |LIBERA #16;
|FPRC;

|PROCESO adjborra;
    |BORRA 020#9a;
    |LIBERA #9;
|FPRC;

|PROCESO borrainci;
    |BORRA 020#5a;
    |LIBERA #5;
|FPRC;

|PROCESO borrapant;
    |BORRA 020#20a;
    |LIBERA #20;
|FPRC;

|DEFBUCLE borraliq;
#6#1;
;
empresa, " ";
emprefi, "z";
be;
NULL, liqborra;
|FIN;

|DEFBUCLE borrapat;
#16#1;
;
empresa, " ";
emprefi, "z";
be;
NULL, patborra;
|FIN;

|DEFBUCLE borraadj;
#9#1;
;
empresa, " ";
emprefi, "z";
be;
NULL, adjborra;
|FIN;

|DEFBUCLE borrainc;
#5#1;
3;
empresa, 0001, "S";
emprefi, 9999, "S";
be;
NULL, borrainci;
|FIN;

|DEFBUCLE borrapan;
#20#1;
;
empresa;
emprefi;
be;
NULL, borrapant;
|FIN;

|PROCESO recalcu0;
|ATRI I;
|PINTA 706, "     ";
|PINTA 706, empresa;
|PINTA 714, nombre;
|PINTA 757, nif;
|ATRI 0;

|ABRE #20; |PINPA #0#20; |CIERRA #20;

|PUSHV 0501 2380;
|ATRI P;
|CUADRO 1428 1652;
|PINTA 1529, " ESTOY CALCULANDO .... ";
|ATRI 0;

|ABRE #10;
#10#0 = empresa;
|LEE 040#10=;
|SI FSalida ! 0; |DDEFECTO #10; |FINSI;
|CIERRA #10;

|HAZ programas;

swcalcu = 0;
lininci = 0;

emprefi = empresa;

|BUCLE borraliq;  || Borra la liquidacion si ya la hubiera
|BUCLE borrapat;  || Borra patrimonio
|BUCLE borraadj;  || Borra liquidacion adjunta
|BUCLE borrainc;  || Borra incidencias
|BUCLE borrapan;  || Borra Fichero reliquid;

|ABRE #7;
#7#0 = empresa;
|LEE 040#7=;
|SI FSalida ! 0; |DDEFECTO #7; |FINSI;
|CIERRA #7;

minusva1 = #7#5;
minusva2 = #7#31;
minusva3 = #7#88;
minusva4 = #7#89;
minusva5 = #7#90;
minusva6 = #7#91;

individu = 0;
|SI #7#34 = "X";  individu = 1;  |FINSI;

|SI #10#01=1;|O #10#02=1;|O #10#03=1;|O #10#04=1;|O #10#05=1; |HAZ recalcu1; |FINSI;
|SI #10#06=1;|O #10#07=1;|O #10#08=1;|O #10#09=1;
 |O #10#10=1;|O #10#51=1;|O                                   |HAZ recalcu2; |FINSI;
|SI #10#11=1;|O #10#12=1;|O #10#13=1;|O #10#14=1;|O #10#15=1;
 |O #10#52=1;                                                 |HAZ recalcu3; |FINSI;
|SI #10#16=1;|O #10#17=1;|O #10#18=1;|O #10#19=1;|O #10#20=1; |HAZ recalcu4; |FINSI;
|SI #10#21=1;|O #10#22=1;|O #10#23=1;|O #10#24=1;|O #10#25=1; |HAZ recalcu5; |FINSI;
|SI #10#26=1;|O #10#27=1;|O #10#28=1;|O #10#29=1;             |HAZ recalcu6; |FINSI;
                                                              |HAZ recalcu8;
|SI #10#30=1;                                                 |HAZ recalcu7; |FINSI;
|POPV;

|SUB_EJECUTA "reliquid";
|FPRC;

|PROCESO programas;
progra_1  = #10#1;
progra_2  = #10#2;
progra_3  = #10#3;
progra_4  = #10#4;
progra_5  = #10#5;
progra_6  = #10#6;
progra_7  = #10#7;
progra_8  = #10#8;
progra_9  = #10#9;
progra_10 = #10#10;
progra_11 = #10#11;
progra_12 = #10#12;
progra_13 = #10#13;
progra_14 = #10#14;
progra_15 = #10#15;
progra_16 = #10#16;
progra_17 = #10#17;
progra_18 = #10#18;
progra_19 = #10#19;
progra_20 = #10#20;
progra_21 = #10#21;
progra_22 = #10#22;
progra_23 = #10#23;
progra_24 = #10#24;
progra_25 = #10#25;
progra_26 = #10#26;
progra_27 = #10#27;
progra_28 = #10#28;
progra_29 = #10#29;
progra_30 = #10#30;
progra_51 = #10#51;
progra_52 = #10#52;
|FPRC;
