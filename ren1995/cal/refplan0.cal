|FICHEROS;
    reeplan2 #02;

    reincreg #19;   || inc./dis. regulares
    reincire #20;   || inc./dis. irregulares
    reincpre #21;   || premios, sorteos, etc.
    reincpen #22;   || inc. pendientes
|FIN;

|VARIABLES;
    alfa1 = "";
    alfa2 = "";
    alfa3 = "";
    alfa4 = "";
    nume1 = 0;
    nume2 = 0;
    nume3 = 0;
    nume4 = 0;
    fech1 = @;
    fech2 = @;
    fech3 = @;
    fech4 = @;
    dia = 0;
    mes = 0;
    cuantas = 0;
    prov_fisca = "";
    prov_envio = "";
    total = 0;
    sihaymas = 0;
    &mas1 = 0;
    &mas2 = 0;
    &mas3 = 0;
    &mas4 = 0;
    &mas5 = 0;
    &mas6 = 0;
    &contribu = 0;
    &devuelta = 0;
    &has_cont = 0;
    &impre = "";
    &inicio = "";
    &fin = "";
|FIN;

****************************************************************************
          INCREMENTOS/DISMINUCIONES PATRIMONIALES
****************************************************************************

||***********************incrementos pendientes

|PROCESO incpen1;
    cuantas = cuantas + 1;
|SI cuantas [ 3;
        nume1 = cuantas -  1;   #2nume1 = "PN";        || 'cla' ¨...?
        nume1 = cuantas +  2;   #2nume1 = #22#2;       || perceptor
        nume1 = cuantas +  5;   #2nume1 = #22#4;       || declaracion
        nume1 = cuantas +  8;   #2nume1 = #22#5;       || titularidad
        nume1 = cuantas + 11;   #2nume1 = #22#6;       || a¤os usuf.
        nume1 = cuantas + 14;   #2nume1 = #22#7;       || <T>
        nume1 = cuantas + 17;   #2nume1 = #22#8;       || <C>
        nume1 = cuantas + 20;   #2nume1 = #22#9;       || <1>
        nume1 = cuantas + 23;   #2nume1 = #22#10;      || <2>
        nume1 = cuantas + 26;   #2nume1 = #22#11;      || <3>
        nume1 = cuantas + 29;   #2nume1 = #22#12;      || <4>
        nume1 = cuantas + 32;   #2nume1 = #22#13;      || descripcion
        nume1 = cuantas + 35;   #2nume1 = #22#27;      || tipo
        nume1 = cuantas + 38;   #2nume1 = #22#14;      || valor venta
        nume1 = cuantas + 41;   #2nume1 = #22#15;      || valor compra
        nume1 = cuantas + 44;   #2nume1 = #22#17;      || a¤os
        nume1 = cuantas + 47;   #2nume1 = #22#19;      || reinversion
        nume1 = cuantas + 50;   #2nume1 = 0;           || a¤o 1992
        nume1 = cuantas + 53;   #2nume1 = "";          || ME
        nume1 = cuantas + 56;   #2nume1 = #22#22;      || valoracion
        nume1 = cuantas + 59;   #2nume1 = #22#25+#22#26;    || retencion
|SINO;
        sihaymas = 1;
|FINSI;
|FPRC;

|DEFBUCLE lee_incpen;
 #22#1;
 ;
 contribu,  1;
 contribu, 99;
 e;
 NULL, incpen1;
|FIN;

||***********************premios, sorteos, etc.

|PROCESO incpre1;
    cuantas = cuantas + 1;
|SI cuantas [ 3;
        nume1 = cuantas -  1;   #2nume1 = "PR";        || 'cla' ¨...?
        nume1 = cuantas +  2;   #2nume1 = #21#2;       || perceptor
        nume1 = cuantas +  5;   #2nume1 = #21#9;       || declaracion
        nume1 = cuantas +  8;   #2nume1 = "";          || titularidad
        nume1 = cuantas + 11;   #2nume1 = 0;           || a¤os usuf.
        nume1 = cuantas + 14;   #2nume1 = #21#10;      || <T>
        nume1 = cuantas + 17;   #2nume1 = #21#11;      || <C>
        nume1 = cuantas + 20;   #2nume1 = #21#12;      || <1>
        nume1 = cuantas + 23;   #2nume1 = #21#13;      || <2>
        nume1 = cuantas + 26;   #2nume1 = #21#14;      || <3>
        nume1 = cuantas + 29;   #2nume1 = #21#15;      || <4>
        nume1 = cuantas + 32;   #2nume1 = #21#5;       || descripcion
        nume1 = cuantas + 35;   #2nume1 = "";          || tipo
        nume1 = cuantas + 38;   #2nume1 = 0;           || valor venta
        nume1 = cuantas + 41;   #2nume1 = 0;           || valor compra
        nume1 = cuantas + 44;   #2nume1 = 0;           || a¤os
        nume1 = cuantas + 47;   #2nume1 = 0;           || reinversion
        nume1 = cuantas + 50;   #2nume1 = 0;           || a¤o 1992
        nume1 = cuantas + 53;   #2nume1 = #21#4;       || ME
        nume1 = cuantas + 56;   #2nume1 = #21#6;       || valoracion
        nume1 = cuantas + 59;   #2nume1 = #21#7;       || retencion
|SINO;
        sihaymas = 1;
|FINSI;
|FPRC;

|DEFBUCLE lee_incpre;
 #21#1;
 ;
 contribu,  1;
 contribu, 99;
 e;
 NULL, incpre1;
|FIN;

||***********************incrementos irregulares

|PROCESO incire1;
    cuantas = cuantas + 1;
|SI cuantas [ 3;
        nume1 = cuantas -  1;   #2nume1 = "IR";        || 'cla' ¨...?
        nume1 = cuantas +  2;   #2nume1 = #20#2;       || perceptor
        nume1 = cuantas +  5;   #2nume1 = #20#4;       || declaracion
        nume1 = cuantas +  8;   #2nume1 = #20#5;       || titularidad
        nume1 = cuantas + 11;   #2nume1 = #20#6;       || a¤os usuf.
        nume1 = cuantas + 14;   #2nume1 = #20#7;       || <T>
        nume1 = cuantas + 17;   #2nume1 = #20#8;       || <C>
        nume1 = cuantas + 20;   #2nume1 = #20#9;       || <1>
        nume1 = cuantas + 23;   #2nume1 = #20#10;      || <2>
        nume1 = cuantas + 26;   #2nume1 = #20#11;      || <3>
        nume1 = cuantas + 29;   #2nume1 = #20#12;      || <4>
        nume1 = cuantas + 32;   #2nume1 = #20#13;      || descripcion
        nume1 = cuantas + 35;   #2nume1 = #20#26;      || tipo
        nume1 = cuantas + 38;   #2nume1 = #20#14;      || valor venta
        nume1 = cuantas + 41;   #2nume1 = #20#15;      || valor compra
    |SI #20#14 > #20#15;      || incremento/disminucion
            nume1 = cuantas + 44;   #2nume1 = #20#18;      || a¤os
            nume1 = cuantas + 47;   #2nume1 = #20#22;      || reinversion
            nume1 = cuantas + 50;   #2nume1 = #20#24;      || a¤o 1992
    |SINO;
            nume1 = cuantas + 44;   #2nume1 = #20#19;      || a¤os
            nume1 = cuantas + 47;   #2nume1 = 0;           || reinversion
            nume1 = cuantas + 50;   #2nume1 = #20#25;      || a¤o 1992
    |FINSI;
        nume1 = cuantas + 53;   #2nume1 = "";          || ME
        nume1 = cuantas + 56;   #2nume1 = 0;           || valoracion
        nume1 = cuantas + 59;   #2nume1 = 0;           || retencion
|SINO;
        sihaymas = 1;
|FINSI;
|FPRC;

|DEFBUCLE lee_incire;
 #20#1;
 ;
 contribu,  1;
 contribu, 99;
 e;
 NULL, incire1;
|FIN;

||***********************incrementos regulares

|PROCESO increg0;
    sihaymas = 0;
    cuantas = 0;
|FPRC;

|PROCESO increg1;
    cuantas = cuantas + 1;
|SI cuantas [ 3;
        nume1 = cuantas -  1;   #2nume1 = "RE";        || 'cla' ¨...?
        nume1 = cuantas +  2;   #2nume1 = #19#2;       || perceptor
        nume1 = cuantas +  5;   #2nume1 = #19#4;       || declaracion
        nume1 = cuantas +  8;   #2nume1 = #19#5;       || titularidad
        nume1 = cuantas + 11;   #2nume1 = #19#6;       || a¤os usuf.
        nume1 = cuantas + 14;   #2nume1 = #19#7;       || <T>
        nume1 = cuantas + 17;   #2nume1 = #19#8;       || <C>
        nume1 = cuantas + 20;   #2nume1 = #19#9;       || <1>
        nume1 = cuantas + 23;   #2nume1 = #19#10;      || <2>
        nume1 = cuantas + 26;   #2nume1 = #19#11;      || <3>
        nume1 = cuantas + 29;   #2nume1 = #19#12;      || <4>
        nume1 = cuantas + 32;   #2nume1 = #19#13;      || descripcion
        nume1 = cuantas + 35;   #2nume1 = "";          || tipo
        nume1 = cuantas + 38;   #2nume1 = #19#14;      || valor venta
        nume1 = cuantas + 41;   #2nume1 = #19#15;      || valor compra
        nume1 = cuantas + 44;   #2nume1 = 0;           || a¤os
        nume1 = cuantas + 47;   #2nume1 = 0;           || reinversion
        total = 0;
    |SI #19#17 ! 0;  total = #19#17;  |FINSI;
    |SI #19#21 ! 0;  total = #19#21;  |FINSI;
        nume1 = cuantas + 50;   #2nume1 = total;       || a¤o 1992
        nume1 = cuantas + 53;   #2nume1 = "";          || ME
        nume1 = cuantas + 56;   #2nume1 = 0;           || valoracion
        nume1 = cuantas + 59;   #2nume1 = 0;           || retencion
|SINO;
        sihaymas = 1;
|FINSI;
|FPRC;

|DEFBUCLE lee_increg;
 #19#1;
 ;
 contribu,  1;
 contribu, 99;
 e;
 increg0, increg1;
|FIN;

|PROCESO carga_2;        || incrementos patrimoniales
|BUCLE lee_increg;
|SI sihaymas = 0;   |BUCLE lee_incire;  |FINSI;
|SI sihaymas = 0;   |BUCLE lee_incpre;  |FINSI;
|SI sihaymas = 0;   |BUCLE lee_incpen;  |FINSI;
    mas2 = sihaymas;
|FPRC;

|PROCESO graba_2;
|DELINDEX #2;
|ABRE #2;
|GRABA 020#2n;
|CIERRA #2;
|FPRC;

****************************************************************************
    PROCESOS DE LECTURA
****************************************************************************

|PROGRAMA;
|DDEFECTO #2;
|HAZ carga_2;                 || incrementos patrimoniales
|HAZ graba_2;
|CORRE "regplan0.run";
|FPRO;
