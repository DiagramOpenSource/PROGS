|FICHEROS;
   reliquip #10;
   redatcon #1;
   retotren #2;
   reliquid #11;
|FIN;

|VARIABLES;
   hola      = "     Tipo de Renta ERRONEO";
   ante1     = "";
   ante2     = "";
   ante3     = "";
   ante4     = "";
   ante5     = "";
   ante6     = "";
   ante7     = "";
   ante11     = "";
   ante12     = "";
   ante13     = "";
   ante14     = "";
   ante15     = "";
   ante16     = "";
   ante17     = "";
   ante18     = "";
   tecla     = "";
   FEstado   = 0;

   f1        = "823";
   f2        = "824";
   f3        = "825";
   f4        = "826";
   f5        = "827";
   f6        = "828";
   f7        = "829";

   x         = 0;
   joder     = 0;
   pepe      = 0;

   &incisino = "";
   &modo     = 0;
   &empresa  = 0;
   &emprefi  = 0;
   &nombre   = "";
   &nombred  = "";
   &lininci  = 0;
   &swcalcu  = 0;
   &minusva1 = "";
   &minusva2 = "";
   &minusva3 = "";
   &minusva4 = "";
   &minusva5 = "";
   &minusva6 = "";
   &declara  = "";
   &tipol    = "";
   &individu = 0;
   &acceso   = 0;
   &tippar    = 0;
   &parte1    = 0.0000;
   &parte2    = 0.0000;
   &muerto    = "";
   &fecpar    = @;
|FIN;

|PROGRAMA;
  |ABRE #10;
  |ABRE #11;
  |PINPA #0#10;
  |PINDA #0#10;
  |HAZ pidedato;
  |CIERRA #10;
  |CIERRA #11;
 |FPRO;

|PROCESO pidedato;
  #11#0 = empresa;
  |LEE 110#11=;
  FEstado = FSalida;
  |SI FEstado ! 0;
      |DDEFECTO #11;
      #11#0 = empresa;
      |GRABA 121#11n;
  |FINSI;
  |PARA x = 0;  |SI x [ 43;  |HACIENDO x = x + 1;
        #10x = #11x;
  |SIGUE;
  #10#41 = #10#8;
  #10#42 = #10#9 + #10#10 + #10#11 + #10#12 + #10#13 + #10#14;
  #10#43 = " ";
  |HAZ espaci;
  |PINDA #0#10;

  |ENDATOS #2#10;

  |SI FSalida = 0;
      #10#0 = empresa;
      |ABRE #1;
      #1#0 = #10#0;
      |LIBERA #1;
      |LEE 110#1=;
      |SI FSalida = 0;
          #1#103 = #10#1; #1#104 = #10#2; #1#105 = #10#3; #1#106 = #10#4;
          #1#107 = #10#5; #1#108 = #10#6; #1#109 = #10#7;

          #1#110 = #10#15; #1#111 = #10#16; #1#112 = #10#17; #1#113 = #10#18;
          #1#114 = #10#19; #1#115 = #10#20; #1#116 = #10#21;

          #1#117 = #10#22; #1#118 = #10#23; #1#119 = #10#24; #1#120 = #10#25;
          #1#121 = #10#26; #1#122 = #10#27; #1#123 = #10#28;

          #1#140 = #10#29; #1#141 = #10#30;
          #1#194 = #10#31; #1#195 = #10#32; #1#196 = #10#33; #1#197 = #10#34;

          #1#138 = "N";    #1#139 = "N";
          #1#198 = "N"; #1#199 = "N"; #1#200 = "N"; #1#201 = "N";

          #1#124 = "N"; #1#125 = "N"; #1#126 = "N"; #1#127 = "N";
          #1#128 = "N"; #1#129 = "N"; #1#130 = "N";

          #1#131 = "N"; #1#132 = "N"; #1#133 = "N"; #1#134 = "N";
          #1#135 = "N"; #1#136 = "N"; #1#137 = "N";

          #1#34 = ""; #1#35 = ""; #1#36 = "";
          |CONFI "2400SDesea dejar la RENTA como PREPARADA: ";
          #1#142 = "S";
          |SI FSalida ! 0; #1#142 = "N"; |FINSI;
          |GRABA 121#1a;
      |FINSI;
      |PARA x = 0;  |SI x [ 43;  |HACIENDO x = x + 1;
            #11x = #10x;
      |SIGUE;
      |GRABA 121#11a;
  |FINSI;
|FPRC;

|PROCESO ventana; |TIPO 0;
|SI FSalida ! 9; |ACABA; |FINSI;

x = Campo;
|SI x ] 29; x = x + 1; |FINSI;
|SI x ] 36; x = x + 1; |FINSI;
x = x $ 7;

declara = "A";
|SI x = 2;  declara = "T";  |FINSI;
|SI x = 3;  declara = "C";  |FINSI;
|SI x = 4;  declara = "1";  |FINSI;
|SI x = 5;  declara = "2";  |FINSI;
|SI x = 6;  declara = "3";  |FINSI;
|SI x = 0;  declara = "4";  |FINSI;

|PUSHV 0501 2380;
|CUADRO 1119 1761;
|ATRI R;

|SI Campo = 43;
    |PINTA 1220, " <F3> Comparacion Declaraciones          ";
    |PINTA 1320, " <F5> Resumen Incidencias                ";
    |PINTA 1420, "                                         ";
    |PINTA 1520, "                                         ";
    |PINTA 1620, "                                         ";
    declara = "";
|FINSI;

|SI declara ! "";
    |PINTA 1420, " <F3> Comparacion Declaraciones          ";
    |PINTA 1620, " <F5> Resumen Incidencias                ";
|FINSI;

|SI declara = "A";
    |PINTA 1220, " <F1> Liquidacion Completa Conjunta      ";
    |PINTA 1320, " <F2> Resumen Liquidacion  Conjunta      ";
    |PINTA 1520, " <F5> Resumen Incidencias                ";
    |PINTA 1620, "                                         ";
|FINSI;

|SI declara = "T";
    |PINTA 1220, " <F1> Liquidacion Completa   Titular     ";
    |PINTA 1320, " <F2> Resumen Liquidacion    Titular     ";
    |PINTA 1520, " <F4> Liquidacion Patrimonio Titular     ";
|FINSI;

|SI declara = "C";
    |PINTA 1220, " <F1> Liquidacion Completa   Conyuge     ";
    |PINTA 1320, " <F2> Resumen Liquidacion    Conyuge     ";
    |PINTA 1520, " <F4> Liquidacion Patrimonio Conyuge     ";
|FINSI;

|SI declara = "1";
    |PINTA 1220, " <F1> Liquidacion Completa   1§ Familiar ";
    |PINTA 1320, " <F2> Resumen Liquidacion    1§ Familiar ";
    |PINTA 1520, " <F4> Liquidacion Patrimonio 1§ Familiar ";
|FINSI;

|SI declara = "2";
    |PINTA 1220, " <F1> Liquidacion Completa   2§ Familiar ";
    |PINTA 1320, " <F2> Resumen Liquidacion    2§ Familiar ";
    |PINTA 1520, " <F4> Liquidacion Patrimonio 2§ Familiar ";
|FINSI;

|SI declara = "3";
    |PINTA 1220, " <F1> Liquidacion Completa   3§ Familiar ";
    |PINTA 1320, " <F2> Resumen Liquidacion    3§ Familiar ";
    |PINTA 1520, " <F4> Liquidacion Patrimonio 3§ Familiar ";
|FINSI;

|SI declara = "4";
    |PINTA 1220, " <F1> Liquidacion Completa   4§ Familiar ";
    |PINTA 1320, " <F2> Resumen Liquidacion    4§ Familiar ";
    |PINTA 1520, " <F4> Liquidacion Patrimonio 4§ Familiar ";
|FINSI;

|ATRI 0;

|LEETECLA tecla;
|POPV;

FSalida = 0;

f1    = "";
f2    = "";
f3    = "";
f4    = "";
f5    = "";

|SI declara ! ""; f1    = &255 + "823"; |FINSI;
|SI declara ! ""; f2    = &255 + "824"; |FINSI;
                  f3    = &255 + "825";
|SI declara ! "A"; |Y declara ! ""; f4    = &255 + "826"; |FINSI;
                  f5    = &255 + "827";

|SI tecla = f1; |HAZ funciones; |FINSI;
|SI tecla = f2; |HAZ funciones; |FINSI;
|SI tecla = f3; |HAZ funciones; |FINSI;
|SI tecla = f4; |HAZ funciones; |FINSI;
|SI tecla = f5; |HAZ funciones; |FINSI;
|ERROR;
|FPRC;

|PROCESO funciones;
  |SI tecla   = f1; |HAZ antesren; |SUB_EJECUTA "retotren.run"; |FINSI;
  |SI tecla   = f2; |HAZ antesren; |SUB_EJECUTA "rerenliq.run"; |FINSI;
  |SI tecla   = f3;                |SUB_EJECUTA "recomdec.run"; |FINSI;
  |SI tecla   = f4; |HAZ antesren; |SUB_EJECUTA "retotpat.run"; |FINSI;
  |SI tecla   = f5;                |SUB_EJECUTA "reincide.run"; |FINSI;
|FPRC;

|PROCESO antesren;
|ABRE #1;
#1#0 = empresa;
|LEE 040#1=;
|SI FSalida ! 0; |DDEFECTO #1; |FINSI;
|CIERRA #1;

|SI #10#43 = "I"; tipol = "INDIVIDUAL / "; |FINSI;
|SI #10#43 = "S"; tipol = "SEPARADA   / "; |FINSI;

|SI declara = "A";
    nombred = nombre;
    tipol   = "CONJUNTA   / ";
    |SI #10#1 = "A"; tipol = tipol + "ABREVIADA";    |FINSI;
    |SI #10#1 = "S"; tipol = tipol + "SIMPLIFICADA"; |FINSI;
    |SI #10#1 = "O"; tipol = tipol + "ORDINARIA";    |FINSI;
    |SI #10#1 = "o"; tipol = tipol + "ORDINARIA";    |FINSI;
|FINSI;

|SI declara = "T";
    nombred   = nombre;
    |SI #10#2 = "A"; tipol = tipol + "ABREVIADA";    |FINSI;
    |SI #10#2 = "S"; tipol = tipol + "SIMPLIFICADA"; |FINSI;
    |SI #10#2 = "O"; tipol = tipol + "ORDINARIA";    |FINSI;
    |SI #10#2 = "o"; tipol = tipol + "ORDINARIA";    |FINSI;
|FINSI;

|SI declara = "C";
    nombred   = #1#28;
    |SI #10#3 = "A"; tipol = tipol + "ABREVIADA";    |FINSI;
    |SI #10#3 = "S"; tipol = tipol + "SIMPLIFICADA"; |FINSI;
    |SI #10#3 = "O"; tipol = tipol + "ORDINARIA";    |FINSI;
    |SI #10#3 = "o"; tipol = tipol + "ORDINARIA";    |FINSI;
|FINSI;

|SI declara = "1";
    pepe = 57 + #1#98; nombred = #1pepe;
    |SI #10#4 = "A"; tipol = tipol + "ABREVIADA";    |FINSI;
    |SI #10#4 = "S"; tipol = tipol + "SIMPLIFICADA"; |FINSI;
    |SI #10#4 = "O"; tipol = tipol + "ORDINARIA";    |FINSI;
    |SI #10#4 = "o"; tipol = tipol + "ORDINARIA";    |FINSI;
|FINSI;

|SI declara = "2";
    pepe = 57 + #1#99; nombred = #1pepe;
    |SI #10#5 = "A"; tipol = tipol + "ABREVIADA";    |FINSI;
    |SI #10#5 = "S"; tipol = tipol + "SIMPLIFICADA"; |FINSI;
    |SI #10#5 = "O"; tipol = tipol + "ORDINARIA";    |FINSI;
    |SI #10#5 = "o"; tipol = tipol + "ORDINARIA";    |FINSI;
|FINSI;

|SI declara = "3";
    pepe = 57 + #1#100; nombred = #1pepe;
    |SI #10#6 = "A"; tipol = tipol + "ABREVIADA";    |FINSI;
    |SI #10#6 = "S"; tipol = tipol + "SIMPLIFICADA"; |FINSI;
    |SI #10#6 = "O"; tipol = tipol + "ORDINARIA";    |FINSI;
    |SI #10#6 = "o"; tipol = tipol + "ORDINARIA";    |FINSI;
|FINSI;

|SI declara = "4";
    pepe = 57 + #1#101; nombred = #1pepe;
    |SI #10#7 = "A"; tipol = tipol + "ABREVIADA";    |FINSI;
    |SI #10#7 = "S"; tipol = tipol + "SIMPLIFICADA"; |FINSI;
    |SI #10#7 = "O"; tipol = tipol + "ORDINARIA";    |FINSI;
    |SI #10#7 = "o"; tipol = tipol + "ORDINARIA";    |FINSI;
|FINSI;
|FPRC;

|PROCESO espaci;
  |ABRE #2;
  #2#0 = empresa;
  #2#141 = "A";
  |LIBERA #2;
  |LEE 110#2=;
  ante1 = #10#1;
  ante2 = #10#2;
  ante3 = #10#3;
  ante4 = #10#4;
  ante5 = #10#5;
  ante6 = #10#6;
  ante7 = #10#7;
  |SI FSalida ! 0;
      #10#1 = " ";
      |CAMPO_MODIFICA #10#1,  1, "N";
      |CAMPO_MODIFICA #10#15, 1, "N";
      |CAMPO_MODIFICA #10#22, 1, "N";
  |FINSI;
  #2#0 = empresa;
  #2#141 = "T";
  |LIBERA #2;
  |LEE 110#2=;
  |SI FSalida ! 0;
      #10#2 = " ";
      |CAMPO_MODIFICA #10#2,  1, "N";
      |CAMPO_MODIFICA #10#16, 1, "N";
      |CAMPO_MODIFICA #10#23, 1, "N";
  |FINSI;
  #2#0 = empresa;
  #2#141 = "C";
  |LIBERA #2;
  |LEE 110#2=;
  |SI FSalida ! 0;
      #10#3 = " ";
      |CAMPO_MODIFICA #10#3, 1, "N";
      |CAMPO_MODIFICA #10#17, 1, "N";
      |CAMPO_MODIFICA #10#24, 1, "N";
  |FINSI;
  #2#0 = empresa;
  #2#141 = "1";
  |LIBERA #2;
  |LEE 110#2=;
  |SI FSalida ! 0;
      #10#4 = " ";
      |CAMPO_MODIFICA #10#4, 1, "N";
      |CAMPO_MODIFICA #10#18, 1, "N";
      |CAMPO_MODIFICA #10#25, 1, "N";
  |FINSI;
  #2#0 = empresa;
  #2#141 = "2";
  |LIBERA #2;
  |LEE 110#2=;
  |SI FSalida ! 0;
      #10#5 = " ";
      |CAMPO_MODIFICA #10#5, 1, "N";
      |CAMPO_MODIFICA #10#19, 1, "N";
      |CAMPO_MODIFICA #10#26, 1, "N";
  |FINSI;
  #2#0 = empresa;
  #2#141 = "3";
  |LIBERA #2;
  |LEE 110#2=;
  |SI FSalida ! 0;
      #10#6 = " ";
      |CAMPO_MODIFICA #10#6, 1, "N";
      |CAMPO_MODIFICA #10#20, 1, "N";
      |CAMPO_MODIFICA #10#27, 1, "N";
  |FINSI;
  #2#0 = empresa;
  #2#141 = "4";
  |LIBERA #2;
  |LEE 110#2=;
  |SI FSalida ! 0;
      #10#7 = " ";
      |CAMPO_MODIFICA #10#7, 1, "N";
      |CAMPO_MODIFICA #10#21, 1, "N";
      |CAMPO_MODIFICA #10#28, 1, "N";
  |FINSI;
  |LIBERA #2;
  ante11 = #10#1;
  ante12 = #10#2;
  ante13 = #10#3;
  ante14 = #10#4;
  ante15 = #10#5;
  ante16 = #10#6;
  ante17 = #10#7;
  |CIERRA #2;
  ante18 = #10#43;
|FPRC;

|PROCESO borrando;
  |SI ante18 = "C";  |Y #10#43 = "I";
      #10#43 = ante18;
      |PINTA #10#43;
      |ERROR;
      |ACABA;
  |FINSI;
  |SI ante18 = "S";  |Y #10#43 = "I";
      #10#43 = ante18;
      |PINTA #10#43;
      |ERROR;
      |ACABA;
  |FINSI;
  |SI ante18 = "I"; |Y #10#43 = "C";
      #10#43 = ante18;
      |PINTA #10#43;
      |ERROR;
  |FINSI;
  |SI #10#43 = "C";
      #10#2 = " ";   #10#3 = " ";  #10#4 = " ";  #10#5 = " ";
      #10#6 = " ";   #10#7 = " ";
      |PINTA #10#2;  |PINTA #10#3; |PINTA #10#4; |PINTA #10#5;
      |PINTA #10#6;  |PINTA #10#7;
  |FINSI;
  |SI #10#43 = "S";
      #10#1 = " ";   |PINTA #10#1;
  |FINSI;
  |SI #10#43 = "I";
      #10#1 = " ";   #10#3 = " ";  #10#4 = " ";  #10#5 = " ";
      #10#6 = " ";   #10#7 = " ";
      |PINTA #10#1;  |PINTA #10#3; |PINTA #10#4; |PINTA #10#5;
      |PINTA #10#6;  |PINTA #10#7;
  |FINSI;
|FPRC;

|PROCESO ordsim1;
  |SI ante1 = "O";
      |SI #10#1 = "S"; |O #10#1 = "A";
          #10#1 = "O";
          |PINTA #10#1;
      |FINSI;
  |FINSI;
  |SI ante1 = " "; |Y #10#1 ! " ";
      |SI ante11 ! #10#1; |Y #10#1 ! "o";
          #10#1 = ante11;
          |PINTA #10#1;
          |MENSA hola;
      |FINSI;
  |FINSI;
|FPRC;

|PROCESO ordsim2;
  |SI ante2 = "O";
      |SI #10#2 = "S"; |O #10#2 = "A";
          #10#2 = "O";
          |PINTA #10#2;
      |FINSI;
  |FINSI;
  |SI ante2 = " "; |Y #10#2 ! " ";
      |SI ante12 ! #10#2; |Y #10#2 ! "o";
          #10#2 = ante12;
          |PINTA #10#2;
          |MENSA hola;
      |FINSI;
  |FINSI;
|FPRC;

|PROCESO ordsim3;
  |SI ante3 = "O";
      |SI #10#3 = "S"; |O #10#3 = "A";
          #10#3 = "O";
          |PINTA #10#3;
      |FINSI;
  |FINSI;
  |SI ante3 = " "; |Y #10#3 ! " ";
      |SI ante13 ! #10#3; |Y #10#3 ! "o";
          #10#3 = ante13;
          |PINTA #10#3;
          |MENSA hola;
      |FINSI;
  |FINSI;
|FPRC;

|PROCESO ordsim4;
  |SI ante4 = "O";
      |SI #10#4 = "S"; |O #10#4 = "A";
          #10#4 = "O";
         |PINTA #10#4;
      |FINSI;
  |FINSI;
  |SI ante4 = " "; |Y #10#4 ! " ";
      |SI ante14 ! #10#4; |Y #10#4 ! "o";
          #10#4 = ante14;
          |PINTA #10#4;
          |MENSA hola;
      |FINSI;
  |FINSI;
|FPRC;

|PROCESO ordsim5;
  |SI ante5 = "O";
      |SI #10#5 = "S"; |O #10#5 = "A";
          #10#5 = "O";
          |PINTA #10#5;
      |FINSI;
  |FINSI;
  |SI ante5 = " "; |Y #10#5 ! " ";
      |SI ante15 ! #10#5; |Y #10#5 ! "o";
          #10#5 = ante15;
          |PINTA #10#5;
          |MENSA hola;
      |FINSI;
  |FINSI;
|FPRC;

|PROCESO ordsim6;
  |SI ante6 = "O";
      |SI #10#6 = "S"; |O #10#6 = "A";
          #10#6 = "O";
          |PINTA #10#6;
      |FINSI;
  |FINSI;
  |SI ante6 = " "; |Y #10#6 ! " ";
      |SI ante16 ! #10#6; |Y #10#6 ! "o";
          #10#6 = ante16;
          |PINTA #10#6;
          |MENSA hola;
      |FINSI;
  |FINSI;
|FPRC;

|PROCESO ordsim7;
  |SI ante7 = "O";
      |SI #10#7 = "S"; |O #10#7 = "A";
          #10#7 = "O";
          |PINTA #10#7;
      |FINSI;
  |FINSI;
  |SI ante7 = " "; |Y #10#7 ! " ";
      |SI ante17 ! #10#7; |Y #10#7 ! "o";
          #10#7 = ante17;
          |PINTA #10#7;
          |MENSA hola;
      |FINSI;
  |FINSI;
|FPRC;
