|FICHEROS;
   rerendtr #2;
   rew00001 #99;
|FIN;

|INCLUYE i_varadj;

|| **************************************************************************
||                           PROCESOS IMPRESION
|| **************************************************************************

|PROCESO cabe1;
cabecera = "A) RENDIMIENTOS DEL TRABAJO (RETRIBUCIONES DINERARIAS)";
|IMPRIME cabecera;

cabecera = ""; |IMPRIME cabecera;

cabecera = "Perceptor    Persona o entidad pagadora     Retenciones  Importe integro";
|IMPRIME cabecera;
cabecera = "------------------------------------------------------------------------";
|IMPRIME cabecera;
sw21     = 1;
linea = linea + 4; |HAZ linea;
|FPRC;

|PROCESO cabe2;
|SI sw21 = 1;
    cabecera = "";
    |IMPRIME cabecera;
    |IMPRIME cabecera;
    linea = linea + 2; |HAZ linea;
|FINSI;

cabecera = "A) RENDIMIENTOS DEL TRABAJO (RETRIBUCIONES EN ESPECIE)";
|IMPRIME cabecera;
cabecera = ""; |IMPRIME cabecera;

cabecera = "Perceptor    Concepto              Valoracion   I. a cuenta Impor.integro";
|IMPRIME cabecera;
cabecera = "-------------------------------------------------------------------------";
|IMPRIME cabecera;

sw22     = 1;
linea = linea + 4; |HAZ linea;
|FPRC;

|PROCESO impre_01;
|SI swporta = 0; |HAZ cabecera; |FINSI;

|SI sw_fich = 21; |Y sw21 = 0; |HAZ cabe1; |FINSI;
|SI sw_fich = 22; |Y sw22 = 0; |HAZ cabe2; |FINSI;

|IMPRIME varalf; linea = linea + 1; |HAZ linea;
|FPRC;

|PROCESO carga_01_1;
|SI #2#7 ! 0; |O #2#9 ! 0;
    conta = conta + 1;
    |SI conta < 4; |ACABA; |FINSI;

    |SI conta = 4;
       sw_fich = 21;
       varalf = perce;
       varalf = varalf + " " + #2#4;
       importe = #2#9;   |HAZ importe;
       varalf  = varalf + " " + importe;
       importe = #2#7;   |HAZ importe;
       varalf  = varalf + "    " + importe;
       |ACABA;
    |FINSI;
    sw_fich   = 21;
    |SI conta = 5; |HAZ impre_01; |FINSI;
    varalf = perce;
    varalf = varalf + " " + #2#4;
    importe = #2#9;   |HAZ importe;
    varalf  = varalf + " " + importe;
    importe = #2#7;   |HAZ importe;
    varalf  = varalf + "    " + importe; |HAZ impre_01;
|FINSI;
|FPRC;

|PROCESO carga_01_2;
|SI #2#15 ! 0; |O #2#16 ! 0;
    conta = conta + 1;
    |SI conta < 4; |ACABA; |FINSI;

    |SI conta = 4;
        sw_fich = 22;
        varalf = #2#14 % 120;
        varalf = perce + " " + varalf;
        importe = #2#15;                      |HAZ importe;
        varalf  = varalf + " " + importe;
        importe = #2#16;                      |HAZ importe;
        varalf  = varalf + " " + importe;
        a       = #2#15 + #2#16;
        importe = a;                          |HAZ importe;
        varalf  = varalf + " " + importe;
        |ACABA;
    |FINSI;

    sw_fich = 22;
    |SI conta = 5;  |HAZ impre_01; |FINSI;
    varalf = #2#14 % 120;
    varalf = perce + " " + varalf;
    importe = #2#15;                     |HAZ importe;
    varalf  = varalf + " " + importe;
    importe = #2#16;                     |HAZ importe;
    varalf  = varalf + " " + importe;
    a       = #2#15 + #2#16;
    importe = a;                         |HAZ importe;
    varalf  = varalf + " " + importe;    |HAZ impre_01;
|FINSI;
|FPRC;

|PROCESO rendtrab1;
|SI #2#28 = "X"; |ACABA; |FINSI;

|SI #99#1 = "A"; perce = #2#3; |SINO; perce = "TITULAR"; |FINSI;

|SI #99#1 = "A";     || Si es conjunta
    |HAZ carga_01_1;
    |ACABA;
|FINSI;

|SI #99#1 = "T";     || Si es Titular
    |SI #2#2 = "T"; |HAZ carga_01_1; |ACABA; |FINSI;
|FINSI;

|SI #99#1 = "C";     || Si es Conyuge
    |SI #2#2 = "C"; |HAZ carga_01_1; |ACABA; |FINSI;
|FINSI;

|SI #99#1 = "1";     || Si es 1§ Familiar
    |SI #2#2 = "1"; |HAZ carga_01_1; |ACABA; |FINSI;
|FINSI;

|SI #99#1 = "2";     || Si es 1§ Familiar
    |SI #2#2 = "2"; |HAZ carga_01_1; |ACABA; |FINSI;
|FINSI;

|SI #99#1 = "3";     || Si es 3§ Familiar
    |SI #2#2 = "3"; |HAZ carga_01_1; |ACABA; |FINSI;
|FINSI;

|SI #99#1 = "4";     || Si es 4§ Familiar
    |SI #2#2 = "4"; |HAZ carga_01_1; |ACABA; |FINSI;
|FINSI;
|FPRC;

|DEFBUCLE rerendt1;
#2#1;
;
#99#0, 01;
#99#0, 99;
e;
NULL, rendtrab1;
|FIN;

|PROCESO rendtrab2;
|SI #2#28 = "X"; |ACABA; |FINSI;

|SI #99#1 = "A"; perce = #2#3; |SINO; perce = "TITULAR"; |FINSI;

|SI #99#1 = "A";     || Si es conjunta
    |HAZ carga_01_2;
    |ACABA;
|FINSI;

|SI #99#1 = "T";     || Si es Titular
    |SI #2#2 = "T"; |HAZ carga_01_2; |ACABA; |FINSI;
|FINSI;

|SI #99#1 = "C";     || Si es Conyuge
    |SI #2#2 = "C"; |HAZ carga_01_2; |ACABA; |FINSI;
|FINSI;

|SI #99#1 = "1";     || Si es 1§ Familiar
    |SI #2#2 = "1"; |HAZ carga_01_2; |ACABA; |FINSI;
|FINSI;

|SI #99#1 = "2";     || Si es 1§ Familiar
    |SI #2#2 = "2"; |HAZ carga_01_2; |ACABA; |FINSI;
|FINSI;

|SI #99#1 = "3";     || Si es 3§ Familiar
    |SI #2#2 = "3"; |HAZ carga_01_2; |ACABA; |FINSI;
|FINSI;

|SI #99#1 = "4";     || Si es 4§ Familiar
    |SI #2#2 = "4"; |HAZ carga_01_2; |ACABA; |FINSI;
|FINSI;
|FPRC;

|DEFBUCLE rerendt2;
#2#1;
;
#99#0, 01;
#99#0, 99;
e;
NULL, rendtrab2;
|FIN;

|PROCESO readjor1;
conta = 0; |BUCLE rerendt1;
conta = 0; |BUCLE rerendt2;
|FPRC;
