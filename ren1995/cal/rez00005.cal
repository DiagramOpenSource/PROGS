|FICHEROS;
   rez00005 #0;
   reacceso #1;
|FIN;

|VARIABLES;
    &que_hacer = 0;
    &emp_actu  = 0;
    &emp_nuev  = 0;
    &empresa   = 0;
|FIN;

|PROCESO nuevo; |TIPO 0;
|ABRE #1;
#1#0 = #0#2;
|LEE 040#1=;
|SI FSalida = 0;
    |MENAV "      El Codigo introducido ya existe.";
    |ERROR;
|FINSI;
|CIERRA #1;
|FPRC;

|PROCESO tipo_3; |TIPO 3;
empresa   = #0#0;
emp_actu  = #0#0;
emp_nuev  = #0#2;
que_hacer = 1;

|ABRE #1;
#1#0 = emp_actu;
|LIBERA #1;
|LEE 140#1=;
|SI FSalida = 0;
    #1#0 = emp_nuev;
    |GRABA 140#1n;
|FINSI;
|CIERRA #1;

|SUB_EJECUTA "reborra1";

|SI #0#3 ! "S"; |ACABA; |FINSI;

|ABRE #1; #1#0 = empresa; |BORRA 101#1c; |LIBERA #1; |CIERRA #1;

que_hacer = 0;
|SUB_EJECUTA "reborra1";
|FPRC;
