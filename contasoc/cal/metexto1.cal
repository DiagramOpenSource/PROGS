|FICHEROS;
    metexto1 #0;
    metextos #1;
|FIN;

|VARIABLES;
     elementos = 226;
     tipo      = 0;
     numbuffer = 0;
     titulo    = "TEXTO";
     xxx       = 0;
     campo     = 0;
     varalfa   = "";
     modo      = 0;
     yyy       = 0;

     conta     = 0;
     registro  = 0;
     FEstado   = 0;
     primero   = "";
     sw_pasa   = 0;

     &DesdeCap = 0;
     &HastaCap = 0;
     &DesdeEmp = 0;
     &HastaEmp = 0;
|FIN;

|PROCESO carga;
  |PARA xxx = 2; |SI xxx [ 16; |HACIENDO xxx = xxx + 1;
        varalfa = #1xxx;
        |AL_BUF numbuffer, yyy, varalfa;
        yyy     = yyy + 1;
  |SIGUE;
|FPRC;

|DEFBUCLE metextos_1;
  #1#1;
  ;
  #0#0, 00, #0#1;
  #0#0, 99, #0#1;
  e;
  NULL, carga;
|FIN;

|PROCESO carga_buffer;
  yyy = 0;
  |BUCLE metextos_1;
|FPRC;

|PROCESO borra;
  |BORRA 140#1a;
  |LIBERA #1;
|FPRC;

|DEFBUCLE metextos_2;
  #1#1;
  ;
  #0#0, 00, #0#1;
  #0#0, 99, #0#1;
  be;
  NULL, borra;
|FIN;

|PROCESO DescargaBuffer;
  |BUCLE metextos_2;

  |ABRE #1;
  yyy       = 0;

  |PARA xxx = 0; |SI xxx [ 225; |HACIENDO xxx = xxx + 1;
      |DEL_BUF numbuffer, xxx, varalfa;
      |QBF varalfa;
      |SI varalfa ! ""; yyy = xxx; |FINSI;
      |SI xxx = 0; primero = varalfa; |FINSI;
  |SIGUE;

  conta     = 0;
  registro  = 0;
  FEstado   = 0;
  |DDEFECTO #1;

  |PARA xxx = 0; |SI xxx [ yyy; |HACIENDO xxx = xxx + 1;
      |SI xxx = 0;
          varalfa = primero;
      |SINO;
          |DEL_BUF numbuffer, xxx, varalfa;
      |FINSI;

      |QBF varalfa;
      |SI varalfa = ""; varalfa = "."; |FINSI;

      conta = conta + 1;

      campo   = conta + 1;
      #1campo = varalfa;
      |SI conta = 15;
          |HAZ graba_registro;
      |FINSI;
  |SIGUE;

  |SI conta ! 15; |HAZ graba_registro; |FINSI;

  |CIERRA #1;
|FPRC;

|PROCESO graba_registro;
  #1#0  = #0#0;
  #1#1  = registro;
  #1#17 = #0#1;
  |GRABA 040#1n;

  conta    = 0;
  registro = registro + 1;
  |DDEFECTO #1;
|FPRC;

|PROCESO editar;
  |HAZ carga_buffer;

  titulo    = "TEXTO CAPITULO : " + #0#0 + " EMPRESA : " + #0#1;
  |EDITA numbuffer, 0, elementos, 802, 2279, modo, titulo, 78, 0, 0;
  |SI FSalida ! 0; |ACABA; |FINSI;

  |CONFI "2400SDesea grabar el Texto : ";
  |SI FSalida = 0;
      |HAZ DescargaBuffer;

      DesdeCap = #0#0;
      HastaCap = #0#0;
      DesdeEmp = #0#1;
      HastaEmp = #0#1;
      ||SUB_EJECUTA "z0000009";
  |FINSI;
|FPRC;

|PROGRAMA;
  |DIMENSIONA elementos, numbuffer, tipo;
  |CLS;
  |CABEZA "Introduccion de Textos";
  |PINPA #0#0;
  |ENDATOS #1#0;
  |SI FSalida = 0;  |HAZ editar;  |FINSI;
  |FINDIM numbuffer;
|FPRO;
