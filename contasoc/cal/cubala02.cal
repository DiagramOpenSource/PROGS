|FICHEROS;
   cubala02 #0;
|FIN;

|VARIABLES;
   &empresa = 0;
   &anyo    = 0;
   &nombre  = "";
   &nif     = "";
   &tipo    = "";
   &unid    = "";
   &modo    = 0;
   &sw_mod  = 0;

   anyo1    = 0;
   anyo2    = 0;
   x        = 0;
   tecla    = "";
   ntecla   = 0;
   avance   = "815";
   atras    = "814";
   FEstado  = 0;
|FIN;

|PROGRAMA;
|ABRE #0;
|PINPA #0#0;
|SI modo = 1; |O modo = 2; |HAZ pidedato; |FINSI;
|SI modo = 4; |HAZ consulta; |FINSI;
|FPRO;

|PROCESO pidedato;
#0#0 = empresa;
#0#1 = anyo;
|LEE 110#0=;
FEstado = FSalida;
|SI FEstado ! 0; |DDEFECTO #0; #0#0 = empresa; #0#1 = anyo; |FINSI;
|PINDA #0#0;
|SI modo = 1; |HAZ nomodi; |ENDATOS #1#0; |FINSI;
|SI modo = 2; |HAZ nomodi; |ENDATOS #2#0;  |FINSI;
|SI FSalida = 0;
    #0#0 = empresa;
    #0#1 = anyo;
    #0#2 = nombre;
    #0#3 = nif;
    #0#4 = unid;
    #0#5 = tipo;
    |SI FEstado = 0; |GRABA 020#0a; |SINO; |GRABA 020#0n; |FINSI;
    |LIBERA #0;
|FINSI;
|FPRC;

|PROCESO consulta; |TIPO 0;
avance = &255 + avance;
atras  = &255 + atras;
#0#0   = empresa;
#0#1   = anyo;
|LEE 040#0=;
|SI FSalida = 0; |HAZ pantalla1; |FINSI;
|FPRC;

|PROCESO pantalla1;
|PINPA #0#0;
|PINDA #0#0;
|MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
|LEETECLA tecla;
|SI tecla = avance; |HAZ pantalla2; |ACABA; |FINSI;
|FPRC;

|PROCESO pantalla2;
|PINPA #1#0;
|PINDA #1#0;
|MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
|LEETECLA tecla;
|SI tecla = atras;  |HAZ pantalla1; |ACABA; |FINSI;
|SI tecla = avance; |HAZ pantalla3; |ACABA; |FINSI;
|FPRC;

|PROCESO pantalla3;
|PINPA #2#0;
|PINDA #2#0;
|MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
|LEETECLA tecla;
|SI tecla = atras;  |HAZ pantalla2; |ACABA; |FINSI;
|SI tecla = avance; |HAZ pantalla4; |ACABA; |FINSI;
|FPRC;

|PROCESO pantalla4;
|PINPA #3#0;
|PINDA #3#0;
|MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
|LEETECLA tecla;
|SI tecla = atras;  |HAZ pantalla3; |ACABA; |FINSI;
|SI tecla = avance; |HAZ pantalla5; |ACABA; |FINSI;
|FPRC;

|PROCESO pantalla5;
|PINPA #4#0;
|PINDA #4#0;
|MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
|LEETECLA tecla;
|SI tecla = atras;  |HAZ pantalla4; |ACABA; |FINSI;
|SI tecla = avance; |HAZ pantalla6; |ACABA; |FINSI;
|FPRC;

|PROCESO pantalla6;
|PINPA #5#0;
|PINDA #5#0;
|MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
|LEETECLA tecla;
|SI tecla = atras; |HAZ pantalla5; |ACABA; |FINSI;
|FPRC;

|| **************************************************************************
||                      PROCESOS PROPIOS DEL PROGRAMA
|| **************************************************************************
|PROCESO pintaany; |TIPO 13;
anyo2 = anyo - 1;
anyo1 = anyo;
|PINTA 963, anyo1;
|PINTA 975, anyo2;
|FPRC;

|PROCESO nomodi;
|SI sw_mod = 1;   |HAZ nomoaant; |FINSI;
|SI tipo   = "A"; |HAZ nomoabre; |FINSI;
|SI tipo   = "E"; |HAZ nomoexte; |FINSI;
|FPRC;

|PROCESO nomoaant;
|CAMPO_MODIFICA #0#006,1,"N"; |CAMPO_MODIFICA #0#007,1,"N";
|CAMPO_MODIFICA #0#008,1,"N"; |CAMPO_MODIFICA #0#009,1,"N";
|CAMPO_MODIFICA #0#010,1,"N"; |CAMPO_MODIFICA #0#011,1,"N";
|CAMPO_MODIFICA #0#012,1,"N"; |CAMPO_MODIFICA #0#013,1,"N";
|CAMPO_MODIFICA #0#014,1,"N"; |CAMPO_MODIFICA #0#015,1,"N";
|CAMPO_MODIFICA #0#016,1,"N"; |CAMPO_MODIFICA #0#017,1,"N";
|CAMPO_MODIFICA #0#018,1,"N"; |CAMPO_MODIFICA #0#019,1,"N";
|CAMPO_MODIFICA #0#020,1,"N"; |CAMPO_MODIFICA #0#021,1,"N";
|CAMPO_MODIFICA #0#022,1,"N"; |CAMPO_MODIFICA #0#023,1,"N";
|CAMPO_MODIFICA #0#024,1,"N"; |CAMPO_MODIFICA #0#025,1,"N";
|CAMPO_MODIFICA #0#026,1,"N"; |CAMPO_MODIFICA #0#027,1,"N";
|CAMPO_MODIFICA #0#028,1,"N"; |CAMPO_MODIFICA #0#029,1,"N";
|CAMPO_MODIFICA #0#030,1,"N"; |CAMPO_MODIFICA #0#031,1,"N";
|CAMPO_MODIFICA #0#032,1,"N"; |CAMPO_MODIFICA #0#033,1,"N";
|CAMPO_MODIFICA #0#034,1,"N"; |CAMPO_MODIFICA #0#035,1,"N";
|CAMPO_MODIFICA #0#036,1,"N"; |CAMPO_MODIFICA #0#037,1,"N";
|CAMPO_MODIFICA #0#038,1,"N"; |CAMPO_MODIFICA #0#039,1,"N";
|CAMPO_MODIFICA #0#040,1,"N"; |CAMPO_MODIFICA #0#041,1,"N";
|CAMPO_MODIFICA #0#042,1,"N"; |CAMPO_MODIFICA #0#043,1,"N";
|CAMPO_MODIFICA #0#044,1,"N"; |CAMPO_MODIFICA #0#045,1,"N";
|CAMPO_MODIFICA #0#046,1,"N"; |CAMPO_MODIFICA #0#047,1,"N";
|CAMPO_MODIFICA #0#048,1,"N"; |CAMPO_MODIFICA #0#049,1,"N";
|CAMPO_MODIFICA #0#050,1,"N"; |CAMPO_MODIFICA #0#051,1,"N";
|CAMPO_MODIFICA #0#052,1,"N"; |CAMPO_MODIFICA #0#053,1,"N";
|CAMPO_MODIFICA #0#054,1,"N"; |CAMPO_MODIFICA #0#055,1,"N";
|CAMPO_MODIFICA #0#056,1,"N"; |CAMPO_MODIFICA #0#057,1,"N";
|CAMPO_MODIFICA #0#058,1,"N"; |CAMPO_MODIFICA #0#059,1,"N";
|CAMPO_MODIFICA #0#060,1,"N"; |CAMPO_MODIFICA #0#061,1,"N";
|CAMPO_MODIFICA #0#062,1,"N"; |CAMPO_MODIFICA #0#063,1,"N";
|CAMPO_MODIFICA #0#064,1,"N"; |CAMPO_MODIFICA #0#065,1,"N";
|CAMPO_MODIFICA #0#066,1,"N"; |CAMPO_MODIFICA #0#067,1,"N";
|CAMPO_MODIFICA #0#068,1,"N"; |CAMPO_MODIFICA #0#069,1,"N";
|CAMPO_MODIFICA #0#134,1,"N";
|FPRC;

|PROCESO nomoabre;
|SI sw_mod = 0;
    |CAMPO_MODIFICA #0#010,1,"N"; |CAMPO_MODIFICA #0#011,1,"N";
    |CAMPO_MODIFICA #0#012,1,"N"; |CAMPO_MODIFICA #0#013,1,"N";
    |CAMPO_MODIFICA #0#014,1,"N"; |CAMPO_MODIFICA #0#015,1,"N";
    |CAMPO_MODIFICA #0#016,1,"N"; |CAMPO_MODIFICA #0#017,1,"N";
    |CAMPO_MODIFICA #0#018,1,"N"; |CAMPO_MODIFICA #0#020,1,"N";
    |CAMPO_MODIFICA #0#021,1,"N"; |CAMPO_MODIFICA #0#022,1,"N";
    |CAMPO_MODIFICA #0#023,1,"N"; |CAMPO_MODIFICA #0#024,1,"N";
    |CAMPO_MODIFICA #0#025,1,"N"; |CAMPO_MODIFICA #0#026,1,"N";
    |CAMPO_MODIFICA #0#028,1,"N"; |CAMPO_MODIFICA #0#029,1,"N";
    |CAMPO_MODIFICA #0#030,1,"N"; |CAMPO_MODIFICA #0#031,1,"N";
    |CAMPO_MODIFICA #0#032,1,"N"; |CAMPO_MODIFICA #0#033,1,"N";
    |CAMPO_MODIFICA #0#034,1,"N"; |CAMPO_MODIFICA #0#035,1,"N";
    |CAMPO_MODIFICA #0#042,1,"N"; |CAMPO_MODIFICA #0#043,1,"N";
    |CAMPO_MODIFICA #0#044,1,"N"; |CAMPO_MODIFICA #0#045,1,"N";
    |CAMPO_MODIFICA #0#046,1,"N"; |CAMPO_MODIFICA #0#047,1,"N";
    |CAMPO_MODIFICA #0#048,1,"N"; |CAMPO_MODIFICA #0#050,1,"N";
    |CAMPO_MODIFICA #0#051,1,"N"; |CAMPO_MODIFICA #0#052,1,"N";
    |CAMPO_MODIFICA #0#053,1,"N"; |CAMPO_MODIFICA #0#054,1,"N";
    |CAMPO_MODIFICA #0#055,1,"N"; |CAMPO_MODIFICA #0#056,1,"N";
    |CAMPO_MODIFICA #0#058,1,"N"; |CAMPO_MODIFICA #0#059,1,"N";
    |CAMPO_MODIFICA #0#060,1,"N"; |CAMPO_MODIFICA #0#061,1,"N";
    |CAMPO_MODIFICA #0#062,1,"N"; |CAMPO_MODIFICA #0#063,1,"N";
    |CAMPO_MODIFICA #0#064,1,"N"; |CAMPO_MODIFICA #0#065,1,"N";
    |CAMPO_MODIFICA #0#134,1,"N";
|FINSI;

|CAMPO_MODIFICA #0#074,1,"N"; |CAMPO_MODIFICA #0#075,1,"N";
|CAMPO_MODIFICA #0#076,1,"N"; |CAMPO_MODIFICA #0#077,1,"N";
|CAMPO_MODIFICA #0#078,1,"N"; |CAMPO_MODIFICA #0#079,1,"N";
|CAMPO_MODIFICA #0#080,1,"N"; |CAMPO_MODIFICA #0#081,1,"N";
|CAMPO_MODIFICA #0#082,1,"N"; |CAMPO_MODIFICA #0#084,1,"N";
|CAMPO_MODIFICA #0#085,1,"N"; |CAMPO_MODIFICA #0#086,1,"N";
|CAMPO_MODIFICA #0#087,1,"N"; |CAMPO_MODIFICA #0#088,1,"N";
|CAMPO_MODIFICA #0#089,1,"N"; |CAMPO_MODIFICA #0#090,1,"N";
|CAMPO_MODIFICA #0#092,1,"N"; |CAMPO_MODIFICA #0#093,1,"N";
|CAMPO_MODIFICA #0#094,1,"N"; |CAMPO_MODIFICA #0#095,1,"N";
|CAMPO_MODIFICA #0#096,1,"N"; |CAMPO_MODIFICA #0#097,1,"N";
|CAMPO_MODIFICA #0#098,1,"N"; |CAMPO_MODIFICA #0#099,1,"N";
|CAMPO_MODIFICA #0#106,1,"N"; |CAMPO_MODIFICA #0#107,1,"N";
|CAMPO_MODIFICA #0#108,1,"N"; |CAMPO_MODIFICA #0#109,1,"N";
|CAMPO_MODIFICA #0#110,1,"N"; |CAMPO_MODIFICA #0#111,1,"N";
|CAMPO_MODIFICA #0#112,1,"N"; |CAMPO_MODIFICA #0#114,1,"N";
|CAMPO_MODIFICA #0#115,1,"N"; |CAMPO_MODIFICA #0#116,1,"N";
|CAMPO_MODIFICA #0#117,1,"N"; |CAMPO_MODIFICA #0#118,1,"N";
|CAMPO_MODIFICA #0#119,1,"N"; |CAMPO_MODIFICA #0#120,1,"N";
|CAMPO_MODIFICA #0#122,1,"N"; |CAMPO_MODIFICA #0#123,1,"N";
|CAMPO_MODIFICA #0#124,1,"N"; |CAMPO_MODIFICA #0#125,1,"N";
|CAMPO_MODIFICA #0#126,1,"N"; |CAMPO_MODIFICA #0#127,1,"N";
|CAMPO_MODIFICA #0#128,1,"N"; |CAMPO_MODIFICA #0#129,1,"N";
|CAMPO_MODIFICA #0#135,1,"N";
|FPRC;

|PROCESO nomoexte;
|SI sw_mod = 0;
    |CAMPO_MODIFICA #0#009,1,"N"; |CAMPO_MODIFICA #0#019,1,"N";
    |CAMPO_MODIFICA #0#027,1,"N"; |CAMPO_MODIFICA #0#041,1,"N";
    |CAMPO_MODIFICA #0#049,1,"N"; |CAMPO_MODIFICA #0#057,1,"N";
|FINSI;

|CAMPO_MODIFICA #0#073,1,"N"; |CAMPO_MODIFICA #0#083,1,"N";
|CAMPO_MODIFICA #0#091,1,"N"; |CAMPO_MODIFICA #0#105,1,"N";
|CAMPO_MODIFICA #0#113,1,"N"; |CAMPO_MODIFICA #0#121,1,"N";
|FPRC;


|PROCESO totales; |TIPO 0;
|SI tipo = "E";
    #0#9 = 0;
    |PARA x = 10; |SI x [ 18; |HACIENDO x = x + 1;
          #0#9 = #0#9 + #0x;
    |SIGUE;

    #0#73 = 0;
    |PARA x = 74; |SI x [ 82; |HACIENDO x = x + 1;
          #0#73 = #0#73 + #0x;
    |SIGUE;

    #0#19 = 0;
    |PARA x = 20; |SI x [ 26; |HACIENDO x = x + 1;
          #0#19 = #0#19 + #0x;
    |SIGUE;

    #0#83 = 0;
    |PARA x = 84; |SI x [ 90; |HACIENDO x = x + 1;
          #0#83 = #0#83 + #0x;
    |SIGUE;

    #0#27 = 0;
    |PARA x = 28; |SI x [ 35; |HACIENDO x = x + 1;
          #0#27 = #0#27 + #0x;
    |SIGUE;
        #0#27 = #0#27 + #0#134;

    #0#91 = 0;
    |PARA x = 92; |SI x [ 99; |HACIENDO x = x + 1;
          #0#91 = #0#91 + #0x;
    |SIGUE;
    #0#91 = #0#91 + #0#135;

    #0#41 = 0;
    |PARA x = 42; |SI x [ 48; |HACIENDO x = x + 1;
          #0#41 = #0#41 + #0x;
    |SIGUE;

    #0#105 = 0;
    |PARA x = 106; |SI x [ 112; |HACIENDO x = x + 1;
          #0#105 = #0#105 + #0x;
    |SIGUE;

    #0#49 = 0;
    |PARA x = 50; |SI x [ 56; |HACIENDO x = x + 1;
          #0#49 = #0#49 + #0x;
    |SIGUE;

    #0#113 = 0;
    |PARA x = 114; |SI x [ 120; |HACIENDO x = x + 1;
          #0#113 = #0#113 + #0x;
    |SIGUE;

    #0#57 = 0;
    |PARA x = 58; |SI x [ 65; |HACIENDO x = x + 1;
          #0#57 = #0#57 + #0x;
    |SIGUE;

    #0#121 = 0;
    |PARA x = 122; |SI x [ 129; |HACIENDO x = x + 1;
          #0#121 = #0#121 + #0x;
    |SIGUE;
|FINSI;

#0#7   = #0#8   + #0#9   + #0#19  + #0#27  + #0#36  + #0#37;
#0#71  = #0#72  + #0#73  + #0#83  + #0#91  + #0#100 + #0#101;
#0#39  = #0#40  + #0#41  + #0#49  + #0#57  + #0#66  + #0#67  + #0#68;
#0#103 = #0#104 + #0#105 + #0#113 + #0#121 + #0#130 + #0#131 + #0#132;
#0#69  = #0#6   + #0#7   + #0#38  + #0#39;
#0#133 = #0#70  + #0#71  + #0#102 + #0#103;

|PINTA #0#009;
|PINTA #0#073;
|PINTA #0#019;
|PINTA #0#083;
|PINTA #0#027;
|PINTA #0#091;
|PINTA #0#041;
|PINTA #0#105;
|PINTA #0#049;
|PINTA #0#113;
|PINTA #0#057;
|PINTA #0#121;
|PINTA #0#007;
|PINTA #0#071;
|PINTA #0#039;
|PINTA #0#103;
|PINTA #0#069;
|PINTA #0#133;
|FPRC;
