|FICHEROS;
     :/contagen/def/ca8ctrle;
     :/contagen/def/ca8comay #401;  ||Control Empresa
     :/contagen/def/ca8cumay #410;

     :/contagen/def/canempre;
     :/contasoc/def/maempr10;
     :/contasoc/def/cuacceso;
     :/basica/def/agim0019;
|FIN;

|VARIABLES;
   &empresa  = 0;
   &anyo     = 0;
|FIN;

|INCLUYE varcon_i;
|INCLUYE varbal_i;

|PROCESO eLeePCGConta;
    enDesde = 0;
    |ABRE #ca8ctrle;
    |DDEFECTO #ca8ctrle;
    #ca8ctrle#0 = enEmpresa;
    #ca8ctrle#1 = enPerConta;
    |LEE 041#ca8ctrle.=;
    |SI FSalida = 0;
        eNum2008 = #ca8ctrle#2;
        enDesde = 1;
        |HAZ eLeePCGTodos;
    |FINSI;
    |CIERRA #ca8ctrle;
|FPRC;

|PROCESO eLeePCGCCAA;
    enDesde = 0;
    |ABRE #cuacceso;
    |DDEFECTO #cuacceso;
    #cuacceso#0 = empresa;
    #cuacceso#1 = anyo;
    |LEE 041#cuacceso.=;
    |SI FSalida = 0;
        eNum2008 = #cuacceso#14;
        enDesde = 2;
        |HAZ eLeePCGTodos;
    |FINSI;
    |CIERRA #cuacceso;
|FPRC;

|PROCESO eLeePCGFicha;

     |ABRE #agim0019;
     #agim0019#0 = empresa;
     #agim0019#1 = 99;
     |LEE 040#agim0019.];
     |SI FSalida = 0;
         |LEE 040#agim0019.a;
     |SINO;
         |LEE 040#agim0019.u;
     |FINSI;
     |SI FSalida ! 0;  |O #agim0019#0 ! empresa;
         |DDEFECTO #agim0019;
     |FINSI;
     |CIERRA #agim0019;

     |ABRE #maempr10;
     #maempr10#0 = empresa;
     #maempr10#1 = anyo;
     |LEE 041#maempr10.=;
     |SI FSalida = 0;
         nCtaNum = #maempr10#102;
     |SINO;
         nCtaNum = #agim0019#88;
     |FINSI;
     |CIERRA #maempr10;

     eNum2008 = 0;
     |SI nCtaNum = 0;  |O nCtaNum = 6;
      |O nCtaNum = 7;  |O nCtaNum = 10; eNum2008 = 0;  |FINSI;
     |SI nCtaNum = 1;  |O nCtaNum = 5;  eNum2008 = 1;  |FINSI;
     |SI nCtaNum = 30; |O nCtaNum = 32; eNum2008 = 30; |FINSI;
     |SI nCtaNum = 31;                  eNum2008 = 31; |FINSI;
     |SI nCtaNum = 40; |O nCtaNum = 42; eNum2008 = 40; |FINSI;
     |SI nCtaNum = 41;                  eNum2008 = 41; |FINSI;
     |HAZ eLeePCGTodos;
|FPRC;

|PROCESO eLeePCGTodos;
    eaPlan0 = "";
    eaPlan1 = "";
    |ABRE #ca8comay;
    #ca8comay#0 = eNum2008;
    |LEE 041#ca8comay.=;
    |SI FSalida = 0;
        eTip2008 = #ca8comay#3;
        eaPlan0  = #ca8comay#0; eaPlan0 = ("00" + eaPlan0) % -102;
        eaPlan1  = #ca8comay#2;
    |FINSI;
    |CIERRA #ca8comay;
|FPRC;
