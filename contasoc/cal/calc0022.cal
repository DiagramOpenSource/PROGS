|INCLUYE calc9999;
|INCLUYE varbal_i;

|PROCESO GrabaCas122;
     |ABRE #isom0510;
     |SELECT #2#isom0510;
     #isom0510#0 = enAnyo;
     #isom0510#2 = eaCasilla;
     #isom0510#1 = 0;
     |LEE 000#isom0510.];
     |SI FSalida ! 0;              |ACABA;  |FINSI;
     |SI #isom0510#0 ! enAnyo;     |ACABA;  |FINSI;
     aAlfa = #isom0510#2;  |QBF aAlfa;
     |SI aAlfa ! eaCasilla;  |ACABA;  |FINSI;
     |CIERRA #isom0510;

     |SELECT #1#isom0022;
     #isom0022#0  = enEmpresa;
     #isom0022#1  = enAnyo;
     #isom0022#2  = #isom0510#1;
     |LEE 101#isom0022.=;
     |SI FSalida ! 0;
         |DDEFECTO #isom0022;
         #isom0022#0  = enEmpresa;
         #isom0022#1  = enAnyo;
         #isom0022#2  = #isom0510#1;
         #isom0022#3  = #isom0510#2;
         #isom0022#4  = #isom0510#3;
        |GRABA 020#isom0022.b;
     |FINSI;

     #isom0022#5 = enValor;
     |GRABA 020#isom0022.a;
     |LIBERA #isom0022;
|FPRC;
