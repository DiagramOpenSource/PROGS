|FICHEROS;
     isom0499;
|FIN;

|VARIABLES;
      aAlfa     = "";

      nSubVent  = 0;
      nCampo    = 0;
      nGraba    = 0;

     {-1}aVent      = "";
         aVent1     = 0;
         aVent2     = 0;
         aVent3     = 0;
         aVent4     = 0;
         aVent5     = "";

     &enEmpresa     = 0;
     &enAnyo        = 0;
     &eaCasilla     = "";
     &eaTitCasilla  = "";
     &enModoConsulta = 0;
|FIN;

|PROCESO Tipo12m499;  |TIPO 12;
|FPRC;

|PROGRAMA;
     |SI enModoConsulta = 1;
         |ABRE #isom0499;
         #isom0499#0 = enEmpresa;
         #isom0499#1 = enAnyo;
         #isom0499#2 = eaCasilla;
         |LEE 000#isom0499.=;
         |SI FSalida ! 0;   |DDEFECTO #isom0499;   |FINSI;
         |CIERRA #isom0499;

         aAlfa = "(MODO CONSULTA)   Anotaciones casilla: " + eaTitCasilla;
         |VENTANA 0501, 2599, -1, 16, aAlfa;
         nSubVent = FSalida;

         aVent1 = -1;
         aVent2 = -1;
         aVent3 = 0;
         aVent4 = nSubVent;
         aVent5 = "MODAL";
         |ESPECIFICA "ESTADO_VENTANA", aVent;

         |PINPA #0#isom0499;
         |PINDA #0#isom0499;
         |PAUSA;

         aVent1 = -1;
         aVent2 = -1;
         aVent3 = 0;
         aVent4 = nSubVent;
         aVent5 = "MODELESS";
         |ESPECIFICA "ESTADO_VENTANA", aVent;

         |FINVENTANA nSubVent;

         |ACABA;
     |FINSI;


     |ABRE #isom0499;
     #isom0499#0 = enEmpresa;
     #isom0499#1 = enAnyo;
     #isom0499#2 = eaCasilla;
     |LEE 101#isom0499.=;
     |SI FSalida ! 0;
         |DDEFECTO #isom0499;
         #isom0499#0 = enEmpresa;
         #isom0499#1 = enAnyo;
         #isom0499#2 = eaCasilla;
         |GRABA 020#isom0499.b;
     |FINSI;

     aAlfa = "Anotaciones casilla: " + eaTitCasilla;
     |VENTANA 0501, 2599, -1, 16, aAlfa;
     nSubVent = FSalida;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nSubVent;
     aVent5 = "MODAL";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     |PINPA #0#isom0499;
     |PINDA #0#isom0499;
     |ENDATOS #1#isom0499;
     |SI FSalida = 0;
         nGraba = 1;
         |PARA nCampo = 3;  |SI nCampo [ 22;  |HACIENDO nCampo = nCampo + 1;
               aAlfa = #isom0499#nCampo#;  |QBF aAlfa;
               |SI aAlfa ! "";  nGraba = 0;  |SAL;  |FINSI;
         |SIGUE;

         |SI nGraba = 0;
             |GRABA 020#isom0499.a;
         |SINO;
             |BORRA 020#isom0499.a;
         |FINSI;
     |FINSI;
     |LIBERA #isom0499;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nSubVent;
     aVent5 = "MODELESS";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     |FINVENTANA nSubVent;
     |CIERRA #isom0499;
|FPRO;
