|INCLUYE calc9999;
|INCLUYE varbal_i;

|PROCESO Bucle128;
     enValor1 = enValor1 + #isom0028#5;
     enValor2 = enValor2 + #isom0028#7;
     enValor3 = enValor3 + #isom0028#9;
     enValor4 = enValor4 + #isom0028#11;
|FPRC;

|DEFBUCLE Bucle128;
     #isom0028#1;
     ;
     enEmpresa, enAnyo, nDLinea;
     enEmpresa, enAnyo, nHLinea;
     ;
     NULL, Bucle128;
|FIN;

|PROCESO TotalFich128;
     |SI enModoConsulta = 1;
         |ACABA;
     |FINSI;

     enVal1040 = 0;
     enVal1041 = 0;
     enValor1  = 0;
     enValor2  = 0;
     enValor3  = 0;
     enValor4  = 0;

     |SI enAnyo [ 2015;
         nDLinea  = 95;
         nHLinea  = 100;
     |FINSI;

     |SI enAnyo = 2016;
         nDLinea  = 110;
         nHLinea  = 120;
     |FINSI;

     |SI enAnyo = 2017;
         nDLinea  = 125;
         nHLinea  = 140;
     |FINSI;

     |SI enAnyo = 2018;
         nDLinea  = 135;
         nHLinea  = 155;
     |FINSI;

     |SI enAnyo = 2019;
         nDLinea  = 145;
         nHLinea  = 170;
     |FINSI;

     |BUCLE Bucle128;

     |ABRE #isom0028;
     |SELECT #2#isom0028;
     #isom0028#0 = enEmpresa;
     #isom0028#1 = enAnyo;
     #isom0028#4 = "1170";
     |LEE 101#isom0028.=;
     |SI FSalida = 0;
         #isom0028#5  = enValor1;
         #isom0028#7  = enValor2;
         #isom0028#9  = enValor3;
         #isom0028#11 = enValor4;
         |GRABA 020#isom0028.a;

         enVal1040 = #isom0028#9;
     |FINSI;
     |LIBERA #isom0028;
     |CIERRA #isom0028;

     enValor1  = 0;
     enValor2  = 0;
     enValor3  = 0;
     enValor4  = 0;

     |SI enAnyo [ 2015;
         nDLinea  = 115;
         nHLinea  = 120;
     |FINSI;

     |SI enAnyo = 2016;
         nDLinea  = 135;
         nHLinea  = 145;
     |FINSI;

     |SI enAnyo = 2017;
         nDLinea  = 155;
         nHLinea  = 170;
     |FINSI;

     |SI enAnyo = 2018;
         nDLinea  = 170;
         nHLinea  = 190;
     |FINSI;

     |SI enAnyo = 2019;
         nDLinea  = 185;
         nHLinea  = 210;
     |FINSI;

     |BUCLE Bucle128;

     |ABRE #isom0028;
     |SELECT #2#isom0028;
     #isom0028#0 = enEmpresa;
     #isom0028#1 = enAnyo;
     #isom0028#4 = "1182";
     |LEE 101#isom0028.=;
     |SI FSalida = 0;
         #isom0028#5  = enValor1;
         #isom0028#7  = enValor2;
         #isom0028#9  = enValor3;
         #isom0028#11 = enValor4;
         |GRABA 020#isom0028.a;

         enVal1041 = #isom0028#9;
     |FINSI;
     |LIBERA #isom0028;
     |CIERRA #isom0028;

     |SELECT #1#isom0028;
|FPRC;
