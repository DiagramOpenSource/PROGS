|FICHEROS;
     isocie86 #0;
     maempr11 #1;
|FIN;

|VARIABLES;
     nCampo    = 0;

    &empresa   = 0;
    &anyo      = 0;
    &tipo      = "";
    &modo      = 0;
|FIN;

|PROCESO PideDato;
     #0#0 = empresa;
     #0#1 = anyo;
     |LEE 110#0=;
     |SI FSalida ! 0;
         |DDEFECTO #0;
         #0#0 = empresa;
         #0#1 = anyo;
         |GRABA 020#0b;
     |FINSI;

     |PINDA #0#0;
     |SI modo = 1; |ENDATOS #1#0;  |FINSI;
     |SI modo = 2; |ENDATOS #2#0;  |FINSI;
     |SI FSalida = 0;
         |GRABA 020#0a;
     |FINSI;
     |LIBERA #0;
|FPRC;

|PROCESO Consulta;
     #0#0 = empresa;
     #0#1 = anyo;
     |LEE 040#0=;
     |SI FSalida = 0;
         |PINPA #0#0;
         |PINDA #0#0;
         |PAUSA;
     |FINSI;
|FPRC;

|PROGRAMA;
     |ABRE #1;
     #1#0 = empresa;
     #1#1 = anyo;
     #1#2 = 29;
     |LEE 040#1=;
     |SI FSalida ! 0;
         |MENAV "     La Empresa no tiene activada el Caracter de la declaracion 29";
         |CIERRA #1;
         |ACABA;
     |FINSI;
     |CIERRA #1;

     |ABRE #0;
     |PINPA #0#0;

     |SI modo = 1; |O modo = 2; |HAZ PideDato; |FINSI;
     |SI modo = 4; |HAZ Consulta; |FINSI;
     |CIERRA #0;
|FPRO;
