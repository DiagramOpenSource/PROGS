|FICHEROS;
     ism00001;
     ism00002;
|FIN;

|VARIABLES;
     aCodigo1   = "";
     aCodigo2   = "";
     aContenido = "";
     aCaracter  = "";
     aLineaMenu = "";
     aAlfa      = "";
     aAlfa1     = "";
     aAlfa2     = "";
     aAbre      = "";
     aPrograma  = "";
     aCampoA    = "";
     aCampoB    = "";
     aCampoC    = "";
     aCampoD    = "";
     aCampoE    = "";
     aCampoF    = "";
     aCampoG    = "";
     aCampoH    = "";
     aCampoI    = "";
     aCampoJ    = "";
     aLong      = "";
     aCadena    = "";
     aTab       = "";
     aCarac1    = "";

     nCodigos   = 0;
     nCodigo1   = 0;
     nCodigo2   = 0;
     nCodigo3   = 0;
     nCampo     = 0;
     nPos       = 0;
     nPosi      = 0;
     nRango     = 0;
     nBoton1    = 0;
     nHandle    = 0;
     nLong      = 0;
     nCaracter  = 0;
     nLLaves    = 0;
     nOk        = 0;
|FIN;

|PROCESO Baja2;
     #ism00002#7 = PARAMETRO;
     #ism00002#0 = 1;
     #ism00002#1 = 1;
|FPRC;

|PROCESO Alta2;
     #ism00002#7 = PARAMETRO;
     #ism00002#0 = 99;
     #ism00002#1 = 99;
|FPRC;

|PROGRAMA;
     |CABEZA "Deducciones conceptos";

     |CONSULTA_F_CLAVE #1#ism00002, Baja2, Alta2;
|FPRO;

|PROCESO GrabaReg;
     |QBF aCampoA;
     |SI aCampoA = "";  |ACABA;  |FINSI;

     |DDEFECTO #ism00002;
     #ism00002#7 = aCampoA;
     #ism00002#0 = aCampoB;
     #ism00002#1 = aCampoC;
     #ism00002#2 = aCampoD;
     #ism00002#3 = aCampoE;
     #ism00002#4 = aCampoF;
     #ism00002#5 = aCampoG;
     #ism00002#6 = aCampoH;
     #ism00002#8 = aCampoI;
     #ism00002#9 = aCampoJ;

     |GRABA 020#ism00002.n;
     |LIBERA #ism00002;

     #ism00001#2 = #ism00002#7;
     #ism00001#0 = #ism00002#0;
     |LEE 000#ism00001.=;
     |SI FSalida = 0;  |ACABA;  |FINSI;

     #ism00001#2 = #ism00002#7;
     #ism00001#0 = #ism00002#0;
     #ism00001#1 = #ism00002#2;
     |GRABA 020#ism00001.n;
     |LIBERA #ism00001;
|FPRC;

|PROCESO RecogeDatos;
     aAlfa = Usuario % 810;  |QBF aAlfa;
     nOk   = 0;
     |SI aAlfa = "CAROLINA";  nOk = 1;  |FINSI;
     |SI aAlfa = "JUANMA";    nOk = 1;  |FINSI;

     |SI nOk = 0;  |ACABA;  |FINSI;

     |ABRE #ism00001;  |CIERRA #ism00001;  |DELINDEX #ism00001;
     |ABRE #ism00002;  |CIERRA #ism00002;  |DELINDEX #ism00002;

     |ABRE #ism00001;
     |ABRE #ism00002;

     aAlfa = "/u/dsprofes/contasoc/cogetxt/ism00002.csv";
     |XABRE "", aAlfa, nHandle;
     |PARA;  |SI FSalida ] 0;  |HACIENDO;
          |XLEE nHandle, 250, aAlfa;
          |SI FSalida < 0;  |SAL;  |FINSI;

          aCampoA  = "";
          aCampoB  = "";
          aCampoC  = "";
          aCampoD  = "";
          aCampoE  = "";
          aCampoF  = "";
          aCampoG  = "";
          aCampoH  = "";
          aCampoI  = "";
          aCampoJ  = "";

          aCadena = aAlfa;  |QBF aCadena;
          aLong   = aCadena % 0;
          nLong   = aLong;
          nCampo  = 1;
          aTab    = ";";

          |PARA nCaracter = 1;  |SI nCaracter [ nLong;  |HACIENDO nCaracter = nCaracter + 1;
                nPos    = (100 * nCaracter) + 1;
                aCarac1 = aCadena % nPos;
                |SI aCarac1 = aTab;
                    nCampo = nCampo + 1;
                |SINO;
                    |SI nCampo = 1;  aCampoA  = aCampoA  + aCarac1;  |FINSI;
                    |SI nCampo = 2;  aCampoB  = aCampoB  + aCarac1;  |FINSI;
                    |SI nCampo = 3;  aCampoC  = aCampoC  + aCarac1;  |FINSI;
                    |SI nCampo = 4;  aCampoD  = aCampoD  + aCarac1;  |FINSI;
                    |SI nCampo = 5;  aCampoE  = aCampoE  + aCarac1;  |FINSI;
                    |SI nCampo = 6;  aCampoF  = aCampoF  + aCarac1;  |FINSI;
                    |SI nCampo = 7;  aCampoG  = aCampoG  + aCarac1;  |FINSI;
                    |SI nCampo = 8;  aCampoH  = aCampoH  + aCarac1;  |FINSI;
                    |SI nCampo = 9;  aCampoI  = aCampoI  + aCarac1;  |FINSI;
                    |SI nCampo = 10; aCampoJ  = aCampoJ  + aCarac1;  |FINSI;

                    |SI nCampo > 11;  |SAL;  |FINSI;
                |FINSI;
          |SIGUE;

          |HAZ GrabaReg;
     |SIGUE;
     |XCIERRA nHandle;

     |CIERRA #ism00001;
     |CIERRA #ism00002;
|FPRC;

|PROCESO Tipo80F2;  |TIPO 80;
     |HAZ RecogeDatos;

     |ABRET #ism00001;
     |ABRET #ism00002;

     FSalida = 2799;
|FPRC;

|PROCESO Tipo90F2;  |TIPO 90;
     |CIERRAT #ism00001;
     |CIERRAT #ism00002;
|FPRC;
