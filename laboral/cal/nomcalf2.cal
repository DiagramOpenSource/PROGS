      ******   CALCULO DE NOMINAS  (SIN ACTUALIZAR - 2¦ PARTE) *******
   *  ANTES DE CALCULAR ACTUALIZA SIN GRABAR EL MES ANTERIOR AL ACTUAL  *

|FICHEROS;
     nomcalf1 #00;
     nomcot09;
|FIN;

|VARIABLES;
   &runnom = "nomcalf2";
   &any_act = 0;   || any actualizacion
   &mes_act = 0;   || mes actualizacion
   &clave = "";
   &fecha = "";
   &guaact = 0;
   &labtraba = 0;
   &nomcalf1 = 0;
   &p_cen = 0;
   htipo = 0;
     aParam = "";
     swSegPasada = 0;
     nPaso = 0;
     swCompAjuste = 0;
     &nElMes = 0;
     &nElAny = 0;
     &nRetEstAnu = 0;
     swCambiaCot = 0;
     &eaFichTramos = "";
|FIN;

|INCLUYE nomcal_2;
|INCLUYE nomcal_3;
|INCLUYE nomcal_5;

||****************************************************************************
||                  LLAMADAS DESDE EL MANTENIMIENTO
||****************************************************************************

|PROGRAMA;
|ABRET #09;
|ABRET #10;
|ABRET #11;
|ABRET #12;
|HAZ LeeEURODB;
|HAZ trae;
|HAZ proceso;
|CIERRAT #09;
|CIERRAT #10;
|CIERRAT #11;
|CIERRAT #12;
|FPRO;

||****************************************************************************
||                    LECTURA PRINCIPAL DE TRABAJADORES
||****************************************************************************


|PROCESO proceso;
     |PINTA 2174, #2#0;
     |PINTA 2274, #2#1;

     aAlfa = Usuario; |QBT aAlfa; aAlfa = "tm_nomcot09_" + aAlfa;
     eaFichTramos = aAlfa;
     |NOME_DAT #nomcot09#aAlfa#;
     |DELINDEX #nomcot09;

     |HAZ leeregis;
     |HAZ t_parcial;
     |HAZ leeconceptos;
     |HAZ cabecera;

     |DELINDEX #nomcot09;
|FPRC;

|PROCESO trae;
|PARA nume1 = 0;|SI nume1 [ 248;|HACIENDO nume1 = nume1 + 1;
    |DEL_BUF labtraba, nume1, alfa1;
        #2nume1 = alfa1;
|SIGUE;
|PARA nume1 = 0;|SI nume1 [  10;|HACIENDO nume1 = nume1 + 1;
    |DEL_BUF nomcalf1, nume1, alfa1;
        #0nume1 = alfa1;
|SIGUE;
    #9#0 = #2#87;
|LEE 020#9=;
|FPRC;
