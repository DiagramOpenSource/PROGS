|FICHEROS;
    nomcalfi #0;
    || nomgruec;            || grupos de empresas Cabs.
    || nomgruel;            || grupos de empresas Lins.
               || estos dos por compatibilidad por el nomcal_4, en verdad no
               || se usan
    &copiadef@ #500;
|FIN;          || se usan

|VARIABLES;
     htipo = 2;
     salte_1 = 0;
     salte_2 = 0;
     aParam = "";
     swSegPasada = 0;
     nPaso = 0;
     swCompAjuste = 0;
     &nElMes = 0;
     &nElAny = 0;
     &nRetEstAnu = 0;
     &nImportePagaMes = 0;
     swCambiaCot = 0;
     &nLabornet = 0;
     &nValorPreaviso = 0;
|FIN;

|INCLUYE i_finiq;
|INCLUYE nomcal_2;
|INCLUYE nomcal_1;
|INCLUYE nomcal_3;
||INCLUYE nomcal_4;
|INCLUYE nomcal_5;

***************************************************************************
   INICIO DEL CALCULO
***************************************************************************

|PROGRAMA;
|HAZ LeeEURODB;
|DDEFECTO #0;
    #0#0 = fq_emp;
    #0#1 = fq_tra;
    #0#8 = fq_mes;
    #0#9 = fq_any;
    nElMes = #0#8;
    nElAny = #0#9;
|HAZ tipos;
|HAZ varios;
|ABRE #09;
|ABRE #10;
|HAZ LeePaga;
     alfa1 = Usuario;
     |QBF alfa1;
     nomtmpca = "c3" + alfa1;
     nomtmpli = "c4" + alfa1;
|NOME_DAT #11 nomtmpca;
|NOME_DAT #12 nomtmpli;
|DELINDEX #11;
|DELINDEX #12;
|ABRET #11;
|ABRET #12;
||HAZ ini_log;
|DDEFECTO #labtraba;
|ABRE #labtraba;
    #labtraba#0 = #0#0;
    #labtraba#1 = #0#1;
|LEE 020#labtraba.=;
|CIERRA #labtraba;
|HAZ chequea;
|SI swfuera = 0;
    |HAZ historico;
    |SI swfuera = 0;
            #9#0 = #labtraba#87;
        |LEE 000#9=;
        |SI FSalida = 0;
            cabecera = 0;
            nIncid = 0;
            |HAZ leeregis;
            |HAZ EnPracticas;
            |HAZ t_parcial;
            |HAZ leeconceptos;

            |HAZ cabecera;
        |SINO;
            |ATRI P;
                trabamen = #labtraba#87;
                trabamen = "    " + mensaje1 + trabamen + mensaje2;
            |MENAV trabamen;
            |ATRI 0;
        |FINSI;
    |FINSI;
|FINSI;
|CIERRAT #11;
|CIERRAT #12;
|CIERRA #09;
|CIERRA #10;
|CORRE ":laboral/nomcalfi";
||HAZ fin_log;
||SI nNroErrores > 0;
     ||HAZ CargaLog;
||FINSI;
|FPRO;

|PROCESO varios;
    mesnum = #0#8;
    anynum = #0#9;
|HAZ ulti_dia;
    guarda = topemes;      || cambia de variable para no perderlo

     alfa1 = Usuario;
     |QBF alfa1;
     nomtmpca = "c3" + alfa1;
     nomtmpli = "c4" + alfa1;
|FPRC;

|PROCESO LeePaga;
     || me quedo con el importe de lo que se le ha pagado de Paga Extra
     || el mes de calculo del finiquito

     |ABRE #nomcalca;
     #nomcalca#0 = #0#0;
     #nomcalca#1 = #0#1;
     #nomcalca#2 = #0#8;
     #nomcalca#3 = 0;
     |LEE 000#nomcalca.=;
     |SI FSalida = 0;
          nImportePagaMes = #nomcalca#16;
     |FINSI;
     |CIERRA #nomcalca;
|FPRC;

|PROCESO proceso;
     || para compatibilidad con el nomcal_4
|FPRC;
