|FICHEROS;
     nomcot35 #0;

     nomcot02 #2;
     nomcot03 #3;
     nomcot04 #4;

     labempre;
     labtraba;
     labcentr;
     nomcenes;
|FIN;

|VARIABLES;
     nEmp = 0;
     nAny = 0;
     nMes = 0;
     nTip = 0;
     aNaf = "";

     aParametro = "";

     nCampo = 0;
     aAlfa = "";
     &eaOpcion = "";

 {-1}aVent = "";
     aVent1 = 0;
     aVent2 = 0;
     aVent3 = 0;
     aVent4 = 0;
     aVent5 = "";

     nGrid2 = 0;
     nGrid3 = 0;
     nGrid4 = 0;
     nVentana = 0;
     nRango = 0;
     aEsc1 = "";
     aEsc2 = "";
     aRetu = "";
     aTecla = "";
|FIN;

|PROCESO Baja4;
     #nomcot04#0 = #nomcot02#0;
     #nomcot04#1 = #nomcot02#1;
     #nomcot04#2 = #nomcot02#2;
     #nomcot04#3 = #nomcot02#3;
     #nomcot04#4 = #nomcot02#4;
     #nomcot04#5 = #nomcot02#5;
     #nomcot04#6 = #nomcot02#6;
     #nomcot04#10 = 001;
|FPRC;

|PROCESO Alta4;
     #nomcot04#0 = #nomcot02#0;
     #nomcot04#1 = #nomcot02#1;
     #nomcot04#2 = #nomcot02#2;
     #nomcot04#3 = #nomcot02#3;
     #nomcot04#4 = #nomcot02#4;
     #nomcot04#5 = #nomcot02#5;
     #nomcot04#6 = #nomcot02#6;
     #nomcot04#10 = 999;
|FPRC;

|PROCESO Baja3;
     #nomcot03#0 = #nomcot02#0;
     #nomcot03#1 = #nomcot02#1;
     #nomcot03#2 = #nomcot02#2;
     #nomcot03#3 = #nomcot02#3;
     #nomcot03#4 = #nomcot02#4;
     #nomcot03#5 = #nomcot02#5;
     #nomcot03#6 = #nomcot02#6;
     #nomcot03#7 = #nomcot02#7;
     #nomcot03#10 = 001;
|FPRC;

|PROCESO Alta3;
     #nomcot03#0 = #nomcot02#0;
     #nomcot03#1 = #nomcot02#1;
     #nomcot03#2 = #nomcot02#2;
     #nomcot03#3 = #nomcot02#3;
     #nomcot03#4 = #nomcot02#4;
     #nomcot03#5 = #nomcot02#5;
     #nomcot03#6 = #nomcot02#6;
     #nomcot03#7 = #nomcot02#7;
     #nomcot03#10 = 999;
|FPRC;

|PROCESO Baja2;
     #nomcot02#0 = nEmp;
     #nomcot02#1 = nAny;
     #nomcot02#2 = nMes;
     #nomcot02#3 = nTip;
     #nomcot02#4 = "               ";
     #nomcot02#5 = aNaf;
     #nomcot02#6 = 01;
     #nomcot02#7 = 00001;
|FPRC;

|PROCESO Alta2;
     #nomcot02#0 = nEmp;
     #nomcot02#1 = nAny;
     #nomcot02#2 = nMes;
     #nomcot02#3 = nTip;
     #nomcot02#4 = "zzzzzzzzzzzzzzz";
     #nomcot02#5 = aNaf;
     #nomcot02#6 = 99;
     #nomcot02#7 = 99999;
|FPRC;

|PROCESO Evento2;
     |SI FSalida = 1;  |O FSalida = 2;
         |LEE 000#2=;

         |REFRESCACONTROL nGrid3;
         |REFRESCACONTROL nGrid4;
         |PULSATECLA;
     |FINSI;
|FPRC;

|PROGRAMA;
     |ABRE #2;
     |ABRE #3;
     |ABRE #4;

     |VENTANA 0501, 3699, -1, 16, "Consulta de tramos";
     nVentana = FSalida;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nVentana;
     aVent5 = "MODAL";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     nRango = 4 + 8 + 16 + 32 + 128;

     aParametro = PARAMETRO;
     |QBF aParametro;
     aAlfa = aParametro % 105; nEmp = aAlfa;
     aAlfa = aParametro % 604; nAny = aAlfa;
     aAlfa = aParametro % 1002; nMes = aAlfa;
     aAlfa = aParametro % 1201; nTip = aAlfa;
     aAlfa = aParametro % 1312; aNaf = aAlfa;

     |LINEAL_SIMPLE #1#nomcot02, nRango, 0502, 1160, Baja2, Alta2, Evento2;
     nGrid2 = FSalida;

     |LINEAL_SIMPLE #1#nomcot03, nRango, 1202, 2599, Baja3, Alta3, NULL;
     nGrid3 = FSalida;

     |LINEAL_SIMPLE #1#nomcot04, nRango, 2602, 3299, Baja4, Alta4, NULL;
     nGrid4 = FSalida;


     aEsc1  = &255 + "806";
     aEsc2  = &255 + "807";
     aRetu  = &255 + "802";
     |PARA; |SI;  |HACIENDO;
         FSalida = "::{{001}}Salir," + nGrid2;
         |LEETECLA aTecla;
         |SI aTecla = aEsc1; |SAL;  |FINSI;
         |SI aTecla = aEsc2; |SAL;  |FINSI;
         |SI aTecla = aRetu; |SAL;  |FINSI;
     |SIGUE;

     |DESTRUYECONTROL nGrid2;
     |DESTRUYECONTROL nGrid3;
     |DESTRUYECONTROL nGrid4;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nVentana;
     aVent5 = "MODELESS";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     |FINVENTANA nVentana;

     |CIERRA #4;
     |CIERRA #3;
     |CIERRA #2;
|FPRO;
