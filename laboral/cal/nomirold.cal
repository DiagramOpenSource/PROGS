/****************************************************************************/
/********** CALCULOS DE IRPF DE A¤OS ANTERIORES QUE YA NO SE USAN ***********/
/********************* Y QUE VOY QUITANDO DEL NOMIR003 **********************/
/****************************************************************************/

/*

|| DEL PROCESO CuotaRetencion

(1)

     |SI #0#2 = 2007;
          aEXENTOS = "N";
          |SI nRETRIB [ 15860;
               |SI #104#8 = "1";
                    nNume1 = 12775 + nPENSION + nDESEM;
                    |SI #104#19 = 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 14525 + nPENSION + nDESEM;
                    |SI #104#19 > 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
               |FINSI;
               |SI #104#8 = "2";
                    nNume1 = 12340 + nPENSION + nDESEM;
                    |SI #104#19 = 0; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 13765 + nPENSION + nDESEM;
                    |SI #104#19 = 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 15860 + nPENSION + nDESEM;
                    |SI #104#19 > 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
               |FINSI;
               |SI #104#8 = "3";
                    nNume1 = 9650 + nPENSION + nDESEM;
                    |SI #104#19 = 0; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 10365 + nPENSION + nDESEM;
                    |SI #104#19 = 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 11155 + nPENSION + nDESEM;
                    |SI #104#19 > 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
               |FINSI;
          |FINSI;
     |FINSI;
     |SI #0#2 = 2008;
          aEXENTOS = "N";
          |SI nRETRIB [ 16102;
               |SI #104#8 = "1";
                    nNume1 = 12996 + nPENSION + nDESEM;
                    |SI #104#19 = 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 14767 + nPENSION + nDESEM;
                    |SI #104#19 > 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
               |FINSI;
               |SI #104#8 = "2";
                    nNume1 = 12533 + nPENSION + nDESEM;
                    |SI #104#19 = 0; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 13985 + nPENSION + nDESEM;
                    |SI #104#19 = 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 16102 + nPENSION + nDESEM;
                    |SI #104#19 > 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
               |FINSI;
               |SI #104#8 = "3";
                    nNume1 = 9843 + nPENSION + nDESEM;
                    |SI #104#19 = 0; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 10569 + nPENSION + nDESEM;
                    |SI #104#19 = 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 11376 + nPENSION + nDESEM;
                    |SI #104#19 > 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
               |FINSI;
          |FINSI;
     |FINSI;
      |SI #0#2 = 2009;
          aEXENTOS = "N";
          |SI nRETRIB [ 17882;
               |SI #104#8 = "1";
                    nNume1 = 14369 + nPENSION + nDESEM;
                    |SI #104#19 = 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 16547 + nPENSION + nDESEM;
                    |SI #104#19 > 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
               |FINSI;
               |SI #104#8 = "2";
                    nNume1 = 13851 + nPENSION + nDESEM;
                    |SI #104#19 = 0; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 15704 + nPENSION + nDESEM;
                    |SI #104#19 = 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 17882 + nPENSION + nDESEM;
                    |SI #104#19 > 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
               |FINSI;
               |SI #104#8 = "3";
                    nNume1 = 11162 + nPENSION + nDESEM;
                    |SI #104#19 = 0; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 11888 + nPENSION + nDESEM;
                    |SI #104#19 = 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 12695 + nPENSION + nDESEM;
                    |SI #104#19 > 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
               |FINSI;
          |FINSI;
     |FINSI;

     |SI #0#2 ] 2010; |Y #0#2 [ 2014;
          aEXENTOS = "N";
          |SI nRETRIB [ 16952;
               |SI #104#8 = "1";
                    nNume1 = 13662 + nPENSION + nDESEM;
                    |SI #104#19 = 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 15617 + nPENSION + nDESEM;
                    |SI #104#19 > 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
               |FINSI;
               |SI #104#8 = "2";
                    nNume1 = 13335 + nPENSION + nDESEM;
                    |SI #104#19 = 0; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 14774 + nPENSION + nDESEM;
                    |SI #104#19 = 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 16952 + nPENSION + nDESEM;
                    |SI #104#19 > 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
               |FINSI;
               |SI #104#8 = "3";
                    nNume1 = 11162 + nPENSION + nDESEM;
                    |SI #104#19 = 0; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 11888 + nPENSION + nDESEM;
                    |SI #104#19 = 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
                    nNume1 = 12519 + nPENSION + nDESEM;
                    |SI #104#19 > 1; |Y nRETRIB [ nNume1; aEXENTOS = "S";  |FINSI;
               |FINSI;
          |FINSI;
     |FINSI;
*/

/*
|| Tambien DEL PROCESO CuotaRetencion

(2)
     |SI #0#2 = 2007;
          |SI nRETRIB [ 22000;               || limite del 43%
               |SI aSITUFAM = "1";
                    |SI nNUMDES = 1;
                         nLIMITE = (nRETRIB - (12775 + nPENSION + nDESEM)) * 0.43;
                    |FINSI;
                    |SI nNUMDES > 1;
                         nLIMITE = (nRETRIB - (14525 + nPENSION + nDESEM)) * 0.43;
                    |FINSI;
               |FINSI;
               |SI aSITUFAM = "2";
                    |SI nNUMDES = 0;
                         nLIMITE = (nRETRIB - (12340 + nPENSION + nDESEM)) * 0.43;
                    |FINSI;
                    |SI nNUMDES = 1;
                         nLIMITE = (nRETRIB - (13765 + nPENSION + nDESEM)) * 0.43;
                    |FINSI;
                    |SI nNUMDES > 1;
                         nLIMITE = (nRETRIB - (15860 + nPENSION + nDESEM)) * 0.43;
                    |FINSI;
               |FINSI;
               |SI aSITUFAM = "3";
                    |SI nNUMDES = 0;
                         nLIMITE = (nRETRIB - (9650 + nPENSION + nDESEM)) * 0.43;
                    |FINSI;
                    |SI nNUMDES = 1;
                         nLIMITE = (nRETRIB - (10365 + nPENSION + nDESEM)) * 0.43;
                    |FINSI;
                    |SI nNUMDES > 1;
                         nLIMITE = (nRETRIB - (11155 + nPENSION + nDESEM)) * 0.43;
                    |FINSI;
               |FINSI;
               |SI nCUOTA > nLIMITE;
                    nCUOTA = nLIMITE;
               |FINSI;
          |FINSI;
     |FINSI;
     |SI #0#2 = 2008;
          |SI nRETRIB [ 22000;               || limite del 43%
               |SI aSITUFAM = "1";
                    |SI nNUMDES = 1;
                         nLIMITE = (nRETRIB - (12996 + nPENSION + nDESEM)) * 0.43;
                    |FINSI;
                    |SI nNUMDES > 1;
                         nLIMITE = (nRETRIB - (14767 + nPENSION + nDESEM)) * 0.43;
                    |FINSI;
               |FINSI;
               |SI aSITUFAM = "2";
                    |SI nNUMDES = 0;
                         nLIMITE = (nRETRIB - (12533 + nPENSION + nDESEM)) * 0.43;
                    |FINSI;
                    |SI nNUMDES = 1;
                         nLIMITE = (nRETRIB - (13985 + nPENSION + nDESEM)) * 0.43;
                    |FINSI;
                    |SI nNUMDES > 1;
                         nLIMITE = (nRETRIB - (16102 + nPENSION + nDESEM)) * 0.43;
                    |FINSI;
               |FINSI;
               |SI aSITUFAM = "3";
                    |SI nNUMDES = 0;
                         nLIMITE = (nRETRIB - (9843 + nPENSION + nDESEM)) * 0.43;
                    |FINSI;
                    |SI nNUMDES = 1;
                         nLIMITE = (nRETRIB - (10569 + nPENSION + nDESEM)) * 0.43;
                    |FINSI;
                    |SI nNUMDES > 1;
                         nLIMITE = (nRETRIB - (11376 + nPENSION + nDESEM)) * 0.43;
                    |FINSI;
               |FINSI;
               |SI nCUOTA > nLIMITE;
                    nCUOTA = nLIMITE;
               |FINSI;
          |FINSI;
     |FINSI;

     |SI #0#2 = 2009;
          |SI nRETRIB [ 22000;               || limite del 43%
               nNume = 400;
               |SI aSITUFAM = "1";
                    |SI nNUMDES = 1;
                         nLIMITE = nNume + ((nRETRIB - (14369 + nPENSION + nDESEM)) * 0.43);
                    |FINSI;
                    |SI nNUMDES > 1;
                         nLIMITE = nNume + ((nRETRIB - (16547 + nPENSION + nDESEM)) * 0.43);
                    |FINSI;
               |FINSI;
               |SI aSITUFAM = "2";
                    |SI nNUMDES = 0;
                         nLIMITE = nNume + ((nRETRIB - (13851 + nPENSION + nDESEM)) * 0.43);
                    |FINSI;
                    |SI nNUMDES = 1;
                         nLIMITE = nNume + ((nRETRIB - (15704 + nPENSION + nDESEM)) * 0.43);
                    |FINSI;
                    |SI nNUMDES > 1;
                         nLIMITE = nNume + ((nRETRIB - (17882 + nPENSION + nDESEM)) * 0.43);
                    |FINSI;
               |FINSI;
               |SI aSITUFAM = "3";
                    |SI nNUMDES = 0;
                         nLIMITE = nNume + ((nRETRIB - (11162 + nPENSION + nDESEM)) * 0.43);
                    |FINSI;
                    |SI nNUMDES = 1;
                         nLIMITE = nNume + ((nRETRIB - (11888 + nPENSION + nDESEM)) * 0.43);
                    |FINSI;
                    |SI nNUMDES > 1;
                         nLIMITE = nNume + ((nRETRIB - (12695 + nPENSION + nDESEM)) * 0.43);
                    |FINSI;
               |FINSI;
               |SI nCUOTA > nLIMITE;
                    nCUOTA = nLIMITE;
               |FINSI;
          |FINSI;
     |FINSI;

     |SI #0#2 ] 2010; |Y #0#2 [ 2014;
          |SI nBASE [ 8000;
               nDEDUCCION = 400;
          |SINO;
               |SI 8000 < nBASE; |Y nBASE [ 12000;
                    nDEDUCCION = 400 - (0.1 * (nBASE - 8000));
               |SINO;
                    nDEDUCCION = 0;
               |FINSI;
          |FINSI;

          |SI nRETRIB [ 22000;               || limite del 43%
               |SI aSITUFAM = "1";
                    |SI nNUMDES = 1;
                         nLIMITE = nDEDUCCION + ((nRETRIB - (13662 + nPENSION + nDESEM)) * 0.43);
                    |FINSI;
                    |SI nNUMDES > 1;
                         nLIMITE = nDEDUCCION + ((nRETRIB - (15617 + nPENSION + nDESEM)) * 0.43);
                    |FINSI;
               |FINSI;
               |SI aSITUFAM = "2";
                    |SI nNUMDES = 0;
                         nLIMITE = nDEDUCCION + ((nRETRIB - (13335 + nPENSION + nDESEM)) * 0.43);
                    |FINSI;
                    |SI nNUMDES = 1;
                         nLIMITE = nDEDUCCION + ((nRETRIB - (14774 + nPENSION + nDESEM)) * 0.43);
                    |FINSI;
                    |SI nNUMDES > 1;
                         nLIMITE = nDEDUCCION + ((nRETRIB - (16952 + nPENSION + nDESEM)) * 0.43);
                    |FINSI;
               |FINSI;
               |SI aSITUFAM = "3";
                    |SI nNUMDES = 0;
                         nLIMITE = nDEDUCCION + ((nRETRIB - (11162 + nPENSION + nDESEM)) * 0.43);
                    |FINSI;
                    |SI nNUMDES = 1;
                         nLIMITE = nDEDUCCION + ((nRETRIB - (11888 + nPENSION + nDESEM)) * 0.43);
                    |FINSI;
                    |SI nNUMDES > 1;
                         nLIMITE = nDEDUCCION + ((nRETRIB - (12519 + nPENSION + nDESEM)) * 0.43);
                    |FINSI;
               |FINSI;
               |SI nCUOTA > nLIMITE;
                    nCUOTA = nLIMITE;
               |FINSI;
          |FINSI;
     |FINSI;
*/

/*

|| DEL PROCESO TipoRetencion

(1)

     |SI nElAnyIRPF = 2008; |Y nElMesIRPF ] 7;
          swSegSem = 1;
     |FINSI;
     |SI nModoExt ! 0;   || para que coja el algorito del segundo semestre
          |SI nElAnyIRPF = 2008;
               swSegSem = 1;  || cuando venga del menu
          |FINSI;
     |FINSI;
     |SI nDiferencias = 1;    || para que coja el algorito del segundo semestre
          nElAnyIRPF = nVAny;
          |SI nElAnyIRPF = 2008;
               swSegSem = 1;       || cuando venga del nomir011
          |FINSI;
     |FINSI;

     |SI nElAnyIRPF [ 2008; |Y swSegSem = 0; || hasta Jun-2008
          nTIPO = (nCUOTA / nRETRIB) * 100;
          nTIPO = nTIPO - .005;              || trunca a dos decimales
          nTIPO = nTIPO ! 2;

          |SI nTIPO < 0; nTIPO = 0;     |FINSI;

                                        || limites generales (2%, 15% y 45%)
          |SI nTIPO > 43;
               nTIPO = 43;
          |SINO;
               |SI nCONTRATO = "3"; |Y nTIPO < 15;
                    nTIPO = 15;
               |SINO;
                    |SI nCONTRATO = "2"; |Y nTIPO < 2;
                         nTIPO = 2;
                    |FINSI;
               |FINSI;
          |FINSI;

          |SI #102#14 = "S"; |Y #102#15 = "N";    || residencia en Ceuta/Melilla y
               nTIPO = nTIPO / 2;                 || no regularizacion
          |FINSI;

          nTIPO = nTIPO ! 0;

          nIMPORTE = nRETRIB % nTIPO;
          nIMPORTE = nIMPORTE ! 2;
     |FINSI;
     |SI nElAnyIRPF = 2009; |O swSegSem = 1;      || Segundo Semestre Jun-2008
                                                  || en adelante
          nTIPOPREVIO = (nCUOTA / nRETRIB) * 100;
          nTIPOPREVIO = nTIPOPREVIO - .005;              || trunca a dos decimales
          nTIPOPREVIO = nTIPOPREVIO ! 2;
          |SI nTIPOPREVIO < 0; nTIPOPREVIO = 0; |FINSI;

          nTIPOPREVIOR = nTIPOPREVIO ! 0;

          nTIPOPREVIOCM = nTIPOPREVIO / 2;
          nTIPOPREVIOCM = nTIPOPREVIOCM - .005;    || trunca a dos decimales
          |SI nTIPOPREVIOCM < 0; nTIPOPREVIOCM = 0; |FINSI;
          nTIPOPREVIOCM = nTIPOPREVIOCM ! 2;
          nTIPOPREVIOCMR = nTIPOPREVIOCM ! 0;       || REDONDEA dos decimales

          |SI #102#14 = "S";    || residencia en Ceuta/Melilla
               nIMPORTEPREVIO = (nRETRIB * nTIPOPREVIOCMR) / 100;
          |SINO;
               nIMPORTEPREVIO = (nRETRIB * nTIPOPREVIOR) / 100;
          |FINSI;

          nIMPORTEPREVIO = nIMPORTEPREVIO ! 2;

          || APLICACION DEDUCCION ART. 80 BIS IRPF

          |SI nElAnyIRPF = 2008;
               nDIFERENCIAPOSITIVA = nIMPORTEPREVIO - 400;
               |SI nDIFERENCIAPOSITIVA < 0;
                    nDIFERENCIAPOSITIVA = 0;
               |FINSI;
          |FINSI;
          |SI nElAnyIRPF = 2009;
               |SI nRETRIB < 33007.20; |Y aPRESVIV = "S";
                    nMINOPAGO = nRETRIB % 2;
               |SINO;
                    nMINOPAGO = 0;
               |FINSI;

               nMINOPAGO = nMINOPAGO ! 2;

               nDIFERENCIAPOSITIVA = nIMPORTEPREVIO - 400 - nMINOPAGO;
               |SI nDIFERENCIAPOSITIVA < 0;
                    nDIFERENCIAPOSITIVA = 0;
               |FINSI;
          |FINSI;

          nTIPO = (nDIFERENCIAPOSITIVA / nRETRIB) * 100;
          nTIPO = nTIPO - .005;              || trunca a dos decimales
          nTIPO = nTIPO ! 2;
          |SI nTIPO < 0; nTIPO = 0; |FINSI;

          |SI #102#14 = "S";       || RESIDENCIA EN CEUTA/CELILLA
               |SI nCONTRATO = "3"; |Y nTIPO < 8;
                    nTIPO = 8;
               |SINO;
                    |SI nCONTRATO = "2"; |Y nTIPO < 1;
                         nTIPO = 1;
                    |FINSI;
               |FINSI;
          |SINO;
               |SI nCONTRATO = "3"; |Y nTIPO < 15;
                    nTIPO = 15;
               |SINO;
                    |SI nCONTRATO = "2"; |Y nTIPO < 2;
                         nTIPO = 2;
                    |FINSI;
               |FINSI;
          |FINSI;

          nIMPORTE = (nRETRIB * nTIPO) / 100;
          nIMPORTE = nIMPORTE ! 2;
     |FINSI;

     |SI nElAnyIRPF ] 2010; |Y nElAnyIRPF [ 2014;   || A¤o 2010 hasta 2014
          nTIPOPREVIO = (nCUOTA / nRETRIB) * 100;
          nTIPOPREVIO = nTIPOPREVIO - .005;            || trunca a dos decimales
          nTIPOPREVIO = nTIPOPREVIO ! 2;
          |SI nTIPOPREVIO < 0; nTIPOPREVIO = 0; |FINSI;

          nTIPOPREVIOR = nTIPOPREVIO ! 0;         || REDONDEA A CERO DECIMALES

          nTIPOPREVIOCM = nTIPOPREVIO / 2;
          nTIPOPREVIOCM = nTIPOPREVIOCM - .005;
          nTIPOPREVIOCM = nTIPOPREVIOCM ! 2;      || TRUNCA a dos decimales
          |SI nTIPOPREVIOCM < 0; nTIPOPREVIOCM = 0; |FINSI;

          nTIPOPREVIOCMR = nTIPOPREVIOCM ! 0;     || REDONDEA a cero decimales

          |SI #102#14 = "S";    || residencia en Ceuta/Melilla
               nIMPORTEPREVIO = (nRETRIB * nTIPOPREVIOCMR) / 100;
          |SINO;
               nIMPORTEPREVIO = (nRETRIB * nTIPOPREVIOR) / 100;
          |FINSI;

          || APLICACION DEDUCCION ART. 80 BIS IRPF

          |SI nElAnyIRPF = 2010;                       || A¤o 2010
               |SI nRETRIB < 33007.20; |Y aPRESVIV = "S";
                    nMINOPAGO = nRETRIB % 2;
               |SINO;
                    nMINOPAGO = 0;
               |FINSI;
          |FINSI;

          |SI nElAnyIRPF ] 2011;                       || A¤o 2011
               nDedVivTra = 0;
               nDedVivGen = 0;
               |SI nRETRIB < 33007.20; |Y aPRESVIV2 = "S";
                    nDedVivTra = 1;
               |FINSI;
               |SI nElAnyIRPF = 2011; |O nMes2012 = 1;
                    |SI nRETRIB < 22000.00; |Y aPRESVIV1 = "S";
                         nDedVivGen = 1;
                    |FINSI;
               |FINSI;
               |SI nMes2012 ] 2;
                    |SI nRETRIB < 33007.20; |Y aPRESVIV1 = "S";
                         nDedVivGen = 1;
                    |FINSI;
               |FINSI;
               |SI nDiferencias = 1;
                    || vengo de buscar diferencias con el informe
                    || no compruebo los importes maximos ya que puede ser
                    || que durante el a¤o lo haya superado, pero lo deducido
                    || por vivienda hasta ahi estara correcto
                    |SI aPRESVIV2 = "S";
                         nDedVivTra = 1;
                    |FINSI;
                    |SI aPRESVIV1 = "S";
                         nDedVivGen = 1;
                    |FINSI;
               |FINSI;
               |SI nDedVivTra = 1; |O nDedVivGen = 1;
                    nMINOPAGO = nRETRIB % 2;
               |SINO;
                    nMINOPAGO = 0;
               |FINSI;
          |FINSI;

          nMINOPAGO = nMINOPAGO - .005;              || trunca a dos decimales
          nMINOPAGO = nMINOPAGO ! 2;
          |SI nMINOPAGO < 0; nMINOPAGO = 0;     |FINSI;

          nDIFERENCIAPOSITIVA = nIMPORTEPREVIO - nDEDUCCION - nMINOPAGO;
          |SI nDIFERENCIAPOSITIVA < 0;
               nDIFERENCIAPOSITIVA = 0;
          |FINSI;

          nTIPO = (nDIFERENCIAPOSITIVA / nRETRIB) * 100;
          nTIPO = nTIPO - .005;              || trunca a dos decimales
          nTIPO = nTIPO ! 2;
          |SI nTIPO < 0; nTIPO = 0; |FINSI;

          |SI #102#14 = "S";       || RESIDENCIA EN CEUTA/CELILLA
               |SI nCONTRATO = "3"; |Y nTIPO < 8;
                    nTIPO = 8;
               |SINO;
                    |SI nCONTRATO = "2"; |Y nTIPO < 1;
                         nTIPO = 1;
                    |FINSI;
               |FINSI;
          |SINO;
               |SI nCONTRATO = "3"; |Y nTIPO < 15;
                    nTIPO = 15;
               |SINO;
                    |SI nCONTRATO = "2"; |Y nTIPO < 2;
                         nTIPO = 2;
                    |FINSI;
               |FINSI;
          |FINSI;

          nIMPORTE = (nRETRIB * nTIPO) / 100;
          nIMPORTE = nIMPORTE ! 2;
     |FINSI;
*/


/*

|| DEL PROCESO Regulariza2011

(1)

     |SI nElAnyIRPF = 2011; |O nMes2012 = 1;
          |SI #102#14 = "S"; |Y #102#115 = "N"; |Y #102#116 = 7;
               nIMPORTEPREVIO = (nPERCIBIDO * nTIPOPREVIOR) / 100;
               nIMPORTEPREVIO = (nRETRIB - nPERCIBIDO) * nTIPOPREVIOCMR / 100;
          |SINO;
               |SI #102#14 = "N"; |Y #102#115 = "S"; |Y #102#116 = 8;
                    nIMPORTEPREVIO = (nPERCIBIDO * nTIPOPREVIOCMR) / 100;
                    nIMPORTEPREVIO = (nRETRIB - nPERCIBIDO) * nTIPOPREVIOR / 100;
               |FINSI;
          |FINSI;
     |FINSI;

     |SI nMes2012 ] 2; |Y nElAnyIRPF [ 2014;
          swSI = 0;
          |SI nElAnyIRPF = 2012;
               |SI #102#14 = "S"; |Y #102#115 = "N";
                    |SI #102#116 = 7; |O #102#116 = 11;
                         swSI = 1;
                    |FINSI;
               |FINSI;
          |FINSI;
          |SI nElAnyIRPF ] 2013;
               |SI #102#14 = "S"; |Y #102#115 = "N"; |Y #102#116 = 7;
                    swSI = 1;
               |FINSI;
          |FINSI;
          |SI swSI = 1;
               nIMPORTEPREVIO = (nPERCIBIDO * nTIPOPREVIOR) / 100;
               nIMPORTEPREVIO = (nRETRIB - nPERCIBIDO) * nTIPOPREVIOCMR / 100;
          |SINO;
               swSI = 0;
               |SI nElAnyIRPF = 2012;
                    |SI #102#14 = "N"; |Y #102#115 = "S";
                         |SI #102#116 = 8; |O #102#116 = 11;
                              swSI = 1;
                         |FINSI;
                    |FINSI;
               |FINSI;
               |SI nElAnyIRPF ] 2013;
                    |SI #102#115 = "S"; |Y #102#116 = 8;
                         swSI = 1;
                    |FINSI;
               |FINSI;
               |SI swSI = 1;
                    nIMPORTEPREVIO = (nPERCIBIDO * nTIPOPREVIOCMR) / 100;
                    nIMPORTEPREVIO = (nRETRIB - nPERCIBIDO) * nTIPOPREVIOR / 100;
               |FINSI;
          |FINSI;
     |FINSI;
*/
