|FICHEROS;
     pdfdocca;
     pdfdocli;
|FIN;

|VARIABLES;
     aPath = "";
     aFichero = "";
     nCanal = 0;
     nCaracter = 0;
     aCaracter = "";
     nCampo = 0;
     aCampo = "";
     nBusca = 0;
     aLinea = "";

     {-1}menu = "";
     menu1 = "2400";
     menu2 = "2";
     menu3 = "Elegir Opcion:";
     menu4 = "AC";
     menu5 = "Editar";
     menu6 = "Actualizar";
     aAlfa1 = "";
     nOpcion = 0;
     aOrigen = "";
     aDestino = "";
|FIN;

|PROCESO BuscaCampo;
     aCampo = "";
     |PARA nCaracter = 1; |SI nCaracter [ 50; |HACIENDO nCaracter = nCaracter + 1;
          nBusca = (nCaracter * 100) + 1;
          aCaracter = aLinea % nBusca;
          |SI aCaracter = "[";
               |SAL;
          |SINO;
               aCampo = aCampo + aCaracter;
          |FINSI;
     |SIGUE;
     |QBF aCampo;
     #pdfdocli#0 = #pdfdocca#0;
     #pdfdocli#1 = nCampo;
     #pdfdocli#2 = aCampo;
     |GRABA 020#pdfdocli.n;
|FPRC;

|PROCESO Campos;
     aFichero = #pdfdocca#0;
     |QBF aFichero;
     |DBASE aPath;
     |QBF aPath;
     || aPath = aPath + "pdf/" + aFichero;
     || aPath = aPath - ".pdf";
     aPath = aPath + "pdf/campos.txt";

     |XABRE "U", aPath, nCanal;
     |SI FSalida ] 0;
          |PARA nCampo = 1; |SI FSalida ] 0; |HACIENDO nCampo = nCampo + 1;
               |XLEE nCanal, 100, aLinea;
               |QBF aLinea;
               |SI aLinea = ""; |SAL;   |FINSI;
               |HAZ BuscaCampo;
          |SIGUE;
     |FINSI;
     |LIBERA #pdfdocli;
     |CIERRA #pdfdocli;
|FPRC;

|PROCESO BorraLineas;
     |BORRA 020#pdfdocli.a;
|FPRC;

|DEFBUCLE BorraLineas;
     #pdfdocli#1;
     ;
     #pdfdocca#0,   1;
     #pdfdocca#0, 999;
     be;
     NULL, BorraLineas;
|FINSI;

|PROCESO ElMenu; |TIPO 0;
/*
     |CONFI "    NEste proceso crea los campos del contrato desde el fichero campos.txt. Continuar?";
     |SI FSalida = 0;
          |ABRE #pdfdocli;
          |BUCLE BorraLineas;
          |HAZ Campos;
     |FINSI;
*/
|FPRC;

|PROCESO CopiaCampos;
     #pdfdocli#0 = aDestino;
     |GRABA 020#pdfdocli.n;
     |LIBERA #pdfdocli;
|FPRC;

|DEFBUCLE CopiaCampos;
     #pdfdocli#1;
     ;
     aOrigen, 001;
     aOrigen, 999;
     ;
     NULL, CopiaCampos;
|FIN;

|PROCESO Copia;
/*
     |CONFI "    NEste proceso copia los campos de un contrato a otro. Continuar?";
     |SI FSalida = 0;
          aDestino = #pdfdocca#0;
          |CONSULTA_CLAVE #1#pdfdocca;
          |SI FSalida = 0;
               aOrigen = #pdfdocca#0;
               |BUCLE CopiaCampos;
          |FINSI;
     |FINSI;
*/
|FPRC;
