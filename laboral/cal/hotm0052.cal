|FICHEROS;
     hotm0052  #0;
     hotm0007;
     hotm0008;
     copi0007@ #107;     || Copia del hotm0007 para CARGA_DEF
     copi0008@ #108;     || Copia del hotm0008 para CARGA_DEF
|FIN;

|VARIABLES;
     swCopia = 0;
     swBorra = 0;
     aAlfa = "";
     aDef = "";
|FIN;

|| ----------------------     El hotm0008: Areas y Secciones    --------------

|PROCESO hotm0008;
     #hotm0008#0 = #0#1;
     #hotm0008#1 = #108#1;
     #hotm0008#2 = #108#2;
     #hotm0008#3 = #108#3;
     |GRABA 020#hotm0008.n;
|FPRC;

|DEFBUCLE hotm0008;
     #108#1003;
     ;
     #0#0, "  ", "  ";
     #0#0, "ZZ", "ZZ";
     be;
     NULL, hotm0008;
|FIN;

|PROCESO comprueba8;
     |SI swBorra = 0;
          aAlfa = #0#1;  aAlfa = "00" + aAlfa;    aAlfa = aAlfa % -102;
          aAlfa = "      ATENCION: El Centro " + aAlfa + " ya existe. Se borraran";
          aAlfa = aAlfa + " todos los datos de Areas y Secciones existentes."
          |MENAV aAlfa;
          aAlfa = "     Desea Continuar?";
          |CONFI aAlfa;
          |SI FSalida = 0;
               swBorra = 1;
               |BORRA 020#hotm0008.a;
          |SINO;
               swCopia = 0;
               |ERROR10;
          |FINSI;
     |SINO;
          |BORRA 020#hotm0008.a;
     |FINSI;
|FPRC;

|DEFBUCLE comprueba8;
     #hotm0008#1;
     ;
     #0#1, "  ", "  ";
     #0#1, "ZZ", "ZZ";
     be;
     NULL, comprueba8;
|FIN;

|PROCESO Copia8;
     swBorra = 0;
     swCopia = 1;
     |DDEF aDef;
     aDef = aDef + "hotm0008";
     |CARGA_DEF aDef, copi0008@;
     |SI FSalida = 0;
          |BUCLE comprueba8;
          |SI swCopia = 1;
               |BUCLE hotm0008;
          |FINSI;
     |SINO;
          aAlfa = "    Error en CARGA_DEF: " + aDef;
          |MENAV aAlfa;
     |FINSI;
|FPRC;

|| ----------------------     El hotm0007: Areas     -------------------------

|PROCESO hotm0007;
     #hotm0007#0 = #0#1;
     #hotm0007#1 = #107#1;
     #hotm0007#2 = #107#2;
     |GRABA 020#hotm0007.n;
|FPRC;

|DEFBUCLE hotm0007;
     #107#1002;
     ;
     #0#0, "  ";
     #0#0, "ZZ";
     be;
     NULL, hotm0007;
|FIN;

|PROCESO comprueba7;
     |SI swBorra = 0;
          aAlfa = #0#1;  aAlfa = "00" + aAlfa;    aAlfa = aAlfa % -102;
          aAlfa = "      ATENCION: El Centro " + aAlfa + " ya existe. Se borraran";
          aAlfa = aAlfa + " todos los datos de Areas existentes."
          |MENAV aAlfa;
          aAlfa = "     Desea Continuar?";
          |CONFI aAlfa;
          |SI FSalida = 0;
               swBorra = 1;
               |BORRA 020#hotm0007.a;
          |SINO;
               swCopia = 0;
               |ERROR10;
          |FINSI;
     |SINO;
          |BORRA 020#hotm0007.a;
     |FINSI;
|FPRC;

|DEFBUCLE comprueba7;
     #hotm0007#1;
     ;
     #0#1, "  ";
     #0#1, "ZZ";
     be;
     NULL, comprueba7;
|FIN;

|PROCESO Copia7;
     swBorra = 0;
     swCopia = 1;
     |DDEF aDef;
     aDef = aDef + "hotm0007";
     |CARGA_DEF aDef, copi0007@;
     |SI FSalida = 0;
          |BUCLE comprueba7;
          |SI swCopia = 1;
               |BUCLE hotm0007;
          |FINSI;
     |SINO;
          aAlfa = "    Error en CARGA_DEF: " + aDef;
          |MENAV aAlfa;
     |FINSI;
|FPRC;

|| ---------------------------------------------------------------------------

|PROCESO tipo3; |TIPO 3;
     |SI FSalida = 0;
          |ABRE #hotm0007;
          |HAZ Copia7;
          |CIERRA #hotm0007;
          |LIBERA #hotm0007;
          |SI #0#2 = "S";
               |ABRE #hotm0008;
               |HAZ Copia8;
               |CIERRA #hotm0008;
               |LIBERA #hotm0008;
          |FINSI;
     |FINSI;
|FPRC;
