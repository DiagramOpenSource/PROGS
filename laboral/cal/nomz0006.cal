|FICHEROS;
     nomz0006 #0;
     labempre;
     labtraba;
     nomir001;
     nomir003;
     :basica/agidanif #100;
|FIN;

|VARIABLES;
     &aError = "";
     &swError = "";
     &aError1 = "";
     &swError1 = "";
     nCampo = 0;
     aAlfa = "";
     nHijos = 0;
     swEsta = 0;
     &aTraba = "";
|FIN;

|PROCESO labtraba;
     aTraba = #labtraba#1;
     aTraba = ("00000" + aTraba) % -105;
     |SI #labtraba#44 = "A";
          swEsta = 1;
          |ERROR10;
     |FINSI;
|FPRC;

|DEFBUCLE labtraba;
     #labtraba#5;
     ;
     #nomir003#41, #nomir003#0;
     #nomir003#41, #nomir003#0;
     ;
     NULL, labtraba;
|FIN;

|PROCESO nomir003;
     #nomir001#0 = #nomir003#0;
     #nomir001#2 = #nomir003#40;
     #nomir001#3 = #nomir003#41;
     |LEE 000#nomir001.=;
     |SI FSalida ! 0;         || con datos grabados pero sin cabecera
          |ACABA;             || no cuenta
     |FINSI;
     nHijos = 0;
     aError = "";
     swError = 0;
     aError1 = "";
     swError1 = 0;
     |SI #nomir003#3 = 1;
          |PARA nCampo = 20; |SI nCampo [ 29; |HACIENDO nCampo = nCampo + 1;
               |SI #nomir003#nCampo# ! 0;
                    nHijos = nHijos + 1;
               |FINSI;
          |SIGUE;
          |SI nHijos = 0;
               aError = "Situaci¢n tipo 1 SIN hijos";
               swError = 1;
          |FINSI;
     |FINSI;
     |SI #nomir003#3 = 2;
          aAlfa = #nomir003#4;
          |QBF aAlfa;
          |SI aAlfa = "";
               aError = "Situaci¢n tipo 2 SIN NIF del c¢nyuge";
               swError = 1;
          |FINSI;
     |FINSI;

     #100#0 = #nomir003#0;
     #100#1 = 01;
     |LEE 000#100=;
     |SI FSalida = 0;
          |SI #nomir003#3 ! #100#15;
               swError1 = 1;
               aError1 = "Situac. en Datos Fam. distinta a la de Par. C lculo";
          |FINSI;
     |FINSI;
     |SI aError ! ""; |O aError1 ! "";
          swEsta = 0;
          |BUCLE labtraba;
          |PRINT;
     |FINSI;
|FPRC;

|DEFBUCLE nomir003;
     #nomir003#1;
     ;
     "            ", #0#0, 00001;
     "zzzzzzzzzzzz", #0#0, 99999;
     ;
     NULL, nomir003;
|FIN;

|PROGRAMA;
     |CLS;
     |PINPA #0#0;
     |PINDA #0#0;
     |ENDATOS #1#0;
     |SI FSalida = 0;
          |IMPRE 0;
          |SI FSalida = 0;
               |ABRE #labempre;
               |ABRE #nomir001;
               |ABRE #100;
               |INFOR "nomz0006";
               |BUCLE nomir003;
               |PIEINF;
               |FININF;
               |CIERRA #100;
               |CIERRA #nomir001;
               |CIERRA #labempre;
          |FINSI;
          |FINIMP;
     |FINSI;
|FPRO;
