|FICHEROS;
     noma3m03 #0;
     noma3m04,MANTE;
     nomtrali;
     labtraba;
     nomconli;
|FIN;

|VARIABLES;
     &nModo = 0;
     nModo2 = 0;
     nForma = 0;
     FEstado = 0;
     aAlfa1 = "";
     aAlfa2 = "";
     aMensa = "";
     nNume1 = 0;
     nNume2 = 0;
|FIN;

|PROCESO Pasa;
     |PTEC 802;
|FPRC;

|PROCESO RecargaTra;
     #labtraba#0 = #nomtrali#0;
     #labtraba#1 = #nomtrali#1;
     |LEE 000#labtraba.=;
     |SI FSalida = 0; |Y #labtraba#44 = "A";
          #nomconli#0 = #labtraba#87;
          #nomconli#2 = #nomtrali#2;
          |LEE 000#nomconli.=;

          |DDEFECTO #noma3m04;
          #noma3m04#0 = #nomtrali#0;
          #noma3m04#1 = #nomtrali#1;
          #noma3m04#2 = #nomtrali#2;
          |LEE 000#noma3m04.=;
          |SI FSalida ! 0;
               #noma3m04#0 = #nomtrali#0;
               #noma3m04#1 = #nomtrali#1;
               #noma3m04#2 = #nomtrali#2;
               #noma3m04#3 = #labtraba#2;
               #noma3m04#4 = #nomconli#6;
               nNume1 = #nomtrali#3;
               nNume2 = #nomtrali#4;
               |SI nNume1 = 0; |Y nNume2 = 0;
                    |ACABA;
               |FINSI;

               |SI nNume1 = 0;
                    nNume1 = 1;
               |FINSI;

               #noma3m04#5 = nNume1 * nNume2;
               |GRABA 020#noma3m04.n;
               |LIBERA #noma3m04;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE RecargaTra;
     #nomtrali#1;
     ;
     #0#0, 00001, 001;
     #0#0, 99999, 999;
     be;
     NULL, RecargaTra;
|FIN;
/*
|PROCESO RegrabaCat;
     #nomcateg#0 = #noma3m04#0;
     #nomcateg#1 = #noma3m04#1;
     |LEE 000#nomcateg.=;
     |SI FSalida = 0;
          |SI #noma3m04#2 ! #nomcateg#2;
               #noma3m04#2 = #nomcateg#2;
               |GRABA 020#noma3m04.a;
          |FINSI;
     |SINO;
          aAlfa1 = #noma3m04#1; aAlfa1 = "000" + aAlfa1; aAlfa1 = aAlfa1 % -103;
          aAlfa2 = #noma3m04#2;
          |QBF aAlfa2;
          |SI aAlfa2 ! "";
               aAlfa2 = " - " + aAlfa2;
          |FINSI;
          aMensa = "    ATENCION: La categoría " + aAlfa1 + aAlfa2 + " no existe en ";
          aMensa = aMensa + "las categorías del convenio."
          |MENAV aMensa;
          aMensa = "    Será eliminada de este mantenimiento";
          |MENAV aMensa;
          ||CONFI aMensa;
          ||SI FSalida = 0;
               |BORRA 020#noma3m04.a;
          ||FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE RegrabaCat;
     #noma3m04#1;
     ;
     #0#0, 000;
     #0#0, 999;
     be;
     NULL, RegrabaCat;
|FIN;
*/

|PROCESO Borrador;
     |BORRA 020#noma3m04.a;
|FPRC;

|DEFBUCLE Borrador;
     #noma3m04#1;
     ;
     #noma3m03#0, 00001, 001;
     #noma3m03#0, 99999, 999;
     be;
     NULL, Borrador;
|FIN;

|PROCESO Tipo2; |TIPO 2;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 3;
          |BUCLE Borrador;
     |FINSI;
|FPRC;

|PROCESO inferior;
     #noma3m04#0 = #noma3m03#0;
     #noma3m04#1 = 00001;
     #noma3m04#2 = 001;
|FPRC;

|PROCESO superior;
     #noma3m04#0 = #noma3m03#0;
     #noma3m04#1 = 99999;
     #noma3m04#2 = 999;
|FPRC;

|PROCESO Muestra; |TIPO 14;
     || muestra siempre el valor de lo que se introduzca en la cabecera

     |ENTLINEAL #1#noma3m04, -1, 7, 22, 0, inferior, superior;
     |ATRI I;
|FPRC;

|PROCESO Recarga; |TIPO 3;
     |SI FSalida = 0;
          nModo = (FEntrada / 100) ! 0;
          |SI nModo = 1;
               |ABRE #noma3m04;
               |ABRE #labtraba;
               |ABRE #nomconli;

               |BUCLE RecargaTra;

               |CIERRA #nomconli;
               |CIERRA #labtraba;
               |CIERRA #noma3m04;
          |FINSI;

          |SI nModo = 1; |O nModo = 2;
               |ENTLINEAL #1#noma3m04, -1, 2, 22, 0, inferior, superior;
          |FINSI;
          |SI nModo = 4;
               |ENTLINEAL #1#noma3m04, -1, 4, 22, 0, inferior, superior;
          |FINSI;
          ||PTEC 806;
     |FINSI;

/*
     |SI nModo = 2;
          |ABRE #noma3m04;
          |BUCLE RegrabaCat;
          |CIERRA #noma3m04;
     |FINSI;
*/
|FPRC;
