|FICHEROS;
     nomtraac #15;        || trabajadores cabs. atrasos
     nomtraal #16;        || trabajadores lins. atrasos
     nomtepig #17;        || aux. epigrafes
     nomepitr #18;        || epigr./trabaj.
     nomtrahx #19;        || bases horas extras
     nomauxc3 #21;        || prorrateo areas/secciones cabs.
     nomauxl3 #22;        || prorrateo areas/secciones lins.
     labcalen #23;        || horarios
     nomhirpf #25;        || historico irpf
     nomcalac #26;        || calculos atrasos cabs.
     nomcalal #27;        || calculos atrasos lins.
     labregis #28;        || registro contratos
     nomcenes #29;        || centros especiales 18/93
     nomwepig #30;        || aux. epigrafes hist.
     nomrevca #31;        || revision transf. cabs.
     nomrevli #32;        || revision transf. lins.
     nomtpsem #33;        || semanas tiempo parcial

     gomdetjr;           || detalle jornadas trabajador
     nomatcon;           || historico de constantes para atrasos
     nomir001;           || datos personales IRPF
     labpadre;           || datos complementarios trabajador (padre-madre)
     nombotra;           || bonificaciones fomento contratacion indefinida
|FIN;

|VARIABLES;
    nume1 = 0;
    nume2 = 0;
    nume3 = 0;
    nume4 = 0;
    alfa1 = "";
    alfa2 = "";
    alfa3 = "";
    alfa4 = "";
    para1 = 0;
    para2 = 0;
    para3 = 0;
    para4 = 0;
    &em_borr = 0;
    &tr_borr = 0;
    des_tra = 0;
    has_tra = 0;
    &nif_borr = "";
     &eaProcedencia = "";
|FIN;
____________________________________/ REVISION TRANSFER. CABS.
|PROCESO nomrevca1;
|BORRA 020#31a;
|BUCLELIN 1NULL#31;
|FPRC;

|DEFBUCLE nomrevca;
 #31#1;
 ;
 em_borr,      1;
 em_borr, 999999;
 be;
 NULL, nomrevca1;
|FIN;
____________________________________/ AUX.EPIGRAFES HIST.
|PROCESO auxepighi1;
|BORRA 020#30a;
|FPRC;

|DEFBUCLE auxepighi;
 #30#1;
 ;
 em_borr,   0,  0,  0,   0,  0;
 em_borr, 999, 99, 12, 999, 19;
 be;
 NULL, auxepighi1;
|FIN;
____________________________________/ CENTROS ESPECIALES 18/93
|PROCESO especial1;
|BORRA 020#29a;
|FPRC;

|DEFBUCLE especial;
 #29#1;
 ;
 em_borr,   0, "  ";
 em_borr, 999, "zz";
 be;
 NULL, especial1;
|FIN;
____________________________________/ SEMANAS TIEMPO PARCIAL
|PROCESO semanas1;
|BORRA 020#33a;
|FPRC;

|DEFBUCLE semanas;
 #33#1;
 ;
 em_borr, des_tra;
 em_borr, has_tra;
 be;
 NULL, semanas1;
|FIN;
____________________________________/ REGISTRO CONTRATOS
|PROCESO registro1;
|BORRA 020#28a;
|FPRC;

|DEFBUCLE registro;
 #28#2;
 ;
 em_borr, des_tra;
 em_borr, has_tra;
 be;
 NULL, registro1;
|FIN;
____________________________________/ CALCULOS ATRASOS
|PROCESO calcuatra1;
|BORRA 020#26a;
|BUCLELIN 1NULL#26;
|FPRC;

|DEFBUCLE calcuatra;
 #26#1;
 ;
 em_borr, des_tra,  0, 0;
 em_borr, has_tra, 12, 9;
 be;
 NULL, calcuatra1;
|FIN;
____________________________________/ HORARIOS
|PROCESO horarios1;
|BORRA 020#23a;
|FPRC;

|DEFBUCLE horarios;
 #23#1;
 ;
 em_borr,  0;
 em_borr, 99;
 be;
 NULL, horarios1;
|FIN;
____________________________________/ AUX. EPIGRAFES
|PROCESO auxepigra1;
|BORRA 020#17a;
|FPRC;

|DEFBUCLE auxepigra;
 #17#1;
 ;
 em_borr,   0,  0,   0,  0;
 em_borr, 999, 12, 999, 19;
 be;
 NULL, auxepigra1;
|FIN;
____________________________________/ HISTORICO IRPF
|PROCESO histoirpf1;
|BORRA 020#25a;
|FPRC;

|DEFBUCLE histoirpf;
 #25#1;
 ;
 em_borr, des_tra,    0;
 em_borr, has_tra, 9999;
 be;
 NULL, histoirpf1;
|FIN;
____________________________________/ PRORRATA AREAS/SECCIONES
|PROCESO prorratas1;
|BORRA 020#21a;
|BUCLELIN 1NULL#21;
|FPRC;

|DEFBUCLE prorratas;
 #21#1;
 ;
 em_borr, des_tra, 0000, 00;
 em_borr, has_tra, 2999, 12;
 be;
 NULL, prorratas1;
|FIN;
____________________________________/ BASES HORAS EXTRA
|PROCESO baseshex1;
|BORRA 020#19a;
|FPRC;

|DEFBUCLE baseshex;
 #19#1;
 ;
 em_borr, des_tra;
 em_borr, has_tra;
 be;
 NULL, baseshex1;
|FIN;
____________________________________/ EPIGRAFES TRABAJADOR
|PROCESO epigratr1;
|BORRA 020#18a;
|FPRC;

|DEFBUCLE epigratr;
 #18#1;
 ;
 em_borr, des_tra,   0;
 em_borr, has_tra, 999;
 be;
 NULL, epigratr1;
|FIN;
____________________________________/ ATRASOS TRABAJADOR
|PROCESO traatraso1;
|BORRA 020#15a;
|BUCLELIN 1NULL#15;
|FPRC;

|DEFBUCLE traatraso;
 #15#1;
 ;
 em_borr, des_tra, 00;
 em_borr, has_tra, 99;
 be;
 NULL, traatraso1;
|FIN;

____________________________________/ DETALLE JORNADAS TRABAJADOR
|PROCESO gomdetjr;
     |BORRA 020#gomdetjr.a;
|FPRC;

|DEFBUCLE gomdetjr;
     #gomdetjr#1;
     ;
     em_borr, des_tra, 2002,  1;
     em_borr, has_tra, 3999, 12;
     be;
     NULL, gomdetjr;
|FIN;

____________________________________/ HISTORICO DE CONSTANTES
|PROCESO nomatcon;
     |BORRA 020#nomatcon.a;
|FPRC;

|DEFBUCLE nomatcon;
     #nomatcon#1;
     ;
     em_borr, des_tra, "    ", 01;
     em_borr, has_tra, "ZZZZ", 12;
     be;
     NULL, nomatcon;
|FIN;

____________________________________/ GESTION DATOS IRPF
|PROCESO nomir001;
     |BORRA 020#nomir001.a;
|FPRC;

|DEFBUCLE nomir001;
     #nomir001#1;
     ;
     nif_borr, 1900, 00000;
     nif_borr, 2999, 99999;
     be;
     NULL, nomir001;
|FIN;

____________________________________/ DATOS COMPLEMENTARIOS TRABAJADOR (PADRE-MADRE)
|PROCESO labpadre;
     |BORRA 020#labpadre.a;
|FPRC;

|DEFBUCLE labpadre;
     #labpadre#1;
     ;
     em_borr, des_tra;
     em_borr, has_tra;
     be;
     NULL, labpadre;
|FIN;

____________________________________/ BONIFICACIONES FOMENTO CONTRATACION INDEFINIDA
|PROCESO nombotra;
     |BORRA 020#nombotra.a;
|FPRC;

|DEFBUCLE nombotra;
     #nombotra#1;
     ;
     em_borr, des_tra, 001;
     em_borr, has_tra, 999;
     be;
     NULL, nombotra;
|FIN;

____________________________________/ PROCESO PRINCIPAL
|PROGRAMA;
     |SI tr_borr = 0;
          |SI eaProcedencia = "labempre";
               des_tra =       1;  has_tra = 99999;
          |SINO;
               des_tra =       0;  has_tra = 0;
          |FINSI;
     |FINSI;

     |SI tr_borr ! 0;  des_tra = tr_borr;  has_tra = tr_borr;  |FINSI;

     |BUCLE traatraso;                  || trabajadores/atrasos
     |BUCLE epigratr;                   || epigrafes/trabajador
     |BUCLE baseshex;                   || bases horas extras
     |BUCLE prorratas;                  || prorrateo areas/seccion
     |BUCLE histoirpf;                  || historico irpf
     |BUCLE calcuatra;                  || calculos atrasos
     |BUCLE registro;                   || registro contratos
     |BUCLE semanas;                    || semanas tiempo parcial

     |BUCLE gomdetjr;
     |BUCLE nomatcon;
     |BUCLE nomir001;
     |BUCLE labpadre;

     |SI tr_borr = 0;                                       || BORRADO DE EMPRESA
          |SI eaProcedencia = "labempre";
               |BUCLE auxepigra;              || aux. epigrafes
               |BUCLE horarios;               || horarios
               |BUCLE especial;               || centros especiales 18/93
               |BUCLE auxepighi;              || aux. epigrafes hist.
               |BUCLE nomrevca;               || revision transfer. cabs.
          |FINSI;
     |FINSI;
|FPRO;
