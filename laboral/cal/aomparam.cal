|FICHEROS;
     aomparam #0;
     referen@ #1;
|FIN;

|VARIABLES;
     aAlfa = "";
     aAlfa1 = "";
     aPath = "";
     aFic = "";
     aEmp = "";
     aDef = "";
     nHandle = 0;
|FIN;

|PROCESO Empresa;
     |SI #0#13 = "S"; |ACABA; |FINSI;
     |DBASS aAlfa;
     |QBF aAlfa;
     |SI aAlfa = "/u/dsprofes/";       || en produccion estoy
          aAlfa = "/u/dsempres";
     |FINSI;
     aPath = #0#1; |QBF aPath;
     aPath = aAlfa + aPath;
     aFic = aPath + "/fich/";
     aDef = aPath + "/def/agifa041";
     |CARGA_DEF aDef, referen@;
     |SI FSalida ! 0;
          |MENAV "0000Path Incorrecto...";
          |ERROR;
     |SINO;
          |SI Campo = 2;
               aEmp = ("00000" + #0#2) % -105;
               |PATH_DAT #1 aFic;
               |ABRE #1;
               #1#0 = aEmp;
               |LEE 000#1=;
               |SI FSalida ! 0;
                    |MENAV "0000No existe Empresa...";
                    |ERROR;
               |FINSI;
               |CIERRA #1;
               |DESCARGA_DEF #referen@;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO MiraSiConta;
   aAlfa = #0#12; |QBF aAlfa;
   |SI aAlfa = ""; |ACABA; |FINSI;
   aAlfa1 = aAlfa % -101;
   |SI aAlfa1 ! "/"; |Y aAlfa1 ! "\";
      aAlfa = aAlfa + "/";
      #0#12 = aAlfa; |PINTA #0#12;
   |FINSI;
   aAlfa = aAlfa + "fich/canempre.dat";
   |XABRE "E", aAlfa, nHandle;
   |SI FSalida ! 0;
      |MENAV "    No existe contabilidad. Revise el camino.";
      |ERROR;
   |FINSI;
|FPRC;

|PROCESO EmpresaSiNo; |TIPO 7;
     |SI #0#13 = "S";
          #0#2 = 0;
          |PINTA #0#2;
          |CAMPO_MODIFICA #0#2, 1, "N";
     |SINO;
          |CAMPO_MODIFICA #0#2, 1, "S";
     |FINSI;
|FPRC;

|PROGRAMA;
     |ABRE #0;
     |LEE 101#0p;
     |SI FSalida ! 0; |GRABA 020#0b; |FINSI;
     |CLS;
     |PINPA #0#0;
     |PINDA #0#0;
     |ENDATOS #1#0;
     |SI FSalida = 0;
          |GRABA 020#0a;
     |FINSI;
     |CIERRA #0;
|FPRO;
