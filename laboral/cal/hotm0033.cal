|FICHEROS;
     hotm0033;
     hotm0034;
     labtraba;      || fichero de trabajadores
     nomvarca;      || variaciones cab
|FIN;

|VARIABLES;
     aAlfa1 = "";
     aAlfa2 = "";
     aAlfa3 = "";
     aAlfa4 = "";
     nNume1 = 0;
     nNume2 = 0;
     nNume3 = 0;
     nNume4 = 0;
     nPara1 = 0;
     nPara2 = 0;
     nPara3 = 0;
     nPara4 = 0;
     fFech1 = @;
     fFech2 = @;
     fFech3 = @;
     fFech4 = @;
     nFEstado = 0;
     nSeleccio = 0;
     nModo = 0;

     aFecha = "";
     aMes = "";
     aAnyo = "";
     nMes = 0;
     nAnyo = 0;
     aFechaBaja = "";
     aMesBaja = "";
     nMesBaja = 0;
     aAnyoBaja = "";
     nAnyoBaja = 0;
     aAviso = "";
|FIN;
____________________________________/
|PROCESO EnAlta; |TIPO 7;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 1;
          #hotm0034#2 = ~;
          |PINTA #hotm0034#2;
     |FINSI;
|FPRC;

|PROCESO Avisa;
     |ABRE #labtraba;
     #labtraba#0 = #hotm0034#0;
     #labtraba#1 = #hotm0034#1;
     |LEE 000#labtraba.=;
     |SI FSalida = 0;
          |SI #labtraba#48 = "S";
               aAviso = "    AVISO.- El trabajador tiene informado Finiquito "
               aAviso = aAviso + "en su ficha.";
               |MENAV aAviso;
          |FINSI;
     |FINSI;
     |CIERRA #labtraba;

/*     aFecha = #hotm0034#2;       || comprobacion en ficha del trabajador
     aMes = aFecha % 402;          || no la activo de momento porque no la
     nMes = aMes;                  || pidieron
     aAnyo = aFecha % -104;
     nAnyo = aAnyo;
     aFechaBaja = #labtraba#37;
     aMesBaja = aFechaBaja % 402;
     nMesBaja = aMesBaja;
     aAnyoBaja = aFechaBaja % -104;
     nAnyoBaja = aAnyoBaja;
     |SI nMes = nMesBaja; |Y nAnyo = nAnyoBaja;
          aAviso = "    AVISO.- El trabajador tiene informado este mes ";
          aAviso = aAviso + "como fecha de baja.";
          |MENAV aAviso;
     |FINSI;
*/


     aFecha = #hotm0034#2;
     aMes = aFecha % 402;
     nMes = aMes;
     aAnyo = aFecha % -104;
     nAnyo = aAnyo;

     |ABRE #nomvarca;
     #nomvarca#0 = #hotm0034#0;
     #nomvarca#1 = #hotm0034#1;
     #nomvarca#2 = nMes;
     #nomvarca#3 = 0;
     |LEE 000#nomvarca.=;
     |SI FSalida = 0;
          aFechaBaja = #nomvarca#16;
          aMesBaja = aFechaBaja % 402;
          nMesBaja = aMesBaja;
          aAnyoBaja = aFechaBaja % -104;
          nAnyoBaja = aAnyoBaja;
          |SI nMes = nMesBaja; |Y nAnyo = nAnyoBaja;
               aAviso = "    AVISO.- El trabajador tiene informado este mes ";
               aAviso = aAviso + "como fecha de baja en variaciones.";
               |MENAV aAviso;
          |FINSI;
     |FINSI;
     |CIERRA #nomvarca;



|FPRC;
