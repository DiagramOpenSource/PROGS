|FICHEROS;
     zominf01 #0;
     nomcalca #1;
     nomhicca;
     labtraba #2;
     labempre #3;
|FIN;

|VARIABLES;
     &aDesde = "";
     &nBase1 = 0;
     &nBase2 = 0;
     &nBase3 = 0;
     &nTipo1 = 0;
     &nTipo2 = 0;
     &nTipo3 = 0;
     &nTipo = 0;

     &enEmpresa = 0;
     &enTrabajador = 0;
|FIN;

|PROCESO imprime;
     |SI aDesde = "M";
          nBase1 = #nomcalca#14;
          nBase2 = #nomcalca#69;
          nBase3 = #nomcalca#70;
          nTipo1 = #nomcalca#13;
          nTipo2 = #nomcalca#67;
          nTipo3 = #nomcalca#68;
          nTipo = #nomcalca#3;
          |SI #nomcalca#69 ! 0;
               |SI #nomcalca#67 ! #nomcalca#13;
                    #labtraba#0 = #nomcalca#0;
                    #labtraba#1 = #nomcalca#1;
                    |LEE 000#labtraba.=;
                    |PRINT;
                    |ACABA;
               |FINSI;
          |FINSI;
          |SI #nomcalca#70 ! 0;
               |SI #nomcalca#68 ! #nomcalca#13;
                    #labtraba#0 = #nomcalca#0;
                    #labtraba#1 = #nomcalca#1;
                    |LEE 000#labtraba.=;
                    |PRINT;
                    |ACABA;
               |FINSI;
          |FINSI;
     |FINSI;
     |SI aDesde = "H";
          nBase1 = #nomhicca#14;
          nBase2 = #nomhicca#108;
          nBase3 = #nomhicca#109;
          nTipo1 = #nomhicca#13;
          nTipo2 = #nomhicca#106;
          nTipo3 = #nomhicca#107;
          nTipo = #nomhicca#3;

          |SI #nomhicca#108 ! 0;
               |SI #nomhicca#106 ! #nomhicca#13;
                    #labtraba#0 = #nomhicca#0;
                    #labtraba#1 = #nomhicca#1;
                    |LEE 000#labtraba.=;
                    |PRINT;
                    |ACABA;
               |FINSI;
          |FINSI;
          |SI #nomhicca#109 ! 0;
               |SI #nomhicca#107 ! #nomhicca#13;
                    #labtraba#0 = #nomhicca#0;
                    #labtraba#1 = #nomhicca#1;
                    |LEE 000#labtraba.=;
                    |PRINT;
                    |ACABA;
               |FINSI;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE nomhicca;
     #nomhicca#1;
     ;
     #0#0, #0#2, 09, 01, 0;
     #0#1, #0#3, 09, 01, 2;
     ;
     NULL, imprime;
|FIN;

|DEFBUCLE nomcalca;
     #nomcalca#1;
     ;
     #0#0, #0#2, 01, 0;
     #0#1, #0#3, 01, 2;
     ;
     NULL, imprime;
|FIN;

|PROCESO Busca;
     aDesde = "M";
     |BUCLE nomcalca;

     aDesde = "H";
     |BUCLE nomhicca;
|FPRC;

|PROGRAMA;
     |CLS;
     |PINPA #0#0;
     |PINDA #0#0;
     |ENDATOS #1#0;
     |SI FSalida = 0;
          |IMPRE 0;
          |SI FSalida = 0;
               |INFOR "zominf01";
               |ABRE #nomcalca;
               |ABRE #nomhicca;
               |ABRE #labtraba;
               |HAZ Busca;
               |CIERRA #labtraba;
               |CIERRA #nomhicca;
               |CIERRA #nomcalca;
               |PIEINF;
               |FININF;
          |FINSI;
          |FINIMP;
     |FINSI;
|FPRO;
