|FICHEROS;
    nompteva #0;
    labempre #1;
    labtraba #2;
|FIN;

|VARIABLES;
    alfa1 = "";
    alfa2 = "";
    alfa3 = "";
    alfa4 = "";
    nume0 = 0;
    nume1 = 0;
    nume2 = 0;
    nume3 = 0;
    nume4 = 0;
    nume5 = 0;
    para1 = 0;
    para2 = 0;
    para3 = 0;
    para4 = 0;
    fech1 = @;
    fech2 = @;
    fech3 = @;
    fech4 = @;
    elsw1 = 0;
    elsw2 = 0;
    elsw3 = 0;
    elsw4 = 0;
    FEstado = 0;
    seleccio = 0;
    modo = 0;
    sw_rup = 0;

    fecalf = "";
    dia = 0;
    mes = 0;
    any = 0;
    el_any = 0;
    el_mes = 0;
    &vdias = 0;
    &swlin = 0;
    emp_ant = -1;
|FIN;
____________________________________/
|PROCESO desglosa;     || DESGLOSA EN DIA, MES Y ANYO UNA FECHA DD.MM.AAAA
    alfa1 = fecalf %  102;   dia = alfa1;
    alfa1 = fecalf %  402;   mes = alfa1;
    alfa1 = fecalf % -104;   any = alfa1;
|SI alfa1 = "....";
        dia = 0;
        mes = 0;
        any = 0;
|FINSI;
|FPRC;

|PROCESO dias_alta;
    fech1 = #0#4;    fecalf = fech1;    |HAZ desglosa; nume2 = any;
    fech2 = #2#36;   fecalf = fech2;    |HAZ desglosa; nume1 = any;
    nume5 = 0;
|PARA nume4 = nume1;|SI nume4 [ nume2; |HACIENDO nume4 = nume4 + 1;
        nume3 = nume4 $ 4;
    |SI any = nume4;|Y mes > 2;         nume3 = 1;     |FINSI;
    |SI el_any = nume4;|Y el_mes [ 2;   nume3 = 1;     |FINSI;
    |SI nume3 = 0;                 nume5 = nume5 + 1;  |FINSI;
|SIGUE;
    nume0 = fech1 - fech2;
    nume0 = nume0 - nume5 + 1; || menos dias bisiestos + ambos inclusive
|FPRC;

|PROCESO lee_traba1;
|HAZ dias_alta;
    nume1 = (nume0 / 365) * #0#5;       || 'nume1' son los dias de alta
    nume1 = nume1 - #2#173;             || resta los dias disfrutados

|SI emp_ant ! #2#0;
        #1#0 = #2#0;
    |LEE 020#1=;
        swlin = 1;
    |PRINT;
        emp_ant = #2#0;
|FINSI;

    vdias = nume1;
    swlin = 0;
|PRINT;

    seleccio = 1;
|FPRC;

|DEFBUCLE lee_traba;
 #2#1;
 44;
 #0#0, #0#2, "A";
 #0#1, #0#3, "A";
 ;
 NULL, lee_traba1;
|FIN;

|PROCESO tipo3; |TIPO 3;
|IMPRE 0;
|SI FSalida = 0;

        alfa1 = #0#4;
        alfa2 = alfa1 % -104;      el_any = alfa2;
        alfa2 = alfa1 % 402;       el_mes = alfa2;

    |INFOR "nompteva";
    |ABRE #1;
    |BUCLE lee_traba;
    |CIERRA #1;
    |SI seleccio ! 0;
        |PIEINF;
    |SINO;
        |MENAV "    Seleccion vacia ...";
    |FINSI;
    |FININF;
|SINO;
    |MENAV "    Proceso abortado ...";
|FINSI;
|FINIMP;
|FPRC;
