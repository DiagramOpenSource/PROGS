|FICHEROS;
     nominfsa #0;
     labempre;
     labcentr;
     labtraba;
|FIN;

|VARIABLES;
     aDEstado = "";
     aHEstado = "";
     nSalario = 0;
     &nPagas = 0;
     nCampo = 0;
     nCampo1 = 0;
|FIN;

|PROCESO labtraba;
     nSalario = 0;
     nPagas = 0;

     #labempre#0 = #labtraba#0;
     |LEE 000#labempre.=

     #labcentr#0 = #labtraba#0;
     #labcentr#1 = #labtraba#77;
     |LEE 000#labcentr.=

     |SI #0#7 = "T";
          |SI #labtraba#97 ! 0;
               nSalario = #labtraba#98;
          |FINSI;
     |FINSI;
     |SI #0#7 = "B";
          |SI #labtraba#97 = 1; |O #labtraba#97 = 2; |O #labtraba#97 = 5;
               nSalario = #labtraba#98;
          |FINSI;
     |FINSI;
     |SI #0#7 = "L";
          |SI #labtraba#97 = 3; |O #labtraba#97 = 4; |O #labtraba#97 = 6;
               nSalario = #labtraba#98;
          |FINSI;
     |FINSI;

     |PARA nCampo = 165; |SI nCampo [ 172; |HACIENDO nCampo = nCampo + 1;
          nCampo1 = nCampo - 8;
          |SI #0#7 = "T";
               |SI #labtraba#nCampo1# = "B"; |O #labtraba#nCampo1# = "F";
               |O #labtraba#nCampo1# = "L";
                    nPagas = nPagas + #labtraba#nCampo#;
               |FINSI;
          |FINSI;
          |SI #0#7 = "B";
               |SI #labtraba#nCampo1# = "B"; |O #labtraba#nCampo1# = "F";
                    nPagas = nPagas + #labtraba#nCampo#;
               |FINSI;
          |FINSI;
          |SI #0#7 = "L";
               |SI #labtraba#nCampo1# = "L";
                    nPagas = nPagas + #labtraba#nCampo#;
               |FINSI;
          |FINSI;
     |SIGUE;

     |SI nSalario ! 0; |O nPagas ! 0;
          |PRINT;
     |FINSI;
|FPRC;

|DEFBUCLE labtraba;
     #labtraba#1;
     77, 44;
     #0#0, #0#4, #0#2, aDEstado;
     #0#1, #0#5, #0#3, aHEstado;
     ;
     NULL, labtraba;
|FIN;

|PROGRAMA;
     |CLS;
     |PINPA #0#0;
     |PINDA #0#0;
     |ENDATOS #1#0;
     |SI FSalida = 0;
          Impresora = "CrystalReport";
          |IMPRE -1;
          |INFOR "nominfsa";
          |ABRE #labempre;
          |ABRE #labcentr;

          |SI #0#6 = "T";
               aDEstado = "A";
               aHEstado = "B";
          |SINO;
               aDEstado = #0#6;
               aHEstado = #0#6;
          |FINSI;

          |BUCLE labtraba;
          |CIERRA #labcentr;
          |CIERRA #labempre;
          |PIEINF;
          |FININF;
          |FINIMP;
     |FINSI;
|FPRO;
