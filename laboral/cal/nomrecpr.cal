|FICHEROS;
     nomrecpr #0;
     labtraba;
     nomcalca;
|FIN;

|VARIABLES;
     swHayAlgo = 0;
     &aRec = "";
     &aTexto = "";
|FIN;

|PROCESO nomcalca;
     aRec = "X";
|FPRC;

|DEFBUCLE nomcalca;
     #nomcalca#1;
     ;
     #labtraba#0, #labtraba#1,  1, 0;
     #labtraba#0, #labtraba#1, 12, 9;
     ;
     NULL, nomcalca;
|FIN;

|PROCESO labtraba;
     |SI #labtraba#96 ! 0;
          swHayAlgo = 1;
          aRec = "";
          |BUCLE nomcalca;
          |SI #0#4 = "R";
               #labtraba#95 = #labtraba#96;
               |GRABA 020#labtraba.a;
          |FINSI;
          |PRINT;
     |FINSI;
|FPRC;

|DEFBUCLE labtraba;
     #labtraba#1;
     44, 95;
     #0#0, #0#2, "A", 0;
     #0#1, #0#3, "A", 0;
     be;
     NULL, labtraba;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     |SI #0#4 ! "C";
          |IMPRE 0;
          |SI FSalida = 0;
               |INFOR "nomrecpr";
               |SI #0#4 = "I";
                    aTexto = "Informe de trabajadores afectados";
               |SINO;
                    aTexto = "     Trabajadores recuperados";
               |FINSI;
               |BUCLE labtraba;
               |SI swHayAlgo = 1;
                    |PIEINF;
                    |FININF;
                    |FINIMP;
               |FINSI;
          |FINSI;
          |LIBERA #labtraba;
     |FINSI;
|FPRC;
