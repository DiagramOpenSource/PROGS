|FICHEROS;
     nogue001;
     nogue002;
     nomparca;
     nomparli;
     labclean;

|FIN;

|VARIABLES;
     nLineaReal = 0;
     nLineaNueva = 0;
     nInforme = 0;
     nCampo = 0;
|FIN;

|PROCESO Renumera; |TIPO 3;
     |ABRE #nogue002;
     nLineaReal = 0;
     nLineaNueva = 1;
     nInforme = #nogue001#0;

     #nogue002#0 = nInforme;
     #nogue002#1 = 1;
     |LEE 101#nogue002.];
     |SI FSalida ! 0; |O #nogue002#0 ! nInforme;
          |ACABA;
     |FINSI;

     |PARA; |SI; |HACIENDO nLineaNueva = nLineaNueva + 1;
          #nogue002#0 = nInforme;
          #nogue002#1 = nLineaNueva;
          |LEE 101#nogue002.];
          |SI FSalida ! 0; |O #nogue002#0 ! nInforme;
               |SAL;
          |SINO;
               |SI #nogue002#1 ! nLineaNueva;
                    nLineaReal = #nogue002#1;
                    |BORRA 020#nogue002.a;

                    #nogue002#1 = nLineaNueva;
                    |GRABA 020#nogue002.n;
                    |LIBERA #nogue002;
               |FINSI;
          |FINSI;
     |SIGUE;
     |CIERRA #nogue002;
|FPRC;

/****************************************************************************/

|PROCESO PaseNomparli;
     |PARA nCampo = 0; |SI nCampo [ 26; |HACIENDO nCampo = nCampo + 1;
          #nogue002#nCampo# = #nomparli#nCampo#;
     |SIGUE;
     |GRABA 020#nogue002.n;
|FPRC;

|DEFBUCLE PaseNomparli;
     #nomparli#1;
     ;
     01, 01;
     99, 99;
     ;
     NULL, PaseNomparli;
|FIN;

|PROCESO PaseNomparca;
     |PARA nCampo = 0; |SI nCampo [ 5; |HACIENDO nCampo = nCampo + 1;
          #nogue001#nCampo# = #nomparca#nCampo#;
     |SIGUE;
     |GRABA 020#nogue001.n;
|FPRC;

|DEFBUCLE PaseNomparca;
     #nomparca#1;
     ;
     01;
     99;
     ;
     NULL, PaseNomparca;
|FIN;

|PROCESO BorraNogue002;
     |BORRA 020#nogue002.a;
     |LIBERA #nogue002;
|FPRC;

|DEFBUCLE BorraNogue002;
     #nogue002#1;
     ;
     01, 01;
     99, 99;
     be;
     NULL, BorraNogue002;
|FIN;

|PROCESO PaseNogue002;
     #nogue002#0 = #nogue002#0 + 100;
     |GRABA 020#nogue002.n;
     |LIBERA #nogue002;
|FPRC;

|DEFBUCLE PaseNogue002;
     #nogue002#1;
     ;
     01, 01;
     99, 99;
     be;
     NULL, PaseNogue002;
|FIN;

|PROCESO BorraNogue001;
     |BORRA 020#nogue001.a;
     |LIBERA #nogue001;
|FPRC;

|DEFBUCLE BorraNogue001;
     #nogue001#1;
     ;
     01;
     99;
     be;
     NULL, BorraNogue001;
|FIN;

|PROCESO PaseNogue001;
     #nogue001#0 = #nogue001#0 + 100;
     |GRABA 020#nogue001.n;
     |LIBERA #nogue001;
|FPRC;

|DEFBUCLE PaseNogue001;
     #nogue001#1;
     ;
     01;
     99;
     be;
     NULL, PaseNogue001;
|FIN;

|PROCESO Pase; |TIPO 88;
     |ABRE #labclean;
     #labclean#0 = "nomparca";
     #labclean#1 = 0;
     |LEE 101#labclean.=;
     |SI FSalida ! 0;
          |BUCLE PaseNogue001;
          |BUCLE PaseNogue002;
          |BUCLE BorraNogue001;
          |BUCLE BorraNogue002;

          |ABRE #nogue001;
          |ABRE #nogue002;
          |BUCLE PaseNomparca;
          |BUCLE PaseNomparli;
          |CIERRA #nogue002;
          |CIERRA #nogue001;

          #labclean#0 = "nomparca";
          #labclean#1 = 0;
          #labclean#2 = "S";
          |GRABA 020#labclean.n;
          |LIBERA #labclean;
     |FINSI;

     |CIERRA #labclean;
|FPRC;

/****************************************************************************/
