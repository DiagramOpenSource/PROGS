|FICHEROS;
     hotm0005 #0;
     labregis #1;
|FIN;

|VARIABLES;
     nModo=0;
     aHora="";
     fFecha=@;
     nUltimo = 0;
|FIN;

|PROCESO Alta; |TIPO 7;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo ! 1; |ACABA;   |FINSI;

     |LEE 000#0u;
     |SI FSalida = 0;
          nUltimo = #0#0 + 1;
     |SINO;
          nUltimo = 1;
     |FINSI;
     |DDEFECTO #0;
     #0#0 = nUltimo;
     |PINTA #0#0;
|FPRC;


|PROCESO PonerFecha; |TIPO 0;
     |SI #0#11="S";
          fFecha=~;
          #0#12=fFecha;
          |CAMPO_MODIFICA #0#12,1,"S";
     |SINO;
          #0#12="01.01.0000";
          |CAMPO_MODIFICA #0#12,1,"N";
     |FINSI;
     |PINTA #0#12;
|FPRC;

|PROCESO PonHora;|TIPO 7;
     nModo = (FEntrada/100)!0;
     |SI nModo = 1;
          |HORA aHora;
          #0#2=aHora % A105;
          |PINTA #0#2;
     |FINSI;
|FPRC;

|PROCESO PonUsuario; |TIPO 7;
     #0#3=Usuario % 810;
     |PINTA #0#3;
|FPRC;

|PROCESO Notas1; |TIPO 7;
     #0Campo="DURACION PRORROGA:";
     |PTEC 816;
|FPRC;

|PROCESO Notas3; |TIPO 7;
     #0Campo="NOTA:";
     |PTEC 816;
|FPRC;

|PROCESO PonRealizadoAux;|TIPO 0;
     #0#13=#0#11;
|FPRC;

|PROCESO FechaContrato; |TIPO 7;
     |ABRE #1;
     |SELECT #2#1;
     #1#1=#0#4;
     #1#2=#0#5;
     |LEE 000#1=;
     |SI FSalida=0;
          |SI #1#16=0; |Y #1#17=0;     || no tiene prorrogas
               #0#7=#1#8;
          |SINO;
               #0#7=#1#20;
          |FINSI;
          |PINTA #0#7;
     |FINSI;
     |SELECT #1#1;
     |CIERRA #1;
|FPRC;
