|FICHEROS;
     nomconre #0;
     nomcatli;
     nomconhi;
     nomfinca;
     nomfichi;
     nomfinli;
     nomfilhi;
     nomconax;
     nomcaxhi;
     nomantca;
     nomanthi;
|FIN;

|VARIABLES;
     aAlfa = "";
     swHeBorrado = 0;
     swHeCopiado = 0;
     nCampo = 0;
|FIN;

|PROCESO copiado5;
     swHeCopiado = 1;
     #nomantca#0 = #nomanthi#0;
     #nomantca#1 = #nomanthi#1;
     |LEE 101#nomantca.=;
     |SI FSalida = 0;
          |PARA nCampo = 2; |SI nCampo [ 63; |HACIENDO nCampo = nCampo + 1;
               #nomantca#nCampo# = #nomanthi#nCampo#;
          |SIGUE;
          |GRABA 020#nomantca.a;
          |LIBERA #nomantca;
     |FINSI;
|FPRC;

|DEFBUCLE copiado5;
     #nomanthi#1;
     ;
     #0#0, 000, #0#1;
     #0#0, 999, #0#1;
     be;
     NULL, copiado5;
|FIN;

|PROCESO copiado4;
     swHeCopiado = 1;
     #nomconax#0 = #nomcaxhi#0;
     |LEE 101#nomconax.=;
     |SI FSalida = 0;
          |PARA nCampo = 1; |SI nCampo [ 234; |HACIENDO nCampo = nCampo + 1;
               #nomconax#nCampo# = #nomcaxhi#nCampo#;
          |SIGUE;
          |GRABA 020#nomconax.a;
          |LIBERA #nomconax;
     |FINSI;
|FPRC;

|DEFBUCLE copiado4;
     #nomcaxhi#1;
     ;
     #0#0, #0#1;
     #0#0, #0#1;
     be;
     NULL, copiado4;
|FIN;

|PROCESO copiado3;
     swHeCopiado = 1;
     #nomfinli#0 = #nomfilhi#0;
     #nomfinli#1 = #nomfilhi#1;
     #nomfinli#2 = #nomfilhi#2;
     |LEE 101#nomfinli.=;
     |SI FSalida = 0;
          |PARA nCampo = 3; |SI nCampo [ 14; |HACIENDO nCampo = nCampo + 1;
               #nomfinli#nCampo# = #nomfilhi#nCampo#;
          |SIGUE;
          |GRABA 020#nomfinli.a;
          |LIBERA #nomfinli;
     |FINSI;
|FPRC;

|DEFBUCLE copiado3;
     #nomfilhi#1;
     ;
     #0#0, 000, 01, #0#1;
     #0#0, 999, 99, #0#1;
     be;
     NULL, copiado3;
|FIN;

|PROCESO copiado2;
     swHeCopiado = 1;
     #nomfinca#0 = #nomfichi#0;
     #nomfinca#1 = #nomfichi#1;
     |LEE 101#nomfinca.=;
     |SI FSalida = 0;
          |PARA nCampo = 2; |SI nCampo [ 3; |HACIENDO nCampo = nCampo + 1;
               #nomfinca#nCampo# = #nomfichi#nCampo#;
          |SIGUE;
          |GRABA 020#nomfinca.a;
          |LIBERA #nomfinca;
     |FINSI;
|FPRC;

|DEFBUCLE copiado2;
     #nomfichi#1;
     ;
     #0#0, 000, #0#1;
     #0#0, 999, #0#1;
     be;
     NULL, copiado2;
|FIN;

|PROCESO copiado1;
     swHeCopiado = 1;
     #nomcatli#0 = #nomconhi#0;
     #nomcatli#1 = #nomconhi#1;
     #nomcatli#2 = #nomconhi#2;
     |LEE 101#nomcatli.=;
     |SI FSalida = 0;
          #nomcatli#3 = #nomconhi#3;
          #nomcatli#4 = #nomconhi#4;
          #nomcatli#5 = #nomconhi#5;
          #nomcatli#6 = #nomconhi#6;
          |GRABA 020#nomcatli.a;
          |LIBERA #nomcatli;
     |FINSI;
|FPRC;

|DEFBUCLE copiado1;
     #nomconhi#1;
     ;
     #0#0, 001, 001, #0#1;
     #0#0, 999, 999, #0#1;
     be;
     NULL, copiado1;
|FIN;

|PROCESO copiado;
     swHeCopiado = 0;
     |ABRE #nomcatli;
     |ABRE #nomfinca;
     |ABRE #nomfinli;
     |ABRE #nomconax;
     |ABRE #nomantca;

     |BUCLE copiado1;
     |BUCLE copiado2;
     |BUCLE copiado3;
     |BUCLE copiado4;
     |BUCLE copiado5;

     |CIERRA #nomantca;
     |CIERRA #nomconax;
     |CIERRA #nomfinli;
     |CIERRA #nomfinca;
     |CIERRA #nomcatli;
     |SI swHeCopiado = 1;
          aAlfa = "    Se ha restaurado la copia del convenio seleccionado ";
          aAlfa = aAlfa + "con exito";
          |MENAV aAlfa;
     |FINSI;
|FPRC;

|PROCESO borra5;
     |BORRA 020#nomanthi.a;
     swHeBorrado = 1;
|FPRC;

|DEFBUCLE borra5;
     #nomanthi#1;
     ;
     #0#0, 000, #0#1;
     #0#0, 999, #0#1;
     be;
     NULL, borra5;
|FIN;

|PROCESO borra4;
     |BORRA 020#nomcaxhi.a;
     swHeBorrado = 1;
|FPRC;

|DEFBUCLE borra4;
     #nomcaxhi#1;
     ;
     #0#0, #0#1;
     #0#0, #0#1;
     be;
     NULL, borra4;
|FIN;

|PROCESO borra3;
     |BORRA 020#nomfilhi.a;
     swHeBorrado = 1;
|FPRC;

|DEFBUCLE borra3;
     #nomfilhi#1;
     ;
     #0#0, 000, 01, #0#1;
     #0#0, 999, 99, #0#1;
     be;
     NULL, borra3;
|FIN;

|PROCESO borra2;
     |BORRA 020#nomfichi.a;
     swHeBorrado = 1;
|FPRC;

|DEFBUCLE borra2;
     #nomfichi#1;
     ;
     #0#0, 000, #0#1;
     #0#0, 999, #0#1;
     be;
     NULL, borra2;
|FIN;

|PROCESO borra1;
     |BORRA 020#nomconhi.a;
     swHeBorrado = 1;
|FPRC;

|DEFBUCLE borra1;
     #nomconhi#1;
     ;
     #0#0, 001, 001, #0#1;
     #0#0, 999, 999, #0#1;
     be;
     NULL, borra1;
|FIN;

|PROCESO borrado;
     swHeBorrado = 0;
     |BUCLE borra1;
     |BUCLE borra2;
     |BUCLE borra3;
     |BUCLE borra4;
     |BUCLE borra5;
     |SI swHeBorrado = 1;
          aAlfa = "    Se ha eliminado la copia del convenio seleccionado ";
          aAlfa = aAlfa + "con exito";
          |MENAV aAlfa;
     |FINSI;
|FPRC;

|PROCESO Tipo0;
     |SI FSalida = 13;
          aAlfa = "    NSe va a proceder a restaurar la copia seleccionada."
          aAlfa = aAlfa +  " Esta seguro?";
          |CONFI aAlfa;
          |SI FSalida = 0;
               |HAZ copiado;
          |FINSI;
     |FINSI;
     |SI FSalida = 14;
          aAlfa = "    SSe borrara la copia seleccionada. Esta seguro?";
          |CONFI aAlfa;
          |SI FSalida = 0;
               |HAZ borrado;
               |BORRA 020#nomconre.a;
               |PONCONTROL 23, "si";
          |FINSI;
     |FINSI;
|FPRC;
