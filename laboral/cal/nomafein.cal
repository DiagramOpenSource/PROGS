|FICHEROS;
    nomafein #0;         || informe
    nomafema #1,MANTE;   || fichero
    labtraba #2;         || trabajadores
|FIN;

|VARIABLES;
    alfa1 = "";
    alfa2 = "";
    alfa3 = "";
    alfa4 = "";
    nume1 = 0;
    nume2 = 0;
    nume3 = 0;
    nume4 = 0;
    para1 = 0;
    para2 = 0;
    para3 = 0;
    para4 = 0;
    fech1 = @;
    fech2 = @;
    fech3 = @;
    fech4 = @;
    elsw1 = 0;
    elsw2 = 0;
    elsw3 = 0;
    elsw4 = 0;
    FEstado = 0;
    seleccio = 0;
    modo = 0;
    sw_rup = 0;

    &p_mes = "";
    &swlinea = 0;
    &swtotal = 0;
    t0 = 0;
    &t1 = 0;
    &t2 = 0;
    &e1 = 0;
    &e2 = 0;
    ant_emp = 0;
    ant_tra = 0;
|FIN;
____________________________________/ CALCULOS DESDE CAMPOS
|PROCESO defecto; |TIPO 7;
    fech1 = ~;
    alfa1 = fech1;
    alfa1 = alfa1 % -104;
    #0Campo = alfa1;
|PINTA #0Campo;
|FPRC;

|PROCESO mirames; |TIPO 7;
    fech1 = ~;
    alfa1 = fech1;
    alfa1 = alfa1 % 402;
    #0Campo = alfa1;
|PINTA #0Campo;
|FPRC;

|PROCESO pintames; |TIPO 0;
|SI #0Campo =  1;  p_mes = "ENERO     ";  |FINSI;
|SI #0Campo =  2;  p_mes = "FEBRERO   ";  |FINSI;
|SI #0Campo =  3;  p_mes = "MARZO     ";  |FINSI;
|SI #0Campo =  4;  p_mes = "ABRIL     ";  |FINSI;
|SI #0Campo =  5;  p_mes = "MAYO      ";  |FINSI;
|SI #0Campo =  6;  p_mes = "JUNIO     ";  |FINSI;
|SI #0Campo =  7;  p_mes = "JULIO     ";  |FINSI;
|SI #0Campo =  8;  p_mes = "AGOSTO    ";  |FINSI;
|SI #0Campo =  9;  p_mes = "SEPTIEMBRE";  |FINSI;
|SI #0Campo = 10;  p_mes = "OCTUBRE   ";  |FINSI;
|SI #0Campo = 11;  p_mes = "NOVIEMBRE ";  |FINSI;
|SI #0Campo = 12;  p_mes = "DICIEMBRE ";  |FINSI;
|PINTA 1216, p_mes;
|FPRC;
____________________________________/
|PROCESO tot_empre;
    swtotal = 2;
|PRINT;              || total empresa
    e1 = 0;
    e2 = 0;
|FPRC;

|PROCESO tot_traba;
|SI t0 > 1;
        swtotal = 1;
    |PRINT;              || total trabajador
|FINSI;
|FPRC;

|PROCESO nomafema1;
|SI ant_emp ! #1#2;|O ant_tra ! #1#3;
    |SI ant_emp ! 0;|Y ant_tra ! 0;
        |SI ant_emp ! #1#2;
            |HAZ tot_traba;
            |HAZ tot_empre;
        |SINO;
            |HAZ tot_traba;
        |FINSI;
    |FINSI;
        ant_emp = #1#2;
        ant_tra = #1#3;
        swlinea = 1;
        t0 = 0;     t1 = 0;   t2 = 0;
|SINO;
        swlinea = 0;
|FINSI;

|DDEFECTO #2;  #2#0 = #1#2;   #2#1 = #1#3;   |LEE 000#2=;

     swtotal = 0;   |PRINT;
     seleccio = 1;
     t0 = t0 + 1;
     t1 = t1 + #1#5;
     t2 = t2 + #1#7;
     e1 = e1 + #1#5;
     e2 = e2 + #1#7;
|FPRC;

|DEFBUCLE nomafema;
 #1#1;
 ;
 #0#4, #0#5, #0#0, #0#2, 1;
 #0#4, #0#5, #0#1, #0#3, 6;
 ;
 NULL, nomafema1;
|FIN;

|PROCESO impresion;
|IMPRE 0;
|SI FSalida = 0;
    |INFOR "nomafein";
    |ABRE #2;
    |BUCLE nomafema;
    |CIERRA #2;
    |SI seleccio ! 0;
        |HAZ tot_traba;
        |HAZ tot_empre;
        |PIEINF;
    |SINO;
        |MENAV "    Seleccion vacia ...";
    |FINSI;
    |FININF;
|SINO;
    |MENAV "   Proceso abortado ...";
|FINSI;
|FINIMP;
|FPRC;

|PROCESO min1;
    #1#0 = #0#4;
    #1#1 = #0#5;
    #1#2 = #0#0;
    #1#3 = #0#2;
    #1#4 = 1;
|FPRC;

|PROCESO max1;
    #1#0 = #0#4;
    #1#1 = #0#5;
    #1#2 = #0#1;
    #1#3 = #0#3;
    #1#4 = 6;
|FPRC;

|PROCESO tipo3; |TIPO 3;
|ENTLINEAL #1#1, 3, 4, 20, 1, min1, max1;
|CONFI "    NImprimir (S/N): ";
|SI FSalida = 0;
    |HAZ impresion;
|FINSI;
|FPRC;
