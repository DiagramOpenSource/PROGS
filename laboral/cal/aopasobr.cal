|FICHEROS;
    aopasobr #0;
    aomentra #1;    || entrada de horas

    gomantho@ #10;
|FIN;

|VARIABLES;
     aDirDef = "";
     aDirFic = "";
     aEmpres = "";
     swErr   = 1;
     aDef1   = "";
     aDef    = "";
     aMensa  = "";
|FIN;

|PROGRAMA;
|CLS;
|CABEZA "PASE HORAS A EXPEDIENTES";
|PINPA #0#0;
|DDEFECTO #0;
|ABRE #0;
|LEE 101#0p;
|SI FSalida ! 0;    |GRABA 020#0b; |FINSI;
|PINDA #0#0;
|ENDATOS #1#0;
|SI FSalida = 0;
    |GRABA 020#0a;
|FINSI;
|LIBERA #0;
|CIERRA #0;
|FPRO;

************************************************************************
   RUTINAS DE LECTURA E IMPRESION
************************************************************************
|PROCESO exporta1;
     #10#0 = "";
|FPRC;


|DEFBUCLE exporta;
     #1#1;
     ;
     #0#1, #0#3, #0#5, #0#7, #0#11, #0#09;
     #0#2, #0#4, #0#6, #0#8, #0#12, #0#10;
     ;
     NULL, exporta1;
|FIN;

************************************************************************
   RUTINAS DE INICIO DE PROCESO
************************************************************************

|PROCESO proceso; |TIPO 3;

     aDirDef = #0#13; |QBF aDirDef; aDirDef = aDirDef + "def/";
     aEmpres = #0#14; |QBF aEmpres; aEmpres = ("00000" + aEmpres) % -105;
     aDirFic = #0#13; |QBF aDirFic; aDirFic = aDirFic + "fich/" + aEmpres +"/";

     |HAZ CargaDef;
     |SI swErr ! 0;
          aMensa = "0000Error al cargar:" + aDef;
          |MENAV aMensa;
          |HAZ DesCargaDef;
          |ACABA;
     |FINSI;

     |ABRE #10;
     |BUCLE exporta;
     |CIERRA #10;
     |HAZ DesCargaDef;
|FPRC;

|PROCESO CargaDef;
     aDef1 = aDirDef + "gomantho";
     aDef  = aDef1;
     |CARGA_DEF aDef, gomantho@;
     |SI FSalida ! 0;
          swErr = 1;
          aDef1 = "";
          |ACABA;
     |FINSI;
|FPRC;

|PROCESO DesCargaDef;
     |SI aDef1 ! ""; |DESCARGA_DEF #gomantho@; |FINSI;
|FPRC;
