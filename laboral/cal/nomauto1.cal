|FICHEROS;
     nomauto1 #1;
     nomauto2 #2,MANTE;
     labempre;
     labtraba;
|FIN;

|VARIABLES;
     aModulo = "";
     nModo = 0;
     nCampo = 0;
     &nAnyAuto = 0;
     &nCuotaAuto = 0;

     aParam = "";
     aAlfa1 = "";
     aAlfa2 = "";
     nEmp = 0;
     nTra = 0;
     FEstado = 0;
|FIN;

|PROCESO CompAuto;
     |SI #labtraba#42 ! "H";
          |MENAV "    El trabajador introducido no esta definido con clave H de Autonomos";
          |ERROR;
     |FINSI;
|FPRC;

|PROCESO superior;
     #2#0 = #1#0;
     #2#1 = #1#1;

     |SI nAnyAuto = 0;
          #2#2 = 2999;
     |SINO;
          #2#2 = nAnyAuto;
     |FINSI;
|FPRC;

|PROCESO inferior;
     #2#0 = #1#0;
     #2#1 = #1#1;

     |SI nAnyAuto = 0;
          #2#2 = 2000;
     |SINO;
          #2#2 = nAnyAuto;
     |FINSI;
|FPRC;

|PROCESO lineal;
     |ENTLINEAL #1#2, -3, 2, 22, 0, inferior, superior;
|FPRC;

|PROCESO tipo3auto; |TIPO 3;
     |SI FSalida = 0;
          |MODULO aModulo;
          |QBF aModulo;
          |SI aModulo = "labtraba"; |O aModulo = "nomw0003";
          |O aModulo = "nomir001"; |O aModulo = "nomir020";
               nModo = (FEntrada / 100) ! 0;
               |SI nModo = 1;
                    |GRABA 020#nomauto1.n;
               |SINO;
                    |GRABA 020#nomauto1.a;
               |FINSI;
          |FINSI;

          |HAZ lineal;
     |FINSI;
|FPRC;

|PROCESO tipo8auto; |TIPO 13;
     |ENTLINEAL #1#2, -3, 7, 22, 0, inferior, superior;

     |MODULO aModulo;
     |QBF aModulo;
     |SI aModulo = "labtraba"; |O aModulo = "nomw0003";
     |O aModulo = "nomir001"; |O aModulo = "nomir020";
          |SI aModulo = "labtraba"; |O aModulo = "nomw0003";
               |PDEFECTO #2, 3, 33;
               |PUSHV 11102317;    || esto no se por que esta aqui, la verdad
               |PINDA #0#2;
               |POPV;
          |FINSI;
          |SI aModulo = "nomir001"; |O aModulo = "nomir020";
               |SI nAnyAuto ! 0;
                    |ABRE #2;
                    #2#0 = #1#0;
                    #2#1 = #1#1;
                    #2#2 = nAnyAuto;
                    |LEE 000#2=;
                    |SI FSalida ! 0;
                         #2#2 = nAnyAuto;
                         |PDEFECTO #2, 3, 33;
                    |FINSI;
               |FINSI;

               |PINDA #0#2;
          |FINSI;

          |SI aModulo = "labtraba"; |O aModulo = "nomw0003";
          |O aModulo = "nomir001"; |O aModulo = "nomir020";
               #1#2 = #labempre#2;
               #1#3 = #labtraba#2;
               #1#6 = #labempre#19;
               #1#7 = #labempre#20;
               |PINTA #1#2;
               |PINTA #1#3;
               |PINTA #1#6;
               |PINTA #1#7;
          |FINSI;
     |FINSI;
|FPRC;

|PROCESO borra;
     |BORRA 020#nomauto2.a;
|FPRC;

|DEFBUCLE borra;
     #nomauto2#1;
     ;
     #1#0, #1#1, 0000;
     #1#0, #1#1, 9999;
     be;
     NULL, borra;
|FIN;

|PROCESO borraauto; |TIPO 2;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 3;
          |BUCLE borra;
     |FINSI;
     |MODULO aModulo;
     |QBF aModulo;
     |SI aModulo = "labtraba"; |O aModulo = "nomw0003";
     |O aModulo = "nomir001"; |O aModulo = "nomir020";
          |SI nModo = 1; |O nModo = 3;
               #1#2 = #labempre#2;
               #1#3 = #labtraba#2;
               |PINTA #1#2;
               |PINTA #1#3;
          |FINSI;
     |FINSI;
|FPRC;
/*
|PROGRAMA;
     aParam = PARAMETRO;
     |QBF aParam;
     |SI aParam = "";
          |MANTE #1;
     |SINO;
          aAlfa1 = aParam % 105;
          aAlfa2 = aParam % -105;
          nEmp = aAlfa1;
          nTra = aAlfa2;

          |PINPA #0#nomauto1;
          |DDEFECTO #nomauto1;
          |ABRE #nomauto1;
          #nomauto1#0 = nEmp;
          #nomauto1#1 = nTra;
          |LEE 101#nomauto1.=;
          FEstado = FSalida;

          |PINDA #0#nomauto1;
          |ENDATOS #1#nomauto1;
          |SI FSalida = 0;
               |SI FEstado = 0;    |GRABA 020#nomauto1.a;     |FINSI;
               |SI FEstado ! 0;    |GRABA 020#nomauto1.n;     |FINSI;
          |FINSI;
          |LIBERA #nomauto1;
          |CIERRA #nomauto1;
     |FINSI;
|FPRO;
*/
