|FICHEROS;
    nomw0005 #0;
    nomw0006 #6;
    labempre #1;
    labtraba #2;
    nomconst #3;
|FIN;

|VARIABLES;
     nTrabajador = 0;
     nForma      = 0;
     nModo       = 0;

     &enEmpresa  = 0;
     &enModo     = 0;
|FIN;

|INCLUYE i_busqu;

|PROCESO QuitaCero; |TIPO 7;
     |SI #0#3 = 0;
         |DDEFECTO #1;
         |ABRE #1;
         #1#0 = #0#0;
         |LEE 000#1=;
         #0#3 = #1#32;
         |PINTA #0#3;
         |CIERRA #1;
     |FINSI;
|FPRC;

|RUTINA ClaveBaja6;
      #6#0 = #0#0;
      #6#1 = #0#1;
      #6#2 = 101;
|FRUT;

|RUTINA ClaveAlta6;
      #6#0 = #0#0;
      #6#1 = #0#1;
      #6#2 = 999;
|FRUT;

|PROCESO PintaDatos;  |TIPO 7;
     #0#0 = enEmpresa;

     |ABRE #2;
     #2#0 = #0#0;
     #2#1 = #0#1;
     |LEE 040#2=;
     |SI FSalida ! 0;  |DDEFECTO #2;  |FINSI;
     |CIERRA #2;

     ||ABRE #3;
     ||3#0 = #0#3;
     ||LEE 040#3=;
     ||SI FSalida ! 0;  |DDEFECTO #3;  |FINSI;
     ||CIERRA #3;

     |ATRI I;
     |PINTA 0931, #2#2;
     ||PINTA 1031, #3#1;
     |ATRI i;

     |ENTLINEAL #1#6, -3, 7, 22, 1, ClaveBaja6, ClaveAlta6;
|FPRC;

|RUTINA ClaveBaja2_1;
     #2#0 = enEmpresa;
     #2#7 = "            ";
|FRUT;

|RUTINA ClaveAlta2_1;
     #2#0 = enEmpresa;
     #2#7 = "zzzzzzzzzzzz";
|FRUT;

|RUTINA ClaveBaja2_2;
     #2#0 = enEmpresa;
     #2#2 = " " * 40;
|FRUT;

|RUTINA ClaveAlta2_2;
     #2#0 = enEmpresa;
     #2#2 = "z" * 40;
|FRUT;

|PROCESO Consulta;  |TIPO 11;
     |SI FSalida = 10;
         |ABRE #2;
         |CONSULTA_F_CLAVE #6#2, ClaveBaja2_2, ClaveAlta2_2;
         |CIERRA #2;
         nTrabajador = #2#1;

         |PTEC 806;
         |PTEC 806;
         |ACABA;
     |FINSI;

     |SI FSalida = 11;
         |ABRE #2;
         |CONSULTA_F_CLAVE #5#2, ClaveBaja2_1, ClaveAlta2_1;
         |CIERRA #2;
         nTrabajador = #2#1;

         |PTEC 806;
         |PTEC 806;
         |ACABA;
     |FINSI;
|FPRC;

|PROCESO Borra06;
     |BORRA 020#6a;
     |LIBERA #6;
|FPRC;

|DEFBUCLE nomw0006;
     #6#1;
     ;
     #0#0, #0#1, 101;
     #0#0, #0#1, 999;
     be;
     NULL, Borra06;
|FIN;

|PROCESO Tipo2;  |TIPO 2;
     nForma = 0 +. 1;
     nModo  = (FEntrada / 100) ! 0;

     |SI nModo = 3;
         |BUCLE nomw0006;
         |ACABA;
     |FINSI;

     |SI nForma = 1;
         |ENTLINEAL #1#6, -3, 2, 22, 1, ClaveBaja6, ClaveAlta6;
     |FINSI;
|FPRC;

|RUTINA ClaveBaja0;
     |SI FSalida = "POSICION";
         #0#1 = nTrabajador;
         |SI #0#1 = 0;  #0#1 = 1;  |FINSI;
         nTrabajador = 0;
         |ACABA;
     |FINSI;

     #0#0 = enEmpresa;
     #0#1 = 00001;
|FRUT;

|RUTINA ClaveAlta0;
     #0#0 = enEmpresa;
     #0#1 = 99999;
|FRUT;

|PROGRAMA;
     nTrabajador = 0;
     |PARA;  |SI;  |HACIENDO;
          |ENTLINEAL #1#0, -2, enModo, 22, 1, ClaveBaja0, ClaveAlta0;
          |SI nTrabajador = 0;  |SAL;  |FINSI;
     |SIGUE;
|FPRO;
