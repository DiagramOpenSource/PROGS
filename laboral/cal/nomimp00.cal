|FICHEROS;
    nomimp00 #0;
    nomimp01 #1;    || ayuda empresas
    nomimp02 #2;    || ayuda trabajadores
    nomimp03 #3;    || ayuda importes

    labempre #11;   || empresas
    labtraba #12;   || trabajadores
    nomtrali #13;   || importes lins.

    nomtraca #23;   || importes cabs.
|FIN;

|VARIABLES;
    alfa1 = "";
    alfa2 = "";
    alfa3 = "";
    alfa4 = "";
    nume1 = 0;
    nume2 = 0;
    nume3 = 0;
    nume4 = 0;
    para1 = 0;
    para2 = 0;
    para3 = 0;
    para4 = 0;
    fech1 = @;
    fech2 = @;
    fech3 = @;
    fech4 = @;
    elsw1 = 0;
    elsw2 = 0;
    elsw3 = 0;
    elsw4 = 0;
    FEstado = 0;
    seleccio = 0;
    modo = 0;
    sw_rup = 0;

    path = "";
    nombre = "";
|FIN;
____________________________________/
|PROCESO mayus; |TIPO 0;
    #0Campo = #0Campo > #0Campo;
|PINTA #0Campo;
|FPRC;

|PROCESO def_path; |TIPO 7;
    alfa1 = "";
|DIRECTORIO alfa1;
    path = alfa1 + "laboral/fich/";
|ATRI R;
|PINTA 0840, path;
|ATRI 0;
|FPRC;
____________________________________/ IMPORTES POR TRABAJADOR
|PROCESO nomimp03_1;
|PARA para1 = 0; |SI para1 [ 4; |HACIENDO para1 = para1 + 1;
        #13para1 = #3para1;
|SIGUE;
|GRABA 000#13n;
|SI FSalida = 0;
        #23#0 = #13#0;
        #23#1 = #13#1;
    |GRABA 000#23n;

    |ATRI I;
    |PINTA 2244, #13#0;
    |PINTA 2250, #13#1;
    |PINTA 2256, #13#2;
    |ATRI 0;
|FINSI;
|FPRC;

|DEFBUCLE nomimp03;
 #3#1;
 ;
 "     ", "     ", "   ";
 "zzzzz", "zzzzz", "zzz";
 ;
 NULL, nomimp03_1;
|FIN;

|PROCESO nomtrali;
|ATRI I;  |PINTA 2235, "nomtrali"; |ATRI 0;
|SI #0#5 = "S";
    |DELINDEX #13;
    |DELINDEX #23;
|FINSI;
    nombre = #0#2;  |QBF nombre;   nombre = nombre - ".dat";
    alfa1 = path + nombre + ".ddx";     |FBORRA alfa1;
    alfa1 = path + nombre + ".ixx";     |FBORRA alfa1;
|NOME_DAT #3 nombre;
|ABRE #13;
|ABRE #23;
|BUCLE nomimp03;
|CIERRA #13;
|CIERRA #23;
|FPRC;
____________________________________/ TRABAJADORES
|PROCESO nomimp02_1;
|PARA para1 = 0; |SI para1 [ 247; |HACIENDO para1 = para1 + 1;
        #12para1 = #2para1;
|SIGUE;
|GRABA 000#12n;
|SI FSalida = 0;
    |ATRI I;
    |PINTA 2244, #12#0;
    |PINTA 2250, #12#1;
    |ATRI 0;
|FINSI;
|FPRC;

|DEFBUCLE nomimp02;
 #2#1;
 ;
 "     ", "     ";
 "zzzzz", "zzzzz";
 ;
 NULL, nomimp02_1;
|FIN;

|PROCESO labtraba;
|ATRI I;  |PINTA 2235, "labtraba"; |ATRI 0;
|SI #0#4 = "S";
    |DELINDEX #12;
|FINSI;
    nombre = #0#1;  |QBF nombre;   nombre = nombre - ".dat";
    alfa1 = path + nombre + ".ddx";     |FBORRA alfa1;
    alfa1 = path + nombre + ".ixx";     |FBORRA alfa1;
|NOME_DAT #2 nombre;
|ABRE #12;
|BUCLE nomimp02;
|CIERRA #12;
|FPRC;
____________________________________/ EMPRESAS
|PROCESO nomimp01_1;
|PARA para1 = 0; |SI para1 [ 126; |HACIENDO para1 = para1 + 1;
        #11para1 = #1para1;
|SIGUE;
|GRABA 000#11n;
|SI FSalida = 0;
    |ATRI I;  |PINTA 2244, #11#0;  |ATRI 0;
|FINSI;
|FPRC;

|DEFBUCLE nomimp01;
 #1#1;
 ;
 "     ";
 "zzzzz";
 ;
 NULL, nomimp01_1;
|FIN;

|PROCESO labempre;
|ATRI I;  |PINTA 2235, "labempre"; |ATRI 0;
|SI #0#3 = "S";
    |DELINDEX #11;
|FINSI;
    nombre = #0#0;  |QBF nombre;   nombre = nombre - ".dat";
    alfa1 = path + nombre + ".ddx";     |FBORRA alfa1;
    alfa1 = path + nombre + ".ixx";     |FBORRA alfa1;
|NOME_DAT #1 nombre;
|ABRE #11;
|BUCLE nomimp01;
|CIERRA #11;
|FPRC;
____________________________________/ PROCESO PRINCIPAL
|PROCESO tipo3; |TIPO 3;
|HAZ labempre;
|HAZ labtraba;
|HAZ nomtrali;
|FPRC;
