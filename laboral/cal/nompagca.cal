|FICHEROS;
     nompagca #0;
     nompagli;
     nompagse;
|FIN;

|VARIABLES;
     aAlfa = "";
     {-1}aMenu = "";
     aMenu1 = "2400";
     aMenu2 = "1";
     aMenu3 = "Opciones:";
     aMenu4 = "PABEN";
     aMenu5 = "Pago Masivo";
     aMenu6 = "Anular Pago";
     aMenu7 = "Borrado Registro";
     aMenu8 = "Enlace Contable";
     aMenu9 = "Anular Enlace";
     nOpcion = 0;
     &nEmpresa = 0;
     &nMes = 0;
     &nAny = 0;
     &nTipo = 0;
     &aNorPag = "";
|FIN;

|PROCESO Enlace;
     |SI #0#0 = 1; |Y #0#1 = 2006; |Y #0#2 = 1; |Y #0#3 = 0; |Y #0#4 = "N";
          || valores por defecto, asumo que no he entrado en ninguna ficha
          |MENAV "    ATENCION: es necesario entrar en alguna ficha para realizar el enlace";
          |ACABA;
     |FINSI;
     |PUSHV 05012380;
     nEmpresa = #0#0;
     nAny = #0#1;
     nMes = #0#2;
     nTipo = #0#3;
     aNorPag = #0#4;
     |SUB_EJECUTA "nomtraen";
     |POPV;
|FPRC;

|PROCESO Activa; |TIPO 7;
     |SI #nompagli#7 = "E";
          |CAMPO_MODIFICA #nompagli#8, 1, "S";
     |SINO;
          |CAMPO_MODIFICA #nompagli#8, 1, "N";
     |FINSI;
|FPRC;

|PROCESO Accion;
     |SI nOpcion = 1;
          #nompagli#11 = "S";
          |GRABA 020#nompagli.a;
     |FINSI;
     |SI nOpcion = 2;
          #nompagli#8 = "";
          #nompagli#11 = "N";
          #nompagli#13 = "N";
          #nompagli#14 = 0;
          |GRABA 020#nompagli.a;
     |FINSI;
     |SI nOpcion = 3;
          |BORRA 020#nompagli.a;
          |SI #nompagse#2 = 1; |Y #nompagse#3 = 99999;
               #nompagca#0 = #nompagli#0;
               #nompagca#1 = #nompagli#1;
               #nompagca#2 = #nompagli#2;
               #nompagca#3 = #nompagli#3;
               #nompagca#4 = #nompagli#4;
               |LEE 101#nompagca.=;
               |SI FSalida = 0;
                    |BORRA 020#nompagca.a;
               |FINSI;
          |FINSI;
     |FINSI;
     |SI nOpcion = 5;
          #nompagli#13 = "N";
          |GRABA 020#nompagli.a;
     |FINSI;
|FPRC;

|DEFBUCLE Proceso;
     #nompagli#1;
     ;
     #nompagse#0, #nompagse#4, #nompagse#5, #nompagse#7, #nompagse#8, #nompagse#2;
     #nompagse#1, #nompagse#4, #nompagse#6, #nompagse#7, #nompagse#8, #nompagse#3;
     be;
     NULL, Accion;
|FIN;

|PROCESO Seleccion;
     |SI #0#0 = 1; |Y #0#1 = 2006; |Y #0#2 = 1; |Y #0#3 = 0; |Y #0#4 = "N";
          || asumo que no he entrado en ninguna ficha
     |SINO;
          #nompagse#0 = #0#0;
          #nompagse#1 = #0#0;
          #nompagse#2 = 00001;
          #nompagse#3 = 99999;
          #nompagse#4 = #0#1;
          #nompagse#5 = #0#2;
          #nompagse#6 = #0#2;
          #nompagse#7 = #0#3;
          #nompagse#8 = #0#4;
     |FINSI;
     |PUSHV 05012380;
     |PINPA #0#nompagse;
     |PINDA #0#nompagse;
     |ENDATOS #1#nompagse;
     |SI FSalida = 0;
          |CONFI "    NEsta seguro de que desea Continuar?";
          |SI FSalida = 0;
               |ABRE #nompagca;
               |BUCLE Proceso;
               |CIERRA #nompagca;
          |FINSI;
     |FINSI;
     |POPV;
|FPRC;

|PROCESO Tipo20; |TIPO 20;
     aAlfa = FSalida;
     |SI FSalida = "OPCION";
          FSalida = "Otros";
     |SINO;
          |MENU aMenu;
          nOpcion = FSalida;
          |SI nOpcion = 1;
               |HAZ Seleccion;
          |FINSI;
          |SI nOpcion = 2;
               |HAZ Seleccion;
          |FINSI;
          |SI nOpcion = 3;
               |HAZ Seleccion;
          |FINSI;
          |SI nOpcion = 4;
               |HAZ Enlace;
          |FINSI;
          |SI nOpcion = 5;
               |HAZ Seleccion;
          |FINSI;
     |FINSI;
|FPRC;
