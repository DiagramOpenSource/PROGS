|FICHEROS;
    cay2ivac #0;
    caivasop #1;
|FIN;

|VARIABLES;
    informe1 = "cay21vac";
    inver1 = "";
    inver2 = "";
|FIN;

|INCLUYE acceso_i;
|INCLUYE y2ivas_i;
______________________________________/ CALCULOS DE PANTALLA
|PROCESO cheq_libro; |TIPO 0;
|SI #10#2 ! "S";
    |MENAV "    ATENCION!!! Libro de I.V.A. Repercutido ...";
    |ERROR;
|FINSI;
|FPRC;

|PROCESO empieza; |TIPO 7;
|HAZ inicio;
    #0#3 = fec1;
    #0#4 = fec2;
|PINTA #0#3;
|PINTA #0#4;
|FPRC;

|PROCESO lee_libro1;
|ERROR10;
|FPRC;

|DEFBUCLE lee_libro;
 #10#1;
 2;
  1, "S";
 99, "S";
 e;
 NULL, lee_libro1;
|FIN;

|PROCESO deflib; |TIPO 7;
|DDEFECTO #10;
|BUCLE lee_libro;
    #0#0 = #10#0;
|PINTA #0#0;
|FPRC;

|PROCESO fechad;
|SI #0#3 < fec1; |O #0#3 > fec2;
    |MENAV mensa1;
    |ERROR;
    |ACABA;
|FINSI;
|FPRC;

|PROCESO fechah;
|SI #0#4 < fec1; |O #0#4 > fec2; |O #0#4 < #0#3;
    |MENAV mensa1;
    |ERROR;
    |ACABA;
|FINSI;
|FPRC;

|PROCESO mayor;
 #0Campo = #Campo > " ";
 |PINTA #0Campo;
|FPRC;
|| *****************************************************************

|PROCESO impre; |TIPO 3;
 inver1 = #0#8;
 inver2 = #0#8;
 |SI #0#8 = "A";
     inver1 = " ";
     inver2 = "z";
 |FINSI;
|MENU menu;
    opcion = FSalida;
|SI opcion > 0;
    |SI opcion = 1; |HAZ impresora;  |FINSI;
    |SI opcion = 2; |HAZ pantalla;   |FINSI;
|FINSI;
|FPRC;
______________________________________/ POR IMPRESORA
|DEFBUCLE cay2ivav0;
 #1#1;
 3,48,44;
 #0#0, #0#1, #0#6, #0#3, inver1, #0#9;
 #0#0, #0#2, #0#7, #0#4, inver2, #0#10;
 e;
 NULL, imprimir;
|FIN;

|PROCESO impresora;
  contaiva = 0;
  contarec = 0;
  |IMPRE 0;
  |SI FSalida ! 0;  |ACABA;  |FINSI;
  |INFOR informe1;
  |SI FSalida ! 0;  |FINIMP;  |ACABA;  |FINSI;
  |HAZ borrapunt;
  |BUCLE cay2ivav0;
  |SI sw_pie = 1; |PIEINF; |FINSI;
  |FININF;
  |SI sw_pie = 1; |HAZ impre2; |FINSI;
  |SI sw_pie = 0;
      |MENAV "    Seleccion vacia ...";
  |FINSI;
  |FINIMP;
|FPRC;
______________________________________/ POR PANTALLA
|DEFBUCLE lee_iva;
 #1#1;
 3,48,44;
 #0#0, #0#1, #0#6, #0#3, inver1, #0#9;
 #0#0, #0#2, #0#7, #0#4, inver2, #0#10;
 e;
 NULL, lee_iva1;
|FIN;

|PROCESO pantalla;
    detalle = 0;
    seleccio = 0;
|PINPA #0#11;
|BUCLE lee_iva;
|SI seleccio ! 0;|Y sw_fin = 0;
    |PAUSA;
|FINSI;
|SI seleccio = 0;
    |MENAV "    Seleccion vacia ...";
|FINSI;
|FPRC;
