|FICHEROS;
    caimppag #0;
    camanpag #1;
    caclipro #2;
    caprovin #3;
|FIN;

|VARIABLES;
    alfa1 = "";
    alfa2 = "";
    alfa3 = "";
    alfa4 = "";
    nume1 = 0;
    nume2 = 0;
    nume3 = 0;
    nume4 = 0;
    fech1 = @;
    fech2 = @;
    fech3 = @;
    fech4 = @;
    FEstado = 0;
    seleccio = 0;
    &fec_emi = "";
    &fec_ven = "";
    &pro_cli = "";
    &pro_ban = "";
|FIN;

|INCLUYE acceso_i;
|INCLUYE puntos_i;

|PROCESO mayus;
  #0Campo = #0Campo > " ";
  |PINTA #0Campo;
|FPRC;

_____________________________________________________________________________
|PROCESO cuenta; |TIPO 0;               || CALCULOS DESDE CAMPOS
    p_alfa1 = #0Campo;
     salidas = FSalida;
|HAZ punto;
|SI p_error ! 0;  |ERROR;  |FINSI;
|FPRC;
_____________________________________________________________________________
|PROCESO fechas;                        || CALCULOS AUXILIARES DE DETALLE
    fech1 = #1#6 % 2;
    alfa1 = fech1;
    fec_emi = alfa1 % 11;     || fecha emision

    fech1 = #1#7 % 2;
    alfa1 = fech1;
    fec_ven = alfa1 % 11;     || fecha vencimiento
|FPRC;

|PROCESO proveedor;
  |DDEFECTO #2;
  |ABRE #2;
  #2#23 = "P";
  #2#10 = #1#4;   || cuenta
  #2#11 = #1#5;   || digito
  |LEE 001#2=;
  |CIERRA #2;
|FPRC;

|PROCESO provincia;
|ABRE #3;
    #3#0 = #2#3;
|LEE 001#3=;
|SI FSalida ! 0;  |DDEFECTO #3;  |FINSI;
    pro_cli = #3#1;                || provincia proveedor

    #3#0 = #2#15;
|LEE 001#3=;
|SI FSalida ! 0;  |DDEFECTO #3;  |FINSI;
    pro_ban = #3#1;                || provincia banco
|CIERRA #3;
|FPRC;
_____________________________________________________________________________
|PROCESO lee_pagos1;                   || LECTURA E IMPRESION DE PAGOS
    seleccio = 1;
|HAZ fechas;
|HAZ proveedor;
|HAZ provincia;
|INFOR "caimppag";
|PRINT;
|PIEINF;
|FININF;
    #1#13 = "S";
|GRABA 020#1a;
|LIBERA #1;
|FPRC;

|DEFBUCLE lee_pagos;
 #1#1;
 4, 11, 12, 13, 25;
 #0#0, #0#2, "  ", #0#4, #0#11, #0#6, #0#8, #0#10, #0#13;
 #0#1, #0#3, "zz", #0#5, #0#12, #0#7, #0#9, #0#10, #0#14;
 be;
 NULL, lee_pagos1;
|FIN;

|PROCESO impresion; |TIPO 3;
|IMPRE 0;
|SI FSalida = 0;
    |BUCLE lee_pagos;
    |SI seleccio = 0;
        |MENAV "    ATENCION!!! Seleccion vacia ...";
    |FINSI;
|SINO;
    |MENAV "    Proceso Abortado ...";
|FINSI;
|FINIMP;
|FPRC;
