|FICHEROS;
    casieaca #0;
    casieali #1;
    calibros #2;
    casiegru #3;
    casiesub #4;
    casieain #10;
|FIN;

|VARIABLES;
    &entrada = 1;
    &tipoiva = "";
    &tipocta = "";
    &tipoacu = "";
    &sw_oper1 = 0;
    &sw_oper2 = 0;
    &sw_acumu = 0;
    &sw_ivali = 0;
    seleccio = 0;
    seleccio2 = 0;
|FIN;

|PROCESO detalle;
    tipoiva = "<SIN IVA>";
    tipocta = "";
|SI #0#2 = "S";
    |SI #0#3 = "S";  tipoiva = "SOPORTADO  ";  tipocta = "Proveedor"; |FINSI;
    |SI #0#3 = "R";  tipoiva = "REPERCUTIDO";  tipocta = "Cliente ."; |FINSI;
|FINSI;
|HAZ lee_libro;
|HAZ lee_grupo;
|HAZ lee_subgr;
|FPRC;

|PROCESO lee_libro;
|ABRE #2;
    #2#0 = #0#4;
|LEE 001#2=;
|SI FSalida ! 0;  |DDEFECTO #2;  |FINSI;
|CIERRA #2;
|FPRC;

|PROCESO lee_grupo;
|ABRE #3;
    #3#0 = #0#13;
|LEE 001#3=;
|SI FSalida ! 0;  |DDEFECTO #3;  |FINSI;
|CIERRA #3;
|FPRC;

|PROCESO lee_subgr;
|ABRE #4;
    #4#0 = #0#14;
|LEE 001#4=;
|SI FSalida ! 0;  |DDEFECTO #4;  |FINSI;
|CIERRA #4;
|FPRC;

|PROCESO impresion2;
    seleccio2 = 1;
    tipoacu = "";
    sw_oper1 = 0;
    sw_oper2 = 0;
    sw_acumu = 0;
    sw_ivali = 0;
|SI #1#56 = "B"; tipoacu = "Base Imponible";  |FINSI;
|SI #1#56 = "I"; tipoacu = "Cuota I.V.A.  ";  |FINSI;
|SI #1#56 = "R"; tipoacu = "Cuota Recargo ";  |FINSI;
|SI #1#24 ! " "; |O #1#25 ! " "; |O #1#26 ! " "; |O #1#27 ! " ";
        sw_oper1 = 1;
|FINSI;
|SI #1#28 ! " "; |O #1#29 ! " "; |O #1#30 ! " "; |O #1#31 ! " ";
        sw_oper2 = 1;
|FINSI;
    sw_acumu = #1#8+#1#9+#1#10+#1#11+#1#12+#1#13+#1#14;
|SI #0#2 = "S";|Y #1#57 ! 0;
        sw_ivali = 1;
|FINSI;
|PRINT;
|FPRC;

|PROCESO imprime;
|HAZ detalle;
    seleccio = 1;
    seleccio2 = 0;
|BUCLELIN 2impresion2#0;
|SI seleccio2 ! 0;
    |PIEINF;
|FINSI;
|FPRC;

|DEFBUCLE lectura1;
 #0#1;
 13, 14;
 #10#0, #10#2, #10#4;
 #10#1, #10#3, #10#5;
 e;
 NULL, imprime;
|FIN;

|DEFBUCLE lectura2;
 #0#1;
 13, 14;
 #10#0, #10#2, #10#4;
 #10#1, #10#3, #10#5;
 e;
 NULL, NULL, NULL, NULL, NULL, imprime;
 #0#13, #0#14, #0#0;
|FIN;

|DEFBUCLE lectura3;
 #0#1;
 13, 14;
 #10#0, #10#2, #10#4;
 #10#1, #10#3, #10#5;
 e;
 NULL, NULL, NULL, NULL, NULL, imprime;
 #0#14, #0#13, #0#0;
|FIN;

|PROCESO impresion; |TIPO 3;
    seleccio = 0;
|IMPRE 0;
|SI FSalida = 0;
    |INFOR "casieaca";
    |SI #10#6 = 1;  |BUCLE lectura1;  |FINSI;
    |SI #10#6 = 2;  |BUCLE lectura2;  |FINSI;
    |SI #10#6 = 3;  |BUCLE lectura3;  |FINSI;
    |SI seleccio = 0;
        |MENAV "    ATENCION!!! Seleccion Vacia ...";
    |SINO;
        |SI seleccio2 ! 0;
            || |PIEINF;
        |FINSI;
    |FINSI;
    |FININF;
|SINO;
    |MENAV "    Proceso Abortado ...";
|FINSI;
|FINIMP;
|FPRC;
