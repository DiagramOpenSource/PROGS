|FICHEROS;
     caivases #0;
     caivarep #1;
     caivasop #2;
|FIN;

|VARIABLES;
     aAlfa1 = "";
     aAlfa2 = "";
     aAlfa3 = "";
     aAlfa4 = "";
     nNume1 = 0;
     nNume2 = 0;
     nNume3 = 0;
     nNume4 = 0;
     nPara1 = 0;
     nPara2 = 0;
     nPara3 = 0;
     nPara4 = 0;
     fFech1 = @;
     fFech2 = @;
     fFech3 = @;
     fFech4 = @;
     nFEstado = 0;
     nSeleccio = 0;
     nModo = 0;

     ModoEntrada = 0;

     Numero = 0;
|FIN;
____________________________________/
|PROCESO caivasop_1;
     |DDEFECTO #caivases;
     #caivases#0 = #caivasop#27;
     #caivases#1 = "S";
     |LEE 101#caivases.=;
     |SI FSalida ! 0;
          |GRABA 020#caivases.b;
     |FINSI;
     |SI #caivases#3 [ #caivasop#2;
        #caivases#3 = #caivasop#2 + #caivases#4;
        |GRABA 020#caivases.a;
     |FINSI;
     |LIBERA #caivases;
     |CIERRA #caivases;
|FPRC;

|DEFBUCLE caivasop;
 #caivasop#1;
 ;
 00, "  ",      0;
 99, "zz", 999999;
 ;
 NULL, caivasop_1;
|FIN;

|PROCESO caivarep_1;
     |DDEFECTO #caivases;
     #caivases#0 = #caivarep#27;
     #caivases#1 = "R";
     |LEE 101#caivases.=;
     |SI FSalida ! 0;
          |GRABA 020#caivases.b;
     |FINSI;
     |SI #caivases#3 [ #caivarep#2;
        #caivases#3 = #caivarep#2 + #caivases#4;
        |GRABA 020#caivases.a;
     |FINSI;
     |LIBERA #caivases;
     |CIERRA #caivases;
|FPRC;

|DEFBUCLE caivarep;
 #caivarep#1;
 ;
 00, "  ",      0;
 99, "zz", 999999;
 ;
 NULL, caivarep_1;
|FIN;

|PROCESO Tipo8; |TIPO 8;
     |ABRE #caivases;
     |LEE 000#caivases.p;
     |SI FSalida ! 0;
          |CLS;
          |CABEZA "Contador Series";
          |PINPA #0#0;
          |AVISO;
          |CONFI "0000NNo hay registros. Recuperar (S/N): ";
          |SI FSalida = 0;
               |BUCLE caivarep;
               |BUCLE caivasop;
          |FINSI;
     |FINSI;
     |CIERRA #caivases;
|FPRC;

|PROCESO caivasop1;
   |SI #caivasop#2 > Numero;
      Numero = #caivasop#2;
   |FINSI;
|FPRC;

|DEFBUCLE caivasop1;
#caivasop#1;
;
00,#caivases#0,000001;
99,#caivases#0,999999;
;
NULL,caivasop1;
|FIN;

|PROCESO caivarep1;
   |SI #caivarep#2 > Numero;
      Numero = #caivarep#2;
   |FINSI;
|FPRC;

|DEFBUCLE caivarep1;
#caivarep#1;
;
00,#caivases#0,000001;
99,#caivases#0,999999;
;
NULL,caivarep1;
|FIN;

|PROCESO ContaSerie; |TIPO 7;
   ModoEntrada = (FEntrada / 100) ! 0;

   |SI ModoEntrada = 1;
      |SI #caivases#1 = "R";
         Numero = 0;
         |BUCLE caivarep1;
         #caivases#3 = Numero + #caivases#4;
      |FINSI;
      |SI #caivases#1 = "S";
         Numero = 0;
         |BUCLE caivasop1;
         #caivases#3 = Numero + #caivases#4;
      |FINSI;
   |FINSI;
|FPRC;
