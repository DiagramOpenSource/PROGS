|FICHEROS;
     caconcie #0; ||Este Def.
     camaasil #1; ||Asientos....
     caconcim #2; ||Tipos Conciliacion Avanzada.
     cacuenta #3; ||Plan contable...............
     caconte1 #4; ||Auxiliar 1.
     caconcep #5; ||Conceptos.
     caconte2 #6; ||Auxiliar 2.
     caconci2 #7; ||Tipos Conciliacion Avanzada. (Lineas).
|FIN;

|VARIABLES;
    nImp   = 0;
    j1     = "";
    j2     = "";
    aDes4  = "";
    aDes3  = "";
    aDes5  = "";
    aDes44 = "";
    aDes33 = "";
    aDes55 = "";
    nImpo  = 0;
    nNume  = 0;
|FIN;


|INCLUYE acceso_i;
|INCLUYE puntos_i;

|PROCESO camaasil;
     |SI #2#6 = "+";  |Y #1#9 [0; |ACABA; |FINSI;
     |SI #2#6 = "-";  |Y #1#9 ]0; |ACABA; |FINSI;
     #4#0 = #1#0;
     #4#1 = #1#1;
     #4#2 = #1#2;
     #4#3 = #1#3;
     #4#4 = #1#4;
     #4#5 = #1#5;
     #4#6 = #1#6;
     #4#7 = #1#7;
     #4#8 = #1#8;
     #4#9 = #1#9;
     |GRABA 020#4n;
|FPRC;

|DEFBUCLE camaasil;
#1#3;
 6,8,18;
#3#0,#3#1, "01.01.1990", 000000,#2#4,#2#5, " ";
#3#0,#3#1, "31.12.2300", 999998,#2#4,#2#5, " ";
e;
NULL, camaasil;
|FIN;

|PROCESO cacuenta;
     |BUCLE camaasil;
|FPRC;

|DEFBUCLE cacuenta;
     #3#1;
     ;
j1,0;
j2,9;
;
NULL,cacuenta;
|FIN;
||_________________________________________________________________________

|PROCESO camaasil1;
     |SI #7#4 = "+";  |Y #1#9 [0; |ACABA; |FINSI;
     |SI #7#4 = "-";  |Y #1#9 ]0; |ACABA; |FINSI;
     #5#0 = #1#6;
     |LEE 000#5=;
     |SI FSalida ! 0;
          |ACABA;
     |FINSI;
     aDes33 = #1#7;
     aDes55 = #5#1;
     |QBF aDes55;
     aDes44 = aDes33 - aDes55;
     |QBT aDes44;
     aDes44 = (aDes44 + (" " * 30)) % 130; ||VIC
     |SI aDes44 = aDes4;
           |HAZ grabacon1;
           |SI #1#8 = "D";
                    nImpo = nImpo + #1#9;
           |FINSI;
           |SI #1#8 = "H";
                    nImpo = nImpo - #1#9;
           |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE camaasil1;
#1#3;
 6,8,18;
#4#4,#4#5, "01.01.1990", 000000,#7#2,#7#3, " ";
#4#4,#4#5, "31.12.2300", 999998,#7#2,#7#3, " ";
e;
NULL,camaasil1;
|FIN;

|PROCESO varioscon;
     |BUCLE camaasil1;
|FPRC;

|DEFBUCLE varioscon;
#7#1;
;
#2#0, 1;
#2#0,99;
;
NULL,varioscon;
|FIN;

|PROCESO desgrabacon;
     |BORRA 020#6a;
|FPRC;

|DEFBUCLE desgrabacon;
     #6#3;
     ;
nNume;
nNume;
be;
NULL,desgrabacon;
|FIN;

|PROCESO caconte1;
     #5#0 = #4#6;
     |LEE 000#5=;
     |SI FSalida = 0;
          aDes3 = #4#7;
          aDes5 = #5#1;
          |QBF aDes5;
          aDes4 = aDes3 - aDes5;
          |QBT aDes4;
          aDes4 = (aDes4 + (" " * 30)) % 130; ||VIC
          |ABRE #6;
          |SI #4#8 = "D";
               nImpo = #4#9;
          |SINO;
               nImpo = -#4#9;
          |FINSI;
          nNume = nNume + 1;
          |HAZ grabacon;
          |BUCLE varioscon;
          |CIERRA #6;
          |SI nImpo ! 0;
               |BUCLE desgrabacon;
          |FINSI;
     |FINSI;
|FPRC;


|DEFBUCLE caconte1;
     #4#2;
     ;
"            ",0;
"zzzzzzzzzzzz",9;
;
NULL,caconte1;
|FIN;

|PROCESO concilia;
     #1#0 = #6#0;
     #1#1 = #6#1;
     #1#2 = #6#2;
     #1#3 = #6#3;
     |LEE 110#1=;
     |SI FSalida = 0;
          #1#18 = "û";
          |GRABA 020#1a;
     |FINSI;
     |LIBERA #1;
|FPRC;

|DEFBUCLE concilia;
     #6#3;
     ;
0;
99999;
;
NULL,concilia;
|FIN;


|PROCESO ejec; |TIPO 3;
     |DELINDEX #4;
     |DELINDEX #6;
     |ABRE #4;
     |ABRE #2;
     #2#0 = #0#0;
     |LEE 101#2=;
     j1 = (#2#2 + "                 ") % 112;
     j2 = (#2#3 + "                 ") % 112;
     |BUCLE cacuenta;
     |CIERRA #4;
     |ABRE #5;
     |BUCLE caconte1;
     |CIERRA #5;
     |LIBERA #2;
     |CIERRA #2;
     |SI nNume ! 0;
          |HAZ presenta;
          |CONFI "2400SActualizar Conciliacion : ";
          |SI FSalida = 0;
               |ABRE #1;
               |BUCLE concilia;
               |CIERRA #1;
          |FINSI;
     |FINSI;
|FPRC;

     |FINSI;
|FPRC;

|PROCESO grabacon;
     #6#0  = #4#0;
     #6#1  = #4#1;
     #6#2  = #4#2;
     #6#3  = #4#3;
     #6#4  = #4#4;
     #6#5  = #4#5;
     #6#6  = #4#6;
     #6#7  = #4#7;
     #6#8  = #4#8;
     #6#9  = #4#9;
     #6#10 = nNume;
     |GRABA 020#6n;
|FPRC;

|PROCESO grabacon1;
     #6#0  = #1#0;
     #6#1  = #1#1;
     #6#2  = #1#2;
     #6#3  = #1#3;
     #6#4  = #1#4;
     #6#5  = #1#5;
     #6#6  = #1#6;
     #6#7  = #1#7;
     #6#8  = #1#8;
     #6#9  = #1#9;
     #6#10 = nNume;
     |GRABA 020#6n;
|FPRC;

|PROCESO presenta;
     |ENTLINEAL #1#6 , 5 , 4 , 20 , 1 , inf , sup;
|FPRC;

|RUTINA inf;
     #6#10 = 0;
     #6#0  = 0;
     #6#1  = "01.01.1900";
     #6#2  = 0;
     #6#3  = 0;
|FRUT;

|RUTINA sup;
     #6#10 = 99999;
     #6#0  = 99;
     #6#1  = "31.12.2300";
     #6#2  = 999999;
     #6#3  = 9999;
|FRUT;
