|VARIABLES;
  &v_any    = 0;
  &v_codigo = 0;
  &v_period = 0;
  &v_nombre = "";
  &v_nomemp = "";
  &enganche = 0;
  &r_emp = 0;
  &r_per = 0;
  copia_seg = "";
|FIN;

|INCLUYE i_ficher;

|PROCESO lee_version; |TIPO 9;
  |SI FSalida ! 1; |Y FSalida ! 7;
      enganche = 1;
      v_codigo = #48#2;
      v_period = #48#3;
      v_any    = #48#26;
      v_nombre = #48#1;
      v_nomemp = #48#1;
      |SI v_codigo ! 0;
          |SUB_EJECUTA "caversi1.tab";
          |SUB_EJECUTA "cacerrad.tab";
      |FINSI;
  |FINSI;
|FPRC;

|PROCESO consulta; |TIPO 0;
  |SI FSalida = 9;
      |CIERRAT #48;
      |SUB_EJECUTA "caconemp.run";
      |ABRET #48;
      |ERROR;
      #48#2 = r_emp;
      #48#3 = r_per;
      |PTEC 802;
      |PTEC 802;
  |FINSI;

  |SI FSalida ! 16;  |ACABA;  |FINSI;

  |PUSHV 0501 2380;
  |CUADRO 1818 2366;
  |ATRI R;
  |PINTA 1919, "    ESTE PROCESO CAMBIA LA VERSION A TODAS LAS ";
  |PINTA 2019, " EMPRESAS DE UNA SOLA PASADA.                  ";
  |PINTA 2119, "                                               ";
  |PINTA 2219, "          HA REALIZADO COPIA DE SEGURIDAD :    ";
  |ATRI r;
  copia_seg = "N";
  E_sup = 1;
  E_inf = "SN";
  copia_seg = 2263 ? 1;
  |POPV;
  |SI copia_seg = "N"; |PTEC 807; |ACABA; |FINSI;
  enganche = 2;
  #48#0 = 0;
  |LEE 040#48];
  |PARA; |SI FSalida = 0; |HACIENDO;
         v_codigo = #48#2;
         v_period = #48#3;
         v_any    = #48#26;
         v_nombre = #48#1;
         v_nomemp = #48#1;
         |SUB_EJECUTA "caversi1.tab";
         |LEE 040#48s;
  |SIGUE;

  |PTEC 807;
|FPRC;
