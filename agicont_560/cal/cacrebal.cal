|FICHEROS;
    cacrebal #00;   || def de datos
    caagrupa #01;   || agrupaciones
    cacuebal #02;   || cuentas de balance
    caepigra #03;   || epigrafes
    caparbal #04;   || partidas de balance
    caparexp #05;   || partidas de explotacion

    plancont #07;   || cuentas basico
    predecab #08;   || predef. cabs. basico
    predelin #09;   || predef. lins. basico
    preconce #10;   || conceptos basico

    casieaca #11;   || predef. cabs.
    casieali #12;   || predef. lins.
    caconcep #13;   || conceptos
    predegru #14;   || grupos predef. basico
    predesub #15;   || subgrupos predef. basico
    casiegru #16;   || grupos predef.
    casiesub #17;   || subgrupos predef.
|FIN;

|VARIABLES;
    &entrada = 1;
    vari1="rb  ";
    fiche="";
    handle="";
    canal= "";
    espacio=" ";
    saber = "";
    menos=-1;
    num = 0;
    field = 0;
    sw_vale = 0;
    FEstado = 0;
    nume1 = 0;
    nume2 = 0;
    nume3 = 0;
    nume4 = 0;
    alfa1 = "";
    alfa2 = "";
    alfa3 = "";
    alfa4 = "";
    para1 = 0;
    para2 = 0;
    para3 = 0;
    para4 = 0;
    pepe = 0;
    dire = "";
    buf_dir = 0;
    ele_dir = 0;
    &r_emp = 0;
    &r_per = 0;
    &any_pos = 0;
    ddig3 = 0;
    ddig4 = 0;
    ddig5 = 0;
    ddig6 = 0;
    ddig7 = 0;
    ddig8 = 0;
    ddig9 = 0;
|FIN;

|INCLUYE acceso_i;
|INCLUYE copian_i;

|PROCESO mayor;
  #0Campo = #0Campo > " ";
  |PINTA #0Campo;
|FPRC;

|PROGRAMA;
  |HAZ inicio;
  ddig3 = dig3;
  ddig4 = dig4;
  ddig5 = dig5;
  ddig6 = dig6;
  ddig7 = dig7;
  ddig8 = dig8;
  ddig9 = dig9;
  num_por = #30#2;
  |SI any_pos = 0; any_pos = #30#26; |FINSI;
  any_por = any_pos;
  swprogra = 1;
  |CLS;
  |CABEZA "Pantalla Creacion";
  |PINPA #0#0;
  |PINDA #0#0;
  |ENDATOS #1#0;
  |SI FSalida ! 0;  |ACABA;  |FINSI;
  |SI #0#0 = 0;
      |QBF fich_alta;
      |SI fich_alta = "";
          |DFICE fich_alta;
      |FINSI;
      |SI #0#5 ! 0;
          |HAZ creacion;   || agrupaciones, epigrafes, partidas y cuentas bal.
      |FINSI;
      |HAZ plan_cont;      || plan contable
      |HAZ prede_cab;      || predefinidos cabs.
      |HAZ prede_lin;      || predefinidos lins.
      |HAZ prede_gru;      || grupos
      |HAZ prede_sub;      || subgrupos
      |HAZ pre_conce;      || conceptos
      |ACABA;
  |FINSI;
  cod1 = 1000000 + (#0#0 * 10) + #0#1;
  cod_emp1 = cod1;
  cod_emp2 = cod_emp1 % 206;
  |DBASE dir_fich;
  dir_fich=dir_fich + "fich/" + cod_emp2;
  |QBF fich_alta;
  |SI fich_alta = "";
      |DFICE fich_alta;
  |FINSI;
  fich_copi = dir_fich + "/";
  |SI #0#3 = "T";
      dire = "";
      |DIRECTORIO dire;
      fiche = dire + "agicont/fich/agicont.dir";
      |LEESECUENCIAL fiche, buf_dir, ele_dir, 1, 0;
      |SI ele_dir > 0;
          |PARA para1 = 1; |SI para1 [ ele_dir; |HACIENDO para1 = para1 + 5;
                para2 = para1 + 3;
                |DEL_BUF buf_dir, para2, alfa1;
                alfa1 = alfa1 % 101;
                |SI alfa1 = "1";|O alfa1 = "2";
                    |DEL_BUF buf_dir, para1, alfa1;
                    traba1 = alfa1;    |HAZ copiando;
                |FINSI;
          |SIGUE;
      |SINO;
          alfa1 = "    [" + fiche + "] NO accesible en lectura.";
          |MENAV alfa1;
      |FINSI;
      |FINDIM buf_dir;
  |FINSI;
  |SI #0#3 = "M";
      |HAZ copia_maes;
  |FINSI;
  || ..... atencion falta poner el directorio a los ficheros
  |HAZ acerar4;
  |SI #0#4 = "S";
     |HAZ pone0_maes;
  |FINSI;
|FPRO;

|PROCESO empresa; |TIPO 0;
  |SI FSalida = 9; |ACABA; |FINSI;
  |SI #0#0 = 0;
      #0#1 = 0;
      #0#2 = "SIN COPIAR FICHEROS DE EMPRESAS";
      |CAMPO_MODIFICA #0#1, 1,"N";
      |CAMPO_MODIFICA #0#3, 1,"N";
      |CAMPO_MODIFICA #0#4, 1,"N";
      |CAMPO_MODIFICA #0#5, 1,"S";
      |CAMPO_MODIFICA #0#6, 1,"S";
      |CAMPO_MODIFICA #0#7, 1,"S";
      |CAMPO_MODIFICA #0#8, 1,"S";
      |PINTA #0#1;
      |PINTA #0#2;
  |SINO;
      |HAZ confirma;
      |CAMPO_MODIFICA #0#1, 1,"S";
      |CAMPO_MODIFICA #0#3, 1,"S";
      |CAMPO_MODIFICA #0#4, 1,"S";
      |CAMPO_MODIFICA #0#5, 1,"N";
      |CAMPO_MODIFICA #0#6, 1,"N";
      |CAMPO_MODIFICA #0#7, 1,"N";
      |CAMPO_MODIFICA #0#8, 1,"N";
  |FINSI;
|FPRC;

|PROCESO confirma;
  |AVISO;
  |PUSHV 07301470;
  |CUADRO 07 30 14 70;
  |ATRI R;
  ||            1234567890123456789012345678901234567890
  |PINTA 0831, " ------------------------------------- ";
  |PINTA 0931, " ¨ESTA SEGURO DE MACHACAR LOS FICHEROS ";
  |PINTA 1031, " DE LA EMPRESA EN LA QUE SE ENCUENTRA? ";
  |PINTA 1131, " ------------------------------------- ";
  |PINTA 1231, "        Confirme (S/N):                ";
  |PINTA 1331, " ------------------------------------- ";
  E_inf = "SNsn";
  E_sup = 1;
  alfa1 = "N";
  alfa1 = 1255 ? 0;
  |SI alfa1 = "N";|O alfa1 = "n";
      |ERROR;
  |FINSI;
  |ATRI 0;
  |POPV;
|FPRC;


|PROCESO ejercicio;
  |SI FSalida = 2; |ACABA; |FINSI;
  |SI #0#0 = 0;  |ACABA;  |FINSI;
      cod1 = #0#0;
      cod2 = #0#1;
  |HAZ leelo;
  |SI swerror = 1;
      #0#2 = "EMPRESA INEXISTENTE";
      |ERROR;
  |SINO;
      |SI dig3 ! ddig3; |O dig4 ! ddig4; |O dig5 ! ddig5; |O dig6 ! ddig6;
               |O dig7 ! ddig7; |O dig8 ! ddig8; |O dig9 ! ddig9;
               |MENAV "     NO CORRESPONDEN LOS NIVELES ";
               #0#2 = "NO CORRESPONDEN LOS NIVELES";
          |ERROR;
      |SINO;
           #0#2 = #30#1;
      |FINSI;
  |FINSI;
  |PINTA #0#2;
|FPRC;

|PROCESO consulta;
  |SI FSalida ! 9;  |ACABA;  |FINSI;
  r_emp = 0;
  |SUB_EJECUTA "caconemp.run";
  |ERROR;
    |SI r_emp = 0; |ACABA; |FINSI;
     #0#0 = r_emp;
     #0#1 = r_per;
     |PTEC 802;
|FPRC;


|PROCESO creacion;
  |DBASE dir_fich;
  dir_fich=dir_fich + "fich/";
  |PATH_DAT #1 fich_alta;
  |ABRE #1;
  |CIERRA #1;
  |DELINDEX #1;
  |ABRE #1;
  fiche=vari1 + dir_fich + "agrupaci";
  |SI #0#5 = 1;
      fiche = fiche + ".amp";
  |SINO;
      fiche = fiche + ".abr";
  |FINSI;
  |QBF fiche;
  |FABRE fiche;
  |SI FSalida ] 0;
      handle = FSalida;
      |HAZ seagru;
      |PARA; |SI field > 0; |HACIENDO;
             |HAZ seagru;
      |SIGUE;
      |FCIERRA handle;
  |FINSI;
  |CIERRA #1;
  Pos = menos;

  |DBASE dir_fich;
  dir_fich=dir_fich + "fich/";
  |PATH_DAT #2 fich_alta;
  |ABRE #2;
  |CIERRA #2;
  |DELINDEX #2;
  |ABRE #2;
  fiche=vari1 + dir_fich + "cuebalan";
  |SI #0#5 = 1;
      fiche = fiche + ".amp";
  |SINO;
      fiche = fiche + ".abr";
  |FINSI;
  |QBF fiche;
  |FABRE fiche;
  |SI FSalida ] 0;
      handle = FSalida;
      |HAZ secueb;
      |PARA; |SI field > 0; |HACIENDO;
             |HAZ secueb;
      |SIGUE;
      |FCIERRA handle;
  |FINSI;
  |CIERRA #2;
  Pos = menos;

  |DBASE dir_fich;
  dir_fich=dir_fich + "fich/";
  |PATH_DAT #3 fich_alta;
  |ABRE #3;
  |CIERRA #3;
  |DELINDEX #3;
  |ABRE #3;
  fiche=vari1 + dir_fich + "epigrafe";
  |SI #0#5 = 1;
      fiche = fiche + ".amp";
  |SINO;
      fiche = fiche + ".abr";
  |FINSI;
  |QBF fiche;
  |FABRE fiche;
  |SI FSalida ] 0;
      handle = FSalida;
      |HAZ seepig;
      |PARA; |SI field > 0; |HACIENDO;
             |HAZ seepig;
      |SIGUE;
      |FCIERRA handle;
  |FINSI;
  |CIERRA #3;
  Pos = menos;

  |DBASE dir_fich;
  dir_fich=dir_fich + "fich/";
  |PATH_DAT #4 fich_alta;
  |ABRE #4;
  |CIERRA #4;
  |DELINDEX #4;
  |ABRE #4;
  fiche=vari1 + dir_fich + "parbalan";
  |SI #0#5 = 1;
      fiche = fiche + ".amp";
  |SINO;
      fiche = fiche + ".abr";
  |FINSI;
  |QBF fiche;
  |FABRE fiche;
  |SI FSalida ] 0;
      handle = FSalida;
      |HAZ sebala;
      |PARA; |SI field > 0; |HACIENDO;
             |HAZ sebala;
      |SIGUE;
      |FCIERRA handle;
  |FINSI;
  |CIERRA #4;
  Pos = menos;

  |DBASE dir_fich;
  dir_fich=dir_fich + "fich/";
  |PATH_DAT #5 fich_alta;
  |ABRE #5;
  |CIERRA #5;
  |DELINDEX #5;
  |ABRE #5;
  fiche=vari1 + dir_fich + "parexplo";
  |SI #0#5 = 1;
      fiche = fiche + ".amp";
  |SINO;
      fiche = fiche + ".abr";
  |FINSI;
  |QBF fiche;
  |FABRE fiche;
  |SI FSalida ] 0;
      handle = FSalida;
      |HAZ seexpl;
      |PARA; |SI field > 0; |HACIENDO;
             |HAZ seexpl;
      |SIGUE;
      |FCIERRA handle;
  |FINSI;
  |CIERRA #5;
  Pos = menos;
|FPRC;

|PROCESO seagru;
    canal = handle + espacio;
    canal = canal + 44;
|FLEE canal;
    field = FSalida;
|SI field [ 0;  |ACABA;  |FINSI;
    traba = canal % 101;
    #1#0 = traba;
    traba = canal % 202;
    #1#1 = traba;
|LEE 101#1=;
|SI FSalida = 0;
    |HAZ seagru1;
    |GRABA 020#1a;
|SINO;
    |DDEFECTO #1;
    |HAZ seagru1;
    |GRABA 020#1n;
|FINSI;
|LIBERA #1;
    saber = "Recuperando Agrupacion: " + #1#0 + " " + #1#1 + "         ";
|PINTA 2211,saber;
|FPRC;

|PROCESO seagru1;
    traba = canal %101;
    #1#0 = traba;
    traba = canal %202;
    #1#1 = traba;
    traba = canal % 440;
    #1#2 = traba;
|FPRC;

|PROCESO secueb;
    canal = handle + espacio;
    canal = canal + 21;
|FLEE canal;
    field = FSalida;
|SI field [ 0;  |ACABA;  |FINSI;
    traba = canal % 112;
    #2#0 = traba;
|LEE 101#2=;
|SI FSalida = 0;
    |HAZ secueb1;
    |GRABA 020#2a;
|SINO;
    |DDEFECTO #2;
    |HAZ secueb1;
    |GRABA 020#2n;
|FINSI;
|LIBERA #2;
    saber = "Recuperando Cuenta de Balance: " + #2#0 + "           ";
|PINTA 2211,saber;
|FPRC;

|PROCESO secueb1;
    traba = canal %112;
    #2#0 = traba;
    traba = canal %1301;
    #2#1 = traba;
    traba = canal % 1401;
    #2#2 = traba;
    traba = canal %1502;
    #2#3 = traba;
    traba = canal %1702;
    #2#4 = traba;
    traba = canal % 1902;
    #2#5 = traba;
|FPRC;

|PROCESO seepig;
    canal = handle + espacio;
    canal = canal + 86;
|FLEE canal;
    field = FSalida;
|SI field [ 0;  |ACABA;  |FINSI;
    traba = canal % 101;
    #3#0 = traba;
    traba = canal % 202;
    #3#1 = traba;
    traba = canal % 4402;
    #3#3 = traba;
|LEE 101#3=;
|SI FSalida = 0;
    |HAZ seepig1;
    |GRABA 020#3a;
|SINO;
    |DDEFECTO #3;
    |HAZ seepig1;
    |GRABA 020#3n;
|FINSI;
|LIBERA #3;
    saber = "Recuperando Epigrafe: " + #3#0 + "  " + #3#1 + " " + #3#3 + "        ";
|PINTA 2211,saber;
|FPRC;

|PROCESO seepig1;
    traba = canal % 101;
    #3#0 = traba;
    traba = canal % 202;
    #3#1 = traba;
    traba = canal % 4402;
    #3#3 = traba;
    traba = canal % 440;
    #3#2 = traba;
    traba = canal % 4640;
    #3#4 = traba;
|FPRC;

|PROCESO sebala;
    canal = handle + espacio;
    canal = canal + 128;
|FLEE canal;
    field = FSalida;
|SI field [ 0;  |ACABA;  |FINSI;
    traba = canal % 101;
    #4#0 = traba;
    traba = canal % 202;
    #4#1 = traba;
    traba = canal % 4402;
    #4#3 = traba;
    traba = canal % 8602;
    #4#5 = traba;
|LEE 101#4=;
|SI FSalida = 0;
    |HAZ sebala1;
    |GRABA 020#4a;
|SINO;
    |DDEFECTO #4;
    |HAZ sebala1;
    |GRABA 020#4n;
|FINSI;
|LIBERA #4;
    saber = "Rec. Partidas Balance: " + #4#0 + "  " + #4#1 + " " + #4#3 + " " + #4#5 + "       ";
|PINTA 2211,saber;
|FPRC;

|PROCESO sebala1;
    traba = canal % 101;
    #4#0 = traba;
    traba = canal % 202;
    #4#1 = traba;
    traba = canal % 4402;
    #4#3 = traba;
    traba = canal % 8602;
    #4#5 = traba;
    traba = canal % 440;
    #4#2 = traba;
    traba = canal % 4640;
    #4#4 = traba;
    traba = canal % 8840;
    #4#6 = traba;
|FPRC;

|PROCESO seexpl;
    canal = handle + espacio;
    canal = canal + 129;
|FLEE canal;
    field = FSalida;
|SI field [ 0;  |ACABA;  |FINSI;
    traba = canal % 101;
    #5#0 = traba;
    traba = canal % 201;
    #5#1 = traba;
    traba = canal % 302;
    #5#2 = traba;
    traba = canal % 4502;
    #5#4 = traba;
    traba = canal % 8702;
    #5#6 = traba;
|LEE 101#5=;
|SI FSalida = 0;
    |HAZ seexpl1;
    |GRABA 020#5a;
|SINO;
    |DDEFECTO #5;
    |HAZ seexpl1;
    |GRABA 020#5n;
|FINSI;
|LIBERA #5;
    saber = "Rec. Partidas Explotacion: " + #5#0 + "  " + #5#1 + " " + #5#2 + " " + #5#4 + " " + #5#6;
|PINTA 2211,saber;
|FPRC;

|PROCESO seexpl1;
    traba = canal % 101;
    #5#0 = traba;
    traba = canal % 201;
    #5#1 = traba;
    traba = canal % 302;
    #5#2 = traba;
    traba = canal % 4502;
    #5#4 = traba;
    traba = canal % 8702;
    #5#6 = traba;
    traba = canal % 540;
    #5#3 = traba;
    traba = canal % 4740;
    #5#5 = traba;
    traba = canal % 8940;
    #5#7 = traba;
|FPRC;

***************************************************************************
                  CAPTURA DE FICHEROS BASICOS
***************************************************************************

||....... Plan Contable
|PROCESO creablanco;
 |PARA nume1 = 0; |SI nume1 [ 9; |HACIENDO nume1 = nume1 + 1;
       |DDEFECTO #6;
       #6#0 = "            ";
       #6#1 = nume1;
       |LEE 101#6=;
       FEstado = FSalida;
       #6#3 = "S";
       |SI FEstado = 0;  |GRABA 020#6a;  |FINSI;
       |SI FEstado ! 0;  |GRABA 020#6n;  |FINSI;
       |LIBERA #6;
 |SIGUE;
|FPRC;

|PROCESO plan_cont2;
  sw_vale = 0;
  alfa1 = #7#0;
  |QBF alfa1;
  alfa1 = alfa1 % 0;
  nume1 = alfa1;
  |SI nume1 = ddig4;  sw_vale = 1;  pepe = 1;  |FINSI;
  |SI nume1 = ddig5;  sw_vale = 1;  pepe = 2;  |FINSI;
  |SI nume1 = ddig6;  sw_vale = 1;  pepe = 3;  |FINSI;
  |SI nume1 = ddig7;  sw_vale = 1;  pepe = 4;  |FINSI;
  |SI nume1 = ddig8;  sw_vale = 1;  pepe = 5;  |FINSI;
  |SI nume1 = ddig9;  sw_vale = 1;  pepe = 6;  |FINSI;
  |SI sw_vale ! 1;  |ACABA;  |FINSI;
  #6#0 = #7#0;    || cuenta
  #6#1 = pepe;    || digito
  |LEE 101#6=;
  FEstado = FSalida;
  #6#2  = #7#2;   #6#3  = #7#3;   #6#4  = #7#4;   #6#5  = #7#5;   #6#6  = #7#6;
  #6#7  = #7#7;   #6#8  = #7#8;   #6#9  = #7#9;   #6#10 = #7#10;  #6#11 = #7#11;
  #6#12 = #7#12;  #6#13 = #7#13;  #6#14 = #7#14;  #6#15 = #7#15;  #6#16 = #7#16;
  #6#17 = #7#17;  #6#18 = #7#18;  #6#19 = #7#19;  #6#20 = #7#20;  #6#21 = #7#21;
  #6#22 = #7#22;  #6#23 = #7#23;  #6#24 = #7#24;  #6#25 = #7#25;  #6#26 = #7#26;
  #6#27 = #7#27;  #6#28 = #7#28;  #6#29 = #7#29;  #6#30 = #7#30;  #6#31 = #7#31;
  #6#32 = #7#32;  #6#33 = #7#33;  #6#34 = #7#34;  #6#35 = #7#35;  #6#36 = #7#36;
  #6#37 = #7#37;  #6#38 = #7#38;  #6#39 = #7#39;  #6#40 = #7#40;  #6#41 = #7#41;
  #6#42 = #7#42;  #6#43 = #7#43;  #6#44 = #7#44;  #6#45 = #7#45;  #6#46 = #7#46;
  #6#47 = #7#47;  #6#48 = #7#48;  #6#49 = #7#49;  #6#50 = #7#50;  #6#51 = #7#51;
  #6#52 = #7#52;  #6#53 = #7#53;  #6#54 = #7#54;  #6#55 = #6#1;   #6#56 = #7#56;
  #6#57 = #7#57;  #6#58 = #7#58;  #6#59 = #7#59;
  |SI FEstado = 0;  |GRABA 020#6a;  |FINSI;
  |SI FEstado ! 0;  |GRABA 020#6n;  |FINSI;
  |LIBERA #6;
  saber = " Cuenta ...: " + #6#0 + " " + #6#1;
  |PINTA 2211, saber;
|FPRC;

|DEFBUCLE plan_cont1;
 #7#1;
 ;
 "            ", 0;
 "zzzzzzzzzzzz", 9;
 e;
 NULL, plan_cont2;
|FIN;

|PROCESO plan_cont;
  |PINTA 2211, "                                                              ";
  |SI #0#6 ! "S";  |ACABA;  |FINSI;
  |DBASE dir_fich;
  dir_fich=dir_fich + "fich/";
  |PATH_DAT #7 dir_fich;
  |PATH_DAT #6 fich_alta;
  |ABRE #6;
  |HAZ creablanco;
  |BUCLE plan_cont1;
  |CIERRA #6;
|FPRC;

||....... Predefinidos Cabs.

|PROCESO prede_cab2;
  #11#0 = #8#0;    || nro. asiento predefinido
  |LEE 101#11=;
  FEstado = FSalida;
  #11#0  = #8#0;  #11#1  = #8#1;  #11#2  = #8#2;  #11#3  = #8#3;  #11#4  = #8#4;
  #11#5  = #8#5;  #11#6  = #8#6;  #11#7  = #8#7;  #11#8  = #8#8;  #11#9  = #8#9;
  #11#10 = #8#10; #11#11 = #8#11; #11#12 = #8#12; #11#13 = #8#13; #11#14 = #8#14;
  |SI FEstado = 0;
      |GRABA 020#11a;
  |SINO;
      |GRABA 020#11n;
  |FINSI;
  |LIBERA #11;
  saber = " Predefinido Cab.: " + #11#0;
  |PINTA 2211, saber;
|FPRC;

|DEFBUCLE prede_cab1;
 #8#1;
 ;
    0;
 9999;
 e;
 NULL, prede_cab2;
|FIN;

|PROCESO prede_cab;
  |PINTA 2211, "                                                              ";
  |SI #0#7 ! "S";  |ACABA;  |FINSI;
  |DBASE dir_fich;
  dir_fich=dir_fich + "fich/";
  |PATH_DAT #8 dir_fich;
  |PATH_DAT #11 fich_alta;
  |ABRE #11;
  |BUCLE prede_cab1;
  |CIERRA #11;
|FPRC;

||....... Predefinidos Lins.

|PROCESO prede_lin2;
  #12#0 = #9#0;   || nro. asiento predefinido
  #12#1 = #9#1;   || linea
  |LEE 101#12=;
  FEstado = FSalida;
  #12#0  = #9#0;   #12#1  = #9#1;   #12#2  = #9#2;   #12#3  = #9#3;   #12#4  = #9#4;
  #12#5  = #9#5;   #12#6  = #9#6;   #12#7  = #9#7;   #12#8  = #9#8;   #12#9  = #9#9;
  #12#10 = #9#10;  #12#11 = #9#11;  #12#12 = #9#12;  #12#13 = #9#13;  #12#14 = #9#14;
  #12#15 = #9#15;  #12#16 = #9#16;  #12#17 = #9#17;  #12#18 = #9#18;  #12#19 = #9#19;
  #12#20 = #9#20;  #12#21 = #9#21;  #12#22 = #9#22;  #12#23 = #9#23;  #12#24 = #9#24;
  #12#25 = #9#25;  #12#26 = #9#26;  #12#27 = #9#27;  #12#28 = #9#28;  #12#29 = #9#29;
  #12#30 = #9#30;  #12#31 = #9#31;  #12#32 = #9#32;  #12#33 = #9#33;  #12#34 = #9#34;
  #12#35 = #9#35;  #12#36 = #9#36;  #12#37 = #9#37;  #12#38 = #9#38;  #12#39 = #9#39;
  #12#40 = #9#40;  #12#41 = #9#41;  #12#42 = #9#42;  #12#43 = #9#43;  #12#44 = #9#44;
  #12#45 = #9#45;  #12#46 = #9#46;  #12#47 = #9#47;  #12#48 = #9#48;  #12#49 = #9#49;
  #12#50 = #9#50;  #12#51 = #9#51;  #12#52 = #9#52;  #12#53 = #9#53;  #12#54 = #9#54;
  #12#55 = #9#55;  #12#56 = #9#56;  #12#57 = #9#57;  #12#58 = #9#58;  #12#59 = #9#59;
  #12#60 = #9#60;
  |SI FEstado = 0;  |GRABA 020#12a;  |FINSI;
  |SI FEstado ! 0;  |GRABA 020#12n;  |FINSI;
  |LIBERA #12;
  saber = " Predefinido Lin.: " + #12#0;
  saber = saber + " " + #12#1;
  |PINTA 2211, saber;
|FPRC;

|DEFBUCLE prede_lin1;
 #9#1;
 ;
    0,  0;
 9999, 99;
 e;
 NULL, prede_lin2;
|FIN;

|PROCESO prede_lin;
  |PINTA 2211, "                                                              ";
  |SI #0#7 ! "S";  |ACABA;  |FINSI;
  |DBASE dir_fich;
  dir_fich=dir_fich + "fich/";
  |PATH_DAT #9 dir_fich;
  |PATH_DAT #12 fich_alta;
  |ABRE #12;
  |BUCLE prede_lin1;
  |CIERRA #12;
|FPRC;

||....... Grupos

|PROCESO prede_gru2;
  #16#0 = #14#0;   || grupo
  |LEE 101#16=;
  FEstado = FSalida;
  #16#0 = #14#0;
  #16#1 = #14#1;
  |SI FEstado = 0;  |GRABA 020#16a;  |FINSI;
  |SI FEstado ! 0;  |GRABA 020#16n;  |FINSI;
  |LIBERA #16;
  saber = " Grupos .........: " + #16#0;
  |PINTA 2211, saber;
|FPRC;

|DEFBUCLE prede_gru1;
 #14#1;
 ;
 "  ";
 "zz";
 e;
 NULL, prede_gru2;
|FIN;

|PROCESO prede_gru;
  |PINTA 2211, "                                                              ";
  |SI #0#7 ! "S";  |ACABA;  |FINSI;
  |DBASE dir_fich;
  dir_fich=dir_fich + "fich/";
  |PATH_DAT #14 dir_fich;
  |PATH_DAT #16 fich_alta;
  |ABRE #16;
  |BUCLE prede_gru1;
  |CIERRA #16;
|FPRC;

||....... Subgrupos

|PROCESO prede_sub2;
  #17#0 = #15#0;   || grupo
  |LEE 101#17=;
  FEstado = FSalida;
  #17#0 = #15#0;
  #17#1 = #15#1;
  |SI FEstado = 0;  |GRABA 020#17a;  |FINSI;
  |SI FEstado ! 0;  |GRABA 020#17n;  |FINSI;
  |LIBERA #17;
  saber = " Subgrupos ......: " + #17#0;
  |PINTA 2211, saber;
|FPRC;

|DEFBUCLE prede_sub1;
 #15#1;
 ;
 "    ";
 "zzzz";
 e;
 NULL, prede_sub2;
|FIN;

|PROCESO prede_sub;
  |PINTA 2211, "                                                              ";
  |SI #0#7 ! "S";  |ACABA;  |FINSI;
  |DBASE dir_fich;
  dir_fich=dir_fich + "fich/";
  |PATH_DAT #15 dir_fich;
  |PATH_DAT #17 fich_alta;
  |ABRE #17;
  |BUCLE prede_sub1;
  |CIERRA #17;
|FPRC;

||....... Conceptos

|PROCESO pre_conce2;
  #13#0 = #10#0;   || concepto
  |LEE 101#13=;
  FEstado = FSalida;
  #13#0 = #10#0;
  #13#1 = #10#1;
  |SI FEstado = 0;  |GRABA 020#13a;  |FINSI;
  |SI FEstado ! 0;  |GRABA 020#13n;  |FINSI;
  |LIBERA #13;
  saber = " Concepto .......: " + #13#0;
  |PINTA 2211, saber;
|FPRC;

|DEFBUCLE pre_conce1;
 #10#1;
 ;
   0;
 999;
 e;
 NULL, pre_conce2;
|FIN;

|PROCESO pre_conce;
  |PINTA 2211, "                                                              ";
  |SI #0#8 ! "S";  |ACABA;  |FINSI;
  |DBASE dir_fich;
  dir_fich=dir_fich + "fich/";
  |PATH_DAT #10 dir_fich;
  |PATH_DAT #13 fich_alta;
  |ABRE #13;
  |BUCLE pre_conce1;
  |CIERRA #13;
|FPRC;
