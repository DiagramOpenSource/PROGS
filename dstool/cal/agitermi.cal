
|FICHEROS;
agitermi #0;
|FIN;

|CAMPOS;
|FIN;

|VARIABLES;
sistema = "";
i = 0;
j = 0;
h = 0;
arrai = 0;
nter = 0;
bufter = 0;
totter = 0;
tmp = "";
tmp1 = "";
menuter = "";
defecto = "";
traba = "";
|FIN;


|PROCESO test;|TIPO 0;
     i = Campo - 67;
     j = Campo - i $ 2;
     j = #0j;
     h = Campo + 1 - i $ 2;
     h = #0h;
     |COLOR j,h;
     |SI i ] 0;|Y i [ 1;
          |ATRI 0;
          j = 1455;
     |FINSI;
     |SI i ] 2;|Y i [ 3;
          |ATRI I;
          j = 1555;
     |FINSI;
     |SI i ] 4;|Y i [ 5;
          |ATRI R;
          j = 1655;
     |FINSI;
     |SI i ] 6;|Y i [ 7;
          |ATRI P;
          j = 1755;
     |FINSI;
     |SI i ] 8;|Y i [ 9;
          |ATRI S;
          j = 1855;
     |FINSI;
     |PINTA  j,"*";
     |ATRI 0;
|FPRC;


|PROGRAMA;

|DIRECTORIO traba;
menuter = traba + "dev/ter/terminal.men";
defecto = traba + "dev/ter/pc.tnv";


|QUE_SISTEMA sistema;

|LEESECUENCIAL menuter,arrai,nter,2,0;|| Reserva una entrada al principio
|PARA;|SI;|HACIENDO;

|CLS;
|CABEZA "Pantallas";

|SI arrai ] 0;
     |SI sistema ! "ESDOS";
          |PINTA 1020,"Dispositivo de la Pantalla";
          E_sup = 25;
          E_inf = "";
          tmp = "";
          tmp = 1220 ? 1;
          |SI FSalida = 7;|O FSalida = 1;
               |SAL;
          |FINSI;
          |QBT tmp;
          |SI tmp = "";
               |SAL;
          |FINSI;
          defecto = traba + "dev/ter/" + tmp + ".tnv";
          |CLS;
          |CABEZA "Pantallas";
     |FINSI;

     |AL_BUF arrai,0,"Generar";
     |AL_BUF arrai,1,"";
     nter = nter + 2;|| Incluir la reservada
     |BMENUG arrai,0,2,nter,0,0;
     |SI FSalida < 1;
          |SAL;
     |FINSI;
     |SI FSalida = 1;
          |LEESECUENCIAL defecto,bufter,totter,0,0;
          |SI FSalida ] 0;
               || ************************************* Pantalla
               |PARA i = 1;|SI i < totter;|Y i < 233;|HACIENDO i = i + 1;
                     |DEL_BUF bufter,i,tmp;
                    #0i = tmp;
               |SIGUE;
               |FINDIM bufter;
          |FINSI;
          |PINPA #0#0;
          |PINDA #0#0;
          |ENDATOS #1#0;
          |SI FSalida ] 0;
               |DIMENSIONA 233,bufter,0;
               |SI bufter ] 0
                    |AL_BUF bufter,0,"";
                    |PARA i = 0;|SI i < 233;|HACIENDO i = i + 1;
                         tmp = #0i;
                         |AL_BUF bufter,i,tmp;
                    |SIGUE;
                    |GRABASECUENCIAL defecto,bufter,0,233;
                    |FINDIM bufter;
                    |SYSTEM "exit";|| Esto hace que se active
               |FINSI;
          |FINSI;
     |SINO;
          i = FSalida - 1;
          i = i * 2 + 1;
          |DEL_BUF arrai,i,tmp;
          || AQUI COPYA
          tmp = traba + "bin/agicp " + traba + tmp + " " + defecto;
          |SYSTEM tmp;
     |FINSI;
|FINSI;


|SIGUE;

|SI arrai ] 0;
     |FINDIM arrai;
|FINSI;

|FPRO;
