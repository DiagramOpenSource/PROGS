|FICHEROS;
     :/agitool/def/dsinsgru #0;
|FIN;

|VARIABLES;
     aRuta       = "";
     aPath       = "";
     aGrupo      = "";
     aParametro1 = "";
     aParametro2 = "";
     aOrigen     = "";
     aDestino    = "";
     aIPRemoto   = "";
     aBase       = "";
     aFich       = "";
     aDirGrupo   = "";
     aDirFichero = "";
     aParametro  = "";
     aFichGrupo  = "";
     aAlfa       = "";

     nGrupo      = 0;
     nBoton1     = 0;
|FIN;

|PROCESO Browse;
     |SI FSalida ! 10;  |ACABA;  |FINSI;

     aRuta = #0#0;  |QBF aRuta;
     |SI aRuta = "";
         aRuta = "zdatogru.gz";
     |FINSI;
     aRuta = "F" + aRuta;

     |BROWSE aRuta;

     #0#0 = aRuta % 299;  |PINTA #0#0;
     #0#0 = #0#0 > #0#0;
|FPRC;

|PROCESO Boton1;
     |PTEC 824;
|FPRC;

|PROCESO LimpiaDirectorio;
     |DBASS aBase;   |QBF aBase;
     aDirGrupo = aBase + "dsoporte/fich/grupos/" + Usuario + "/";
     |PARA nGrupo = 0;  |SI nGrupo [ 9999;  |HACIENDO nGrupo = nGrupo + 1;
           aDirFichero = aDirGrupo + (("0000" + nGrupo) % -104) + "/*";
           |_PDIR aDirFichero;
           |PARA;  |SI FSalida ] 0; |HACIENDO;
                   |FBORRA aDirFichero;
                   |_SDIR aDirFichero;
           |SIGUE;
     |SIGUE;
|FPRC;

|PROGRAMA;
     |HAZ LimpiaDirectorio;

     |DBASS aGrupo;  |QBF aGrupo;

     aFichGrupo  = "zgru" + Usuario;
     aPath       = aGrupo;  |QBF aPath;
     aParametro1 = aPath + aFichGrupo + ".gz";
     |DESCOMPRIME aParametro1;

     aParametro1 = aPath + aFichGrupo;
     aParametro2 = aPath;
     |DETAR aParametro1, aParametro2;

     |FBORRA aParametro1;

     aAlfa = aPath + aFichGrupo;
     |FBORRA aAlfa;
|FPRO;

/*   || Antes

|PROCESO Tipo3;  |TIPO 3;
     |HAZ LimpiaDirectorio;

     |DBASS aGrupo;  |QBF aGrupo;

     aOrigen   = #0#0;                     |QBT aOrigen;
     aDestino  = aGrupo + "zdatogru.gz";
     aIPRemoto = "";
     |IP_REMOTO aIPRemoto;
     |SI aIPRemoto = "";
         |COPIA_FICHERO aOrigen, aDestino;
     |SINO;
         |RECIBE_FICHERO aOrigen, aDestino;
     |FINSI;

     aPath       = aGrupo;  |QBF aPath;
     aParametro1 = aPath + "zdatogru.gz";
     |DESCOMPRIME aParametro1;

     aParametro1 = aPath + "zdatogru";
     aParametro2 = aPath;
     |DETAR aParametro1, aParametro2;

     |FBORRA aParametro1;
     |FBORRA aDestino;
|FPRC;

|PROGRAMA;
     aParametro = PARAMETRO;  |QBF aParametro;

     |SI aParametro = "";
         |CLS;
         |CABEZA "Instalador";
         |PINPA #0#0;
         |PINDA #0#0;

         |CONTROL_SIMPLE 0, "BOTON,...", 1570, 1572, Boton1;
         nBoton1 = FSalida;

         |ENDATOS #1#0;

         |FIN_CONTROL_WINDOWS nBoton1;
         |PULSATECLA;
     |SINO;
         #0#0 = "C:\tmp\zdatogru.gz";
         |HAZ Tipo3;
     |FINSI;
|FPRO;
*/
