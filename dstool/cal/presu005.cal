|FICHEROS;
     presu005 #0;
     presu002 #2;

     gopre001@;
     gomantl1@;
|FIN;

|VARIABLES;
     i = 0;
     aAlfa = "";
     aPathDef = "";
     aPathDat = "";
|FIN;

|PROCESO Tmp;
     |PRINT;
|FPRC;

|DEFBUCLE Tmp;
     #2#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, Tmp;
|FIN;

|PROCESO Expediente;
     #gopre001@#0 = #gomantl1@#3;
     #gopre001@#1 = #gomantl1@#4;
     |LEE 000#gopre001@.=;
     |SI FSalida ! 0;
          #2#0 = #gomantl1@#3;
          #2#1 = #gomantl1@#4;
          #2#5 = #gomantl1@#0;
          #2#6 = #gomantl1@#1;
          |GRABA 020#2n;
     |FINSI;
|FPRC;

|DEFBUCLE Expediente;
     #gomantl1@#1003;
     ;
     "     ", 000001, 001;
     "zzzzz", 999999, 999;
     ;
     NULL, Expediente;
|FIN;

|PROCESO Tipo3; |TIPO 3;
     aPathDef = #0#1; |QBF aPathDef;
     aPathDef = aPathDef + "def/";
     aPathDat = #0#1; |QBF aPathDat;
     aPathDat = aPathDat + "fich/" + (("00000" + #0#2) % -105) + "/";
     aAlfa = aPathDef + "gopre001"; |CARGA_DEF aAlfa, gopre001@;
     |SI FSalida ! 0;
          |MENAV "0000No existe gestion en el directorio indicado";
          |ACABA;
     |FINSI;
     aAlfa = aPathDef + "gomantl1"; |CARGA_DEF aAlfa, gomantl1@;
     |PATH_DAT #gopre001@#aPathDat#;
     |PATH_DAT #gomantl1@#aPathDat#;

     |DELINDEX #2;
     |ABRE #2;
     |ABRE #gopre001@;
     |BUCLE Expediente;
     |CIERRA #gopre001@;
     |CIERRA #2;

     |DESCARGA_DEF #gomantl1@;
     |DESCARGA_DEF #gopre001@;

     |IMPRE 0;
     |SI FSalida = 0;
          |INFOR "presu005";
          |SI FSalida = 0;
               |BUCLE Tmp;
               |PIEINF;
               |FININF;
          |SINO;
               |MENAV "0000Falta informe presu005";
          |FINSI;
          |FINIMP;
     |FINSI;
|FPRC;

|PROGRAMA;
     |CLS;
     |ABRE #0;
     |LEE 101#0p;
     |SI FSalida ! 0;
          |DBASE aAlfa;
          #0#1 = aAlfa;
          |GRABA 020#0b;
     |FINSI;
     |PINPA #0#0;
     |PINDA #0#0;
     |ENDATOS #1#0;
     |SI FSalida = 0;
          |GRABA 020#0a;
     |FINSI;
     |CIERRA #0;
|FPRO;
