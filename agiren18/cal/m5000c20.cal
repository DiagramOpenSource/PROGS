|| PROCESOS DE DATOS

|FICHEROS;
     rem05000;

     rem00016;
     rem00017;
     rem00020;
     rem00021;
     rem00053;
     rem00056;
     rem00061;
     rem00100;
     rem00101;

     tempora0@ #0;
     tempora1@ #1;
     tempora2@ #2;
     tempora3@ #3;

     &poblaci@;
|FIN;

|INCLUYE m5000c99;


|PROCESO PasaTitular;
     nLinea = 1;

     #rem00100#8   = 0;
     #rem00100#9   = "N";
     #rem00100#11  = #tempora0@#14;
     #rem00100#12  = #tempora0@#35;
     #rem00100#14  = #tempora0@#20;
     #rem00100#15  = #tempora0@#21;
     aAlfa         = #tempora0@#23;  |QBF aAlfa;
     #rem00100#16  = aAlfa;
     #rem00100#17  = #tempora0@#27;
     aAlfa         = #tempora0@#28;  |QBF aAlfa;
     #rem00100#18  = aAlfa;
     aAlfa         = #tempora0@#29;  |QBF aAlfa;
     #rem00100#19  = aAlfa;
     aAlfa         = #tempora0@#32 % 102;  #rem00100#20  = aAlfa;
     aAlfa         = #tempora0@#32 % 303;  #rem00100#21  = aAlfa;
     #rem00100#22  = #tempora0@#31;
     #rem00100#23  = #tempora0@#32;
     #rem00100#53  = #tempora0@#18 % 520;
     #rem00100#147 = #tempora0@#18;
     #rem00100#154 = #tempora0@#17;
     #rem00100#95  = "";
     #rem00100#109 = #tempora0@#36;
     #rem00100#112 = #tempora0@#37;
     #rem00100#114 = #tempora0@#22;
     #rem00100#115 = #tempora0@#24;
     #rem00100#116 = #tempora0@#25;
     #rem00100#117 = #tempora0@#26;
     #rem00100#118 = #tempora0@#30;

     |SI #tempora0@#10 = "1";
         #rem00100#8 = 34;
     |FINSI;

     |SI #tempora0@#10 = "2";
         #rem00100#8 = 34;
         #rem00100#9 = "S";
     |FINSI;

     |SI #tempora0@#10 = "3";
         #rem00100#8 = 66;
     |FINSI;

     |SI #tempora0@#38 = "4";
         #rem00100#8 = 100;
     |FINSI;

     |SI #tempora0@#12 = "HOMBRE";  #rem00100#105 = "V";  |FINSI;
     |SI #tempora0@#12 = "MUJER ";  #rem00100#105 = "M";  |FINSI;

     |SI #tempora0@#11 ! "00.00.0000";  |Y #tempora0@#11 ! "          ";
         #rem00100#103 = #tempora0@#11;
     |FINSI;

     |SI #tempora0@#13 ! "00.00.0000";  |Y #tempora0@#13 ! "          ";
         #rem00100#90 = "S";
         #rem00100#91 = "T";
         #rem00100#92 = #tempora0@#13;
     |FINSI;
|FPRC;

|PROCESO PasaConyuge;
     nLinea = 2;

     #rem00100#13  = #tempora0@#35;
     #rem00100#35  = #tempora0@#8;
     #rem00100#39  = #tempora0@#9;
     #rem00100#41  = 0;
     #rem00100#42  = "N";
     #rem00100#43  =  #tempora0@#14;
     #rem00100#44  = #tempora0@#20;
     #rem00100#45  = #tempora0@#21;
     aAlfa         = #tempora0@#23;  |QBF aAlfa;
     #rem00100#46  = aAlfa;
     #rem00100#47  = #tempora0@#27;
     aAlfa         = #tempora0@#28;  |QBF aAlfa;
     #rem00100#48  = aAlfa;
     aAlfa         = #tempora0@#29;  |QBF aAlfa;
     #rem00100#49  = aAlfa;
     aAlfa         = #tempora0@#32 % 102;  #rem00100#50  = aAlfa;
     aAlfa         = #tempora0@#32 % 303;  #rem00100#51  = aAlfa;
     #rem00100#52  = #tempora0@#31;
     #rem00100#54  = #tempora0@#18 % 520;
     #rem00100#148 = #tempora0@#18;
     #rem00100#155 = #tempora0@#17;
     #rem00100#110 = #tempora0@#36;
     #rem00100#129 = #tempora0@#37;
     #rem00100#131 = #tempora0@#22;
     #rem00100#132 = #tempora0@#24;
     #rem00100#133 = #tempora0@#25;
     #rem00100#134 = #tempora0@#26;
     #rem00100#135 = #tempora0@#30;

     |SI #tempora0@#10 = "1";
         #rem00100#41 = 34;
     |FINSI;

     |SI #tempora0@#10 = "2";
         #rem00100#41 = 34;
         #rem00100#42 = "S";
     |FINSI;

     |SI #tempora0@#10 = "3";
         #rem00100#41 = 66;
     |FINSI;

     |SI #tempora0@#38 = "4";
         #rem00100#8 = 100;
     |FINSI;

     |SI #tempora0@#12 = "HOMBRE";  #rem00100#106 = "V";  |FINSI;
     |SI #tempora0@#12 = "MUJER ";  #rem00100#106 = "M";  |FINSI;

     |SI #tempora0@#11 ! "00.00.0000";  |Y #tempora0@#11 ! "          ";
         #rem00100#104 = #tempora0@#11;
     |FINSI;

     |SI #tempora0@#13 ! "00.00.0000";  |Y #tempora0@#13 ! "          ";
         #rem00100#90 = "S";
         #rem00100#91 = "C";
         #rem00100#92 = #tempora0@#13;
     |FINSI;

     #rem00100#6 = "C";
|FPRC;

|PROCESO PasaRegistro31;
     |ABRE #rem00100;
     #rem00100#0  = #rem05000#0;
     |LEE 101#rem00100.=;
     |SI FSalida ! 0;
         |DDEFECTO #rem00100;
         #rem00100#0  = #rem05000#0;
         |GRABA 020#rem00100.b;
     |FINSI;

     |SI #tempora0@#2 = 1;  |HAZ PasaTitular;  |FINSI;
     |SI #tempora0@#2 = 2;  |HAZ PasaConyuge;  |FINSI;

     #rem00100#7  = #rem00100#103 % -104;
     #rem00100#40 = #rem00100#104 % -104;

     eaCta = #rem00100#53;    |HAZ CalcuIBAN;  #rem00100#147 = eaIBAN;
     eaCta = #rem00100#54;    |HAZ CalcuIBAN;  #rem00100#148 = eaIBAN;
     eaCta = #rem00100#55;    |HAZ CalcuIBAN;  #rem00100#149 = eaIBAN;

     |GRABA 020#rem00100.a;
     |LIBERA #rem00100;
     |CIERRA #rem00100;

     #tempora1@#0 = #tempora0@#0;
     #tempora1@#1 = #tempora0@#1;
     #tempora1@#2 = #tempora0@#2;
     |LEE 101#tempora1@.=;
     |SI FSalida ! 0;
         |DDEFECTO #tempora1@;
         #tempora1@#0 = #tempora0@#0;
         #tempora1@#1 = #tempora0@#1;
         #tempora1@#2 = #tempora0@#2;
         #tempora1@#4 = "Activo";
         |GRABA 020#tempora1@.b;
     |FINSI;

     |PARA nCampo1 = 7;  |SI nCampo1 [ 37;  |HACIENDO nCampo1 = nCampo1 + 1;
           #tempora1@#nCampo1# = #tempora0@#nCampo1#;
     |SIGUE;

     |GRABA 020#tempora1@.a;
     |LIBERA #tempora1@;
|FPRC;

|PROCESO PasaRegistro37;
     aDef = eaBase + "def/" + #tempora0@#5 + ".mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#9  = #tempora0@#7;
     #tempora2@#14 = #tempora0@#8;
     #tempora2@#11 = #tempora0@#9;
     #tempora2@#15 = #tempora0@#10;

     |SI #tempora2@#9 = "3";  #tempora2@#10 = "EN ARRENDAMIENTO";  |FINSI;
     |SI #tempora2@#9 = "4";  #tempora2@#10 = "OTRAS SITUACIONES"; |FINSI;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#7  = #tempora2@#9;
     #tempora1@#8  = #tempora2@#14;
     #tempora1@#9  = #tempora2@#11;
     #tempora1@#10 = #tempora2@#15;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro32;
     aDef = eaBase + "def/" + #tempora0@#5 + ".mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = #tempora0@#7;
     #tempora2@#3  = #tempora0@#8;
     #tempora2@#4  = "DESCENDIENTE";
     #tempora2@#6  = #tempora0@#9;
     #tempora2@#7  = #tempora0@#12;
     #tempora2@#8  = #tempora0@#13;

     |SI #tempora0@#9 = "1";
         #tempora2@#6 = 34;
     |FINSI;

     |SI #tempora0@#9 = "2";
         #tempora2@#14 = "S";
         #tempora2@#6 = 34;
     |FINSI;

     |SI #tempora0@#9 = "3";
         #tempora2@#6 = 66;
     |FINSI;

     |SI #tempora0@#18 = "4";
         #tempora2@#6 = 100;
     |FINSI;

     #tempora2@#17 = #tempora0@#10;
     |SI #tempora0@#10 = "00.00.0000";  #tempora2@#17 = "01.01.0000";  |FINSI;
     |SI #tempora0@#10 = "          ";  #tempora2@#17 = "01.01.0000";  |FINSI;

     #tempora2@#18 = #tempora0@#11;
     |SI #tempora0@#11 = "00.00.0000";  #tempora2@#18 = "01.01.0000";  |FINSI;
     |SI #tempora0@#11 = "          ";  #tempora2@#18 = "01.01.0000";  |FINSI;

     #tempora2@#19 = "3";
     |SI #tempora0@#16 [ 8000;  #tempora2@#19 = "2";  |FINSI;
     |SI #tempora0@#16 [ 0;     #tempora2@#19 = "";  |FINSI;

     #tempora2@#21 = #tempora0@#15;
     |SI #tempora0@#15 = "00.00.0000";  #tempora2@#21 = "01.01.0000";  |FINSI;
     |SI #tempora0@#15 = "          ";  #tempora2@#21 = "01.01.0000";  |FINSI;

     #tempora2@#5 = #tempora2@#17 % -104;

     |SI #tempora0@#17 = "1";  #tempora2@#20 = "V";  |FINSI;
     |SI #tempora0@#17 = "2";  #tempora2@#20 = "M";  |FINSI;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#7  = #tempora0@#7;
     #tempora1@#8  = #tempora0@#8;
     #tempora1@#9  = #tempora0@#9;
     #tempora1@#10 = #tempora0@#10;
     #tempora1@#11 = #tempora0@#11;
     #tempora1@#12 = #tempora0@#12;
     #tempora1@#13 = #tempora0@#13;
     #tempora1@#14 = #tempora0@#14;
     #tempora1@#15 = #tempora0@#15;
     #tempora1@#16 = #tempora0@#16;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro41;
     aDef = eaBase + "def/" + #tempora0@#5 + ".mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = #tempora0@#7;
     #tempora2@#3  = #tempora0@#8;
     #tempora2@#4  = "ASCENDIENTE";
     #tempora2@#7  = #tempora0@#11;
     #tempora2@#9  = #tempora0@#12;

     |SI #tempora0@#9 = "1";
         #tempora2@#6 = 34;
     |FINSI;

     |SI #tempora0@#9 = "2";
         #tempora2@#14 = "S";
         #tempora2@#6 = 34;
     |FINSI;

     |SI #tempora0@#9 = "3";
         #tempora2@#6 = 66;
     |FINSI;

     |SI #tempora0@#14 = "4";
         #tempora2@#6 = 100;
     |FINSI;

     #tempora2@#17 = #tempora0@#10;
     |SI #tempora0@#10 = "00.00.0000";  #tempora2@#17 = "01.01.0000";  |FINSI;
     |SI #tempora0@#10 = "          ";  #tempora2@#17 = "01.01.0000";  |FINSI;

     #tempora2@#21 = #tempora0@#13;
     |SI #tempora0@#13 = "00.00.0000";  #tempora2@#21 = "01.01.0000";  |FINSI;
     |SI #tempora0@#13 = "          ";  #tempora2@#21 = "01.01.0000";  |FINSI;

     #tempora2@#5 = #tempora2@#17 % -104;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#7  = #tempora0@#7;
     #tempora1@#8  = #tempora0@#8;
     #tempora1@#9  = #tempora0@#9;
     #tempora1@#10 = #tempora0@#10;
     #tempora1@#11 = #tempora0@#11;
     #tempora1@#12 = #tempora0@#12;
     #tempora1@#13 = #tempora0@#13;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro01;
     || Grabamos el fichero REM00020

     aDef = eaBase + "def/" + #tempora0@#5 + ".mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#5  = #tempora0@#8;
     #tempora2@#6  = #tempora0@#11 + #tempora0@#19;
     #tempora2@#7  = #tempora0@#10 + #tempora0@#18;
     #tempora2@#9  = #tempora0@#13 + #tempora0@#21;
     #tempora2@#10 = #tempora0@#14 + #tempora0@#22;
     #tempora2@#11 = #tempora0@#15 + #tempora0@#23;

     #tempora2@#12 = #tempora2@#9 + #tempora2@#10 - #tempora2@#11;
     |SI #tempora2@#12 < 0;  #tempora2@#12 = 0;  |FINSI;

     |SI #tempora0@#17 ! 0;
         #tempora2@#28 = #tempora2@#7;
         #tempora2@#7  = 0;
         #tempora2@#17 = -1;
         #tempora2@#18 = #tempora0@#17;
     |FINSI;

     #tempora2@#19 = #tempora0@#16;

     #tempora2@#23 = #tempora2@#19 + #tempora2@#20 + #tempora2@#21 + #tempora2@#22;
     #tempora2@#24 = #tempora2@#7  + #tempora2@#12 + #tempora2@#34 + #tempora2@#16 + #tempora2@#28;
     #tempora2@#37 = #tempora2@#7  + #tempora2@#12 + #tempora2@#34 + #tempora2@#16 + #tempora2@#28 - #tempora2@#18 - #tempora2@#23;

     aAlfa = #tempora0@#9 % 102;
     |SI aAlfa = "B1";  |O aAlfa = "B2";  |O aAlfa = "B3";
         #tempora2@#43 = "S";
     |FINSI;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#7  = #tempora0@#7;
     #tempora1@#8  = #tempora0@#8;
     #tempora1@#9  = #tempora0@#9;
     #tempora1@#10 = #tempora0@#10;
     #tempora1@#11 = #tempora0@#11;
     #tempora1@#12 = #tempora0@#12;
     #tempora1@#13 = #tempora0@#13;
     #tempora1@#14 = #tempora0@#14;
     #tempora1@#15 = #tempora0@#15;
     #tempora1@#16 = #tempora0@#16;
     #tempora1@#17 = #tempora0@#17;
     #tempora1@#18 = #tempora0@#18;
     #tempora1@#19 = #tempora0@#19;
     #tempora1@#20 = #tempora0@#20;
     #tempora1@#21 = #tempora0@#21;
     #tempora1@#22 = #tempora0@#22;
     #tempora1@#23 = #tempora0@#23;
     #tempora1@#24 = #tempora0@#24;
     #tempora1@#25 = #tempora0@#25;
     #tempora1@#26 = #tempora0@#26;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro30;
     aDef = eaBase + "def/" + #tempora0@#5 + ".mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";

     |SI #tempora0@#5 = "rem00037";
         #tempora2@#11 = #tempora0@#11;
         #tempora2@#16 = #tempora0@#12;
         #tempora2@#12 = #tempora0@#14;
         #tempora2@#13 = #tempora0@#15;
         #tempora2@#14 = #tempora0@#16;
         #tempora2@#15 = #tempora2@#12 + #tempora2@#13 - #tempora2@#14;

         |SI #tempora0@#10 = "K1";  #tempora2@#19 = "S";  |FINSI;
         |SI #tempora0@#10 = "K3";  #tempora2@#19 = "C";  |FINSI;
     |FINSI;

     |SI #tempora0@#5 = "rem00030";
         #tempora2@#12 = #tempora0@#11 + #tempora0@#14 + #tempora0@#15 - #tempora0@#16;
         #tempora2@#23 = #tempora0@#12 + #tempora0@#15;
     |FINSI;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;

     |SI #tempora1@#5 = "rem00037";
         #tempora1@#7  = "";
         #tempora1@#8  = "";
         #tempora1@#9  = "Premios";
         #tempora1@#10 = "K1";
         #tempora1@#11 = #tempora2@#11;
         #tempora1@#12 = #tempora2@#16;
         #tempora1@#14 = #tempora2@#12;
         #tempora1@#15 = #tempora2@#13;
         #tempora1@#16 = #tempora2@#14;

         |SI #tempora2@#19 = "S";  #tempora1@#10 = "K1";  |FINSI;
         |SI #tempora2@#19 = "C";  #tempora1@#10 = "K3";  |FINSI;
     |FINSI;

     |SI #tempora1@#5 = "rem00030";
         #tempora1@#7  = "";
         #tempora1@#8  = "";
         #tempora1@#9  = "Ganancias patromoniales";
         #tempora1@#10 = "K2";
         #tempora1@#11 = #tempora2@#12;
         #tempora1@#12 = #tempora2@#23;
     |FINSI;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro08;
     aDef = eaBase + "def/" + #tempora0@#5 + ".mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#15 = #tempora0@#11;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#7  = "";
     #tempora1@#8  = "Dato desconocido";
     #tempora1@#9  = "";
     #tempora1@#10 = 0;
     #tempora1@#11 = #tempora2@#15;
     #tempora1@#12 = 0;
     #tempora1@#13 = 0;
     #tempora1@#14 = 0;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro02;
     aDef = eaBase + "def/rem00023.mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";

     #tempora2@#11 = "E1";
     #tempora2@#17 = #tempora0@#8;
     #tempora2@#18 = #tempora0@#9;
     #tempora2@#19 = "I";
     #tempora2@#20 = #tempora0@#12 + #tempora0@#14;
     #tempora2@#22 = #tempora0@#13 + #tempora0@#15;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#8  = #tempora2@#17;
     aAlfa   = #tempora2@#18;  |QBF aAlfa;
     aAlfa   = aAlfa % -110;
     #tempora1@#9  = aAlfa;
     #tempora1@#12 = #tempora2@#20;
     #tempora1@#13 = #tempora2@#22;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro03;
     aDef = eaBase + "def/" + #tempora0@#5 + ".mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";

     |SI #tempora0@#5 = "rem00022";
         #tempora2@#11 = "G2";
         #tempora2@#17 = #tempora0@#8;
         #tempora2@#19 = #tempora0@#13;
         #tempora2@#22 = #tempora0@#13;
         #tempora2@#24 = #tempora0@#14;
         #tempora2@#27 = #tempora0@#15;
     |FINSI;

     |SI #tempora0@#5 = "rem00023";
         #tempora2@#11 = "F2";
         #tempora2@#17 = #tempora0@#8;
         #tempora2@#20 = #tempora0@#13;
         #tempora2@#22 = #tempora0@#14;
         #tempora2@#23 = #tempora0@#15;

         |SI #tempora0@#16 = "B01";  #tempora2@#19 = "I";  |FINSI;
         |SI #tempora0@#16 = "B02";  #tempora2@#19 = "I";  |FINSI;
         |SI #tempora0@#16 = "B03";  #tempora2@#19 = "I";  |FINSI;
         |SI #tempora0@#16 = "B04";  #tempora2@#19 = "I";  |FINSI;
         |SI #tempora0@#16 = "B05";  #tempora2@#19 = "I";  |FINSI;
         |SI #tempora0@#16 = "B06";  #tempora2@#19 = "I";  |FINSI;
         |SI #tempora0@#16 = "C01";  #tempora2@#19 = "3";  |FINSI;
         |SI #tempora0@#16 = "C02";  #tempora2@#19 = "2";  |FINSI;
         |SI #tempora0@#16 = "C03";  #tempora2@#19 = "2";  |FINSI;
         |SI #tempora0@#16 = "C04";  #tempora2@#19 = "1";  |FINSI;
         |SI #tempora0@#16 = "C06";  #tempora2@#19 = "O";  |FINSI;
         |SI #tempora0@#16 = "C07";  #tempora2@#19 = "O";  |FINSI;
         |SI #tempora0@#16 = "C12";  #tempora2@#19 = "O";  |FINSI;
         |SI #tempora0@#16 = "C13";  #tempora2@#19 = "5";  |FINSI;
         |SI #tempora0@#16 = "D01";  #tempora2@#19 = "O";  |FINSI;
         |SI #tempora0@#16 = "D02";  #tempora2@#19 = "O";  |FINSI;
         |SI #tempora0@#16 = "D03";  #tempora2@#19 = "O";  |FINSI;
         |SI #tempora0@#16 = "D04";  #tempora2@#19 = "O";  |FINSI;
         |SI #tempora0@#16 = "D05";  #tempora2@#19 = "O";  |FINSI;
         |SI #tempora0@#16 = "D06";  #tempora2@#19 = "O";  |FINSI;
     |FINSI;

     |SI #tempora0@#5 = "rem00051";
         #tempora2@#17 = #tempora0@#8;
         #tempora2@#18 = "S";
         #tempora2@#19 = "V";
         #tempora2@#25 = -1;
         #tempora2@#26 = #tempora0@#13;
         #tempora2@#29 = #tempora0@#14;
     |FINSI;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;

     |SI #tempora0@#5 = "rem00022";
         #tempora1@#8  = #tempora2@#17;
         #tempora1@#11 = "Base imponible ahorro: dividendos       ";
         #tempora1@#13 = #tempora2@#19;
         #tempora1@#14 = #tempora2@#24;
         #tempora1@#15 = #tempora2@#27;
     |FINSI;

     |SI #tempora0@#5 = "rem00023";
         #tempora1@#8  = #tempora2@#17;
         |SI #tempora2@#19 = "I";  #tempora1@#11 = "Intereses  cuentas, depositos y activo";    |FINSI;
         |SI #tempora2@#19 = "B";  #tempora1@#11 = "Intereses activos derecho a bonificacion";  |FINSI;
         |SI #tempora2@#19 = "C";  #tempora1@#11 = "Rdtos transmision, amortizacion o reemb.";  |FINSI;
         |SI #tempora2@#19 = "5";  #tempora1@#11 = "Rdtos causa de imposicion de capitales  ";  |FINSI;
         |SI #tempora2@#19 = "O";  #tempora1@#11 = "Otros rdtos de capital mobiliario       ";  |FINSI;
         |SI #tempora2@#19 = "F";  #tempora1@#11 = "Intereses activos financieros c/bonif.  ";  |FINSI;
         |SI #tempora2@#19 = "1";  #tempora1@#11 = "Rdtos arrendamientos, negocios o minas  ";  |FINSI;
         |SI #tempora2@#19 = "2";  #tempora1@#11 = "Rdtos prestacion de asistencia tecnica  ";  |FINSI;
         |SI #tempora2@#19 = "3";  #tempora1@#11 = "Rdtos de la propiedad intelectual       ";  |FINSI;
         |SI #tempora2@#19 = "4";  #tempora1@#11 = "Rdtos de la propiedad industrial        ";  |FINSI;
         #tempora1@#13 = #tempora2@#20;
         #tempora1@#14 = #tempora2@#22;
         #tempora1@#15 = #tempora2@#23;
     |FINSI;

     |SI #tempora0@#5 = "rem00051";
         #tempora1@#8  = #tempora2@#17;
         #tempora1@#11 = "Rentas temporales o vitalicias";
         #tempora1@#13 = #tempora2@#26;
         #tempora1@#14 = #tempora2@#29;
     |FINSI;

     #tempora1@#13 = #tempora2@#22;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro29;
     aDef = eaBase + "def/rem00023.mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";

     #tempora2@#11 = "F2";
     #tempora2@#17 = #tempora0@#8;

                         #tempora2@#19 = "C";
     |SI #tempora0@#14 = "S";  #tempora2@#19 = "O";  |FINSI;

     |SI #tempora0@#12 < 0;
         #tempora2@#27 = -#tempora0@#12;
     |SINO;
         #tempora2@#28 = #tempora0@#12;
     |FINSI;

     #tempora2@#29 = #tempora2@#28 - #tempora2@#27;
     #tempora2@#31 = #tempora0@#13;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#8  = #tempora2@#17;

     |SI #tempora2@#29 < 0;  #tempora1@#12 = -#tempora2@#29;  |FINSI;
     |SI #tempora2@#29 ] 0;  #tempora1@#12 = #tempora2@#29;   |FINSI;

     #tempora1@#13 = #tempora2@#31;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro05;
     aDef = eaBase + "def/rem00024.mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";

     |SI #tempora0@#12 ! 0;
         #tempora2@#13 = "S";
     |FINSI;

     #tempora2@#15 = #tempora0@#8;

     |SI #tempora0@#10 ] 0;
         #tempora2@#17 = #tempora0@#10;
         #tempora2@#18 = #tempora0@#10;
     |SINO;
         #tempora2@#16 = -#tempora0@#10;
         #tempora2@#18 = #tempora0@#10;
     |FINSI;

     #tempora2@#24 = #tempora0@#12;
     #tempora2@#20 = #tempora0@#11;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#8  = #tempora2@#15;
     #tempora1@#10 = #tempora2@#17;
     #tempora1@#11 = #tempora2@#20;
     #tempora1@#12 = #tempora2@#24;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO ChequeaInmueble;
     nError = 0;

     |ABRE #rem00021;
     |SELECT #3#rem00021;
     #rem00021#0  = #tempora0@#0;
     #rem00021#14 = #tempora0@#7;
     |LEE 000#rem00021.=;
     |SI FSalida ! 0;
         |CIERRA #rem00021;
         |ACABA;
     |FINSI;
     |CIERRA #rem00021;

     aAlfa1 = #rem00021#14;   |QBF aAlfa1;
     aAlfa2 = #tempora0@#7;   |QBF aAlfa2;
     |SI aAlfa1 ! aAlfa2;
         |ACABA;
     |FINSI;

                                aAlfa1 = "P";
     |SI #tempora0@#19 = "PR";  aAlfa1 = "P";  |FINSI;
     |SI #tempora0@#19 = "US";  aAlfa1 = "U";  |FINSI;
     |SI #tempora0@#19 = "NP";  aAlfa1 = "N";  |FINSI;
     |SI #tempora0@#19 = "DF";  aAlfa1 = "M";  |FINSI;

     aAlfa2 = #rem00021#104;

     |SI aAlfa1 ! aAlfa2;
         |ACABA;
     |FINSI;

     |SI #rem00021#2 = "GANANCIAL ";
         |MENAV "0000No puedo trasladar el registro. Ese inmueble est  en la renta como ganancial";
         nError = 1;
     |FINSI;

     |SI #rem00021#2 = "VARIOS    ";
         |SI #tempora0@#21 = 100;
             |MENAV "0000No puedo trasladar el registro. Ese inmueble ya existe en la renta";
             nError = 1;
             |ACABA;
         |FINSI;

         |SI eaContri = "TITULAR";  |Y #rem00021#5 ! #tempora0@#21;  |Y #rem00021#5 ! 0;
             |MENAV "0000No puedo trasladar el registro. Ese inmueble ya existe en la renta";
             nError = 1;
             |ACABA;
         |FINSI;

         |SI eaContri = "CONYUGE";  |Y #rem00021#6 ! #tempora0@#21; |Y #rem00021#6 ! 0;
             |MENAV "0000No puedo trasladar el registro. Ese inmueble ya existe en la renta";
             nError = 1;
             |ACABA;
         |FINSI;

         |SI eaContri = "1 FAMILIAR";  |Y #rem00021#7 ! #tempora0@#21;  |Y #rem00021#7 ! 0;
             |MENAV "0000No puedo trasladar el registro. Ese inmueble ya existe en la renta";
             nError = 1;
             |ACABA;
         |FINSI;

         |SI eaContri = "2 FAMILIAR";  |Y #rem00021#8 ! #tempora0@#21;  |Y #rem00021#8 ! 0;
             |MENAV "0000No puedo trasladar el registro. Ese inmueble ya existe en la renta";
             nError = 1;
             |ACABA;
         |FINSI;

         |SI eaContri = "3 FAMILIAR";  |Y #rem00021#9 ! #tempora0@#21;  |Y #rem00021#9 ! 0;
             |MENAV "0000No puedo trasladar el registro. Ese inmueble ya existe en la renta";
             nError = 1;
             |ACABA;
         |FINSI;

         |SI eaContri = "4 FAMILIAR";  |Y #rem00021#10 ! #tempora0@#21;  |Y #rem00021#10 ! 0;
             |MENAV "0000No puedo trasladar el registro. Ese inmueble ya existe en la renta";
             nError = 1;
             |ACABA;
         |FINSI;
     |FINSI;

     |SI #rem00021#2 = "TITULAR   "; |O #rem00021#2 = "CONYUGE   ";
         |MENAV "0000No puedo trasladar el registro. Este inmueble ya existe.";
         nError = 1;
         |ACABA;
     |FINSI;

     |SI #rem00021#3 = "X";
         |MENAV "0000El registro ya existe en la renta. Pero no est  activo. Act¡velo o b¢rrelo";
         nError = 1;
         |ACABA;
     |FINSI;

     nLinea = #rem00021#1;
|FPRC;

|PROCESO PasaRegistro07;
     aAlfa  = #tempora0@#7;  |QBF aAlfa;
     nLinea = 0;

     |SI aAlfa ! "";
         |HAZ ChequeaInmueble;
         |SI nError = 1;  nLinea = 0;  |ACABA;  |FINSI;
     |FINSI;

     aDef = eaBase + "def/rem00021.mas";
     |CARGA_DEF aDef, tempora2@;

     |ABRE #tempora2@;
     |SI nLinea = 0;
         nLinea = 1;

         #tempora2@#0 = #rem05000#0;
         |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
               #tempora2@#1 = nLinea;
               |LEE 000#tempora2@.=;
               |SI FSalida ! 0;  |SAL;  |FINSI;
         |SIGUE;
     |FINSI;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     |LEE 101#tempora2@.=;
     |SI FSalida ! 0;
         |DDEFECTO #tempora2@;
         #tempora2@#0  = #rem05000#0;
         #tempora2@#1  = nLinea;
         |GRABA 020#tempora2@.b;
     |FINSI;

     |SI #tempora0@#21 = 100;
         #tempora2@#2  = eaContri;
     |SINO;
         #tempora2@#2  = "VARIOS";
         |SI eaContri = "TITULAR";     #tempora2@#5  = #tempora0@#21;  |FINSI;
         |SI eaContri = "CONYUGE";     #tempora2@#6  = #tempora0@#21;  |FINSI;
         |SI eaContri = "1 FAMILIAR";  #tempora2@#7  = #tempora0@#21;  |FINSI;
         |SI eaContri = "2 FAMILIAR";  #tempora2@#8  = #tempora0@#21;  |FINSI;
         |SI eaContri = "3 FAMILIAR";  #tempora2@#9  = #tempora0@#21;  |FINSI;
         |SI eaContri = "4 FAMILIAR";  #tempora2@#10 = #tempora0@#21;  |FINSI;
     |FINSI;

     #tempora2@#3   = "A";
     #tempora2@#13  = #tempora0@#8;

                                 #tempora2@#125 = 1;
     |SI #tempora0@#25 = "2";    #tempora2@#125 = 2;  |FINSI;
     |SI #tempora0@#25 = "3";    #tempora2@#125 = 2;  |FINSI;
     |SI #tempora0@#25 = "4";    #tempora2@#125 = 3;  |FINSI;

     #tempora2@#14  = #tempora0@#7;

     |SI #tempora0@#19 = "PR";  #tempora2@#104 = "P";  |FINSI;
     |SI #tempora0@#19 = "US";  #tempora2@#104 = "U";  |FINSI;
     |SI #tempora0@#19 = "NP";  #tempora2@#104 = "N";  |FINSI;
     |SI #tempora0@#19 = "DF";  #tempora2@#104 = "M";  |FINSI;

     aAlfa = #tempora0@#9 % 102;  #tempora2@#105 = aAlfa;
||   aAlfa = #tempora0@#9 % 303;  #tempora2@#106 = aAlfa;
                                  #tempora2@#106 = 0;

     #tempora2@#17 = #tempora0@#18;
     #tempora2@#18 = "O";

     |SI #tempora0@#13 = "A";  #tempora2@#18 = "U";  |FINSI;
     |SI #tempora0@#13 = "V";  #tempora2@#18 = "U";  |FINSI;
     |SI #tempora0@#13 = "I";  #tempora2@#18 = "L";  |FINSI;
     |SI #tempora0@#13 = "O";  #tempora2@#18 = "L";  |FINSI;
     |SI #tempora0@#13 = "C";  #tempora2@#18 = "L";  |FINSI;
     |SI #tempora0@#13 = "M";  #tempora2@#18 = "S";  |FINSI;
     |SI #tempora0@#13 = "K";  #tempora2@#18 = "O";  |FINSI;
     |SI #tempora0@#13 = "T";  #tempora2@#18 = "O";  |FINSI;
     |SI #tempora0@#13 = "G";  #tempora2@#18 = "O";  |FINSI;
     |SI #tempora0@#13 = "Y";  #tempora2@#18 = "O";  |FINSI;
     |SI #tempora0@#13 = "E";  #tempora2@#18 = "O";  |FINSI;
     |SI #tempora0@#13 = "R";  #tempora2@#18 = "O";  |FINSI;
     |SI #tempora0@#13 = "M";  #tempora2@#18 = "S";  |FINSI;
     |SI #tempora0@#13 = "P";  #tempora2@#18 = "U";  |FINSI;
     |SI #tempora0@#13 = "B";  #tempora2@#18 = "L";  |FINSI;
     |SI #tempora0@#13 = "J";  #tempora2@#18 = "L";  |FINSI;
     |SI #tempora0@#13 = "Z";  #tempora2@#18 = "L";  |FINSI;

     #tempora2@#15 = #tempora0@#17;

     |SI #tempora0@#23 = "H";
         #tempora2@#30 = #tempora0@#22;
         #tempora2@#141 = "";
     |FINSI;

     |SI #tempora0@#23 = "A";
         #tempora2@#31  = #tempora0@#22;
         #tempora2@#141 = "1";
     |FINSI;

     |SI #tempora0@#23 = "O";
         #tempora2@#32  = #tempora0@#22;
         #tempora2@#141 = "2";
     |FINSI;

     |SI #tempora0@#23 = "C";
         |MENAV "0000Inmueble con d¡as en habitual y en alquiler. A continuaci¢n introduzca los d¡as que ha estado en habitual";

         |VENTANA 0501, 0715, -1, 16, "D¡as en habitual";
         nVentanita  = FSalida;
         |PARA;  |SI;  |HACIENDO;
              E_inf    = 1;
              E_sup    = 365;
              nDiasHab = 0607 ? 1;
              |SI nDiasHab < #tempora0@#22; |Y nDiasHab ! 0; |SAL;  |FINSI;
              |MENAV "0000Los d¡as deben ser menor a los d¡as informados en el borrador";
         |SIGUE;
         |FINVENTANA nVentanita;

         #tempora2@#30  = nDiasHab;
         #tempora2@#31  = #tempora0@#22 - nDiasHab;
         #tempora2@#141 = "3";
     |FINSI;

     |GRABA 020#tempora2@.a;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;

     #tempora1@#7  = #tempora2@#14;
     #tempora1@#8  = #tempora2@#13;
     aAlfa   = (("00" + #tempora2@#105) % -102) + (("000" + #tempora2@#106) % -103);
     #tempora1@#9  = aAlfa;

     |SI #tempora2@#18 = "R";  |O #tempora2@#18 = "T";
         #tempora1@#11 = "RU";
         #tempora1@#12 = "R£stica";
     |SINO;
         #tempora1@#11 = "UR";
         #tempora1@#12 = "Urbana";
     |FINSI;

     #tempora1@#13 = " ";
     #tempora1@#14 = "No existe el dato";
     #tempora1@#15 = "  ";
     #tempora1@#16 = "No existe el dato";
     #tempora1@#17 = #tempora2@#15;
     #tempora1@#18 = #tempora2@#17;

     |SI #tempora2@#104 = "P";
         #tempora1@#19 = "PR";
         #tempora1@#20 = "Propietario";
     |FINSI;

     |SI #tempora2@#104 = "U";
         #tempora1@#19 = "US";
         #tempora1@#20 = "Usufructuario";
     |FINSI;

     |SI #tempora2@#104 = "N";
         #tempora1@#19 = "NP";
         #tempora1@#20 = "Nuda propiedad";
     |FINSI;

     |SI #tempora2@#104 = "M";
         #tempora1@#19 = "DF";
         #tempora1@#20 = "Disfrutador";
     |FINSI;

     nPorce = 100;

     |SI #tempora2@#2 = "GANANCIAL ";  nPorce = 50;  |FINSI;

     |SI #tempora2@#2 = "VARIOS    ";
         |SI eaContri = "TITULAR";     nPorce = #tempora2@#5;  |FINSI;
         |SI eaContri = "CONYUGE";     nPorce = #tempora2@#6;  |FINSI;
         |SI eaContri = "1 FAMILIAR";  nPorce = #tempora2@#7;  |FINSI;
         |SI eaContri = "2 FAMILIAR";  nPorce = #tempora2@#8;  |FINSI;
         |SI eaContri = "3 FAMILIAR";  nPorce = #tempora2@#9;  |FINSI;
         |SI eaContri = "4 FAMILIAR";  nPorce = #tempora2@#10; |FINSI;
     |FINSI;

     #tempora1@#21 = nPorce;

     #tempora1@#22 = #tempora2@#30 + #tempora2@#31 + #tempora2@#32 + #tempora2@#33 + #tempora2@#34 + #tempora2@#35;

     nDiasHab = #tempora2@#30 + #tempora2@#33;
     nDiasAlq = #tempora2@#31 + #tempora2@#34;

     #tempora1@#23 = "O";
     #tempora1@#24 = "Otros";

     |SI nDiasHab ! 0;  |Y nDiasAlq = 0;
         #tempora1@#23 = "H";
         #tempora1@#24 = "Vivienda habitual";
     |FINSI;

     |SI nDiasHab = 0;  |Y nDiasAlq ! 0;
         #tempora1@#23 = "A";
         #tempora1@#24 = "Arrendada";
     |FINSI;

     |SI nDiasHab ! 0;  |Y nDiasAlq ! 0;
         #tempora1@#23 = "C";
         #tempora1@#24 = "Habitual y Arrendada";
     |FINSI;

     #tempora1@#25 = "1";
     #tempora1@#26 = "Inmuebles en territorio com£n";

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro09;
     |SI #tempora0@#12 = 0;
         |MENAV "0000El resultado es cero. No se traslada el registro.";
         |ACABA;
     |FINSI;

     aDef = eaBase + "def/" + #tempora0@#5 + ".mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";

     aAlfa   = #tempora0@#9;  |QBF aAlfa;

     |SI aAlfa = "01";  #tempora2@#11 = #tempora0@#12;  |FINSI;
     |SI aAlfa = "02";  #tempora2@#11 = #tempora0@#12;  |FINSI;
     |SI aAlfa = "03";  #tempora2@#11 = #tempora0@#12;  |FINSI;
     |SI aAlfa = "04";  #tempora2@#12 = #tempora0@#12;  |FINSI;
     |SI aAlfa = "05";  #tempora2@#12 = #tempora0@#12;  |FINSI;
     |SI aAlfa = "06";  #tempora2@#12 = #tempora0@#12;  |FINSI;
     |SI aAlfa = "07";  #tempora2@#13 = #tempora0@#12;  |FINSI;
     |SI aAlfa = "08";  #tempora2@#13 = #tempora0@#12;  |FINSI;
     |SI aAlfa = "09";  #tempora2@#13 = #tempora0@#12;  |FINSI;
     |SI aAlfa = "10";  #tempora2@#14 = #tempora0@#12;  |FINSI;
     |SI aAlfa = "11";  #tempora2@#14 = #tempora0@#12;  |FINSI;
     |SI aAlfa = "12";  #tempora2@#14 = #tempora0@#12;  |FINSI;
     |SI aAlfa = "1T";  #tempora2@#11 = #tempora0@#12;  |FINSI;
     |SI aAlfa = "2T";  #tempora2@#12 = #tempora0@#12;  |FINSI;
     |SI aAlfa = "3T";  #tempora2@#13 = #tempora0@#12;  |FINSI;
     |SI aAlfa = "4T";  #tempora2@#14 = #tempora0@#12;  |FINSI;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#7  = "";
     #tempora1@#8  = "Dato desconocido";

     aAlfa   = "";
     |SI #tempora2@#11 ! 0; aAlfa = aAlfa + "1P ";  |FINSI;
     |SI #tempora2@#12 ! 0; aAlfa = aAlfa + "2P ";  |FINSI;
     |SI #tempora2@#13 ! 0; aAlfa = aAlfa + "3P ";  |FINSI;
     |SI #tempora2@#14 ! 0; aAlfa = aAlfa + "4P ";  |FINSI;
     #tempora1@#9  = aAlfa;
     #tempora1@#10 = "";
     #tempora1@#11 = "";
     #tempora1@#12 = #tempora2@#11 + #tempora2@#12 + #tempora2@#13 + #tempora2@#14;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro10;
     aDef = eaBase + "def/" + #tempora0@#5 + ".mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";

     |SI #tempora0@#16 = " ";
         #tempora2@#11 = 1;
     |FINSI;

     |SI #tempora0@#16 = "B";  |Y #tempora0@#17 = "2";
         #tempora2@#11 = 2;
     |FINSI;

     |SI #tempora0@#16 = "B";  |Y #tempora0@#17 = "1";
         #tempora2@#11 = 7;
     |FINSI;

     |SI #tempora0@#16 = "A";  |Y #tempora0@#17 = "2";
         #tempora2@#11 = 3;
     |FINSI;

     |SI #tempora0@#16 = "A";  |Y #tempora0@#17 = "1";
         #tempora2@#11 = 4;
     |FINSI;

     |SI #tempora0@#16 = "G";
         #tempora2@#11 = 5;
     |FINSI;

     |SI #tempora0@#16 = "F";
         #tempora2@#11 = 6;
     |FINSI;

     #tempora2@#12 = #tempora0@#8;
     #tempora2@#13 = #tempora0@#13;
     #tempora2@#14 = #tempora0@#15;
     #tempora2@#15 = #tempora0@#13 % #tempora2@#14;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#8  = #tempora2@#12;
     #tempora1@#9  = "";
     #tempora1@#13 = #tempora2@#13;
     #tempora1@#15 = #tempora2@#14;

     #tempora1@#10 = #tempora0@#10;
     #tempora1@#16 = #tempora0@#16;
     #tempora1@#17 = #tempora0@#17;


     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro46;
     aDef = eaBase + "def/" + #tempora0@#5 + ".mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";

     #tempora2@#11 = #tempora0@#7;
     #tempora2@#12 = #tempora0@#10;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#8  = #tempora0@#8;
     #tempora1@#9  = #tempora0@#9;
     #tempora1@#7  = #tempora2@#11;
     #tempora1@#10 = #tempora2@#12;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaAlTrabajo;
     |ABRE #rem00020;
     #rem00020#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #rem00020#1 = nLinea;
           |LEE 000#rem00020.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #rem00020;
         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #rem00020;
     #rem00020#0  = #rem05000#0;
     #rem00020#1  = nLinea;
     #rem00020#2  = eaContri;
     #rem00020#3  = "A";
     #rem00020#5  = #tempora0@#8;
     #rem00020#13 = #tempora2@#11;
     #rem00020#16 = #tempora2@#15 + #tempora2@#18;

     #rem00020#12 = #rem00020#9  + #rem00020#10 - #rem00020#11;
     #rem00020#23 = #rem00020#19 + #rem00020#20 + #rem00020#21 + #rem00020#22;

     #rem00020#24 = #rem00020#7  + #rem00020#12 + #rem00020#34 + #rem00020#16 + #rem00020#28;
     #rem00020#37 = #rem00020#7  + #rem00020#12 + #rem00020#34 + #rem00020#16 + #rem00020#28 - #rem00020#18 - #rem00020#23;

     |GRABA 020#rem00020.n;
     |LIBERA #rem00020;
     |CIERRA #rem00020;

     #tempora2@#21 = "S";
     #tempora2@#22 = #rem00020#1;
     #tempora2@#28 = eaAzul;
|FPRC;

|PROCESO PasaRegistro14;
     aDef = eaBase + "def/" + #tempora0@#5 + ".mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#24 = "N";

     |SI nLinea = 1;
         #tempora2@#24 = "P";
     |FINSI;

     #tempora2@#11 = #tempora0@#8;
     aAlfa   = #tempora0@#13;  |QBF aAlfa;
     |SI aAlfa = "000000000";  aAlfa = "";  |FINSI;

     |SI aAlfa = "";
         #tempora2@#12 = "N";
         #tempora2@#15 = #tempora0@#12;
         #tempora2@#16 = #tempora0@#11 - #tempora0@#12;
         |SI #tempora2@#16 < 0;  #tempora2@#16 = 0;  |FINSI;
     |SINO;
         #tempora2@#12 = "S";
         #tempora2@#13 = "S";
         #tempora2@#17 = #tempora0@#13;
         #tempora2@#18 = #tempora0@#12;
         #tempora2@#19 = #tempora0@#11 - #tempora0@#12;
     |FINSI;

     |SI #tempora2@#15 ! 0;  |O #tempora2@#18 ! 0;
         |HAZ PasaAlTrabajo;
     |FINSI;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;

     #tempora1@#8  = #tempora2@#11;
     #tempora1@#9  = "Dato desconocido";
     #tempora1@#10 = "Dato desconocido";

     |SI #tempora2@#12 = "N";
          #tempora1@#11 = #tempora2@#16;
          #tempora1@#12 = #tempora2@#15;
     |SINO;
          #tempora1@#11 = #tempora2@#19;
          #tempora1@#12 = #tempora2@#18;
          #tempora1@#13 = #tempora2@#17;
     |FINSI;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;

|FPRC;

|PROCESO PasaRegistro19;
     aDef = eaBase + "def/" + #tempora0@#5 + ".mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#11 = 21;
     #tempora2@#12 = "Datos ficales borrador";
     #tempora2@#14 = #tempora0@#7;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |MENAV "0000Debe informar manualmente la deducci¢n que pueda tener derecho en la casilla 758";

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#7  = #tempora2@#14;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro21;
     aDef = eaBase + "def/rem00052.mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#11 = "F2";
     #tempora2@#16 = #tempora0@#8;
     #tempora2@#17 = #tempora0@#10;
     #tempora2@#18 = #tempora0@#12;
     #tempora2@#19 = #tempora0@#11;
     #tempora2@#20 = #tempora0@#9;

     aAlfa1      = #tempora2@#17 % -104;
     aAlfa2      = #tempora2@#17 % 0105;
     nAnyoCompra = aAlfa1;
     |SI aAlfa2 = "31.12";  nAnyoCompra = nAnyoCompra + 1;  |FINSI;

     #tempora2@#21 = #tempora2@#19 - #tempora2@#20;

     |SI #tempora2@#17 < "31.12.1996";
         |SI #tempora2@#21 < 0;
             #tempora2@#22 = -#tempora2@#21;
             #tempora2@#23 = 0;
             #tempora2@#24 = 0;
         |SINO;
             #tempora2@#23 = (1996 - nAnyoCompra) + 1;
             #tempora2@#24 = #tempora2@#21;
             #tempora2@#22 = 0;
         |FINSI;
     |SINO;
         |SI #tempora2@#21 < 0;
             #tempora2@#22 = -#tempora2@#21;
             #tempora2@#23 = 0;
             #tempora2@#24 = 0;
         |SINO;
             #tempora2@#24 = #tempora2@#21;
             #tempora2@#22 = 0;
             #tempora2@#23 = 0;
         |FINSI;
     |FINSI;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;

     #tempora1@#8  = #tempora2@#16;
     #tempora1@#9  = #tempora2@#20;
     #tempora1@#10 = #tempora2@#17;
     #tempora1@#11 = #tempora2@#19;
     #tempora1@#12 = #tempora2@#18;
     #tempora1@#14 = #tempora2@#21;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro23;
     aDef = eaBase + "def/rem00030.mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#13 = #tempora0@#9;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#9  = #tempora2@#13;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro25;
     aDef = eaBase + "def/rem00058.mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#11 = #tempora0@#14;
     #tempora2@#12 = #tempora0@#7;
     #tempora2@#13 = "1";
     #tempora2@#17 = #tempora0@#10;
     #tempora2@#19 = #tempora0@#11;
     #tempora2@#20 = #tempora2@#17 - #tempora2@#18 - #tempora2@#19;
     #tempora2@#21 = #tempora0@#12;
     #tempora2@#45 = #tempora0@#13;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#7  = #tempora0@#7;
     #tempora1@#8  = #tempora0@#8;
     #tempora1@#9  = #tempora0@#9;
     #tempora1@#10 = #tempora0@#10;
     #tempora1@#11 = #tempora0@#11
     #tempora1@#12 = #tempora0@#12;
     #tempora1@#13 = #tempora0@#13;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro26;
     aDef = eaBase + "def/rem00058.mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#11 = #tempora0@#12;
     #tempora2@#12 = #tempora0@#7;
     #tempora2@#13 = "2";
     #tempora2@#23 = #tempora0@#9;
     #tempora2@#25 = #tempora0@#10;
     #tempora2@#26 = #tempora2@#23 - #tempora2@#24 - #tempora2@#25;
     #tempora2@#45 = #tempora0@#11;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#7  = #tempora0@#7;
     #tempora1@#8  = #tempora0@#8;
     #tempora1@#9  = #tempora0@#9;
     #tempora1@#10 = #tempora0@#10;
     #tempora1@#11 = #tempora0@#11;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro27;
     aDef = eaBase + "def/rem00058.mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#11 = #tempora0@#12;
     #tempora2@#12 = #tempora0@#7;
     #tempora2@#13 = "3";
     #tempora2@#27 = #tempora0@#9;
     #tempora2@#29 = #tempora0@#10;
     #tempora2@#50 = #tempora0@#13;
     #tempora2@#30 = #tempora2@#27 - #tempora2@#28 - #tempora2@#29 - #tempora2@#50;
     #tempora2@#45 = #tempora0@#11;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#7  = #tempora0@#7;
     #tempora1@#8  = #tempora0@#8;
     #tempora1@#9  = #tempora0@#9;
     #tempora1@#10 = #tempora0@#10;
     #tempora1@#11 = #tempora0@#11;
     #tempora1@#12 = #tempora0@#12;
     #tempora1@#13 = #tempora0@#13;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro28;
     aDef = eaBase + "def/rem00058.mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#11 = #tempora0@#14;
     #tempora2@#12 = #tempora0@#7;
     #tempora2@#13 = "4";
     #tempora2@#45 = #tempora0@#13;

     |SI #tempora0@#9 = "F";
         |SI #tempora0@#10 = "01";  #tempora2@#31 = #tempora0@#12;  |FINSI;
         |SI #tempora0@#10 = "02";  #tempora2@#32 = #tempora0@#12;  |FINSI;
     |FINSI;

     |SI #tempora0@#9 = "G";
         |SI #tempora0@#10 = "01";  #tempora2@#33 = #tempora0@#12;  |FINSI;
         |SI #tempora0@#10 = "02";  #tempora2@#44 = #tempora0@#12;  |FINSI;
     |FINSI;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#7  = #tempora0@#7;
     #tempora1@#8  = #tempora0@#8;
     #tempora1@#9  = #tempora0@#9;
     #tempora1@#10 = #tempora0@#10;
     #tempora1@#11 = #tempora0@#11
     #tempora1@#12 = #tempora0@#12;
     #tempora1@#13 = #tempora0@#13;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro34;
     aDef = eaBase + "def/rem00030.mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#13 = #tempora0@#10;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#7  = #tempora0@#7;
     #tempora1@#8  = #tempora0@#8;
     #tempora1@#9  = #tempora0@#9;
     #tempora1@#10 = #tempora2@#13;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro13;
     aDef = eaBase + "def/" + #tempora0@#5 + ".mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#11 = "1";
     #tempora2@#14 = #tempora0@#9;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#7  = "";
     #tempora1@#8  = 0;
     #tempora1@#9  = #tempora2@#14;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro36;
     aDef = eaBase + "def/rem00065.mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#11 = "2";
     #tempora2@#15 = #tempora0@#7;
     #tempora2@#16 = #tempora0@#8;
     #tempora2@#17 = #tempora0@#9;
     #tempora2@#21 = #tempora0@#38;

     |SI #tempora0@#10 ] "01.01.2018";  |Y #tempora0@#10 [ "31.12.2018";
         #tempora2@#18 = #tempora0@#10;
     |FINSI;

     #tempora2@#25 = #tempora0@#12;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;

     |PARA enCampo = 7;  |SI enCampo [ 36;  |HACIENDO enCampo = enCampo + 1;
           #tempora1@#enCampo# = #tempora0@#enCampo#;
     |SIGUE;

     #tempora1@#7  = #tempora2@#15;
     #tempora1@#8  = #tempora2@#16;
     #tempora1@#9  = #tempora2@#17;
     #tempora1@#10 = #tempora2@#18;
     #tempora1@#12 = #tempora2@#25;
     #tempora1@#38 = #tempora2@#21;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro38;
     aDef = eaBase + "def/rem00065.mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#11 = "3";
     #tempora2@#26 = #tempora0@#7;
     #tempora2@#27 = #tempora0@#8;
     #tempora2@#28 = #tempora0@#9;
     #tempora2@#32 = #tempora0@#38;
     #tempora2@#33 = #tempora0@#39;
     #tempora2@#34 = #tempora0@#40;

     |SI #tempora0@#10 ] "01.01.2018";  |Y #tempora0@#10 [ "31.12.2018";
         #tempora2@#29 = #tempora0@#10;
     |FINSI;

     #tempora2@#38 = #tempora0@#12;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;

     |PARA enCampo = 7;  |SI enCampo [ 36;  |HACIENDO enCampo = enCampo + 1;
           #tempora1@#enCampo# = #tempora0@#enCampo#;
     |SIGUE;

     #tempora1@#7  = #tempora2@#26;
     #tempora1@#8  = #tempora2@#27;
     #tempora1@#9  = #tempora2@#28;
     #tempora1@#10 = #tempora2@#29;
     #tempora1@#12 = #tempora2@#38;
     #tempora1@#38 = #tempora2@#32;
     #tempora1@#39 = #tempora2@#33;
     #tempora1@#40 = #tempora2@#34;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro60;
     aDef = eaBase + "def/rem00065.mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#11 = "4";
     #tempora2@#59 = #tempora0@#7;
     #tempora2@#60 = #tempora0@#8;
     #tempora2@#61 = #tempora0@#9;

     |SI #tempora0@#10 ] "01.01.2018";  |Y #tempora0@#10 [ "31.12.2018";
         #tempora2@#62 = #tempora0@#10;
     |FINSI;

     #tempora2@#67 = #tempora0@#12;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;

     |PARA enCampo = 7;  |SI enCampo [ 36;  |HACIENDO enCampo = enCampo + 1;
           #tempora1@#enCampo# = #tempora0@#enCampo#;
     |SIGUE;

     #tempora1@#7  = #tempora2@#59;
     #tempora1@#8  = #tempora2@#60;
     #tempora1@#9  = #tempora2@#61;
     #tempora1@#10 = #tempora2@#62;
     #tempora1@#12 = #tempora2@#67;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro35;
     aDef = eaBase + "def/rem00065.mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#11 = "5";
     #tempora2@#40 = "1";
     |SI #tempora0@#9 = "E";  #tempora2@#40 = "2";  |FINSI;
     #tempora2@#39 = #tempora0@#10;

     #tempora2@#43 = 1;
     |SI #tempora0@#43 ! "         ";
         #tempora2@#43 = 2;
     |FINSI;

     #tempora2@#41 = #tempora0@#12;
     |SI #tempora0@#13 ] "01.01.2018";  |Y #tempora0@#13 [ "31.12.2018";
         #tempora2@#42 = #tempora0@#13;
     |FINSI;
     #tempora2@#51 = #tempora0@#15;
     #tempora2@#39 = #tempora0@#42;
     #tempora2@#45 = #tempora0@#41;
     #tempora2@#46 = #tempora0@#43;

     nOk = 0;
     |SI #tempora0@#51 ! 0;  nOk = 1;  |FINSI;
     |SI #tempora0@#52 ! 0;  nOk = 1;  |FINSI;
     |SI #tempora0@#53 ! 0;  nOk = 1;  |FINSI;
     |SI #tempora0@#54 ! 0;  nOk = 1;  |FINSI;
     |SI #tempora0@#55 ! 0;  nOk = 1;  |FINSI;

     |SI nOk = 1;
         #tempora2@#68 = "S";
     |FINSI;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;

     |PARA enCampo = 7;  |SI enCampo [ 39;  |HACIENDO enCampo = enCampo + 1;
           #tempora1@#enCampo# = #tempora0@#enCampo#;
     |SIGUE;

     |SI #tempora2@#40 = "1";  #tempora1@#9  = "G";  |FINSI;
     |SI #tempora2@#40 = "2";  #tempora1@#9  = "E";  |FINSI;

     #tempora1@#11 = #tempora2@#43;
     #tempora1@#12 = #tempora2@#41;
     #tempora1@#13 = #tempora2@#42;
     #tempora1@#15 = #tempora2@#51;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro40;
     aDef = eaBase + "def/" + #tempora0@#5 + ".mas";
     |CARGA_DEF aDef, tempora2@;

     nLinea = 1;

     |ABRE #tempora2@;
     #tempora2@#0 = #rem05000#0;
     |PARA nLinea = 1;  |SI nLinea [ 100;  |HACIENDO nLinea = nLinea + 1;
           #tempora2@#1 = nLinea;
           |LEE 000#tempora2@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;

     |SI nLinea = 100;
         |CIERRA #tempora2@;
         |DESCARGA_DEF #tempora2@;

         |MENAV "0000Excedido el n£mero de registros";
         |ACABA;
     |FINSI;

     |DDEFECTO #tempora2@;
     #tempora2@#0  = #rem05000#0;
     #tempora2@#1  = nLinea;
     #tempora2@#2  = eaContri;
     #tempora2@#3  = "A";
     #tempora2@#11 = "6";
     #tempora2@#53 = #tempora0@#9;

     |GRABA 020#tempora2@.n;
     |LIBERA #tempora2@;
     |CIERRA #tempora2@;

     |HAZ BuscaLinea1;

     |DDEFECTO #tempora1@;

     #tempora1@#0  = #tempora0@#0;
     #tempora1@#1  = #tempora0@#1;
     #tempora1@#2  = nLinea1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#5  = #tempora0@#5;
     #tempora1@#6  = nLinea;
     #tempora1@#7  = "";
     #tempora1@#8  = 0;
     #tempora1@#9  = #tempora2@#53;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO PasaRegistro;
     |SI nMasivo = 0;
         |CONFI "0000NUsted est  pasando el registro a la renta. Est  seguro";
         |SI FSalida ! 0;  |ACABA;  |FINSI;
     |FINSI;

     nLinea = 0;
     |SI aClave = "01"; |HAZ PasaRegistro01;  |FINSI;
     |SI aClave = "02"; |HAZ PasaRegistro02;  |FINSI;
     |SI aClave = "03"; |HAZ PasaRegistro03;  |FINSI;
     |SI aClave = "05"; |HAZ PasaRegistro05;  |FINSI;
     |SI aClave = "07"; |HAZ PasaRegistro07;  |FINSI;
     |SI aClave = "08"; |HAZ PasaRegistro08;  |FINSI;
     |SI aClave = "09"; |HAZ PasaRegistro09;  |FINSI;
     |SI aClave = "10"; |HAZ PasaRegistro10;  |FINSI;
     |SI aClave = "13"; |HAZ PasaRegistro13;  |FINSI;
     |SI aClave = "14"; |HAZ PasaRegistro14;  |FINSI;
     |SI aClave = "19"; |HAZ PasaRegistro19;  |FINSI;
     |SI aClave = "21"; |HAZ PasaRegistro21;  |FINSI;
     |SI aClave = "23"; |HAZ PasaRegistro23;  |FINSI;
     |SI aClave = "25"; |HAZ PasaRegistro25;  |FINSI;
     |SI aClave = "26"; |HAZ PasaRegistro26;  |FINSI;
     |SI aClave = "27"; |HAZ PasaRegistro27;  |FINSI;
     |SI aClave = "28"; |HAZ PasaRegistro28;  |FINSI;
     |SI aClave = "29"; |HAZ PasaRegistro29;  |FINSI;
     |SI aClave = "30"; |HAZ PasaRegistro30;  |FINSI;
     |SI aClave = "31"; |HAZ PasaRegistro31;  |FINSI;
     |SI aClave = "32"; |HAZ PasaRegistro32;  |FINSI;
     |SI aClave = "34"; |HAZ PasaRegistro34;  |FINSI;
     |SI aClave = "35"; |HAZ PasaRegistro35;  |FINSI;
     |SI aClave = "36"; |HAZ PasaRegistro36;  |FINSI;
     |SI aClave = "37"; |HAZ PasaRegistro37;  |FINSI;
     |SI aClave = "38"; |HAZ PasaRegistro38;  |FINSI;
     |SI aClave = "40"; |HAZ PasaRegistro40;  |FINSI;
     |SI aClave = "41"; |HAZ PasaRegistro41;  |FINSI;
     |SI aClave = "46"; |HAZ PasaRegistro46;  |FINSI;
     |SI aClave = "60"; |HAZ PasaRegistro60;  |FINSI;

     || Aqui insertar

     |SI nLinea = 0;  |ACABA;  |FINSI;

     |LEE 101#tempora0@.=;

     #tempora0@#3 = aVerde;
     #tempora0@#4 = "En renta";
     #tempora0@#6 = nLinea;
     |GRABA 020#tempora0@.a;
     |LIBERA #tempora0@;

     |SI nMasivo = 0;
         |REFRESCACONTROL nGrid1;
         |REFRESCACONTROL nGrid2;
     |FINSI;

     |SI nLinea = 100;  |Y nMasivo = 1;
         |ERROR10;
     |FINSI;
|FPRC;

|PROCESO Evento900;
     |SI FSalida = 1;  |O FSalida = 2;
         |LEE 000#tempora0@.=;
     |FINSI;

     |SI FSalida = 4;
         |SI nModo = 4;
             |MENAV "0000Est  en modo consulta. Acci¢n cancelada.";
             |ACABA;
         |FINSI;

         aAlfa = #tempora0@#4;  |QBF aAlfa;
         |SI aAlfa = "No trasladable";
             |MENAV "0000Registro no trasladable";
             |ACABA;
         |FINSI;

         |SI aAlfa = "En renta";
             |MENAV "0000El registro est  ya en renta";
             |ACABA;
         |FINSI;

         nMasivo = 0;
         |HAZ PasaRegistro;
     |FINSI;
|FPRC;

|PROCESO Desanula;
     |SI nMasivo = 0;
         |CONFI "0000NUsted est  activando el registro. Est  seguro";
         |SI FSalida ! 0;  |ACABA;  |FINSI;
     |FINSI;

     aDef = eaBase + "def/" + #tempora1@#5 + ".mas";

     |CARGA_DEF aDef, tempora2@;

     |ABRE #tempora2@;
     #tempora2@#0 = #tempora1@#0;
     #tempora2@#1 = #tempora1@#6;
     |LEE 101#tempora2@.=;
     |SI FSalida = 0;
         #tempora2@#3 = "A";
         |GRABA 020#tempora2@.a;
         |LIBERA #tempora2@;
     |FINSI;
     |CIERRA #tempora2@;

     |SI aClave = "14";
         |SI #tempora2@#21 = "S";
             |ABRE #rem00020;
             #rem00020#0 = #rem05000#0;
             #rem00020#1 = #tempora2@#22;
             |LEE 101#rem00020.=;
             |SI FSalida = 0;
                 #rem00020#3 = "A";
                 |GRABA 020#rem00020.a;
                 |LIBERA #rem00020;
             |FINSI;
             |CIERRA #rem00020;
         |FINSI;
     |FINSI;

     |DESCARGA_DEF #tempora2@;

     |LEE 101#tempora1@.=;

     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     |GRABA 020#tempora1@.a;
     |LIBERA #tempora1@;

     |SI nMasivo = 0;
         |REFRESCACONTROL nGrid2;
     |FINSI;
|FPRC;

|PROCESO Anula;
     |SI aClave = "31";  |ACABA;  |FINSI;

     |SI nMasivo = 0;
         |CONFI "0000NUsted est  anulando el registro. Est  seguro";
         |SI FSalida ! 0;  |ACABA;  |FINSI;
     |FINSI;

     aDef = eaBase + "def/" + #tempora1@#5 + ".mas";

     |CARGA_DEF aDef, tempora2@;

     |SI aClave = "37";  aDef = eaBase + "def/rem05037.mas";  |FINSI;
     |SI aClave = "32";  aDef = eaBase + "def/rem05032.mas";  |FINSI;
     |SI aClave = "41";  aDef = eaBase + "def/rem05041.mas";  |FINSI;

     |SI aClave = "01";  aDef = eaBase + "def/rem05001.mas";  |FINSI;
     |SI aClave = "02";  aDef = eaBase + "def/rem05002.mas";  |FINSI;
     |SI aClave = "03";  aDef = eaBase + "def/rem05003.mas";  |FINSI;
     |SI aClave = "05";  aDef = eaBase + "def/rem05005.mas";  |FINSI;
     |SI aClave = "07";  aDef = eaBase + "def/rem05007.mas";  |FINSI;
     |SI aClave = "08";  aDef = eaBase + "def/rem05008.mas";  |FINSI;
     |SI aClave = "09";  aDef = eaBase + "def/rem05009.mas";  |FINSI;
     |SI aClave = "10";  aDef = eaBase + "def/rem05010.mas";  |FINSI;
     |SI aClave = "13";  aDef = eaBase + "def/rem05013.mas";  |FINSI;
     |SI aClave = "14";  aDef = eaBase + "def/rem05014.mas";  |FINSI;
     |SI aClave = "19";  aDef = eaBase + "def/rem05019.mas";  |FINSI;
     |SI aClave = "21";  aDef = eaBase + "def/rem05021.mas";  |FINSI;
     |SI aClave = "23";  aDef = eaBase + "def/rem05023.mas";  |FINSI;
     |SI aClave = "25";  aDef = eaBase + "def/rem05025.mas";  |FINSI;
     |SI aClave = "26";  aDef = eaBase + "def/rem05026.mas";  |FINSI;
     |SI aClave = "27";  aDef = eaBase + "def/rem05027.mas";  |FINSI;
     |SI aClave = "28";  aDef = eaBase + "def/rem05028.mas";  |FINSI;
     |SI aClave = "29";  aDef = eaBase + "def/rem05029.mas";  |FINSI;
     |SI aClave = "30";  aDef = eaBase + "def/rem05030.mas";  |FINSI;
     |SI aClave = "34";  aDef = eaBase + "def/rem05034.mas";  |FINSI;
     |SI aClave = "35";  aDef = eaBase + "def/rem05035.mas";  |FINSI;
     |SI aClave = "36";  aDef = eaBase + "def/rem05036.mas";  |FINSI;
     |SI aClave = "38";  aDef = eaBase + "def/rem05038.mas";  |FINSI;
     |SI aClave = "40";  aDef = eaBase + "def/rem05040.mas";  |FINSI;
     |SI aClave = "46";  aDef = eaBase + "def/rem05046.mas";  |FINSI;
     |SI aClave = "60";  aDef = eaBase + "def/rem05060.mas";  |FINSI;

     || Aqui insertar

     |CARGA_DEF aDef, tempora3@;

     |ABRE #tempora2@;
     #tempora2@#0 = #tempora1@#0;
     #tempora2@#1 = #tempora1@#6;
     |LEE 101#tempora2@.=;

     |LEE 101#tempora1@.=;

     |ABRE #tempora3@;
     |SELECT #2#tempora3@;
     #tempora3@#0 = #tempora1@#0;
     #tempora3@#1 = #tempora1@#1;
     #tempora3@#6 = #tempora1@#6;
     |LEE 101#tempora3@.=;
     |SI FSalida = 0;
         #tempora3@#3  = aNegro;
         #tempora3@#4  = "Pendiente";
         #tempora3@#6  = 0;
         |GRABA 020#tempora3@.a;
         |LIBERA #tempora3@;

         |BORRA 020#tempora1@.a;
         |LIBERA #tempora1@;

         |BORRA 020#tempora2@.a;
         |LIBERA #tempora2@;

         |SI aClave = "14";
             |SI #tempora2@#21 = "S";
                 |ABRE #rem00020;
                 #rem00020#0 = #rem05000#0;
                 #rem00020#1 = #tempora2@#22;
                 |LEE 101#rem00020.=;
                 |SI FSalida = 0;
                     |BORRA 020#rem00020.a;
                     |LIBERA #rem00020;
                 |FINSI;
                 |CIERRA #rem00020;
             |FINSI;
         |FINSI;

         |SI nMasivo = 0;
             |REFRESCACONTROL nGrid1;
             |REFRESCACONTROL nGrid2;
         |FINSI;
     |SINO;
         |SI aClave = "37";
             |SI nMasivo = 0;
                 |MENAV "0000El registro no se puede anular, no viene de datos fiscales.";
             |FINSI;

             |ACABA;
         |FINSI;

         |SI aClave ! "32";
             #tempora1@#3  = aRojo;
             #tempora1@#4  = "Anulado";
             |GRABA 020#tempora1@.a;
             |LIBERA #tempora1@;

             #tempora2@#3 = "X";
             |GRABA 020#tempora2@.a;
             |LIBERA #tempora2@;
         |FINSI;

         |SI aClave = "32";
             |BORRA 020#tempora1@.a;
             |LIBERA #tempora1@;

             |BORRA 020#tempora2@.a;
             |LIBERA #tempora2@;
         |FINSI;

         |SI aClave = "14";
             |SI #tempora2@#21 = "S";
                 |ABRE #rem00020;
                 #rem00020#0 = #rem05000#0;
                 #rem00020#1 = #tempora2@#22;
                 |LEE 101#rem00020.=;
                 |SI FSalida = 0;
                     #rem00020#3 = "X";
                     |GRABA 020#rem00020.a;
                     |LIBERA #rem00020;
                 |FINSI;
                 |CIERRA #rem00020;
             |FINSI;
         |FINSI;

         |SI nMasivo = 0;
             |REFRESCACONTROL nGrid2;
         |FINSI;
     |FINSI;

     |CIERRA #tempora2@;
     |CIERRA #tempora3@;

     |DESCARGA_DEF #tempora3@;
     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO Evento1;
     |SI FSalida = 1;  |O FSalida = 2;
         |LEE 000#tempora1@.=;
     |FINSI;

     |SI FSalida = 4;
         |SI nModo = 4;
             |MENAV "0000Est  en modo consulta. Acci¢n cancelada.";
             |ACABA;
         |FINSI;

         nMasivo = 0;
         aAlfa   = #tempora1@#4;  |QBF aAlfa;
         |SI aAlfa = "Anulado";
             |HAZ Desanula;
         |SINO;
             |HAZ Anula;
         |FINSI;
     |FINSI;
|FPRC;

|PROCESO Baja900;
     #tempora0@#0 = #rem05000#0;
     #tempora0@#1 = enContri;
     #tempora0@#2 = 001;
|FPRC;

|PROCESO Alta900;
     #tempora0@#0 = #rem05000#0;
     #tempora0@#1 = enContri;
     #tempora0@#2 = 999;
|FPRC;

|PROCESO DatosTitular;
     enCodProv = #rem00100#20;
     enCodPobl = #rem00100#21;
     |HAZ LeePoblacion;

     |DDEFECTO #tempora1@;
     #tempora1@#0  = #rem05000#0;
     #tempora1@#1  = enContri;
     #tempora1@#2  = 1;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#6  = 0;
     #tempora1@#8  = #rem00100#1;
     #tempora1@#9  = #rem00100#5;
     #tempora1@#10 = "";
     #tempora1@#11 = #rem00100#103;
     #tempora1@#13 = "";
     #tempora1@#15 = "";
     #tempora1@#16 = "";
     #tempora1@#17 = "";
     #tempora1@#18 = #rem00100#53;
     #tempora1@#19 = "20";
     #tempora1@#20 = #rem00100#14;
     #tempora1@#21 = #rem00100#15;
     #tempora1@#22 = #rem00100#114;
     #tempora1@#23 = #rem00100#16;
     #tempora1@#24 = #rem00100#115;
     #tempora1@#25 = #rem00100#116;
     #tempora1@#26 = #rem00100#117;
     #tempora1@#27 = #rem00100#17;
     #tempora1@#28 = #rem00100#18;
     #tempora1@#29 = #rem00100#19;
     #tempora1@#30 = #rem00100#118;
     #tempora1@#31 = #rem00100#22;
     #tempora1@#32 = #rem00100#23;
     #tempora1@#34 = #poblaci@#2;
     #tempora1@#35 = #rem00100#12;
     #tempora1@#36 = #rem00100#109;
     #tempora1@#37 = #rem00100#112;

     |SI #rem00100#8 > 33;  |Y #rem00100#8 [ 65;
         #tempora1@#10 = "1";
         |SI #rem00100#9 = "S";
             #tempora1@#10 = "2";
         |FINSI;
     |FINSI;

     |SI #rem00100#8 > 65;
         #tempora1@#10 = "3";
     |FINSI;

     |SI #rem00100#105 = "V";  #tempora1@#12 = "HOMBRE";  |FINSI;
     |SI #rem00100#105 = "M";  #tempora1@#12 = "MUJER" ;  |FINSI;

     |SI #rem00100#91 = "T";
         #tempora1@#13 = #rem00100#92;
     |FINSI;

     aAlfa = ("00" + #rem00100#20) % -102;  #tempora1@#7  = aAlfa;
     aAlfa = ("00" + #rem00100#11) % -102;  #tempora1@#14 = aAlfa;
     aAlfa = ("00" + #rem00100#20) % -102;  #tempora1@#33 = aAlfa;

     |SI #rem00100#113 = "S";
         #tempora1@#19 = "21";
     |FINSI;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;
|FPRC;

|PROCESO DatosConyuge;
     enCodProv = #rem00100#50;
     enCodPobl = #rem00100#51;
     |HAZ LeePoblacion;

     |DDEFECTO #tempora1@;
     #tempora1@#0  = #rem05000#0;
     #tempora1@#1  = enContri;
     #tempora1@#2  = 2;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     #tempora1@#6  = 0;
     #tempora1@#8  = #rem00100#35;
     #tempora1@#9  = #rem00100#39;
     #tempora1@#10 = "";
     #tempora1@#11 = #rem00100#104;
     #tempora1@#13 = "          ";
     #tempora1@#15 = "";
     #tempora1@#16 = "";
     #tempora1@#17 = "";
     #tempora1@#18 = #rem00100#54;
     #tempora1@#19 = "20";
     #tempora1@#20 = #rem00100#44;
     #tempora1@#21 = #rem00100#45;
     #tempora1@#22 = #rem00100#131;
     #tempora1@#23 = #rem00100#46;
     #tempora1@#24 = #rem00100#132;
     #tempora1@#25 = #rem00100#133;
     #tempora1@#26 = #rem00100#134;
     #tempora1@#27 = #rem00100#47;
     #tempora1@#28 = #rem00100#48;
     #tempora1@#29 = #rem00100#49;
     #tempora1@#30 = #rem00100#135;
     #tempora1@#31 = #rem00100#52;
     #tempora1@#34 = #poblaci@#2;
     #tempora1@#35 = #rem00100#13;
     #tempora1@#36 = #rem00100#110;
     #tempora1@#37 = #rem00100#129;

     |SI #rem00100#41 > 33;  |Y #rem00100#41 [ 65;
         #tempora1@#10 = "1";
         |SI #rem00100#42 = "S";
             #tempora1@#10 = "2";
         |FINSI;
     |FINSI;

     |SI #rem00100#41 > 65;
         #tempora1@#10 = "3";
     |FINSI;

     |SI #rem00100#106 = "V";  #tempora1@#12 = "HOMBRE";  |FINSI;
     |SI #rem00100#106 = "M";  #tempora1@#12 = "MUJER" ;  |FINSI;

     |SI #rem00100#91 = "C";
         #tempora1@#13 = #rem00100#92;
     |FINSI;

     aAlfa = ("00" + #rem00100#50) % -102;  #tempora1@#7  = aAlfa;
     aAlfa = ("00" + #rem00100#43) % -102;  #tempora1@#14 = aAlfa;
     aAlfa = (("00" + #rem00100#50) % -102) + (("000" + #rem00100#51) % -103);
                                            #tempora1@#32 = aAlfa;
     aAlfa = ("00" + #rem00100#50) % -102;  #tempora1@#33 = aAlfa;

     |SI #rem00100#130 = "S";
         #tempora1@#19 = "21";
     |FINSI;

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;
|FPRC;

|PROCESO DatosContribuyentes;
     |ABRE #rem00100;
     #rem00100#0 = #rem05000#0;
     |LEE 000#rem00100.=;
     |SI FSalida ! 0;
         |CIERRA #rem00100;
         |ACABA;
     |FINSI;
     |CIERRA #rem00100;

     |HAZ DatosTitular;

     |SI #rem00100#6 = "C";
         |HAZ DatosConyuge;
     |FINSI;
|FPRC;

|PROCESO CargaInmuebles;
     #tempora1@#7  = #tempora2@#14;
     #tempora1@#8  = #tempora2@#13;
     aAlfa   = (("00" + #tempora2@#105) % -102) + (("000" + #tempora2@#106) % -103);
     #tempora1@#9  = aAlfa;

     |SI #tempora2@#18 = "R";  |O #tempora2@#18 = "T";
         #tempora1@#11 = "RU";
         #tempora1@#12 = "R£stica";
     |SINO;
         #tempora1@#11 = "UR";
         #tempora1@#12 = "Urbana";
     |FINSI;

     #tempora1@#13 = "  ";
     #tempora1@#14 = "No existe el dato";
     #tempora1@#15 = "  ";
     #tempora1@#16 = "No existe el dato";
     #tempora1@#17 = #tempora2@#15;
     #tempora1@#18 = #tempora2@#17;

     |SI #tempora2@#104 = "P";
         #tempora1@#19 = "PR";
         #tempora1@#20 = "Propietario";
     |FINSI;

     |SI #tempora2@#104 = "U";
         #tempora1@#19 = "US";
         #tempora1@#20 = "Usufructuario";
     |FINSI;

     |SI #tempora2@#104 = "N";
         #tempora1@#19 = "NP";
         #tempora1@#20 = "Nuda propiedad";
     |FINSI;

     |SI #tempora2@#104 = "M";
         #tempora1@#19 = "DF";
         #tempora1@#20 = "Disfrutador";
     |FINSI;

     nPorce = 100;

     |SI #tempora2@#2 = "GANANCIAL ";  nPorce = 50;  |FINSI;

     |SI #tempora2@#2 = "VARIOS    ";
         |SI eaContri = "TITULAR";     nPorce = #tempora2@#5;  |FINSI;
         |SI eaContri = "CONYUGE";     nPorce = #tempora2@#6;  |FINSI;
         |SI eaContri = "1 FAMILIAR";  nPorce = #tempora2@#7;  |FINSI;
         |SI eaContri = "2 FAMILIAR";  nPorce = #tempora2@#8;  |FINSI;
         |SI eaContri = "3 FAMILIAR";  nPorce = #tempora2@#9;  |FINSI;
         |SI eaContri = "4 FAMILIAR";  nPorce = #tempora2@#10; |FINSI;
     |FINSI;

     #tempora1@#21 = nPorce;

     #tempora1@#22 = #tempora2@#30 + #tempora2@#31 + #tempora2@#32 + #tempora2@#33 + #tempora2@#34 + #tempora2@#35;

     nDiasHab = #tempora2@#30 + #tempora2@#33;
     nDiasAlq = #tempora2@#31 + #tempora2@#34;

     #tempora1@#23 = "O";
     #tempora1@#24 = "Otros";

     |SI nDiasHab ! 0;  |Y nDiasAlq = 0;
         #tempora1@#23 = "H";
         #tempora1@#24 = "Vivienda habitual";
     |FINSI;

     |SI nDiasHab = 0;  |Y nDiasAlq ! 0;
         #tempora1@#23 = "A";
         #tempora1@#24 = "Arrendada";
     |FINSI;

     |SI nDiasHab ! 0;  |Y nDiasAlq ! 0;
         #tempora1@#23 = "C";
         #tempora1@#24 = "Habitual y Arrendada";
     |FINSI;

     #tempora1@#25 = "1";
     #tempora1@#26 = "Inmuebles en territorio com£n";
|FPRC;

|PROCESO tempora2;
     |SI aClave = "03";
         aAlfa = aDef % -508;
         #tempora1@#5  = aAlfa;

         |SI #tempora1@#5 = "rem00023";
             |SI #tempora2@#27 ! 0;  |ACABA;  |FINSI;
             |SI #tempora2@#28 ! 0;  |ACABA;  |FINSI;
         |FINSI;
     |FINSI;

     |SI aClave = "29";
         |SI #tempora2@#20 ! 0;  |ACABA;  |FINSI;
         |SI #tempora2@#22 ! 0;  |ACABA;  |FINSI;
         |SI #tempora2@#23 ! 0;  |ACABA;  |FINSI;
     |FINSI;

     |SI aClave = "14";
         |SI #tempora2@#23 = "S";  |ACABA;  |FINSI;
     |FINSI;

     |SI aClave = "21";
         |SI #tempora2@#11 ! "F2";  |ACABA;  |FINSI;
     |FINSI;

     |SI aClave = "23"; |O aClave = "34";
         |SI #tempora2@#13 = 0;  |ACABA;  |FINSI;
     |FINSI;

     |SI aClave = "25";
         |SI #tempora2@#13 ! 1;  |ACABA;  |FINSI;
     |FINSI;

     |SI aClave = "26";
         |SI #tempora2@#13 ! 2;  |ACABA;  |FINSI;
     |FINSI;

     |SI aClave = "27";
         |SI #tempora2@#13 ! 3;  |ACABA;  |FINSI;
     |FINSI;

     |SI aClave = "28";
         |SI #tempora2@#13 ! 4;  |ACABA;  |FINSI;
     |FINSI;

     |SI aClave = "13";
         |SI #tempora2@#11 ! "1";  |ACABA;  |FINSI;
     |FINSI;

     |SI aClave = "36";
         |SI #tempora2@#11 ! "2";  |ACABA;  |FINSI;
     |FINSI;

     |SI aClave = "38";
         |SI #tempora2@#11 ! "3";  |ACABA;  |FINSI;
     |FINSI;

     |SI aClave = "35";
         |SI #tempora2@#11 ! "5";  |ACABA;  |FINSI;
     |FINSI;

     |SI aClave = "40";
         |SI #tempora2@#11 ! "6";  |ACABA;  |FINSI;
     |FINSI;

     |SI aClave = "60";
         |SI #tempora2@#11 ! "4";  |ACABA;  |FINSI;
     |FINSI;

     || Aqui insertar

     |SI #tempora2@#2 = "GANANCIAL ";
         |SI eaContri ! "TITULAR";   |Y eaContri ! "CONYUGE";
             |ACABA;
         |FINSI;
     |FINSI;

     |SI aClave ! "01";  |Y aClave ! "37";
         |SI #tempora2@#2 = "VARIOS    ";
             |SI eaContri = "TITULAR";  |Y #tempora2@#5 = 0;
                 |ACABA;
             |FINSI;

             |SI eaContri = "CONYUGE";  |Y #tempora2@#6 = 0;
                 |ACABA;
             |FINSI;

             |SI eaContri = "1 FAMILIAR";  |Y #tempora2@#7 = 0;
                 |ACABA;
             |FINSI;

             |SI eaContri = "2 FAMILIAR";  |Y #tempora2@#8 = 0;
                 |ACABA;
             |FINSI;

             |SI eaContri = "3 FAMILIAR";  |Y #tempora2@#9 = 0;
                 |ACABA;
             |FINSI;

             |SI eaContri = "4 FAMILIAR";  |Y #tempora2@#10 = 0;
                 |ACABA;
             |FINSI;
        |FINSI;
     |FINSI;

     |SI #tempora2@#2 = "TITULAR   "; |O #tempora2@#2 = "CONYUGE   ";
         aAlfa1 = #tempora2@#2;  |QBF aAlfa1;
         |SI aAlfa1 ! eaContri;
             |ACABA;
         |FINSI;
     |FINSI;

     nLinea = nLinea + 1;

     |DDEFECTO #tempora1@;
     #tempora1@#0  = #rem05000#0;
     #tempora1@#1  = enContri;
     #tempora1@#2  = nLinea;
     #tempora1@#3  = aNegro;
     #tempora1@#4  = "Activo";
     |SI aClave ! "37";
         |SI #tempora2@#3 = "X";
             #tempora1@#3 = aRojo;
             #tempora1@#4 = "Anulado";
         |FINSI;
     |FINSI;

     #tempora1@#6  = #tempora2@#1;

     |SI aClave = "37";
         #tempora1@#5  = "rem00102";
         #tempora1@#7  = #tempora2@#9;
         #tempora1@#8  = #tempora2@#14;
         #tempora1@#9  = #tempora2@#11;
         #tempora1@#10 = #tempora2@#15;
     |FINSI;

     |SI aClave = "32";
         #tempora1@#5  = "rem00101";
         #tempora1@#7  = #tempora2@#2;
         #tempora1@#8  = #tempora2@#3;
         #tempora1@#9  = "";
         #tempora1@#10 = #tempora2@#17;
         #tempora1@#11 = #tempora2@#18;
         #tempora1@#13 = #tempora2@#8;
         #tempora1@#15 = #tempora2@#21;

         |SI #tempora2@#6 > 33;  |Y #tempora2@#6 [ 65;
             #tempora1@#9 = "1";
             |SI #tempora2@#14 = "S";
                 #tempora1@#9 = "2";
             |FINSI;
         |FINSI;

         |SI #tempora2@#6 > 65;
             #tempora1@#9 = "3";
         |FINSI;

         #tempora1@#12 = #tempora2@#7;
         |SI #tempora1@#12 = " ";  #tempora1@#12 = "0";  |FINSI;
     |FINSI;

     |SI aClave = "41";
         #tempora1@#5  = "rem00101";
         #tempora1@#7  = #tempora2@#2;
         #tempora1@#8  = #tempora2@#3;
         #tempora1@#9  = "";
         #tempora1@#10 = #tempora2@#17;
         #tempora1@#12 = #tempora2@#9;

         |SI #tempora2@#6 > 33;  |Y #tempora2@#6 [ 65;
             #tempora1@#9 = "1";
             |SI #tempora2@#14 = "S";
                 #tempora1@#9 = "2";
             |FINSI;
         |FINSI;

         |SI #tempora2@#6 > 65;
             #tempora1@#9 = "3";
         |FINSI;

         #tempora1@#11 = #tempora2@#7;
         |SI #tempora1@#11 = " ";  #tempora1@#11 = "0";  |FINSI;
     |FINSI;

     |SI aClave = "01";
         #tempora1@#5  = "rem00020";
         #tempora1@#7  = "";
         #tempora1@#8  = #tempora2@#5;
         #tempora1@#9  = "";
         #tempora1@#10 = #tempora2@#7;
         #tempora1@#11 = #tempora2@#6;
         #tempora1@#12 = #tempora2@#9;
         #tempora1@#13 = #tempora2@#10;
         #tempora1@#14 = #tempora2@#11;
         #tempora1@#15 = #tempora2@#19;
         #tempora1@#16 = #tempora2@#18;
     |FINSI;

     |SI aClave = "30";
         aAlfa = aDef % -508;
         #tempora1@#5  = aAlfa;

         |SI #tempora1@#5 = "rem00037";
             #tempora1@#7  = "";
             #tempora1@#8  = "";
             |SI #tempora2@#19 = "S";  #tempora0@#15 = "K1";  |FINSI;
             |SI #tempora2@#19 = "C";  #tempora0@#15 = "K2";  |FINSI;
             #tempora1@#9  = "Premios";
             #tempora1@#10 = #tempora2@#11;
             #tempora1@#11 = #tempora2@#16;
             #tempora1@#12 = #tempora2@#12;
             #tempora1@#13 = #tempora2@#13;
             #tempora1@#14 = #tempora2@#14;
         |FINSI;

         |SI #tempora1@#5 = "rem00030";
             #tempora1@#7  = "";
             #tempora1@#8  = "";
             #tempora1@#15 = "K2";
             #tempora1@#9  = "Ganancias patromoniales";
             #tempora1@#10 = #tempora2@#12;
             #tempora1@#11 = #tempora2@#23;
         |FINSI;
     |FINSI;

     |SI aClave = "08";
         #tempora1@#5  = "rem00031";
         #tempora1@#7  = "";
         #tempora1@#8  = "Dato desconocido";
         #tempora1@#9  = "";
         #tempora1@#10 = 0;
         #tempora1@#11 = #tempora2@#15;
         #tempora1@#12 = 0;
         #tempora1@#13 = 0;
         #tempora1@#14 = 0;
     |FINSI;

     |SI aClave = "02";
         |SI #tempora2@#19 ! "I";  |ACABA;  |FINSI;

         #tempora1@#5  = "rem00023";
         #tempora1@#8  = #tempora2@#17;
         aAlfa   = #tempora2@#18;  |QBF aAlfa;
         aAlfa   = aAlfa % -110;
         #tempora1@#9  = aAlfa;
         #tempora1@#12 = #tempora2@#20;
         #tempora1@#13 = #tempora2@#22;
     |FINSI;

     |SI aClave = "03";
         aAlfa = aDef % -508;
         #tempora1@#5  = aAlfa;

         |SI #tempora1@#5 = "rem00022";
             #tempora1@#8  = #tempora2@#17;
             #tempora1@#11 = "Base imponible ahorro: dividendos       ";
             #tempora1@#13 = #tempora2@#19;
             #tempora1@#14 = #tempora2@#24;
             #tempora1@#15 = #tempora2@#27;
         |FINSI;

         |SI #tempora1@#5 = "rem00023";
             #tempora1@#8  = #tempora2@#17;
             |SI #tempora2@#19 = "I";  #tempora1@#11 = "Intereses  cuentas, depositos y activo";    |FINSI;
             |SI #tempora2@#19 = "B";  #tempora1@#11 = "Intereses activos derecho a bonificacion";  |FINSI;
             |SI #tempora2@#19 = "C";  #tempora1@#11 = "Rdtos transmision, amortizacion o reemb.";  |FINSI;
             |SI #tempora2@#19 = "5";  #tempora1@#11 = "Rdtos causa de imposicion de capitales  ";  |FINSI;
             |SI #tempora2@#19 = "O";  #tempora1@#11 = "Otros rdtos de capital mobiliario       ";  |FINSI;
             |SI #tempora2@#19 = "F";  #tempora1@#11 = "Intereses activos financieros c/bonif.  ";  |FINSI;
             |SI #tempora2@#19 = "1";  #tempora1@#11 = "Rdtos arrendamientos, negocios o minas  ";  |FINSI;
             |SI #tempora2@#19 = "2";  #tempora1@#11 = "Rdtos prestacion de asistencia tecnica  ";  |FINSI;
             |SI #tempora2@#19 = "3";  #tempora1@#11 = "Rdtos de la propiedad intelectual       ";  |FINSI;
             |SI #tempora2@#19 = "4";  #tempora1@#11 = "Rdtos de la propiedad industrial        ";  |FINSI;
             #tempora1@#13 = #tempora2@#20;
             #tempora1@#14 = #tempora2@#22;
             #tempora1@#15 = #tempora2@#23;
         |FINSI;

         |SI #tempora1@#5 = "rem00051";
             #tempora1@#8  = #tempora2@#17;
             #tempora1@#11 = "Rentas temporales o vitalicias";
             #tempora1@#13 = #tempora2@#26;
             #tempora1@#14 = #tempora2@#29;
         |FINSI;
     |FINSI;

     |SI aClave = "29";
         #tempora1@#5  = "rem00023";
         #tempora1@#8  = #tempora2@#17;

         |SI #tempora2@#19 = "C";  #tempora1@#11 = "Rdtos transmision, amortizacion o reemb.";  |FINSI;
         |SI #tempora2@#19 = "O";  #tempora1@#11 = "Otros rdtos de capital mobiliario       ";  |FINSI;

         |SI #tempora2@#29 < 0;  #tempora1@#12 = -#tempora2@#29;  |FINSI;
         |SI #tempora2@#29 ] 0;  #tempora1@#12 = #tempora2@#29;   |FINSI;

         #tempora1@#13 = #tempora2@#31;
     |FINSI;

     |SI aClave = "05";
         #tempora1@#5  = "rem00024";
         #tempora1@#8  = #tempora2@#15;
         #tempora1@#10 = #tempora2@#17;
         #tempora1@#11 = #tempora2@#20;
         #tempora1@#12 = #tempora2@#24;
     |FINSI;

     |SI aClave = "07";
         |HAZ CargaInmuebles;
     |FINSI;

     |SI aClave = "09";
         #tempora1@#5  = "rem00031";
         #tempora1@#7  = "";
         #tempora1@#8  = "Dato desconocido";
         aAlfa   = "";
         |SI #tempora2@#11 ! 0; aAlfa = aAlfa + "1P ";  |FINSI;
         |SI #tempora2@#12 ! 0; aAlfa = aAlfa + "2P ";  |FINSI;
         |SI #tempora2@#13 ! 0; aAlfa = aAlfa + "3P ";  |FINSI;
         |SI #tempora2@#14 ! 0; aAlfa = aAlfa + "4P ";  |FINSI;
         #tempora1@#9  = aAlfa;
         #tempora1@#10 = "";
         #tempora1@#11 = "";
         #tempora1@#12 = #tempora2@#11 + #tempora2@#12 + #tempora2@#13 + #tempora2@#14;
     |FINSI;

     |SI aClave = "10";
         #tempora1@#5  = "rem00046";
         #tempora1@#8  = #tempora2@#12;
         #tempora1@#9  = "";
         #tempora1@#10 = "Donativo";
         #tempora1@#13 = #tempora2@#13;
         #tempora1@#15 = #tempora2@#14;
     |FINSI;

     |SI aClave = "46";
         #tempora1@#5  = "rem00061";
         #tempora1@#10 = #tempora2@#12;
     |FINSI;

     |SI aClave = "14";
         #tempora1@#5  = "rem00053";
         #tempora1@#8  = #tempora2@#11;
         #tempora1@#9  = "Dato desconocido";
         #tempora1@#10 = "Dato desconocido";

         |SI #tempora2@#12 = "N";
             #tempora1@#11 = #tempora2@#16;
             #tempora1@#12 = #tempora2@#15;
         |SINO;
             #tempora1@#11 = #tempora2@#19;
             #tempora1@#12 = #tempora2@#18;
             #tempora1@#13 = #tempora2@#17;
         |FINSI;
     |FINSI;

     |SI aClave = "19";
         #tempora1@#5  = "rem00056";
         #tempora1@#7  = #tempora2@#14;
     |FINSI;

     |SI aClave = "21";
         #tempora1@#5  = "rem00052";
         #tempora1@#8  = #tempora2@#16;
         #tempora1@#9  = #tempora2@#20;
         #tempora1@#10 = #tempora2@#17;
         #tempora1@#11 = #tempora2@#19;
         #tempora1@#12 = #tempora2@#18;
         #tempora1@#14 = #tempora2@#21;
     |FINSI;

     |SI aClave = "23";
         #tempora1@#5  = "rem00030";
         #tempora1@#9  = #tempora2@#13;
     |FINSI;

     |SI aClave = "34";
         #tempora1@#5  = "rem00030";
         #tempora1@#10 = #tempora2@#13;
     |FINSI;

     |SI aClave = "25";
         #tempora1@#5  = "rem00058";
         #tempora1@#7  = #tempora2@#12;
         #tempora1@#8  = "";
         #tempora1@#9  = "";
         #tempora1@#10 = #tempora2@#17;
         #tempora1@#11 = #tempora2@#19;
         #tempora1@#12 = #tempora2@#21;
         #tempora1@#13 = #tempora2@#45;
         #tempora1@#14 = #tempora2@#11;
     |FINSI;

     |SI aClave = "26";
         #tempora1@#5  = "rem00058";
         #tempora1@#7  = #tempora2@#12;
         #tempora1@#8  = "";
         #tempora1@#9  = #tempora2@#23;
         #tempora1@#10 = #tempora2@#25;
         #tempora1@#11 = #tempora2@#45;
         #tempora1@#12 = #tempora2@#11;
     |FINSI;

     |SI aClave = "27";
         #tempora1@#5  = "rem00058";
         #tempora1@#7  = #tempora2@#12;
         #tempora1@#8  = "";
         #tempora1@#12 = #tempora2@#11;
         #tempora1@#9  = #tempora2@#27;
         #tempora1@#10 = #tempora2@#29;
         #tempora1@#11 = #tempora2@#45;
         #tempora1@#13 = #tempora2@#50;
     |FINSI;

     |SI aClave = "28";
         #tempora1@#5  = "rem00058";
         #tempora1@#7  = #tempora2@#12;
         #tempora1@#8  = "";
         #tempora1@#13 = #tempora2@#45;
         #tempora1@#14 = #tempora2@#11;

         |SI #tempora2@#31 ! 0;
             #tempora1@#9  = "F";
             #tempora1@#10 = "01";
             #tempora1@#11 = "Ganancias no derivadas de transmisiones";
             #tempora1@#12 = #tempora2@#25;
         |FINSI;

         |SI #tempora2@#32 ! 0;
             #tempora1@#9  = "F";
             #tempora1@#10 = "02";
             #tempora1@#11 = "Perdidas no derivadas de transmisiones";
             #tempora1@#12 = #tempora2@#26;
         |FINSI;

         |SI #tempora2@#33 ! 0;
             #tempora1@#9  = "G";
             #tempora1@#10 = "01";
             #tempora1@#11 = "Ganancias derivadas de transmisiones";
             #tempora1@#12 = #tempora2@#27;
         |FINSI;

         |SI #tempora2@#44 ! 0;
             #tempora1@#9  = "G";
             #tempora1@#10 = "02";
             #tempora1@#11 = "Perdidas derivadas de transmisiones";
             #tempora1@#12 = #tempora2@#28;
         |FINSI;
     |FINSI;

     |SI aClave = "13";
         #tempora1@#5  = "rem00065";
         #tempora1@#9  = #tempora2@#14;
     |FINSI;

     |SI aClave = "36";
         #tempora1@#5  = "rem00065";
         #tempora1@#7  = #tempora2@#15;
         #tempora1@#8  = #tempora2@#16;
         #tempora1@#9  = #tempora2@#17;
         #tempora1@#10 = #tempora2@#18;
         #tempora1@#12 = #tempora2@#25;
         #tempora1@#38 = #tempora2@#21;
     |FINSI;

     |SI aClave = "38";
         #tempora1@#5  = "rem00065";
         #tempora1@#7  = #tempora2@#26;
         #tempora1@#8  = #tempora2@#27;
         #tempora1@#9  = #tempora2@#28;
         #tempora1@#10 = #tempora2@#29;
         #tempora1@#12 = #tempora2@#38;
         #tempora1@#38 = #tempora2@#32;
         #tempora1@#39 = #tempora2@#33;
         #tempora1@#40 = #tempora2@#34;
     |FINSI;

     |SI aClave = "35";
         #tempora1@#5  = "rem00065";
         #tempora1@#9  = #tempora2@#40;
         #tempora1@#10 = #tempora2@#39;
         #tempora1@#11 = #tempora2@#43;
         #tempora1@#12 = #tempora2@#41;
         #tempora1@#13 = #tempora2@#42;
         #tempora1@#15 = #tempora2@#51;
         #tempora1@#42 = #tempora2@#39;
         #tempora1@#41 = #tempora2@#45;
         #tempora1@#43 = #tempora2@#46;
     |FINSI;

     |SI aClave = "40";
         #tempora1@#5  = "rem00065";
         #tempora1@#9  = #tempora2@#53;
     |FINSI;

     |SI aClave = "60";
         #tempora1@#5  = "rem00065";
         #tempora1@#7  = #tempora2@#59;
         #tempora1@#8  = #tempora2@#60;
         #tempora1@#9  = #tempora2@#61;
         #tempora1@#10 = #tempora2@#62;
         #tempora1@#12 = #tempora2@#67;
     |FINSI;

     || Aqui insertar

     |GRABA 020#tempora1@.n;
     |LIBERA #tempora1@;
|FPRC;

|DEFBUCLE tempora2;
     #tempora2@#1002;
     ;
     #rem05000#0, 001;
     #rem05000#0, 999;
     ;
     NULL, tempora2;
|FIN;

|PROCESO DatosDiagram;
     aDef = "";

     |SI aClave = "31";
         |HAZ DatosContribuyentes;
         |ACABA;
     |FINSI;

     |SI aClave = "01";  aDef = eaBase + "def/rem00020.mas";  |FINSI;
     |SI aClave = "02";  aDef = eaBase + "def/rem00023.mas";  |FINSI;
     |SI aClave = "03";  aDef = eaBase + "def/rem00023.mas";  |FINSI;
     |SI aClave = "05";  aDef = eaBase + "def/rem00024.mas";  |FINSI;
     |SI aClave = "07";  aDef = eaBase + "def/rem00021.mas";  |FINSI;
     |SI aClave = "08";  aDef = eaBase + "def/rem00031.mas";  |FINSI;
     |SI aClave = "09";  aDef = eaBase + "def/rem00031.mas";  |FINSI;
     |SI aClave = "10";  aDef = eaBase + "def/rem00046.mas";  |FINSI;
     |SI aClave = "13";  aDef = eaBase + "def/rem00065.mas";  |FINSI;
     |SI aClave = "14";  aDef = eaBase + "def/rem00053.mas";  |FINSI;
     |SI aClave = "19";  aDef = eaBase + "def/rem00056.mas";  |FINSI;
     |SI aClave = "21";  aDef = eaBase + "def/rem00052.mas";  |FINSI;
     |SI aClave = "23";  aDef = eaBase + "def/rem00030.mas";  |FINSI;
     |SI aClave = "25";  aDef = eaBase + "def/rem00058.mas";  |FINSI;
     |SI aClave = "26";  aDef = eaBase + "def/rem00058.mas";  |FINSI;
     |SI aClave = "27";  aDef = eaBase + "def/rem00058.mas";  |FINSI;
     |SI aClave = "28";  aDef = eaBase + "def/rem00058.mas";  |FINSI;
     |SI aClave = "29";  aDef = eaBase + "def/rem00023.mas";  |FINSI;
     |SI aClave = "30";  aDef = eaBase + "def/rem00037.mas";  |FINSI;
     |SI aClave = "32";  aDef = eaBase + "def/rem00101.mas";  |FINSI;
     |SI aClave = "34";  aDef = eaBase + "def/rem00030.mas";  |FINSI;
     |SI aClave = "35";  aDef = eaBase + "def/rem00065.mas";  |FINSI;
     |SI aClave = "36";  aDef = eaBase + "def/rem00065.mas";  |FINSI;
     |SI aClave = "37";  aDef = eaBase + "def/rem00102.mas";  |FINSI;
     |SI aClave = "38";  aDef = eaBase + "def/rem00065.mas";  |FINSI;
     |SI aClave = "40";  aDef = eaBase + "def/rem00065.mas";  |FINSI;
     |SI aClave = "41";  aDef = eaBase + "def/rem00101.mas";  |FINSI;
     |SI aClave = "46";  aDef = eaBase + "def/rem00061.mas";  |FINSI;
     |SI aClave = "60";  aDef = eaBase + "def/rem00065.mas";  |FINSI;

     || Aqui insertar

     |SI aDef = "";  |ACABA;  |FINSI;

     |CARGA_DEF aDef, tempora2@;

     nLinea = 0;
     |BUCLE tempora2;

     |DESCARGA_DEF #tempora2@;

     aDef = "";
     |SI aClave = "03";  aDef = eaBase + "def/rem00022.mas";  |FINSI;
     |SI aClave = "30";  aDef = eaBase + "def/rem00030.mas";  |FINSI;

     |SI aDef = "";  |ACABA;  |FINSI;

     |CARGA_DEF aDef, tempora2@;

     |BUCLE tempora2;

     |DESCARGA_DEF #tempora2@;

     aDef = "";
     |SI aClave = "03";  aDef = eaBase + "def/rem00051.mas";  |FINSI;

     |SI aDef = "";  |ACABA;  |FINSI;

     |CARGA_DEF aDef, tempora2@;

     |BUCLE tempora2;

     |DESCARGA_DEF #tempora2@;
|FPRC;

|PROCESO RegistroAbajo;
     aAlfa = #tempora0@#4;  |QBF aAlfa;
     |SI aAlfa = "No trasladable";
         |ACABA;
     |FINSI;

     |SI aAlfa = "En renta";
         |ACABA;
     |FINSI;

     nMasivo = 1;
     |HAZ PasaRegistro;
|FPRC;

|DEFBUCLE RegistroAbajo;
     #tempora0@#1003;
     ;
     #rem05000#0, enContri, 001;
     #rem05000#0, enContri, 999;
     ;
     NULL, RegistroAbajo;
|FIN;

|PROCESO TodosAbajo;
    |BUCLE RegistroAbajo;

    |REFRESCACONTROL nGrid1;
    |REFRESCACONTROL nGrid2;
|FPRC;

|PROCESO RegistroArriba;
     nMasivo = 1;
     aAlfa   = #tempora1@#4;  |QBF aAlfa;
     |SI aAlfa = "Anulado";
         |HAZ Desanula;
     |SINO;
         |HAZ Anula;
     |FINSI;
|FPRC;

|DEFBUCLE RegistroArriba;
     #tempora1@#1003;
     ;
     #rem05000#0, enContri, 001;
     #rem05000#0, enContri, 999;
     ;
     NULL, RegistroArriba;
|FIN;

|PROCESO TodosArriba;
    |BUCLE RegistroArriba;

    |REFRESCACONTROL nGrid1;

    |SI aClave ! "32";
        |REFRESCACONTROL nGrid2;
    |FINSI;
|FPRC;

|PROCESO Trasladables;
     |VENTANA 0501, 3599, -1, 16, aAlfa;
     nVent = FSalida;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nVent;
     aVent5 = "MODAL";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     aDef = eaBase + "def/" + aMas;
     |CARGA_DEF aDef, tempora0@;
     |CARGA_DEF aDef, tempora1@;

     aFichero = ("51" + Usuario + "zzzzzzzz") % 108;
     |NOME_DAT #tempora1@#aFichero#;
     |ABRE #tempora1@;  |CIERRA #tempora1@;  |DELINDEX #tempora1@;

     |ABRE #tempora0@;
     |ABRE #tempora1@;

     |HAZ DatosDiagram;

     |CONTROL_SIMPLE 0, "LABEL,{{10}}Datos del borrador. (Doble click en la l¡nea para incorporar el registro a la renta)", 0502, 0598, NULL;

     |SI aClave ! "31";  |Y aClave ! "32";
         |CONTROL_SIMPLE 0, "LABEL,{{10}}Datos Renta 2018. (Doble click en la l¡nea para activar o anular el registro en la renta)", 3402, 3498, NULL;
     |FINSI;

     |SI aClave = "31";
         |CONTROL_SIMPLE 0, "LABEL,{{10}}Datos Renta 2018.", 2102, 2198, NULL;
     |FINSI;

     |SI aClave = "32";
         |CONTROL_SIMPLE 0, "LABEL,{{10}}Datos Renta 2018. (Doble click en la l¡nea para anular el registro en la renta)", 3402, 3498, NULL;
     |FINSI;

     |SI nModo ! 4;
         |CONTROL_SIMPLE 0, "BOTON, {{235}} ", 1902, 1905, TodosAbajo;
         |CONTROL_SIMPLE 0, "LABEL,{{16}}Incorporar todos los registros a la renta", 1907, 1998, NULL;

         |SI aClave ! "31";
             |CONTROL_SIMPLE 0, "BOTON, {{234}} ", 2163, 2166, TodosArriba;
             |CONTROL_SIMPLE 0, "LABEL,{{16}}Anular todos los registros de la renta", 2168, 2198, NULL;
         |FINSI;
     |FINSI;

     nRango = 4 + 8 + 16 + 32 + 128;
     |LINEAL_SIMPLE #1#tempora0@, nRango, 0601, 1899, Baja900, Alta900, Evento900;
     nGrid1 = FSalida;

     |LINEAL_SIMPLE #1#tempora1@, nRango, 2201, 3399, NULL, NULL, Evento1;
     nGrid2 = FSalida;

     aEsc1  = &255 + "806";
     aEsc2  = &255 + "807";
     aRetu  = &255 + "802";
     |PARA; |SI;  |HACIENDO;
            FSalida = "::{{001}}Salir," + nGrid1;
            |LEETECLA aTecla;
            |SI aTecla = aEsc1; |SAL;  |FINSI;
            |SI aTecla = aEsc2; |SAL;  |FINSI;
            |SI aTecla = aRetu; |SAL;  |FINSI;
     |SIGUE;

     |CIERRA #tempora0@;
     |CIERRA #tempora1@;  |DELINDEX #tempora1@;

     |DESCARGA_DEF #tempora1@;
     |DESCARGA_DEF #tempora0@;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nVent;
     aVent5 = "MODELESS";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     |FINVENTANA nVent;
|FPRC;

|PROCESO rem00021;
     |SI #rem00021#156 = nImp1;
      |Y #rem00021#157 = nImp2;
      |Y #rem00021#158 = nImp3;
      |Y #rem00021#159 = nImp4;
         nOk = 1;
         |ERROR10;
     |FINSI;
|FPRC;

|DEFBUCLE rem00021;
     #rem00021#1;
     2, 14;
     #rem05000#0, 00, aCon, aRef;
     #rem05000#0, 99, aCon, aRef;
     ;
     NULL, rem00021;
|FIN;

|PROCESO rem00056;
     |SI nVarios = 1;
         |SI #rem00056#13 = 2014;  |Y #rem00056#14 = nImp1;
             nOk1 = 1;
         |FINSI;

         |SI #rem00056#13 = 2015;  |Y #rem00056#14 = nImp2;
             nOk2 = 1;
         |FINSI;

         |SI #rem00056#13 = 2016;  |Y #rem00056#14 = nImp3;
             nOk3 = 1;
         |FINSI;

         |SI #rem00056#13 = 2017;  |Y #rem00056#14 = nImp4;
             nOk4 = 1;
         |FINSI;
     |FINSI;

     |SI nVarios = 0;
         |SI #rem00056#14 = nImp;
             nOk2 = nOk2 + 1;
             |ERROR10;
         |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE rem00056;
     #rem00056#1;
     2, 11;
     #rem05000#0, 00, aCon, aCas;
     #rem05000#0, 99, aCon, aCas;
     ;
     NULL, rem00056;
|FIN;

|PROCESO rem00053;
     nOk = 1;

     |SI #rem00053#nCmp1# ! nImp1;  nOk = 0;  |FINSI;
     |SI #rem00053#nCmp2# ! nImp2;  nOk = 0;  |FINSI;
     |SI #rem00053#nCmp3# ! nImp3;  nOk = 0;  |FINSI;
     |SI #rem00053#nCmp4# ! nImp4;  nOk = 0;  |FINSI;
     |SI #rem00053#nCmp5# ! nImp5;  nOk = 0;  |FINSI;

     |SI nOk = 1;
         |ERROR10;
     |FINSI;
|FPRC;

|DEFBUCLE rem00053;
     #rem00053#1;
     2, 29, 23, 12, 13;
     #rem05000#0, 00, aCon, aSeg, aDep, aDis, aDel;
     #rem05000#0, 99, aCon, aSeg, aDep, aDis, aDel;
     ;
     NULL, rem00053;
|FIN;

|PROCESO rem00061;
     |SI #rem00061#15 = nImp1;
      |Y #rem00061#16 = nImp2;
      |Y #rem00061#17 = nImp3;
      |Y #rem00061#18 = nImp4;
         nOk = 1;
         |ERROR10;
     |FINSI;
|FPRC;

|DEFBUCLE rem00061;
     #rem00061#1;
     2;
     #rem05000#0, 00, aCon;
     #rem05000#0, 99, aCon;
     ;
     NULL, rem00061;
|FIN;

|PROCESO BuscaCanti;
     #tempora0@#3 = "";
     #tempora0@#4 = "Revise importe";

     |SI nFic = 5039;
         #rem00016#0 = #rem05000#0;
         #rem00016#1 = eaContri;
         |LEE 000#rem00016.=;
         |SI FSalida = 0;
             |SI #rem00016#3 = #tempora0@#7;
                 #tempora0@#3 = aVerde;
                 #tempora0@#4 = "En renta";
             |FINSI;
         |FINSI;
     |FINSI;

     |SI nFic = 5042;
         #rem00017#0 = #rem05000#0;
         #rem00017#1 = eaContri;
         |LEE 000#rem00017.=;
         |SI FSalida = 0;
             |SI #rem00017#3 = #tempora0@#7;
                 #tempora0@#3 = aVerde;
                 #tempora0@#4 = "En renta";
             |FINSI;
         |FINSI;
     |FINSI;

     |SI nFic = 5047;
         aCon  = (eaContri + "          ") % 110;
         aRef  = (#tempora0@#7 + "         ") % 125;
         nImp1 = #tempora0@#8;
         nImp2 = #tempora0@#9;
         nImp3 = #tempora0@#10;
         nImp4 = #tempora0@#11;
         nOk  = 0;
         |BUCLE rem00021;
         |SI nOk = 1;
             #tempora0@#3 = aVerde;
             #tempora0@#4 = "En renta";
         |FINSI;
     |FINSI;

     |SI nFic = 5048;
         aCon  = (eaContri + "          ") % 110;
         aCas  = "0431  ";
         nImp1 = #tempora0@#7;
         nImp2 = #tempora0@#8;
         nImp3 = #tempora0@#9;
         nImp4 = #tempora0@#10;

         nOk1    = 0;
         nOk2    = 0;
         nOk3    = 0;
         nOk4    = 0;
         nVarios = 1;
         |BUCLE rem00056;

         nOk = 1;
         |SI nImp1 ! 0;  |Y nOk1 = 0;  nOk = 0;  |FINSI;
         |SI nImp2 ! 0;  |Y nOk2 = 0;  nOk = 0;  |FINSI;
         |SI nImp3 ! 0;  |Y nOk3 = 0;  nOk = 0;  |FINSI;
         |SI nImp4 ! 0;  |Y nOk4 = 0;  nOk = 0;  |FINSI;

         |SI nOk = 1;
             #tempora0@#3 = aVerde;
             #tempora0@#4 = "En renta";
         |FINSI;
     |FINSI;

     |SI nFic = 5049;
         aCon = (eaContri + "          ") % 110;

         nVarios = 0;
         nOk1    = 0;
         nOk2    = 0;
         |PARA nCmp = 7;  |SI nCmp [ 10;  |HACIENDO nCmp = nCmp + 1;
               |SI #tempora0@#nCmp# ! 0;
                   nImp = #tempora0@#nCmp#;
                   nOk1 = nOk1 + 1;

                   |SI nCmp = 7;
                       aCas = "0437  ";
                       |BUCLE rem00056;

                       |SI nOk2 = 0;
                           aCas = "0438  ";
                           |BUCLE rem00056;
                       |FINSI;
                   |FINSI;

                   |SI nCmp = 8;   aCas = "0439  ";  |BUCLE rem00056;  |FINSI;
                   |SI nCmp = 9;   aCas = "0440  ";  |BUCLE rem00056;  |FINSI;
                   |SI nCmp = 10;  aCas = "0441  ";  |BUCLE rem00056;  |FINSI;
               |FINSI;
         |SIGUE;

         |SI nOk1 = nOk2;
             #tempora0@#3 = aVerde;
             #tempora0@#4 = "En renta";
         |FINSI;
     |FINSI;

     |SI nFic = 5050;
         aCon = (eaContri + "          ") % 110;

         nVarios = 0;
         nOk1    = 0;
         nOk2    = 0;
         |PARA nCmp = 7;  |SI nCmp [ 10;  |HACIENDO nCmp = nCmp + 1;
               |SI #tempora0@#nCmp# ! 0;
                   nImp = #tempora0@#nCmp#;
                   nOk1 = nOk1 + 1;

                   |SI nCmp = 7;
                       aCas = "0447  ";
                       |BUCLE rem00056;

                       |SI nOk2 = 0;
                           aCas = "0448  ";
                           |BUCLE rem00056;
                       |FINSI;
                   |FINSI;

                   |SI nCmp = 8;   aCas = "0449  ";  |BUCLE rem00056;  |FINSI;
                   |SI nCmp = 9;   aCas = "0450  ";  |BUCLE rem00056;  |FINSI;
                   |SI nCmp = 10;  aCas = "0451  ";  |BUCLE rem00056;  |FINSI;
               |FINSI;
         |SIGUE;

         |SI nOk1 = nOk2;
             #tempora0@#3 = aVerde;
             #tempora0@#4 = "En renta";
         |FINSI;
     |FINSI;


     |SI nFic = 5051;
         aCon = (eaContri + "          ") % 110;
         aDis = "N";
         aDep = "N";
         aSeg = "N";
         aDel = "N";

         nImp1 = #tempora0@#7;
         nImp2 = #tempora0@#8;
         nImp3 = #tempora0@#9;
         nImp4 = #tempora0@#10;
         nImp5 = #tempora0@#11;

         nCmp1 = 36;
         nCmp2 = 37;
         nCmp3 = 38;
         nCmp4 = 39;
         nCmp5 = 40;

         nOk   = 0;
         |BUCLE rem00053;
         |SI nOk = 1;
             #tempora0@#3 = aVerde;
             #tempora0@#4 = "En renta";
         |FINSI;
     |FINSI;

     |SI nFic = 5052;
         aCon = (eaContri + "          ") % 110;
         aDis = "N";
         aDep = "N";
         aSeg = "S";
         aDel = "N";

         nImp1 = #tempora0@#7;
         nImp2 = #tempora0@#8;
         nImp3 = #tempora0@#9;
         nImp4 = #tempora0@#10;
         nImp5 = #tempora0@#11;

         nCmp1 = 31;
         nCmp2 = 32;
         nCmp3 = 33;
         nCmp4 = 34;
         nCmp5 = 35;

         nOk   = 0;
         |BUCLE rem00053;
         |SI nOk = 1;
             #tempora0@#3 = aVerde;
             #tempora0@#4 = "En renta";
         |FINSI;
     |FINSI;

     |SI nFic = 5053;
         aCon = (eaContri + "          ") % 110;
         aDis = "S";
         aDep = "N";
         aSeg = "N";
         aDel = "S";

         nImp1 = #tempora0@#7;
         nImp2 = #tempora0@#8;
         nImp3 = #tempora0@#9;
         nImp4 = #tempora0@#10;
         nImp5 = #tempora0@#11;

         nCmp1 = 41;
         nCmp2 = 42;
         nCmp3 = 43;
         nCmp4 = 44;
         nCmp5 = 45;

         nOk   = 0;
         |BUCLE rem00053;
         |SI nOk = 1;
             #tempora0@#3 = aVerde;
             #tempora0@#4 = "En renta";
         |FINSI;
     |FINSI;

     |SI nFic = 5054;
         aCon = (eaContri + "          ") % 110;
         aDis = "S";
         aDep = "N";
         aSeg = "N";
         aDel = "N";

         nImp1 = #tempora0@#7;
         nImp2 = #tempora0@#8;
         nImp3 = #tempora0@#9;
         nImp4 = #tempora0@#10;
         nImp5 = #tempora0@#11;

         nCmp1 = 46;
         nCmp2 = 47;
         nCmp3 = 48;
         nCmp4 = 49;
         nCmp5 = 50;

         nOk   = 0;
         |BUCLE rem00053;
         |SI nOk = 1;
             #tempora0@#3 = aVerde;
             #tempora0@#4 = "En renta";
         |FINSI;
     |FINSI;

     |SI nFic = 5055;
         aCon = (eaContri + "          ") % 110;

         nImp1 = #tempora0@#7;
         nImp2 = #tempora0@#8;
         nImp3 = #tempora0@#9;
         nImp4 = #tempora0@#10;
         nOk   = 0;
         |BUCLE rem00061;
         |SI nOk = 1;
             #tempora0@#3 = aVerde;
             #tempora0@#4 = "En renta";
         |FINSI;
     |FINSI;

     |SI nFic = 5056;
         aCon = (eaContri + "          ") % 110;
         aDis = "N";
         aDep = "S";
         aSeg = "N";
         aDel = "N";

         nImp1 = #tempora0@#7;
         nImp2 = #tempora0@#8;
         nImp3 = #tempora0@#9;
         nImp4 = #tempora0@#10;
         nImp5 = #tempora0@#11;

         nCmp1 = 36;
         nCmp2 = 37;
         nCmp3 = 38;
         nCmp4 = 39;
         nCmp5 = 40;

         nOk   = 0;
         |BUCLE rem00053;
         |SI nOk = 1;
             #tempora0@#3 = aVerde;
             #tempora0@#4 = "En renta";
         |FINSI;
     |FINSI;

     |SI nFic = 5057;
         aCon  = (eaContri + "          ") % 110;
         aCas  = "0501  ";
         nImp1 = #tempora0@#7;
         nImp2 = #tempora0@#8;
         nImp3 = #tempora0@#9;
         nImp4 = #tempora0@#10;

         nOk1    = 0;
         nOk2    = 0;
         nOk3    = 0;
         nOk4    = 0;
         nVarios = 1;
         |BUCLE rem00056;

         nOk = 1;
         |SI nImp1 ! 0;  |Y nOk1 = 0;  nOk = 0;  |FINSI;
         |SI nImp2 ! 0;  |Y nOk2 = 0;  nOk = 0;  |FINSI;
         |SI nImp3 ! 0;  |Y nOk3 = 0;  nOk = 0;  |FINSI;
         |SI nImp4 ! 0;  |Y nOk4 = 0;  nOk = 0;  |FINSI;

         |SI nOk = 1;
             #tempora0@#3 = aVerde;
             #tempora0@#4 = "En renta";
         |FINSI;
     |FINSI;

     |GRABA 020#tempora0@.a;
     |LIBERA #tempora0@;
|FPRC;

|DEFBUCLE BuscaCanti;
     #tempora0@#1003;
     ;
     #rem05000#0, enContri, 000;
     #rem05000#0, enContri, 999;
     be;
     NULL, BuscaCanti;
|FIN;

|PROCESO NoTrasladables;
     |VENTANA 0501, 2799, -1, 16, aAlfa;
     nVent = FSalida;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nVent;
     aVent5 = "MODAL";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     aDef = eaBase + "def/" + aMas;
     |CARGA_DEF aDef, tempora0@;

     |ABRE #rem00016;
     |ABRE #rem00017;

     |SI aMas = "rem05039.mas";  nFic = 5039;  |BUCLE BuscaCanti;  |FINSI;
     |SI aMas = "rem05042.mas";  nFic = 5042;  |BUCLE BuscaCanti;  |FINSI;

     |SI aMas = "rem05047.mas";  nFic = 5047;  |BUCLE BuscaCanti;  |FINSI;

     |SI aMas = "rem05048.mas";  nFic = 5048;  |BUCLE BuscaCanti;  |FINSI;
     |SI aMas = "rem05049.mas";  nFic = 5049;  |BUCLE BuscaCanti;  |FINSI;
     |SI aMas = "rem05050.mas";  nFic = 5050;  |BUCLE BuscaCanti;  |FINSI;
     |SI aMas = "rem05057.mas";  nFic = 5057;  |BUCLE BuscaCanti;  |FINSI;

     |SI aMas = "rem05051.mas";  nFic = 5051;  |BUCLE BuscaCanti;  |FINSI;
     |SI aMas = "rem05053.mas";  nFic = 5053;  |BUCLE BuscaCanti;  |FINSI;
     |SI aMas = "rem05055.mas";  nFic = 5055;  |BUCLE BuscaCanti;  |FINSI;
     |SI aMas = "rem05056.mas";  nFic = 5056;  |BUCLE BuscaCanti;  |FINSI;

     |SI aMas = "rem05054.mas";  nFic = 5054;  |BUCLE BuscaCanti;  |FINSI;

     |CIERRA #rem00016;
     |CIERRA #rem00017;

     |ABRE #tempora0@;

     |CONTROL_SIMPLE 0, "LABEL,{{10}}Datos del borrador. (Registros NO TRASDABLE)", 0502, 0598, NULL;

     nRango = 4 + 8 + 16 + 32 + 128;
     |LINEAL_SIMPLE #1#tempora0@, nRango, 0601, 2699, Baja900, Alta900, NULL;
     nGrid1 = FSalida;

     aEsc1  = &255 + "806";
     aEsc2  = &255 + "807";
     aRetu  = &255 + "802";
     |PARA; |SI;  |HACIENDO;
            FSalida = "::{{001}}Salir," + nGrid1;
            |LEETECLA aTecla;
            |SI aTecla = aEsc1; |SAL;  |FINSI;
            |SI aTecla = aEsc2; |SAL;  |FINSI;
            |SI aTecla = aRetu; |SAL;  |FINSI;
     |SIGUE;

     |CIERRA #tempora0@;

     |DESCARGA_DEF #tempora0@;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nVent;
     aVent5 = "MODELESS";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     |FINVENTANA nVent;
|FPRC;

|PROCESO PantaDatos;
     aMas = "";

     |SI aClave = "31";
         aAlfa = "Datos contribuyentes";
         aMas  = "rem05031.mas";
     |FINSI;

     |SI aClave = "37";
         aAlfa = "Datos vivienda habitual 2018";
         aMas  = "rem05037.mas";
     |FINSI;

     |SI aClave = "32";
         aAlfa = "Datos familiares descendientes";
         aMas  = "rem05032.mas";
     |FINSI;

     |SI aClave = "41";
         aAlfa = "Datos familiares ascendientes";
         aMas  = "rem05041.mas";
     |FINSI;

     |SI aClave = "11";
         aAlfa = "Arrendamientos de inmuebles";
         aMas  = "rem05011.mas";
     |FINSI;

     |SI aClave = "02";
         aAlfa = "Cuentas bancarias";
         aMas  = "rem05002.mas";
     |FINSI;

     |SI aClave = "06";
         aAlfa = "Cotizaciones a reg¡menes especiales de la seguridad social y convenios especiales";
         aMas  = "rem05006.mas";
     |FINSI;

     |SI aClave = "10";
         aAlfa = "Donaciones y aportaciones a patrimonio de persona con discapacidad";
         aMas  = "rem05010.mas";
     |FINSI;

     |SI aClave = "46";
         aAlfa = "Aportaciones a patrimonios protegidos de personas con discapacidad";
         aMas  = "rem05046.mas";
     |FINSI;

     |SI aClave = "09";
         aAlfa = "Pagos fraccionados de empresas y profesionales";
         aMas  = "rem05009.mas";
     |FINSI;

     |SI aClave = "12";
         aAlfa = "Prstamos y crditos relacionados con bienes inmuebles";
         aMas  = "rem05012.mas";
     |FINSI;

     |SI aClave = "14";
         aAlfa = "Aportaciones y contribuciones a sistema de previsi¢n social";
         aMas  = "rem05014.mas";
     |FINSI;

     |SI aClave = "03";
         aAlfa = "Rendimientos expl¡citos del capital mobiliario, base imponible del ahorro";
         aMas  = "rem05003.mas";
     |FINSI;

     |SI aClave = "29";
         aAlfa = "Rendimientos expl¡citos del capital mobiliario";
         aMas  = "rem05029.mas";
     |FINSI;

     |SI aClave = "01";
         aAlfa = "Rendimientos del trabajo";
         aMas  = "rem05001.mas";
     |FINSI;

     |SI aClave = "30";
         aAlfa = "Premios y ganancias patrimoniales";
         aMas  = "rem05030.mas";
     |FINSI;

     |SI aClave = "08";
         aAlfa = "Actividades econ¢micas";
         aMas  = "rem05008.mas";
     |FINSI;

     |SI aClave = "24";
         aAlfa = "Datos censales sobre actividades econ¢micas de alta en el ejercicio";
         aMas  = "rem05024.mas";
     |FINSI;

     |SI aClave = "05";
         aAlfa = "Rendimientos de operaciones de seguros";
         aMas  = "rem05005.mas";
     |FINSI;

     |SI aClave = "39";
         aAlfa = "Capitales diferidos de seguro de vida";
         aMas  = "rem05039.mas";
     |FINSI;

     |SI aClave = "42";
         aAlfa = "Valor de transmisi¢n sobre el que se aplic¢ la disposici¢n transitoria 9¦ de la ley de IRPF";
         aMas  = "rem05042.mas";
     |FINSI;

     |SI aClave = "07";
         aAlfa = "Informaci¢n catastral de inmuebles";
         aMas  = "rem05007.mas";
     |FINSI;

     |SI aClave = "04";
         aAlfa = "Ventas de activos financieros y otros valores mobiliarios";
         aMas  = "rem05004.mas";
     |FINSI;

     |SI aClave = "44";
         aAlfa = "Ventas derechos de suscripcion con retenci¢n";
         aMas  = "rem05044.mas";
     |FINSI;

     |SI aClave = "45";
         aAlfa = "Ventas derechos de suscripcion sin retenci¢n";
         aMas  = "rem05045.mas";
     |FINSI;

     |SI aClave = "15";
         aAlfa = "Otras subvenciones,auxilios y ayudas satisfechos por las administraciones p£blicas";
         aMas  = "rem05015.mas";
     |FINSI;

     |SI aClave = "16";
         aAlfa = "Subvenciones e indemnizaciones satisfechas a agricultores, ganaderos o forestales";
         aMas  = "rem05016.mas";
     |FINSI;

     |SI aClave = "17";
         aAlfa = "Ventas de fondos de inversi¢n";
         aMas  = "rem05017.mas";
     |FINSI;

     |SI aClave = "18";
         aAlfa = "Participaci¢n en comunidades de bienes, herencias yacentes y sociedades civiles";
         aMas  = "rem05018.mas";
     |FINSI;

     |SI aClave = "19";
         aAlfa = "Abono por nacimiento o adopci¢n. Deducci¢n IRPF anticipada";
         aMas  = "rem05019.mas";
     |FINSI;

     |SI aClave = "20";
         aAlfa = "Transmisiones patrimoniales urbanas";
         aMas  = "rem05020.mas";
     |FINSI;

     |SI aClave = "43";
         aAlfa = "Transmisiones patrimoniales r£sticas";
         aMas  = "rem05043.mas";
     |FINSI;

     |SI aClave = "21";
         aAlfa = "Rendimientos de letras del tesoro";
         aMas  = "rem05021.mas";
     |FINSI;

     |SI aClave = "22";
         aAlfa = "Deducciones auton¢micas";
         aMas  = "rem05022.mas";
     |FINSI;

     |SI aClave = "23";
         aAlfa = "Renta b sicas de emancipaci¢n";
         aMas  = "rem05023.mas";
     |FINSI;

     |SI aClave = "25";
         aAlfa = "Atribuci¢n de rendimientos del capital mobiliario";
         aMas  = "rem05025.mas";
     |FINSI;

     |SI aClave = "26";
         aAlfa = "Atribuci¢n de rendimientos del capital inmobiliario";
         aMas  = "rem05026.mas";
     |FINSI;

     |SI aClave = "27";
         aAlfa = "Atribuci¢n de rendimientos de actividades econ¢micas";
         aMas  = "rem05027.mas";
     |FINSI;

     |SI aClave = "28";
         aAlfa = "Atribuci¢n de ganancias y prdidas patrimoniales";
         aMas  = "rem05028.mas";
     |FINSI;

     |SI aClave = "33";
         aAlfa = "Atribuci¢n de rentas deducciones";
         aMas  = "rem05033.mas";
     |FINSI;

     |SI aClave = "34";
         aAlfa = "Subvenciones recogidas de la Base de Datos Nacional de Subvenciones";
         aMas  = "rem05034.mas";
     |FINSI;

     |SI aClave = "13";
         aAlfa = "Deducciones por maternidad";
         aMas  = "rem05013.mas";
     |FINSI;

     |SI aClave = "36";
         aAlfa = "Deducci¢n por descendientes con discapacidad a cargo";
         aMas  = "rem05036.mas";
     |FINSI;

     |SI aClave = "38";
         aAlfa = "Deducci¢n por ascendientes con discapacidad a cargo";
         aMas  = "rem05038.mas";
     |FINSI;

     |SI aClave = "60";
         aAlfa = "Deducci¢n por c¢nyuges no separados legalmente con discapacidad";
         aMas  = "rem05060.mas";
     |FINSI;

     |SI aClave = "35";
         aAlfa = "Deducci¢n por familia numerosa";
         aMas  = "rem05035.mas";
     |FINSI;

     |SI aClave = "40";
         aAlfa = "Deducci¢n por ascendientes separados o sin vinculo matrimonial";
         aMas  = "rem05040.mas";
     |FINSI;

     |SI aClave = "47";
         aAlfa = "Importes pendientes de deducir del ejercicio anterior por intereses adq. o reparaci¢n inmueble {{47}}";
         aMas  = "rem05047.mas";
     |FINSI;

     |SI aClave = "48";
         aAlfa = "Saldo neto negativo GyP patr.pendientes de compensar de la base imponible general";
         aMas  = "rem05048.mas";
     |FINSI;

     |SI aClave = "49";
         aAlfa = "Saldo neto negativo GyP patr.pendientes de compensar de la base imponible del ahorro";
         aMas  = "rem05049.mas";
     |FINSI;

     |SI aClave = "50";
         aAlfa = "Rendimientos de capital mobiliario neg.pdtes.de compensar base imponible del ahorro";
         aMas  = "rem05050.mas";
     |FINSI;

     |SI aClave = "51";
         aAlfa = "Exceso de aportaciones al sistema de prevision social pendientes de reducir";
         aMas  = "rem05051.mas";
     |FINSI;

     |SI aClave = "52";
         aAlfa = "Exceso de contribuciones a seguros colectivos pendientes de reducir";
         aMas  = "rem05052.mas";
     |FINSI;

     |SI aClave = "53";
         aAlfa = "Exceso de aportaciones al sistema de prevision por discapacitados pdte. de reducir";
         aMas  = "rem05053.mas";
     |FINSI;

     |SI aClave = "54";
         aAlfa = "Exceso de aportaciones por parientes o tutores de discapacitados pdte. de reducir";
         aMas  = "rem05054.mas";
     |FINSI;

     |SI aClave = "55";
         aAlfa = "Exceso de aportaciones a patrim. protegidos por discapacitados pdtes. de reducir";
         aMas  = "rem05055.mas";
     |FINSI;

     |SI aClave = "56";
         aAlfa = "Exceso de aportaciones a mutualidad de deportistas pendientes de reducir";
         aMas  = "rem05056.mas";
     |FINSI;

     |SI aClave = "57";
         aAlfa = "Bases liquidables generales negativas pendientes de compensar";
         aMas  = "rem05057.mas";
     |FINSI;

     |SI aClave = "58";
         aAlfa = "Deducciones de Castilla y Le¢n pendientes de compensar a ejercicios posteriores";
         aMas  = "rem05058.mas";
     |FINSI;

     |SI aClave = "59";
         aAlfa = "Deducciones por maternidad. Gastos de Guarder¡as";
         aMas  = "rem05059.mas";
     |FINSI;

     || Aqui insertar

     |SI aMas = "";  |ACABA;  |FINSI;

     |SI aMas = "rem05031.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05032.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05041.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05037.mas";  |HAZ Trasladables;    |FINSI;

     |SI aMas = "rem05001.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05002.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05003.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05004.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05005.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05006.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05007.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05008.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05009.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05010.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05011.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05012.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05013.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05014.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05015.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05016.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05017.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05018.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05019.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05020.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05021.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05022.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05023.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05024.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05025.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05026.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05027.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05028.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05029.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05030.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05033.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05034.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05035.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05036.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05038.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05039.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05040.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05042.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05043.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05044.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05045.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05046.mas";  |HAZ Trasladables;    |FINSI;
     |SI aMas = "rem05047.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05048.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05049.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05050.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05051.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05052.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05053.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05054.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05055.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05056.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05057.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05058.mas";  |HAZ NoTrasladables;  |FINSI;
     |SI aMas = "rem05059.mas";  |HAZ NoTrasladables;  |FINSI;

     || Aqui insertar
|FPRC;

|PROCESO EventoTree;
     |SI FEntrada = 0;  |ACABA;  |FINSI;

     aClave = Contenido;  |QBF aClave;
     |SI aClave = "";  |ACABA;  |FINSI;

     |ESTADO_CONTROL nTree, "DISABLE";

     |HAZ PantaDatos;

     |ESTADO_CONTROL nTree, "ENABLE";
     |FOCOTECLADO nTree;
|FPRC;

|PROCESO BuscaLinea1;
     #tempora1@#0    = #tempora0@#0;
     #tempora1@#1    = #tempora0@#1;
     |PARA nLinea1 = 1;  |SI nLinea1 [ 999;  |HACIENDO nLinea1 = nLinea1 + 1;
           #tempora1@#2 = nLinea1;
           |LEE 000#tempora1@.=;
           |SI FSalida ! 0;  |SAL;  |FINSI;
     |SIGUE;
|FPRC;

|PROCESO BuscaRegistro;
     aDef = eaBase + "def/" + aMas;

     |CARGA_DEF aDef, tempora0@;

     nHay = 0;

     |ABRE #tempora0@;
     #tempora0@#0 = #rem05000#0;
     #tempora0@#1 = enContri;
     #tempora0@#2 = 1;
     |LEE 000#tempora0@.];
     |SI FSalida = 0;  |Y #tempora0@#0 = #rem05000#0;  |Y #tempora0@#1 = enContri;
         nHay = 1;
     |FINSI;
     |CIERRA #tempora0@;

     |DESCARGA_DEF #tempora0@;

     |SI nHay = 0;  |ACABA;  |FINSI;

     nConta = nConta + 1;

     |SI aClave = "31";  aAlfa = nConta + ":Datos contribuyentes {{31}}";  |FINSI;
     |SI aClave = "37";  aAlfa = nConta + ":Datos vivienda habitual 2018 {{37}}";  |FINSI;
     |SI aClave = "32";  aAlfa = nConta + ":Datos familiares descendientes {{32}}";  |FINSI;
     |SI aClave = "41";  aAlfa = nConta + ":Datos familiares ascendientes {{41}}";  |FINSI;

     |SI aClave = "01";  aAlfa = nConta + ":Rendimientos del trabajo {{01}}";  |FINSI;
     |SI aClave = "30";  aAlfa = nConta + ":Premios y ganancias patrimoniales {{30}}";  |FINSI;
     |SI aClave = "08";  aAlfa = nConta + ":Actividades econ¢micas {{08}}";    |FINSI;
     |SI aClave = "24";  aAlfa = nConta + ":Datos censales sobre actividades econ¢micas de alta en el ejercicio {{24}}"; |FINSI;
     |SI aClave = "09";  aAlfa = nConta + ":Pagos fraccionados de empresas y profesionales {{09}}";    |FINSI;
     |SI aClave = "02";  aAlfa = nConta + ":Cuentas bancarias {{02}}";         |FINSI;
     |SI aClave = "03";  aAlfa = nConta + ":Rendimientos expl¡citos del capital mobiliario, base imponible del ahorro {{03}}";  |FINSI;
     |SI aClave = "29";  aAlfa = nConta + ":Rendimientos expl¡citos del capital mobiliario {{29}}";  |FINSI;
     |SI aClave = "10";  aAlfa = nConta + ":Donaciones y aportaciones a patrimonio de persona con discapacidad {{10}}";  |FINSI;
     |SI aClave = "46";  aAlfa = nConta + ":Aportaciones a patrimonios protegidos de personas con discapacidad {{46}}";  |FINSI;
     |SI aClave = "04";  aAlfa = nConta + ":Ventas de activos financieros y otros valores mobiliarios {{04}}";  |FINSI;
     |SI aClave = "43";  aAlfa = nConta + ":Bonos de fidelizaci¢n del Banco Santander {{43}}";  |FINSI;
     |SI aClave = "44";  aAlfa = nConta + ":Ventas derechos de suscripcion con retenci¢n {{44}}";  |FINSI;
     |SI aClave = "45";  aAlfa = nConta + ":Ventas derechos de suscripcion sin retenci¢n {{45}}";  |FINSI;
     |SI aClave = "05";  aAlfa = nConta + ":Rendimientos de operaciones de seguros {{05}}";  |FINSI;
     |SI aClave = "39";  aAlfa = nConta + ":Capitales diferidos de seguro de vida {{39}}";  |FINSI;
     |SI aClave = "06";  aAlfa = nConta + ":Cotizaciones a reg¡menes especiales de la seguridad social y convenios especiales {{06}}";  |FINSI;
     |SI aClave = "07";  aAlfa = nConta + ":Informaci¢n catastral de inmuebles {{07}}";  |FINSI;
     |SI aClave = "11";  aAlfa = nConta + ":Arrendamientos de inmuebles {{11}}";  |FINSI;
     |SI aClave = "25";  aAlfa = nConta + ":Atribuci¢n de rendimientos del capital mobiliario {{25}}";  |FINSI;
     |SI aClave = "26";  aAlfa = nConta + ":Atribuci¢n de rendimientos del capital inmobiliario {{26}}";  |FINSI;
     |SI aClave = "27";  aAlfa = nConta + ":Atribuci¢n de rendimientos de actividades econ¢micas {{27}}";  |FINSI;
     |SI aClave = "28";  aAlfa = nConta + ":Atribuci¢n de ganancias y prdidas patrimoniales {{28}}";  |FINSI;
     |SI aClave = "33";  aAlfa = nConta + ":Atribuci¢n de rentas deducciones {{33}}";  |FINSI;
     |SI aClave = "12";  aAlfa = nConta + ":Prstamos y crditos relacionados con bienes inmuebles {{12}}";  |FINSI;
     |SI aClave = "14";  aAlfa = nConta + ":Aportaciones y contribuciones a sistema de previsi¢n social {{14}}";  |FINSI;
     |SI aClave = "15";  aAlfa = nConta + ":Otras subvenciones,auxilios y ayudas satisfechos por las administraciones p£blicas {{15}}";  |FINSI;
     |SI aClave = "16";  aAlfa = nConta + ":Subvenciones e indemnizaciones satisfechas a agricultores, ganaderos o forestales {{16}}";  |FINSI;
     |SI aClave = "17";  aAlfa = nConta + ":Ventas de fondos de inversi¢n {{17}}";  |FINSI;
     |SI aClave = "18";  aAlfa = nConta + ":Participaci¢n en comunidades de bienes, herencias yacentes y sociedades civiles {{18}}";  |FINSI;
     |SI aClave = "19";  aAlfa = nConta + ":Abono por nacimiento o adopci¢n. Deducci¢n IRPF anticipada {{19}}";  |FINSI;
     |SI aClave = "20";  aAlfa = nConta + ":Operaciones de transmisi¢n de derechos sobre bienes inmuebles {{20}}";  |FINSI;
     |SI aClave = "21";  aAlfa = nConta + ":Rendimientos de letras del tesoro {{21}}";  |FINSI;
     |SI aClave = "22";  aAlfa = nConta + ":Deducciones auton¢micas {{22}}";  |FINSI;
     |SI aClave = "23";  aAlfa = nConta + ":Renta b sicas de emancipaci¢n {{23}}";  |FINSI;
     |SI aClave = "34";  aAlfa = nConta + ":Subvenciones recogidas de la Base de Datos Nacional de Subvenciones {{34}}";  |FINSI;

     |SI aClave = "13";  aAlfa = nConta + ":Deducci¢n por maternidad {{13}}";  |FINSI;
     |SI aClave = "36";  aAlfa = nConta + ":Deducci¢n por descendientes con discapacidad a cargo {{36}}";  |FINSI;
     |SI aClave = "38";  aAlfa = nConta + ":Deducci¢n por ascendientes con discapacidad a cargo {{38}}";   |FINSI;
     |SI aClave = "60";  aAlfa = nConta + ":Deducci¢n por c¢nyuges no separados legalmente con discapacidad {{60}}";  |FINSI;
     |SI aClave = "35";  aAlfa = nConta + ":Deducci¢n por familia numerosa {{35}}";  |FINSI;
     |SI aClave = "40";  aAlfa = nConta + ":Deducci¢n por ascendientes separados o sin vinculo matrimonial {{40}}";   |FINSI;
     |SI aClave = "42";  aAlfa = nConta + ":Valor de transmisi¢n sobre el que se aplic¢ la disposici¢n transitoria 9¦ de la ley de IRPF {{42}}";  |FINSI;
     |SI aClave = "47";  aAlfa = nConta + ":Importes pendientes de deducir del ejercicio anterior por intereses adq. o reparaci¢n inmueble {{47}}";  |FINSI;

     |SI aClave = "48";  aAlfa = nConta + ":Saldo neto negativo GyP patr.pendientes de compensar de la base imponible general {{48}}";  |FINSI;
     |SI aClave = "49";  aAlfa = nConta + ":Saldo neto negativo GyP patr.pendientes de compensar de la base imponible del ahorro {{49}}";  |FINSI;
     |SI aClave = "50";  aAlfa = nConta + ":Rendimientos de capital mobiliario neg.pdtes.de compensar base imponible del ahorro {{50}}";  |FINSI;
     |SI aClave = "51";  aAlfa = nConta + ":Exceso de aportaciones al sistema de prevision social pendientes de reducir {{51}}";  |FINSI;
     |SI aClave = "52";  aAlfa = nConta + ":Exceso de contribuciones a seguros colectivos pendientes de reducir {{52}}";  |FINSI;
     |SI aClave = "53";  aAlfa = nConta + ":Exceso de aportaciones al sistema de prevision por discapacitados pdte. de reducir {{53}}";  |FINSI;
     |SI aClave = "54";  aAlfa = nConta + ":Exceso de aportaciones por parientes o tutores de discapacitados pdte. de reducir {{54}}";  |FINSI;
     |SI aClave = "55";  aAlfa = nConta + ":Exceso de aportaciones a patrim. protegidos por discapacitados pdtes. de reducir {{55}}";  |FINSI;
     |SI aClave = "56";  aAlfa = nConta + ":Exceso de aportaciones a mutualidad de deportistas pendientes de reducir {{56}}";  |FINSI;
     |SI aClave = "57";  aAlfa = nConta + ":Bases liquidables generales negativas pendientes de compensar {{57}}";  |FINSI;
     |SI aClave = "58";  aAlfa = nConta + ":Deducciones de Castilla y Le¢n pendientes de compensar a ejercicios posteriores {{58}}";  |FINSI;
     |SI aClave = "59";  aAlfa = nConta + ":Deducciones por maternidad. Gastos de Guarder¡as {{59}}";  |FINSI;

     || Aqui insertar

     aAlfa = aAlfa + &13 + &10;
     |XGRABA nHandle, aAlfa;
|FPRC;

|PROCESO Procesar;
     aFichero = "men" + (("00000" + #rem05000#0) % -105) + ".txt";
     aAbre    = eaDirServidor + aFichero;
     |XABRE "WB", aAbre, nHandle;

     nConta = 0;
     aMas   = "rem05031.mas";  aClave = "31";  |HAZ BuscaRegistro;
     aMas   = "rem05037.mas";  aClave = "37";  |HAZ BuscaRegistro;
     aMas   = "rem05032.mas";  aClave = "32";  |HAZ BuscaRegistro;
     aMas   = "rem05041.mas";  aClave = "41";  |HAZ BuscaRegistro;

     aMas   = "rem05001.mas";  aClave = "01";  |HAZ BuscaRegistro;
     aMas   = "rem05030.mas";  aClave = "30";  |HAZ BuscaRegistro;
     aMas   = "rem05008.mas";  aClave = "08";  |HAZ BuscaRegistro;
     aMas   = "rem05024.mas";  aClave = "24";  |HAZ BuscaRegistro;
     aMas   = "rem05015.mas";  aClave = "15";  |HAZ BuscaRegistro;
     aMas   = "rem05014.mas";  aClave = "14";  |HAZ BuscaRegistro;
     aMas   = "rem05016.mas";  aClave = "16";  |HAZ BuscaRegistro;
     aMas   = "rem05002.mas";  aClave = "02";  |HAZ BuscaRegistro;
     aMas   = "rem05017.mas";  aClave = "17";  |HAZ BuscaRegistro;
     aMas   = "rem05025.mas";  aClave = "25";  |HAZ BuscaRegistro;
     aMas   = "rem05026.mas";  aClave = "26";  |HAZ BuscaRegistro;
     aMas   = "rem05027.mas";  aClave = "27";  |HAZ BuscaRegistro;
     aMas   = "rem05028.mas";  aClave = "28";  |HAZ BuscaRegistro;
     aMas   = "rem05033.mas";  aClave = "33";  |HAZ BuscaRegistro;
     aMas   = "rem05012.mas";  aClave = "12";  |HAZ BuscaRegistro;
     aMas   = "rem05009.mas";  aClave = "09";  |HAZ BuscaRegistro;
     aMas   = "rem05004.mas";  aClave = "04";  |HAZ BuscaRegistro;
     aMas   = "rem05044.mas";  aClave = "44";  |HAZ BuscaRegistro;
     aMas   = "rem05045.mas";  aClave = "45";  |HAZ BuscaRegistro;
     aMas   = "rem05003.mas";  aClave = "03";  |HAZ BuscaRegistro;
     aMas   = "rem05029.mas";  aClave = "29";  |HAZ BuscaRegistro;
     aMas   = "rem05005.mas";  aClave = "05";  |HAZ BuscaRegistro;
     aMas   = "rem05039.mas";  aClave = "39";  |HAZ BuscaRegistro;
     aMas   = "rem05042.mas";  aClave = "42";  |HAZ BuscaRegistro;
     aMas   = "rem05011.mas";  aClave = "11";  |HAZ BuscaRegistro;
     aMas   = "rem05010.mas";  aClave = "10";  |HAZ BuscaRegistro;
     aMas   = "rem05046.mas";  aClave = "46";  |HAZ BuscaRegistro;
     aMas   = "rem05006.mas";  aClave = "06";  |HAZ BuscaRegistro;
     aMas   = "rem05007.mas";  aClave = "07";  |HAZ BuscaRegistro;
     aMas   = "rem05018.mas";  aClave = "18";  |HAZ BuscaRegistro;
     aMas   = "rem05019.mas";  aClave = "19";  |HAZ BuscaRegistro;
     aMas   = "rem05020.mas";  aClave = "20";  |HAZ BuscaRegistro;
     aMas   = "rem05043.mas";  aClave = "43";  |HAZ BuscaRegistro;
     aMas   = "rem05021.mas";  aClave = "21";  |HAZ BuscaRegistro;
     aMas   = "rem05022.mas";  aClave = "22";  |HAZ BuscaRegistro;
     aMas   = "rem05023.mas";  aClave = "23";  |HAZ BuscaRegistro;
     aMas   = "rem05034.mas";  aClave = "34";  |HAZ BuscaRegistro;

     aMas   = "rem05013.mas";  aClave = "13";  |HAZ BuscaRegistro;
     aMas   = "rem05036.mas";  aClave = "36";  |HAZ BuscaRegistro;
     aMas   = "rem05038.mas";  aClave = "38";  |HAZ BuscaRegistro;
     aMas   = "rem05060.mas";  aClave = "60";  |HAZ BuscaRegistro;
     aMas   = "rem05035.mas";  aClave = "35";  |HAZ BuscaRegistro;
     aMas   = "rem05040.mas";  aClave = "40";  |HAZ BuscaRegistro;

     aMas   = "rem05047.mas";  aClave = "47";  |HAZ BuscaRegistro;
     aMas   = "rem05048.mas";  aClave = "48";  |HAZ BuscaRegistro;
     aMas   = "rem05049.mas";  aClave = "49";  |HAZ BuscaRegistro;
     aMas   = "rem05050.mas";  aClave = "50";  |HAZ BuscaRegistro;
     aMas   = "rem05051.mas";  aClave = "51";  |HAZ BuscaRegistro;
     aMas   = "rem05052.mas";  aClave = "52";  |HAZ BuscaRegistro;
     aMas   = "rem05053.mas";  aClave = "53";  |HAZ BuscaRegistro;
     aMas   = "rem05054.mas";  aClave = "54";  |HAZ BuscaRegistro;
     aMas   = "rem05055.mas";  aClave = "55";  |HAZ BuscaRegistro;
     aMas   = "rem05056.mas";  aClave = "56";  |HAZ BuscaRegistro;
     aMas   = "rem05057.mas";  aClave = "57";  |HAZ BuscaRegistro;
     aMas   = "rem05058.mas";  aClave = "58";  |HAZ BuscaRegistro;
     aMas   = "rem05059.mas";  aClave = "59";  |HAZ BuscaRegistro;

     || Aqui insertar

     |XCIERRA nHandle;

     aAlfa =  "Datos fiscales del " + eaContri;
     |VENTANA 0501, 3499, -1, 16, aAlfa;
     nSubVent = FSalida;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nSubVent;
     aVent5 = "MODAL";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     eaOrigen  = aAbre;
     eaDestino = eaDirLocal + aFichero;
     |HAZ CopiaFichero;

     |FBORRA eaOrigen;

     |PTEC 802;  |PAUSA;

     aAlfa    = "TREECTRL,Datos fiscales {{" + eaDestino + "}}";

     |CONTROL_SIMPLE 0, aAlfa, 0502, 3298, EventoTree;
     nTree    = FSalida;

     sT_nID   = nTree;
     sT_nOper = 2;
     sT_aData = "1:";
     |ESPECIFICA "COMMANDCONTROL", sTree;

     aEsc1     = &255 + "806";
     aEsc2     = &255 + "807";
     aRetu     = &255 + "802";
     |PARA; |SI;  |HACIENDO;
         FSalida = "::Salir," + nTree;
         |LEETECLA aTecla;

         |PULSATECLA;
         |SI aTecla = aEsc1; |SAL;  |FINSI;
         |SI aTecla = aEsc2; |SAL;  |FINSI;
         |SI aTecla = aRetu; |SAL;  |FINSI;

         |FOCOTECLADO nTree;
     |SIGUE;

     aAlfa = eaDirLocal + aFichero;  |RFBORRA aAlfa;

     aVent1 = -1;
     aVent2 = -1;
     aVent3 = 0;
     aVent4 = nSubVent;
     aVent5 = "MODELESS";
     |ESPECIFICA "ESTADO_VENTANA", aVent;

     |FINVENTANA nSubVent;
|FPRC;
