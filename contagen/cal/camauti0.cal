|FICHEROS;
   camauti0 #0;
   camauto0 #1;
   camauto1 #2;
   cacuenta #3;
   camautti #4;

   canempre #30;
   caselem1 #998;

   :/basica/def/agitab99 #199;
   caw00099 #902;
|FIN;

|VARIABLES;
   aAlfa1 = "";
   aAlfa2 = "";
   aAlfa3 = "";
   nNume1 = 0;
   nNume2 = 0;
   nNume3 = 0;
   tip1  = "";
   tip2  = "";
   sw    = 0;

   swlin  = 0;
   &swinf = 0;
   &tex   = "";
   &tex2  = "";
   &tex3  = "";
   swTipCta = 0;

   nDMod = 0;
   nHMod = 0;
   nUltCod    = 0;
   nBloque    = 0;
   aCasilla   = "";

   &eaTabMod  = "";

   &enwModAu  = 0;
   &enQueRen  = 0;
   &enModelo  = 0;
|FIN;

|INCLUYE dscont_i;

|CALCULO aTipo8; |TIPO 8;
  |HAZ inicio;
  |HAZ DirAplicSt;
  |SI Hayrenta = 0;
      |MENAV "    Error no existe Renta ";
      |ERROR;
      |PTEC 807;
  |FINSI;
  enwModAu = 1;
  enQueRen = enEjercicio - 1;
  |HAZ CargaAuxModelo;
  |NOME_DAT #902 eaTabMod;
|FCAL;

|CALCULO aTipo9; |TIPO 9;
  |SI Haybasica = 1; |DELINDEX #902; |FINSI;
|FCAL;

|PROCESO imprime2;
  #3#0 = #2#2;
  |LEE 001#3=;
  |SI FSalida ! 0;
      #3#2 = "NO EXISTE CUENTA";
  |FINSI;

  tex2 = "";
  |SI #2#7 = "D"; tex2 = "al DEBE     "; |FINSI;
  |SI #2#7 = "H"; tex2 = "al HABER    "; |FINSI;
  |SI #2#7 = "S"; tex2 = "segun SALDO "; |FINSI;
  |SI #2#7 = "C"; tex2 = "CUADRE ASTO."; |FINSI;

  tex3 = "";
  nBloque  = #2#11;
  aCasilla = #2#12;
  enModelo = #1#21;
  |HAZ LeeCodTab;
  |SI nUltCod = 0;
      tex3 = #902#3;
  |FINSI;

   swinf = 1;
   |PRINT;
   swlin = 1;
|FPRC;

|PROCESO imprime1;
   #4#0 = #1#11;
   |LEE 001#4=;
   |SI FSalida ! 0; |DDEFECTO #4; |FINSI;

   tex = "Modelo Oficial ";
   swinf = 0;
   |PRINT;
   swlin = 0;
   |BUCLELIN 2imprime2#1;
   |SI swlin = 1;
       swinf = 2;
       |PRINT;
   |FINSI;
   sw = 1;
|FPRC;

|DEFBUCLE lectura1;
   #1#1;
   11, 21;
   #0#0, #0#3, nDMod;
   #0#1, #0#4, nHMod;
   e;
   NULL, imprime1;
|FIN;

|CALCULO impresion; |TIPO 3;
   nDMod = #0#6;
   nHMod = #0#7;
   |IMPRE 0;
   |SI FSalida ! 0; |ACABA; |FINSI;

   |SI #48#27 = "S";
       |HAZ MultiEmpresa;
   |SINO;
       |DFICE dirfich0; |QBF dirfich0;
       |HAZ HazTodo;
   |FINSI;
   |FINIMP;
|FCAL;

|PROCESO HazTodo;

   |HAZ Analitica;

   |INFOR "camauti0";
   |SI FSalida ! 0; |FINIMP; |ACABA; |FINSI;

   |ABRE #3;
   |ABRE #4;
   sw = 0;
   |BUCLE lectura1;
   |CIERRA #3;
   |CIERRA #4;

   |SI sw = 1;
      |PIEINF;
   |FINSI;
   |FININF;
|FPRC;

|PROCESO MultiEmp1;
   cod1 = #caselem1#1;
   cod2 = #caselem1#2;
   emEmp = 1;  || Sin mensaje
   |HAZ leelo;
   |SI swerror ! 0;  |ACABA;   |FINSI;

   dirfich0 = #caselem1#3;
   |QBF dirfich0;

   |PATH_DAT #1 dirfich0;
   |PATH_DAT #2 dirfich0;
   |PATH_DAT #3 dirfich0;
   |PATH_DAT #4 dirfich0;
   |HAZ HazTodo;
|FPRC;

|DEFBUCLE MultiEmp0;
 #caselem1#1;
 ;
 001;
 999;
 ;
 NULL,MultiEmp1;
|FIN;

|PROCESO MultiEmpresa;
  |SUB_EJECUTA "caselemp";
  |NOME_DAT #998 eaFichsel;
  |BUCLE MultiEmp0;
  |DELINDEX #998;
|FPRC;

|PROCESO LeeCodTab;
 nUltCod = 0;
 |ABRE #902;
 #902#0 = enModelo;
 #902#1 = nBloque;
 #902#2 = aCasilla;
 |LEE 001#902=;
 |SI FSalida ! 0;
     nUltCod = 1;
 |FINSI;
 |CIERRA #902;
|FPRC;
