|FICHEROS;
     gadz0100;

     agifa134@;
     agifa084@;
     agifa079@;
|FIN;

|VARIABLES;
     nErr                = 0;

     aApli               = "";
     aBass               = "";
     aMas                = "";
     aPath               = "";

     &eaSer              = "";
     &enFac              = 0;
     &eaTip              = "";
|FIN;

|PROGRAMA;
     |SI nErr = 1;
         |ACABA;
     |FINSI;

     |SI aApli = "";
         |ACABA;
     |FINSI;

     |SI eaTip = "R";
         #agifa134@#49 = eaSer;
         #agifa134@#0  = enFac;
         |LEE 101#agifa134@.=;
         |SI FSalida = 0;
             #agifa134@#48 = "N";
             |GRABA 020#agifa134@.a;
             |LIBERA #agifa134@;

             |ACABA;
         |FINSI;

         #agifa084@#48 = eaSer;
         #agifa084@#0  = enFac;
         |LEE 101#agifa084@.=;
         |SI FSalida = 0;
             #agifa084@#39 = "N";
             |GRABA 020#agifa084@.a;
             |LIBERA #agifa084@;
         |FINSI;
     |FINSI;

     |SI eaTip = "S";
         #agifa079@#66 = eaSer;
         #agifa079@#0  = enFac;
         |LEE 101#agifa079@.=;
         |SI FSalida = 0;
             #agifa079@#48 = "N";
             |GRABA 020#agifa079@.a;
             |LIBERA #agifa079@;
         |FINSI;
     |FINSI;
|FPRO;

|PROCESO T80;  |TIPO 80;
     |ABRE #gadz0100;
     |LEE 000#gadz0100.p;
     |SI FSalida ! 0;  |DDEFECTO #gadz0100;  |FINSI;
     |CIERRA #gadz0100;

     aApli = #gadz0100#1;   |QBF aApli;

     |SI aApli = "";
         |ACABA;
     |FINSI;

     |DBASS aBass;
     aPath =  aBass + aApli + "/fich/" + (("00000" + #gadz0100#2) % -105) + "/";

     nErr = 0;
     |SI eaTip = "R";
         aMas = aBass + aApli + "/def/agifa134.mas";
         |CARGA_DEF aMas, agifa134@;
         |SI FSalida ! 0;  nErr = 1;  |ACABA;  |FINSI;

         aMas = aBass + aApli + "/def/agifa084.mas";
         |CARGA_DEF aMas, agifa084@;
         |SI FSalida ! 0;  nErr = 1;  |ACABA;  |FINSI;

         |PATH_DAT #agifa134@#aPath#;
         |PATH_DAT #agifa084@#aPath#;

         |ABRET #agifa134@;
         |ABRET #agifa084@;
     |FINSI;

     |SI eaTip = "S";
         aMas = aBass + aApli + "/def/agifa079.mas";
         |CARGA_DEF aMas, agifa079@;
         |SI FSalida ! 0;  nErr = 1;  |ACABA;  |FINSI;

         |PATH_DAT #agifa079@#aPath#;

         |ABRET #agifa079@;
     |FINSI;
|FPRC;

|PROCESO T90;  |TIPO 90;
     |SI aApli = "";
         |ACABA;
     |FINSI;

     |SI nErr = 1;
         |ACABA;
     |FINSI;

     |SI eaTip = "R";
         |CIERRAT #agifa134@;
         |CIERRAT #agifa084@;

         |DESCARGA_DEF #agifa084@;
         |DESCARGA_DEF #agifa134@;
     |FINSI;

     |SI eaTip = "S";
         |CIERRAT #agifa079@;

         |DESCARGA_DEF #agifa079@;
     |FINSI;
|FPRC;
