|FICHEROS;
     caivases #0;
     camaniva #1;
|FIN;

|VARIABLES;
     aAlfa1 = "";
     aAlfa2 = "";
     aAlfa3 = "";
     aAlfa4 = "";
     nNume1 = 0;
     nNume2 = 0;
     nNume3 = 0;
     nNume4 = 0;
     nPara1 = 0;
     nPara2 = 0;
     nPara3 = 0;
     nPara4 = 0;
     fFech1 = @;
     fFech2 = @;
     fFech3 = @;
     fFech4 = @;
     nFEstado = 0;
     nSeleccio = 0;
     nModo = 0;

     ModoEntrada = 0;

     Numero = 0;
|FIN;
____________________________________/
|PROCESO camaniva_1;
     |DDEFECTO #caivases;
     #caivases#0 = #camaniva#2;
     #caivases#1 = "R";
     |LEE 101#caivases.=;
     |SI FSalida ! 0;
          |GRABA 020#caivases.b;
     |FINSI;
     |SI #caivases#3 [ #camaniva#3;
        #caivases#3 = #camaniva#3 + #caivases#4;
        |GRABA 020#caivases.a;
     |FINSI;
     |LIBERA #caivases;
     |CIERRA #caivases;
|FPRC;

|DEFBUCLE camaniva;
 #camaniva#3;
 ;
 00, "     ",      0;
 99, "zzzzz", 999999;
 ;
 NULL, camaniva_1;
|FIN;

|PROCESO Tipo8; |TIPO 8;
     |ABRE #caivases;
     |LEE 000#caivases.p;
     |SI FSalida ! 0;
          |CLS;
          |CABEZA "Contador Series";
          |PINPA #0#0;
          |AVISO;
          |CONFI "0000NNo hay registros. Recuperar (S/N): ";
          |SI FSalida = 0;
               |BUCLE camaniva;
          |FINSI;
     |FINSI;
     |CIERRA #caivases;
|FPRC;

|PROCESO camaniva1;
   |SI #camaniva#3 > Numero;
      Numero = #camaniva#3;
   |FINSI;
|FPRC;

|DEFBUCLE camaniva1;
#camaniva#3;
36;
00,#caivases#0,000001,#caivases#1;
99,#caivases#0,999999,#caivases#1;
;
NULL,camaniva1;
|FIN;

|PROCESO ContaSerie; |TIPO 7;
   ModoEntrada = (FEntrada / 100) ! 0;

   |SI ModoEntrada = 1;
      Numero = 0;
      |SALVA_FICHA #camaniva;
      |BUCLE camaniva1;
      |REPON_FICHA #camaniva;
      #caivases#3 = Numero + #caivases#4;
   |FINSI;
|FPRC;
