|FICHEROS;
  cam00001 #1;
  cam00002 #2;

  caw00011 #65;

 :/modelos/def/dsmom040 #140;
 :/modelos/def/dsmom041 #141;
 :/modelos/def/dsmom042 #142;
 :/modelos/def/dsmom043 #143;
 :/modelos/def/dsmom044 #144;
 :/modelos/def/dsmom045 #145;
 :/modelos/def/dsmom046 #146;
 :/modelos/def/dsmom049 #149;

  smom040@ #240;
  smom041@ #241;
  smom042@ #242;
  smom043@ #243;
  smom044@ #244;
  smom045@ #245;
  smom046@ #246;
  smom049@ #249;

  caw00040 #999;
|FIN;

|VARIABLES;
   aFichero  = "";
   nEstado   = 0;
   nNumGrupo = 0;
   aElemento = "";
   nNumero   = 0;
   nLinea    = 0;
   swPrimero = 0;


 &enEmpOrig = 0;
 &nMaxDes = 0;
 &eaDirDestino = "";
 &eaDirOrigen  = "";

 swOpera  = 0;
 nCalC    = 0;
 nNume1   = 0;
 nNume2   = 0;
 aAlfa1   = "";
 aAlfa2   = "";
 aAlfa3   = "";
 aDeparta = "";

 &nLong1   = 0;
 &nLong2   = 0;
 &nLong3   = 0;
 &nLong4   = 0;
 &nLong5   = 0;
 &nLong6   = 0;
 &aDigDif  = "";
 &nLonDif  = 0;
 &LineaErrores = 0;
 &UltNivel = 0;

 mascara = "";
 Comodin = "";
 Tipo = 0;
 Nivel = 0;
 LongAlfa = "";

 Long = 0;
 ComodNum = 0;
 ComodNum2 = 0;
 Comodin1 = "";
 Comodin2 = "";

 nSwBueno = 0;

 cfecha = @;
 importe = 0;
 afiscal = 0;
 acontab = 0;
 vfecha = @;
 sw = 0;
 any = 0;

|FIN;

|INCLUYE dscont_i;

|| /////////////////////// PROCESOS DE TRABAJO \\\\\\\\\\\\\\\\\\\\
|PROGRAMA;
 |HAZ DirAplicSt;
 |SI Haymodelo = 0;  |ACABA;  |FINSI;    ||no hay amortizaciones

 aAlfa2 = aPModelo + "def/dsmom040.mas";
 |CARGA_DEF aAlfa2, smom040@;
 |SI FSalida = 0;
     aAlfa2 = aPModelo + "def/dsmom041.mas";
     |CARGA_DEF aAlfa2, smom041@;
     |SI FSalida = 0;
         aAlfa2 = aPModelo + "def/dsmom042.mas";
         |CARGA_DEF aAlfa2, smom042@;
         |SI FSalida = 0;

             aAlfa2 = aPModelo + "def/dsmom043.mas";
             |CARGA_DEF aAlfa2, smom043@;
             |SI FSalida = 0;

                 aAlfa2 = aPModelo + "def/dsmom044.mas";
                 |CARGA_DEF aAlfa2, smom044@;
                 |SI FSalida = 0;

                     aAlfa2 = aPModelo + "def/dsmom045.mas";
                     |CARGA_DEF aAlfa2, smom045@;
                     |SI FSalida = 0;

                         aAlfa2 = aPModelo + "def/dsmom046.mas";
                         |CARGA_DEF aAlfa2, smom046@;
                         |SI FSalida = 0;

                             aAlfa2 = aPModelo + "def/dsmom049.mas";
                             |CARGA_DEF aAlfa2, smom049@;
                             |SI FSalida = 0;

             aAlfa1 = aPModelo + "fich/";
             |PATH_DAT #140 aAlfa1; |PATH_DAT #240 aAlfa1;
             |PATH_DAT #141 aAlfa1; |PATH_DAT #241 aAlfa1;
             |PATH_DAT #142 aAlfa1; |PATH_DAT #242 aAlfa1;
             |PATH_DAT #143 aAlfa1; |PATH_DAT #243 aAlfa1;
             |PATH_DAT #144 aAlfa1; |PATH_DAT #244 aAlfa1;
             |PATH_DAT #145 aAlfa1; |PATH_DAT #245 aAlfa1;
             |PATH_DAT #146 aAlfa1; |PATH_DAT #246 aAlfa1;
             |PATH_DAT #149 aAlfa1; |PATH_DAT #249 aAlfa1;
             |HAZ HazTodo;

                                   |DESCARGA_DEF #smom049@;
                              |FINSI;
                              |DESCARGA_DEF #smom046@;
                         |FINSI;
                         |DESCARGA_DEF #smom045@;
                     |FINSI;
                     |DESCARGA_DEF #smom044@;
                 |FINSI;
                 |DESCARGA_DEF #smom043@;
             |FINSI;

             |DESCARGA_DEF #smom042@;
         |FINSI;
         |DESCARGA_DEF #smom041@;
     |FINSI;
     |DESCARGA_DEF #smom040@;
 |FINSI;
|FPRO;

|| **************************************************************************
|| /////////////////// Pase Lineas
|PROCESO GrabaLinea49;
  |DDEFECTO #dsmom049;
  #149#0 = enEmpresa;
  #149#1 = #249#1;
  #149#2 = aElemento;
  #149#3 = nNumero;

  aAlfa1 = "|NC";
  nCalC  = #dsmom049#aAlfa1#;
  |PARA nNume1 = 4; |SI nNume1 < nCalC; |HACIENDO nNume1 = nNume1 + 1;
        #149nNume1 = #249nNume1;
  |SIGUE;
  |SI enTP100 ! 100;
      impMoneda = #149#10; |HAZ ElCambio100; #149#10 = impMoneda;
  |FINSI;

  |SI nEstado ! 0; |GRABA 020#149n; |FINSI;
  |SI nEstado = 0; |GRABA 020#149a; |FINSI;
  |LIBERA #149;
|FPRC;

|PROCESO LasLineas49;
  #149#0 = enEmpresa;
  #149#2 = aElemento;
  #149#3 = nNumero;
  #149#4 = #249#4;
  |LEE 101#149=;
  |SI FSalida ! 0;
      nEstado = 1;
      |HAZ GrabaLinea49;
  |FINSI;
  |LIBERA #249;
|FPRC;

|DEFBUCLE LasLineas49;
 #249#1004;
 ;
 #241#0, #241#2, #241#3, 00;
 #241#0, #241#2, #241#3, 99;
 e;
 NULL, LasLineas49;
|FIN;

|PROCESO GrabaLinea46;
  |DDEFECTO #dsmom046;
  #146#0 = enEmpresa;
  #146#1 = #246#1;
  #146#2 = aElemento;
  #146#3 = nNumero;

  aAlfa1 = "|NC";
  nCalC  = #dsmom046#aAlfa1#;
  |PARA nNume1 = 4; |SI nNume1 < nCalC; |HACIENDO nNume1 = nNume1 + 1;
        #146nNume1 = #246nNume1;
  |SIGUE;

  |SI nEstado ! 0; |GRABA 020#146n; |FINSI;
  |SI nEstado = 0; |GRABA 020#146a; |FINSI;
  |LIBERA #146;
|FPRC;

|PROCESO LasLineas46;
  #146#0 = enEmpresa;
  #146#2 = aElemento;
  #146#3 = nNumero;
  #146#1 = #246#1;
  #146#6 = #246#6;
  |LEE 101#146=;
  |SI FSalida ! 0;
      nEstado = 1;
      |HAZ GrabaLinea46;
  |FINSI;
  |LIBERA #246;
|FPRC;

|DEFBUCLE LasLineas46;
 #246#1005;
 ;
 #241#0, #241#2, #241#3, 01, "   ";
 #241#0, #241#2, #241#3, 99, "zzz";
 e;
 NULL, LasLineas46;
|FIN;

|PROCESO GrabaLinea45;
  |DDEFECTO #dsmom045;
  #145#0 = enEmpresa;
  #145#1 = #245#1;
  #145#2 = aElemento;
  #145#3 = nNumero;

  aAlfa1 = "|NC";
  nCalC  = #dsmom045#aAlfa1#;
  |PARA nNume1 = 4; |SI nNume1 < nCalC; |HACIENDO nNume1 = nNume1 + 1;
        #145nNume1 = #245nNume1;
  |SIGUE;
  |SI enTP100 ! 100;
      impMoneda = #145#8;  |HAZ ElCambio100; #145#8  = impMoneda;
      impMoneda = #145#19; |HAZ ElCambio100; #145#19 = impMoneda;
  |FINSI;

  |SI nEstado ! 0; |GRABA 020#145n; |FINSI;
  |SI nEstado = 0; |GRABA 020#145a; |FINSI;
  |LIBERA #145;
|FPRC;

|PROCESO LasLineas45;
  |ABRE #245;
  #245#0 = enEmpresa;
  #245#2 = aElemento;
  #245#3 = nNumero;
  |LEE 041#245=;
  |SI FSalida = 0;
      #145#0 = enEmpresa;
      #145#2 = aElemento;
      #145#3 = nNumero;
      |LEE 101#145=;
      |SI FSalida ! 0;
          nEstado = 1;
          |HAZ GrabaLinea45;
      |FINSI;
  |FINSI;
  |LIBERA #245;
  |CIERRA #245;
|FPRC;

|PROCESO GrabaLinea44;
  |DDEFECTO #dsmom044;
  #144#0 = enEmpresa;
  #144#1 = #244#1;
  #144#2 = aElemento;
  #144#3 = nNumero;

  aAlfa1 = "|NC";
  nCalC  = #dsmom044#aAlfa1#;
  |PARA nNume1 = 4; |SI nNume1 < nCalC; |HACIENDO nNume1 = nNume1 + 1;
        #144nNume1 = #244nNume1;
  |SIGUE;
  |SI enTP100 ! 100;
      impMoneda = #144#8;  |HAZ ElCambio100; #144#8  = impMoneda;
  |FINSI;

  |SI nEstado ! 0; |GRABA 020#144n; |FINSI;
  |SI nEstado = 0; |GRABA 020#144a; |FINSI;
  |LIBERA #144;
|FPRC;

|PROCESO LasLineas44;
  |ABRE #244;
  #244#0 = enEmpresa;
  #244#2 = aElemento;
  #244#3 = nNumero;
  |LEE 041#244=;
  |SI FSalida = 0;
      #144#0 = enEmpresa;
      #144#2 = aElemento;
      #144#3 = nNumero;
      |LEE 101#144=;
      |SI FSalida ! 0;
          nEstado = 1;
          |HAZ GrabaLinea44;
      |FINSI;
  |FINSI;
  |LIBERA #244;
  |CIERRA #244;
|FPRC;

|PROCESO GrabaLinea43;
  |DDEFECTO #dsmom043;
  #143#0 = enEmpresa;
  #143#1 = #243#1;
  #143#2 = aElemento;
  #143#3 = nNumero;

  aAlfa1 = "|NC";
  nCalC  = #dsmom043#aAlfa1#;
  |PARA nNume1 = 4; |SI nNume1 < nCalC; |HACIENDO nNume1 = nNume1 + 1;
        #143nNume1 = #243nNume1;
  |SIGUE;
  |SI enTP100 ! 100;
      impMoneda = #143#9;  |HAZ ElCambio100; #143#9  = impMoneda;
      impMoneda = #143#10; |HAZ ElCambio100; #143#10 = impMoneda;
      #143#11 = #142#9 - #142#10;
      impMoneda = #143#12; |HAZ ElCambio100; #143#12 = impMoneda;
      impMoneda = #143#13; |HAZ ElCambio100; #143#13 = impMoneda;
  |FINSI;

  |SI nEstado ! 0; |GRABA 020#143n; |FINSI;
  |SI nEstado = 0; |GRABA 020#143a; |FINSI;
  |LIBERA #143;
|FPRC;

|PROCESO LasLineas43;
  #143#0 = enEmpresa;
  #143#2 = aElemento;
  #143#3 = nNumero;
  #143#14 = #243#14;
  |LEE 101#143=;
  |SI FSalida ! 0;
      nEstado = 1;
      |HAZ GrabaLinea43;
  |FINSI;
  |LIBERA #243;
|FPRC;

|DEFBUCLE LasLineas43;
 #243#1004;
 ;
 #241#0, #241#2, #241#3, 0000;
 #241#0, #241#2, #241#3, 9999;
 e;
 NULL, LasLineas43;
|FIN;

|PROCESO GrabaLinea;
  |DDEFECTO #dsmom042;
  #142#0 = enEmpresa;
  #142#1 = #242#1;
  #142#2 = aElemento;
  #142#3 = nNumero;

  aAlfa1 = "|NC";
  nCalC  = #dsmom042#aAlfa1#;
  |PARA nNume1 = 4; |SI nNume1 < nCalC; |HACIENDO nNume1 = nNume1 + 1;
        #142nNume1 = #242nNume1;
  |SIGUE;
  |SI enTP100 ! 100;
      impMoneda = #142#7;  |HAZ ElCambio100; #142#7  = impMoneda;
      impMoneda = #142#11; |HAZ ElCambio100; #142#11 = impMoneda;
      #142#13 = #142#11 - #142#7;
  |FINSI;

  |SI nEstado ! 0; |GRABA 020#142n; |FINSI;
  |SI nEstado = 0; |GRABA 020#142a; |FINSI;
  |LIBERA #142;
|FPRC;

|PROCESO LasLineas1;
  #142#0 = enEmpresa;
  #142#2 = aElemento;
  #142#3 = nNumero;
  #142#4 = #242#4;
  |LEE 101#142=;
  |SI FSalida ! 0;
      nEstado = 1;
      |HAZ GrabaLinea;
  |FINSI;
  |LIBERA #242;
|FPRC;

|DEFBUCLE LasLineas;
 #242#1004;
 ;
 #241#0, #241#2, #241#3, 000;
 #241#0, #241#2, #241#3, 999;
 e;
 NULL, LasLineas1;
|FIN;

|| /////////////////// Pase Cabeceras
|PROCESO GrabaCabecera;
  |DDEFECTO #141;
  #141#0 = enEmpresa;
  #141#1 = 00;
  #141#2 = aElemento;
  #141#3 = nNumero;

  aAlfa1 = "|NC";
  nCalC  = #dsmom041#aAlfa1#;
  |PARA nNume1 = 4; |SI nNume1 < nCalC; |HACIENDO nNume1 = nNume1 + 1;
        #141nNume1 = #241nNume1;
  |SIGUE;

  eaCuenta = #141#5; |HAZ FiltroCuenta; #141#5 = eaCuenta; #141#6 = enNivel;

  #141#32 = eaNombreEmp;

  #999#0 = #141#18;  || Grupo
  |LEE 001#999=;
  |SI FSalida = 0;
      #141#18 = #999#1;   || Cambia el Numero del Grupo
  |FINSI;

  |SI nEstado ! 0; |GRABA 020#141n; |FINSI;
  |SI nEstado = 0; |GRABA 020#141a; |FINSI;
  |LIBERA #141;

  |PINTA 2202, "Elementos: ";
  |PINTA 2213, #141#2;
  |PINTA 2222, #141#4;
|FPRC;

|PROCESO Cabeceras1;
  aElemento = #241#2;
  nNumero   = #241#3;
  |HAZ FiltroElemento;

  #141#0 = enEmpresa;
  #141#2 = aElemento;
  #141#3 = nNumero;
  |LEE 101#141=;
  |SI FSalida ! 0;
      nEstado = 1;
      |HAZ GrabaCabecera;
  |SINO;
      LineaErrores = LineaErrores + 1;
      #caw00011#0  = LineaErrores;
      #caw00011#1  = "Problemas escribiendo cabecera elementos amortizables [" + aElemento + "] (" + FSalida + ")";
      |GRABA 020#caw00011.n;
  |FINSI;
  |BUCLE LasLineas;
  |BUCLE LasLineas43;
  |HAZ   LasLineas44;
  |HAZ   LasLineas45;
  |BUCLE LasLineas46;
  |BUCLE LasLineas49;
  |LIBERA #241;
|FPRC;

|DEFBUCLE LasCabeceras;
 #241#1003;
 ;
 enEmpOrig, "        ", 00;
 enEmpOrig, "zzzzzzzz", 99;
 e;
 NULL, Cabeceras1;
|FIN;

|| *********************************************************************
|PROCESO Busca1400;
 nNumGrupo = #140#2;
 |SI #140#3 = #240#3; |Y #140#5 = #240#5;
     swPrimero = 1;
     |ERROR10;
 |FINSI;
|FPRC;

|DEFBUCLE Busca140;
 #140#1;
 ;
 enEmpresa, 0001;
 enEmpresa, 9999;
 e;
 NULL, Busca1400;
|FIN;

|PROCESO LosGrupos1;

  eaCuenta = #240#3; |HAZ FiltroCuenta; #240#3 = eaCuenta; #240#4 = enNivel;
  eaCuenta = #240#5; |HAZ FiltroCuenta; #240#5 = eaCuenta; #240#6 = enNivel;

  nNumGrupo = #240#2;
  nEstado = 0;
  #140#0 = enEmpresa;
  #140#2 = nNumGrupo;
  |LEE 101#140=;
  |SI FSalida ! 0;
      nEstado = 1;
      |HAZ GrabaGrupo;    || No existe Ese Grupo
  |SINO;
      |SI #140#3 ! #240#3; |O #140#5 ! #240#5;
          nNumGrupo = -1
          swPrimero = 0;
          |CIERRA #140;
          |BUCLE Busca140;
          |ABRE #140;
          |SI swPrimero = 0;
              nNumGrupo = nNumGrupo + 1;
          |FINSI;
          #140#0 = enEmpresa;
          #140#2 = nNumGrupo;
          |LEE 001#140=;
          nEstado = FSalida;
          |HAZ GrabaGrupo;    || No existe Ese Grupo
      |FINSI;
      |LIBERA #140;
  |FINSI;
  |LIBERA #240;
|FPRC;

|DEFBUCLE LosGrupos;
 #240#1002;
 ;
 enEmpOrig, 0001;
 enEmpOrig, 9999;
 e;
 NULL, LosGrupos1;
|FIN;

|| -------------------------------------------------------------------
|PROCESO HazTodo;
 |ABRE #1;
 #1#0 = enEmpresa;
 |LEE 101#1=;
 |SI FSalida ! 0;
     |SI enAutom = 0; |MENAV "    ERROR EN LA CONSOLIDACION "; |FINSI;
     |CIERRA #1;
     |ACABA;
 |FINSI;
 |CIERRA #1;
 |ABRE #2;
 #2#0 = enEmpresa;
 #2#1 = enEmpOrig;
 |LEE 040#2=;
 |SI FSalida ! 0;
     |SI enAutom = 0; |MENAV "    ERROR EN LA CONSOLIDACION "; |FINSI;
     |CIERRA #2;
     |ACABA;
 |FINSI;
 |CIERRA #2;

 aFichero = ("40w" + Usuario) % 108;
 |NOME_DAT #999 aFichero;
 |ABRE #999;  |CIERRA #999;  |DELINDEX #999;

 |ABRE #caw00011;

|| ....      Proceso Los Grupos
 |ABRE #999;

 |ABRE #140;
 |BUCLE LosGrupos;
 |CIERRA #140;

 |ABRE #141;
 |ABRE #142;
 |ABRE #143;
 |ABRE #144;
 |ABRE #145;
 |ABRE #146;
 |ABRE #149;
 |BUCLE LasCabeceras;
 |CIERRA #149;
 |CIERRA #146;
 |CIERRA #145;
 |CIERRA #144;
 |CIERRA #143;
 |CIERRA #142;
 |CIERRA #141;
 |CIERRA #999;
 |CIERRA #caw00011;
 |DELINDEX #999;
 |HAZ ElRecalculo;
|FPRC;

|| *********************************************************************
|| --------------------------------------------- Rutinas Varias

|PROCESO FiltroCuenta;
   enNivel = 0;
   |HAZ SacaNivel;
   |SI enNivel = 0; |ACABA; |FINSI;

   |SI #1#3 = 0; |ACABA; |FINSI;

      || Tomar la primera parte segun la posicion indicada
      ComodNum  = 100 + (#1#3 - 1);
      Comodin  = eaCuenta % ComodNum;

      || Sumar el digito diferenciador
      |QBF Comodin;
      Comodin = Comodin + aDigDif;
      |QBF Comodin;
      LongAlfa = Comodin % 0;
      Long = LongAlfa;

      || Tomar la segunda parte segun la posicion indicada
      |SI nLonDif = 3;
          ComodNum2 = ((#1#3 + 3) * 100) + 99;
      |SINO;
          |SI nLonDif = 2;
              ComodNum2 = ((#1#3 + 2) * 100) + 99;
          |SINO;
              ComodNum2 = ((#1#3 + 1) * 100) + 99;
          |FINSI;
      |FINSI;
      Comodin1 = eaCuenta % ComodNum2;
      |QBF Comodin1;
      LongAlfa = Comodin1 % 0;
      Long = Long + LongAlfa;

      || Obtengo la diferencia entre la longitud del ultimo nivel y la
      ||    longitud de la cadena que ya tengo calculada para rellenar
      ||    la cuenta con ceros (si procede)

      |SI UltNivel = 1; Long = dig4 - Long; |FINSI;
      |SI UltNivel = 2; Long = dig5 - Long; |FINSI;
      |SI UltNivel = 3; Long = dig6 - Long; |FINSI;
      |SI UltNivel = 4; Long = dig7 - Long; |FINSI;
      |SI UltNivel = 5; Long = dig8 - Long; |FINSI;
      |SI UltNivel = 6; Long = dig9 - Long; |FINSI;

      Comodin2 = "0" * Long;
      |QBF Comodin2;
      Comodin = Comodin + Comodin2 + Comodin1;
      |QBF Comodin;

      eaCuenta = Comodin;
      |HAZ SacaNivel;
|FPRC;

|PROCESO GrabaGrupo;
  |DDEFECTO #140;
  #140#0 = enEmpresa;
  #140#1 = 00;
  #140#2 = nNumGrupo;
  #140#3 = #240#3;
  #140#4 = #240#4;
  #140#5 = #240#5;
  #140#6 = #240#6;
  #140#7 = #240#7;
  #140#8 = eaNombreEmp;

  |SI nEstado ! 0; |GRABA 020#140n; |FINSI;
  |SI nEstado = 0; |GRABA 020#140a; |FINSI;
  |LIBERA #140;

  |SI #240#2 ! nNumGrupo;
      |DDEFECTO #999;
      #999#0 = #240#2;
      #999#1 = nNumGrupo;
      |GRABA 020#999n;
  |FINSI;

  |PINTA 2202, "Grupos: ";
  |PINTA 2210, #140#2;
  |PINTA 2216, #140#7;
|FPRC;

|PROCESO FiltroElemento;
   |SI #1#4 = 0; |ACABA; |FINSI;  ||No Hay Cambio

   nNume1 = 100 + (#1#4 - 1);
   |SI nLonDif = 3;
       nNume2 = ((#1#4 + 3) * 100) + 99;
   |SINO;
       |SI nLonDif = 2;
           nNume2 = ((#1#4 + 2) * 100) + 99;
       |SINO;
           nNume2 = ((#1#4 + 1) * 100) + 99;
       |FINSI;
   |FINSI;
   aAlfa1    = aElemento % nNume1;
   aAlfa2    = aElemento % nNume2;
   aElemento = aAlfa1 + aDigDif + aAlfa2;
|FPRC;

|| ********************************************************************
|| /////////////////////// Proceso El Recalculo
|PROCESO L_Amortiza;
   |SI #dsmom042#6 = "C";
      importe = importe + #dsmom042#7;
      |SI sw = 0;
         cfecha = #dsmom042#9;
         sw = 1;
      |FINSI;
   |FINSI;
   |SI #dsmom042#6 = "A";
      afiscal = afiscal + #dsmom042#7;
      acontab = acontab + #dsmom042#11;
   |FINSI;
   |SI #dsmom042#6 = "V";
      vfecha = #dsmom042#9;
   |FINSI;
|FPRC;

|DEFBUCLE lineas;
   #dsmom042#1;
   ;
   #141#0,#141#2,#141#3, 000;
   #141#0,#141#2,#141#3, 999;
   e;
   NULL, L_Amortiza;
|FIN;

|PROCESO C_Amortiza;
   cfecha = "00.00.0000";
   importe = 0;
   afiscal = 0;
   acontab = 0;
   vfecha = "00.00.0000";
   sw = 0;
   |BUCLE lineas;
   |SI sw = 1;
      #141#9  = cfecha;
      #141#26 = vfecha;
      #141#10 = importe;
      #141#15 = afiscal;
      #141#16 = importe - afiscal;
      #141#21 = acontab;
      #141#22 = importe - acontab;
      |GRABA 020#141.a;
      |LIBERA #141;
   |SINO;
                             || Graba Linea de Compra
      |ABRE #dsmom042;
      #dsmom042#0 = #141#0;
      #dsmom042#1 = #141#1;
      #dsmom042#2 = #141#2;
      #dsmom042#3 = #141#3;
      #dsmom042#4 = 1;
      any = #141#27 % 704;
      #dsmom042#5 = any;
      #dsmom042#6 = "C";
      #dsmom042#7 = #141#10;
      #dsmom042#8 = "S";
      #dsmom042#9 = #141#27;
      #dsmom042#10 = "COMPRA ";
      #dsmom042#11 = 0;
      #dsmom042#12 = 1;
      |GRABA 021#dsmom042.n;
      |CIERRA #dsmom042;
   |FINSI;
|FPRC;

|DEFBUCLE ElRecalculo;
   #141#1;
   ;
   enEmpresa,"        ",00;
   enEmpresa,"zzzzzzzz",99;
   e;
   NULL, C_Amortiza;
|FIN;

|PROCESO ElRecalculo;
  |BUCLE ElRecalculo;
|FPRC;
