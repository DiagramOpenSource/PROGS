|FICHEROS;
   caw00002 #0;
   camaniva #6;
   caivalin #7;

   canempre #30;
|FIN;

|VARIABLES;
     aAlfa     = "";
     aPathFich = "";
     nImporte  = 0;
     nConcepto = 0;
|FIN;

|PROCESO Revisa;
     |SI nConcepto = #0#3;
         |SI #7#23 = #0#2;
             nImporte = #7#6;
         |FINSI;
     |FINSI;

     |SI nConcepto = #0#4;
         |SI #7#20 = nImporte;

             #7#26 = "S";
             #7#27 = "S";
             |GRABA 020#7a;
             |LIBERA #7;
         |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE caivalin;
     #7#1;
     3;
     #6#0, #6#1, 01, nConcepto;
     #6#0, #6#1, 99, nConcepto;
     be;
     NULL, Revisa;
|FIN;

|PROCESO Lineas;
     nImporte  = 0;
     nConcepto = #0#3;
     |BUCLE caivalin;

     |SI nImporte ! 0;
         nConcepto = #0#4;
         |BUCLE caivalin;
     |FINSI;
|FPRC;

|DEFBUCLE camaniva;
     #6#1;
     ;
     #0#1, 0000000000;
     #0#1, 9999999999;
     ;
     NULL, Lineas;
|FIN;

|PROCESO MiraEmpresa;
     |DBASE aAlfa;   |QBF aAlfa;
     aAlfa = aAlfa + "/fich/";
     aPathFich = aAlfa + (("00000" + #30#2) % -105) + #30#3 + "/";

     |PATH_DAT #6 aPathFich;
     |PATH_DAT #7 aPathFich;

     |BUCLE camaniva;
|FPRC;

|DEFBUCLE canempre;
    #30#1;
    ;
    00000, #0#0;
    99999, #0#0;
    ;
    NULL, MiraEmpresa;
|FIN;

|PROCESO Tipo3;  |TIPO 3;
     |BUCLE canempre;
|FPRC;
