|FICHEROS;
   canempr1 #30;
   caconemp #49;
|FIN;

|VARIABLES;
   linea = 0;
   dd_ff = "";
   &r_emp = 0;
   &r_per = 0;
   &r_ope = 0;
   nEjer  = 0;
   nAny   = 0;
   fFech1 = @;
   nEste  = 0;
   alfa1 = "";
|FIN;

|INCLUYE dscont_i;

|PROCESO Lmayor;
   |SI #30#26 < 80;
       nAny = 2000 + #30#26;
   |SINO;
       nAny = 1900 + #30#26;
   |FINSI;
   |SI nEjer < nAny;
       nEjer = nAny; r_per = #30#3;
   |FINSI;
|FPRC;

|DEFBUCLE LMayor;
   #30#4;
   ;
   r_emp, 00;
   r_emp, 99;
   e;
   NULL, Lmayor;
|FIN;

|PROCESO lee_empresas1;
   linea = linea + 1;
   |DDEFECTO #49;
   #49#0 = linea;
   #49#1 = #30#2;
   #49#2 = #30#3;
   #49#3 = #30#1;
   #49#4 = " "; |SI #30#21 = "I"; #49#4 = "i"; |FINSI;
   #49#5 = #30#26;
   |GRABA 020#49n;
   |SI #30#2 = r_emp; |Y nEste = 1;
       nEste = #49#0;
   |FINSI;
|FPRC;

|DEFBUCLE lee_empresas;
   #30#1;
   ;
   00000, 0;
   99999, 9;
   e;
   NULL, NULL, NULL, NULL, NULL, lee_empresas1;
   #30#1, #30#2, #30#26;
|FIN;

|PROCESO min;
  |SI FSalida = "POSICION";
      #49#0 = nEste;
  |SINO;
      #49#0 = 1;
  |FINSI;
|FPRC;

|PROCESO max;
   #49#0 = 999999;
|FPRC;


|PROGRAMA;

   nEste = 1;
   |SI r_ope = 0;

/*
      |ATRI P;  |MENSA "    Cargando Opcion ...";  |ATRI 0;
      |SI r_emp = 0; r_emp = enEmpresa; |FINSI;
      |HAZ nom_usu;
      alfa1 = "j" + nom_tmp;

      |NOME_DAT #caconemp #alfa1#;
      |DELINDEX #49;
      |ABRE #49;
      |BUCLE lee_empresas;
      |CIERRA #49;
      |BLIN 4;

      |PINPA #0#49;
      |ENTLINEAL #1#49, -1, 5, 21, 0, min, max;
      |DELINDEX #49;
*/
     |CLS;
     |PINPA #0#49;
     |ABRE #30;
     |CONSULTA_CLAVE #3#30;
     |CIERRA #30;
      r_emp = #30#2;
      r_per = #30#3;
   |FINSI;

   |SI r_ope = 1;
      fFech1 = ~;
      alfa1 = fFech1; alfa1 = alfa1 % -102;
      nEjer = alfa1;

      |ABRE #30;
      |SELECT #4#30;
      r_per  = -1;
      #30#2  = r_emp;
      #30#26 = nEjer;
      |LEE 001#30=;
      |SI FSalida = 0;
          r_per = #30#3;
      |FINSI;
      |SELECT #1#30;
      |CIERRA #30;

      |SI r_per = -1;
          nEjer = 0;
          |BUCLE LMayor;
      |FINSI;
   |FINSI;

   |SI r_ope = 2;
      |ABRE #30;
      #30#2 = r_emp;
      #30#3 = r_per;
      |LEE 001#30=;
      |SI FSalida ! 0;
          r_per = -1;
      |FINSI;
      |CIERRA #30;
   |FINSI;
|FPRO;

|PROCESO recoge; |TIPO 0;
   |SI FSalida = 0;
      r_emp = #49#1;
      r_per = #49#2;
   |FINSI;
|FPRC;
