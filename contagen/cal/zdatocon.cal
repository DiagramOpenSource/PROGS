|FICHEROS;
     &program@ #0;

     &provinc@ #700;
     :/basica/def/agiprovi #701;
     :/integral/def/dsam0100 #702;
     caprovin #801;

     &poblaci@ #703;
     :/basica/def/agipobla #704;
     :/integral/def/dsam0101 #705;
     capoblac #802;

     &haciend@ #706;
     :/basica/def/agihacie #707;
     :/integral/def/dsam0102 #708;

     &regisnif@ #709;
     :/basica/def/agim0003  #710;
     :/integral/def/dsam0103 #711;

     &clientes@ #715;
     :/basica/def/agifigen  #716;
     :/integral/def/dsam0000 #717;

     &sgpaises@ #718;
     :/basica/def/agim0016  #719;
     :/integral/def/dsam0104 #720;
     capaises #803;

     :/integral/def/dsam0114 #721;

    caclipro #10;
    cacugene #11;
    capoblac #12;
    camaneof #13;
    canempre #14;
    caportad #16;
    camaniva #18;
    caplalab #19;
    cafanta1 #20,MANTE;
    cacuenta #21;
    camaasiz #22;
    cainliva #23;
    cavengca #24;
    catalm01 #25;
    casoplim #26;

    cam00020 #64;
    cacieex6 #65;
    caz00040 #66;
    cacieex8 #67;
    cacterem #68;
    cacieexa #665;
    otp00017;
    casiim01;

    :/basica/def/agipobla #50;
    :/basica/def/agihacie #51;
    :/basica/def/agim0003 #52;
    :/basica/def/agifigen #53;

    :/integral/def/dsam0101 #60;
    :/integral/def/dsam0102 #61;
    :/integral/def/dsam0103 #62;
    :/integral/def/dsam0000 #63;

    :/integral/def/dsam0115 #115;
|FIN;

|VARIABLES;
     aAlfa           = "";
     aVariable       = "";
     aFichero        = "";

     nCanal          = 0;
     nCampoEpi1      = 0;
     nCampoEpi2      = 0;
     nCampoEpi3      = 0;
     nCampoEpi4      = 0;
     nCampoEpi5      = 0;
     nCampoEpi6      = 0;
     nCampoEpi7      = 0;
     nSwPantalla     = 0;
  {1}aContiene       = "";
     &eaUnidadBasico = "";
     &eaUnidadBTmp   = "";
     &eaDirServidor  = "";
     aIP             = "";
|FIN;

|INCLUYE dscont_i;

|PROCESO Referencias;
     |SI HayAcceso = 1;         || Existe Acceso;
         |REFERENCIA_DEF provinc@,  #702;
         |REFERENCIA_DEF poblaci@,  #705;
         |REFERENCIA_DEF haciend@,  #708;
         |REFERENCIA_DEF regisnif@, #711;
         |REFERENCIA_DEF clientes@, #717;
         |REFERENCIA_DEF sgpaises@, #720;
     |SINO;
         |SI Haybasica = 1; || Existe Ficha General
             |REFERENCIA_DEF provinc@,  #701;
             |REFERENCIA_DEF poblaci@,  #704;
             |REFERENCIA_DEF haciend@,  #707;
             |REFERENCIA_DEF regisnif@, #710;
             |REFERENCIA_DEF clientes@, #716;
             |REFERENCIA_DEF sgpaises@, #719;
         |SINO;
             |REFERENCIA_DEF provinc@,  #801;
             |REFERENCIA_DEF poblaci@,  #802;
             |REFERENCIA_DEF sgpaises@, #803;
         |FINSI;
     |FINSI;
|FPRC;

|PROCESO Tipo88C;  |TIPO 88;
     eaPrograma = FSalida % -108;
     enSw = 0;
     |SI eaPrograma = "caclipro";  enSw = 1;  |REFERENCIA_DEF program@, #10;   |FINSI;
     |SI eaPrograma = "caclipr1";  enSw = 1;  |REFERENCIA_DEF program@, #10;   |FINSI;
     |SI eaPrograma = "cacugene";  enSw = 1;  |REFERENCIA_DEF program@, #11;   |FINSI;
     |SI eaPrograma = "capoblac";  enSw = 1;  |REFERENCIA_DEF program@, #12;   |FINSI;
     |SI eaPrograma = "camaneof";  enSw = 1;  |REFERENCIA_DEF program@, #13;   |FINSI;
     |SI eaPrograma = "canempre";  enSw = 1;  |REFERENCIA_DEF program@, #14;   |FINSI;
     |SI eaPrograma = "canempr2";  enSw = 1;  |REFERENCIA_DEF program@, #14;   |FINSI;
     |SI eaPrograma = "caportad";  enSw = 1;  |REFERENCIA_DEF program@, #16;   |FINSI;
     |SI eaPrograma = "camaniva";  enSw = 1;  |REFERENCIA_DEF program@, #18;   |FINSI;
     |SI eaPrograma = "caplalab";  enSw = 1;  |REFERENCIA_DEF program@, #19;   |FINSI;
     |SI eaPrograma = "cafanta1";  enSw = 1;  |REFERENCIA_DEF program@, #20;   |FINSI;
     |SI eaPrograma = "cacuenta";  enSw = 1;  |REFERENCIA_DEF program@, #21;   |FINSI;
     |SI eaPrograma = "cactaesp";  enSw = 1;  |REFERENCIA_DEF program@, #21;   |FINSI;
     |SI eaPrograma = "camaasiz";  enSw = 1;  |REFERENCIA_DEF program@, #22;   |FINSI;
     |SI eaPrograma = "caintiva";  enSw = 1;  |REFERENCIA_DEF program@, #23;   |FINSI;
     |SI eaPrograma = "cainliva";  enSw = 1;  |REFERENCIA_DEF program@, #23;   |FINSI;
     |SI eaPrograma = "cavengca";  enSw = 1;  |REFERENCIA_DEF program@, #24;   |FINSI;
     |SI eaPrograma = "catalm01";  enSw = 1;  |REFERENCIA_DEF program@, #25;   |FINSI;
     |SI eaPrograma = "casoplim";  enSw = 1;  |REFERENCIA_DEF program@, #26;   |FINSI;
     |SI eaPrograma = "cam00020";  enSw = 1;  |REFERENCIA_DEF program@, #64;   |FINSI;
     |SI eaPrograma = "cacieex6";  enSw = 1;  |REFERENCIA_DEF program@, #65;   |FINSI;
     |SI eaPrograma = "caz00040";  enSw = 1;  |REFERENCIA_DEF program@, #66;   |FINSI;
     |SI eaPrograma = "cacieex8";  enSw = 1;  |REFERENCIA_DEF program@, #67;   |FINSI;
     |SI eaPrograma = "cacterem";  enSw = 1;  |REFERENCIA_DEF program@, #68;   |FINSI;
     |SI eaPrograma = "cacieexa";  enSw = 1;  |REFERENCIA_DEF program@, #665;   |FINSI;

     |SI eaPrograma = "agipobla";  enSw = 1;  |REFERENCIA_DEF program@, #50;   |FINSI;
     |SI eaPrograma = "agihacie";  enSw = 1;  |REFERENCIA_DEF program@, #51;   |FINSI;
     |SI eaPrograma = "agim0103";  enSw = 1;  |REFERENCIA_DEF program@, #52;   |FINSI;
     |SI eaPrograma = "agifigen";  enSw = 1;  |REFERENCIA_DEF program@, #53;   |FINSI;

     |SI eaPrograma = "dsam0101";  enSw = 1;  |REFERENCIA_DEF program@, #60;   |FINSI;
     |SI eaPrograma = "dsam0102";  enSw = 1;  |REFERENCIA_DEF program@, #61;   |FINSI;
     |SI eaPrograma = "dsam0103";  enSw = 1;  |REFERENCIA_DEF program@, #62;   |FINSI;
     |SI eaPrograma = "dsam0000";  enSw = 1;  |REFERENCIA_DEF program@, #63;   |FINSI;

     |SI eaPrograma = "otp00017";  enSw = 1;  |REFERENCIA_DEF program@, #otp00017;  |FINSI;
     |SI eaPrograma = "casiim01";  enSw = 1;  |REFERENCIA_DEF program@, #casiim01;  |FINSI;

     |SI enSw = 0;  |ACABA;  |FINSI;

     |HAZ DirAplicSt;

     |SI HayAcceso = 1;         || Existe Acceso;
         || ... Desactivado  General y Ficheros Contabilidad
         |MODO_RELACION #0, 1, "agiprovi", "N", "N";
         |MODO_RELACION #0, 1, "agipobla", "N", "N";
         |MODO_RELACION #0, 1, "agihacie", "N", "N";
         |MODO_RELACION #0, 1, "agim0003", "N", "N";
         |MODO_RELACION #0, 1, "agifigen", "N", "N";
         |MODO_RELACION #0, 1, "agim0016", "N", "N";

         |MODO_RELACION #0, 1, "agiprovi", "X", "X";
         |MODO_RELACION #0, 1, "agipobla", "X", "X";
         |MODO_RELACION #0, 1, "agihacie", "X", "X";
         |MODO_RELACION #0, 1, "agim0003", "X", "X";
         |MODO_RELACION #0, 1, "agim0016", "X", "X";
         |MODO_RELACION #0, 1, "agifigen", "X", "X";

         |MODO_RELACION #0, 1, "caprovin", "N", "N";
         |MODO_RELACION #0, 1, "capoblac", "N", "N";
         |MODO_RELACION #0, 1, "capaises", "N", "N";
         |MODO_RELACION #0, 1, "caprovin", "X", "X";
         |MODO_RELACION #0, 1, "capoblac", "X", "X";
         |MODO_RELACION #0, 1, "capaises", "X", "X";

         || ... Activado Acceso
         |MODO_RELACION #0, 0, "dsam0100", "X", "X";
         |MODO_RELACION #0, 0, "dsam0101", "X", "X";
         |MODO_RELACION #0, 0, "dsam0102", "X", "X";
         |MODO_RELACION #0, 0, "dsam0103", "X", "X";
         |MODO_RELACION #0, 0, "dsam0104", "X", "X";
         |MODO_RELACION #0, 0, "dsam0000", "X", "X";
         |MODO_RELACION #0, 0, "dsam0114", "X", "X";
         |MODO_RELACION #0, 0, "dsam0115", "X", "X";

         |MODO_RELACION #0, 1, "dsam0100", "S", "S";
         |MODO_RELACION #0, 1, "dsam0101", "S", "S";
         |MODO_RELACION #0, 1, "dsam0102", "S", "S";
         |MODO_RELACION #0, 1, "dsam0104", "S", "S";
         |MODO_RELACION #0, 1, "dsam0000", "S", "S";
         |MODO_RELACION #0, 1, "dsam0114", "S", "S";
         |MODO_RELACION #0, 1, "dsam0115", "S", "S";

         |SI eaPrograma = "caz00040"; |O eaPrograma = "cacterem";
             |MODO_RELACION #0, 1, "dsam0103", "N", "N";
         |SINO;
             |MODO_RELACION #0, 1, "dsam0103", "S", "S";
         |FINSI;
     |SINO;
         || No existe Acceso
         || ... Desactivado  Acceso
         |MODO_RELACION #0, 1, "dsam0100", "N", "N";
         |MODO_RELACION #0, 1, "dsam0101", "N", "N";
         |MODO_RELACION #0, 1, "dsam0102", "N", "N";
         |MODO_RELACION #0, 1, "dsam0103", "N", "N";
         |MODO_RELACION #0, 1, "dsam0000", "N", "N";
         |MODO_RELACION #0, 1, "dsam0104", "N", "N";
         |MODO_RELACION #0, 1, "dsam0114", "N", "N";
         |MODO_RELACION #0, 1, "dsam0115", "N", "N";

         |MODO_RELACION #0, 1, "dsam0100", "X", "X";
         |MODO_RELACION #0, 1, "dsam0101", "X", "X";
         |MODO_RELACION #0, 1, "dsam0102", "X", "X";
         |MODO_RELACION #0, 1, "dsam0103", "X", "X";
         |MODO_RELACION #0, 1, "dsam0104", "X", "X";
         |MODO_RELACION #0, 1, "dsam0000", "X", "X";
         |MODO_RELACION #0, 1, "dsam0114", "X", "X";
         |MODO_RELACION #0, 1, "dsam0115", "X", "X";

         |SI Haybasica = 1; || Existe Ficha General
             || ... Desactivado Contabilidad
             |MODO_RELACION #0, 1, "caprovin", "N", "N";
             |MODO_RELACION #0, 1, "capoblac", "N", "N";
             |MODO_RELACION #0, 1, "capaises", "N", "N";
             |MODO_RELACION #0, 1, "caprovin", "X", "X";
             |MODO_RELACION #0, 1, "capoblac", "X", "X";
             |MODO_RELACION #0, 1, "capaises", "X", "X";

             || ... Activado Ficha General
             |MODO_RELACION #0, 0, "agiprovi", "X", "X";
             |MODO_RELACION #0, 0, "agipobla", "X", "X";
             |MODO_RELACION #0, 0, "agihacie", "X", "X";
             |MODO_RELACION #0, 0, "agim0003", "X", "X";
             |MODO_RELACION #0, 0, "agim0016", "X", "X";
             |MODO_RELACION #0, 0, "agifigen", "X", "X";

             |MODO_RELACION #0, 1, "agiprovi", "S", "S";
             |MODO_RELACION #0, 1, "agipobla", "S", "S";
             |MODO_RELACION #0, 1, "agihacie", "S", "S";

             |SI eaPrograma = "caz00040"; |O eaPrograma = "cacterem";
                 |MODO_RELACION #0, 1, "agim0003", "N", "N";
             |SINO;
                 |MODO_RELACION #0, 1, "agim0003", "S", "S";
             |FINSI;

             |MODO_RELACION #0, 1, "agim0016", "S", "S";
             |MODO_RELACION #0, 1, "agifigen", "S", "S";
         |SINO;
             ||... No Existe tampoco la Ficha General
             ||... Desactivado Ficha General
             |MODO_RELACION #0, 1, "agiprovi", "N", "N";
             |MODO_RELACION #0, 1, "agipobla", "N", "N";
             |MODO_RELACION #0, 1, "agihacie", "N", "N";
             |MODO_RELACION #0, 1, "agim0003", "N", "N";
             |MODO_RELACION #0, 1, "agifigen", "N", "N";
             |MODO_RELACION #0, 1, "agim0016", "N", "N";

             |MODO_RELACION #0, 1, "agiprovi", "X", "X";
             |MODO_RELACION #0, 1, "agipobla", "X", "X";
             |MODO_RELACION #0, 1, "agihacie", "X", "X";
             |MODO_RELACION #0, 1, "agim0003", "X", "X";
             |MODO_RELACION #0, 1, "agim0016", "X", "X";
             |MODO_RELACION #0, 1, "agifigen", "X", "X";

             ||... Activados Ficheros de Contabilidad
             |MODO_RELACION #0, 0, "caprovin", "X", "X";
             |MODO_RELACION #0, 0, "capoblac", "X", "X";
             |MODO_RELACION #0, 0, "capaises", "X", "X";
             |MODO_RELACION #0, 1, "caprovin", "S", "S";
             |MODO_RELACION #0, 1, "capoblac", "S", "S";
             |MODO_RELACION #0, 1, "capaises", "S", "S";
         |FINSI;
     |FINSI;

     |HAZ Referencias;
|FPRC;

|PROCESO LeeNifs;
     ewNif = 0;
     enSwDeDonde = -1;
     |HAZ DirAplicSt;
     |SI HayAcceso = 1;
         enSwDeDonde = 1;
         |REFERENCIA_DEF regisnif@, #711;
     |SINO;
         |SI Haybasica = 1;
             enSwDeDonde = 0;
             |REFERENCIA_DEF regisnif@, #710;
         |FINSI;
     |FINSI;

     |SI enSwDeDonde = -1; ewNif = 1; |ACABA; |FINSI;

     |ABRE #709;
     #709#0 = eaCodNif;
     |LEE 040#709=;
     |SI FSalida ! 0; |DDEFECTO #709; ewNif = 1; |FINSI;
     eaNomNif = #709#1;
     |CIERRA #709;
|FPRC;

|PROCESO LeeProvincia;
     |HAZ DirAplicSt;
     |SI HayAcceso = 1;
         enSwDeDonde = 1;
         |REFERENCIA_DEF provinc@, #702;
     |SINO;
         |SI Haybasica = 1;
             enSwDeDonde = 0;
             |REFERENCIA_DEF provinc@, #701;
         |SINO;
             enSwDeDonde = 2;
             |REFERENCIA_DEF provinc@, #801;
         |FINSI;
     |FINSI;

     |ABRE #700;
     #700#0 = enCodProv;
     |LEE 040#700=;
     |SI FSalida ! 0; |DDEFECTO #700; |FINSI;
     eaProvincia = #700#1;
     |CIERRA #700;
|FPRC;

|PROCESO LeeLocalidad;
     |HAZ DirAplicSt;
     |SI HayAcceso = 1;
         enSwDeDonde = 1;
         |REFERENCIA_DEF provinc@, #702;
         |REFERENCIA_DEF poblaci@, #705;
     |SINO;
         |SI Haybasica = 1;
             enSwDeDonde = 0;
             |REFERENCIA_DEF provinc@, #701;
             |REFERENCIA_DEF poblaci@, #704;
         |SINO;
             enSwDeDonde = 2;
             |REFERENCIA_DEF provinc@, #801;
             |REFERENCIA_DEF poblaci@, #802;
         |FINSI;
     |FINSI;


     |ABRE #703;
     |DDEFECTO #703;
     #703#0 = enCodProv;
     #703#1 = enCodPobl;
     |LEE 040#703=;
     |SI FSalida = 0;
         |HAZ ParrillaPobla;
     |SINO;
         |SI enSwMensa = 0;
             |MENAV "    No existe Poblacion.";
             |ERROR;
         |FINSI;
     |FINSI;
     |CIERRA #703;

     |ABRE #700;
     #700#0 = enCodProv;
     |LEE 040#700=;
     |SI FSalida ! 0; |DDEFECTO #700; |FINSI;
     eaProvincia = #700#1;
     |CIERRA #700;
|FPRC;

|PROCESO ParrillaPobla;
     |SI HayAcceso = 1;
         enSwDeDonde = 1;
         eaPoblacion = #703#3;
         enModoPob   = 1;
         |SI enSwMensa = 0;
             |SUB_EJECUTA_NP ":integral/dsaw9996";
         |FINSI;
         |SI eaPoblaParri ! "";
             eaPoblacion = eaPoblaParri;
         |SINO;
             eaPoblacion = #703#3;
         |FINSI;
     |SINO;
         enSwDeDonde = 0;
         eaPoblacion = #703#2;
         enModoPob   = 1;
         |SI enSwMensa = 0;
             |SUB_EJECUTA_NP ":basica/agiw9996";
         |FINSI;
         |SI eaPoblaParri ! "";
             eaPoblacion = eaPoblaParri;
         |SINO;
             eaPoblacion = #703#2;
         |FINSI;
     |FINSI;
|FPRC;

|PROCESO LeePersona;
     ewClien = 0;
     enSwDeDonde = -1;
     |HAZ DirAplicSt;
     |SI HayAcceso = 1;
         enSwDeDonde = 1;
         |REFERENCIA_DEF clientes@, #717;
     |SINO;
         |SI Haybasica = 1;
             enSwDeDonde = 0;
             |REFERENCIA_DEF clientes@, #716;
         |FINSI;
     |FINSI;

     |SI enSwDeDonde = -1; ewClien = 1; |ACABA; |FINSI;

     |ABRE #715;
     #715#0 = enCodCli;
     |LEE 040#715=;
     |SI FSalida ! 0; |DDEFECTO #715; ewClien = 1; |FINSI;
     |CIERRA #715;
|FPRC;

|PROCESO LeeHacienda;
     enSwDeDonde = -1;
     |HAZ DirAplicSt;
     |SI HayAcceso = 1;
         enSwDeDonde = 1;
         |REFERENCIA_DEF haciend@, #708;
     |SINO;
         |SI Haybasica = 1;
             enSwDeDonde = 0;
             |REFERENCIA_DEF haciend@, #707;
         |FINSI;
     |FINSI;

     |SI enSwDeDonde = -1; |ACABA; |FINSI;

     |ABRE #706;
     #706#0 = enCodProv;
     #706#1 = enCodPobl;
     |LEE 040#706=;
     |SI FSalida ! 0; |DDEFECTO #706; |FINSI;
     |CIERRA #706;
|FPRC;

|PROCESO LeeComunidad;
     enSwDeDonde = -1;
     |HAZ DirAplicSt;
     |SI HayAcceso ! 1; |ACABA; |FINSI;  || No Hay Fichero de Comunidades

     enSwDeDonde = 1;
     |ABRE #721;
     #721#0 = enCodComu;
     |LEE 040#721=;
     |SI FSalida ! 0; |DDEFECTO #721; |FINSI;
     |CIERRA #721;
|FPRC;

|PROCESO LeePais;
     enSwDeDonde = -1;
     |HAZ DirAplicSt;
     |SI HayAcceso = 1;
         enSwDeDonde = 1;
         |REFERENCIA_DEF sgpaises@, #720;
     |SINO;
         |SI Haybasica = 1;
             enSwDeDonde = 0;
             |REFERENCIA_DEF sgpaises@, #719;
         |SINO;
             enSwDeDonde = 2;
             |REFERENCIA_DEF sgpaises@, #803;
         |FINSI;
     |FINSI;

     |ABRE #718;
     #718#0 = eaCodPais;
     |LEE 040#718=;
     |SI FSalida ! 0; |DDEFECTO #718; |FINSI;
     |CIERRA #718;
|FPRC;

|PROCESO Lee5DigSg;
     enSwDeDonde = -1;
     |HAZ DirAplicSt;
     |SI HayAcceso = 1;
         enSwDeDonde = 1;
         |ABRE #115;
         #115#0 = eaSigla5;
         |LEE 041#115=;
         |SI FSalida = 0;
             eaSigla5 = #115#2;
         |FINSI;
         |CIERRA #115;
     |SINO;
         enSwDeDonde = 0;
     |FINSI;
|FPRC;


|PROCESO SinBarra;  |TIPO 5;
     FSalida = "SINBARRA";
|FPRC;

|PROCESO PreparaInformes;
     |HAZ DirAplicSt;

     aLosDefs = aPContag + "def/";
     |SI HayAcceso = 1; |O HayAcceso = 1;
                                                || Datos Hacienda
         aFichero = aLosDefs + "/hacienda.ref";
         |XABRE "W", aFichero, nCanal;
         |SI HayAcceso = 1;
             aVariable =":/integral/def/dsam0102" + &13 + &10;
         |SINO;
             aVariable =":/basica/def/agihacie" + &13 + &10;
         |FINSI;
         |XGRABA nCanal, aVariable;
         |XCIERRA nCanal;
                                                || Datos NIF
         aFichero = aLosDefs + "/regisnif.ref";
         |XABRE "W", aFichero, nCanal;
         |SI HayAcceso = 1;
             aVariable = ":/integral/def/dsam0103" + &13 + &10;
         |SINO;
             aVariable = ":/basica/def/agim0003" + &13 + &10;
         |FINSI;
         |XGRABA nCanal, aVariable;
         |XCIERRA nCanal;

     |FINSI;

                                                || Datos Poblaciones
     aFichero = aLosDefs + "/poblacio.ref";
     |XABRE "W", aFichero, nCanal;
     |SI HayAcceso = 1;
         aVariable =":/integral/def/dsam0101" + &13 + &10;
     |SINO;
         |SI Haybasica = 1;
             aVariable =":/basica/def/agipobla" + &13 + &10;
         |SINO;
             aVariable ="capoblac" + &13 + &10;
         |FINSI;
     |FINSI;
     |XGRABA nCanal, aVariable;
     |XCIERRA nCanal;
|FPRC;

|| *************************************************************************
|PROCESO DirAplicSt; ||Directorios Aplicaciones Standar
  |DBASS aBase; |QBT aBase;  || Directorio Base de las Aplaciones

  aPAcceso = aBase + "integral/"; || Directorio Acceso
  aPGenral = aBase + "basica/";   ||            Ficha Clientes General
  aPNomina = aBase + "laboral/";  ||            Laboral
  aPModelo = aBase + "modelos/";  ||            Modelos
  aPContag = aBase + "contagen/"; ||            Contabilidad General
  aPContas = aBase + "contasoc/"; || contasoc   Contabilidad Sociedades
  aPContav = aBase + "contanex/"; ||            Contabilidad Anexo
  aPFactur = aBase + "facges/";   ||            Facturacion Asesorias
  aPRentas = aBase + "ren2017/";  ||            Renta 2017

  aLosDefs = aPAcceso + "def/";
  aElProgr = aLosDefs + "dsam0000.mas";

  HayAcceso = 1;
  |XABRE "E", aElProgr, nCanal;
  |SI FSalida < 0;  HayAcceso = 0;  |FINSI;

  Haybasica = 1;
  aLosDefs = aPGenral + "def/";
  aElProgr = aLosDefs + "agifigen.mas";
  |XABRE "E", aElProgr, nCanal;
  |SI FSalida < 0;  Haybasica = 0;  |FINSI;

  Haymodelo = 1;
  aLosDefs = aPModelo + "def/";
  aElProgr = aLosDefs + "dsmom041.mas";
  |XABRE "E", aElProgr, nCanal;
  |SI FSalida < 0;  Haymodelo = 0;  |FINSI;

  Hayrenta = 1;
  aLosDefs = aPRentas + "def/";
  aElProgr = aLosDefs + "rem00100.mas";
  |XABRE "E", aElProgr, nCanal;
  |SI FSalida < 0;  Hayrenta = 0;  |FINSI;

  HaySociedad = 1;
  aLosDefs = aPContas + "def/";
  aElProgr = aLosDefs + "isacceso.mas";
  |XABRE "E", aElProgr, nCanal;
  |SI FSalida < 0;  HaySociedad = 0;  |FINSI;

  HayLaboral = 1;
  aLosDefs = aPNomina + "def/";
  aElProgr = aLosDefs + "labempre.mas";
  |XABRE "E", aElProgr, nCanal;
  |SI FSalida < 0;  HayLaboral = 0;  |FINSI;
|FPRC;

|PROCESO LeeUnidadBasico;
     aContiene = "";
     |ESPECIFICA "RBASS", aContiene;
     eaUnidadBasico = (aContiene1 % 102) > "";

     aAlfa = eaUnidadBasico % -101;
     |SI aAlfa ! ":";
         eaUnidadBasico = "";
     |FINSI;

     aIP = ""; |IP_REMOTO aIP;
||     aAlfa = eaUnidadBasico + "/DOCUMENTOS/TMP/";
     aAlfa = eaUnidadBasico + "/tmp/";
     |SI aIP ! "";
         |RMKDIR aAlfa;
     |SINO;
         |MKDIR aAlfa;
     |FINSI;
     aAlfa = eaUnidadBasico + "/tmp";
     eaUnidadBTmp = aAlfa;

     |DBASE aAlfa; |QBF aAlfa;
     aAlfa = aAlfa + "tmp/"; |MKDIR aAlfa;
     eaDirServidor = aAlfa;
|FPRC;
