|FICHEROS;
    :/modelos/def/dsmom037;
    :/modelos/def/dsmom030;
|FIN;

|VARIABLES;
    nSw = 0;
    nConcepto    = 0;
    &enPlan      = 0;
    &enDesde     = 0;
    &enHasta     = 0;
    &eaPrograma  = "";
    &eaExtension = "";
|FIN;

|PROCESO ePatronM037;
/*
     nSw = 0;
     |ABRE #dsmom037;
     #dsmom037#0 = "A";
     #dsmom037#1 = "01";
     |LEE 000#dsmom037.=;
     |SI FSalida ! 0;
         nSw = 1;
     |FINSI;
     |CIERRA #dsmom037;

     |SI nSw ! 0;

         ||  |MENAV "0000 Hay cambios en clave IRPF, se va a proceder a instalar el fichero";

         eaExtension = "mod";
         eaPrograma  = "dsmom037";
         |SUB_EJECUTA_NP ":basica/dspatron";

         eaExtension = "mod";
         eaPrograma  = "dsmom034";
         |SUB_EJECUTA_NP ":basica/dspatron";

         |ABRE #dsmom037;
         #dsmom037#0 = "A";
         #dsmom037#1 = "01";
         |LEE 000#dsmom037.=;
         |SI FSalida = 0;
||              |MENAV "0000 El fichero se ha instalado satisfactoriamente.";
         |SINO;
             |MENAV "0000 El fichero de Claves IRPF no se ha instalado, por favor instale la aplicacion ipbasica";
         |FINSI;
         |CIERRA #dsmom037;
     |FINSI;

     nConcepto = 402;  |HAZ  PongoConcepto; |SI nSw = 2; |ACABA; |FINSI;
     nConcepto = 407;  |HAZ  PongoConcepto;
     nConcepto = 433;  |HAZ  PongoConcepto;
     nConcepto = 463;  |HAZ  PongoConcepto;
*/
|FPRC;

|PROCESO PongoConcepto;
     nSw = 0;
     |ABRE #dsmom030;
     #dsmom030#0 = nConcepto;
     |LEE 041#dsmom030.=;
     |SI FSalida ! 0;
         nSw = 1;
         |SI nConcepto = 402; nSw = 2; |FINSI;  ||si no esta este, instalo todos
     |SINO;
         |SI nConcepto = 402;  |Y #dsmom030#43 = "  ";  nSw = 1;  |FINSI;
         |SI nConcepto = 407;  |Y #dsmom030#43 = "02";  nSw = 1;  |FINSI;
         |SI nConcepto = 433;  |Y #dsmom030#43 = "16";  nSw = 1;  |FINSI;
     |FINSI;
     |CIERRA #dsmom030;

     |SI nSw ! 0;
         enPlan = 2008;
         |SI nSw = 2;  enPlan = 0;  |FINSI;
         enDesde     = nConcepto;
         enHasta     = nConcepto;
         eaExtension = "mod";
         eaPrograma  = "dsmom030";
         |SUB_EJECUTA_NP ":basica/dspatron";
     |FINSI;
|FPRC;
