|FICHEROS;
    referen@;
|FIN;

|VARIABLES;
     nNumCampos          = 0;
     aNumCampos          = "";
     aQueQuiero          = "";
     aDirInicio          = "";
     aMas                = "";
     aFichero            = "";

     &aTitulo            = "";
     &nCampos            = 0;
     &aNombCampo         = "";
     &aTipoCampo         = "";
     &aLongCampo         = "";
     &aFic               = "";
     &aValMax            = "";
     &aValMin            = "";

     &eaFichero1 = "";
     &eaFichero2 = "";
|FIN;

|PROCESO eImprimirDef;

     |IMPRE 0;
     |INFOR "datosdef";
     aFichero = eaFichero1; |HAZ TodoDef;
     |SI eaFichero2 ! "";
         aFichero = eaFichero2; |HAZ TodoDef;
     |FINSI;
     |FININF;
     |FINIMP;

|FPRC;

|PROCESO TodoDef;
     aFic = aFichero;
     |DBASS aDirInicio;
     aMas  = aDirInicio + "contagen/def/" + aFichero;
     |CARGA_DEF aMas, referen@;
     |SI FSalida ! 0;
         ||  ... |MENAV  "         Error en cargar el Def ";
         |ACABA;  || No existen modelos o contasoc
     |FINSI;

     aQueQuiero = "|TITULO";
     aTitulo    = #referen@#aQueQuiero#;  |QBF aTitulo;
     aQueQuiero = "|NC";
     aNumCampos = #referen@#aQueQuiero#;
     nNumCampos = aNumCampos;
     nNumCampos = nNumCampos - 1;

     |PARA nCampos = 0;  |SI nCampos [ nNumCampos;  |HACIENDO nCampos = nCampos + 1;
           aQueQuiero = "|C" + (("000" + nCampos) % -103) + "NOMBRE";
           aNombCampo = #referen@#aQueQuiero#;

           aQueQuiero = "|C" + (("000" + nCampos) % -103) + "TIPO";
           aTipoCampo = #referen@#aQueQuiero#;

           aQueQuiero = "|C" + (("000" + nCampos) % -103) + "LONGITUD";
           aLongCampo = #referen@#aQueQuiero#;

           aQueQuiero = "|C" + (("000" + nCampos) % -103) + "MAXIMO";
           aValMax    = #referen@#aQueQuiero#;
           aQueQuiero = "|C" + (("000" + nCampos) % -103) + "MINIMO";
           aValMin    = #referen@#aQueQuiero#;

           |PRINT;
     |SIGUE;
     |DESCARGA_DEF #referen@;
     |PIEINF;
|FPRC;
