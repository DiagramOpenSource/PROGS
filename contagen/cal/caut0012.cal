|FICHEROS;
  cafinanc #0;
  cafinanl #1;
  caut0012 #10;

  canempre #30;
  caselem1 #998;
|FIN;

|VARIABLES;
  nInkey  = 0;
  nNume1  = 0;
  aAlfa1  = "";
  nCambio = 0;
|FIN;

|INCLUYE dscont_i;

|| /////////////////////// PROCESOS DE TRABAJO \\\\\\\\\\\\\\\\\\\\
|| ******************************************** Calculos Pantalla
|CALCULO cambio;
  aAlfa1 = "S";
  |SI #10Campo = 0; aAlfa1 = "N"; |FINSI;
  nNume1 = Campo + 4;
  |C_M #10nNume1,1,aAlfa1;
  |SI aAlfa1 = "N";
      #10nNume1 = 0; |PINTA #10nNume1;
  |FINSI;
|FCAL;

|PROCESO LineasFin0;
 nCambio = 0;

 |SI #10#7 ! 0;  |Y #10#7 = #1#7;
     nCambio = 1; nNume1 = #10#11;
 |FINSI;
 |SI #10#8 ! 0;  |Y #10#8 = #1#7;
     nCambio = 1; nNume1 = #10#12;
 |FINSI;
 |SI #10#9 ! 0;  |Y #10#9 = #1#7;
     nCambio = 1; nNume1 = #10#13;
 |FINSI;
 |SI #10#10 ! 0; |Y #10#10 = #1#7;
     nCambio = 1; nNume1 = #10#14;
 |FINSI;

 |SI nCambio ! 0;
     #1#7 = nNume1;
     #1#8 = (#1#6 % #1#7) ! EURODB;
     #1#9 =  #1#6 + #1#8;
     |GRABA 020#1a;
 |FINSI;
 |LIBERA #1;
|FPRC;

|DEFBUCLE LineasFin;
 #1#1;
 3;
 #0#0, #0#1, 001, #10#5;
 #0#0, #0#1, 999, #10#6;
 be;
 NULL, LineasFin0;
|FIN;

|PROCESO cambiar;

  |BUCLE LineasFin;

|FPRC;

|DEFBUCLE cafinanc;
   #0#1;
   3;
   enEmpresa, #10#1, #10#3;
   enEmpresa, #10#2, #10#4;
   e;
   NULL, cambiar;
|FIN;

|PROCESO HazTodo;
  |ATRI N;
  |PINTA 1814, "EMPRESA: ";
  |ATRI P; |PINTA 1823, #30#2;
  |PINTA 1923, #30#1; |ATRI 0;

  |BUCLE cafinanc;
|FPRC;

|CALCULO ElTipo3; |TIPO 12;
   |SI #10#0 = "NO"; |ACABA; |FINSI;

   |SI #48#27 = "S";
       |HAZ MultiEmpresa;
   |SINO;
       |DFICE dirfich0;
       |HAZ HazTodo;
   |FINSI;
|FCAL;

|PROCESO MultiEmp1;
   cod1 = #caselem1#1;
   cod2 = #caselem1#2;
   emEmp = 1;  || Sin mensaje
   |HAZ leelo;
   |SI swerror ! 0;  |ACABA;   |FINSI;

   dirfich0 = #caselem1#3;
   |QBF dirfich0;

   |HAZ HazTodo;
|FPRC;

|DEFBUCLE MultiEmp0;
 #caselem1#1;
 ;
 001;
 999;
 ;
 NULL,MultiEmp1;
|FIN;

|PROCESO MultiEmpresa;
  |SUB_EJECUTA "caselemp";
  |NOME_DAT #998 eaFichsel;
  |BUCLE MultiEmp0;
  |DELINDEX #998;
|FPRC;


|PROGRAMA;
  |HAZ inicio;
  |CLS;
  |CABEZA "Adapta %IVA Op.Finan ";

  |PINPA #0#10;
  |DDEFECTO #10;
  |SI enEjercicio ] 2012;
      #10#5  = "01.09.2012";
      #10#6  = "31.12.2099";
      #10#7  = #10#11; #10#11 = 21;
      #10#8  = #10#12; #10#12 = 10;
      #10#9  = 0; #10#13 = 0;
      #10#10 = 0; #10#14 = 0;
  |FINSI;
  |PINDA #0#10;
  |ENDATOS #1#10;
|FPRO;
