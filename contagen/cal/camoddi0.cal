|FICHEROS;
   camoddi0 #0;    || def entrada
   camandia #10;
|FIN;

|VARIABLES;
   &entrada = 1;
   importe = 0;
   men1  = "     NO EXISTE EMPRESA !";
   men2  = "     Longitud de Cuenta Fuera de Nivel !";
   men3  = "     ERROR el asiento ya existe";
   men4  = "     ERROR el asiento NO existe";
   opera = "";
   fecalf = "";
   mensa1 = "    ERROR ESTA FECHA NO CORRESPONDE AL EJERCICIO";
   mensa2 = "    ERROR FECHA INFERIOR O IGUAL AL BLOQUEO DE DATOS";
   &modcon = 0;
   &modifi = 0;
   mesi1 = "";
   mesi2 = "";
   traba1 = "";
   &ext1 = "";
   &ext2 = "";
   &ext3 = "";
   &ext4 = "";
   &no_mensaje = 0;
   &sw_ivamerr = 0;
   si_sigue = 0;
   sw_exi = 0;
   alfa1 = "";
   alfa2 = "";
   i_perio = 0;
   trim1 = @
   trim2 = @
   trim3 = @

   &enSwErrIVA = 0;
|FIN;

|INCLUYE dscont_i;
|INCLUYE moddia_i;

|PROGRAMA;

   #0#0 = ext1;         || diario viejo
   #0#1 = ext2;         || fecha vieja
   #0#2 = ext3;         || documento viejo
   #0#9 = ext4;         || asiento viejo
   #0#3 = #0#0;         || diario nuevo
   #0#4 = #0#1;         || fecha nueva
   #0#5 = #0#2;         || documento nuevo
   #0#10 = #0#9;        || asiento nuevo

   |HAZ lectura;
   |BLIN 4;
   |SI si_sigue ! 1;  |ACABA;  |FINSI;

   |SI enSwErrIVA ! 0;
      |MENAV "    Asiento de iva con vencimientos no pendientes. No se cambiara el registro de IVA";
      #camoddi0#8 = "N"; |PINTA #camoddi0#8;
      |C_M #camoddi0#8, 1, "N";
   |SINO;
      |C_M #camoddi0#8, 1, "S";
   |FINSI;

   |CABEZA "Modificacion Asiento";
   |PINPA #0#0;
   |PINDA #0#0;
   |ENDATOS #1#0;
   |SI FSalida = 0;
      |ABRE #1;
      |ABRE #2;
      #1#0 = #0#0;
      #1#1 = #0#1;
      #1#2 = #0#2;
      |LEE 001#1=;
      |SI FSalida ! 0;
         |MENAV men4;
         #0#6 = #1#4;
         #0#7 = #1#5;
         |PINTA #0#6;
         |PINTA #0#7;
      |SINO;
         #1#0 = #0#3;
         #1#1 = #0#4;
         #1#2 = #0#5;
         |LEE 001#1=;
         |SI FSalida = 0;
            |MENAV men3;
         |SINO;
            |HAZ cambio;
            |HAZ los_ivas;
            ext1 = #0#3;   || diario
            ext2 = #0#4;   || fecha
            ext3 = #0#5;   || documento
            ext4 = #0#10;  || asiento
            sw_ivamerr = 0;
            |SI #1#13 > 102; |Y enSwDejar = 1;
                ant_dia = #0#3; vie_dia = #0#0;
                ant_fec = #0#4; vie_fec = #0#1;
                ant_doc = #0#5; vie_doc = #0#2;
                |HAZ eGrabaModificar;
            |FINSI;
         |FINSI;
      |FINSI;
      |CIERRA #1;
      |CIERRA #2;
   |FINSI;
|FPRO;
