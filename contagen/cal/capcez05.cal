|FICHEROS;
     capcez05 #0;
     caclipro #1;
     agifa024@;
     agifa041@;
     dsm00225@;
|FIN;

|VARIABLES;
     aPath = "";
     aAlfa = "";
     aCta = "";
     aCli = "";
     aLon = "";
     nConta = 0;
|FIN;

|PROCESO caclipro;
     aLon = #1#10; |QBF aLon;
     aLon = aLon % A0;

     aCta = #1#10 % 103;
     |SI aCta = "430"; |Y aLon = 9;
          aCli = #1#10 % 406;

          |DDEFECTO #agifa024@;
          #agifa024@#0 = aCli;
          |LEE 101#agifa024@.=;
          |SI FSalida ! 0; |GRABA 020#agifa024@.b; |FINSI;

          #agifa024@#1 = #1#1;
          #agifa024@#2 = #1#1;

          #agifa024@#5 = #1#2;
          #agifa024@#6 = #1#6;
          #agifa024@#7 = #1#5;
          #agifa024@#178 = #1#3;
          #agifa024@#179 = #1#4;
          #agifa024@#180 = #1#25;

          #agifa024@#8 = #1#2;
          #agifa024@#9 = #1#6;
          #agifa024@#10 = #1#5;
          #agifa024@#181 = #1#3;
          #agifa024@#182 = #1#4;
          #agifa024@#183 = #1#25;

          #agifa024@#11 = #1#44;
          #agifa024@#12 = #1#48;
          #agifa024@#13 = #1#47;
          #agifa024@#184 = #1#45;
          #agifa024@#185 = #1#46;
          #agifa024@#186 = #1#50;

          #agifa024@#205 = #1#24;
          #agifa024@#17 = #1#7;
          #agifa024@#18 = #1#8;
          #agifa024@#15 = #1#9;
          #agifa024@#16 = #1#10;
          #agifa024@#29 = #1#13;
          #agifa024@#34 = #1#14;
          #agifa024@#30 = #1#17;
          #agifa024@#162 = #1#19;
          #agifa024@#20 = #1#20;
          #agifa024@#203 = #1#28;
          #agifa024@#3 = #1#33;
          #agifa024@#32 = #1#29;
          #agifa024@#33 = #1#30;
          #agifa024@#31 = #1#31;
          #agifa024@#30 = #1#32;
          #agifa024@#22 = #1#34;
          #agifa024@#23 = #1#35;
          #agifa024@#24 = #1#36;
          #agifa024@#27 = #1#49;
          #agifa024@#215 = #1#40;
          #agifa024@#216 = #1#41;

          #dsm00225@#0 = #agifa024@#205;
          |LEE 000#dsm00225@.=;
          |SI FSalida ! 0; |DDEFECTO #dsm00225@; |FINSI;
          #agifa024@#14 = #dsm00225@#1;

          |GRABA 020#agifa024@.a;
          |LIBERA #agifa024@;

nConta = nConta + 1;
||SI nConta = 10; |ERROR10; |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE caclipro;
     #1#1;
     ;
     "C", "            ";
     "C", "zzzzzzzzzzzz";
     ;
     NULL, caclipro;
|FIN;

|PROCESO T3; |TIPO 3;
     |SI #0#1 ! "SI"; |ACABA; |FINSI;

     aAlfa = aPath + "fich/" + (("00000" + #0#0) % -105) + "/";
     |PATH_DAT #agifa024@#aAlfa#;
     |PATH_DAT #dsm00225@#aAlfa#;
     |ABRE #agifa024@;
     |ABRE #dsm00225@;
     |BUCLE caclipro;
     |CIERRA #dsm00225@;
     |CIERRA #agifa024@;
|FPRC;

|PROCESO T0; |TIPO 0;
     #agifa041@#0 = #0#0;
     |LEE 000#agifa041@.=;
     |SI FSalida ! 0;
          |MENAV "0000No existe empresa de gestion...";
          |ERROR;
     |FINSI;
|FPRC;

|PROCESO T66; |TIPO 66;
     #agifa041@#0 = #0#0;
     |LEE 000#agifa041@.];
     |CONSULTA_CLAVE #1#agifa041@;
     |SI FSalida = 0;
          #0#0 = #agifa041@#0; |PINTA #0#0;
     |SINO;
          |ERROR;
     |FINSI;
|FPRC;

|PROGRAMA;
     |DBASS aPath;
     aPath = aPath + "dscomer9/";
     aAlfa = aPath + "def/agifa041";
     |CARGA_DEF aAlfa, agifa041@;
     |SI FSalida ! 0;
          |MENAV "0000Error al cargar 'agifa041'...";
     |SINO;
          aAlfa = aPath + "def/agifa024";
          |CARGA_DEF aAlfa, agifa024@;
          |SI FSalida = 0;
               aAlfa = aPath + "def/dsm00225";
               |CARGA_DEF aAlfa, dsm00225@;

               aAlfa = aPath + "fich/";
               |PATH_DAT #agifa041@#aAlfa#;
               |ABRE #agifa041@;

               |ABRE #0;
               |LEE 101#0p;
               |SI FSalida ! 0; |GRABA 020#0b; |FINSI;
               #0#1 = "NO";
               |PINPA #0#0;
               |PINDA #0#0;
               |ENDATOS #1#0;
               |SI FSalida = 0; |GRABA 020#0a; |FINSI;
               |CIERRA #0;

               |CIERRA #agifa041@;
               |DESCARGA_DEF #dsm00225@;
               |DESCARGA_DEF #agifa024@;
          |FINSI;
          |DESCARGA_DEF #agifa041@;
     |FINSI;
|FPRO;
