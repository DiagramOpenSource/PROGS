|FICHEROS;
   n43icons #0;
   n43consl #1;
|FIN;

|VARIABLES;
    informe   = "n43icons";
    &tipo     = 0;
    cuenta    = "";
    fecha     = @;
    impor     = 0;
    &total    = 0;
    sw        = 0;
    apunte    = 0;
    documento = 0;
    nSwPie    = 0;
|FIN;

|INCLUYE dscont_i;

|CALCULO defecto; |TIPO 7;
 #0#4 = fec1; |PINTA #0#4;
 #0#5 = fec2; |PINTA #0#5;
|FCAL;

|CALCULO cuenta; |TIPO 6;
     eaCuenta = #0Campo;
     salidas  = FSalida;
     |HAZ FiltraPuntos;
     #0Campo = eaCuenta;
     |PINTA #0Campo;

     |HAZ SacaNivel;
|FCAL;


|CALCULO imprimir0;
   tipo = 0;
   |PRINT; nSwPie = 1;
|FCAL;

|DEFBUCLE cpconsol0;
    #1#1;
    20, 17, 12, 10;
    #0#0, 0, #0#2, #0#4, #0#6;
    #0#1, 0, #0#3, #0#5, #0#7;
    ;
    NULL, imprimir0;
|FIN;

|CALCULO imprimir1;
   |SI sw = 0;
       cuenta = #1#2;
       fecha  = #1#3;
       impor  = #1#8;
       sw   = 1;
       tipo = 1;
       |PRINT; nSwPie = 1;
   |FINSI;
   |SI cuenta ! #1#2; |O fecha ! #1#3; |O impor ! #1#8;
       tipo = 10;
       |PRINT; nSwPie = 1;
       cuenta = #1#2;
       fecha  = #1#3;
       impor  = #1#8;
       total  = 0;
       tipo   = 1;
       |PRINT; nSwPie = 1;
   |FINSI;
   tipo = 11;
   |PRINT; nSwPie = 1;
   total = total + #1#17;
|FCAL;

|DEFBUCLE cpconsol1;
    #1#1;
    20, 17, 12, 10;
    #0#0, 1, #0#2, #0#4, #0#6;
    #0#1, 1, #0#3, #0#5, #0#7;
    ;
    NULL, imprimir1;
|FIN;

|CALCULO imprimir2;
   |SI sw = 0;
       total  = 0;
       cuenta = #1#10;
       apunte = #1#19;
       documento  = #1#13;
       sw   = 1;
       tipo = 2;
       |PRINT; nSwPie = 1;
   |FINSI;
   |SI cuenta ! #1#10; |O apunte ! #1#19; |O documento ! #1#13;
       tipo = 20;
       |PRINT; nSwPie = 1;
       cuenta = #1#10;
       apunte = #1#19;
       documento  = #1#13;
       total  = 0;
       tipo = 2;
       |PRINT; nSwPie = 1;
   |FINSI;
   tipo = 22;
   |PRINT; nSwPie = 1;
   total = total + #1#8;
|FCAL;

|DEFBUCLE cpconsol2;
   #1#1;
   20, 17, 12, 10;
   #0#0, 2, #0#2, #0#4, #0#6;
   #0#1, 2, #0#3, #0#5, #0#7;
   ;
   NULL, imprimir2;
|FIN;

|CALCULO impre;|TIPO 3;

   |IMPRE 0;
   |SI FSalida ! 0;
       |MENAV "    Proceso interrumpido";
       |ACABA;
   |FINSI;

   |INFOR informe;
   |SI FSalida ! 0;
       |MENAV "     No existe informe";
       |FINIMP;
       |ACABA;
   |FINSI;

   nSwPie = 0;
   sw     = 0;
   |BUCLE cpconsol0;
   |BUCLE cpconsol1;
   |SI sw = 1;
       tipo = 10;
       |PRINT; nSwPie = 1;
       sw = 0;
       total = 0;
   |FINSI;

   |BUCLE cpconsol2;
   |SI sw = 1;
       tipo = 20;
       |PRINT; nSwPie = 1;
       sw = 0;
   |FINSI;

   |SI nSwPie ! 0;
       |PIEINF;
   |FINSI;
   |FININF;
   |FINIMP;
|FCAL;
