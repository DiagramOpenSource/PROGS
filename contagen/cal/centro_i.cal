|| Proceso para Centros de Trabajo

|FICHEROS;
   centrab@ #901;
   emprlab@ #902;
   nomaux1@ #903;
   nomaux2@ #904;
|FIN;

|VARIABLES;
  aPath = "";
  aAlfa1 = "";
  aAlfa2 = "";
|FIN;

|INCLUYE dscont_i;

|| ***********************************************************************
|RUTINA inf903;
 #903#0 = "    ";
|FRUT;

|RUTINA sup903;
 #903#0 = "zzzz";
|FRUT;

|RUTINA inf904;
 #904#0 = eaArea;
 |SI eOpCen = 2;  #904#0 = "    "; |FINSI;
 #904#1 = "    ";
|FRUT;

|RUTINA sup904;
 #904#0 = eaArea;
 |SI eOpCen = 2; #904#0 = "zzzz"; |FINSI;
 #904#1 = "zzzz";
|FRUT;

|RUTINA inf901;
 #centrab@#0 = enEmpresa;
 #centrab@#1 = 001;
|FRUT;

|RUTINA sup901;
 #centrab@#0 = enEmpresa;
 #centrab@#1 = 999;
|FRUT;


|PROCESO CentroTrabajo;
   enEmpLab = 0;
   eaNomCentro  = "";
   eswLect = 0;
   |SI enCentro = 0; |ACABA; |FINSI;

   |DFICB aPath;
   aPath = aPath + "000000/";
   |SI HayLaboral = 1;
       |HAZ VerEmpLab;
       |SI enEmpLab = 1;  eswLect = 1; |ACABA; |FINSI;
       aAlfa1 = ":/laboral/def/labcentr.mas";
       aPath = aPNomina + "fich/";
   |SINO;
       aAlfa1 = "camancen.mas";
   |FINSI;
   |CARGA_DEF aAlfa1, centrab@;
   |SI FSalida = 0;
       |PATH_DAT #901 aPath;

       |ABRE #centrab@;

       |SI eOpCen = 1;
           |CONSULTA_F_CLAVE #1#centrab@,inf901,sup901;
           enCentro    = #centrab@#1;
       |FINSI;

    |ET LaLecturaCen;
       #centrab@#0 = enEmpresa;
       #centrab@#1 = enCentro;
       |LEE 001#centrab@.=;
       |SI FSalida ! 0;
           eswLect = 1;
               |CONFI  "    SNo Existe Centro, Desea dar de Alta ";
               |SI FSalida = 0;
                    |SUB_EJECUTA_NP ":contagen/camancen.tab";
                    eswLect = 0;
                    |VETE LaLecturaCen;
               |FINSI;
       |FINSI;

       enCentro     = #centrab@#1;
       eaNomCentro  = #centrab@#2;
       |CIERRA #centrab@;
   |FINSI;
   |DESCARGA_DEF #centrab@;
|FPRC;

|PROCESO VerEmpLab;
   enEmpLab = 0;
   aAlfa1 = ":/laboral/def/labempre.mas";
   aPath = aPNomina + "fich/";
   |CARGA_DEF aAlfa1, emprlab@;
   |SI FSalida = 0;
       |PATH_DAT #902 aPath;

       |ABRE #emprlab@;
       #emprlab@#0 = enEmpresa;
       |LEE 001#emprlab@.=;
       |SI FSalida ! 0;
           enEmpLab = 1;
       |FINSI;
       |CIERRA #emprlab@;
   |FINSI;
   |DESCARGA_DEF #emprlab@;
|FPRC;


|PROCESO AreaTrabajo;
   eswLect = 0;

   |DFICB aPath;
   aPath = aPath + "000000/";
   |SI HayLaboral = 1;
       aAlfa1 = ":/laboral/def/nomauxi1.mas";
       aPath = aPNomina + "fich/";
   |SINO;
       aAlfa1 = "canoaux1.mas";
   |FINSI;

   |CARGA_DEF aAlfa1, nomaux1@;
   |SI FSalida = 0;
       |PATH_DAT #903 aPath;

       |ABRE #903;

       |SI eOpCen = 1;
           |CONSULTA_F_CLAVE #1#903,inf903,sup903;
           eaArea = #903#0;
       |FINSI;

    |ET LaLecturaArea;
       #903#0 = eaArea;
       |LEE 001#903=;
       |SI FSalida ! 0;
           |SI #903#0 = "    ";
               |GRABA 020#903n;
               |VETE LaLecturaArea;
           |FINSI;
           eswLect = 1;
           |CONFI  "    SNo Existe Area, Desea dar de Alta ";
           |SI FSalida = 0;
               |SUB_EJECUTA_NP ":contagen/canoaux1.tab";
               eswLect = 0;
               |VETE LaLecturaArea;
           |FINSI;
       |FINSI;

       eaArea = #903#0;
       |CIERRA #903;
   |FINSI;
   |DESCARGA_DEF #903;
|FPRC;

|PROCESO SecTrabajo;
   eswLect = 0;

   |DFICB aPath;
   aPath = aPath + "000000/";
   |SI HayLaboral = 1;
       aAlfa1 = ":/laboral/def/nomauxi2.mas";
       aPath = aPNomina + "fich/";
   |SINO;
       aAlfa1 = "canoaux2.mas";
   |FINSI;

   |CARGA_DEF aAlfa1, nomaux2@;
   |SI FSalida = 0;
       |PATH_DAT #904 aPath;

       |ABRE #904;

       |SI eOpCen = 1; |O eOpCen = 2;
           |CONSULTA_F_CLAVE #1#904,inf904,sup904;
           eaArea    = #904#0;
           eaSeccion = #904#1;
       |FINSI;

    |ET LaLecturaSecc;
       #904#0 = eaArea;
       #904#1 = eaSeccion;
       |LEE 001#904=;
       |SI FSalida ! 0;
           |SI #904#1 = "    ";
               |GRABA 020#904n;
               |VETE LaLecturaSecc;
           |FINSI;
           eswLect = 1;
           |CONFI  "    SNo Existe Seccion, Desea dar de Alta ";
           |SI FSalida = 0;
               |SUB_EJECUTA_NP ":contagen/canoaux2.tab";
               eswLect = 0;
               |VETE LaLecturaSecc;
           |FINSI;
       |FINSI;
       eaArea    = #904#0;
       eaSeccion = #904#1;
       eaNomSecc = #904#2;
       |CIERRA #904;
   |FINSI;
   |DESCARGA_DEF #904;
|FPRC;
