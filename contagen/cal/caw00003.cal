|FICHEROS;
   caw00003 #0;
   camaniva #6;
   caivaasi #200;

   canempre #30;
   caselem1 #998;
|FIN;

|VARIABLES;
     aAlfa     = "";
     aPathFich = "";
     aAlfa1    = "";
|FIN;

|INCLUYE dscont_i;

|PROCESO CalPeriodo;
   |PINTA 2210, "Registro: ";
   |PINTA 2220, #6#0;
   |PINTA 2223, #6#1;

   aAlfa1 = #6#4; |QBF aAlfa1;
   |SI #200#168 = "A"; aAlfa1 = #6#8; |FINSI;
   aAlfa1 = aAlfa1 % 0402;
   #6#5   = aAlfa1;
   |SI enEjercicio [ 2009;
      |SI #200#46 = "T";
          |SI aAlfa1 ] "01"; |Y aAlfa1 [ "03"; #6#5 = 1; |FINSI;
          |SI aAlfa1 ] "04"; |Y aAlfa1 [ "06"; #6#5 = 2; |FINSI;
          |SI aAlfa1 ] "07"; |Y aAlfa1 [ "09"; #6#5 = 3; |FINSI;
          |SI aAlfa1 ] "10"; |Y aAlfa1 [ "12"; #6#5 = 4; |FINSI;
      |SINO;
          |SI #200#46 = "A"; #6#5 = 0; |FINSI;
      |FINSI;
   |FINSI;

   |GRABA 020#6a;
   |LIBERA #6;
|FPRC;

|DEFBUCLE camaniva;
     #6#1;
     ;
     #0#1, 0000000000;
     #0#2, 9999999999;
     be;
     NULL, CalPeriodo;
|FIN;

|PROCESO HazTodo;
     |ABRE #200;
     |DDEFECTO #200;
     |LEE 101#200p;
     |SI FSalida ! 0;
         |DDEFECTO #200;
     |FINSI;
     |CIERRA #200;

     |PINTA 2110,"Empresa : ";
     |PINTA 2120, #30#2;
     |PINTA 2126, #30#1;
     |BUCLE camaniva;
|FPRC;


|PROCESO Tipo3;  |TIPO 3;
       |SI #48#27= "S";
           |HAZ MultiEmpresa;
       |SINO;
           |DFICE dirfich0; |QBF dirfich0;
           |HAZ HazTodo;
      |FINSI;
|FPRC;

|PROCESO MultiEmp1;
   cod1 = #caselem1#1;
   cod2 = #caselem1#2;
   emEmp = 1;  || Sin mensaje
   |HAZ leelo;
   |SI swerror ! 0;  |ACABA;   |FINSI;

   dirfich0 = #caselem1#3;
   |QBF dirfich0;
   |PATH_DAT #6 dirfich0;
   |PATH_DAT #200 dirfich0;
   |HAZ HazTodo;
|FPRC;

|DEFBUCLE MultiEmp0;
 #caselem1#1;
 ;
 001;
 999;
 ;
 NULL,MultiEmp1;
|FIN;

|PROCESO MultiEmpresa;
  |SUB_EJECUTA "caselemp";
  |NOME_DAT #998 eaFichsel;
  |BUCLE MultiEmp0;
  |DELINDEX #998;
|FPRC;
