|FICHEROS;
   carecupe #0;
   caconimp #8;

   caselem1 #998;
   carecufe #999;
|FIN;

|VARIABLES;
   &entrada = 1;
   &sw_conase4 = 0;
   &balance    = 0;

   Comodin  = "";
   Comodin1 = "";

   aAlfa    = "";

   Empresa = 0;
   Periodo = 0;

   aParam  = "";
|FIN;

|INCLUYE dscont_i;
|INCLUYE recupe_i;
|INCLUYE defec1_i;

|PROCESO conase4; |TIPO 7;
   |SI sw_conase4 = 1;
      #0#0 = "S";
      |PTEC 802;
      |PTEC 802;
   |FINSI;
|FPRC;

|PROCESO HazTodo;
      |HAZ eLeeParametro;
      |NOPARA;
      conforme = #0#0;
      fini = "01.01.0000";
      ffin = "31.12.9999";
      cini = 1;
      cfin = 999;
      |HAZ recuperacion;
      |SIPARA;

      |SI swAlgo = 1;
            |ABRE #8;
            #8#0 = 1;
            |DDEFECTO #8;
            |LEE 101#8=;
            |SI FSalida ! 0;
               |DDEFECTO #8;
               #caconimp#3 = "S";
               |GRABA 020#8b;
            |SINO;
               #caconimp#3 = "S";
               |GRABA 020#8a;
            |FINSI;
            |LIBERA #8;
            |CIERRA #8;
      |FINSI;
|FPRC;

|PROCESO procal; |TIPO 3;
   |DELINDEX #999;        || anula cualquier recalculo anterior por fechas o

   |SI #48#27 = "S"; |Y sw_conase4 = 0;
      |HAZ MultiEmpresa;
   |SINO;
      |SI aParam ! "apertura"; |DFICE dirfich0; |FINSI;
      |HAZ HazTodo;
   |FINSI;
|FPRC;

|PROCESO MultiEmp1;
   cod1 = #caselem1#1;
   cod2 = #caselem1#2;
   emEmp = 1;  || Sin mensaje
   |HAZ leelo;
   |SI swerror ! 0;  |ACABA;   |FINSI;

   dirfich0 = #caselem1#3;
   |QBF dirfich0;

   |PATH_DAT #1 dirfich0;
   |PATH_DAT #3 dirfich0;
   |PATH_DAT #5 dirfich0;
   |PATH_DAT #8 dirfich0;
   |PATH_DAT #10 dirfich0;
   |PATH_DAT #21 dirfich0;
   |PATH_DAT #22 dirfich0;
   |PATH_DAT #23 dirfich0;
   |PATH_DAT #24 dirfich0;
   |PATH_DAT #25 dirfich0;
   |PATH_DAT #26 dirfich0;

   |HAZ HazTodo;
|FPRC;

|DEFBUCLE MultiEmp0;
 #caselem1#1;
 ;
 001;
 999;
 ;
 NULL,MultiEmp1;
|FIN;

|PROCESO MultiEmpresa;
  |SUB_EJECUTA "caselemp";
  |NOME_DAT #998 eaFichsel;
  |BUCLE MultiEmp0;
  |DELINDEX #998;
|FPRC;

|PROGRAMA;
 aParam = PARAMETRO; |QBF aParam;

 |SI aParam = "CHEQUEO";
     |HAZ inicial;

     aParam = "";
     |PINPA #0#0;
     #carecupe#0 = "S";

     |HAZ procal;
     |ACABA;
 |FINSI;

 |SI aParam = ""; |O aParam ! "F";
     |MANTE #0;
 |SINO;
     |CLS;
     |HAZ inicio;
     |PINPA #0#0;
     #0#0 = "S";
     sw_conase4 = 1;
     |PINDA #0#0;
     |HAZ procal;
 |FINSI;
|FPRO;
