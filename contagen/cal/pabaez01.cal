|FICHEROS;
   pabaez01 #0;

   cacuenta #10;
   caenlace #100;

   Concepto@ #1000;
|FIN;

|VARIABLES;
   nHandle = 0;

   aAlfa  = "";
   aAlfa1 = "";
   aSepar = "";
   aCR    = "";
   aLF    = "";
   aComillas = "";
|FIN;

|PROCESO LeeDato;
  aAlfa = ""; aAlfa1 = "";
  |PARA; |SI aAlfa ! aSepar; |O aAlfa ! aCR; |HACIENDO;
     |XLEE nHandle, 1, aAlfa;
     |SI FSalida = 0; aAlfa1 = "-1"; |ACABA; |FINSI;
     |SI aAlfa ! aSepar;
        |SI aAlfa = aCR;
           |XLEE nHandle, 1, aAlfa;  || Leo el LF
           |SAL;
        |SINO;
           |SI aAlfa ! aComillas;
              aAlfa1 = aAlfa1 + aAlfa;
           |FINSI;
        |FINSI;
     |SINO;
        |SAL;
     |FINSI;
  |SIGUE;
|FPRC;

|PROCESO Conceptos;


   |DBASS aAlfa; |QBF aAlfa;
   aAlfa = aAlfa + "modelos/def/dsmom030.mas";
   |CARGA_DEF aAlfa, Concepto@;
   |SI FSalida = 0;
      aAlfa = #pabaez01#0; |QBF aAlfa;
      |XABRE "CB", aAlfa, nHandle;
      |SI FSalida ] 0;
         |ABRE #Concepto@;
         |PARA; |SI aAlfa1 ! "-1"; |HACIENDO;
            |HAZ LeeDato; |HAZ LeeDato;
            |HAZ LeeDato; |HAZ LeeDato;
            |HAZ LeeDato; #Concepto@#0 = aAlfa1;
            |LEE 000#Concepto@.=;
            |SI FSalida ! 0;
               |DDEFECTO #Concepto@;
               #Concepto@#0 = aAlfa1;
               |HAZ LeeDato; #Concepto@#1 = aAlfa1;
            |FINSI;
            |GRABA 020#Concepto@.a;
            |HAZ LeeDato; |HAZ LeeDato;
         |SIGUE;
         |CIERRA #Concepto@;
      |FINSI;
      |DESCARGA_DEF #Concepto@;
   |FINSI;
|FPRC;

|PROCESO PlanContable;
   |ABRE #cacuenta;
   aAlfa = #pabaez01#1; |QBF aAlfa;
   |XABRE "CB", aAlfa, nHandle;
   |SI FSalida ] 0;
      |PARA; |SI aAlfa ! "-1"; |HACIENDO;
         |HAZ LeeDato; |HAZ LeeDato;
         |HAZ LeeDato; |HAZ LeeDato;
         |HAZ LeeDato; #cacuenta#0 = aAlfa1;
         |LEE 000#cacuenta.=;
         |SI FSalida ! 0;
            |DDEFECTO #cacuenta;
            #cacuenta#0 = aAlfa1;
            |HAZ LeeDato; #cacuenta#2 = aAlfa1;
            #cacuenta#3 = "N";
            #cacuenta#58 = "01.01.1900";
         |FINSI;
         |GRABA 020#cacuenta.a;
         |HAZ LeeDato;
      |SIGUE;
   |FINSI;

   aAlfa = #pabaez01#2; |QBF aAlfa;
   |XABRE "CB", aAlfa, nHandle;
   |SI FSalida ] 0;
      |PARA; |SI aAlfa ! "-1"; |HACIENDO;
         |HAZ LeeDato; |HAZ LeeDato;
         |HAZ LeeDato; |HAZ LeeDato;
         |HAZ LeeDato; #cacuenta#0 = aAlfa1;
         |LEE 000#cacuenta.=;
         |SI FSalida ! 0;
            |DDEFECTO #cacuenta;
            #cacuenta#0 = aAlfa1;
            |HAZ LeeDato; #cacuenta#1 = aAlfa1;
            #cacuenta#3 = "S";
            #cacuenta#58 = "01.01.1900";
         |FINSI;
         |GRABA 020#cacuenta.a;
         |HAZ LeeDato; |HAZ LeeDato;
         |HAZ LeeDato;
      |SIGUE;
   |FINSI;
   |CIERRA #cacuenta;
|FPRC;

|PROCESO Pase;
   |HAZ Conceptos;

   |HAZ PlanContable;
|FPRC;

|PROCESO ObtenFichero;
   |SI FSalida = 10;
      aAlfa = " " + #pabaez01#Campo#; |QBF aAlfa;
      |BROWSE aAlfa;
      |SI aAlfa ! "";
         #pabaez01#Campo# = aAlfa; |PINTA #pabaez01#Campo#;
      |FINSI;
      |ERROR;
   |FINSI;
|FPRC;

|PROGRAMA;
   |CLS;
   |CABEZA "Pase datos";
   |PINPA #0#0; |PINDA #0#0;
   |ENDATOS #1#0;
   |SI FSalida = 0;
      aCR = &13; aLF = &10; aComillas = &34;
      |HAZ Pase;
   |FINSI;
|FPRO;
