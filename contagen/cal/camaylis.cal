|FICHEROS;
   camaylis #0;
   camaylin #1;
   camaycab #2;
   cacuenta #3;
|FIN;

|VARIABLES;
   &entrada = 1;
   sw = 0;
   sw_print = 0;
   cuenta = "";
   fecalf = "";
   men1   = "    NO EXISTE EMPRESA";
   mensa1 = "    ERROR ESTA FECHA NO CORRESPONDE AL EJERCICIO";
   traba1 = "";
   varalf = "";
   &s_debe = 0;
   &s_haber = 0;
   &s_saldo = 0;
   &debe = 0;
   &haber = 0;
   informe = "camaylis";
|FIN;

|INCLUYE dscont_i;

|PROCESO cuenta; |TIPO 0;
     eaCuenta = #camaylis#Campo#;
     salidas  = FSalida;
     |HAZ FiltraPuntos;
     #camaylis#Campo# = eaCuenta;
     |PINTA #camaylis#Campo#;
|FPRC;

|PROCESO empieza; |TIPO 7;
   |ABRE #3;
   |LEE 040#3p;
   |SI FSalida = 0;
      #camaylis#0 = #cacuenta#0;
   |FINSI;
   |LEE 040#3u;
   |SI FSalida = 0;
      #camaylis#1 = #cacuenta#0;
   |FINSI;
   |CIERRA #3;
   |PINTA #camaylis#0;
   |PINTA #camaylis#1;

   #camaylis#2 = fec1; |PINTA #camaylis#2;
   #camaylis#3 = fec2; |PINTA #camaylis#3;
|FPRC;

|PROCESO fechad;
   |SI #camaylis#2 < fec1; |O #camaylis#2 > fec2;
      |MENAV mensa1;
      |ERROR;
   |FINSI;
|FPRC;

|PROCESO fechah;
   |SI #camaylis#3 < fec1; |O #camaylis#3 > fec2; |O #camaylis#3 < #camaylis#2;
      |MENAV mensa1;
      |ERROR;
   |FINSI;
|FPRC;


|| *************************************************************************
||                          MEOLLO
|| *************************************************************************

|PROCESO cabecera;
   |DDEFECTO #camaycab;
   #camaycab#0 = #camaylin#0;
   #camaycab#1 = #camaylin#1;
   #camaycab#2 = #camaylin#2;
   |LEE 040#camaycab.=;
|FPRC;

|PROCESO leecab;
   |DDEFECTO #cacuenta
   #cacuenta#0 = #camaylin#4;
   #cacuenta#1 = #camaylin#5;
   |LEE 040#cacuenta.=;
|FPRC;

|PROCESO borrar;
   s_debe = 0;
   s_haber = 0;
   s_saldo = 0;
|FPRC;

|PROCESO buclepan;
   |SI sw = 0;
       cuenta = #camaylin#4;
       sw = 1;
       |HAZ leecab;
   |FINSI;
   |SI cuenta ! #camaylin#4;
      |SI sw_print = 0; |PIEINF; |FINSI;
      |HAZ borrar;
      cuenta = #camaylin#4;
      |HAZ leecab;
   |FINSI;

   |SI #camaylin#1 ] #camaylis#2; |Y #camaylin#1 [ #camaylis#3;
      debe = 0;
      haber = 0;
      |SI #camaylin#8 = "D";
         debe = #camaylin#9;
      |SINO;
         haber = #camaylin#9;
      |FINSI;
      |HAZ cabecera;
      |PRINT;
      sw_print = 0;
   |SINO;
      |SI #camaylin#8 = "D";
         s_debe = s_debe  + #camaylin#9;
      |SINO;
         s_haber = s_haber + #camaylin#9;
      |FINSI;
      s_saldo = s_debe - s_haber;
      sw_print = 1;
   |FINSI;
|FPRC;

|DEFBUCLE camaylis0;
   #1#3;
   ;
   #0#0, 0, fec1, 000001;
   #0#1, 9, #0#3, 999999;
   be;
   NULL,buclepan;
|FIN;

|PROCESO impre;  |TIPO 3;

   |IMPRE 0;
   |SI FSalida ! 0;
       |MENAV "0000Error en Impresora. Proceso interrumpido";
       |ACABA;
   |FINSI;

   |INFOR informe;
   |SI FSalida ! 0;
       |MENAV "0000No existe informe. ";
       |FINIMP;
       |ACABA;
   |FINSI;

   sw = 0;
   sw_print = 0;

   |ABRE #camaycab;
   |ABRE #cacuenta;
   |BUCLE camaylis0;
   |CIERRA #cacuenta;
   |CIERRA #camaycab;

   |SI sw_print = 0;
       |PIEINF;
   |FINSI;
   |FININF;
   |FINIMP;
|FPRC;
