|FICHEROS;
     regisnif@;
|FIN;

|VARIABLES;
     aAbre               = "";
     aBase               = "";
     aMas                = "";

     nPI                 = 0;

     &eaCodNif           = "";
     &eaNomNif           = "";
     &eaPaiNif           = "";
|FIN;

|PROCESO LeeNif;
     eaNomNif = "";
     eaPaiNif = "";

     nPI = 1;
     |DBASS aBase;   |QBT aBase;
     aMas = aBase + "integral/def/dsam0103.mas";
     |XABRE "E", aMas, 0;
     |SI FSalida < 0;
         aMas = aBase + "basica/def/agim0003.mas";
         |XABRE "E", aMas, 0;
         |SI FSalida < 0;
             nPI  = 0;
             aMas = aBase + "agicli/def/eosclipr.mas";
             |XABRE "E", aMas, 0;
             |SI FSalida < 0;
                 aMas = "";
             |FINSI;
         |FINSI;
     |FINSI;

     |SI aMas = "";  |ACABA;  |FINSI;

     |CARGA_DEF aMas, regisnif@;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     |ABRE #regisnif@;
     #regisnif@#0 = eaCodNif;
     |LEE 040#regisnif@.=;
     |SI FSalida ! 0; |DDEFECTO #regisnif@;  |FINSI;
     |CIERRA #regisnif@;

     eaNomNif = #regisnif@#1;   |QBF eaNomNif;

     |SI nPI = 1;
         eaPaiNif = #regisnif@#12;  |QBF eaPaiNif;
     |FINSI;

     |SI nPI = 0;
         eaPaiNif = #regisnif@#14;  |QBF eaPaiNif;
     |FINSI;

     |DESCARGA_DEF #regisnif@;
|FPRC;
