|FICHEROS;
     reeoscnc;
     reeoscfg;

     eosconce@;
     eosconc6@;
     agicontr@;
|FIN;

|VARIABLES;
     Comodin  = "";
     Comodin1 = "";
     ComodNum = 0;
     Long     = 0;
     LongAlfa = "";
     FEstado  = 0;
|FIN;

|PROCESO Baja;
     #reeoscfg#0 = #reeoscnc#3;
     #reeoscfg#1 = 1;
|FPRC;

|PROCESO Alta;
     #reeoscfg#0 = #reeoscnc#3;
     #reeoscfg#1 = 99;
|FPRC;

|PROCESO T66;  |TIPO 66;
     |ABRE #reeoscfg;
     |CONSULTA_F_CLAVE #1#reeoscfg, Baja, Alta;
     |SI FSalida = 0;
         #reeoscnc#6 = #reeoscfg#1;
         #reeoscnc#7 = #reeoscfg#2;

         |PINTA #reeoscnc#6;
         |PINTA #reeoscnc#7;
     |FINSI;
     |CIERRA #reeoscfg;
|FPRC;

|PROCESO MiraLong;
     |SI FSalida = 10;
        |CONSULTA_CLAVE #1#eosconce@;
        |SI FSalida < 0; |ERROR; |ACABA; |FINSI;
        Comodin = ("----" + ("00" + #eosconce@#0) % -102);
        #reeoscnc#1 = Comodin;
        #reeoscnc#2 = #eosconce@#1;
        |PINTA #reeoscnc#1;
        |PINTA #reeoscnc#2;
        |ACABA;
     |FINSI;

     |SI FSalida = 11;
        |CONSULTA_CLAVE #1#eosconc6@;
        |SI FSalida < 0; |ERROR; |ACABA; |FINSI;
        #reeoscnc#1 = #eosconc6@#0;
        #reeoscnc#2 = #eosconce@#1;
        |PINTA #reeoscnc#1;
        |PINTA #reeoscnc#2;
        |ACABA;
     |FINSI;

     Comodin = #reeoscnc#1; Comodin = Comodin - "----";
     |QBF Comodin;
     LongAlfa = Comodin % 0;
     Long = LongAlfa;
     |SI Long [ 2;
        ComodNum = Comodin;
        #eosconce@#0 = ComodNum;
        |LEE 010#eosconce@.=;
        |SI FSalida ! 0;
           |MENAV "    Concepto inexistente";
           |ERROR;
           |ACABA;
        |FINSI;
        #reeoscnc#2 = #eosconce@#1;
        |PINTA #reeoscnc#2;
        Comodin = "----" + Comodin;
        #reeoscnc#1 = Comodin;
        |PINTA #reeoscnc#1;
     |SINO;
        #eosconc6@#0 = Comodin;
        |LEE 010#eosconc6@.=;
        |SI FSalida ! 0;
           |MENAV "    Concepto inexistente";
           |ERROR;
           |ACABA;
        |FINSI;
        #reeoscnc#2 = #eosconc6@#1;
        |PINTA #reeoscnc#2;
     |FINSI;
|FPRC;

|PROCESO inf1;
     #reeoscnc#0 = 001;
|FPRC;

|PROCESO sup1;
     #reeoscnc#0 = 999;
|FPRC;

|PROGRAMA;
   |CLS;
   |CABEZA "Codificacion conceptos";
   |PINPA #0#reeoscnc;
   |PINDA #0#reeoscnc;

   |DBASS Comodin;
   Comodin = Comodin + "agieos/def/";
   Comodin1 = Comodin + "eosconce.mas";  |CARGA_DEF Comodin1,eosconce@;
   |SI FSalida < 0;
       |MENAV "    Problemas al cargar el def [eosconce]";
       |ACABA;
   |FINSI;

   Comodin1 = Comodin + "eosconc6.mas";  |CARGA_DEF Comodin1,eosconc6@;
   |SI FSalida < 0;
      |MENAV "    Problemas al cargar el def [eosconc6]";
      |DESCARGA_DEF #eosconce@;
      |ACABA;
   |FINSI;

   |DBASS Comodin; |QBF Comodin;
   Comodin1 = Comodin + "agicli/def/agicontr.mas";
   |CARGA_DEF Comodin1,agicontr@;
   |PATH_DAT #agicontr@#Comodin#;

   |ABRE #agicontr@;
   |LEE 010#agicontr@.p;
   |SI FSalida = 0;
      Comodin = #agicontr@#3;
      |QBF Comodin;
   |SINO;
      |DBASS Comodin; |QBF Comodin;
      Comodin = Comodin + "agieos/fich/";
   |FINSI;
   |CIERRA #agicontr@;

   |PATH_DAT #eosconce@#Comodin#;
   |PATH_DAT #eosconc6@#Comodin#;

   |ABRE #eosconce@;
   |ABRE #eosconc6@;

   |ENTLINEAL #1#reeoscnc,- 1, 1, 22, 1, inf1, sup1;

   |CIERRA #eosconc6@;
   |CIERRA #eosconce@;

   |DESCARGA_DEF #agicontr@;
   |DESCARGA_DEF #eosconc6@;
   |DESCARGA_DEF #eosconce@;
|FPRO;
