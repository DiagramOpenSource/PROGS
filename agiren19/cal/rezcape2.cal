|FICHEROS;
     rem00016;
     rem00017;
     rem00018;
     rem00022;
     rem00023;
     rem00024;
     rem00043;
     rem00050;
     rem00051;
     rem00055;
     rem00060;
     rem01005;

     rem00016@ #16;
     rem00017@ #17;
     rem00018@ #18;
     rem00022@;
     rem00023@;
     rem00024@;
     rem00043@;
     rem00050@;
     rem00051@;
     rem00055@;
     rem01005@;
|FIN;

|INCLUYE capeac99;

|| REM01005

|PROCESO PasaM01005;
     aDef = eaCampo0 + "/def/rem01005.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem01005@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem01005 A¤o 2018 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #rem01005@#eaPathRen2018#;

     |ABRE #rem01005@;
     #rem01005@#0 = enEmpresa;
     |LEE 000#rem01005@.=;
     |SI FSalida ! 0;
         |CIERRA #rem01005@;
         |DESCARGA_DEF #rem01005@;

         |ACABA;
     |FINSI;
     |CIERRA #rem01005@;

     |ABRE #rem01005;
     #rem01005#0 = enEmpresa;
     |LEE 101#rem01005.=;
     |SI FSalida ! 0;
         |DDEFECTO #rem01005;
         #rem01005#0 = enEmpresa;
         |GRABA 020#rem01005.b;
     |FINSI;

     #rem01005#1 = "ANOTACIONES PASADAS DESDE LA RENTA 2018";
     |PARA nCampo1 = 1;  |SI nCampo1 [ 99;  |HACIENDO nCampo1 = nCampo1 + 1;
           nCampo2        = nCampo1 + 1;
           #rem01005#nCampo2# = #rem01005@#nCampo1#;
     |SIGUE;

     |GRABA 020#rem01005.a;
     |LIBERA #rem01005;

     |CIERRA #rem01005;

     |DESCARGA_DEF #rem01005@;
|FPRC;

|| REM00016

|PROCESO Pasa016;
     #rem00016@#5 = (N\ #rem00016@#2 - #rem00016@#3 - #rem00016@#4);

     |SI #rem00016@#5 [  0;
         |ACABA;
     |FINSI;

     #rem00016#0 = #rem00016@#0;
     #rem00016#1 = #rem00016@#1;
     |LEE 101#rem00016.=;
     |SI FSalida = 0;
         |BORRA 020#rem00016.a;
         |LIBERA #rem00016;
     |FINSI;

     |DDEFECTO #rem00016;
     #rem00016#0 = #rem00016@#0;
     #rem00016#1 = #rem00016@#1;
     #rem00016#2 = 400000;
     #rem00016#3 = (N\ #rem00016@#3 + #rem00016@#4);
     #rem00016#4 = 0;
     #rem00016#5 = #rem00016#2 - #rem00016#3 - #rem00016#4;

     |GRABA 020#rem00016.n;
     |LIBERA #rem00016;
|FPRC;

|DEFBUCLE rem00016_2018;
     #rem00016@#1002;
     ;
     enEmpresa, "";
     enEmpresa, "zzzzzzzzzz";
     ;
     NULL, Pasa016;
|FIN;

|PROCESO PasaM00016;
     aDef = eaCampo0 + "/def/rem00016.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00016@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00016 A¤o 2018 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #rem00016@#eaPathRen2018#;

     |ABRE #rem00016;
     |BUCLE rem00016_2018;
     |CIERRA #rem00016;

     |DESCARGA_DEF #rem00016@;
|FPRC;

|| REM00017

|PROCESO Pasa017;
     #rem00017@#5 = (N\ #rem00017@#2 - #rem00017@#3 - #rem00017@#4);

     |SI #rem00017@#5 [  0;
         |ACABA;
     |FINSI;

     #rem00017#0 = #rem00017@#0;
     #rem00017#1 = #rem00017@#1;
     |LEE 101#rem00017.=;
     |SI FSalida = 0;
         |BORRA 020#rem00017.a;
         |LIBERA #rem00017;
     |FINSI;

     |DDEFECTO #rem00017;
     #rem00017#0 = #rem00017@#0;
     #rem00017#1 = #rem00017@#1;
     #rem00017#2 = 400000;
     #rem00017#3 = (N\ #rem00017@#3 + #rem00017@#4);
     #rem00017#4 = 0;
     #rem00017#5 = #rem00017#2 - #rem00017#3 - #rem00017#4;

     |GRABA 020#rem00017.n;
     |LIBERA #rem00017;
|FPRC;

|DEFBUCLE rem00017_2018;
     #rem00017@#1002;
     ;
     enEmpresa, "";
     enEmpresa, "zzzzzzzzzz";
     ;
     NULL, Pasa017;
|FIN;

|PROCESO PasaM00017;
     aDef = eaCampo0 + "/def/rem00017.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00017@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00017 A¤o 2018 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #rem00017@#eaPathRen2018#;

     |ABRE #rem00017;
     |BUCLE rem00017_2018;
     |CIERRA #rem00017;

     |DESCARGA_DEF #rem00017@;
|FPRC;

|| REM00018

|PROCESO Pasa018;
     #rem00018@#5 = (N\ #rem00018@#2 - #rem00018@#3 - #rem00018@#4);

     |SI #rem00018@#5 [  0;
         |ACABA;
     |FINSI;

     #rem00018#0 = #rem00018@#0;
     #rem00018#1 = #rem00018@#1;
     |LEE 101#rem00018.=;
     |SI FSalida = 0;
         |BORRA 020#rem00018.a;
         |LIBERA #rem00018;
     |FINSI;

     |DDEFECTO #rem00018;
     #rem00018#0 = #rem00018@#0;
     #rem00018#1 = #rem00018@#1;
     #rem00018#2 = 240000;
     #rem00018#3 = (N\ #rem00018@#3 + #rem00018@#4);
     #rem00018#4 = 0;
     #rem00018#5 = #rem00018#2 - #rem00018#3 - #rem00018#4;

     |GRABA 020#rem00018.n;
     |LIBERA #rem00018;
|FPRC;

|DEFBUCLE rem00018_2018;
     #rem00018@#1002;
     ;
     enEmpresa, "";
     enEmpresa, "zzzzzzzzzz";
     ;
     NULL, Pasa018;
|FIN;

|PROCESO PasaM00018;
     aDef = eaCampo0 + "/def/rem00018.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00018@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00018 A¤o 2018 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #rem00018@#eaPathRen2018#;

     |ABRE #rem00018;
     |BUCLE rem00018_2018;
     |CIERRA #rem00018;

     |DESCARGA_DEF #rem00018@;
|FPRC;


|| REM00055 y REM00060

|PROCESO rem00060;
     |BORRA 020#rem00060.a;
     |LIBERA #rem00060;
|FPRC;

|DEFBUCLE rem00060;
     #rem00060#1;
     ;
     nEmpresa, nLinea, 01;
     nEmpresa, nLinea, 99;
     be;
     NULL, rem00060;
|FIN;

|PROCESO Pasa055;
     nEmpresa = #rem00055@#0;
     nLinea   = #rem00055@#1;
     |BUCLE rem00060;

     #rem00055#0 = #rem00055@#0;
     #rem00055#1 = #rem00055@#1;
     |LEE 101#rem00055.=;
     |SI FSalida = 0;
         |BORRA 020#rem00055.a;
         |LIBERA #rem00055;
     |FINSI;

     |DDEFECTO #rem00055;
     #rem00055#0   = #rem00055@#0;
     #rem00055#1   = #rem00055@#1;
     #rem00055#2   = #rem00055@#2;
     #rem00055#3   = "X";

     |SI eaCampo37 = "N";
         #rem00055#3 = #rem00055@#3;
     |FINSI;

     #rem00055#4   = 0;
     #rem00055#5   = #rem00055@#5;
     #rem00055#6   = #rem00055@#6;
     #rem00055#7   = #rem00055@#7;
     #rem00055#8   = #rem00055@#8;
     #rem00055#9   = #rem00055@#9;
     #rem00055#10  = #rem00055@#10;
     #rem00055#11  = #rem00055@#11;
     #rem00055#13  = #rem00055@#13;
     #rem00055#14  = #rem00055@#14;
     #rem00055#16  = #rem00055@#16;
     #rem00055#17  = #rem00055@#17;

     |SI eaCampo33 = "S";
         #rem00055#15  = #rem00055@#15;
     |FINSI;

                              #rem00055#27 = "";
     |SI #rem00055#3  = "X";  #rem00055#27 = eaRojo;        |FINSI;

     |GRABA 020#rem00055.n;
     |LIBERA #rem00055;

     eaPrograma = "rem00055";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|DEFBUCLE rem00055_2018;
     #rem00055@#1002;
     ;
     enEmpresa, 01;
     enEmpresa, 99;
     ;
     NULL, Pasa055;
|FIN;

|PROCESO PasaM00055;
     aDef = eaCampo0 + "/def/rem00055.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00055@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00055 A¤o 2018 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #rem00055@#eaPathRen2018#;

     |ABRE #rem00055;
     |BUCLE rem00055_2018;
     |CIERRA #rem00055;

     |DESCARGA_DEF #rem00055@;
|FPRC;

|| REM00051

|PROCESO Pasa051;
     #rem00051#0 = #rem00051@#0;
     #rem00051#1 = #rem00051@#1;
     |LEE 101#rem00051.=;
     |SI FSalida = 0;
         |BORRA 020#rem00051.a;
         |LIBERA #rem00051;
     |FINSI;

     |DDEFECTO #rem00051;
     #rem00051#0   = #rem00051@#0;
     #rem00051#1   = #rem00051@#1;
     #rem00051#2   = #rem00051@#2;
     #rem00051#3   = "X";
     |SI eaCampo37 = "N";  #rem00051#3 = #rem00051@#3;  |FINSI;
     #rem00051#4   = 0;
     #rem00051#5   = #rem00051@#5;
     #rem00051#6   = #rem00051@#6;
     #rem00051#7   = #rem00051@#7;
     #rem00051#8   = #rem00051@#8;
     #rem00051#9   = #rem00051@#9;
     #rem00051#10  = #rem00051@#10;
     #rem00051#11  = #rem00051@#11;
     #rem00051#13  = #rem00051@#13;
     #rem00051#14  = #rem00051@#14;
     #rem00051#16  = #rem00051@#16;
     #rem00051#17  = #rem00051@#17;
     #rem00051#18  = #rem00051@#18;
     #rem00051#19  = #rem00051@#19;
     #rem00051#20  = #rem00051@#20;
     |SI #rem00051#20 > 0;  #rem00051#20 = (N\ #rem00051#20 + 1);  |FINSI;

     |SI eaCampo33 = "S";
         #rem00051#15  = #rem00051@#15;
     |FINSI;

                              #rem00051#30 = "";
     |SI #rem00051#3  = "X";  #rem00051#30 = eaRojo;  |FINSI;

     |GRABA 020#rem00051.n;
     |LIBERA #rem00051;

     eaPrograma = "rem00051";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|DEFBUCLE rem00051_2018;
     #rem00051@#1002;
     ;
     enEmpresa, 01;
     enEmpresa, 99;
     ;
     NULL, Pasa051;
|FIN;

|PROCESO PasaM00051;
     aDef = eaCampo0 + "/def/rem00051.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00051@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00051 A¤o 2018 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #rem00051@#eaPathRen2018#;

     |ABRE #rem00051;
     |BUCLE rem00051_2018;
     |CIERRA #rem00051;

     |DESCARGA_DEF #rem00051@;
|FPRC;

|| REM00024 y REM00050

|PROCESO Pasa050;
     #rem00050#0 = #rem00050@#0;
     #rem00050#1 = #rem00050@#1;
     #rem00050#2 = #rem00050@#2;
     |LEE 101#rem00050.=;
     |SI FSalida = 0;
         |BORRA 020#rem00050.a;
         |LIBERA #rem00050;
     |FINSI;

     |DDEFECTO #rem00050;
     #rem00050#0   = #rem00050@#0;
     #rem00050#1   = #rem00050@#1;
     #rem00050#2   = #rem00050@#2;
     #rem00050#3   = #rem00050@#3;
     #rem00050#4   = #rem00050@#4;
     #rem00050#5   = #rem00050@#5;
     #rem00050#6   = #rem00050@#6;
     #rem00050#7   = #rem00050@#7;
     #rem00050#9   = #rem00050@#9;

     |GRABA 020#rem00050.n;
     |LIBERA #rem00050;
|FPRC;

|DEFBUCLE rem00050_2018;
     #rem00050@#1003;
     ;
     #rem00024@#0, #rem00024@#1, 1900;
     #rem00024@#0, #rem00024@#1, 2999;
     ;
     NULL, Pasa050;
|FIN;

|PROCESO Pasa024;
     #rem00024#0 = #rem00024@#0;
     #rem00024#1 = #rem00024@#1;
     |LEE 101#rem00024.=;
     |SI FSalida = 0;
         |BORRA 020#rem00024.a;
         |LIBERA #rem00024;
     |FINSI;

     |DDEFECTO #rem00024;
     #rem00024#0   = #rem00024@#0;
     #rem00024#1   = #rem00024@#1;
     #rem00024#2   = #rem00024@#2;
     #rem00024#3   = "X";
     |SI eaCampo37 = "N";
         #rem00024#3 = #rem00024@#3;
     |FINSI;

     #rem00024#4   = 0;
     #rem00024#5   = #rem00024@#5;
     #rem00024#6   = #rem00024@#6;
     #rem00024#7   = #rem00024@#7;
     #rem00024#8   = #rem00024@#8;
     #rem00024#9   = #rem00024@#9;
     #rem00024#10  = #rem00024@#10;
     #rem00024#11  = #rem00024@#11;
     #rem00024#12  = #rem00024@#12;
     #rem00024#13  = #rem00024@#13;
     #rem00024#14  = #rem00024@#14;
     #rem00024#15  = #rem00024@#15;
     |SI #rem00024#12 ! 0;
         #rem00024#12 = (N\ #rem00024#12 + 1);
     |FINSI;

     #rem00024#26 = #rem00024@#26;

     |SI #rem00024@#27 ! 0;
         #rem00024#27 = (N\ #rem00024@#27 + 1);
     |FINSI;

     |SI eaCampo33 = "S";
         #rem00024#25  = #rem00024@#25;
     |FINSI;

                              #rem00024#28 = "";
     |SI #rem00024#3  = "X";  #rem00024#28 = eaRojo;  |FINSI;

     |GRABA 020#rem00024.n;
     |LIBERA #rem00024;

     eaPrograma = "rem00024";
     eaPunto    = "";
     |HAZ ProgramaActivo;

     |SI #rem00024#12 ] 1;  |Y #rem00024#12 [ 12;
         |BUCLE rem00050_2018;
     |FINSI;
|FPRC;

|DEFBUCLE rem00024_2018;
     #rem00024@#1002;
     ;
     enEmpresa, 01;
     enEmpresa, 99;
     ;
     NULL, Pasa024;
|FIN;

|PROCESO PasaM00024;
     aDef = eaCampo0 + "/def/rem00024.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00024@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00024 A¤o 2018 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef = eaCampo0 + "/def/rem00050.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00050@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00050 A¤o 2018 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #rem00024@#eaPathRen2018#;
     |PATH_DAT #rem00050@#eaPathRen2018#;

     |ABRE #rem00024;
     |ABRE #rem00050;
     |BUCLE rem00024_2018;
     |CIERRA #rem00024;
     |CIERRA #rem00050;

     |DESCARGA_DEF #rem00050@;
     |DESCARGA_DEF #rem00024@;
|FPRC;

|| REM00023

|PROCESO Pasa023;
     #rem00023#0 = #rem00023@#0;
     #rem00023#1 = #rem00023@#1;
     |LEE 101#rem00023.=;
     |SI FSalida = 0;
         |BORRA 020#rem00023.a;
         |LIBERA #rem00023;
     |FINSI;

     |DDEFECTO #rem00023;
     #rem00023#0   = #rem00023@#0;
     #rem00023#1   = #rem00023@#1;
     #rem00023#2   = #rem00023@#2;
     #rem00023#3   = "X";
     |SI eaCampo37 = "N";  #rem00023#3 = #rem00023@#3;  |FINSI;
     #rem00023#4   = 0;
     #rem00023#5   = #rem00023@#5;
     #rem00023#6   = #rem00023@#6;
     #rem00023#7   = #rem00023@#7;
     #rem00023#8   = #rem00023@#8;
     #rem00023#9   = #rem00023@#9;
     #rem00023#10  = #rem00023@#10;
     #rem00023#11  = #rem00023@#11;
     #rem00023#13  = #rem00023@#13;
     #rem00023#14  = #rem00023@#14;
     #rem00023#16  = #rem00023@#16;
     #rem00023#17  = #rem00023@#17;
     #rem00023#18  = #rem00023@#18;
     #rem00023#19  = #rem00023@#19;
     #rem00023#24  = #rem00023@#24;
     #rem00023#33  = #rem00023@#33;
     #rem00023#38  = #rem00023@#38;

     |SI eaCampo33 = "S";
         #rem00023#15  = #rem00023@#15;
     |FINSI;

                              #rem00023#37 = "";
     |SI #rem00023#3  = "X";  #rem00023#37 = eaRojo;        |FINSI;

     |GRABA 020#rem00023.n;
     |LIBERA #rem00023;

     eaPrograma = "rem00023";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|DEFBUCLE rem00023_2018;
     #rem00023@#1002;
     ;
     enEmpresa, 01;
     enEmpresa, 99;
     ;
     NULL, Pasa023;
|FIN;

|PROCESO PasaM00023;
     aDef = eaCampo0 + "/def/rem00023.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00023@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00023 A¤o 2018 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #rem00023@#eaPathRen2018#;

     |ABRE #rem00023;
     |BUCLE rem00023_2018;
     |CIERRA #rem00023;

     |DESCARGA_DEF #rem00023@;
|FPRC;

|| REM00022

|PROCESO Pasa022;
     #rem00022#0 = #rem00022@#0;
     #rem00022#1 = #rem00022@#1;
     |LEE 101#rem00022.=;
     |SI FSalida = 0;
         |BORRA 020#rem00022.a;
         |LIBERA #rem00022;
     |FINSI;

     |DDEFECTO #rem00022;
     #rem00022#0   = #rem00022@#0;
     #rem00022#1   = #rem00022@#1;
     #rem00022#2   = #rem00022@#2;
     #rem00022#3   = "X";
     |SI eaCampo37 = "N";  #rem00022#3 = #rem00022@#3;  |FINSI;
     #rem00022#4   = 0;
     #rem00022#5   = #rem00022@#5;
     #rem00022#6   = #rem00022@#6;
     #rem00022#7   = #rem00022@#7;
     #rem00022#8   = #rem00022@#8;
     #rem00022#9   = #rem00022@#9;
     #rem00022#10  = #rem00022@#10;
     #rem00022#11  = #rem00022@#11;
     #rem00022#13  = #rem00022@#13;
     #rem00022#14  = #rem00022@#14;
     #rem00022#16  = #rem00022@#16;
     #rem00022#17  = #rem00022@#17;
     #rem00022#18  = #rem00022@#18;
     #rem00022#25  = 0;
     #rem00022#26  = 0;
     #rem00022#29  = #rem00022@#29;

     |SI eaCampo33 = "S";
         #rem00022#15  = #rem00022@#15;
     |FINSI;

                              #rem00022#30 = "";
     |SI #rem00022#3  = "X";  #rem00022#30 = eaRojo;        |FINSI;

     |GRABA 020#rem00022.n;
     |LIBERA #rem00022;

     eaPrograma = "rem00022";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|DEFBUCLE rem00022_2018;
     #rem00022@#1002;
     ;
     enEmpresa, 01;
     enEmpresa, 99;
     ;
     NULL, Pasa022;
|FIN;

|PROCESO PasaM00022;
     aDef = eaCampo0 + "/def/rem00022.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00022@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00022 A¤o 2018 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #rem00022@#eaPathRen2018#;

     |ABRE #rem00022;
     |BUCLE rem00022_2018;
     |CIERRA #rem00022;

     |DESCARGA_DEF #rem00022@;
|FPRC;

|| REM00043

|PROCESO Pasa043C;
     |SI #rem00043@#4 = "V";  |ACABA;  |FINSI;

     #rem00043#0 = #rem00043@#0;
     #rem00043#1 = #rem00043@#1;
     #rem00043#2 = #rem00043@#2;
     #rem00043#3 = #rem00043@#3;
     |LEE 101#rem00043.=;
     |SI FSalida = 0;
         |BORRA 020#rem00043.a;
         |LIBERA #rem00043;
     |FINSI;

     |DDEFECTO #rem00043;
     #rem00043#0   = #rem00043@#0;
     #rem00043#1   = #rem00043@#1;
     #rem00043#2   = #rem00043@#2;
     #rem00043#3   = #rem00043@#3;
     #rem00043#4   = #rem00043@#4;
     #rem00043#5   = #rem00043@#5;
     #rem00043#6   = #rem00043@#6;
     #rem00043#7   = #rem00043@#7;
     #rem00043#8   = #rem00043@#8;
     #rem00043#9   = #rem00043@#9;
     #rem00043#10  = #rem00043@#10;
     #rem00043#11  = #rem00043@#11;
     #rem00043#12  = #rem00043@#12;
     #rem00043#13  = #rem00043@#13;
     #rem00043#14  = #rem00043@#14;
     |GRABA 020#rem00043.n;
     |LIBERA #rem00043;
|FPRC;

|DEFBUCLE rem00043C_2018;
     #rem00043@#1004;
     ;
     enEmpresa, 01, "01.01.0000", 01;
     enEmpresa, 99, "31.12.2999", 99;
     ;
     NULL, Pasa043C;
|FIN;

|PROCESO RegrabaCompra;
     |SI nAcciones = 0;  |ACABA;  |FINSI;

     |SI #rem00043@#6 = #rem00043#6;  |Y #rem00043@#7 = #rem00043#7;
         |SI nAcciones = #rem00043#5;
             |BORRA 020#rem00043.a;
             nAcciones = 0;
             |ACABA;
         |FINSI;

         |SI nAcciones < #rem00043#5;
             #rem00043#5 = (N\ #rem00043#5 - nAcciones);
             #rem00043#8 = (N\ #rem00043#5 * #rem00043#7);
             |GRABA 020#rem00043.a;
             nAcciones = 0;
             |ACABA;
         |FINSI;

         |SI nAcciones > #rem00043#5;
             nAcciones = nAcciones - #rem00043#5;
             |BORRA 020#rem00043.a;
             |ACABA;
         |FINSI;
     |FINSI;

     |LIBERA #rem00043;
|FPRC;

|DEFBUCLE rem00043_2018;
     #rem00043#1004;
     ;
     nEmpresa, nLinea, "01.01.0000", 01;
     nEmpresa, nLinea, "31.12.2999", 99;
     be;
     NULL, RegrabaCompra;
|FIN;

|PROCESO Pasa043V;
     |SI #rem00043@#4 = "C";  |ACABA;  |FINSI;

     nEmpresa  = #rem00043@#0;
     nLinea    = #rem00043@#1;
     nAcciones = #rem00043@#5;
     |BUCLE rem00043_2018;
|FPRC;

|DEFBUCLE rem00043V_2018;
     #rem00043@#1004;
     ;
     enEmpresa, 01, "01.01.0000", 01;
     enEmpresa, 99, "31.12.2999", 99;
     ;
     NULL, Pasa043V;
|FIN;

|PROCESO PasaM00043;
     aDef = eaCampo0 + "/def/rem00043.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00043@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00043 A¤o 2018 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #rem00043@#eaPathRen2018#;

     |ABRE #rem00043;
     |BUCLE rem00043C_2018;
     |CIERRA #rem00043;

     |BUCLE rem00043V_2018;

     |DESCARGA_DEF #rem00043@;
|FPRC;

|PROGRAMA;
     |SI eaCampo26 = "S";
         |HAZ PasaM00043;
         |HAZ PasaM00022;
         |HAZ PasaM00023;
         |HAZ PasaM00024;
         |HAZ PasaM00051;
         |HAZ PasaM00055;
         |HAZ PasaM00016;
         |HAZ PasaM00017;
         |HAZ PasaM00018;
     |FINSI;

     |SI eaCampo43 = "S";
         |HAZ PasaM01005;
     |FINSI;
|FPRO;
