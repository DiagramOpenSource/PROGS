|FICHEROS;
     rew99999 #999;

     rem00100@ #10;
     rem01018@ #18;
     rem01026@ #26;
     rem01033@ #33;
     rem01037@ #37;
     rem01047@ #47;

     &refere1@ #101;
     &refere2@ #102;
     &refere3@ #103;
|FIN;

|VARIABLES;
|FIN;

|INCLUYE i_varcal;

|PROCESO SacaTope;
     aDef    = eaPathDef + "rem01026.mas";
     |CARGA_DEF aDef, rem01026@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #rem01026@#"zdat1026"#;  |FINSI;

     |ABRE #rem01026@;
     #rem01026@#0 = #refere1@#0;
     #rem01026@#1 = #refere1@#1;
     #rem01026@#2 = #refere1@#2;
     |LEE 040#rem01026@.=;
     |SI FSalida ! 0;  |DDEFECTO #rem01026@;  |FINSI;
     |CIERRA #rem01026@;

     nValor = #rem01018@#15  + #rem01018@#7  + #rem01018@#8  + #rem01018@#11  + #rem01018@#13 + #rem01026@#15;
     |SI nValor [ 0;  nValor = 0;  |FINSI;

     |DESCARGA_DEF #rem01026@;
|FPRC;

|PROCESO CalculaI6;
     aDef    = eaPathDef + "rem01047.mas";
     |CARGA_DEF aDef, rem01047@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #rem01047@#"zdat1047"#;  |FINSI;

     aDef    = eaPathDef + "rem01018.mas";
     |CARGA_DEF aDef, rem01018@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |DESCARGA_DEF #rem01047@;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #rem01018@#"zdat1018"#;  |FINSI;

     aDef    = eaPathDef + "rem01033.mas";
     |CARGA_DEF aDef, rem01033@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |DESCARGA_DEF #rem01018@;
         |DESCARGA_DEF #rem01047@;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #rem01033@#"zdat1033"#;  |FINSI;

     |ABRE #rem01047@;
     |ABRE #rem01018@;
     |ABRE #rem01033@;

     #rem01033@#0 = #refere1@#0;
     #rem01033@#1 = #refere1@#1;
     #rem01033@#2 = #refere1@#2;
     |LEE 101#rem01033@.=;
     |SI FSalida ! 0;
         |DDEFECTO #rem01033@;
         #rem01033@#0 = #refere1@#0;
         #rem01033@#1 = #refere1@#1;
         #rem01033@#2 = #refere1@#2;
         |GRABA 020#rem01033@.b;
     |FINSI;

     |SI enConta = 1;
         #rem01047@#0 = #refere1@#0;
         #rem01047@#1 = #refere1@#1;
         #rem01047@#2 = #refere1@#2;
         #rem01047@#3 = 1;
         |LEE 101#rem01047@.=;
         |SI FSalida ! 0;
             |DDEFECTO #rem01047@;
             #rem01047@#0 = #refere1@#0;
             #rem01047@#1 = #refere1@#1;
             #rem01047@#2 = #refere1@#2;
             #rem01047@#3 = 1;
             |GRABA 020#rem01047@.b;
         |FINSI;

         #rem01018@#0 = #refere1@#0;
         #rem01018@#1 = #refere1@#1;
         #rem01018@#2 = #refere1@#2;
         |LEE 000#rem01018@.=;
         |SI FSalida ! 0;  |DDEFECTO #rem01018@;  |FINSI;

         |HAZ SacaTope;

         nValor = #rem01047@#5 + #rem01047@#6;
         nResto = 0;
         |SI nValor > 24250;
             nValor = 24250;
             nResta = 24250 - #rem01047@#6;
             |SI nResta < 0;  nResta = 0;  |FINSI;

             nResto = #rem01047@#5 - nResta;
         |FINSI;

         nValorTit20 = nValor;

         |GRABA 020#rem01047@.a;
         |LIBERA #rem01047@;

         #rem01033@#93 = nValor;
     |FINSI;

     |SI enConta = 2;
         #rem01047@#0 = #refere1@#0;
         #rem01047@#1 = #refere1@#1;
         #rem01047@#2 = #refere1@#2;
         #rem01047@#3 = 2;
         |LEE 101#rem01047@.=;
         |SI FSalida ! 0;
             |DDEFECTO #rem01047@;
             #rem01047@#0 = #refere1@#0;
             #rem01047@#1 = #refere1@#1;
             #rem01047@#2 = #refere1@#2;
             #rem01047@#3 = 2;
             |GRABA 020#rem01047@.b;
         |FINSI;

         #rem01018@#0 = #refere1@#0;
         #rem01018@#1 = #refere1@#1;
         #rem01018@#2 = #refere1@#2;
         |LEE 000#rem01018@.=;
         |SI FSalida ! 0;  |DDEFECTO #rem01018@;  |FINSI;

         |HAZ SacaTope;

         nValor = #rem01047@#5 + #rem01047@#6;
         nResto = 0;
         |SI nValor > 24250;
             nValor = 24250;
             nResta = 24250 - #rem01047@#6;
             |SI nResta < 0;  nResta = 0;  |FINSI;

             nResto = #rem01047@#5 - nResta;
         |FINSI;

         nValorCon20 = nValor;

         |GRABA 020#rem01047@.a;
         |LIBERA #rem01047@;

         #rem01033@#93 = nValor;
     |FINSI;

     |SI enConta = 7;
         #rem01033@#93 = nValorTit20 + nValorCon20;
     |FINSI;

     |SI enConta = 8;
         |SI eaMuerto = "T";
             #rem01033@#93 = nValorCon20;
         |SINO;
             #rem01033@#93 = nValorTit20;
         |FINSI;
     |FINSI;

     |GRABA 020#rem01033@.a;
     |LIBERA #rem01033@;

     enSwAcum  = 0;
     eaCasilla = "34-0490-LIQ19";  enImporte = #rem01033@#93;   |HAZ GrabaLineal;

     |CIERRA #rem01047@;
     |CIERRA #rem01018@;
     |CIERRA #rem01033@;

     |DESCARGA_DEF #rem01033@;
     |DESCARGA_DEF #rem01018@;
     |DESCARGA_DEF #rem01047@;
|FPRC;

|PROCESO QuitaConyuge;
     |SI #rem01037@#5 ] nResto;
         #rem01037@#5 = (N\ #rem01037@#5 - nResto);
         nResto = 0;
     |SINO;
         nResto = nResto - #rem01037@#5;
         #rem01037@#5  = (N\ 0);
     |FINSI;

     |SI nResto ] 0;
         |SI #rem01037@#10 ] nResto;
             #rem01037@#10 = (N\ #rem01037@#10 - nResto);
             nResto = 0;
         |SINO;
             nResto = nResto - #rem01037@#10;
             #rem01037@#10  = (N\ 0);
         |FINSI;
     |FINSI;

     |SI nResto ] 0;
         |SI #rem01037@#6 ] nResto;
             #rem01037@#6 = (N\ #rem01037@#6 - nResto);
             nResto = 0;
         |SINO;
             nResto = nResto - #rem01037@#6;
             #rem01037@#6  = 0;
         |FINSI;
     |FINSI;

     |SI nResto ] 0;
         |SI #rem01037@#12 ] nResto;
             #rem01037@#12 = (N\ #rem01037@#12 - nResto);
             nResto = 0;
         |SINO;
             nResto = nResto - #rem01037@#12;
             #rem01037@#12  = 0;
         |FINSI;
     |FINSI;

     #rem01037@#7  = (N\ #rem01037@#5 + #rem01037@#10 + #rem01037@#6 + #rem01037@#12);
|FPRC;

|PROCESO CalculaI;
     aDef    = eaPathDef + "rem01033.mas";
     |CARGA_DEF aDef, rem01033@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef + " " + FSalida;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #rem01033@#"zdat1033"#;  |FINSI;

     aDef    = eaPathDef + "rem01037.mas";
     |CARGA_DEF aDef, rem01037@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |DESCARGA_DEF #rem01033@;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #rem01037@#"zdat1037"#;  |FINSI;

     |ABRE #rem01033@;
     #rem01033@#0 = #refere1@#0;
     #rem01033@#1 = #refere1@#1;
     #rem01033@#2 = #refere1@#2;
     |LEE 040#rem01033@.=;
     |SI FSalida ! 0;  |DDEFECTO #rem01033@;  |FINSI;

     nLimiteGral = 0;
     eaCasilla = "27-0435-LIQ19"; |HAZ SacaImporte; nLimiteGral = nLimiteGral + enImporte;
     eaCasilla = "28-0460-LIQ19"; |HAZ SacaImporte; nLimiteGral = nLimiteGral + enImporte;

     |SI enConta = 1;
         nSuma = nRdtoCon16;
         nPdte = nSuma;
         |SI nSuma ! 0;  |Y nRdtoCon < 8000;
             |SI eaCalcP = "P";
                 |SI nRdtoTit ] 8000;
                     #rem01033@#85 = nPdte;
                     |SI #rem01033@#85 ] 2500;
                         #rem01033@#85 = (N\ 2500);
                     |FINSI;
                 |FINSI;
             |FINSI;

             |SI eaCalcP = "R";
                 #rem01033@#85 = (N\ nRdtoCon17);
                 |SI #rem01033@#85 ] 2500;
                     #rem01033@#85 = (N\ 2500);
                 |FINSI;
             |FINSI;

             |SI eaCalcP = "M";
                 #rem01033@#85 = (N\ enCalcP);
                 |SI #rem01033@#85 ] 2500;
                     #rem01033@#85 = (N\ 2500);
                 |FINSI;

                 |SI #rem01033@#85 ] nSuma;
                     #rem01033@#85 = (N\ nSuma);
                 |FINSI;
             |FINSI;

             |SI #rem01033@#85 > nLimiteGral;  #rem01033@#85 = nLimiteGral;  |FINSI;
             |SI #rem01033@#85 < 0;            #rem01033@#85 = 0;            |FINSI;

             nRdtoCon18 = #rem01033@#85;

             #rem01033@#0 = #refere1@#0;
             #rem01033@#1 = #refere1@#1;
             #rem01033@#2 = "TITULAR   ";
             |LEE 101#rem01033@.=;
             |SI FSalida = 0;
                 #rem01033@#85 = nRdtoCon18;
                 |GRABA 020#rem01033@.a;
                 |LIBERA #rem01033@;

                 enSwAcum  = 0;
                 eaCasilla = "30-0469-LIQ19";  enImporte = #rem01033@#85;   |HAZ GrabaLineal;
             |FINSI;

             |ABRE #rem01037@;
             #rem01037@#0 = #refere1@#0;
             #rem01037@#1 = #refere1@#1;
             #rem01037@#2 = "CONYUGE   ";
             #rem01037@#3 = 2;
             |LEE 101#rem01037@.=;
             |SI FSalida = 0;
                 nResto  = nRdtoCon18;
                 aAlfa   = #rem01037@#2;
                 |HAZ QuitaConyuge;

                 |GRABA 020#rem01037@.a;
                 |LIBERA #rem01037@;
             |FINSI;
             |CIERRA #rem01037@;
         |FINSI;
     |FINSI;

     |SI enConta = 2;
         nSuma        = nRdtoTit16;
         nPdte        = nSuma;
         |SI nSuma ! 0;  |Y nRdtoTit < 8000;
             |SI eaCalcP = "P";
                 |SI nRdtoCon ] 8000;
                     #rem01033@#85 = nPdte;
                     |SI #rem01033@#85 ] 2500;
                         #rem01033@#85 = (N\ 2500);
                     |FINSI;
                 |FINSI;
             |FINSI;

             |SI eaCalcP = "R";
                 #rem01033@#85 = (N\ nRdtoTit17);
                 |SI #rem01033@#85 ] 2500;
                     #rem01033@#85 = (N\ 2500);
                 |FINSI;
             |FINSI;

             |SI eaCalcP = "M";
                 #rem01033@#85 = (N\ enCalcP);
                 |SI #rem01033@#85 ] 2500;
                     #rem01033@#85 = (N\ 2500);
                 |FINSI;
                 |SI #rem01033@#85 ] nSuma;
                     #rem01033@#85 = (N\ nSuma);
                 |FINSI;
             |FINSI;

             |SI #rem01033@#85 > nLimiteGral;  #rem01033@#85 = nLimiteGral;  |FINSI;
             |SI #rem01033@#85 < 0;            #rem01033@#85 = 0;            |FINSI;

             nRdtoTit18 = #rem01033@#85;

             #rem01033@#0 = #refere1@#0;
             #rem01033@#1 = #refere1@#1;
             #rem01033@#2 = "CONYUGE   ";
             |LEE 101#rem01033@.=;
             |SI FSalida = 0;
                 #rem01033@#85 = nRdtoTit18;
                 |GRABA 020#rem01033@.a;
                 |LIBERA #rem01033@;

                 enSwAcum  = 0;
                 eaCasilla = "30-0469-LIQ19";  enImporte = #rem01033@#85;   |HAZ GrabaLineal;
             |FINSI;

             |ABRE #rem01037@;
             #rem01037@#0 = #refere1@#0;
             #rem01037@#1 = #refere1@#1;
             #rem01037@#2 = "TITULAR   ";
             #rem01037@#3 = 1;
             |LEE 101#rem01037@.=;
             |SI FSalida = 0;
                 nResto  = nRdtoTit18;
                 aAlfa   = #rem01037@#2;
                 |HAZ QuitaConyuge;

                 |GRABA 020#rem01037@.a;
                 |LIBERA #rem01037@;
             |FINSI;
             |CIERRA #rem01037@;
         |FINSI;
     |FINSI;

     |SI enConta = 7;
         #rem01033@#0 = #refere1@#0;
         #rem01033@#1 = #refere1@#1;
         #rem01033@#2 = #refere1@#2;
         |LEE 101#rem01033@.=;
         |SI FSalida ! 0;
             |DDEFECTO #rem01033@;
             #rem01033@#0 = #refere1@#0;
             #rem01033@#1 = #refere1@#1;
             #rem01033@#2 = #refere1@#2;
             |GRABA 020#rem01033@.b;
         |FINSI;

         |SI nLimiteGral > 0;  |O eaCalcP = "M";
             #rem01033@#85  = (N\ nRdtoTit18  + nRdtoCon18);
         |SINO;
             #rem01033@#85 = 0;
             nRdtoTit18 = 0;
             nRdtoCon18 = 0;
         |FINSI;

         nPdte = #rem01033@#85;
         |SI nPdte > nLimiteGral;  |Y eaCalcP ! "M";
             #rem01033@#85 = nLimiteGral;
             |SI #rem01033@#85 < 0;  #rem01033@#85 = 0;  |FINSI;

             nResto  = #rem01033@#85;
             |SI nResto > 0;
                 |SI nRdtoTit18 > nResto;
                     nRdtoTit18 = nResto;
                     nRdtoCon18 = 0;
                     nResto     = 0;
                 |SINO;
                     nResto = nResto - nRdtoTit18;
                 |FINSI;

                 |SI nResto > 0;
                     |SI nRdtoCon18 > nResto;
                         nRdtoCon18 = nResto;
                     |FINSI;
                 |FINSI;
             |SINO;
                 nRdtoTit18 = 0;
                 nRdtoCon18 = 0;
             |FINSI;
         |FINSI;

         enSwAcum  = 0;
         eaCasilla = "30-0469-LIQ19";  enImporte = #rem01033@#85;   |HAZ GrabaLineal;

         |GRABA 020#rem01033@.a;
         |LIBERA #rem01033@;

         |ABRE #rem01037@;
         #rem01037@#0 = #refere1@#0;
         #rem01037@#1 = #refere1@#1;
         #rem01037@#2 = #refere1@#2;
         #rem01037@#3 = 1;
         |LEE 101#rem01037@.=;
         |SI FSalida = 0;
             nResto  = nRdtoTit18;
             aAlfa   = "TITULAR";
             |HAZ QuitaConyuge;

             |GRABA 020#rem01037@.a;
             |LIBERA #rem01037@;
         |FINSI;

         #rem01037@#0 = #refere1@#0;
         #rem01037@#1 = #refere1@#1;
         #rem01037@#2 = #refere1@#2;
         #rem01037@#3 = 2;
         |LEE 101#rem01037@.=;
         |SI FSalida = 0;
             nResto  = nRdtoCon18;
             aAlfa   = "CONYUGE";
             |HAZ QuitaConyuge;

             |GRABA 020#rem01037@.a;
             |LIBERA #rem01037@;
         |FINSI;

         |CIERRA #rem01037@;
     |FINSI;

     |SI enConta = 8;  |Y nLimiteGral > 0;
         #rem01033@#0 = #refere1@#0;
         #rem01033@#1 = #refere1@#1;
         #rem01033@#2 = #refere1@#2;
         |LEE 101#rem01033@.=;
         |SI FSalida ! 0;
             |DDEFECTO #rem01033@;
             #rem01033@#0 = #refere1@#0;
             #rem01033@#1 = #refere1@#1;
             #rem01033@#2 = #refere1@#2;
             |GRABA 020#rem01033@.b;
         |FINSI;

         |SI nLimiteGral > 0;
             |SI eaMuerto = "T";
                 #rem01033@#85 = (N\ nRdtoCon18);
                 nRdtoTit18 = 0;
             |SINO;
                 #rem01033@#85 = (N\ nRdtoTit18);
                 nRdtoCon18 = 0;
             |FINSI;
         |SINO;
             #rem01033@#85      = 0;
             nRdtoTit18 = 0;
             nRdtoCon18 = 0;
         |FINSI;

         nPdte = #rem01033@#85;
         |SI nPdte > nLimiteGral;
             #rem01033@#85 = nLimiteGral;
             |SI #rem01033@#85 < 0;  #rem01033@#85 = 0;  |FINSI;

             nResto  = #rem01033@#85;
             |SI nResto > 0;
                 |SI nRdtoTit18 > nResto;
                     nRdtoTit18 = nResto;
                     nRdtoCon18 = 0;
                     nResto     = 0;
                 |SINO;
                     nResto = nResto - nRdtoTit18;
                 |FINSI;

                 |SI nResto > 0;
                     |SI nRdtoCon18 > nResto;
                         nRdtoCon18 = nResto;
                     |FINSI;
                 |FINSI;
             |SINO;
                 nRdtoTit18 = 0;
                 nRdtoCon18 = 0;
             |FINSI;
         |FINSI;

         enSwAcum  = 0;
         eaCasilla = "30-0469-LIQ19";  enImporte = #rem01033@#85;   |HAZ GrabaLineal;

         |GRABA 020#rem01033@.a;
         |LIBERA #rem01033@;

         |ABRE #rem01037@;

         #rem01037@#0 = #refere1@#0;
         #rem01037@#1 = #refere1@#1;
         #rem01037@#2 = #refere1@#2;
         #rem01037@#3 = 1;
         |LEE 101#rem01037@.=;
         |SI FSalida = 0;
             nResto  = nRdtoTit18;
             aAlfa   = "TITULAR";
             |HAZ QuitaConyuge;

             |GRABA 020#rem01037@.a;
             |LIBERA #rem01037@;
         |FINSI;

         #rem01037@#0 = #refere1@#0;
         #rem01037@#1 = #refere1@#1;
         #rem01037@#2 = #refere1@#2;
         #rem01037@#3 = 2;
         |LEE 101#rem01037@.=;
         |SI FSalida = 0;
             nResto  = nRdtoCon18;
             aAlfa   = "CONYUGE";
             |HAZ QuitaConyuge;

             |GRABA 020#rem01037@.a;
             |LIBERA #rem01037@;
         |FINSI;

         |CIERRA #rem01037@;
     |FINSI;

     |CIERRA #rem01033@;

     |DESCARGA_DEF #rem01037@;
     |DESCARGA_DEF #rem01033@;
|FPRC;

|PROCESO CalculaPlan;
     |ABRE #rew99999;
     |SELECT #2#rew99999;
     #rew99999#1 = #refere1@#2;
     |LEE 040#rew99999.=;
     |SI FSalida  ! 0;  |DDEFECTO #rew99999;  |FINSI;
     |CIERRA #rew99999;

     eaCasilla = "01-0022-LIQ19"; |HAZ SacaImporte; nValor = enImporte;
     eaCasilla = "08-1605-LIQ19"; |HAZ SacaImporte; nValor = nValor + enImporte;

     nValor   = nValor +  #rem01018@#7  +  #rem01018@#11  + #rem01018@#13;

     |SI nValor [ 0;  nValor = 0;  |FINSI;

     nLimite = 8000;

     |SI #rem01037@#6 ! 0;  |Y #rem01037@#12 ! 0;
         nLimite = 13000;
     |FINSI;

     |SI #rem01037@#6 = 0;  |Y #rem01037@#12 ! 0;
         nLimite = 5000;
     |FINSI;

     nValor  = (nValor % 30) ! 2;
     |SI nValor > nLimite;
         nValor = nLimite;
     |FINSI;

     |SI #rem01037@#6  > 8000;   #rem01037@#6  = 8000;  |FINSI;
     |SI #rem01037@#10 > 5000;   #rem01037@#10 = 5000;  |FINSI;
     |SI #rem01037@#12 > 5000;   #rem01037@#12 = 5000;  |FINSI;

     |SI #rem01037@#7 > nValor;
         #rem01037@#7 = nValor;
     |FINSI;

     |SI #rem01037@#7 > nLimite;
         #rem01037@#7 = nLimite;
     |FINSI;
|FPRC;

|PROCESO CalculaI2;
     aDef    = eaPathDef + "rem01037.mas";
     |CARGA_DEF aDef, rem01037@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #rem01037@#"zdat1037"#;  |FINSI;

     aDef    = eaPathDef + "rem01018.mas";
     |CARGA_DEF aDef, rem01018@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |DESCARGA_DEF #rem01037@;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #rem01018@#"zdat1018"#;  |FINSI;

     aDef    = eaPathDef + "rem01033.mas";
     |CARGA_DEF aDef, rem01033@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |DESCARGA_DEF #rem01018@;
         |DESCARGA_DEF #rem01037@;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #rem01033@#"zdat1033"#;  |FINSI;

     |ABRE #rem01037@;
     |ABRE #rem01018@;
     |ABRE #rem01033@;

     #rem01033@#0 = #refere1@#0;
     #rem01033@#1 = #refere1@#1;
     #rem01033@#2 = #refere1@#2;
     |LEE 101#rem01033@.=;
     |SI FSalida ! 0;
         |DDEFECTO #rem01033@;
         #rem01033@#0 = #refere1@#0;
         #rem01033@#1 = #refere1@#1;
         #rem01033@#2 = #refere1@#2;
         |GRABA 020#rem01033@.b;
     |FINSI;

     |SI enConta = 1;
         #rem01037@#0 = #refere1@#0;
         #rem01037@#1 = #refere1@#1;
         #rem01037@#2 = #refere1@#2;
         #rem01037@#3 = 1;
         |LEE 101#rem01037@.=;
         |SI FSalida ! 0;
             |DDEFECTO #rem01037@;
             #rem01037@#0 = #refere1@#0;
             #rem01037@#1 = #refere1@#1;
             #rem01037@#2 = #refere1@#2;
             #rem01037@#3 = 1;
             |GRABA 020#rem01037@.b;
         |FINSI;

         #rem01018@#0 = #refere1@#0;
         #rem01018@#1 = #refere1@#1;
         #rem01018@#2 = #refere1@#2;
         |LEE 000#rem01018@.=;
         |SI FSalida ! 0;  |DDEFECTO #rem01018@;  |FINSI;

         |SI #rem01037@#8 ! "N";  |Y eaCalcP = "";
             eaCalcP = #rem01037@#8;  |QBF eaCalcP;
             enCalcP = #rem01037@#9;
         |FINSI;

         |HAZ CalculaPlan;

         n401T = #rem01037@#5;
         n402T = #rem01037@#10;
         n403T = #rem01037@#6;
         n404T = #rem01037@#12;
         n405T = #rem01037@#7;

         |GRABA 020#rem01037@.a;
         |LIBERA #rem01037@;

         #rem01033@#84  = #rem01037@#7;

         eaCasilla = "08-1605-LIQ19"; |HAZ SacaImporte;

         nRdtoTit16 = #rem01037@#5 + #rem01037@#10 + #rem01037@#6 + #rem01037@#12;
         nRdtoTit17 = (#rem01037@#5 + #rem01037@#10 + #rem01037@#6 + #rem01037@#12) - #rem01037@#7;
         nRdtoTit   = #rem01018@#15  + #rem01018@#7  +  #rem01018@#11  + #rem01018@#13 + enImporte;
     |FINSI;

     |SI enConta = 2;
         #rem01037@#0 = #refere1@#0;
         #rem01037@#1 = #refere1@#1;
         #rem01037@#2 = #refere1@#2;
         #rem01037@#3 = 2;
         |LEE 101#rem01037@.=;
         |SI FSalida ! 0;
             |DDEFECTO #rem01037@;
             #rem01037@#0 = #refere1@#0;
             #rem01037@#1 = #refere1@#1;
             #rem01037@#2 = #refere1@#2;
             #rem01037@#3 = 2;
             |GRABA 020#rem01037@.b;
         |FINSI;

         #rem01018@#0 = #refere1@#0;
         #rem01018@#1 = #refere1@#1;
         #rem01018@#2 = #refere1@#2;
         |LEE 000#rem01018@.=;
         |SI FSalida ! 0;  |DDEFECTO #rem01018@;  |FINSI;

         |SI #rem01037@#8 ! "N";  |Y eaCalcP = "";
             eaCalcP = #rem01037@#8;  |QBF eaCalcP;
             enCalcP = #rem01037@#9;
         |FINSI;

         |HAZ CalculaPlan;

         n401C = #rem01037@#5;
         n402C = #rem01037@#10;
         n403C = #rem01037@#6;
         n404C = #rem01037@#12;
         n405C = #rem01037@#7;

         |GRABA 020#rem01037@.a;
         |LIBERA #rem01037@;

         #rem01033@#84  = #rem01037@#7;

         eaCasilla = "08-1605-LIQ19"; |HAZ SacaImporte;

         nRdtoCon16 = #rem01037@#5 + #rem01037@#10 + #rem01037@#6 + #rem01037@#12;
         nRdtoCon17 = (#rem01037@#5 + #rem01037@#10 + #rem01037@#6 + #rem01037@#12) - #rem01037@#7;
         nRdtoCon   = #rem01018@#15  + #rem01018@#7  +  #rem01018@#11  + #rem01018@#13 + enImporte;
     |FINSI;

     |SI enConta = 7;
         #rem01037@#0 = #refere1@#0;
         #rem01037@#1 = #refere1@#1;
         #rem01037@#2 = #refere1@#2;
         #rem01037@#3 = 1;
         |LEE 101#rem01037@.=;
         |SI FSalida = 0;
             #rem01037@#5  = n401T;
             #rem01037@#10 = n402T;
             #rem01037@#6  = n403T;
             #rem01037@#12 = n404T;
             #rem01037@#7  = n405T;

             |GRABA 020#rem01037@.a;
             |LIBERA #rem01037@;
         |FINSI;

         #rem01037@#0 = #refere1@#0;
         #rem01037@#1 = #refere1@#1;
         #rem01037@#2 = #refere1@#2;
         #rem01037@#3 = 2;
         |LEE 101#rem01037@.=;
         |SI FSalida = 0;
             #rem01037@#5  = n401C;
             #rem01037@#10 = n402C;
             #rem01037@#6  = n403C;
             #rem01037@#12 = n404C;
             #rem01037@#7  = n405C;

             |GRABA 020#rem01037@.a;
             |LIBERA #rem01037@;
         |FINSI;

         #rem01033@#84  = n405T + n405C;
     |FINSI;

     |SI enConta = 8;
         |SI eaMuerto = "T";
             #rem01037@#0 = #refere1@#0;
             #rem01037@#1 = #refere1@#1;
             #rem01037@#2 = #refere1@#2;
             #rem01037@#3 = 2;
             |LEE 101#rem01037@.=;
             |SI FSalida = 0;
                 #rem01037@#5  = n401C;
                 #rem01037@#10 = n402C;
                 #rem01037@#6  = n403C;
                 #rem01037@#12 = n404C;
                 #rem01037@#7  = n405C;
                 |GRABA 020#rem01037@.a;
                 |LIBERA #rem01037@;
             |FINSI;

             #rem01033@#84  = n405C;
         |SINO;
             #rem01037@#0 = #refere1@#0;
             #rem01037@#1 = #refere1@#1;
             #rem01037@#2 = #refere1@#2;
             #rem01037@#3 = 1;
             |LEE 101#rem01037@.=;
             |SI FSalida = 0;
                 #rem01037@#5  = n401T;
                 #rem01037@#10 = n402T;
                 #rem01037@#6  = n403T;
                 #rem01037@#12 = n404T;
                 #rem01037@#7  = n405T;

                 |GRABA 020#rem01037@.a;
                 |LIBERA #rem01037@;
              |FINSI;

             #rem01033@#84  = n405T;
         |FINSI;
     |FINSI;

     |GRABA 020#rem01033@.a;
     |LIBERA #rem01033@;

     enSwAcum  = 0;
     eaCasilla = "30-0468-LIQ19";  enImporte = #rem01033@#84;   |HAZ GrabaLineal;

     |CIERRA #rem01037@;
     |CIERRA #rem01018@;
     |CIERRA #rem01033@;

     |DESCARGA_DEF #rem01033@;
     |DESCARGA_DEF #rem01018@;
     |DESCARGA_DEF #rem01037@;
|FPRC;

|PROCESO CalculaI1;
     |SI enConta ! 7;  |Y enConta ! 8;
         |ACABA;
     |FINSI;

     aDef    = eaPathDef + "rem00100.mas";
     |CARGA_DEF aDef, rem00100@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef    = eaPathDef + "rem01033.mas";
     |CARGA_DEF aDef, rem01033@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |DESCARGA_DEF #rem00100@;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #rem01033@#"zdat1033"#;  |FINSI;

     |ABRE #rem00100@;
     #rem00100@#0 = #refere1@#0;
     |LEE 040#rem00100@.=;
     |SI FSalida ! 0;  |DDEFECTO #rem00100@;  |FINSI;
     |CIERRA #rem00100@;

     |ABRE #rem01033@;

     #rem01033@#0 = #refere1@#0;
     #rem01033@#1 = #refere1@#1;
     #rem01033@#2 = #refere1@#2;
     |LEE 101#rem01033@.=;
     |SI FSalida ! 0;
         |DDEFECTO #rem01033@;
         #rem01033@#0 = #refere1@#0;
         #rem01033@#1 = #refere1@#1;
         #rem01033@#2 = #refere1@#2;
         |GRABA 020#rem01033@.b;
     |FINSI;

     #rem01033@#83 = 0;
     |SI enConta ! 8;
        |SI #rem00100@#6 = "C";
            #rem01033@#83 = 3400;
        |SINO;
            |SI #rem00100@#95 ! "S";
                #rem01033@#83 = 2150;
            |FINSI;
        |FINSI;
     |SINO;
        #rem01033@#83 = 2150;
     |FINSI;

     |GRABA 020#rem01033@.a;
     |LIBERA #rem01033@;
     |CIERRA #rem01033@;

     enSwAcum  = 0;
     eaCasilla = "29-0461-LIQ19";  enImporte = #rem01033@#83;   |HAZ GrabaLineal;

     |DESCARGA_DEF #rem01033@;
     |DESCARGA_DEF #rem00100@;
|FPRC;
