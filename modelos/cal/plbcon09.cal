|FICHEROS;
    dsmom014;

    dsmom010;
    dsmom012;
    dsmom013;
    dsmopl10;
    dsmopl12;
    dsmopl13;

    dsmom060;
    dsmom061;
|FIN;

|VARIABLES;
     nHay    = 0;
     aTipCta = "";
     nNume1  = 0;
     aAlfa1  = "";
     &enDesglose60 = 0;
     &eaTip60      = "";
     &eaCta60      = "";
     &enEjer       = 0;
     &enPlan14     = 0;
     &enPlan60     = 0;
|FIN;

|PROCESO GrabaPl10;
   |SI #dsmom010#8 ! 0;
         #dsmopl10#0 = #dsmom010#0;
         #dsmopl10#1 = #dsmom010#1;
         #dsmopl10#2 = #dsmom010#2;
         #dsmopl10#3 = #dsmom010#3;
         #dsmopl10#4 = #dsmom010#4;
         #dsmopl10#5 = #dsmom010#5;
         |LEE 101#dsmopl10.=;
         |SI FSalida ! 0;
             |DDEFECTO #dsmopl10;
             #dsmopl10#0 = #dsmom010#0;
             #dsmopl10#1 = #dsmom010#1;
             #dsmopl10#2 = #dsmom010#2;
             #dsmopl10#3 = #dsmom010#3;
             #dsmopl10#4 = #dsmom010#4;
             #dsmopl10#5 = #dsmom010#5;
             #dsmopl10#6 = #dsmom010#6;
             #dsmopl10#7 = #dsmom010#7;
             #dsmopl10#8 = #dsmom010#8;
             |GRABA 020#dsmopl10.b;
         |FINSI;
         |LIBERA #dsmopl10;
   |FINSI;
|FPRC;

|DEFBUCLE dsmom010;
     #dsmom010#1;
     ;
     00001, 2019, 00, 00, 00, #dsmom014#0;
     99999, 2019, 99, 99, 99, #dsmom014#0;
     e;
     NULL, GrabaPl10;
|FIN;

|PROCESO GrabaPl12;
   |SI #dsmom012#8 ! 0;
         #dsmopl12#0 = #dsmom012#0;
         #dsmopl12#1 = #dsmom012#1;
         #dsmopl12#2 = #dsmom012#2;
         #dsmopl12#3 = #dsmom012#3;
         #dsmopl12#4 = #dsmom012#4;
         #dsmopl12#5 = #dsmom012#5;
         |LEE 121#dsmopl12.=;
         |SI FSalida ! 0;
             |DDEFECTO #dsmopl12;
             #dsmopl12#0 = #dsmom012#0;
             #dsmopl12#1 = #dsmom012#1;
             #dsmopl12#2 = #dsmom012#2;
             #dsmopl12#3 = #dsmom012#3;
             #dsmopl12#4 = #dsmom012#4;
             #dsmopl12#5 = #dsmom012#5;
             #dsmopl12#6 = #dsmom012#6;
             #dsmopl12#7 = #dsmom012#7;
             #dsmopl12#8 = #dsmom012#8;
             |GRABA 020#dsmopl12.b;
         |FINSI;
         |LIBERA #dsmopl12;
   |FINSI;
|FPRC;

|DEFBUCLE dsmom012;
     #dsmom012#1;
     ;
     00001, 2019, 00, 00, 00, #dsmom014#0;
     99999, 2019, 99, 99, 99, #dsmom014#0;
     e;
     NULL, GrabaPl12;
|FIN;


|PROCESO GrabaPl13;
   |SI #dsmom013#8 ! 0;
         #dsmopl13#0 = #dsmom013#0;
         #dsmopl13#1 = #dsmom013#1;
         #dsmopl13#2 = #dsmom013#2;
         #dsmopl13#3 = #dsmom013#3;
         #dsmopl13#4 = #dsmom013#4;
         #dsmopl13#5 = #dsmom013#5;
         |LEE 141#dsmopl13.=;
         |SI FSalida ! 0;
             |DDEFECTO #dsmopl13;
             #dsmopl13#0 = #dsmom013#0;
             #dsmopl13#1 = #dsmom013#1;
             #dsmopl13#2 = #dsmom013#2;
             #dsmopl13#3 = #dsmom013#3;
             #dsmopl13#4 = #dsmom013#4;
             #dsmopl13#5 = #dsmom013#5;
             #dsmopl13#6 = #dsmom013#6;
             #dsmopl13#7 = #dsmom013#7;
             #dsmopl13#8 = #dsmom013#8;
             |GRABA 020#dsmopl13.b;
         |FINSI;
         |LIBERA #dsmopl13;
   |FINSI;
|FPRC;


|DEFBUCLE dsmom013;
     #dsmom013#1;
     ;
     00001, 2019, 00, 00, 00, #dsmom014#0;
     99999, 2019, 99, 99, 99, #dsmom014#0;
     e;
     NULL, GrabaPl13;
|FIN;

|PROCESO LosIngresos;
     |ABRE #dsmopl10;
     |BUCLE dsmom010;
     |CIERRA #dsmopl10;
|FPRC;

|PROCESO LosGastos;
     |ABRE #dsmopl13;
     |BUCLE dsmom013;
     |CIERRA #dsmopl13;
|FPRC;

|PROCESO LosConsumos;
     |ABRE #dsmopl12;
     |BUCLE dsmom012;
     |CIERRA #dsmopl12;
|FPRC;

|PROCESO LeoTabla14;
     enDesglose60 = 0;
     aTipCta = #dsmom014#2;
     |SI aTipCta ! "I"; |Y aTipCta ! "G"; |Y aTipCta ! "C"; |ACABA; |FINSI;

     eaTip60 = aTipCta;
     |SI aTipCta = "C"; eaTip60 = "G"; |FINSI;
     eaCta60 = #dsmom014#0;
     |HAZ HayDesglose60;
     |SI enDesglose60 = 1;
         |SI aTipCta = "I"; |HAZ LosIngresos; |FINSI;
         |SI aTipCta = "G"; |HAZ LosGastos;   |FINSI;
         |SI aTipCta = "C"; |HAZ LosConsumos; |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE LeoTabla14;
     #dsmom014#1;
     ;
     enPlan14, "    ";
     enPlan14, "zzzz";
     e;
     NULL, LeoTabla14;
|FIN;

|PROCESO LeoPl;
     nHay = 1;
     |ERROR10;
|FPRC;

|DEFBUCLE LeoPl10;
     #dsmopl10#1;
     ;
     00001, 2019, 00, 00, 00, "            ";
     99999, 2019, 99, 99, 99, "zzzzzzzzzzzz";
     e;
     NULL, LeoPl;
|FIN;

|DEFBUCLE LeoPl12;
     #dsmopl12#1;
     ;
     00001, 2019, 00, 00, 00, "            ";
     99999, 2019, 99, 99, 99, "zzzzzzzzzzzz";
     e;
     NULL, LeoPl;
|FIN;

|DEFBUCLE LeoPl13;
     #dsmopl13#1;
     ;
     00001, 2019, 00, 00, 00, "            ";
     99999, 2019, 99, 99, 99, "zzzzzzzzzzzz";
     e;
     NULL, LeoPl;
|FIN;

|PROCESO Leom061E;
     aAlfa1 = #dsmom061#4; |QBF aAlfa1;
     aAlfa1 = aAlfa1 % 0;
     nNume1 = aAlfa1;
     |SI nNume1 > 4;
         nHay = 0;
         |ERROR10;
     |FINSI;
|FPRC;

|DEFBUCLE Leom061E;
   #dsmom061#1;
   ;
   enPlan60, "N", " ", 01, 001;
   enPlan60, "N", "z", 99, 999;
   e;
   NULL, Leom061E;
|FIN;

|PROCESO Cal2019Desglose;
     nHay = 0;
     |BUCLE LeoPl10;
     |SI nHay = 0; |BUCLE LeoPl12; |FINSI;
     |SI nHay = 0; |BUCLE LeoPl13; |FINSI;
     |SI nHay = 0;
         nHay = 1;
         |BUCLE Leom061E;
     |FINSI;

     |SI nHay = 0;
         nNume1 = enEjer;
         enEjer = 2019;
         |HAZ Verm014Plan;
         |SI enPlan14 = 0; enEjer = nNume1; |ACABA; |FINSI;
         |HAZ Verm060Plan;
         enEjer = nNume1;
         |SI enPlan60 = 0; |ACABA; |FINSI;

         |BUCLE LeoTabla14;
     |FINSI;
|FPRC;
