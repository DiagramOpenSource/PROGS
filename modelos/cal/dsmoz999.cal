|FICHEROS;
     dsmoz999 #0;

     dsmom002 #2;
     dsmom004 #4;
     dsmom008 #8;
     dsmom006 #6;
     dsmom009 #9;
     dsmociva #10;
     dsmom028 #28;
     dsmom047 #47;
     dsmom048 #148;

     :/basica/def/agitab99 #199;
     :/basica/def/agitab10 #110;
     :/basica/def/agitab11 #111;
     :/basica/def/agitab13 #113;
     :/basica/def/agicen14 #114;

     :/integral/def/dsam0009 #209;

     cargodef@ #2000;
|FIN;

|VARIABLES;
     nCodigo     = 0;
     nCampo      = 0;
     nNume       = 0;

     aBase       = "";
     aMas        = "";
     aAlfa       = "";

     &enEmpresaA = 0;
     &enAnyo     = 0;
|FIN;

|INCLUYE i_variar;

|PROCESO agitab11;
     #199#0 = #111#1;
     |LEE 000#199=;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     #111#2 = #199#1;
     #111#3 = #199#2;
     #111#4 = #199#3;

     |GRABA 020#111a;
     |LIBERA #111;
|FPRC;

|DEFBUCLE agitab11;
     #111#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, agitab11;
|FIN;

|PROCESO agitab13;
     #199#0 = #113#1;
     |LEE 000#199=;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     #113#2 = #199#1;
     #113#3 = #199#2;
     #113#4 = #199#3;

     |GRABA 020#113a;
     |LIBERA #113;
|FPRC;

|DEFBUCLE agitab13;
     #113#1;
     ;
     INICIO;
     FINAL;
     ;
     NULL, agitab13;
|FIN;

|PROCESO Graba111;
     #111#0 = nCodigo;
     #111#1 = #199#0;
     |LEE 000#111=;
     |SI FSalida = 0;  |ACABA;  |FINSI;

     #111#0 = nCodigo;
     #111#1 = #199#0;
     #111#2 = #199#1;
     #111#3 = #199#2;
     #111#4 = #199#3;
     #111#5 = "N";
     |GRABA 020#111n;
     |LIBERA #111;
|FPRC;

|PROCESO Maestros;
     |ABRE #199;
     |BUCLE agitab11;
     |BUCLE agitab13;

     #199#0 = 303;
     |LEE 000#199=;
     |SI FSalida ! 0;
         |DDEFECTO #199;
         #199#0 = 303;
         #199#1 = "MODELO 303 - I.V.A.";
         #199#2 = "IMPUESTO SOBRE EL VALOR A¥ADIDO";
         #199#3 = "AUTOLIQUIDACION";
         #199#4 = "S";
         #199#5 = "C";
         #199#6 = "F";
         #199#7 = "S";
         #199#8 = "S";
         |GRABA 020#199n;
         |LIBERA #199;
         |CIERRA #199;
     |FINSI;
     |CIERRA #199;

     eaPrograma = "dsmoz999";
     |SUB_EJECUTA_NP "dsmom005";

     |ABRE #111;
     nCodigo = 2;   |HAZ Graba111;
     nCodigo = 4;   |HAZ Graba111;
     nCodigo = 5;   |HAZ Graba111;
     nCodigo = 6;   |HAZ Graba111;
     nCodigo = 7;   |HAZ Graba111;
     nCodigo = 8;   |HAZ Graba111;
     nCodigo = 11;  |HAZ Graba111;
     nCodigo = 12;  |HAZ Graba111;
     nCodigo = 13;  |HAZ Graba111;
     |CIERRA #111;

     |ABRE #199;
     #199#0 = 340;
     |LEE 000#199=;
     |SI FSalida ! 0;
         |DDEFECTO #199;
         #199#0 = 340;
         #199#1 = "MODELO 340 - I.V.A.";
         #199#2 = "DECLARACION DE OPERACIONES INCLUIDAS EN LOS LIBROS REGISTRO A QUE SE ";
         #199#3 = "SE REFIERE EL ARTICULO 62.1 DEL REGLAMENTO DEL IVA";
         #199#4 = "S";
         #199#5 = "C";
         #199#6 = "F";
         #199#7 = "N";
         #199#8 = "N";
         |GRABA 020#199n;
         |LIBERA #199;
         |CIERRA #199;
     |FINSI;
     |CIERRA #199;

     eaPrograma = "dsmoz999";
     |SUB_EJECUTA_NP "dsmom005";

     |ABRE #111;
     nCodigo = 2;   |HAZ Graba111;
     nCodigo = 4;   |HAZ Graba111;
     nCodigo = 5;   |HAZ Graba111;
     nCodigo = 6;   |HAZ Graba111;
     nCodigo = 7;   |HAZ Graba111;
     nCodigo = 8;   |HAZ Graba111;
     nCodigo = 11;  |HAZ Graba111;
     nCodigo = 12;  |HAZ Graba111;
     nCodigo = 13;  |HAZ Graba111;
     |CIERRA #111;

     |ABRE #110;
     #110#0 = 11;
     |LEE 101#110=;
     |SI FSalida = 0;
         #110#5 = "INSCRITO REGISTRO DEVOLUCION MENSUAL";
         #110#1 = "INSCRITO REGISTRO DEVOLUCION MENSUAL";
         #110#2 = "";
         #110#3 = "";
         #110#4 = "";
         |GRABA 020#110a;
         |LIBERA #110;
     |FINSI;

     #110#0 = 13;
     |LEE 101#110=;
     |SI FSalida = 0;
         #110#5 = "INS.REGISTRO DEVOLUCION MENSUAL G.EMPR.";
         #110#1 = "INSCRITO REGISTRO DEVOLUCION MENSUAL";
         #110#2 = "GRANDES EMPRESAS";
         #110#3 = "";
         #110#4 = "";
         |GRABA 020#110a;
         |LIBERA #110;
     |FINSI;
     |CIERRA #110;
|FPRC;

|PROCESO Maestros347;
     |ABRE #199;
     #199#0 = 347;
     |LEE 000#199=;
     |SI FSalida ! 0;  |ACABA;  |FINSI;
     |CIERRA #199;

     |ABRE #111;
     nCodigo = 10;   |HAZ Graba111;
     |CIERRA #111;
|FPRC;

|PROCESO dsmom006;
     |SI #6#1 ! 300;  |Y #6#1 ! 320;  |Y #6#1 ! 330;  |Y #6#1 ! 320;
         |ACABA;
     |FINSI;

     #2000#0 = #6#0;
     #2000#1 = 303;
     |LEE 000#2000=;
     |SI FSalida ! 0;
         #2000#0 = #6#0;
         #2000#1 = 303;
         |PARA nCampo = 2;  |SI nCampo [ 12;  |HACIENDO nCampo = nCampo + 1;
               #2000nCampo = #6nCampo;
         |SIGUE;

         |GRABA 020#2000n;
         |LIBERA #2000;
     |FINSI;
|FPRC;

|DEFBUCLE dsmom006;
     #6#1;
     ;
     00001, 300;
     99999, 399;
     be;
     NULL, dsmom006;
|FIN;

|PROCESO dsmom002;
     |SI #2#2 ! 300;  |Y #2#2 ! 320;  |Y #2#2 ! 330;  |Y #2#2 ! 320;
         |ACABA;
     |FINSI;

     aAlfa   = #2#9 % -104;
     |SI aAlfa ! "0000";
         nNume   = aAlfa;
         |SI nNume < 2009;  |ACABA;  |FINSI;
     |FINSI;

     #2000#0 = #2#0;
     #2000#1 = #2#1;
     #2000#2 = 303;
     |LEE 000#2000=;
     |SI FSalida ! 0;
         #2000#0 = #2#0;
         #2000#1 = #2#1;
         #2000#2 = 303;
         |PARA nCampo = 3;  |SI nCampo [ 10;  |HACIENDO nCampo = nCampo + 1;
               #2000nCampo = #2nCampo;
         |SIGUE;

         #2000#3 = "MODELO 303 - I.V.A.";
         #2000#4 = "IMPUESTO SOBRE EL VALOR A¥ADIDO";
         #2000#5 = "AUTOLIQUIDACION";

         |GRABA 020#2000n;
         |LIBERA #2000;
     |FINSI;
|FPRC;

|DEFBUCLE dsmom002;
     #2#1;
     ;
     00000, 00, 300;
     99999, 99, 399;
     be;
     NULL, dsmom002;
|FIN;

|PROCESO dsmociva;
     |SI #10#3 ! 300;  |Y #10#3 ! 320;  |Y #10#3 ! 330;  |Y #10#3 ! 320;
         |ACABA;
     |FINSI;

     #2000#0 = #10#0;
     #2000#1 = #10#1;
     #2000#2 = #10#2;
     #2000#3 = 303;
     #2000#4 = #10#4;
     #2000#5 = #10#5;
     #2000#6 = #10#6;
     #2000#7 = #10#7;
     |LEE 000#2000=;
     |SI FSalida ! 0;
         #2000#0 = #10#0;
         #2000#1 = #10#1;
         #2000#2 = #10#2;
         #2000#3 = 303;
         #2000#4 = #10#4;
         #2000#5 = #10#5;
         #2000#6 = #10#6;
         #2000#7 = #10#7;

         |PARA nCampo = 8;  |SI nCampo [ 55;  |HACIENDO nCampo = nCampo + 1;
               #2000nCampo = #10nCampo;
         |SIGUE;

         |GRABA 020#2000n;
         |LIBERA #2000;
     |FINSI;

     |BORRA 020#10a;
     |LIBERA #10;
|FPRC;

|DEFBUCLE dsmociva;
     #10#1;
     ;
     00000, 2009, 00, 300, 00, 00, 0, 00;
     99999, 2999, 99, 399, 99, 99, 9, 99;
     be;
     NULL, dsmociva;
|FIN;

|PROCESO dsmom004;
     |SI #4#3 ! 300;  |Y #4#3 ! 320;  |Y #4#3 ! 330;  |Y #4#3 ! 320;
         |ACABA;
     |FINSI;

     #2000#0 = #4#0;
     #2000#1 = #4#1;
     #2000#2 = #4#2;
     #2000#3 = 303;
     #2000#4 = #4#4;
     |LEE 000#2000=;
     |SI FSalida ! 0;
         #2000#0 = #4#0;
         #2000#1 = #4#1;
         #2000#2 = #4#2;
         #2000#3 = 303;
         #2000#4 = #4#4;

         |PARA nCampo = 5;  |SI nCampo [ 22;  |HACIENDO nCampo = nCampo + 1;
               #2000nCampo = #4nCampo;
         |SIGUE;

         |GRABA 020#2000n;
         |LIBERA #2000;
     |FINSI;

     |BORRA 020#4a;
     |LIBERA #4;
|FPRC;

|DEFBUCLE dsmom004;
     #4#1;
     ;
     00000, 2009, 00, 300, 00;
     99999, 2999, 99, 399, 99;
     be;
     NULL, dsmom004;
|FIN;

|PROCESO dsmom008;
     |SI #8#3 ! 300;  |Y #8#3 ! 320;  |Y #8#3 ! 330;  |Y #8#3 ! 320;
         |ACABA;
     |FINSI;

     #2000#0 = #8#0;
     #2000#1 = #8#1;
     #2000#2 = #8#2;
     #2000#3 = 303;
     #2000#4 = #8#4;
     #2000#5 = #8#5;
     |LEE 000#2000=;
     |SI FSalida ! 0;
         #2000#0 = #8#0;
         #2000#1 = #8#1;
         #2000#2 = #8#2;
         #2000#3 = 303;
         #2000#4 = #8#4;
         #2000#5 = #8#5;

         |PARA nCampo = 6;  |SI nCampo [ 13;  |HACIENDO nCampo = nCampo + 1;
               #2000nCampo = #8nCampo;
         |SIGUE;

         |SI #8#12 = 300;  #2000#12 = 303;  |FINSI;
         |SI #8#12 = 320;  #2000#12 = 303;  |FINSI;
         |SI #8#12 = 330;  #2000#12 = 303;  |FINSI;
         |SI #8#12 = 332;  #2000#12 = 303;  |FINSI;

         |SI #8#2 = 1;   aAlfa = "ENERO     ";  |FINSI;
         |SI #8#2 = 2;   aAlfa = "FEBRERO   ";  |FINSI;
         |SI #8#2 = 3;   aAlfa = "MARZO     ";  |FINSI;
         |SI #8#2 = 4;   aAlfa = "ABRIL     ";  |FINSI;
         |SI #8#2 = 5;   aAlfa = "MAYO      ";  |FINSI;
         |SI #8#2 = 6;   aAlfa = "JUNIO     ";  |FINSI;
         |SI #8#2 = 7;   aAlfa = "JULIO     ";  |FINSI;
         |SI #8#2 = 8;   aAlfa = "AGOSTO    ";  |FINSI;
         |SI #8#2 = 9;   aAlfa = "SEPTIEMBRE";  |FINSI;
         |SI #8#2 = 10;  aAlfa = "OCTUBRE   ";  |FINSI;
         |SI #8#2 = 11;  aAlfa = "NOVIEMBRE ";  |FINSI;
         |SI #8#2 = 12;  aAlfa = "DICIEMBRE ";  |FINSI;

         aAlfa    = "REGISTROS DEL MODELO " + #2000#12 + " EJERCICIO " + #2000#1 + " PERIODO " + aAlfa;
         #2000#8  = aAlfa;

         |GRABA 020#2000n;
         |LIBERA #2000;

         |SI #2000#5 > 0;  |Y #2000#5 < 99;
             #4#0  = #2000#0;
             #4#1  = #2000#1;
             #4#2  = #2000#2;
             #4#3  = #2000#3;
             #4#4  = #2000#4;
             |LEE 101#4=;
             |SI FSalida = 0;
                 |SI #4#22 = " ";
                     #2#0 = #4#0;
                     #2#1 = #2000#5;
                     #2#2 = 303;
                     |LEE 000#2=;
                     |SI FSalida = 0;
                        |SI #2#7 = "TRIMESTRAL";  #4#22 = "T";  |FINSI;
                        |SI #2#7 = "MENSUAL   ";  #4#22 = "M";  |FINSI;
                        |SI #2#7 = "ANUAL     ";  #4#22 = "A";  |FINSI;
                     |FINSI;
                 |FINSI;

                 #114#0 = #2000#0;
                 #114#1 = #2000#5;
                 |LEE 040#114=;
                 |SI FSalida ! 0;  |DDEFECTO #114;  |FINSI;

                 |SI #114#7 = 11;  #4#23 = "S";  |FINSI;
                 |SI #114#7 = 13;  #4#23 = "S";  |FINSI;

                 |GRABA 020#4a;
                 |LIBERA #4;
             |FINSI;
         |FINSI;

         |SI #2000#5 ! 0;
             #10#0 = #2000#0;
             #10#1 = #2000#1;
             #10#2 = #2000#2;
             #10#3 = #2000#3;
             #10#4 = #2000#4;
             #10#5 = #2000#5;
             #10#6 = 0;
             #10#7 = 0;
             |LEE 000#10];
             |SI FSalida = 0;  |Y #10#0 = #2000#0; |Y #10#1 = #2000#1;
                               |Y #10#2 = #2000#2; |Y #10#3 = #2000#3;
                               |Y #10#4 = #2000#4; |Y #10#5 = #2000#5;

                 enEmpresa     = #2000#0;
                 enEjer        = #2000#1;
                 enPeriodo     = #2000#2;
                 enModelo      = #2000#3;
                 enComplem     = #2000#4;
                 enActividad   = #2000#5;
                 eaComunidad   = #2000#9;
                 eaComunero    = #2000#10;
                 eaCaptura     = #2000#7;
                 eaNombreAct   = #2000#6;
                 enTipoEntrada = 91;

                 |PARA nCampo = 0;  |SI nCampo [ 13;  |HACIENDO nCampo = nCampo + 1;
                       #8nCampo = #2000nCampo;
                 |SIGUE;


                 |HAZ EntraModelo;
             |FINSI;
         |FINSI;
     |FINSI;

     |BORRA 020#8a;
     |LIBERA #8;
|FPRC;

|DEFBUCLE dsmom008;
     #8#1;
     ;
     00000, 2009, 00, 300, 00, 00;
     99999, 9999, 99, 399, 99, 99;
     be;
     NULL, dsmom008;
|FIN;

|PROCESO dsmom028;
     |SI #28#3 ! 300;  |Y #28#3 ! 320;  |Y #28#3 ! 330;  |Y #28#3 ! 320;
         |ACABA;
     |FINSI;

     #2000#0 = #28#0;
     #2000#1 = #28#1;
     #2000#2 = #28#2;
     #2000#3 = 303;
     #2000#4 = #28#4;
     #2000#5 = #28#5;
     |LEE 000#2000=;
     |SI FSalida ! 0;
         #2000#0 = #28#0;
         #2000#1 = #28#1;
         #2000#2 = #28#2;
         #2000#3 = 303;
         #2000#4 = #28#4;
         #2000#5 = #28#5;
         #2000#6 = #28#6;
         #2000#7 = #28#7;

         |GRABA 020#2000n;
         |LIBERA #2000;
     |FINSI;

     |BORRA 020#28a;
     |LIBERA #28;
|FPRC;

|DEFBUCLE dsmom028;
     #28#1;
     ;
     00000, 2009, 00, 300, 00, 00;
     99999, 2999, 99, 399, 99, 99;
     be;
     NULL, dsmom028;
|FIN;

|PROCESO dsmom047;
     |SI #47#3 ! 300;  |Y #47#3 ! 320;  |Y #47#3 ! 330;  |Y #47#3 ! 320;
         |ACABA;
     |FINSI;

     #2000#0 = #47#0;
     #2000#1 = #47#1;
     #2000#2 = #47#2;
     #2000#3 = 303;
     #2000#4 = #47#4;
     #2000#5 = #47#5;
     |LEE 000#2000=;
     |SI FSalida ! 0;
         #2000#0 = #47#0;
         #2000#1 = #47#1;
         #2000#2 = #47#2;
         #2000#3 = 303;
         #2000#4 = #47#4;
         #2000#5 = #47#5;

         |PARA nCampo = 6;  |SI nCampo [ 14;  |HACIENDO nCampo = nCampo + 1;
               #2000nCampo = #47nCampo;
         |SIGUE;

         |GRABA 020#2000n;
         |LIBERA #2000;
     |FINSI;

     |BORRA 020#47a;
     |LIBERA #47;
|FPRC;

|DEFBUCLE dsmom047;
     #47#1;
     ;
     00000, 2009, 00, 300, 00, 00;
     99999, 2999, 99, 399, 99, 99;
     be;
     NULL, dsmom047;
|FIN;

|PROCESO dsmom048;
     |SI #148#3 ! 300;  |Y #148#3 ! 320;  |Y #148#3 ! 330;  |Y #148#3 ! 320;
         |ACABA;
     |FINSI;

     #2000#0 = #148#0;
     #2000#1 = #148#1;
     #2000#2 = #148#2;
     #2000#3 = 303;
     #2000#4 = #148#4;
     #2000#5 = #148#5;
     |LEE 000#2000=;
     |SI FSalida ! 0;
         #2000#0 = #148#0;
         #2000#1 = #148#1;
         #2000#2 = #148#2;
         #2000#3 = 303;
         #2000#4 = #148#4;
         #2000#5 = #148#5;
         #2000#6 = #148#6;
         #2000#7 = #148#7;

         |GRABA 020#2000n;
         |LIBERA #2000;
     |FINSI;

     |BORRA 020#148a;
     |LIBERA #148;
|FPRC;

|DEFBUCLE dsmom048;
     #148#1;
     ;
     00000, 2009, 00, 300, 00, 00;
     99999, 2999, 99, 399, 99, 99;
     be;
     NULL, dsmom048;
|FIN;

|PROCESO dsmom009;
     |SI #9#7  = "X";  |O #9#8 = "X";  |O #9#9 = "X";  |O #9#10 = "X";
      |O #9#11 = "X";
         #9#7  = "X";
         #9#8  = " ";
         #9#9  = " ";
         #9#10 = " ";
         #9#11 = " ";

        |GRABA 020#9a;
     |FINSI;

     |LIBERA #9;
|FPRC;

|DEFBUCLE dsmom009;
     #9#1;
     ;
     00000, 2009, 00, 00, 00;
     99999, 2999, 99, 99, 99;
     be;
     NULL, dsmom009;
|FIN;

|PROCESO dsam0009;
     |SI #209#1 ! 300;  |Y #209#1 ! 320;  |Y #209#1 ! 330;  |Y #209#1 ! 320;
         |ACABA;
     |FINSI;

     #2000#0 = #209#0;
     #2000#1 = 303;
     |LEE 000#2000=;
     |SI FSalida ! 0;
         #2000#0 = #209#0;
         #2000#1 = 303;

         |PARA nCampo = 2;  |SI nCampo [ 10;  |HACIENDO nCampo = nCampo + 1;
               #2000nCampo = #209nCampo;
         |SIGUE;

         #2000#2 = "MODELO 303 - I.V.A.";

         |GRABA 020#2000n;
         |LIBERA #2000;
     |FINSI;
|FPRC;

|DEFBUCLE dsam0009;
     #209#1;
     ;
     00000, 300;
     99999, 399;
     be;
     NULL, dsam0009;
|FIN;

|PROCESO Planing;
     |DBASE aBase;  |QBF aBase;

     aMas = aBase + "def/dsmom006.mas";
     |CARGA_DEF aMas, cargodef@;

     |ABRE #2000;
     |BUCLE dsmom006;
     |CIERRA #2000;
     |DESCARGA_DEF #cargodef@;

     aMas = aBase + "def/dsmom002.mas";
     |CARGA_DEF aMas, cargodef@;

     |ABRE #2000;
     |BUCLE dsmom002;
     |CIERRA #2000;
     |DESCARGA_DEF #cargodef@;

     aMas = aBase + "def/dsmociva.mas";
     |CARGA_DEF aMas, cargodef@;

     |ABRE #2000;
     |BUCLE dsmociva;
     |CIERRA #2000;
     |DESCARGA_DEF #cargodef@;

     aMas = aBase + "def/dsmom004.mas";
     |CARGA_DEF aMas, cargodef@;

     |ABRE #2000;
     |BUCLE dsmom004;
     |CIERRA #2000;
     |DESCARGA_DEF #cargodef@;

     aMas = aBase + "def/dsmom008.mas";
     |CARGA_DEF aMas, cargodef@;

     |ABRE #2000;
     |ABRE #2;
     |ABRE #4;
     |ABRE #10;
     |ABRE #114;
     |BUCLE dsmom008;
     |CIERRA #2000;
     |CIERRA #2;
     |CIERRA #4;
     |CIERRA #10;
     |CIERRA #114;
     |DESCARGA_DEF #cargodef@;

     aMas = aBase + "def/dsmom028.mas";
     |CARGA_DEF aMas, cargodef@;

     |ABRE #2000;
     |BUCLE dsmom028;
     |CIERRA #2000;
     |DESCARGA_DEF #cargodef@;

     aMas = aBase + "def/dsmom047.mas";
     |CARGA_DEF aMas, cargodef@;

     |ABRE #2000;
     |BUCLE dsmom047;
     |CIERRA #2000;
     |DESCARGA_DEF #cargodef@;

     aMas = aBase + "def/dsmom048.mas";
     |CARGA_DEF aMas, cargodef@;

     |ABRE #2000;
     |BUCLE dsmom048;
     |CIERRA #2000;
     |DESCARGA_DEF #cargodef@;

     |BUCLE dsmom009;

     |DBASS aBase;
     aMas = aBase + "integral/def/dsam0009.mas";
     |CARGA_DEF aMas, cargodef@;
     |SI FSalida = 0;
         |ABRE #2000;
         |BUCLE dsam0009;
         |CIERRA #2000;
         |DESCARGA_DEF #cargodef@;
     |FINSI;
|FPRC;

|PROCESO agicen14;
     |SI #114#6 ] "01.01.0001";  |Y #114#6 [ "01.01.2008";
         |ACABA;
     |FINSI;

     #2#0  = #114#0;
     #2#1  = #114#1;
     #2#2  = 347;
     |LEE 000#2=;
     |SI FSalida = 0;
         |ACABA;
     |FINSI;

     |DDEFECTO #2;
     #2#0  = #114#0;
     #2#1  = #114#1;
     #2#2  = 347;
     #2#3  = #199#1;
     #2#4  = #199#2;
     #2#5  = #199#3;
     #2#6  = #114#4;
     #2#7  = "ANUAL";
     #2#8  = "01.01.2008";
     #2#9  = #114#6;
     #2#10 = 1;
     |GRABA 020#2n;
     |LIBERA #2;

     enEmpresaA = #114#0;
     enAnyo     = 2008;
     |SUB_EJECUTA "dsmoz001";

     enAnyo     = 2009;
     |SUB_EJECUTA "dsmoz001";
|FPRC;

|DEFBUCLE agicen14;
     #114#1;
     7;
     00001, 01, 10;
     99999, 99, 10;
     ;
     NULL, agicen14;
|FIN;

|PROCESO Planing347;
     |ABRE #199;
     #199#0 = 347;
     |LEE 000#199=;
     |SI FSalida ! 0;  |ACABA;  |FINSI;
     |CIERRA #199;

     |ABRE #2;
     |BUCLE agicen14;
     |CIERRA #2;
|FPRC;

|PROCESO Tipo12;  |TIPO 12;
     |SI #0#1 ! "SI";  |ACABA;  |FINSI;

     |SI #0#2 = 0;
         |HAZ Maestros;
         |HAZ Planing;
         |HAZ Maestros347;
         |HAZ Planing347;
     |FINSI;

     |SI #0#2 = 1;
         |HAZ Maestros347;
         |HAZ Planing347;
     |FINSI;
|FPRC;

|PROGRAMA;
     |CABEZA "Regenereacion del planing";

     |ABRE #0
     |LEE 101#0p;
     |SI FSalida ! 0;
         |DDEFECTO #0;
         #0#2 = 0;
         |GRABA 020#0b;
     |FINSI;

     |SI #0#2 = 2;
         |MENAV "0000Proceso realizado.";
         |LIBERA #0;
         |CIERRA #0;
         |ACABA;
     |FINSI;

     |PINPA #0#0;

     |SI #0#2 = 0;
         |PINTA 1012, "Este proceso deja el planing preparado para el modelo";
         |PINTA 1112, "nuevo de IVA 303.";
         |PINTA 1212, "Tambien deja el planing preparado para el modelo 347";
         |PINTA 1312, "con los regimenes de IVA de modulos                 ";
     |FINSI;

     |SI #0#2 = 1;
         |PINTA 1012, "Este proceso deja el planing preparado para el modelo";
         |PINTA 1112, "347 con los regimenes de IVA de modulos              ";
     |FINSI;

     #0#1 = "NO";
     |PINDA #0#0;

     |ENDATOS #1#0;

     |SI #0#1 = "SI";
         #0#2 = 2;
         |GRABA 020#0a;
     |FINSI;
     |LIBERA #0;
     |CIERRA #0;
|FPRO;
