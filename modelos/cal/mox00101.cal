|FICHEROS;
     dsmox001;

     dsmom902;

     tablas@;
|FIN;

|INCLUYE mox001in;

|PROCESO MeteCampo;
     aDescri = "Fila de lectura";
     |SI nCampo ! 999;
         aQQ     = "|C" + (("000" + nCampo) % -103) + "NOMBRE";
         aDescri = #tablas@#aQQ#;
     |FINSI;

     |SI #dsmox001#5 = "180";  |Y nCampo = 17;
         aDescri = "Codigo postal";
     |FINSI;

     |SI #dsmox001#5 = "347";  |Y nCampo = 29;
         aDescri = "Codigo provincia";
     |FINSI;

     #dsmom902#0 = #dsmox001#5;
     #dsmom902#1 = nCampo;
     |LEE 101#dsmom902.=;
     |SI FSalida ! 0;
         |DDEFECTO #dsmom902;
         #dsmom902#0 = #dsmox001#5;
         #dsmom902#1 = nCampo;
         #dsmom902#6 = 0;
         |GRABA 020#dsmom902.b;
     |FINSI;

     #dsmom902#2 = aDescri;
     #dsmom902#3 = nOrden;
     #dsmom902#4 = aObliga;
     #dsmom902#7 = "";
     #dsmom902#8 = "N";

     |SI #dsmom902#4 = "S";
         #dsmom902#7 = aVerde;
     |FINSI;

     |GRABA 020#dsmom902.a;
     |LIBERA #dsmom902;
|FPRC;

|PROCESO dsmom902M;
     #dsmom902#8 = "S";
     |GRABA 020#dsmom902.a;
     |LIBERA #dsmom902;
|FPRC;

|DEFBUCLE dsmom902M;
     #dsmom902#1;
     ;
     #dsmox001#5, 001;
     #dsmox001#5, 255;
     be;
     NULL, dsmom902M;
|FIN;

|PROCESO dsmom902B;
     |BORRA 020#dsmom902.a;
     |LIBERA #dsmom902;
|FPRC;

|DEFBUCLE dsmom902B;
     #dsmom902#1;
     8;
     #dsmox001#5, 001, "S";
     #dsmox001#5, 255, "S";
     be;
     NULL, dsmom902B;
|FIN;

|PROCESO Estructura180;
     aMas = aDef + "dsm180li.mas";
     |CARGA_DEF aMas, tablas@;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     nCampo  = 999; aObliga = "N";  nOrden = 0;  |HAZ MeteCampo;
     nCampo  = 6;   aObliga = "S";  nOrden = 1;  |HAZ MeteCampo;
     nCampo  = 10;  aObliga = "S";  nOrden = 2;  |HAZ MeteCampo;
     nCampo  = 7;   aObliga = "S";  nOrden = 3;  |HAZ MeteCampo;
     nCampo  = 8;   aObliga = "N";  nOrden = 4;  |HAZ MeteCampo;
     nCampo  = 14;  aObliga = "S";  nOrden = 5;  |HAZ MeteCampo;
     nCampo  = 11;  aObliga = "S";  nOrden = 6;  |HAZ MeteCampo;
     nCampo  = 12;  aObliga = "S";  nOrden = 7;  |HAZ MeteCampo;
     nCampo  = 13;  aObliga = "S";  nOrden = 8;  |HAZ MeteCampo;
     nCampo  = 27;  aObliga = "N";  nOrden = 9;  |HAZ MeteCampo;
     nCampo  = 16;  aObliga = "N";  nOrden = 10; |HAZ MeteCampo;
     nCampo  = 21;  aObliga = "N";  nOrden = 11; |HAZ MeteCampo;
     nCampo  = 22;  aObliga = "N";  nOrden = 12; |HAZ MeteCampo;
     nCampo  = 23;  aObliga = "N";  nOrden = 13; |HAZ MeteCampo;
     nCampo  = 24;  aObliga = "N";  nOrden = 14; |HAZ MeteCampo;
     nCampo  = 25;  aObliga = "N";  nOrden = 15; |HAZ MeteCampo;
     nCampo  = 26;  aObliga = "N";  nOrden = 16; |HAZ MeteCampo;
     nCampo  = 28;  aObliga = "N";  nOrden = 17; |HAZ MeteCampo;
     nCampo  = 19;  aObliga = "N";  nOrden = 18; |HAZ MeteCampo;
     nCampo  = 20;  aObliga = "N";  nOrden = 19; |HAZ MeteCampo;
     nCampo  = 17;  aObliga = "N";  nOrden = 20; |HAZ MeteCampo;

     |DESCARGA_DEF #tablas@;
|FPRC;

|PROCESO Estructura190_2015;
     aMas = aDef + "dsm190li.mas";
     |CARGA_DEF aMas, tablas@;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     nCampo  = 999; aObliga = "N";  nOrden = 0;  |HAZ MeteCampo;
     nCampo  = 6;   aObliga = "S";  nOrden = 1;  |HAZ MeteCampo;
     nCampo  = 12;  aObliga = "S";  nOrden = 2;  |HAZ MeteCampo;
     nCampo  = 13;  aObliga = "S";  nOrden = 3;  |HAZ MeteCampo;
     nCampo  = 8;   aObliga = "S";  nOrden = 4;  |HAZ MeteCampo;
     nCampo  = 9;   aObliga = "S";  nOrden = 5;  |HAZ MeteCampo;
     nCampo  = 16;  aObliga = "S";  nOrden = 6;  |HAZ MeteCampo;
     nCampo  = 17;  aObliga = "N";  nOrden = 7;  |HAZ MeteCampo;
     nCampo  = 18;  aObliga = "N";  nOrden = 8;  |HAZ MeteCampo;
     nCampo  = 19;  aObliga = "N";  nOrden = 9;  |HAZ MeteCampo;
     nCampo  = 20;  aObliga = "N";  nOrden = 10; |HAZ MeteCampo;
     nCampo  = 21;  aObliga = "N";  nOrden = 11; |HAZ MeteCampo;
     nCampo  = 22;  aObliga = "N";  nOrden = 12; |HAZ MeteCampo;
     nCampo  = 23;  aObliga = "N";  nOrden = 13; |HAZ MeteCampo;
     nCampo  = 24;  aObliga = "N";  nOrden = 14; |HAZ MeteCampo;
     nCampo  = 14;  aObliga = "S";  nOrden = 15; |HAZ MeteCampo;
     nCampo  = 26;  aObliga = "N";  nOrden = 16; |HAZ MeteCampo;
     nCampo  = 27;  aObliga = "N";  nOrden = 17; |HAZ MeteCampo;
     nCampo  = 25;  aObliga = "N";  nOrden = 18; |HAZ MeteCampo;
     nCampo  = 40;  aObliga = "N";  nOrden = 19; |HAZ MeteCampo;
     nCampo  = 65;  aObliga = "N";  nOrden = 20; |HAZ MeteCampo;
     nCampo  = 10;  aObliga = "S";  nOrden = 21; |HAZ MeteCampo;
     nCampo  = 64;  aObliga = "N";  nOrden = 22; |HAZ MeteCampo;

     |DESCARGA_DEF #tablas@;
|FPRC;

|PROCESO Estructura190_2016;
     aMas = aDef + "dsm19001.mas";
     |CARGA_DEF aMas, tablas@;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     nCampo  = 999; aObliga = "N";  nOrden = 0;  |HAZ MeteCampo;
     nCampo  = 6;   aObliga = "S";  nOrden = 1;  |HAZ MeteCampo;
     nCampo  = 12;  aObliga = "S";  nOrden = 2;  |HAZ MeteCampo;
     nCampo  = 13;  aObliga = "S";  nOrden = 3;  |HAZ MeteCampo;
     nCampo  = 8;   aObliga = "S";  nOrden = 4;  |HAZ MeteCampo;
     nCampo  = 9;   aObliga = "S";  nOrden = 5;  |HAZ MeteCampo;
     nCampo  = 16;  aObliga = "S";  nOrden = 6;  |HAZ MeteCampo;
     nCampo  = 65;  aObliga = "N";  nOrden = 7;  |HAZ MeteCampo;
     nCampo  = 17;  aObliga = "N";  nOrden = 8;  |HAZ MeteCampo;
     nCampo  = 66;  aObliga = "N";  nOrden = 9;  |HAZ MeteCampo;
     nCampo  = 18;  aObliga = "N";  nOrden = 10; |HAZ MeteCampo;
     nCampo  = 67;  aObliga = "N";  nOrden = 11; |HAZ MeteCampo;
     nCampo  = 19;  aObliga = "N";  nOrden = 12; |HAZ MeteCampo;
     nCampo  = 68;  aObliga = "N";  nOrden = 13; |HAZ MeteCampo;
     nCampo  = 20;  aObliga = "N";  nOrden = 14; |HAZ MeteCampo;
     nCampo  = 69;  aObliga = "N";  nOrden = 15; |HAZ MeteCampo;
     nCampo  = 21;  aObliga = "N";  nOrden = 16; |HAZ MeteCampo;
     nCampo  = 22;  aObliga = "N";  nOrden = 17; |HAZ MeteCampo;
     nCampo  = 23;  aObliga = "N";  nOrden = 18; |HAZ MeteCampo;
     nCampo  = 24;  aObliga = "N";  nOrden = 19; |HAZ MeteCampo;
     nCampo  = 14;  aObliga = "S";  nOrden = 20; |HAZ MeteCampo;
     nCampo  = 26;  aObliga = "N";  nOrden = 21; |HAZ MeteCampo;
     nCampo  = 27;  aObliga = "N";  nOrden = 22; |HAZ MeteCampo;
     nCampo  = 25;  aObliga = "N";  nOrden = 23; |HAZ MeteCampo;
     nCampo  = 40;  aObliga = "N";  nOrden = 24; |HAZ MeteCampo;
     nCampo  = 10;  aObliga = "S";  nOrden = 26; |HAZ MeteCampo;
     nCampo  = 64;  aObliga = "N";  nOrden = 27; |HAZ MeteCampo;

     |DESCARGA_DEF #tablas@;
|FPRC;

|PROCESO Estructura190;
     |SI #dsmox001#3 [ 2015;
         |HAZ Estructura190_2015;
     |FINSI;

     |SI #dsmox001#3 ] 2016;
         |HAZ Estructura190_2016;
     |FINSI;
|FPRC;

|PROCESO Estructura193;
     aMas = aDef + "dsm193li.mas";
     |CARGA_DEF aMas, tablas@;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     nCampo  = 999; aObliga = "N";  nOrden = 0;  |HAZ MeteCampo;
     nCampo  = 6;   aObliga = "S";  nOrden = 1;  |HAZ MeteCampo;
     nCampo  = 8;   aObliga = "S";  nOrden = 2;  |HAZ MeteCampo;
     nCampo  = 9;   aObliga = "S";  nOrden = 3;  |HAZ MeteCampo;
     nCampo  = 10;  aObliga = "S";  nOrden = 4;  |HAZ MeteCampo;
     nCampo  = 12;  aObliga = "S";  nOrden = 5;  |HAZ MeteCampo;
     nCampo  = 14;  aObliga = "S";  nOrden = 6;  |HAZ MeteCampo;
     nCampo  = 15;  aObliga = "N";  nOrden = 7;  |HAZ MeteCampo;
     nCampo  = 16;  aObliga = "N";  nOrden = 8;  |HAZ MeteCampo;
     nCampo  = 17;  aObliga = "N";  nOrden = 9;  |HAZ MeteCampo;
     nCampo  = 18;  aObliga = "N";  nOrden = 10; |HAZ MeteCampo;
     nCampo  = 19;  aObliga = "N";  nOrden = 11; |HAZ MeteCampo;
     nCampo  = 20;  aObliga = "S";  nOrden = 12; |HAZ MeteCampo;
     nCampo  = 22;  aObliga = "N";  nOrden = 13; |HAZ MeteCampo;
     nCampo  = 23;  aObliga = "S";  nOrden = 14; |HAZ MeteCampo;
     nCampo  = 24;  aObliga = "S";  nOrden = 15; |HAZ MeteCampo;
     nCampo  = 25;  aObliga = "S";  nOrden = 16; |HAZ MeteCampo;
     nCampo  = 26;  aObliga = "S";  nOrden = 17; |HAZ MeteCampo;
     nCampo  = 27;  aObliga = "N";  nOrden = 18; |HAZ MeteCampo;
     nCampo  = 28;  aObliga = "N";  nOrden = 19; |HAZ MeteCampo;
     nCampo  = 29;  aObliga = "N";  nOrden = 20; |HAZ MeteCampo;
     nCampo  = 30;  aObliga = "N";  nOrden = 21; |HAZ MeteCampo;
     nCampo  = 31;  aObliga = "N";  nOrden = 22; |HAZ MeteCampo;
     nCampo  = 32;  aObliga = "N";  nOrden = 23; |HAZ MeteCampo;

     |DESCARGA_DEF #tablas@;
|FPRC;

|PROCESO Estructura347;
     aMas = aDef + "dsmo2347.mas";
     |CARGA_DEF aMas, tablas@;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     nCampo  = 999; aObliga = "N";  nOrden = 0;   |HAZ MeteCampo;
     nCampo  = 6;   aObliga = "S";  nOrden = 1;   |HAZ MeteCampo;
     nCampo  = 7;   aObliga = "S";  nOrden = 2;   |HAZ MeteCampo;
     nCampo  = 11;  aObliga = "S";  nOrden = 3;   |HAZ MeteCampo;
     nCampo  = 29;  aObliga = "N";  nOrden = 4;   |HAZ MeteCampo;
     nCampo  = 16;  aObliga = "N";  nOrden = 5;   |HAZ MeteCampo;
     nCampo  = 17;  aObliga = "N";  nOrden = 6;   |HAZ MeteCampo;
     nCampo  = 18;  aObliga = "N";  nOrden = 7;   |HAZ MeteCampo;
     nCampo  = 19;  aObliga = "N";  nOrden = 8;   |HAZ MeteCampo;
     nCampo  = 20;  aObliga = "N";  nOrden = 9;   |HAZ MeteCampo;
     nCampo  = 21;  aObliga = "N";  nOrden = 10;  |HAZ MeteCampo;
     nCampo  = 22;  aObliga = "N";  nOrden = 11;  |HAZ MeteCampo;
     nCampo  = 23;  aObliga = "N";  nOrden = 12;  |HAZ MeteCampo;
     nCampo  = 28;  aObliga = "N";  nOrden = 13;  |HAZ MeteCampo;

     |DESCARGA_DEF #tablas@;
|FPRC;

|PROCESO Estructura349;
     aMas = aDef + "dsmoc349.mas";
     |CARGA_DEF aMas, tablas@;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     nCampo  = 999; aObliga = "N";  nOrden = 0;  |HAZ MeteCampo;
     nCampo  = 6;   aObliga = "S";  nOrden = 1;  |HAZ MeteCampo;
     nCampo  = 7;   aObliga = "S";  nOrden = 2;  |HAZ MeteCampo;
     nCampo  = 8;   aObliga = "S";  nOrden = 3;  |HAZ MeteCampo;
     nCampo  = 9;   aObliga = "S";  nOrden = 4;  |HAZ MeteCampo;
     nCampo  = 10;  aObliga = "S";  nOrden = 5;  |HAZ MeteCampo;
     nCampo  = 12;  aObliga = "S";  nOrden = 6;  |HAZ MeteCampo;
     nCampo  = 24;  aObliga = "N";  nOrden = 7;  |HAZ MeteCampo;
     nCampo  = 25;  aObliga = "N";  nOrden = 8;  |HAZ MeteCampo;
     nCampo  = 26;  aObliga = "N";  nOrden = 9;  |HAZ MeteCampo;
     nCampo  = 37;  aObliga = "N";  nOrden = 10; |HAZ MeteCampo;
     nCampo  = 39;  aObliga = "N";  nOrden = 11; |HAZ MeteCampo;

     |DESCARGA_DEF #tablas@;
|FPRC;

|PROCESO Estructuras;
     |DDEF aDef;

     |BUCLE dsmom902M;

     |SI #dsmox001#5 = 180;  |HAZ Estructura180;  |FINSI;
     |SI #dsmox001#5 = 190;  |HAZ Estructura190;  |FINSI;
     |SI #dsmox001#5 = 193;  |HAZ Estructura193;  |FINSI;
     |SI #dsmox001#5 = 347;  |HAZ Estructura347;  |FINSI;
     |SI #dsmox001#5 = 349;  |HAZ Estructura349;  |FINSI;

     |BUCLE dsmom902B;
|FPRC;
