|FICHEROS;
     dsmod216 #0;
     dsmom002 #2;
|FIN;

|VARIABLES;
     nSuma     = 0;
|FIN;

|INCLUYE i_variar;

|PROCESO Totales;
     #0#11  = #0#8;
     |SI #0#11 < 0;  #0#11 = 0;  |FINSI;

     |PINTA #0#11;
|FPRC;

|PROCESO SacaPantallas216;
     enEntrada = 1;
     |PUSHV 0401 2380;

     |ABRE #0;
     #0#0 = enEmpresa;
     #0#1 = enEjer;
     #0#2 = enPeriodo;
     #0#3 = enModelo;
     #0#4 = enComplem;
     #0#5 = enActividad;
     |LEE 101#0=;
     |SI FSalida ! 0;
         |DDEFECTO #0;
         #0#0 = enEmpresa;
         #0#1 = enEjer;
         #0#2 = enPeriodo;
         #0#3 = enModelo;
         #0#4 = enComplem;
         #0#5 = enActividad;
         |GRABA 020#0b;
     |FINSI;

     |PINPA #0#0;
     |PINDA #0#0;

     |ENDATOS #2#0;
     nSuma = #0#7 + #0#10;
     |SI FSalida = 0; |Y nSuma ! 0;
         |GRABA 020#0a;
     |SINO;
         enEntrada = 0;
         |BORRA 020#0a;
     |FINSI;

     |LIBERA #0;
     |CIERRA #0;
     |POPV;
|FPRC;

|PROGRAMA;
     eaNomDef  = "dsmod216";

     enEntrada = 0;

|| \\\\\\ Consulta del Modelo ////////

     |SI enTipoEntrada = 4;              || Consulta del Modelo
          |CABEZA "Modelo 216";
          |HAZ SacaPantallas;
          |ACABA;
     |FINSI;

     |SI enTipoEntrada = 1;              || Alta del Modelo
          |CABEZA "Modelo 216";
          |HAZ SacaPantallas216;
          enResultado = #0#11;
          |ACABA;
     |FINSI;

     |SI enTipoEntrada = 3;              || Baja del Modelo
         |ABRE #0;
         #0#0 = enEmpresa;
         #0#1 = enEjer;
         #0#2 = enPeriodo;
         #0#3 = enModelo;
         #0#4 = enComplem;
         #0#5 = enActividad;
         |LEE 101#0=;
         |SI FSalida = 0;
             |BORRA 020#0a;
         |FINSI;
         |LIBERA #0;
         |CIERRA #0;
         |ACABA;
     |FINSI;

|| \\\\\\ Comprobacion Existencia del Modelo

     |SI enTipoEntrada = 99;              || Existencia del Modelo ????
         |ABRE #0;
         #0#0 = enEmpresa;
         #0#1 = enEjer;
         #0#2 = enPeriodo;
         #0#3 = enModelo;
         #0#4 = enComplem;
         #0#5 = enActividad;
         |LEE 040#0=;
         |SI FSalida ! 0;  enExistencia = 1;  |DDEFECTO #0; |FINSI;
         |CIERRA #0;

         |SI enActividad = 0;  enResultado = #0#11;  |FINSI;
     |FINSI;
|FPRO;
