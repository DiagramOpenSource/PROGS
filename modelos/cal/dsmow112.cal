|FICHEROS;
   dsmoz041 #0;
   dsmow112 #41,MANTE;
   dsmom049 #49;

   dsmom107 #107;

   :/basica/def/agicen14 #114;
   :/basica/def/agifigen #1000;

    imagen41@ #441;

    dsmow110  #900,MANTE;
|FIN;

|VARIABLES;

  &eaDElem  = "";
  &eaHElem  = "";
  &enDNEle  = 0;
  &enHNEle  = 0;
  inkey     = 0;
  aAlfa1    = "";
  aAlfa2    = "";
  nFactor   = 0;
  nPorceMin = 0;
  nPorceMax = 0;
  nSwSal    = 0;
  nSwEsta   = 0;
  swModulo  = 0;
  nContenido   = "";
  fFecha       = @;
  fFechaUso    = @;
  fFechaVenta  = @;
  fPriVenta    = @;
  fFinVenta    = @;
  fPriCompra   = @;
  fFinCompra   = @;
  aAlfa        = "";
  nVAnyo       = 0;
  nDAnyo       = 0;
  nHAnyo       = 0;

   esalta    = 0;
   esaltaL   = 0;
   &sw_lin   = 0;
   &errconta = 0;
   &entrada  = 1;
   alfa1     = "";
   alfa2     = "";
   alfa3     = "";
   alfa4     = "";
   nume1     = 0;
   nume2     = 0;
   nume3     = 0;
   nume4     = 0;

   men1 = "2402Cantidad Negativa de Amort. Fiscal";
   men2 = "2443Cantidad Negativa de Amort. Contable";
   men3 = "2402Cantidad Negativa de Amort. Fiscal       Cantidad Negativa de Amort. Contable";
   men  = "";
   any = "";
   fiac = "  ";
   guarda = "  ";
   relleno = "                                       ";
   aponer = "  ";

   import = 0;
   import1 = 0;
   traba = @;
   elcon = 0;

   &aComVen = "";
   &enSwBien = 0;
   &aCamp1 = "";
   &nCamp2 = 0;
   &fCamp3 = @;
   &nCamp4 = 0;
   &nCamp5 = 0;
   &aCamp6 = "";
   &nCamp7 = 0;
   &aCamp8 = "";
   &nCamp9 = 0;
   ModoEntrLin = 0;
   nSwError = 0;

   nLaImpor  = 0;
   nTantoPor = 0;
   nTan      = 0;
   nAlta     = 0;
   nColor    = 0;
   nSwOpera  = 0;

   &eaGrAna    = "";
   &enQueAna   = 0;
   &nSwGrupo   = 0;
   &snFilBa    = "";
   nErGrupo    = 0;
   nGrupo      = 0;
   aCtaAcum    = "";
   nEj         = 0;

   &enSwPrim   = 0;
   nUltima     = 0;
   nModoLinea  = 0;
|FIN;

|INCLUYE i_variar;
|INCLUYE i_varcon;  || Variables de Contabilidad

**************************************************************************
LLAMADAS DESDE Amortizaciones Cabecera
**************************************************************************
|PROCESO EntraAlaLinea;  |TIPO 5;
|FPRC;

|CALCULO PresentaLinea;  |TIPO 7;
|FCAL;

                            || .... Desde Campo Elemento
|CALCULO tracodi; |TIPO 0;
     esalta  = (FEntrada / 100) ! 0;
|FCAL;

|CALCULO Tipo2_1;  |TIPO 2;
     esalta  = (FEntrada / 100) ! 0;
|FCAL;


|PROCESO Sumo;
 #900#13 = #900#13 + #49#10;
|FPRC;

|DEFBUCLE Sumo;
 #49#1;
 ;
 #900#0, #900#2, #900#3, 02;
 #900#0, #900#2, #900#3, 99;
 ;
 NULL, Sumo;
|FIN;

|CALCULO Para340; |TIPO 0;
  inkey = FSalida;
  |SI inkey ] 1; |Y inkey [ 5; |ACABA; |FINSI;

  |SI #41#41 = "S";
      |PUSHV 0501 2380;

      |SI enSwPrim = 0;
          enSwPrim = 1;
          |SI esalta = 1; |O #41#44 = " "; enSwPrim = 0; |FINSI;
      |FINSI;
      #900#0 = #41#0;
      #900#1 = #41#1;
      #900#2 = #41#2;
      #900#3 = #41#3;
      #900#4 = #41#4;
      #900#5 = #41#27;
      #900#6 = #41#10;

      #900#7 = #41#42;
      #900#8 = #41#43;
      #900#9 = #41#44; |SI #900#9 = " "; #900#9 = "N"; |FINSI;
      #900#10 = #41#45;
      #900#11 = #41#46;

      |SI #41#27 > "01.01.0000";
          aAlfa1 = #41#27; aAlfa1 = aAlfa1 % -104;
          enEjer = aAlfa1;
      |FINSI;

      #900#12 = enEjer;
      #900#13 = 0;
      |BUCLE Sumo;
      #900#14 = #900#8 + #900#13;

      #900#15 = #41#47;
      #900#16 = #41#48;
      #900#17 = #41#49;
      #900#18 = #41#50;
      #900#19 = #41#51;
      #900#20 = #41#52;
      #900#21 = #41#53;
      #900#22 = #41#26;
      #900#23 = #41#8;
      |SI #41#26 > "01.01.0000";
          aAlfa1 = #41#26; aAlfa1 = aAlfa1 % -104;
          #900#24 = aAlfa1;
      |FINSI;

      aAlfa1 = "N";
      |SI #900#22 > "01.01.0000"; aAlfa1 = "S"; |FINSI;
      |C_M #900#18, 1, aAlfa1;
      |C_M #900#19, 1, aAlfa1;
      |C_M #900#20, 1, aAlfa1;

      |PINPA #0#900;
      |PINDA #0#900;
      |ENDATOS #1#900;
      |SI FSalida = 0;
          #41#42 = #900#7;
          #41#43 = #900#8;
          #41#44 = #900#9;
          #41#45 = #900#10;
          #41#46 = #900#11;
          #41#47  = #900#15;
          #41#48  = #900#16;
          #41#49  = #900#17;
          #41#50  = #900#18;
          #41#51  = #900#19;
          #41#52  = #900#20;
          #41#53  = #900#21;
          #41#8   = #900#23;
      |FINSI;
      |POPV;
  |FINSI;
|FCAL;

|CALCULO elTipo3; |TIPO 3;
    #41#32 = #1000#1; ||A todas las cabeceras Nombre empresa
    #41#33 = #114#4;  ||                   Actividad
|FCAL;

|PROCESO inf441;
 #441#0 = enEmpresa;
 #441#4 = "";
|FPRC;

|PROCESO sup441;
 #441#0 = enEmpresa;
 #441#4 = "zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz";
|FPRC;

|CALCULO T11; |TIPO 11;
  inkey = FSalida;

  |SI inkey = 11;
      |LEE 141#41=;

      |ENCAMPO #41#41;

      |GRABA 000#41a;
      |LIBERA #41;

  |FINSI;

  |SI inkey = 10;
      enEmpresa  = #41#0;
      |DBASE aAlfa1; |QBF aAlfa1;
      aAlfa2 = aAlfa1 + "def/dsmom041.mas";
      |CARGA_DEF aAlfa2, imagen41@;
      |SI FSalida = 0;
          |ABRE #441;
          #441#0 = #41#0;
          #441#2 = #41#2;
          #441#3 = #41#3;
          #441#4 = #41#4;
          |CONSULTA_F_CLAVE #2#441,inf441,sup441;
          #41#0 = #441#0;
          #41#2 = #441#2;
          #41#3 = #441#3;
          |CIERRA #441;
          |DESCARGA_DEF #imagen41@;
          |PTEC 802;
      |FINSI;
  |FINSI;
|FCAL;
