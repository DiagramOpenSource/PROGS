|FICHEROS;
     aszp0008 #0;
|FIN;

|VARIABLES;
     aBase     = "";
     aAbogados = "";
     aTecla    = "";
     aAlfa     = "";
     aAlfa1    = "";
     aFacturar = "";
     aIntegral = "";
     nHandle   = 0;
     nAbogados = 0;
|FIN;

|PROCESO LeeAbogados;
     nAbogados = 0;

     |DBASS aBase;   |QBF aBase;
     aAbogados = aBase + "facturar/abogadox.men";
     |XABRE "U", aAbogados, nHandle;
     |PARA;  |SI  FSalida ] 0;  |HACIENDO;
             |XLEE nHandle, 250, aAlfa;
             |SI FSalida < 0;  |SAL;  |FINSI;

             |QBF aAlfa;
             aAlfa1 = aAlfa;

             aAlfa1 = aAlfa1 - "facturar";
             |SI aAlfa1 ! aAlfa;
                 nAbogados = 2;
                 |SAL;
             |FINSI;
     |SIGUE;
     |XCIERRA  nHandle;

     |SI nAbogados = 2;  |ACABA;  |FINSI;

     |DBASS aBase;   |QBF aBase;
     aAbogados = aBase + "facturar/abogado9.men";
     |XABRE "U", aAbogados, nHandle;
     |PARA;  |SI  FSalida ] 0;  |HACIENDO;
             |XLEE nHandle, 250, aAlfa;
             |SI FSalida < 0;  |SAL;  |FINSI;

             |QBF aAlfa;
             aAlfa1 = aAlfa;

             aAlfa1 = aAlfa1 - "facturar";
             |SI aAlfa1 ! aAlfa;
                 nAbogados = 1;
                 |SAL;
             |FINSI;
     |SIGUE;
     |XCIERRA  nHandle;
|FPRC;

|PROCESO CreaAbogados;
     |XABRE "W", aAbogados, nHandle;
     |SI FSalida ] 0;
         aAlfa = "#:Gestion de Abogados" + &13 + &10;
         |XGRABA nHandle, aAlfa;
     |FINSI;
     |XCIERRA nHandle;
|FPRC;

|PROGRAMA;
     |HAZ LeeAbogados;

     |SI nAbogados = 0;
         |PINPA #0#0;
         |LEETECLA aTecla;
         |HAZ CreaAbogados;
     |FINSI;

     |SI PARAMETRO = "abogados.men;i";
         |SI nAbogados = 2;
             aFacturar = aBase + "facturar/abogadox.men";
         |SINO;
             aFacturar = aBase + "facturar/abogado9.men";
         |FINSI;
         aIntegral = aBase + "integral/abogados.men";
         |COPIA_FICHERO aFacturar, aIntegral;
         PARAMETRO = "abogados.men";
     |FINSI;

     |SI PARAMETRO = "abogados.men;f";
         |SI nAbogados = 2;
             aFacturar = aBase + "facturar/abogadox.men";
         |SINO;
             aFacturar = aBase + "facturar/abogado9.men";
         |FINSI;
         aIntegral = aBase + "facturar/abogados.men";
         |COPIA_FICHERO aFacturar, aIntegral;
         PARAMETRO = "abogados.men";
     |FINSI;
|FPRO;
