|FICHEROS;
    aszp0003 #0;
    asconcep #1;
    asconcli #2;
    asclient #5;
    :/basica/def/agim0001 #4;
    :/basica/def/agitab03 #3;
    :/integral/def/dsam0008 #44;
|FIN;

|VARIABLES;
     Path        = "";
     MiraCliente = 0;
     nDConcepto  = 0;
     nHConcepto  = 0;

     &enBorra     = 0;
     &DCliente    = 0;
     &HCliente    = 0;
     &enEmpresa   = 0;
     &enConcepto  = 0;
     &enCodCli    = 0;
     &enSwDeDonde = 0;
|FIN;

|PROCESO Pasando44;
     |SI enBorra = 1;
         #3#0 = #44#2;
         |LEE 040#3=;
         |SI FSalida ! 0;  |DDEFECTO #3;  |FINSI;

         #2#0 = #44#0
         #2#1 = #3#2;
         #2#2 = #3#3;
         |LEE 101#2=;
         |SI FSalida = 0;
             |BORRA 020#2a;
             |LIBERA #2;
         |FINSI;

         |ACABA;
     |FINSI;

     |SI #44#12 ! "01.01.0000"; |Y #44#12 ! "00.00.0000";  |ACABA; |FINSI;

     |SI MiraCliente = 0;
         #5#0 = #44#0;
         |LEE 040#5=;
         |SI FSalida ! 0; |ACABA; |FINSI;
     |FINSI;

     #3#0 = #44#2;
     |LEE 040#3=;
     |SI FSalida ! 0;                   |ACABA; |FINSI;
     |SI #3#2 = "    "; |Y #3#3 = "  "; |ACABA; |FINSI;
     |SI #3#5 ! #48#0;  |Y #3#5 ! 0;    |ACABA; |FINSI;

     #1#0 = #3#2;
     #1#1 = #3#3;
     |LIBERA #1;
     |LEE 140#1=;
     |SI FSalida ! 0;
         |DDEFECTO #1;
         #1#0  = #3#2;
         #1#1  = #3#3;
         #1#2  = #3#1;
         #1#3  = #3#4;
         #1#4  = #44#5;
         #1#5  = "G";
         #1#16 = #1#2;
         |GRABA 140#1n;
     |FINSI;

     #2#0 = #44#0
     #2#1 = #3#2;
     #2#2 = #3#3;
     |LIBERA #2;
     |LEE 140#2=;
     |SI FSalida ! 0;
         |DDEFECTO #2;
         #2#0  = #44#0
         #2#1  = #3#2;
         #2#2  = #3#3;
         #2#3  = #3#4;
         #2#4  = #3#6;
         #2#6  = #3#1;
         #2#7  = #3#1;
         #2#10 = #44#5;
         |GRABA 140#2n;
     |SINO;
         |SI #0#2 = "S";
             #2#10 = #44#5;
             |GRABA 140#2a;
         |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE dsam0008;
     #44#1;
     ;
     #0#0, nDConcepto;
     #0#1, nHConcepto;
     ;
     NULL, Pasando44;
|FIN;

|PROCESO Pasando4;
     |SI #4#12 ! "01.01.0000"; |Y #4#12 ! "00.00.0000";  |ACABA; |FINSI;

     |SI MiraCliente = 0;
         #5#0 = #4#0;
         |LEE 040#5=;
         |SI FSalida ! 0; |ACABA; |FINSI;
     |FINSI;

     #3#0 = #4#2;
     |LEE 040#3=;
     |SI FSalida ! 0;                   |ACABA; |FINSI;
     |SI #3#2 = "    "; |Y #3#3 = "  "; |ACABA; |FINSI;
     |SI #3#5 ! #48#0;  |Y #3#5 ! 0;    |ACABA; |FINSI;

     #1#0 = #3#2;
     #1#1 = #3#3;
     |LIBERA #1;
     |LEE 140#1=;
     |SI FSalida ! 0;
         |DDEFECTO #1;
         #1#0  = #3#2;
         #1#1  = #3#3;
         #1#2  = #3#1;
         #1#3  = #3#4;
         #1#4  = #4#5;
         #1#5  = "G";
         #1#16 = #1#2;
         |GRABA 140#1n;
     |FINSI;

     #2#0 = #4#0
     #2#1 = #3#2;
     #2#2 = #3#3;
     |LIBERA #2;
     |LEE 140#2=;
     |SI FSalida ! 0;
         |DDEFECTO #2;
         #2#0  = #4#0
         #2#1  = #3#2;
         #2#2  = #3#3;
         #2#3  = #3#4;
         #2#4  = #3#6;
         #2#6  = #3#1;
         #2#7  = #3#1;
         #2#10 = #4#5;
         |GRABA 140#2n;
     |SINO;
         |SI #0#2 = "S";
             #2#10 = #4#5;
             |GRABA 140#2a;
         |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE agim0001;
     #4#1;
     ;
     #0#0, nDConcepto;
     #0#1, nHConcepto;
     ;
     NULL, Pasando4;
|FIN;

|PROCESO Tipo3;
     enCodCli = 0;
     |HAZ LeePersona;

     |SI enSwDeDonde = 1;
         |ABRE #1;
         |ABRE #2;
         |ABRE #3;
         |ABRE #5;
         |BUCLE dsam0008;
         |CIERRA #1;
         |CIERRA #2;
         |CIERRA #3;
         |CIERRA #5;
     |SINO;
         |ABRE #1;
         |ABRE #2;
         |ABRE #3;
         |ABRE #5;
         |BUCLE agim0001;
         |CIERRA #1;
         |CIERRA #2;
         |CIERRA #3;
         |CIERRA #5;
     |FINSI;
|FPRC;

|PROGRAMA;
     |SI enEmpresa ! 0;
         #0#0        = enEmpresa;
         #0#1        = enEmpresa;
         #0#2        = "S";
         nDConcepto  = enConcepto;
         nHConcepto  = enConcepto;

         |HAZ Tipo3;
         |ACABA;
     |FINSI;

     |SI DCliente ! 0;
         MiraCliente = 1;
         #0#0        = DCliente;
         #0#1        = HCliente;
         #0#2        = "N";
         nDConcepto  = 0;
         nHConcepto  = 99;
         |HAZ Tipo3;
         |ACABA;
     |FINSI;

     nDConcepto  = 0;
     nHConcepto  = 99;
     MiraCliente = 0;

     |CLS;
     |CABEZA "Pase Conceptos Contratados";
     |PINPA #0#0;
     |DDEFECTO #0;
     |PINDA #0#0;
     |ENDATOS #1#0;
     |SI FSalida = 0; |HAZ Tipo3; |FINSI;
|FPRO;
