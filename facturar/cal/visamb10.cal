|FICHEROS;
   visam010 #0;
   ascabmin #1;
   ascontro #2;
   ascontrt #450;
   asprepa1 #3;
   aslinmin #4;
   asconcep #5;
   asclient #6;

   asenlcon #9;
   asempcon #10;
   asw00001 #99;
   aslinmil #100;
   asconlin #11;

   asm00013 #500;
|FIN;

|VARIABLES;
     &enNumFac = 0;
     &eaSerFac = "";

     c_fecha = "";

    nVariable     = 0;
    nFichero      = 0;
    nCliente      = 0;
    aSeccion      = "";
    aConcepto     = "";

 c_clie  = "";
 fijo    = "";
 sw        = 0;
 sw_existe = 0;
 fecha     = @;
 varalf    = "";
 conver    = "";
 conver1   = "";
 conver2   = "";
|FIN;

|INCLUYE pastil_i;

|PROCESO HistCuotCli;
   |SALVA_FICHA #asm00013;
   #asm00013#2 = #1#27;
   #asm00013#3 = #1#28;
   |GRABA 020#asm00013.n;
   |REPON_FICHA #asm00013;
   |BORRA 020#asm00013.a;
|FPRC;

|DEFBUCLE HistCuotCli;
#asm00013#1;
;
#1#0,#1#1,"  ",00000,"N",001,01;
#1#0,#1#1,"  ",00000,"N",999,99;
be;
NULL,HistCuotCli;
|FIN;

|CALCULO ponefac;
    p_imp = #0#9;
|HAZ pastilla;
|SI #1#28 = 0;|Y p_cen = 0;
   #1#27 = #0#12;
   #1#28 = #0#13;
   #1#29 = #0#9;

   |GRABA 020#1a;
   |LIBERA #1;

   eaSerFac = #1#27;
   enNumFac = #1#28;

   |BUCLE HistCuotCli;
|FINSI;
|FCAL;

|DEFBUCLE visam0101;
#1#1;
;
#0#10, #0#2;
#0#10, #0#3;
be;
NULL, ponefac;
|FIN;

|CALCULO prepara;|TIPO 3;
     fecha = #0#9;
     varalf = (fecha % 102) + (fecha % 402);

     |ABRE #2;
     |LEE 000#2p;
     |SI FSalida ! 0;  |DDEFECTO #2;  |FINSI;
     |CIERRA #2;

     |BUCLE visam0101;
|FCAL;
