|FICHEROS;
   asexprec #0;

   asexpeca #1;
   asexpeli #2;
   asconcep #3;
   asconcli #11;
   asclient #4;
|FIN;

|FIN;

|VARIABLES;
    seleccio   = 0;
    aAlfa      = "";
    hay_lineas = 0;
    nHay       = 0;
|FIN;

|PROCESO linealin;
   hay_lineas = 1;

   #11#0 = #1#1;
   #11#1 = #2#4;
   #11#2 = #2#5;
   |LEE 040#11=;
   |SI FSalida = 0;
       #2#10 = #11#3;
       #2#14 = #11#5;
   |SINO;
       #3#0 = #2#4;
       #3#1 = #2#5;
       |LEE 040#3=;
       |SI FSalida = 0;
           |SI #3#3 = "N"; #2#15   = "S"; |FINSI;
           |SI #4#22 = 1;  #2#14 = #3#5;  |FINSI;
           |SI #4#22 = 2;  #2#14 = #3#9;  |FINSI;
           |SI #4#22 = 3;  #2#14 = #3#11; |FINSI;
           |SI #4#22 = 4;  #2#14 = #3#13; |FINSI;
           |SI #4#22 = 5;  #2#14 = #3#15; |FINSI;
       |FINSI;
       |CIERRA #4;
       #2#10 = #3#3;
   |FINSI;
   #2#13 = #2#12 * #2#11;

   |SI #2#10 = "H";  #1#6 = #1#6 + #2#13;  |FINSI;
   |SI #2#10 = "S";  #1#7 = #1#7 + #2#13;  |FINSI;
   |SI #2#10 = "A";  #1#8 = #1#8 + #2#13;  |FINSI;

   |SI #2#15 = "N";
       nHay = 1;
       |SI #2#10 = "H"; #1#9  = #1#9 +  #2#13; |FINSI;
       |SI #2#10 = "S"; #1#10 = #1#10 + #2#13; |FINSI;
       |SI #2#10 = "A"; #1#11 = #1#11 + #2#13; |FINSI;
   |FINSI;
|FPRC;

|PROCESO lee_cabeceras1;
   #0#7 = #1#0;    |PINTA #0#7;
   #0#8 = #1#14;   |PINTA #0#8;

   |DDEFECTO #4;
   #4#0 = #1#1;
   |LEE 040#4=;        || lee cliente
   |SI FSalida = 0;
       #1#2 = #4#2;
       aAlfa = #1#2; |QBF aAlfa;
       |SI aAlfa = ""; #1#2 = #4#1; |FINSI;
   |FINSI;

   #1#6 = 0;  #1#9  = 0;
   #1#7 = 0;  #1#10 = 0;
   #1#8 = 0;  #1#11 = 0;

   hay_lineas = 0;
   nHay       = 0;
   |BUCLELIN 2linealin#1;             || calcula total lineas

   |SI hay_lineas = 1;
       |SI nHay = 1;
           #1#12 = "N";
       |FINSI;
       |SI #1#12 = "N";  #1#4 = "01.01.0000";  |FINSI;
       |GRABA 020#1a;
   |SINO;
       |BORRA 020#1a;
   |FINSI;
   |LIBERA #1;
   seleccio = 1;
|FPRC;

|DEFBUCLE lee_cabeceras;
    #1#1;
    1;
    #0#0, #0#2, #0#4;
    #0#1, #0#3, #0#5;
    be;
    NULL, lee_cabeceras1;
|FIN;


|PROCESO Tipo3; |TIPO 3;

     |SI #0#6 ! "SI"; |ACABA; |FINSI;

     |C_V #0#7, 1, "S"; |C_V #0#8, 1, "S";

     seleccio = 0;
     |ABRE #3;
     |ABRE #4;
     |ABRE #11;
     |BUCLE lee_cabeceras;
     |CIERRA #11;
     |CIERRA #4;
     |CIERRA #3;

     |SI seleccio = 0;
         |MENAV "0000No existe Expedientes en la Seleccion";
     |FINSI;
|FPRC;
