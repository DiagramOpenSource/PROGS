|FICHEROS;
     ascontro #0;
     asconcep #1;
     ascontrt #2,MANTE;
     ascabmin #3;
|FIN;

|VARIABLES;
     aPass    = "";

     nModo    = 0;
     nEntrada = 0;
     nIVA     = 0;
|FIN;

|PROCESO ascabmin;
     #3#23 = #3#22 % #2#3;
     #3#24 = #3#22 + #3#23 + #3#18;
     #3#26 = #3#24 - #3#25 - #3#19;
     |GRABA 020#3a;
     |LIBERA #3;
|FPRC;

|DEFBUCLE ascabmin;
     #3#1;
     ;
     #2#0, 00001;
     #2#0, 99999;
     be;
     NULL, ascabmin;
|FIN;

|PROCESO Tipo2trt;  |TIPO 2;
     nEntrada = 0 +. 1;
     |SI nEntrada ! 1;
         nIVA = #2#3;
     |FINSI;

     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 1;  |ACABA;  |FINSI;

     |SI nIVA ! #2#3;
         |ABRE #3;
         #3#0 = #2#0;
         #3#1 = 1;
         |LEE 000#3];
         |SI FSalida = 0;  |Y  #3#0 = #2#0;
             |MENAV "0000Hay minutas creadas con este tipo de facturacion.";
             |CONFI "0000SQuiere recalcular las minutas con el nuevo porcentaje de IVA";
             |SI FSalida = 0;  |BUCLE ascabmin;  |FINSI;
         |FINSI;
         |CIERRA #3;
     |FINSI;
|FPRC;

|| -------------------------------------------------------------------------


|PROCESO saldo; |TIPO 0;
     |C_M #0#33, 1, "S";
     |C_M #0#34, 1, "S";
     |SI #0#32 = "N";
         |C_M #0#33, 1, "N";
         |C_M #0#34, 1, "N";
     |FINSI;
|FPRC;

|PROCESO concepto; |TIPO 0;
     |SI #0#33 = "    "; |Y #0#34 = "  "; |ACABA; |FINSI;

     |ABRE #1;
     #1#0 = #0#33;
     #1#1 = #0#34;
     |LEE 040#1=;
     |SI FSalida ! 0;
         |MENAV "     No existe concepto ";
         |CIERRA #1;
         |ERROR;
         |ACABA;
     |FINSI;

     |SI #1#3 ! "A";
         |MENAV "     El concepto no es un A CUENTA ";
         |ERROR;
     |FINSI;
     |CIERRA #1;
|FPRC;

|PROCESO Tipo0C35;
     |SI #0Campo ! Contenido;
         |MENAV "0000Esta cambiando el contenido del campo. A continuacion introduzca la clave ";

         E_inf = "";
         E_sup = "10";
         aPass = 1352 ? -1;
         |SI aPass ! "HAMPERDIN ";
             |MENAV "0000Clave incorrecta.";
             #0Campo = Contenido;  |PINTA #0Campo;
         |FINSI;
     |FINSI;
|FPRC:


|PROCESO Baja2;
     #2#0 = 0;
|FPRC;

|PROCESO Alta2;
     #2#0 = 99;
|FPRC;

|PROGRAMA;
     |CLS;
     |PINPA #0#0;
     |CABEZA "Control de Facturas";

     |ABRE #0;
     |DDEFECTO #0;
     |LEE 101#0p;
     |SI FSalida ! 0;
         |DDEFECTO #0;
         |GRABA 020#0b;
     |FINSI;

     |SI #0#10 ! "SI";  |Y #0#10 ! "NO";
         #0#10 = "NO";
     |FINSI;

     |PINDA #0#0;

     |ENTLINEAL #1#2, -1, 2, 22, 0, Baja2, Alta2;

     |ENDATOS #1#0;
     |SI FSalida = 0;
         |GRABA 020#0a;
     |FINSI;
     |LIBERA #0;
     |CIERRA #0;
|FPRO;
