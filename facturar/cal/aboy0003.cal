|FICHEROS;
     aboy0003 #0;
     ashismil #1;
     ashismic #2;
     abom0001 #3;
     asconcep #4;
     abow0010 #99;
|FIN;

|VARIABLES;
     nCampo      = 0;
     nGrabaTempo = 0;
     aFichero    = "";
|FIN;

|PROCESO El12;  |TIPO 0;
     |SI #0#12 = 0;
         |PARA nCampo = 13;  |SI nCampo [ 21;  |HACIENDO nCampo = nCampo + 1;
               |C_M #0nCampo, 1, "N";
               #0nCampo = 0;  |PINTA #0nCampo;
         |SIGUE;
     |SINO;
         |PARA nCampo = 13;  |SI nCampo [ 21;  |HACIENDO nCampo = nCampo + 1;
               |C_M #0nCampo, 1, "S";
         |SIGUE;
     |FINSI;
|FPRC;

|PROCESO GrabaTempo;
     |SI #0#12 ! 0;
         |PARA nCampo = 12;  |SI nCampo [ 21;  |HACIENDO nCampo = nCampo + 1;
               |SI #0nCampo = #2#35;  |SAL;  |FINSI;
         |SIGUE;

         |SI nCampo = 22;  nCampo = 21;  |FINSI;
         |SI #0nCampo ! #2#35;  |ACABA;  |FINSI;
     |FINSI;

     |DDEFECTO #3;
     |SI #1#15 ! 0;
         #3#0 = #1#15;
         |LEE 040#3=;
         |SI FSalida ! 0;  |DDEFECTO #3;  |FINSI;
     |FINSI;

     #4#0   = #1#4;
     #4#1   = #1#5;
     |LEE 040#4=;
     |SI FSalida ! 0;  |DDEFECTO #4;  |FINSI;

     |SI #4#3 ! "H";  |ACABA;  |FINSI;

     #99#0  = #3#13;
     #99#1  = #1#0;
     #99#2  = #1#1;
     #99#3  = #1#2;
     #99#4  = #3#14;
     #99#5  = #2#29;
     #99#6  = #2#35;
     #99#7  = #2#36;
     #99#8  = #2#3;
     #99#9  = #2#5;
     #99#10 = #1#13;
     #99#11 = #2#22;
     #99#12 = #99#10 % #99#11;
     #99#13 = #99#10 - #99#12;
     |GRABA 020#99n;
     |LIBERA #99;

     nGrabaTempo = 1;
|FPRC;

|DEFBUCLE ashismic;
     #2#1;
     29, 3, 35;
     #0#0, #0#2, #0#4, #0#6, #0#10;
     #0#1, #0#3, #0#5, #0#7, #0#11;
     ;
     NULL, NULL, GrabaTempo;
|FIN;

|PROCESO Imprime;
     |PRINT;
|FPRC;

|DEFBUCLE abow0010;
     #99#1;
     ;
     #0#8, #0#0, #0#2, 001;
     #0#9, #0#1, #0#3, 999;
     ;
     NULL, Imprime;
|FIN;

|PROCESO Tipo3;  |TIPO 3;
     |IMPRE 0;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     |INFOR "aboy0003";
     |SI FSalida ! 0;  |FINIMP;  |ACABA;  |FINSI;

     aFichero = ("b2" + Usuario + "zzzzzzzz") % 108;  |NOME_DAT #99 aFichero;
     |ABRE #99;  |CIERRA #99;  |DELINDEX #99;

     |ABRE #99;
     |ABRE #3;
     |ABRE #4;
     |BUCLE ashismic;
     |CIERRA #99;
     |CIERRA #3;
     |CIERRA #4;

     |SI nGrabaTempo ! 0;
         |BUCLE abow0010;
         |PIEINF;
     |FINSI;

     |FININF;
     |FINIMP;

     |ABRE #99;  |CIERRA #99;  |DELINDEX #99;
|FPRC;
