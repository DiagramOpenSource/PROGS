|FICHEROS;
   asm00020 #0;

   asexpeca #10;
   asexpeli #11;
   asconcep #12;
|FIN;

|VARIABLES;
   &enTotalH  = 0;
   &enTotalA  = 0;
   &enTotalS  = 0;
   &enContLin = 0;
   &enSw      = 0;
   &enPagina  = 1;

   nNumLin    = 0;
   nCliente   = 0;
   nPrimero   = 1;

   aAlfa      = "";

   nCalc      = 0;
   nCalc1     = 0;
   nHay       = 0;

   nPrint     = 0;
|FIN;

|PROCESO LinExped;
   #asconcep#0 = #asexpeli#4;
   #asconcep#1 = #asexpeli#5;
   |LEE 000#asconcep.=;
   |SI FSalida ! 0; |DDEFECTO #asconcep; |FINSI;

   |SI #asconcep#3 = "H"; enTotalH = enTotalH + #asexpeli#13; |FINSI;
   |SI #asconcep#3 = "A"; enTotalA = enTotalA + #asexpeli#13; |FINSI;
   |SI #asconcep#3 = "S"; enTotalS = enTotalS + #asexpeli#13; |FINSI;

   |SI nPrint = 0;
       enSw = 1; |PRINT; nPrint = 1;
       enSw = 3;
   |FINSI;
   |HAZ MiraLineas; enSw = 4;
|FPRC;

|DEFBUCLE LinExped;
   #asexpeli#1;
   15;
   #asexpeca#0, #asexpeca#14,01,"N";
   #asexpeca#0, #asexpeca#14,99,"N";
   ;
   NULL,LinExped;
|FIN;

|PROCESO Expedientes;
   |SI nCliente ! #asexpeca#1;
       enSw = 1;  nPrint = 0; ||  |HAZ MiraLineas;
       nCliente = #asexpeca#1;
   |FINSI;
   enSw = 3;
   |BUCLE LinExped;
   |SI enSw = 4; enSw = 5; |HAZ MiraLineas; |FINSI;
   enTotalH = 0;
   enTotalS = 0;
   enTotalA = 0;
|FPRC;

|DEFBUCLE Expedientes;
   #asexpeca#3;
   12;
   #asm00020#0, #asm00020#1, #asm00020#2, "N";
   #asm00020#3, #asm00020#4, #asm00020#5, "N";
   ;
   NULL,Expedientes;
|FIN;

|PROCESO MiraLineas;
/*
  || esto era para contar las lineas

   |SI enSw = 1; nCalc = enContLin + 12; |FINSI;
   |SI enSw = 2; nCalc = enContLin + 10; |FINSI;
   |SI enSw = 3; nCalc = enContLin + 8; |FINSI;
   |SI enSw = 4; nCalc = enContLin + 4; |FINSI;
   |SI enSw = 5; nCalc = enContLin + 2; |FINSI;
   |SI nCalc > nNumLin;
      nCalc1 = enSw;
      |PARA; |SI enContLin [ nNumLin; |HACIENDO enContLin = enContLin + 1;
         enSw = 6; |PRINT;
      |SIGUE;
      |PIEINF; enPagina = enPagina + 1;
      enContLin = 5; enSw = nCalc1;
      |SI enSw = 2;
         enSw = 1; enContLin = enContLin + 2; |PRINT;
      |FINSI;
      |SI enSw = 3;
         enSw = 1; enContLin = enContLin + 2; |PRINT;
         enSw = 2; enContLin = enContLin + 2; |PRINT;
      |FINSI;
      |SI enSw = 4;
         enSw = 1; enContLin = enContLin + 2; |PRINT;
         enSw = 2; enContLin = enContLin + 2; |PRINT;
         enSw = 3; enContLin = enContLin + 3; |PRINT;
      |FINSI;
      enSw = nCalc1;
   |FINSI;

   |SI enSw = 1; enContLin = enContLin + 2; |FINSI;
   |SI enSw = 2; enContLin = enContLin + 2; |FINSI;
   |SI enSw = 3; enContLin = enContLin + 3; |FINSI;
   |SI enSw = 4; enContLin = enContLin + 1; |FINSI;
   |SI enSw = 5; enContLin = enContLin + 2; |FINSI;
   |SI enSw = 6; enContLin = enContLin + 1; |FINSI;
*/

   |PRINT; nHay = 1;
|FPRC;

|PROGRAMA;
   |CLS;
   |CABEZA " Informe cargos pendientes de facturar expedientes ";
   |PINPA #0#0; |PINDA #0#0;
   |ENDATOS #1#0;
   |SI FSalida = 0;
       |IMPRE 0;
       |SI FSalida = 0;
|| ...           |CIMPR 11; nNumLin = FSalida;
           |INFOR "asm00020";
           |SI FSalida = 0;
               |ABRE #asconcep;
               enTotalH  = 0;
               enTotalS  = 0;
               enTotalA  = 0;
               enContLin = 5;
               nHay      = 0;
               |BUCLE Expedientes;
               |SI nHay = 1; |PIEINF; |FINSI;

||               |PARA; |SI enContLin [ nNumLin; |HACIENDO enContLin = enContLin + 1;
||                      enSw = 6; |PRINT;
||               |SIGUE;

              |FININF;
              |CIERRA #asconcep;
         |FINSI;
         |FINIMP;
      |FINSI;
   |FINSI;
|FPRO;
