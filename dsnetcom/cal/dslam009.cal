|FICHEROS;
     dsnetm00  #0;
     || dslam008  #8;
     dslam009  #9;
     dslam010 #10,MANTE;
     dsnetm07  #7;

     nomconca@ #900;
     nomconli@ #901;
     nomdesam@ #902;
     dsnetw03;
|FIN;

|VARIABLES;
     aBase      = "";
     aFich      = "";
     aMas       = "";
     aAlfa      = "";

     nModo      = 0;
     nForma     = 0;
     aDescripcion = "";
     aDescripcionWeb = "";
|FIN;

|PROCESO dslam010B;
     |BORRA 020#10a;
     |LIBERA #10;
|FPRC;

|DEFBUCLE dslam010B;
     #10#1;
     ;
     #9#0, #9#1, 000;
     #9#0, #9#1, 999;
     be;
     NULL, dslam010B;
|FIN;

|PROCESO Baja10;
     |BUCLE dslam010B;
|FPRC;

|PROCESO Tipo2m09;  |TIPO 2;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 3;
         |HAZ Baja10;
         |ACABA;
     |FINSI;

     nForma = 0 +. 1;
     |SI nForma = 1;
         |HAZ SacaLaboral;
     |FINSI;
|FPRC;

|PROCESO Tipo11m09;  |TIPO 11;
     |SI FSalida ! 10;  |ACABA;  |FINSI;

     |SELECT #2#7;
     #7#1 = "LABORAL";
     #7#2 = #9#1;
     |LEE 040#7=;
     |SI FSalida ! 0;  |DDEFECTO #7;  |FINSI;

     |CONSULTA_CLAVE #2#7;
     |SI FSalida = 0;  #9#1 = #7#2;  |FINSI;

     |PINTA #9#1;
     |ERROR;
|FPRC;

|PROCESO LeeEmpresa;  |TIPO 0;
     |SELECT #2#7;
     #7#1 = "LABORAL";
     #7#2 = #9#1;
     |LEE 040#7=;
     |SI FSalida ! 0;
         |MENAV "        No existe Empresa en las Usuarios-Empresas";
         |ERROR;
         |ACABA;
     |FINSI;

     #9#2 = #7#3;

     |PINTA #9#2;
|FPRC;

|PROCESO ClaveBaja10;
     #10#1 = #9#1;
     #10#2 = 001;
     #10#3 = 101;
|FPRC;

|PROCESO ClaveAlta10;
     #10#1 = #9#1;
     #10#2 = 999;
     #10#3 = 999;
|FPRC;

|PROCESO Tipo7m09; |TIPO 7;
     |ABRE #10;
     || #9#0 = #8#0;
     #10#1 = #9#1;
     #10#2 = 1;
     #10#3 = 1;
     |LEE 040#10];
     |CIERRA #10;

     |ENTLINEAL #1#10, -2, 7, 22, 0, ClaveBaja10, ClaveAlta10;
|FPRC;

|PROCESO ClaveBaja9;
     #9#1 = 00001;
|FPRC;

|PROCESO ClaveAlta9;
     #9#1 = 99999;
|FPRC;

|PROGRAMA;
     |CLS;
     |CABEZA "Ctos.Salariales WEB";
     |ABRE #7;
     |ENTLINEAL #1#9, -1, 2, 13, 1, ClaveBaja9, ClaveAlta9;
     |CIERRA #7;
|FPRO;

|RUTINA ClaveBaja901;
     #901#0 = #10#2;
     #901#2 = 101;
|FRUT;

|RUTINA ClaveAlta901;
     #901#0 = #10#2;
     #901#2 = 999;
|FRUT;

|PROCESO Conceptos900;
     |SI #10#3 = 901;
          aDescripcion = "Hor. Sub";
     |FINSI;
     |SI #10#3 = 902;
          aDescripcion = "Dias Ind";
     |FINSI;
     |SI #10#3 = 903;
          aDescripcion = "Jornadas";
     |FINSI;
     |SI #10#3 = 904;
          aDescripcion = "Dias Vac";
     |FINSI;
     |SI #10#3 = 905;
          aDescripcion = "Min.Cot.";
     |FINSI;
     |SI #10#3 = 906;
          aDescripcion = "Antic. 1";
     |FINSI;
     |SI #10#3 = 907;
          aDescripcion = "Antic. 2";
     |FINSI;
     |SI #10#3 = 908;
          aDescripcion = "Especie ";
     |FINSI;
     |SI #10#3 = 909;
          aDescripcion = "Horas TP";
     |FINSI;
     |SI #10#3 = 910;
          aDescripcion = "Hor. Sem";
     |FINSI;
     |SI #10#3 = 911;
          aDescripcion = "Hor. Mes";
     |FINSI;
     |SI #10#3 = 912;
          aDescripcion = "H.Mes TP";
     |FINSI;
     |SI #10#3 = 914;
          aDescripcion = "Dias TP.";
     |FINSI;
     |SI #10#3 = 915;
          aDescripcion = "Vac.Ptes";
     |FINSI;
     |SI #10#3 = 916;
          aDescripcion = "Ded.S.S.";
     |FINSI;
     |SI #10#3 = 917;
          aDescripcion = "Dias TC2";
     |FINSI;
     |SI #10#3 = 918;
          aDescripcion = "Hor. TC2";
     |FINSI;
     |SI #10#3 = 919;
          aDescripcion = "For.IRPF";
     |FINSI;
     |SI #10#3 = 920;
          aDescripcion = "Prom.Ind";
     |FINSI;
     |SI #10#3 = 921;
          aDescripcion = "Ant.P.Ex";
     |FINSI;
     |SI #10#3 = 922;
          aDescripcion = "Jorn. IT";
     |FINSI;
|FPRC;

|PROCESO AyudaConcepto;  |TIPO 11;
     |SI FSalida = 10;
         #901#0 = #10#2;
         #901#2 = #10#3;
         |LEE 040#901=;
         |SI FSalida ! 0;  |DDEFECTO #901;  |FINSI;

         |CONSULTA_F_CLAVE #1#901, ClaveBaja901, ClaveAlta901;
         |SI FSalida = 0;
              #10#3 = #901#2;
              |PINTA #10#3;
         |FINSI;

         |ENCAMPO #3#10;
     |FINSI;

     |SI FSalida = 11;
          |PUSHV 05012380;
          |PINPA #0#dsnetw03;
          |PAUSA;
          |POPV;
          |ENCAMPO #3#10;
     |FINSI;
|FPRC;

|PROCESO LeeConcepto; |TIPO 0;
     |SI #10#3 ] 901; |Y #10#3 [ 922;
          |HAZ Conceptos900;
     |SINO;
          #901#0 = #10#2;
          #901#2 = #10#3;
          |LEE 040#901=;
          aDescripcion = #901#6;
          |QBF aDescripcion;
          |SI FSalida ! 0;
              |MENAV "    No existe el Concepto";
              |ERROR;
              |ACABA;
          |FINSI;

          #902#0 = #10#2;
          #902#1 = #10#3;
          |LEE 040#902=;
          aDescripcionWeb = #dslam010#5;
          |QBF aDescripcionWeb;
          nModo = (FEntrada / 100) ! 0;
          |SI FSalida = 0; |Y aDescripcionWeb = ""; |Y nModo = 1;
               |SI aDescripcion = "";
                    aDescripcionWeb = #902#2;
               |SINO;
                    aDescripcionWeb = aDescripcion;
               |FINSI;
               #10#5 = aDescripcionWeb;
               |PINTA #10#5;
          |FINSI;
     |FINSI;

     #10#4 = aDescripcion;
     |PINTA #10#4;
|FPRC;

|PROCESO PillaDes; |TIPO 7;
|FPRC;

|PROCESO Tipo11m10_C2;  |TIPO 11;
     |SI FSalida ! 10;  |ACABA;  |FINSI;

     #900#0 = #10#2;
     |LEE 040#900=;
     |SI FSalida ! 0;  |DDEFECTO #900;  |FINSI;

     |CONSULTA_CLAVE #1#900;
     |SI FSalida = 0;  #10#2 = #900#0;  |FINSI;

     |PINTA #10#2;
|FPRC;

|PROCESO LeeConvenio;  |TIPO 0;
     #900#0 = #10#2;
     |LEE 040#900=;
     |SI FSalida ! 0;
         |MENAV "    No existe el Convenio";
         |ERROR;
         |ACABA;
     |FINSI;
|FPRC;

|PROCESO ClaveBaja10_2;
     #10#1 = #9#1;
     #10#2 = 001;
     #10#3 = 101;
|FPRC;

|PROCESO ClaveAlta10_2;
     #10#1 = #9#1;
     #10#2 = 999;
     #10#3 = 999;
|FPRC;

|PROCESO SacaLaboral;
     |ABRE #0;
     |LEE 040#0p;
     |SI FSalida ! 0;  |DDEFECTO #0;  |FINSI;
     |CIERRA #0;

     |DBASS aBase;  |QBF aBase;

     |SI #0#1 = "S";
         aMas  = aBase + "laboral/def/nomconca.mas";
         aFich = aBase + "laboral/fich/";
     |SINO;
         aMas  = aBase + "aginom/def/nomconca.mas";
         aFich = aBase + "aginom/fich/";
     |FINSI;

     |CARGA_DEF aMas, nomconca@;
     |SI FSalida ! 0;
         aAlfa = "0000 No puedo cargar el Def " + aMas;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI #0#1 = "S";
         aMas  = aBase + "laboral/def/nomconli.mas";
     |SINO;
         aMas  = aBase + "aginom/def/nomconli.mas";
     |FINSI;

     |CARGA_DEF aMas, nomconli@;
     |SI FSalida ! 0;
         aAlfa = "0000 No puedo cargar el Def " + aMas;
         |MENAV aAlfa;
         |DESCARGA_DEF #nomconca@;
         |ACABA;
     |FINSI;

     |SI #0#1 = "S";
         aMas  = aBase + "laboral/def/nomdesam.mas";
     |SINO;
         aMas  = aBase + "aginom/def/nomdesam.mas";
     |FINSI;

     |CARGA_DEF aMas, nomdesam@;
     |SI FSalida ! 0;
         aAlfa = "0000 No puedo cargar el Def " + aMas;
         |MENAV aAlfa;
         |DESCARGA_DEF #nomdesam@;
         |ACABA;
     |FINSI;

     |PATH_DAT #900 aFich;
     |PATH_DAT #901 aFich;
     |PATH_DAT #902 aFich;

     |ABRE #900;
     |ABRE #901;
     |ABRE #902;

     |ENTLINEAL #1#10, -2, 2, 22, 0, ClaveBaja10_2, ClaveAlta10_2;

     |CIERRA #902;
     |CIERRA #901;
     |CIERRA #900;

     |DESCARGA_DEF #nomdesam@;
     |DESCARGA_DEF #nomconli@;
     |DESCARGA_DEF #nomconca@;
|FPRC;
