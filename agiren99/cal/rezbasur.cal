/*
|PROCESO CalcE;
     aDef    = eaPathDef + "rem01034.mas";
     |CARGA_DEF aDef, refere4@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #refere4@#"zdat1034"#;  |FINSI;

     |ABRE #1;
     #1#0 = #1001#0;
     #1#1 = #1001#1;
     #1#2 = #1001#2;
     |LEE 040#1=;
     |SI FSalida ! 0;  |DDEFECTO #1;  |FINSI;
     |CIERRA #1;

     enBloque  = 33;
     eaCasilla = " 79";
     |HAZ SacaImporte;
     nValor1 = enImporte;

     enBloque  = 37;
     eaCasilla = " 89";
     |HAZ SacaImporte;
     nValor2 = enImporte;

     enBloque  = 37;
     eaCasilla = " 93";
     |HAZ SacaImporte;
     nValor3 = enImporte;

     enBloque  = 37;
     eaCasilla = " 94";
     |HAZ SacaImporte;
     nValor4 = enImporte;

     enBloque  = 20;
     eaCasilla = " 38";
     |HAZ SacaImporte;
     nValor5 = enImporte;
     |SI nValor5 = 0;
         enBloque  = 24;
         eaCasilla = " 38";
         |HAZ SacaImporte;
         nValor5 = enImporte;
     |FINSI;

     |SI nAnuHijos = 0;
         enBloque = 20; eaCasilla = " 51"; |HAZ SacaImporte; nValor6 = enImporte;
         enBloque = 21; eaCasilla = " 52"; |HAZ SacaImporte; nValor7 = enImporte;
     |SINO;
         enBloque = 27; eaCasilla = " 51"; |HAZ SacaImporte; nValor6 = enImporte;
         enBloque = 27; eaCasilla = " 52"; |HAZ SacaImporte; nValor7 = enImporte;
     |FINSI;

     enBloque  = 30;
     eaCasilla = " 58";
     |HAZ SacaImporte;
     nValor8 = enImporte;

     enBloque  = 17;
     eaCasilla = " 43";
     |HAZ SacaImporte;
     nValor9 = enImporte;

     nTipoMed = ((( (nValor1 * (nValor6 + nValor7 ) / nValor8) - (nValor2 + nValor3 + nValor4) ) / nValor5) * 100) ! 2;
     nTipoMed = ((((nValor1 - nValor2 - nValor3 - nValor4) * (nValor6 + nValor7)) / nValor8) / nValor5) * 100;
||     nTipoMed = (nValor1 - nValor2 - nValor3 - nValor4) * nValor5 / (nValor5 + nValor9) / nValor5 * 100;
     nTipoMed = nTipoMed ! 2;

     enBloque  = 9;
     eaCasilla = " 32";
     |HAZ SacaImporte;
     nValor9 = enImporte;

     enBloque  = 10;
     eaCasilla = " 33";
     |HAZ SacaImporte;
     nValor9 = nValor9 + enImporte;

     nTeIrpf  = (((#0#7 * (nValor5 / nValor9)) * nTipoMed) / 100) ! 0;
     nTeIs    = ((#0#16 * 100) / #0#7) ! 2;
     nTeIs    = ((nTeIs * #0#7) / 100) ! 0;

     |SI nTeIrpf < nTeIs;
         #0#15 = nTeIrpf;
     |SINO;
         #0#15 = (N\ #0#13 + #0#14);
         #0#17 = 0;
     |FINSI;



     enBloque  = 6;
     eaCasilla = " 28";
     |HAZ SacaImporte;
     nValor1 = enImporte;

     enBloque  = 7;
     eaCasilla = " 29";
     |HAZ SacaImporte;
     nValor2 = enImporte;

     enBloque  = 7;
     eaCasilla = " 30";
     |HAZ SacaImporte;
     nValor3 = enImporte;

     enBloque  = 8;
     eaCasilla = " 31";
     |HAZ SacaImporte;
     nValor4 = enImporte;

     nTr = nValor1 - nValor2 - nValor3 + nValor4;

     nValorP = ((#0#7 / nTr) * 100) ! 0;
     nValorL = (((nValor5 % nValorP) * nTipoMed) / 100) ! 0;

     nValor1 = #0#13 + #0#14;
     nValor2 = ((#0#16 / #0#7) * 100) ! 2;
     |SI nTipoMed < nValor2;
         #0#15 = nValorL;
     |SINO;
         #0#15 = nValor1;
         #0#17 = 0;
     |FINSI;

     enSwAcum  = 1;
     enBloque  = 38;
     eaCasilla = "102";
     enImporte = #0#15;
     |HAZ GrabaLineal;

     enSwAcum  = 1;
     enBloque  = 38;
     eaCasilla = "103";
     enImporte = #0#17;
     |HAZ GrabaLineal;

     #1#5 = (N\ #1#5 + #0#15);
|FPRC;
*/

|PROCESO Seleccion1P;   || Seleccion partidas segun a¤o 98
     || GANANCIAL, SE MUERE EL Y RENTA CONJUNTAS

     |SI #0#2 = "GANANCIAL "; |Y eaMuerto = "T";  |Y enTipoLiquida = 1;
         |SI #0#4 = 0;
             nCoefi = 100 * enParte2; eaContri = "CONYUGE   ";  |HAZ Liquida1;
             nCoefi = 100 * enParte1; eaContri = "CONJUNTA  ";  |HAZ Liquida1;
         |FINSI;

         |SI #0#4 = 1;
             nCoefi = 100;            eaContri = "CONJUNTA  ";  |HAZ Liquida1;
         |FINSI;

         |SI #0#4 = 2;
             nCoefi = 100;            eaContri = "CONYUGE   ";  |HAZ Liquida1;
         |FINSI;

         |ACABA;
     |FINSI;

     || GANANCIAL, SE MUERE ELLA Y RENTA CONJUNTAS

     |SI #0#2 = "GANANCIAL "; |Y eaMuerto = "C";  |Y enTipoLiquida = 1;
         |SI #0#4 = 0;
             nCoefi = 100 * enParte2; eaContri = "TITULAR   ";  |HAZ Liquida1;
             nCoefi = 100 * enParte1; eaContri = "CONJUNTA  ";  |HAZ Liquida1;
         |FINSI;

         |SI #0#4 = 1;
             nCoefi = 100;            eaContri = "CONJUNTA  ";  |HAZ Liquida1;
         |FINSI;

         |SI #0#4 = 2;
             nCoefi = 100;            eaContri = "TITULAR   ";  |HAZ Liquida1;
         |FINSI;

         |ACABA;
     |FINSI;

     || GANANCIAL, SE MUERE EL Y RENTAS INDIVIDUALES

     |SI #0#2 = "GANANCIAL "; |Y eaMuerto = "T";  |Y enTipoLiquida = 2;
         |SI #0#4 = 0;
             nCoefi =  50  * enParte1; eaContri = "TITULAR   "; |HAZ Liquida1;
             nCoefi =  100 - nCoefi;   eaContri = "CONYUGE   "; |HAZ Liquida1;
         |FINSI;

         |SI #0#4 = 1;
             nCoefi = 50;              eaContri = "TITULAR   "; |HAZ Liquida1;
             nCoefi = 50;              eaContri = "CONYUGE   "; |HAZ Liquida1;
         |FINSI;

         |SI #0#4 = 2;
             nCoefi = 100;             eaContri = "CONYUGE   "; |HAZ Liquida1;
         |FINSI;

         |ACABA;
     |FINSI;

     || GANANCIAL, SE MUERE ELLA Y RENTAS INDIVIDUALES

     |SI #0#2 = "GANANCIAL "; |Y eaMuerto = "C";  |Y enTipoLiquida = 2;
         |SI #0#4 = 0;
             nCoefi =  50  * enParte1; eaContri = "CONYUGE   "; |HAZ Liquida1;
             nCoefi =  100 - nCoefi;   eaContri = "TITULAR   "; |HAZ Liquida1;
         |FINSI;

         |SI #0#4 = 1;
             nCoefi = 50;              eaContri = "TITULAR   "; |HAZ Liquida1;
             nCoefi = 50;              eaContri = "CONYUGE   "; |HAZ Liquida1;
         |FINSI;

         |SI #0#4 = 2;
             nCoefi = 100;             eaContri = "TITULAR   "; |HAZ Liquida1;
         |FINSI;

         |ACABA;
     |FINSI;

     || TITULAR O CONYUGE, RENTAS CONJUNTAS Y SE MUERE UNO;

     |SI #0#2 ! "VARIOS    "; |Y enTipoLiquida = 1;
         |SI #0#4 = 0;
             |SI eaMuerto = "T"; |Y #0#2 = "TITULAR   ";
                 nCoefi = 100;         eaContri = "CONJUNTA  "; |HAZ Liquida1;
             |SINO;
                 |SI eaMuerto = "C";  |Y #0#2 = "CONYUGE   ";
                     nCoefi = 100;     eaContri = "CONJUNTA  "; |HAZ Liquida1;
                 |SINO;
                     nCoefi = 100 * enParte2; eaContri = #0#2;         |HAZ Liquida1;
                     nCoefi = 100 * enParte1; eaContri = "CONJUNTA  "; |HAZ Liquida1;
                 |FINSI;
             |FINSI;
         |FINSI;

         |SI #0#4 = 1;
             nCoefi = 100;             eaContri = "CONJUNTA  "; |HAZ Liquida1;
         |FINSI;

         |SI #0#4 = 2;
             nCoefi = 100;             eaContri = #0#2;         |HAZ Liquida1;
         |FINSI;

         |ACABA;
     |FINSI;

     || TITULAR O CONYUGE, RENTAS INDIVIDUALES  Y SE MUERE UNO;

     |SI #0#2 ! "VARIOS    "; |Y enTipoLiquida = 2;
         nCoefi = 100;                 eaContri = #0#2;         |HAZ Liquida1;
         |ACABA;
     |FINSI;

     || VARIOS, RENTAS CONJUNTAS Y SE MUERE ALGUNO

     |SI #0#2 = "VARIOS    "; |Y enTipoLiquida = 1;
         |SI #0#4 = 0;
             |SI #0#5 ! 0;
                 nCoefi =  #0#5 * enParte2;    eaContri = "TITULAR   ";  |HAZ Liquida1;
             |FINSI;

             |SI #0#6 ! 0;
                 nCoefi =  #0#6 * enParte2;    eaContri = "CONYUGE   ";  |HAZ Liquida1;
             |FINSI;

             nCoefi = (#0#5 + #0#6) * enParte1; eaContri = "CONJUNTA  ";  |HAZ Liquida1;
          |FINSI;

          |SI #0#4 = 1;
              nCoefi = #0#5 + #0#6;    eaContri = "CONJUNTA  "; |HAZ Liquida1;
          |FINSI;

          |SI #0#4 = 2;
              |SI #0#5 ! 0;
                  nCoefi = #0#5;       eaContri = "TITULAR   "; |HAZ Liquida1;
              |FINSI;

              |SI #0#6 ! 0;
                  nCoefi = #0#6;       eaContri = "CONYUGE   "; |HAZ Liquida1;
              |FINSI;
          |FINSI;
          |ACABA;
     |FINSI;

     || VARIOS, RENTAS INDIVIDUALES Y SE MUERE ALGUNO

     |SI #0#2 = "VARIOS    "; |Y enTipoLiquida = 2;
         |SI #0#5 ! 0;
             nCoefi = #0#5;       eaContri = "TITULAR   "; |HAZ Liquida1;
         |FINSI;

         |SI #0#6 ! 0;
             nCoefi = #0#6;       eaContri = "CONYUGE   "; |HAZ Liquida1;
         |FINSI;
     |FINSI;
|FPRC;
