|FICHEROS;
      rew99999 #999;

     &refere1@ #1001;
     &refere2@ #1002;

      refere3@ #0;
      refere4@ #1;
      refere5@ #2;
      refere6@ #3;
|FIN;

|VARIABLES;
      aDef             = "";
      aAlfa            = "";
      aFichero         = "";

      nCoefi           = 0;
      nSwFich          = 0;
      nFactor          = 0;
      nCampo16         = 0;
      nCampo           = 0;
      nValor           = 0;
      nCatastral       = 0;
      nCampo3          = 0;
      nCampo4          = 0;
      nCampo5          = 0;
      nCampo6          = 0;
      nCampo7          = 0;
      nCampo8          = 0;
      nCampo9          = 0;
      nCampo10         = 0;
      nCampo11         = 0;

     &enEmpresa        = 0;
     &enComplementaria = 0;
     &eaPathDef        = "";
     &eaContri         = "";
     &enMinusvalia     = 0;
     &eaMinuAyuda      = "";
     &enBloque         = 0;
     &eaCasilla        = "";
     &enImporte        = 0;
     &enSwAcum         = 0;
     &enNomeDat        = 0;
     &eaMuerto         = "";
|FIN;

|PROCESO LiquidaM1;
     #1#0 = #1001#0;
     #1#1 = #1001#1;
     #1#2 = #1001#2;
     |LEE 101#1=;
     |SI FSalida ! 0;
         |DDEFECTO #1;
         #1#0 = #1001#0;
         #1#1 = #1001#1;
         #1#2 = #1001#2;
         |GRABA 020#1b;
     |FINSI;

     |SI #0#11 = 1;
         #1#3 = (N\ #1#3 + (#0#13  % nCoefi));
         #1#4 = (N\ #1#4 + (#0#15  % nCoefi));
     |SINO;
         #1#6 = (N\ #1#6 + (#0#13  % nCoefi));
         #1#7 = (N\ #1#7 + (#0#15  % nCoefi));
         |SI #0#11 = 4;
             #1#51 = (N\ #1#51 + (#0#13  % nCoefi));
         |FINSI;
         |SI #0#11 = 2;
             #1#52 = (N\ #1#52 + (#0#13  % nCoefi));
         |FINSI;
         |SI #0#11 = 3;
             #1#53 = (N\ #1#53 + (#0#13  % nCoefi));
         |FINSI;
     |FINSI;

     #1#10 = (N\ #1#3 + #1#6);

     |GRABA 020#1a;
     |LIBERA #1;
|FPRC;

|PROCESO LiquidaM2;
     #1#0 = #1001#0;
     #1#1 = #1001#1;
     #1#2 = #1001#2;
     |LEE 101#1=;
     |SI FSalida ! 0;
         |DDEFECTO #1;
         #1#0 = #1001#0;
         #1#1 = #1001#1;
         #1#2 = #1001#2;
         |GRABA 020#1b;
     |FINSI;

     |SI #0#15 = 950;                   nCampo = 3;                         |FINSI;
     |SI #0#15 ] 951;  |Y #0#15 [ 964;  nCampo = ((#0#15 - 951) * 3) + 5;   |FINSI;
     |SI #0#15 = 965;                   nCampo = 50;                        |FINSI;
     |SI #0#15 ] 966;  |Y #0#15 [ 978;  nCampo = ((#0#15 - 966) * 3) + 52;  |FINSI;
     |SI #0#15 = 979;                   nCampo = 94;                        |FINSI;
     |SI #0#15 ] 980;  |Y #0#15 [ 981;  nCampo = ((#0#15 - 980) * 3) + 96;  |FINSI;
     |SI #0#15 = 982;                   nCampo = 102;                       |FINSI;
     |SI #0#15 ] 983;  |Y #0#15 [ 986;  nCampo = ((#0#15 - 983) * 3) + 104; |FINSI;
     |SI #0#15 = 987;                   nCampo = 119;                       |FINSI;
     |SI #0#15 = 988;                   nCampo = 121;                       |FINSI;
     |SI #0#15 = 989;                   nCampo = 127;                       |FINSI;
     |SI #0#15 = 990;                   nCampo = 130;                       |FINSI;
     |SI #0#15 =   0;                   nCampo = 134;                       |FINSI;

     ||#1nCampo = (N\ #1nCampo + (#0#18  % nCoefi));
     #1nCampo = (N\ #1nCampo + (#0#19  % nCoefi));
     |SI nCampo ! 134;
         nCampo = nCampo + 1;
         #1nCampo = (N\ #1nCampo + (#0#19  % nCoefi));

         |SI nCampo = 128;  |O nCampo = 131;
             nCampo = nCampo + 1;
             #1nCampo = #0#20;
         |FINSI;
     |FINSI;

     |GRABA 020#1a;
     |LIBERA #1;
|FPRC;

|PROCESO LiquidaM3;
     |SI #0#12 = "D";
         |SI #0#13 [ 1996;
             enSwAcum  = 1;
             enBloque  = 35;
             eaCasilla = " 80";  enImporte = #0#14 % nCoefi; |HAZ GrabaLineal;
         |FINSI;
         |SI #0#13 = 1997;  |O #0#13 = 1998;
             enSwAcum  = 1;
             enBloque  = 35;
             eaCasilla = " 82";  enImporte = #0#14 % nCoefi; |HAZ GrabaLineal;
         |FINSI;
         |SI #0#13 = 1999;
             enSwAcum  = 1;
             enBloque  = 36;
             eaCasilla = " 84";  enImporte = #0#14 % nCoefi; |HAZ GrabaLineal;
         |FINSI;
     |FINSI;

     |SI #0#12 = "I";
         |SI #0#13 [ 1996;
             enSwAcum  = 1;
             enBloque  = 35;
             eaCasilla = " 81";  enImporte = #0#14 % nCoefi; |HAZ GrabaLineal;
         |FINSI;
         |SI #0#13 = 1997;  |O #0#13 = 1998;
             enSwAcum  = 1;
             enBloque  = 35;
             eaCasilla = " 83";  enImporte = #0#14 % nCoefi; |HAZ GrabaLineal;
         |FINSI;
         |SI #0#13 = 1999;
             enSwAcum  = 1;
             enBloque  = 36;
             eaCasilla = " 85";  enImporte = #0#14 % nCoefi; |HAZ GrabaLineal;
         |FINSI;
     |FINSI;
|FPRC;

|PROCESO LiquidaM4;
     enBloque  = 37;
     eaCasilla = " 93";
     |HAZ SacaImporte;

     enImporte = enImporte + (#0#14 % nCoefi);
     |SI enImporte > 100000; enImporte = 100000;  |FINSI;

     enSwAcum  = 0;
     enBloque  = 37;
     eaCasilla = " 93";
     |HAZ GrabaLineal;

     #1#0 = #1001#0;
     #1#1 = #1001#1;
     #1#2 = #1001#2;
     |LEE 101#1=;
     |SI FSalida ! 0;
         |DDEFECTO #1;
         #1#0 = #1001#0;
         #1#1 = #1001#1;
         #1#2 = #1001#2;
         |GRABA 020#1b;
     |FINSI;

     #1#20  = (N\ #1#20 + (#0#12  % nCoefi));
     |GRABA 020#1a;
     |LIBERA #1;
|FPRC;

|PROCESO LiquidaM5;
     #1#0 = #1001#0;
     #1#1 = #1001#1;
     #1#2 = #1001#2;
     |LEE 101#1=;
     |SI FSalida ! 0;
         |DDEFECTO #1;
         #1#0 = #1001#0;
         #1#1 = #1001#1;
         #1#2 = #1001#2;
         |GRABA 020#1b;
     |FINSI;

     #1#28  = (N\ #1#28 + (#0#13  % nCoefi));
     |SI #1#35 = "01.01.0000";
         #1#30 = (A\ #0#11 % 104);
         #1#31 = (A\ #0#11 % 504);
         #1#32 = (A\ #0#11 % 902);
         #1#33 = (A\ #0#11 % 1110);
         #1#34 = eaContri;
         #1#35 = #0#12;
     |SINO;
         #1#36 = (A\ #0#11 % 104);
         #1#37 = (A\ #0#11 % 504);
         #1#38 = (A\ #0#11 % 902);
         #1#39 = (A\ #0#11 % 1110);
         #1#40 = eaContri;
         #1#41 = #0#12;
     |FINSI;

     |GRABA 020#1a;
     |LIBERA #1;
|FPRC;

|PROCESO LiquidaM6;
     |SI #0#11 = 1;
         #1#0 = #1001#0;
         #1#1 = #1001#1;
         #1#2 = #1001#2;
         |LEE 101#1=;
         |SI FSalida ! 0;
             |DDEFECTO #1;
             #1#0 = #1001#0;
             #1#1 = #1001#1;
             #1#2 = #1001#2;
             |GRABA 020#1b;
         |FINSI;

         #1#5 = (N\ #1#5 + (#0#14 % nCoefi));

         |GRABA 020#1a;
         |LIBERA #1;
     |FINSI;

     |SI #0#11 = 2;
         #2#0 = #1001#0;
         #2#1 = #1001#1;
         #2#2 = #1001#2;
         |LEE 101#2=;
         |SI FSalida ! 0;
             |DDEFECTO #2;
             #2#0 = #1001#0;
             #2#1 = #1001#1;
             #2#2 = #1001#2;
             |GRABA 020#2b;
         |FINSI;

         #2#6 = (N\ #2#6 + (#0#14 % nCoefi));

         |GRABA 020#2a;
         |LIBERA #2;
     |FINSI;

     |SI #0#11 = 3;
         #1#0 = #1001#0;
         #1#1 = #1001#1;
         #1#2 = #1001#2;
         |LEE 101#1=;
         |SI FSalida ! 0;
             |DDEFECTO #1;
             #1#0 = #1001#0;
             #1#1 = #1001#1;
             #1#2 = #1001#2;
             |GRABA 020#1b;
         |FINSI;

         #1#10 = (N\ #1#10 + (#0#14 % nCoefi));

         |GRABA 020#1a;
         |LIBERA #1;
     |FINSI;

     |SI #0#11 = 4;
         enSwAcum  = 1;
         enBloque  = 31;
         eaCasilla = " 73";
         enImporte = #0#14 % nCoefi;
         |HAZ GrabaLineal;
     |FINSI;

     |SI #0#11 = 5;
         enSwAcum  = 1;
         enBloque  = 37;
         eaCasilla = " 90";
         enImporte = #0#14 % nCoefi;
         |HAZ GrabaLineal;
     |FINSI;

     |SI #0#11 = 6;
         enSwAcum  = 1;
         enBloque  = 37;
         eaCasilla = " 91";
         enImporte = #0#14 % nCoefi;
         |HAZ GrabaLineal;
     |FINSI;

     |SI #0#11 = 7;
         enSwAcum  = 1;
         enBloque  = 38;
         eaCasilla = "105";
         enImporte = #0#14 % nCoefi;
         |HAZ GrabaLineal;
     |FINSI;

     |SI #0#11 = 8;
         enSwAcum  = 1;
         enBloque  = 18;
         eaCasilla = " 44";
         enImporte = #0#14 % nCoefi;
         |HAZ GrabaLineal;
     |FINSI;

     |SI #0#11 = 9;
         #1#0 = #1001#0;
         #1#1 = #1001#1;
         #1#2 = #1001#2;
         |LEE 101#1=;
         |SI FSalida ! 0;
             |DDEFECTO #1;
             #1#0 = #1001#0;
             #1#1 = #1001#1;
             #1#2 = #1001#2;
             |GRABA 020#1b;
         |FINSI;

         |SI #0#15 = 1;
             #1#12 = (N\ #1#12 + (#0#14 % nCoefi));
         |FINSI;

         |SI #0#15 = 2;
             #1#13 = (N\ #1#13 + (#0#14 % nCoefi));
         |FINSI;

         |SI #0#15 = 3;
             #1#14 = (N\ #1#14 + (#0#14 % nCoefi));
         |FINSI;

         |SI #0#15 = 4;
             #1#15 = (N\ #1#15 + (#0#14 % nCoefi));
         |FINSI;

         |GRABA 020#1a;
         |LIBERA #1;
     |FINSI;
|FPRC;

|PROCESO LiquidaM7;
     #1#0 = #1001#0;
     #1#1 = #1001#1;
     #1#2 = #1001#2;
     |LEE 101#1=;
     |SI FSalida ! 0;
         |DDEFECTO #1;
         #1#0 = #1001#0;
         #1#1 = #1001#1;
         #1#2 = #1001#2;
         |GRABA 020#1b;
     |FINSI;

     |SI #0#11 = 4;
         |SI #0#13 = 5;
             #1#38 = (N\ #1#38 + (#0#17 % nCoefi));
             #1#3  = (N\ #1#3 + (#0#19 % nCoefi));
         |FINSI;

         |SI #0#13 = 12;
             #1#39 = (N\ #1#39 + (#0#17 % nCoefi));
             #1#4  = (N\ #1#4 + (#0#19 % nCoefi));
         |FINSI;

         |SI #0#13 = 15;
             #1#5  = (N\ #1#5 + (#0#19 % nCoefi));
             |SI #1#5 > 25000;  #1#5 = 25000;  |FINSI;
         |FINSI;

         |SI #0#13 = 16;
             #1#6  = (N\ #1#6 + (#0#19 % nCoefi));
         |FINSI;

         |SI #0#13 = 26;
             #1#7  = (N\ #1#7 + (#0#19 % nCoefi));
         |FINSI;

         #1#8 = (N\ #1#3 + #1#4 + #1#5 + #1#6 + #1#7);
     |FINSI;

     |SI #0#11 = 8;
         |SI #0#13 = 1;
             |SI #0#19 ] 35000;
                 #1#9  = (N\ #1#9  + (35000 % nCoefi));
                 #1#40 = (N\ #1#40 + (#0#17 % nCoefi));
                 #1#10 = (N\ #1#10 + ((#0#19 - 35000) % nCoefi));
             |FINSI;
         |FINSI;

         |SI #0#13 = 28;
             #1#41 = (N\ #1#41 + (#0#17 % nCoefi));
             #1#11 = (N\ #1#11 + (#0#19 % nCoefi));
         |FINSI;

         #1#12 = (N\ #1#9 + #1#10 + #1#11);

         |SI #0#13 = 8;
             #1#13 = (N\ #1#13 + (#0#19 % nCoefi))
         |FINSI;

         |SI #0#13 = 27;
             #1#14 = (N\ #1#14 + (#0#19 % nCoefi))
         |FINSI;

         #1#15 = (N\ #1#13 + #1#14);
     |FINSI;

     |SI #0#11 = 9;
         |SI #0#13 = 2;
             #1#42 = (N\ #1#42 + (#0#17 % nCoefi));
             #1#16 = (N\ #1#16 + (#0#19 % nCoefi));
         |FINSI;
     |FINSI;

     |SI #0#11 = 11;
         |SI #0#13 = 4;
             #1#43 = (N\ #1#43 + (#0#17 % nCoefi));
             #1#17 = (N\ #1#17 + (#0#19 % nCoefi));
         |FINSI;
     |FINSI;

     |SI #0#11 = 12;
         |SI #0#13 = 23;
             |SI #0#20 = 2;
                 #1#44 = (N\ #1#44 + (#0#17 % nCoefi));
             |SINO;
                 #1#45 = (N\ #1#45 + (#0#17 % nCoefi));
             |FINSI;
             #1#18 = (N\ #1#18 + (#0#19 % nCoefi));
         |FINSI;

         |SI #0#13 = 24;
             #1#45 = (N\ #1#45 + (#0#17 % nCoefi));
             #1#19 = (N\ #1#19 + (#0#19 % nCoefi));
         |FINSI;

         #1#20 = (N\ #1#18 + #1#19);

         |SI #0#13 = 25;
             #1#21 = (N\ #1#21 + (#0#19 % nCoefi));
         |FINSI;
     |FINSI;

     |SI #0#11 = 16;
         |SI #0#13 = 17;
             #1#22 = (N\ #1#22 + (#0#19 % nCoefi));
         |FINSI;

         |SI #0#13 = 18;
             #1#23 = (N\ #1#23 + (#0#19 % nCoefi));
         |FINSI;

         #1#24 = (N\ #1#22 + #1#23);
     |FINSI;

     |SI #0#11 = 13;
         |SI #0#13 = 19;
             #1#25 = (N\ #1#25 + ((#0#18 % 2) % nCoefi));
         |FINSI;

         |SI #0#13 = 20;
             #1#26 = (N\ #1#26 + (#0#19 % nCoefi));
         |FINSI;

         #1#27 = (N\ #1#25 + #1#26);
         |SI #1#27 > 40000;  #1#27 = 40000;  |FINSI;

         |SI #0#13 = 9;
             #1#28 = (N\ #1#28 + (#0#19 % nCoefi));
         |FINSI;
     |FINSI;

     |SI #0#11 = 17;
         |SI #0#13 = 3;
             #1#46 = (N\ #1#46 + (#0#17 % nCoefi));
             #1#29 = (N\ #1#29 + (#0#19 % nCoefi));
         |FINSI;

         |SI #0#13 = 6;
             #1#47 = (N\ #1#47 + (#0#17 % nCoefi));
             #1#30 = (N\ #1#30 + (#0#19 % nCoefi));
         |FINSI;

         |SI #0#13 = 21;
             #1#31 = (N\ #1#31 + (#0#19 % nCoefi));
         |FINSI;

         |SI #0#13 = 22;
             #1#32 = (N\ #1#32 + (#0#19 % nCoefi));
         |FINSI;

         |SI #0#13 = 10;
             #1#33 = (N\ #1#33 + (#0#19 % nCoefi));
         |FINSI;

         |SI #0#13 = 30;
             #1#34 = (N\ #1#34 + (#0#19 % nCoefi));
         |FINSI;

         |SI #0#13 = 11;
             #1#35 = (N\ #1#35 + (#0#19 % nCoefi));
         |FINSI;

         #1#36 = (N\ #1#29 + #1#30 + #1#31 + #1#32 + #1#33 + #1#34 + #1#35);

         |SI #0#13 = 29;
             #1#37 = (N\ #1#37 + (#0#19 % nCoefi));
         |FINSI;
     |FINSI;

     |GRABA 020#1a;
     |LIBERA #1;
|FPRC;

|PROCESO Liquida5;
     |HAZ CreaLiquida;               || En el rezcalut

     |SI nSwFich = 1;  |HAZ LiquidaM1;  |FINSI;
     |SI nSwFich = 2;  |HAZ LiquidaM2;  |FINSI;
     |SI nSwFich = 3;  |HAZ LiquidaM3;  |FINSI;
     |SI nSwFich = 4;  |HAZ LiquidaM4;  |FINSI;
     |SI nSwFich = 5;  |HAZ LiquidaM5;  |FINSI;
     |SI nSwFich = 6;  |HAZ LiquidaM6;  |FINSI;
     |SI nSwFich = 7;  |HAZ LiquidaM7;  |FINSI;
|FPRC;

|PROCESO Seleccion5;
     |SI #0#2 = "GANANCIAL ";                || Si es Ganancial
         nCoefi = 50;  eaContri = "TITULAR   ";   |HAZ Liquida5;
         nCoefi = 50;  eaContri = "CONYUGE   ";   |HAZ Liquida5;
         nCoefi = 100; eaContri = "CONJUNTA  ";   |HAZ Liquida5;

         |SI eaMuerto ! "";
             nCoefi = 50;  eaContri = "CONJUNTAE ";   |HAZ Liquida5;
         |FINSI;

         |ACABA;
     |FINSI;

     |SI #0#2 ! "VARIOS    ";                || SI es TITULAR O CONYUGE;
         nCoefi = 100;  eaContri = #0#2;          |HAZ Liquida5;
         nCoefi = 100;  eaContri = "CONJUNTA  ";  |HAZ Liquida5;

         |SI eaMuerto = "T";  |Y #0#2 ! "TITULAR   ";
             nCoefi = 100;  eaContri = "CONJUNTAE ";   |HAZ Liquida5;
         |FINSI;

         |SI eaMuerto = "C";  |Y #0#2 ! "CONYUGE   ";
             nCoefi = 100;  eaContri = "CONJUNTAE ";   |HAZ Liquida5;
         |FINSI;
         |ACABA;
     |FINSI;
                                             || SI es Varios

     |SI #0#5  ! 0; nCoefi = #0#5;   eaContri = "TITULAR   ";  |HAZ Liquida5;  |FINSI;
     |SI #0#6  ! 0; nCoefi = #0#6;   eaContri = "CONYUGE   ";  |HAZ Liquida5;  |FINSI;
     |SI #0#7  ! 0; nCoefi = #0#7;   eaContri = "1 FAMILIAR";  |HAZ Liquida5;  |FINSI;
     |SI #0#8  ! 0; nCoefi = #0#8;   eaContri = "2 FAMILIAR";  |HAZ Liquida5;  |FINSI;
     |SI #0#9  ! 0; nCoefi = #0#9;   eaContri = "3 FAMILIAR";  |HAZ Liquida5;  |FINSI;
     |SI #0#10 ! 0; nCoefi = #0#10;  eaContri = "4 FAMILIAR";  |HAZ Liquida5;  |FINSI;

     nCoefi  = #0#5 + #0#6 + #0#7 + #0#8 + #0#9 + #0#10;
     eaContri = "CONJUNTA  "; |HAZ Liquida5;

     |SI eaMuerto = "T";
         nCoefi  = #0#6 + #0#7 + #0#8 + #0#9 + #0#10;
         eaContri = "CONJUNTAE "; |HAZ Liquida5;
     |FINSI;

     |SI eaMuerto = "C";
         nCoefi  = #0#5 + #0#7 + #0#8 + #0#9 + #0#10;
         eaContri = "CONJUNTAE "; |HAZ Liquida5;
     |FINSI;
|FPRC;

|PROCESO PuntoM1;
     nSwFich = 1;
     aDef    = eaPathDef + "rem00046.mas";
     |CARGA_DEF aDef, refere3@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef    = eaPathDef + "rem01041.mas";
     |CARGA_DEF aDef, refere4@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #refere4@#"zdat1041"#;  |FINSI;

     |ABRE #0;
     |ABRE #1;
     |DDEFECTO #0;
     #0#0 = enEmpresa;
     #0#1 = 1;
     |LEE 040#0];
     |PARA; |SI FSalida = 0;  |Y #0#0 = enEmpresa;  |HACIENDO;
            |SI #0#3 = "R";  |O #0#3 = "A";   |HAZ Seleccion5;  |FINSI;
            |LEE 040#0s;
     |SIGUE;
     |CIERRA #0;
     |CIERRA #1;

     |DESCARGA_DEF #refere4@;
     |DESCARGA_DEF #refere3@;
|FPRC;

|PROCESO PuntoM2;
     nSwFich = 2;
     aDef    = eaPathDef + "rem00045.mas";
     |CARGA_DEF aDef, refere3@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef    = eaPathDef + "rem01042.mas";
     |CARGA_DEF aDef, refere4@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #refere4@#"zdat1042"#;  |FINSI;

     |ABRE #0;
     |ABRE #1;
     |DDEFECTO #0;
     #0#0 = enEmpresa;
     #0#1 = 1;
     |LEE 040#0];
     |PARA; |SI FSalida = 0;  |Y #0#0 = enEmpresa;  |HACIENDO;
            |SI #0#3 = "R";  |O #0#3 = "A";   |HAZ Seleccion5;  |FINSI;
            |LEE 040#0s;
     |SIGUE;
     |CIERRA #0;
     |CIERRA #1;

     |DESCARGA_DEF #refere4@;
     |DESCARGA_DEF #refere3@;
|FPRC;

|PROCESO PuntoM3;
     nSwFich = 3;
     aDef    = eaPathDef + "rem00047.mas";
     |CARGA_DEF aDef, refere3@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |ABRE #0;
     |DDEFECTO #0;
     #0#0 = enEmpresa;
     #0#1 = 1;
     |LEE 040#0];
     |PARA; |SI FSalida = 0;  |Y #0#0 = enEmpresa;  |HACIENDO;
            |SI #0#3 = "R";  |O #0#3 = "A";   |HAZ Seleccion5;  |FINSI;
            |LEE 040#0s;
     |SIGUE;
     |CIERRA #0;

     |DESCARGA_DEF #refere3@;
|FPRC;

|PROCESO PuntoM4;
     nSwFich = 4;
     aDef    = eaPathDef + "rem00048.mas";
     |CARGA_DEF aDef, refere3@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef    = eaPathDef + "rem01018.mas";
     |CARGA_DEF aDef, refere4@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #refere4@#"zdat1018"#;  |FINSI;

     |ABRE #0;
     |ABRE #1;
     |DDEFECTO #0;
     #0#0 = enEmpresa;
     #0#1 = 1;
     |LEE 040#0];
     |PARA; |SI FSalida = 0;  |Y #0#0 = enEmpresa;  |HACIENDO;
            |SI #0#3 = "R";  |O #0#3 = "A";   |HAZ Seleccion5;  |FINSI;
            |LEE 040#0s;
     |SIGUE;
     |CIERRA #0;
     |CIERRA #1;

     |DESCARGA_DEF #refere4@;
     |DESCARGA_DEF #refere3@;
|FPRC;

|PROCESO PuntoM5;
     nSwFich = 5;
     aDef    = eaPathDef + "rem00049.mas";
     |CARGA_DEF aDef, refere3@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef    = eaPathDef + "rem01041.mas";
     |CARGA_DEF aDef, refere4@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #refere4@#"zdat1041"#;  |FINSI;

     |ABRE #0;
     |ABRE #1;
     |DDEFECTO #0;
     #0#0 = enEmpresa;
     #0#1 = 1;
     |LEE 040#0];
     |PARA; |SI FSalida = 0;  |Y #0#0 = enEmpresa;  |HACIENDO;
            |SI #0#3 = "R";  |O #0#3 = "A";   |HAZ Seleccion5;  |FINSI;
            |LEE 040#0s;
     |SIGUE;
     |CIERRA #0;
     |CIERRA #1;

     |DESCARGA_DEF #refere4@;
     |DESCARGA_DEF #refere3@;
|FPRC;

|PROCESO PuntoM6;
     nSwFich = 6;
     aDef    = eaPathDef + "rem00056.mas";
     |CARGA_DEF aDef, refere3@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef    = eaPathDef + "rem01034.mas";
     |CARGA_DEF aDef, refere4@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #refere4@#"zdat1034"#;  |FINSI;

     aDef    = eaPathDef + "rem01039.mas";
     |CARGA_DEF aDef, refere5@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #refere5@#"zdat1039"#;  |FINSI;

     |ABRE #0;
     |ABRE #1;
     |ABRE #2;
     |DDEFECTO #0;
     #0#0 = enEmpresa;
     #0#1 = 1;
     |LEE 040#0];
     |PARA; |SI FSalida = 0;  |Y #0#0 = enEmpresa;  |HACIENDO;
            |SI #0#3 = "R";  |O #0#3 = "A";   |HAZ Seleccion5;  |FINSI;
            |LEE 040#0s;
     |SIGUE;
     |CIERRA #0;
     |CIERRA #1;
     |CIERRA #2;

     |DESCARGA_DEF #refere5@;
     |DESCARGA_DEF #refere4@;
     |DESCARGA_DEF #refere3@;
|FPRC;

|PROCESO PuntoM7;
     nSwFich = 7;
     aDef    = eaPathDef + "rem00044.mas";
     |CARGA_DEF aDef, refere3@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef    = eaPathDef + "rem01043.mas";
     |CARGA_DEF aDef, refere4@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #refere4@#"zdat1043"#;  |FINSI;

     |ABRE #0;
     |ABRE #1;
     |DDEFECTO #0;
     #0#0 = enEmpresa;
     #0#1 = 1;
     |LEE 040#0];
     |PARA; |SI FSalida = 0;  |Y #0#0 = enEmpresa;  |HACIENDO;
            |SI #0#3 = "R";  |O #0#3 = "A";   |HAZ Seleccion5;  |FINSI;
            |LEE 040#0s;
     |SIGUE;
     |CIERRA #0;
     |CIERRA #1;

     |DESCARGA_DEF #refere4@;
     |DESCARGA_DEF #refere3@;
|FPRC;

|PROCESO Bloque5;
     |HAZ PuntoM1;  || Inversiones y Donativos
     |HAZ PuntoM2;  || Deducciones Generales
     |HAZ PuntoM3;  || Deducciones Indebidas y Interes de Demora
     |HAZ PuntoM4;  || Alquiler Vivienda Habitual
     |HAZ PuntoM5;  || Cuenta Vivienda
     |HAZ PuntoM6;  || Otras Deducciones
     |HAZ PuntoM7;  || Deducciones Autonomicas
|FPRC;
