|FICHEROS;
     labtraba #2;
     labacuer #87;
     labcenfo;
     labcontr;
     labempre;
|FIN;

|VARIABLES;
     aValorOri = "";
     nIdCentro = 0;
     aIdCentro = "";
     aAlfa = "";
     aAlfa1 = "";
     nModo = 0;
|FIN;

|PROCESO PintaTipoForm; |TIPO 13;
     || pinto una pantalla u otra segun si la formacion esta concertada
     || o no con Edutedis

     |ABRE #labcontr; |LEE 000#labcontr.p; |CIERRA #labcontr;
     |SI #labcontr#67 = "S";
          || pinta el campo tercero del numero de registro de contrato
          || y fuerza el primero a uno

          |PINTA 1738, "                               ";
          |CAMPO_POSICION #labacuer#31, 1, 1749;
          |CAMPO_POSICION #labacuer#34, 1, 1754;
          |CAMPO_POSICION #labacuer#33, 1, 1762;

          |CAMPO_MODIFICA #labacuer#30, 1, "S";
          |CAMPO_VISUAL #labacuer#30, 1, "S";
          |CAMPO_POSICION #labacuer#30, 1, 1743;

          #labacuer#28 = "1";
          |CAMPO_MODIFICA #labacuer#28, 1, "N";

          |PINTA #labacuer#28;
          |PINTA #labacuer#29;
          |PINTA #labacuer#30;
          |PINTA #labacuer#31;
          |PINTA #labacuer#34;
          |PINTA #labacuer#33;

          || datos de la empresa concertada (Edutedis)

          |CAMPO_MODIFICA #labacuer#2, 1, "N";
          |CAMPO_MODIFICA #labacuer#23, 1, "N";
          |CAMPO_MODIFICA #labacuer#22, 1, "N";
          |CAMPO_MODIFICA #labacuer#3, 1, "N";
          |CAMPO_MODIFICA #labacuer#4, 1, "N";
          |CAMPO_MODIFICA #labacuer#21, 1, "N";
          |CAMPO_MODIFICA #labacuer#19, 1, "N";
          |CAMPO_MODIFICA #labacuer#20, 1, "N";
          |CAMPO_MODIFICA #labacuer#24, 1, "N";
          |CAMPO_MODIFICA #labacuer#6, 1, "N";
          |CAMPO_MODIFICA #labacuer#5, 1, "N";
          |CAMPO_MODIFICA #labacuer#25, 1, "N";
          |CAMPO_MODIFICA #labacuer#26, 1, "N";

          || habilita la cuenta bancaria y la persona que firma
          || si es edutedis

          |CAMPO_MODIFICA #labacuer#38, 1, "S";
          |CAMPO_MODIFICA #labacuer#39, 1, "S";
          |CAMPO_MODIFICA #labacuer#40, 1, "S";
          |CAMPO_MODIFICA #labacuer#41, 1, "S";
          |CAMPO_MODIFICA #labacuer#42, 1, "S";

          |CAMPO_VISUAL #labacuer#38, 1, "S";
          |CAMPO_VISUAL #labacuer#39, 1, "S";
          |CAMPO_VISUAL #labacuer#40, 1, "S";
          |CAMPO_VISUAL #labacuer#41, 1, "S";
          |CAMPO_VISUAL #labacuer#42, 1, "S";
          |PINTA 2111, "CCC domiciliaci¢n recibos:";
          |PINTA 2211, "Firmado .................:";

          aAlfa1 = #labempre#113;
          aAlfa = aAlfa1 % 104;
          #labacuer#38 = aAlfa;
          aAlfa = aAlfa1 % 504;
          #labacuer#39 = aAlfa;
          aAlfa = aAlfa1 % 902;
          #labacuer#40 = aAlfa;
          aAlfa = aAlfa1 % 1110;
          #labacuer#41 = aAlfa;

          #labacuer#42 = #labempre#15;

          |PINTA #labacuer#38;
          |PINTA #labacuer#39;
          |PINTA #labacuer#40;
          |PINTA #labacuer#41;
          |PINTA #labacuer#42;

          #labacuer#18 = "D";
          |CAMPO_MODIFICA #labacuer#18, 1, "N";
          |PINTA #labacuer#18;
     |SINO;
          || no pinta el campo tercero del numero de registro de contrato
          || y no fuerza el primero a uno

          |PINTA 1738, "                               ";
          |CAMPO_POSICION #labacuer#31, 1, 1743;
          |CAMPO_POSICION #labacuer#34, 1, 1748;
          |CAMPO_POSICION #labacuer#33, 1, 1756;

          |CAMPO_MODIFICA #labacuer#30, 1, "N";
          |CAMPO_VISUAL #labacuer#30, 1, "N";
          |CAMPO_POSICION #labacuer#30, 1, 1774;

          |CAMPO_MODIFICA #labacuer#28, 1, "S";

          |PINTA #labacuer#28;
          |PINTA #labacuer#29;
          |PINTA #labacuer#30;
          |PINTA #labacuer#31;
          |PINTA #labacuer#34;
          |PINTA #labacuer#33;

          || datos de la empresa concertada (NO Edutedis)

          |CAMPO_MODIFICA #labacuer#2, 1, "S";
          |CAMPO_MODIFICA #labacuer#23, 1, "S";
          |CAMPO_MODIFICA #labacuer#22, 1, "S";
          |CAMPO_MODIFICA #labacuer#3, 1, "S";
          |CAMPO_MODIFICA #labacuer#4, 1, "S";
          |CAMPO_MODIFICA #labacuer#21, 1, "S";
          |CAMPO_MODIFICA #labacuer#19, 1, "S";
          |CAMPO_MODIFICA #labacuer#20, 1, "S";
          |CAMPO_MODIFICA #labacuer#24, 1, "S";
          |CAMPO_MODIFICA #labacuer#6, 1, "S";
          |CAMPO_MODIFICA #labacuer#5, 1, "S";
          |CAMPO_MODIFICA #labacuer#25, 1, "S";
          |CAMPO_MODIFICA #labacuer#26, 1, "S";

          || deshabilita la cuenta bancaria y la persona que firma
          || si no es edutedis

          |CAMPO_MODIFICA #labacuer#38, 1, "N";
          |CAMPO_MODIFICA #labacuer#39, 1, "N";
          |CAMPO_MODIFICA #labacuer#40, 1, "N";
          |CAMPO_MODIFICA #labacuer#41, 1, "N";
          |CAMPO_MODIFICA #labacuer#42, 1, "N";

          |CAMPO_VISUAL #labacuer#38, 1, "N";
          |CAMPO_VISUAL #labacuer#39, 1, "N";
          |CAMPO_VISUAL #labacuer#40, 1, "N";
          |CAMPO_VISUAL #labacuer#41, 1, "N";
          |CAMPO_VISUAL #labacuer#42, 1, "N";
          |PINTA 2111, "                                                                     ";
          |PINTA 2211, "                                                                     ";

          |CAMPO_MODIFICA #labacuer#18, 1, "S";
     |FINSI;
|FPRC;

|PROCESO PintaCentro; |TIPO 7;
     |ABRE #labcontr; |LEE 000#labcontr.p; |CIERRA #labcontr;
     nModo = (FEntrada / 100) ! 0;
     |MODULO aAlfa;
     |QBF aAlfa;
     |SI nModo ! 1; |O #labcontr#67 ! "S";
          |ACABA;
     |FINSI;

     ||Y aAlfa ! "labcon85";

     aAlfa = #labcontr#66;
     |QBF aAlfa;
     |SI aAlfa ! "";
          #87#23 = aAlfa;
          |PINTA #87#23;
          |ABRE #labcenfo;
          #labcenfo#23 = aAlfa;
          |LEE 000#labcenfo.=;
          |SI FSalida = 0;
               #87#2 = #labcenfo#2;
               #87#22 = #labcenfo#22;
               #87#3 = #labcenfo#3;
               #87#4 = #labcenfo#4;
               #87#5 = #labcenfo#5;
               #87#6 = #labcenfo#6;
               #87#19 = #labcenfo#19;
               #87#20 = #labcenfo#20;
               #87#21 = #labcenfo#21;
               #87#24 = #labcenfo#24;
               #87#25 = #labcenfo#25;
               #87#26 = #labcenfo#26;
               |PINTA #87#2; |PINTA #87#22; |PINTA #87#3; |PINTA #87#4;
               |PINTA #87#5; |PINTA #87#6; |PINTA #87#19; |PINTA #87#20;
               |PINTA #87#21; |PINTA #87#24; |PINTA #87#25; |PINTA #87#26;
          |FINSI;
          |CIERRA #labcenfo;
     |FINSI;
|FPRC;

|PROCESO mayus87; |TIPO 0;
    #87Campo = #87Campo > #87Campo;
|PINTA #87Campo;
|FPRC;

|PROCESO encarga; |TIPO 0;
|SI #87#16 ! 0;
    |SI #87#16 ! #87#1;
            #87#17 = "";
        |ABRE #2;
            #2#0 = #87#0;
            #2#1 = #87#16;
        |LEE 001#2=;
        |SI FSalida ! 0;
            |MENAV "    Trabajador inexistente ...";
            |ERROR;
        |SINO;
                #87#17 = #2#2;      || nombre
        |FINSI;
        |CIERRA #2;
        |PINTA #87#17;
    |SINO;
        |MENAV "    ATENCION!!! Es el mismo trabajador ...";
        |ERROR;
    |FINSI;
|FINSI;
|FPRC;

|PROCESO IdCentro;
     aValorOri = #87Campo;
     |QBF aValorOri;
     |SI aValorOri ! "";
          nIdCentro = #87Campo;
          aIdCentro = nIdCentro;
          aAlfa = aValorOri % 101;
          |SI aValorOri ! aIdCentro; |Y aAlfa ! "0";
               |MENAV "0000Valor no valido para el identificador del centro";
               |ERROR;
          |FINSI;
     |FINSI;
|FPRC;
