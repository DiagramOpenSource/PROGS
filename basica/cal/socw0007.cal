|FICHEROS;
    socw0007 #0;

    :/modelos/def/dsmom030 #130;

    :/contagen/def/cacterem #01;
    :/contagen/def/cacuenta #05;
    :/contagen/def/camandia #10;
    :/contagen/def/canempre #30;
    :/contagen/def/calibros #206;
|FIN;

|VARIABLES;
     &entrada    = 1;
     aAlfa1      = "";

     nPaso       = 0;
     &eaCta      = "";
     &efSoCtb2   = @;
|FIN;

|INCLUYE i_agicon;

|| *************************************************************************
||                        CALCULOS DE PANTALLA
|| *************************************************************************
|CALCULO Diario; |TIPO 7;
   |SI nPaso = 0;
       |ABRE #cacterem;
       |LEE 041#cacterem.p;
       |SI FSalida ! 0;
           |DDEFECTO #cacterem;
       |FINSI;
       |CIERRA #cacterem;
       #socw0007#2 = #cacterem#43;
       #socw0007#3 = efSoCtb2;
       #socw0007#4 = #cacterem#46;
       #socw0007#5 = #cacterem#47;
       #socw0007#6 = #cacterem#48;
       #socw0007#7 = #cacterem#49;
       #socw0007#8 = #cacterem#50;
       #socw0007#9 = #cacterem#51;
       #socw0007#10 = #cacterem#52;
       #socw0007#11 = #cacterem#53;
       #socw0007#12 = #cacterem#54;
       #socw0007#13 = #cacterem#55;

       |PINDA #0#socw0007;
       nPaso = 1;
   |FINSI;
|FCAL;

|CALCULO cuenta; |TIPO 6;
     eaCta = #0Campo;
     |HAZ EFiltraPtos;
     #0Campo = eaCta;
     |PINTA #0Campo;
|FCAL;

|CALCULO TrasConcepto;
    |C_M #0Campo,0,aAlfa1;
    |SI aAlfa1 = "N"; |ACABA; |FINSI;

    |SI FSalida = 2; |ACABA; |FINSI;

    |SI Campo = 11;
        |ABRE #dsmom030;
        #dsmom030#0 = #0#11;
        |LEE 041#dsmom030.=;
        |SI FSalida = 0;
            |SI #dsmom030#5 = "N";
                |MENAV "    El concepto no es de I.R.P.F.";
                |ERROR;
            |FINSI;
        |FINSI;
    |FINSI;
|FCAL;

|CALCULO ElPtec; |TIPO 7;
    |PTEC 816;
|FCAL;

|CALCULO TrasLibro; |TIPO 6;
     |PATH_DAT #calibros#aPathConta#;

     |ABRE #206;
     #206#0 = #0Campo;
     |LEE 041#206=;
     |SI FSalida ! 0;
         |MENAV "    No existe Libro";
         |ERROR;
     |SINO;
         |SI #206#2 ! "N";
             |MENAV "    ATENCION!!! Libro de I.V.A. ";
             |ERROR;
         |FINSI;
     |FINSI;
     |CIERRA #206;
|FCAL;

|CALCULO Retencion;
   aAlfa1 = #0Campo;
   |C_M #0#9, 1, aAlfa1;
   |C_M #0#10, 1, aAlfa1;
   |C_M #0#11, 1, aAlfa1;
   |C_M #0#12, 1, aAlfa1;
|FCAL;

|| **********************************************************************

|PROCESO Tipo3; |TIPO 3;
|FPRC;
