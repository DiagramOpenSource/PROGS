|FICHEROS;
    agiz0017 #0;
    agim0033 #1;
    agim0034 #2;
|FIN;

|VARIABLES;
     Fecsys    = @;
     VAlfa     = "";
     VNume     = 0;
     SwBucle   = 0;
     Ejercicio = 0;
|FIN;

|PROCESO Defectos; |TIPO 7;
  Fecsys  = ~;
  VAlfa   = Fecsys;
  VAlfa   = VAlfa % -104;
  VNume   = VAlfa;
  #0#2    = VNume - 2;   |PINTA #0#2;
  #0#3    = VNume - 1;   |PINTA #0#3;
|FPRC;

|PROCESO Fichero1;
  |SI SwBucle = 0;
      |BORRA 140#1a;
      |LIBERA #1;
      |ACABA;
  |FINSI;

  #1#1 = #0#3;
  |GRABA 140#1n;
|FPRC;

|DEFBUCLE agim0033;
  #1#1;
  ;
  #0#0, Ejercicio;
  #0#1, Ejercicio;
  e;
  NULL, Fichero1;
|FIN;

|PROCESO Fichero2;
  |SI SwBucle = 0;
      |BORRA 140#2a;
      |LIBERA #2;
      |ACABA;
  |FINSI;

  #2#1 = #0#3;
  |GRABA 140#2n;
|FPRC;

|DEFBUCLE agim0034;
  #2#1;
  ;
  #0#0, Ejercicio, 000;
  #0#1, Ejercicio, 999;
  e;
  NULL, Fichero2;
|FIN;

|PROCESO Duplicar; |TIPO 3;
  |SI #0#4 = "S";
      Ejercicio = #0#3;
      SwBucle = 0;
      |BUCLE agim0033;
      |BUCLE agim0034;
  |FINSI;

  Ejercicio = #0#2;
  SwBucle = 1;
  |BUCLE agim0033;
  |BUCLE agim0034;
|FPRC;
