|FICHEROS;
     dsficher;

     referen@;
|FIN;

|VARIABLES;
     nSw        = 0;
     nCampo     = 0;
     nCampo1    = 0;

     aBase      = "";
     aDef       = "";
     aAlfa      = "";
     aAlfa1     = "";
     aQueQuiero = "";
     aDescri    = "";
     aPassword  = "";
|FIN;

|PROCESO Paquete;
     nSw = 1;
     |SI #dsficher#0 = "integral";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "modelos ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "laboral ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "contagen";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "contanex";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "contasoc";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "basica  ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "facturar";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2019 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2018 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2017 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2016 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2015 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2014 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2013 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2012 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2011 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2010 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2009 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2008 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2007 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2006 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2005 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2004 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2003 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2002 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2001 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren2000 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren1999 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren1998 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren1997 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren1996 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren1995 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "ren1994 ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "dsarchi ";  nSw = 0;  |FINSI;
     |SI #dsficher#0 = "siibase ";  nSw = 0;  |FINSI;

     |SI nSw = 1;
         |MENAV "0000 Paquete incorrecto.";
         |ERROR;
     |FINSI;
|FPRC;

|PROCESO Fichero;
     |DBASS aBase;   |QBT aBase;
     aDef = aBase + #dsficher#0 + "/def/" + #dsficher#1;  |QBT aDef;
     |CARGA_DEF aDef, referen@;
     |SI FSalida ! 0;
         aAlfa = "     No existe el Def " + aDef + " en este paquete";
         |MENAV aAlfa;
         ||ERROR;
         |ACABA;
     |FINSI;

     aQueQuiero = "|TITULO";
     aDescri    = #referen@#aQueQuiero#;

     |DESCARGA_DEF #referen@;

     aAlfa1 = "S";
     |SI #dsficher#0 ! "modelos ";
         aAlfa1 = "N";
         #dsficher#30 = 0; |PINTA #dsficher#30;
         #dsficher#31 = 0; |PINTA #dsficher#31;
     |FINSI;
     |C_M #dsficher#30,1,aAlfa1;
     |C_M #dsficher#31,1,aAlfa1;
|FPRC;

|PROCESO Descri;  |TIPO 7;
     #dsficher#2 = aDescri;  |PINTA  #dsficher#2;
|FPRC;

|PROCESO ClavePrimaria;
     |PARA nCampo = 6;  |SI nCampo [ 26;  |HACIENDO nCampo = nCampo + 1;
           |C_M #dsficher#nCampo#, 1, "S";
     |SIGUE;

     |SI #dsficher#5 = "N";
         |PARA nCampo = 6;  |SI nCampo [ 26;  |HACIENDO nCampo = nCampo + 1;
               nCampo1 = nCampo + 1;
               |C_M #dsficher#nCampo#, 1, "N";
               |PDEFECTO #dsficher, nCampo, nCampo1;
               |PINTA #dsficher#nCampo#;
         |SIGUE;
     |FINSI;
|FPRC;

|PROCESO TipoBucle;
     aAlfa  = "";
     aAlfa1 = #dsficher#6;  |SI aAlfa1 = "F";  aAlfa1 = "A";  |FINSI;
     aAlfa  = aAlfa + aAlfa1;
     aAlfa1 = #dsficher#9;  |SI aAlfa1 = "F";  aAlfa1 = "A";  |FINSI;
     aAlfa  = aAlfa + aAlfa1;
     aAlfa1 = #dsficher#12; |SI aAlfa1 = "F";  aAlfa1 = "A";  |FINSI;
     aAlfa  = aAlfa + aAlfa1;
     aAlfa1 = #dsficher#15; |SI aAlfa1 = "F";  aAlfa1 = "A";  |FINSI;
     aAlfa  = aAlfa + aAlfa1;
     aAlfa1 = #dsficher#18; |SI aAlfa1 = "F";  aAlfa1 = "A";  |FINSI;
     aAlfa  = aAlfa + aAlfa1;
     aAlfa1 = #dsficher#21; |SI aAlfa1 = "F";  aAlfa1 = "A";  |FINSI;
     aAlfa  = aAlfa + aAlfa1;
     aAlfa1 = #dsficher#24; |SI aAlfa1 = "F";  aAlfa1 = "A";  |FINSI;
     aAlfa  = aAlfa + aAlfa1;
     |QBF aAlfa;

     #dsficher#3 = aAlfa;  |PINTA #dsficher#3;
|FPRC;

|RUTINA ClaveBaja0;
     #dsficher#0 = "        ";
     #dsficher#1 = "            ";
|FRUT;

|RUTINA ClaveAlta0;
     #dsficher#0 = "zzzzzzzz";
     #dsficher#1 = "zzzzzzzzzzzz";
|FRUT;

|PROCESO Graba2019;
     #dsficher#0 = "ren2019";
     |GRABA 020#dsficher.n;
     |LIBERA #dsficher;
|FPRC;

|DEFBUCLE dsficher;
     #dsficher#1;
     ;
     "ren2018 ", "            ";
     "ren2018 ", "zzzzzzzzzzzz";
     be;
     NULL, Graba2019;
|FIN;

|PROGRAMA;
     |CUADRO 0501 2380;
     |BLANCO 0602 2279;
     |PINTA 1320, "Introduzca Password : ";
     E_inf = "";
     E_sup = "20";
     aPassword = 1342 ? -1;
     |SI aPassword ! "<MYPASWD>   ";
         |MENAV "     Permiso denegado.";
         |ACABA;
     |FINSI;

||     |BUCLE dsficher;  || Para Activar un nuevo a¤o de Renta.

     |ENTLINEAL #1#dsficher, -1, 2, 22, 1, ClaveBaja0, ClaveAlta0;
|FPRO;
