|FICHEROS;
     agiz0009 #0;         || Este Def
     agim0009 #1,MANTE;   || Mantenimiento de Visitas

     &usuarios@ #712;
     &clientes@ #715;
|FIN;

|VARIABLES;
     aAlfa = "";
     nModo = 0;

     &eaCodUsu = "";
     &enCodCli = 0;
|FIN;

|RUTINA ClaveBaja1;
      #1#0 = #0#0;
      #1#1 = 0;
      #1#2 = 0;
|FRUT;

|RUTINA ClaveAlta1;
     #1#0 = #0#0;
     #1#1 = 23;
     #1#2 = 59;
|FRUT;

|PROCESO Tipo3; |TIPO 3;
     |ENTLINEAL #1#1, -2, 1, 22, 1, ClaveBaja1, ClaveAlta1;
|FPRC;


|| ************************************************************************
||                     PROCESO DEL FICHERO AGIM0009
|| ************************************************************************

|PROCESO Cliente; |TIPO 0;
  |C_M #1#6, 1, "N";
  |SI #1#5 = 0; |C_M #1#6, 1, "S"; |FINSI;
|FPRC;

|PROCESO PintaUsuario;
     eaCodUsu = #1#3;
     |HAZ LeeUsuario;

     #1#4 = #712#1;
     |PINTA #1#4;
|FPRC;

|PROCESO PintaCliente;
     enCodCli = #1#5;
     |HAZ LeePersona;

     #1#6 = #715#1;
     |PINTA #1#6;
|FPRC;

|PROCESO GrabaTempo;
     #0#0 = #1#0;
     |LEE 101#0=;
     |SI FSalida ! 0;
         #0#0 = #1#0;
         |GRABA 020#0n;
     |FINSI;
     |LIBERA #0;
|FPRC;

|DEFBUCLE agim0009;
     #1#1;
     ;
     "01.01.0000", 00, 00;
     "31.12.2999", 99, 99;
     ;
     NULL, GrabaTempo;
|FIN;

|PROCESO Tipo7z0009;  |TIPO 7;
     |ENTLINEAL #1#1, -2, 7, 22, 1, ClaveBaja1, ClaveAlta1;
|FPRC;

|PROCESO BorraLLamada;
     |BORRA 101#1a;
     |LIBERA #1;
|FPRC;

|DEFBUCLE agim0009B;
     #1#1;
     ;
     #0#0, 00, 00;
     #0#0, 99, 99;
     ;
     NULL, BorraLLamada;
|FIN;

|PROCESO Tipo2z0009;  |TIPO 2;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 3;
         |BUCLE agim0009B;
     |FINSI;
|FPRC;

|RUTINA ClaveBaja0;
     #0#0 = "01.01.0000";
|FRUT;

|RUTINA ClaveAlta0;
     #0#0 = "31.12.2999";
|FRUT;

|PROGRAMA;
     |ABRE #0
     |LEE 040#0p;
     |SI FSalida ! 0;
         |BUCLE agim0009;
     |FINSI;
     |CIERRA #0;

     |CABEZA "LLamadas";
     |ENTLINEAL #1#0, -1, 1, 22, 1, ClaveBaja0, ClaveAlta0;
|FPRO;
