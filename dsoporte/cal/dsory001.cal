|FICHEROS;
     dsory001 #0;

     dsorm002 #2;
     dsorm003 #3;
     dsorm004 #4;
     dsorm005 #5;
     dsorm006 #6;
     dsorm007 #7;
     dsorm008 #8;
     dsorm009 #9;
     dsorm010 #10;
|FIN;

|VARIABLES;
     nRestriccion = 0;
     nSwHay       = 0;
     nSumar       = 0;
     nPos         = 0;
     nCaracter    = 0;
     nGrupo       = 0;

     aDAplica     = "";
     aHAplica     = "";
     aDClave      = "";
     aHClave      = "";
     aAplicacion  = "";
     aMenu        = "";
     aCaracter    = "";
     aAlfa        = "";
     aAplica      = "";
     aTabla       = "";

     &eaAlfa      = "";
     &enImprime   = 0;
     &enCambio    = 1;
|FIN;

|PROCESO ImprimeMenu;
     |SI aAplicacion ! #3#1;  |O aMenu ! #3#2;
         nRestriccion = 0;
         aAplicacion  = #3#1;
         aMenu        = #3#2;
     |FINSI;

     |SI nRestriccion = 1;  |ACABA;  |FINSI;

     |SI #3#4 = "S";
         nRestriccion = 1;
         eaAlfa = "RESTRINGIDO TOTALMENTE";
     |SINO;
         eaAlfa = #3#5;
         aAlfa  = "";
         nSumar = 0;
         |PARA nCaracter = 1;  |SI nCaracter [ 78;  |HACIENDO nCaracter = nCaracter + 1;
               nPos      = (nCaracter * 100) + 1;
               aCaracter = eaAlfa % nPos;
               |SI aCaracter ! " ";  nSumar = 1;  |FINSI;

               |SI nSumar = 1;
                   aAlfa = aAlfa + aCaracter;
               |FINSI;
         |SIGUE;
         eaAlfa = aAlfa % 160;

         aAlfa  = #3#3;
         aAlfa  = aAlfa - "{{";
         aAlfa  = aAlfa - "}}";
         aAlfa  = aAlfa - ".tab";
         aAlfa  = aAlfa - ".run";
         aAlfa  = aAlfa - ".lis";
         eaAlfa = eaAlfa + " " + aAlfa;
     |FINSI;

     #2#0 = #3#1;
     #2#1 = #3#2;
     |LEE 040#2=;
     |SI FSalida ! 0;
         |DDEFECTO #2;
         #2#2 = "Menu General";
     |FINSI;

     |PRINT;

     nSwHay = 1;
|FPRC;

|DEFBUCLE dsorm003;
     #3#1;
     ;
     #0#0, aDAplica, "        ", aDClave;
     #0#0, aHAplica, "zzzzzzzz", aHClave;
     ;
     NULL, ImprimeMenu;
|FIN;

|PROCESO ImprimeTabla;
     |PRINT;

     nSwHay = 1;
|FPRC;

|DEFBUCLE dsorm004;
     #4#1;
     ;
     #0#0, aDAplica, "        ";
     #0#0, aHAplica, "zzzzzzzz";
     ;
     NULL, ImprimeTabla;
|FIN;

|PROCESO ImprimeOcultacion;
     |PRINT;

     nSwHay = 1;
|FPRC;

|DEFBUCLE dsorm005;
     #5#1;
     ;
     #0#0, aDAplica, "        ", 000;
     #0#0, aHAplica, "zzzzzzzz", 999;
     ;
     NULL, ImprimeOcultacion;
|FIN;

|PROCESO ImprimeCampoCompuesto;
     enImprime = 1;
     |PRINT;
|FPRC;

|DEFBUCLE dsorm007;
     #7#1;
     ;
     #6#0, #6#1, #6#2, #6#3, 000;
     #6#0, #6#1, #6#2, #6#3, 999;
     ;
     NULL, ImprimeCampoCompuesto;
|FIN;

|PROCESO ImprimeRelaciones;
     |PRINT;
|FPRC;

|DEFBUCLE dsorm008;
     #8#1;
     ;
     nGrupo, aAplica, aTabla, "        ";
     nGrupo, aAplica, aTabla, "zzzzzzzz";
     ;
     NULL, ImprimeRelaciones;
|FIN;

|PROCESO ImprimeFiltros;
     |SI aTabla = "";
         enCambio = 1;
         nGrupo   = #6#0;
         aAplica  = #6#1;
         aTabla   = #6#2;
     |FINSI;

     |SI aTabla ! #6#2;  |O aAplica ! #6#1;
         enImprime = 2;
         |BUCLE dsorm008;
         enCambio = 1;
         nGrupo  = #6#0;
         aAplica = #6#1;
         aTabla  = #6#2;
     |FINSI;

     enImprime = 0;
     |PRINT;

     enCambio = 0;

     |SI #6#8 = "C";  |BUCLE dsorm007;  |FINSI;
     nSwHay = 1;
|FPRC;

|DEFBUCLE dsorm006;
     #6#1;
     ;
     #0#0, aDAplica, "        ", 000;
     #0#0, aHAplica, "zzzzzzzz", 999;
     ;
     NULL, ImprimeFiltros;
|FIN;

|PROCESO ImprimeCamposP;
     enImprime = 1;
     |PRINT;
|FPRC;

|DEFBUCLE dsorm010;
     #10#1;
     ;
     #9#0, #9#1, #9#2, #9#3, 000;
     #9#0, #9#1, #9#2, #9#3, 999;
     ;
     NULL, ImprimeCamposP;
|FIN;

|PROCESO ImprimeFiltrosP;
     |SI aTabla = "";
         enCambio = 1;
         nGrupo   = #9#0;
         aAplica  = #9#1;
         aTabla   = #9#2;
     |FINSI;

     |SI aTabla ! #9#2;  |O aAplica ! #9#1;
         enCambio = 1;
         nGrupo   = #9#0;
         aAplica  = #9#1;
         aTabla   = #9#2;
     |FINSI;

     enImprime = 0;
     |PRINT;

     enCambio = 0;
     |BUCLE dsorm010;

     nSwHay   = 1;
|FPRC;

|DEFBUCLE dsorm009;
     #9#1;
     ;
     #0#0, aDAplica, "        ", 000;
     #0#0, aHAplica, "zzzzzzzz", 999;
     ;
     NULL, ImprimeFiltrosP;
|FIN;

|PROCESO Tipo3;  |TIPO 3;
     aDClave  = " ";
     aHClave  = "z" * 100;
     aDAplica = "        ";
     aHAplica = "zzzzzzzz";
     |SI #0#2 ! "        ";
         aDAplica = #0#2;
         aHAplica = #0#2;
     |FINSI;

     |IMPRE 0;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     |INFOR "dsory101";
     |SI FSalida = 0;
         nSwHay = 0;
         |ABRE #2;
         |BUCLE dsorm003;
         |CIERRA #2;
         |SI nSwHay = 1;  |PIEINF;  |FINSI;
         |FININF;
     |FINSI;

     |INFOR "dsory201";
     |SI FSalida = 0;
         nSwHay = 0;
         |BUCLE dsorm004;
         |SI nSwHay = 1;  |PIEINF;  |FINSI;
         |FININF;
     |FINSI;

     |INFOR "dsory301";
     |SI FSalida = 0;
         nSwHay = 0;
         |BUCLE dsorm005;
         |SI nSwHay = 1;  |PIEINF;  |FINSI;
         |FININF;
     |FINSI;

     |INFOR "dsory401";
     |SI FSalida = 0;
         nSwHay = 0;
         aTabla = "";
         |BUCLE dsorm006;
         |SI nSwHay = 1;  |PIEINF;  |FINSI;
         |FININF;
     |FINSI;

     |INFOR "dsory501";
     |SI FSalida = 0;
         nSwHay = 0;
         aTabla = "";
         |BUCLE dsorm009;
         |SI nSwHay = 1;  |PIEINF;  |FINSI;
         |FININF;
     |FINSI;

     |FINIMP;
|FPRC;
