|FICHEROS;
    ettinfpe #0;
    ettperso #1;         || personal
    ettpers2 #2;         || puestos personal
    ettpuest #3;         || puestos
    ettpers0 #4;         || experiencias
    ettpers1 #5;         || formacion
|FIN;

|VARIABLES;
    alfa1 = "";
    alfa2 = "";
    alfa3 = "";
    alfa4 = "";
    nume1 = 0;
    nume2 = 0;
    nume3 = 0;
    nume4 = 0;
    para1 = 0;
    para2 = 0;
    para3 = 0;
    para4 = 0;
    fech1 = @;
    fech2 = @;
    fech3 = @;
    fech4 = @;
    elsw1 = 0;
    elsw2 = 0;
    elsw3 = 0;
    elsw4 = 0;
    FEstado = 0;
    seleccio = 0;
    modo = 0;
    sw_rup = 0;

    sw_selec = 0;
    &sw_lin = 0;
    ant_puesto = -1;
    &valoraci = 0;
    npues1 = 0;
    npues2 = 0;
|FIN;
____________________________________/
|PROCESO mayus; |TIPO 0;
    #0Campo = #0Campo > #0Campo;
|PINTA #0Campo;
|FPRC;

|PROCESO tiposel; |TIPO 0;
|SI #0#2 = "D";
        alfa1 = "S";
        alfa2 = "N";
|SINO;
        #0#3 = 0;             |PINTA #0#3;
        #0#4 = 99999999;      |PINTA #0#4;
        alfa1 = "N";
        alfa2 = "S";
|FINSI;
|C_M #0#3, 1, alfa1;
|C_M #0#4, 1, alfa1;

|C_M #0#5, 1, alfa2;
|C_M #0#6, 1, alfa2;
|C_M #0#7, 1, alfa2;
|C_M #0#8, 1, alfa2;
|C_M #0#9, 1, alfa2;
|C_M #0#10, 1, alfa2;
|C_M #0#11, 1, alfa2;
|C_M #0#12, 1, alfa2;
|C_M #0#13, 1, alfa2;
|C_M #0#14, 1, alfa2;
|C_M #0#15, 1, alfa2;
|C_M #0#16, 1, alfa2;
|C_M #0#17, 1, alfa2;
|C_M #0#18, 1, alfa2;
|C_M #0#19, 1, alfa2;
|C_M #0#20, 1, alfa2;
|C_M #0#21, 1, alfa2;
|C_M #0#22, 1, alfa2;
|C_M #0#23, 1, alfa2;
|C_M #0#24, 1, alfa2;
|FPRC;

|PROCESO pin_puesto; |TIPO 7;
|SI #0#2 ! "D";
    |DDEFECTO #3;
    |ABRE #3;
        #3#0 = #0Campo;
    |LEE 000#3=;
    |CIERRA #3;

    |ATRI I;
    |PINTA 1931, #3#1;
    |ATRI 0;
|FINSI;
|FPRC;

|PROCESO existe; |TIPO 0;
|SI #0#2 ! "D";
    |DDEFECTO #3;
    |ABRE #3;
        #3#0 = #0Campo;
    |LEE 000#3=;
    |SI FSalida ! 0;|Y #3#0 ! 0;
        |MENAV "    Puesto INEXISTENTE ...";
        |ERROR;
    |FINSI;
    |CIERRA #3;
|FINSI;
|FPRC;
____________________________________/
|PROCESO formacion1;
|PRINT;
|FPRC;

|DEFBUCLE formacion;
 #5#1;
 ;
 #2#0,    1;
 #2#0, 9999;
 ;
 NULL, formacion1;
|FIN;

|PROCESO experiencia1;
|PRINT;
|FPRC;

|DEFBUCLE experiencia;
 #4#1;
 ;
 #2#0,    1;
 #2#0, 9999;
 ;
 NULL, experiencia1;
|FIN;

|PROCESO valoracion;
    valoraci = 0;
    npues1 = 0;
    npues2 = 0;
|PARA para1 = 4; |SI para1 [ 133; |HACIENDO para1 = para1 + 1;
    |SI #2para1 ! 0;
            npues1 = npues1 + 1;
            npues2 = npues2 + #2para1;
    |FINSI;
|SIGUE;
    valoraci = (npues2 / npues1) ! 4;
|FPRC;

|PROCESO lee_persona;
|DDEFECTO #1;
    #1#0 = #2#0;
|LEE 000#1=;
|FPRC;

|PROCESO lee_puesto;
|DDEFECTO #3;
    #3#0 = #2#2;
|LEE 000#3=;
|FPRC;

|PROCESO leyendo1;
    sw_selec = 0;
|SI #0#2 = "S";
    |SI #2#2 ! #0#5; |Y #2#2 ! #0#6; |Y #2#2 ! #0#7; |Y #2#2 ! #0#8;
     |Y #2#2 ! #0#9; |Y #2#2 ! #0#10;|Y #2#2 ! #0#11;|Y #2#2 ! #0#12;
     |Y #2#2 ! #0#13;|Y #2#2 ! #0#14;|Y #2#2 ! #0#15;|Y #2#2 ! #0#16;
     |Y #2#2 ! #0#17;|Y #2#2 ! #0#18;|Y #2#2 ! #0#19;|Y #2#2 ! #0#20;
     |Y #2#2 ! #0#21;|Y #2#2 ! #0#22;|Y #2#2 ! #0#23;|Y #2#2 ! #0#24;
            sw_selec = 1;
    |FINSI;
|FINSI;

|HAZ lee_persona;
    nume1 = (#1#9 * 1000) + #1#10;
|SI #0#25 > nume1; |O #0#26 < nume1;         || selecciona por cod.postales
        sw_selec = 1;
|FINSI;

|HAZ valoracion;
|SI #0#27 > valoraci; |O #0#28 < valoraci;   || selecciona por valoracion
        sw_selec = 1;
|FINSI;

|SI sw_selec = 0;
        seleccio = 1;
    |SI ant_puesto ! #2#2;
        |HAZ lee_puesto;
            sw_lin = 1;  |PRINT;
            ant_puesto = #2#2;
    |FINSI;
        sw_lin = 0; |PRINT;
        sw_lin = 2; |BUCLE experiencia;
        sw_lin = 3; |BUCLE formacion;
|FINSI;
|FPRC;

|PROCESO ordena;
|HAZ valoracion;
    valoraci = -valoraci;
|FPRC;

|DEFBUCLE leyendo;
 #2#3;
 ;
 #0#3, #0#0;
 #0#4, #0#1;
 ;
 NULL, ordena, NULL, NULL, NULL, leyendo1;
 #2#2, valoraci, #2#0;
|FIN;

|PROCESO tipo3; |TIPO 3;
|IMPRE 0;
|SI FSalida = 0;
    |INFOR "ettinfpe";
    |ABRE #1;
    |ABRE #3;
    |BUCLE leyendo;
    |CIERRA #1;
    |CIERRA #3;
    |SI seleccio ! 0;
        |PIEINF;
    |SINO;
        |MENAV "    Seleccion vacia ...";
    |FINSI;
    |FININF;
|SINO;
    |MENAV "    Proceso abortado ...";
|FINSI;
|FINIMP;
|FPRC;
