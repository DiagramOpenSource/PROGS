|FICHEROS;
   ettemct1 #0;

   labtraba #20;
|FIN;

|VARIABLES;
   Comodin  = "";
   Comodin1 = "";
   Path     = "";

   Empresa = 0;
   Trabaja = 0;
   Calc    = 0;

   i = 0;
   nPos = 0;
   &aFechaFin = "";
   &aConvenio1 = "";
   &aConvenio2 = "";
   &aPerPrueba = "";
   aAlfa = "";
   aAlfa0 = "";
   aAlfa1 = "";
   nNume = 0;
   aClaus30 = "";
   &aClaus31 = "";
   &aClaus32 = "";
   &tp = 0;
   &aVengode = "";
   &finaliza = "";
|FIN;

|PROCESO CargaPantalla; |TIPO 7;
     |SI aVengode = "ettemcpd";
          |PARA nNume = 1; |SI nNume [ 9; |HACIENDO nNume = nNume + 1;
               |CAMPO_MODIFICA #0nNume, 1, "N";
               |CAMPO_VISUAL #0nNume, 1, "N";
          |SIGUE;
          |CAMPO_MODIFICA #0#12, 1, "N";
          |CAMPO_VISUAL #0#12, 1, "N";
          |PINTA 0627, "                                                     ";
          |BLANCO 0802 1479;
     |FINSI;
|FPRC;

|PROCESO QuitaCampos;    || Los campos nuevos los dejo solo para el contrato
     |SI aVengode = "ettemcpd"; |ACABA; |FINSI;
     |SI tp = 1;         || de trabajo que no sea a Tiempo parcial (ett01cto)
          |CAMPO_MODIFICA #0#9, 1, "N";      || hasta que me digan otra cosa
          |CAMPO_VISUAL #0#9, 1, "N";      || hasta que me digan otra cosa
          |PINTA 1433, "                                               ";
          |CAMPO_MODIFICA #0#10, 1, "N";
          |CAMPO_VISUAL #0#10, 1, "N";
          |PINTA 0702, "                                                                             ";
          |CAMPO_MODIFICA #0#11, 1, "N";
          |CAMPO_VISUAL #0#11, 1, "N";
          |CAMPO_MODIFICA #0#12, 1, "N";
          |CAMPO_VISUAL #0#12, 1, "N";
          |PINTA 0627, "                                                     ";
     |SINO;
          |CAMPO_MODIFICA #0#9, 1, "S";
          |CAMPO_MODIFICA #0#10, 1, "S";
          |CAMPO_MODIFICA #0#11, 1, "S";
          |CAMPO_MODIFICA #0#12, 1, "S";
     |FINSI;
|FPRC;

|PROCESO Convenio;
     aAlfa = #0#9;
     |PARA i = 1; |SI i [ 40; |HACIENDO i = i + 1;
          nPos = (i * 100) + 1;
          aAlfa = #0#9 % nPos;
          |SI aAlfa = " ";
               nNume = 100 + (nPos - 1) / 100;
               aConvenio1 = #0#9 % nNume;
               nNume = -1 * (100 + (40 - ((nPos - 1) / 100)));
               aConvenio2 = #0#9 % nNume;
               |SAL;
          |FINSI;
     |SIGUE;
|FPRC;

|PROCESO Clausula3;
     |SI aVengode = "ettemcpd";
          finaliza = #0#11;
          |QBF finaliza;
          finaliza = finaliza + ".";
          |ACABA;
     |SINO;
          aClaus30 = #0#11;
          |QBF aClaus30;
          aClaus30 = aClaus30 + ". Se establece un periodo de prueba de " + #0#12 + ".";
          aAlfa0 = aClaus30 % 142;
          |PARA i = 1; |SI i [ 40; |HACIENDO i = i + 1;
               nPos = (-1) * ((i * 100) + 1);
               aAlfa1 = aAlfa0 % nPos;
               |SI aAlfa1 = " ";
                    nNume = 142 +  ((nPos + 1) / 100);
                    aClaus31 = aClaus30 % nNume;
                    ||nNume = -1 * (100 + (40 - ((nPos - 1) / 100)));
                    aClaus32 = aClaus30 - aClaus31;
                    |QBF aClaus31;
                    |QBF aClaus32;
                    |SAL;
               |FINSI;
          |SIGUE;
     |FINSI;
|FPRC;

|PROCESO Duracion;  |TIPO 0;
     aAlfa = "000" + #0#0; aAlfa = aAlfa % -103;
     #0#0 = aAlfa;
     |PINTA #0#0;
     |SI #0#0 = "401"; |O #0#0 = "501"; |O #0#0 = "014";
          |CAMPO_ANCHO #0#11, 1, 51;
          #0#10 = 1;
          #0#11 = "hasta la finalizacion de la obra o servicio contratada";
     |FINSI;
     |SI #0#0 = "410"; |O #0#0 = "510"; |O #0#0 = "016";
          |CAMPO_ANCHO #0#11, 1, 51;
          #0#10 = 2;
          #0#11 = "hasta la reincorporacion de la/s persona/s sustituida/s";
     |FINSI;
     |SI #0#0 = "402"; |O #0#0 = "502";
          |PINTA 0728, "                                                    ";
          |CAMPO_ANCHO #0#11, 1, 10;
          #0#10 = 3;
          #0#11 = aFechaFin;
     |FINSI;
     |PINTA #0#10;
     |SI aVengode = "ettemcpd";
          #0#11 = #0#11 - "hasta ";
     |FINSI;
     |PINTA #0#11;
|FPRC;

|PROCESO Duracion2;
     |SI #0#10 = 1;
          nNume = 51;
          |CAMPO_ANCHO #0#11, 1, nNume;
          #0#11 = "hasta la finalizacion de la obra o servicio contratada";
     |FINSI;
     |SI #0#10 = 2;
          nNume = 51;
          |CAMPO_ANCHO #0#11, 1, nNume;
          #0#11 = "hasta la reincorporacion de la/s persona/s sustituida/s";
     |FINSI;
     |SI #0#10 = 3;
          |PINTA 0728, "                                                    ";
          nNume = 10;
          |CAMPO_ANCHO #0#11, 1, nNume;
          #0#11 = aFechaFin;
     |FINSI;
     |SI aVengode = "ettemcpd";
          #0#11 = #0#11 - "hasta ";
     |FINSI;
     |PINTA #0#11;
|FPRC;

|PROCESO PerPrueba;
     #0#12 = aPerPrueba;
     |PINTA #0#12;
|FPRC;

|PROCESO PintaCuadro; |TIPO 7;
   |PUSHV 0530 1075;
   |BLANCO 0530 1075;
   |CUADRO 0530 1075;
   |ATRI R;
   |PINTA 0631, " <1> Con derecho a reserva del puesto       ";
   |PINTA 0731, " <2> Por maternidad, sin bonif.de cuotas    ";
   |PINTA 0831, " <3> Excedentes por cuidado de familiares   ";
   |PINTA 0931, " <4> Cobertura temporal de puesto           ";
   |ATRI N;
|FPRC;

|PROCESO QuitaCuadro;
   |POPV;
|FPRC;

|PROGRAMA;
   Comodin = PARAMETRO;
   Comodin = Comodin - ",";
   |SI FSalida ! 0;
      Calc = FSalida + 98; Comodin1 = Comodin % Calc; Comodin = Comodin - Comodin1; Path = Comodin;
      Comodin = Comodin1 - ",";
      |SI FSalida ! 0;
         Calc = FSalida + 98; Comodin1 = Comodin % Calc;
         Comodin = Comodin - Comodin1;
         Empresa = Comodin; Trabaja = Comodin1;
      |FINSI;
   |FINSI;

   |QBF Path; Path = Path + "/fich/"; |PATH_DAT #20 Path;

   |ABRE #labtraba; |ABRE #ettemct1;

   #ettemct1#5 = Empresa;
   #ettemct1#6 = Trabaja;
   |LEE 000#ettemct1.=;
   |SI FSalida ! 0;
      |DDEFECTO #ettemct1;
      #ettemct1#5 = Empresa;
      #ettemct1#6 = Trabaja;
      |GRABA 020#ettemct1.n;
      |LEE 000#ettemct1.=;
   |FINSI;

   #labtraba#0 = Empresa;
   #labtraba#1 = Trabaja;
   |LEE 000#labtraba.=;
   |SI FSalida = 0;
      #ettemct1#0 = #labtraba#45;
      |PUSHV 0507 1370;
      |PINPA #0#0; |PINDA #0#0;
      |ENDATOS #1#0;
      |SI FSalida = 0;
         |GRABA 020#ettemct1.a;
      |FINSI;
      |POPV;
   |FINSI;
   |HAZ Clausula3;
   |CIERRA #ettemct1; |CIERRA #labtraba;
|FPRO;
