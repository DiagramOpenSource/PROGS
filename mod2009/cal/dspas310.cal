|FICHEROS;
     dsmozpas #0;
     dsmom004 #4;
     dsmom008 #8;
     dsmom030 #30;
     dsmom033 #33;
     dsmom041 #41;
     dsmom046 #46;
     dsmoc310 #310;
     dsmoc349 #349;

     :/contagen/def/canempre #101;
     :/contagen/def/camaniva #102;
     :/contagen/def/caivalin #103;
     :/contagen/def/caivaasi #104;
     :/contagen/def/caivam03 #105;
     :/basica/def/agicen14 #214;

     &regisnif@ #709;


     dsmow013 #999,MANTE;

     espejo1@ #1300;
|FIN;

|VARIABLES;
     aAlfa1         = "";
     aAlfa          = "";
     aPathModelo    = "";
     aDef           = "";
     aTipo          = "";

     nEjer          = 0;
     nDPeriodo      = 0;
     nHPeriodo      = 0;
     nCampo1        = 0;
     nCampo11       = 0;
     nCampo2        = 0;
     nCampo22       = 0;
     nCampo3        = 0;
     nCampo33       = 0;
     nSwEsta        = 0;
     nGrupo         = 0;
     nSubGrupo      = 0;
     nDepar         = 0;
     nBaseImpo      = 0;
     nPorce         = 0;
     nCuota         = 0;
     nTotal         = 0;
     nPeriodo       = 0;
     nModelo        = 0;
     nSwPasa        = 0;
     nSwPasa1       = 0;
     nCuotaSopor    = 0;
     nIngresos      = 0;
     nAnyoEjer      = 0;
     nAnyoCompra    = 0;
     nAnyoHasta     = 0;

     nBaseImpo349   = 0;
     nCuota349      = 0;
     nTPRepar       = 0;
     nExRepar       = 0;
     nIgual         = 0;
|FIN;

|INCLUYE i_variar;

|PROCESO Graba349_310;
     nModelo       = enModelo;
     enTipoEntrada = 95;
     enModelo      = 349;
     eaNombreAct   = #999#6;
     enModelo349   = 310;
     |SUB_EJECUTA "dsmoc349";

     eaCodNif = #102#14;
     |HAZ LeeNifs;

     |ABRE #349;
     #349#0  = enEmpresa;
     #349#1  = enEjer;
     #349#2  = enPeriodo;
     #349#3  = enModelo;
     #349#4  = enComplem;
     #349#5  = enActividad;
     #349#6  = aTipo;
     #349#7  = #102#14;
     #349#25 = 0;
     #349#26 = 0;
     |SI aTipo = "ER"; |O aTipo = "AR";
         |SI #105#5 ! 0;
             #349#25 = #105#5; || Ejercicio Declarado;
             #349#26 = #105#4;
         |FINSI;
     |FINSI;
     |LEE 101#349=;
     |SI FSalida ! 0;
         |DDEFECTO #349;
         #349#0  = enEmpresa;
         #349#1  = enEjer;
         #349#2  = enPeriodo;
         #349#3  = enModelo;
         #349#4  = enComplem;
         #349#5  = enActividad;
         #349#6  = aTipo;
         #349#7  = #102#14;
         #349#25 = 0;
         #349#26 = 0;
         |SI aTipo = "ER"; |O aTipo = "AR";
             |SI #105#5 ! 0;
                 #349#25 = #105#5; || Ejercicio Declarado;
                 #349#26 = #105#4;
                 #349#27 = #105#6;
             |FINSI;
         |FINSI;
         |SI #709#12 !  "   ";  #349#8  = #709#12;  |FINSI;
         #349#9  = #709#1;
         |GRABA 020#349b;
     |FINSI;

     |SI #349#6 = "A "; |O #349#6 = "AR";
         nSwEsta = 0;
         |PARA nCampo2 = 11;  |SI nCampo2 [ 20;  |HACIENDO nCampo2 = nCampo2 + 3;
               nCampo1 = nCampo2 - 1;
               nCampo3 = nCampo2 + 1;
               |SI #349nCampo2 = nPorce;
                   #349nCampo1 = #349nCampo1 + nBaseImpo349;
                   #349nCampo2 = nPorce;
                   #349nCampo3 = #349nCampo3 + nCuota349;
                   nSwEsta = 1;
                   |SAL;
               |FINSI;
         |SIGUE;

         |SI nSwEsta = 0;
             |PARA nCampo2 = 11;  |SI nCampo2 [ 20;  |HACIENDO nCampo2 = nCampo2 + 3;
                   nCampo1 = nCampo2 - 1;
                   nCampo3 = nCampo2 + 1;
                   |SI #349nCampo2 = 0; |Y #349nCampo1 = 0;  |Y #349nCampo3 = 0;
                       #349nCampo1 = #349nCampo1 + nBaseImpo349;
                       #349nCampo2 = nPorce;
                       #349nCampo3 = #349nCampo3 + nCuota349;
                       nSwEsta = 1;
                       |SAL;
                   |FINSI;
              |SIGUE;
         |FINSI;

         |SI nSwEsta = 0;
             #349#19 = #349#19 + nBaseImpo349;
             #349#20 = 0;
             #349#21 = #349#21 + nCuota349;
         |FINSI;

         #349#22 = #349#10 + #349#13 + #349#16 + #349#19;
     |SINO;
         #349#22 = #349#22 + nBaseImpo349;
     |FINSI;

     |GRABA 020#349a;
     |LIBERA #349;
     |CIERRA #349;

     enModelo = nModelo;
|FPRC;

|PROCESO Grupo3_310;
  nBaseImpo = (#103#6 / enConversor) ! EURODBMOD;
  nPorce    = #103#7;
  nCuota    = (#103#8 / enConversor) ! EURODBMOD;
  nTotal    = ((#103#6 + #103#8 + #103#10) / enConversor) ! EURODBMOD;

  |SI #30#30 = 1; |Y #8#7 = "REGISTROS ";
      #33#0 = #102#11;
      |LEE 001#33=;
      |SI FSalida = 0;
          |SI #33#6 ! 0;
              |SI #0#1 ! 12;
                  nTotal = nBaseImpo * #33#6;
                  nTotal = ((nTotal * #33#7) / 100) ! EURODBMOD;
                  #310#9 = #310#9 + nTotal;
              |SINO;
                  nIngresos = nIngresos + nBaseImpo;
                  #310#9    = nIngresos * #33#6;
              |FINSI;
          |FINSI;
      |FINSI;
  |FINSI;

  |SI #30#30 = 2;
      #310#10 = #310#10 + nCuota;

      aTipo = "A";
      nCuota349    = nCuota;
      nBaseImpo349 = nBaseImpo;
      |SI nCuota < 0; |O nBaseImpo < 0;
          nCuota349    = - nCuota;
          nBaseImpo349 = - nBaseImpo;
          aTipo = "AR";
      |FINSI;
      |HAZ Graba349_310;
  |FINSI;

  |SI #30#30 = 4;   #310#11 = #310#11 + nCuota;   |FINSI;
  |SI #30#30 = 3;   #310#12 = #310#12 + nCuota;   |FINSI;
|FPRC;

|PROCESO Grupo4_310;
  nBaseImpo = (#103#6 / enConversor) ! EURODBMOD;
  nPorce    = #103#7;
  nCuota    = (#103#8 / enConversor) ! EURODBMOD;

  |SI #30#32 = 3;   #310#13     = #310#13 + nCuota;   |FINSI;
  |SI #30#32 = 2;   nCuotaSopor = nCuotaSopor + nCuota;   |FINSI;
|FPRC;

|PROCESO Grupo5_310;
  nBaseImpo = (#103#6 / enConversor) ! EURODBMOD;
  nPorce    = #103#7;
  nCuota    = (#103#8 / enConversor) ! EURODBMOD;
  nGrupo    = 3;

  |SI #30#34 = 9;                       || Entregas Intracomunitarias
      #310#15 = #310#15 + nCuota;
      aTipo = "E";
      nCuota349    = nCuota;
      nBaseImpo349 = nBaseImpo;
      |SI nCuota < 0; |O nBaseImpo < 0;
          nCuota349    = - nCuota;
          nBaseImpo349 = - nBaseImpo;
          aTipo = "ER";
      |FINSI;
      |HAZ Graba349_310;
  |FINSI;
|FPRC;

|PROCESO LeeLinea310;
     |SI #103#5 = "N"; |ACABA;  |FINSI;
     aAlfa1 = #103#30; |QBF aAlfa1; |SI aAlfa1 = ""; #103#30 = #102#10; |FINSI;
     |SI aMulDep = "S";
         nDepar = #103#30;
         |SI nDepar = 0;  nDepar = 1;   |FINSI;

         |ABRE #214;
         #214#0 = #999#0;
         #214#1 = nDepar;
         |LEE 040#214=;
         |SI FSalida ! 0;  nDepar = 1;  |FINSI;
         |CIERRA #214;
         |SI #999#1 ! nDepar;  |ACABA;  |FINSI;
     |FINSI;

     nSwPasa = 0;
     #30#0 = #103#3;
     |LEE 040#30=;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     |SI #30#4 = "N";  |ACABA;  |FINSI;

     |SI #30#30 ! 0; nSwPasa = 1;  |HAZ Grupo3_310;  |FINSI;
     |SI #30#32 ! 0; nSwPasa = 1;  |HAZ Grupo4_310;  |FINSI;
     |SI #30#34 ! 0; nSwPasa = 1;  |HAZ Grupo5_310;  |FINSI;
|FPRC;

|DEFBUCLE caivalin310;
     #103#1;
     ;
     #102#0, #102#1, 01;
     #102#0, #102#1, 99;
     ;
     NULL, LeeLinea310;
|FIN;

|PROCESO LeeCabecera310;
     |SI aMulDep ! "S";
         nDepar = #102#10;
         |SI nDepar = 0;  nDepar = 1;   |FINSI;

         |ABRE #214;
         #214#0 = #999#0;
         #214#1 = nDepar;
         |LEE 040#214=;
         |SI FSalida ! 0;  nDepar = 1;  |FINSI;
         |CIERRA #214;
         |SI #999#1 ! nDepar;  |ACABA;  |FINSI;
     |FINSI;

     |ABRE #105;
     |DDEFECTO #105;
     #105#0 = #102#0;
     #105#1 = #102#1;
     |LEE 040#105=;
     |CIERRA #105;

     |BUCLE caivalin310;

     |SI nSwPasa = 0;  |ACABA;  |FINSI;

     |SI #102#40 = 0;  #102#40 = nHPeriodo;  |FINSI;

     |GRABA 020#102a;
     |LIBERA #102;

     nSwPasa1 = 1;
|FPRC;

|DEFBUCLE camaniva310;
     #102#1;
     5;
     00, 0000000000, nDPeriodo;
     99, 9999999999, nHPeriodo;
     be;
     NULL, LeeCabecera310;
|FIN;

|PROCESO Compensa310;
     #310#0 = #1300#0;
     #310#1 = #1300#1;
     #310#2 = #999#3;
     #310#3 = #1300#3;
     #310#4 = #1300#4;
     #310#5 = #1300#5;
     |LEE 101#310=;
     |SI FSalida = 0;
         |SI #0#1 ! 12; |Y #8#7 = "REGISTROS ";
             #310#9  = #310#9 - #1300#9;
         |FINSI;

         #310#10 = #310#10 - #1300#10;
         #310#11 = #310#11 - #1300#11;
         #310#12 = #310#12 - #1300#12;
         #310#13 = #310#13 - #1300#13;
         #310#14 = #310#14 - #1300#14;
         #310#15 = #310#15 - #1300#15;
         |GRABA 020#310a;
         |LIBERA #310;
    |FINSI;
|FPRC;

|DEFBUCLE dsmoc310;
     #1300#1006;
     ;
     #999#0, #999#2, nPeriodo, #999#7, 0, #999#1;
     #999#0, #999#2, nPeriodo, #999#7, 0, #999#1;
     ;
     NULL, Compensa310;
|FIN;

|PROCESO Compensa349_310;
     |SI #1300#6 ! "A "; |Y #1300#6 ! "E ";  |ACABA;  |FINSI;

     #349#0  = #1300#0;
     #349#1  = #1300#1;
     #349#2  = #999#3;
     #349#3  = #1300#3;
     #349#4  = #1300#4;
     #349#5  = #1300#5;
     #349#6  = #1300#6;
     #349#7  = #1300#7;
     #349#25 = #1300#25;
     #349#26 = #1300#26;
     |LEE 101#349=;
     |SI FSalida = 0;
         #349#22 = #349#22 - #1300#22;

         |PARA nCampo2 = 11;  |SI nCampo2 [ 20;  |HACIENDO nCampo2 = nCampo2 + 3;
               nCampo1 = nCampo2 - 1;
               nCampo3 = nCampo2 + 1;
               |PARA nCampo22 = 11;  |SI nCampo22 [ 20;  |HACIENDO nCampo22 = nCampo22 + 3;
                      nCampo11 = nCampo22 - 1;
                      nCampo33 = nCampo22 + 1;
                      |SI #349nCampo22 = #1300nCampo2;
                          #349nCampo11 = #349nCampo11 - #1300nCampo1;
                          #349nCampo33 = #349nCampo33 - #1300nCampo3;
                          |SAL;
                      |FINSI;
                |SIGUE;
         |SIGUE;

         |GRABA 020#349a;
         |LIBERA #349;
     |FINSI;
|FPRC;

|DEFBUCLE dsmoc349_310;
     #1300#1010;
     ;
     #999#0, #999#2, nPeriodo, 349, 0, #999#1, "A ", 0000, 0, "            ";
     #999#0, #999#2, nPeriodo, 349, 0, #999#1, "E ", 9999, 9, "zzzzzzzzzzzz";
     ;
     NULL, Compensa349_310;
|FIN;

|PROCESO BorraCero349_310;
     |SI #349#6 ! "A "; |Y #349#6 ! "E ";  |ACABA;  |FINSI;
     |SI #349#22 ! 0;   |ACABA;  |FINSI;

     |BORRA 020#349a;
     |LIBERA #349;
|FPRC;

|DEFBUCLE dsmoc349Cero310;
     #349#1;
     ;
     #999#0, #999#2, #999#3, 349, 0, #999#1, "A ", 0000, 0, "            ";
     #999#0, #999#2, #999#3, 349, 0, #999#1, "E ", 9999, 9, "zzzzzzzzzzzz";
     be;
     NULL, BorraCero349_310;
|FIN;

|| \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
|PROCESO LeoDsmom046;
 nExRepar = 1;
 |SI #46#1 = #310#5;
     nIgual   = 1;
     nTPRepar = #46#5;
 |FINSI;
|FPRC;

|DEFBUCLE LeoDsmom046;
 #46#1;
 ;
 #41#0, #41#2, #41#3, 01;
 #41#0, #41#2, #41#3, 99;
 e;
 NULL, LeoDsmom046;
|FIN;

|PROCESO Regulariza;
 nTPRepar = 0;
 nExRepar = 0;
 nIgual   = 0;

 |BUCLE LeoDsmom046;
 |SI nExRepar = 0;
     |SI #41#1 = #310#5; nIgual = 1; nTPRepar = 100; |FINSI;
 |FINSI;
 |SI nIgual = 0; |ACABA; |FINSI;  ||No pertenece a la actividad

 || .....      |SI #41#1 ! #310#5;  |ACABA;  |FINSI;
 |SI nTPRepar ! 100;
     #41#10   = (#41#10   % nTPRepar) ! EURODBMOD;
 |FINSI;

     nAnyoEjer = #310#1;

     aAlfa       = #41#27 % -104;
     nAnyoCompra = aAlfa;

     |SI nAnyoEjer   = nAnyoCompra;   |ACABA;  |FINSI;
     |SI #41#27      ] "01.01.1998";  |ACABA;  |FINSI;
     |SI nAnyoCompra < 1994;          |ACABA;  |FINSI;

     nAnyoHasta = nAnyoCompra + 5;

     |SI nAnyoEjer ] nAnyoHasta;  |ACABA;  |FINSI;

     #310#14 = #310#14 + ((#41#10 % 16) / 5);
|FPRC;

|DEFBUCLE dsmom041;
     #41#1;
     ;
     #310#0, "        ", 00;
     #310#0, "zzzzzzzz", 99;
     ;
     NULL, Regulariza;
|FIN;

|PROCESO Amortizacion;
     |BUCLE dsmom041;
|FPRC;

|PROCESO leeActividad;
     |ABRE #214;
     #214#0 = enEmpresa;
     #214#1 = enActividad;
     |LEE 040#214=;
     |SI FSalida ! 0;
         #214#4 = "SIN ACTIVIDAD";
     |FINSI;
     |CIERRA #214;

     #310#6 = #214#3;   ||epigrafe
     #310#7 = #214#4;   ||nombre actividad
     #310#8 = "N";
     |SI #214#9 = 6;  |O #214#9 = 7; |O #214#9 = 11; |O #214#9 = 12;
         #310#8 = "S";
     |FINSI;
|FPRC;

|PROCESO Pase310;
     |DDEFECTO #8;
     |ABRE #8;
     #8#0 = #999#0;
     #8#1 = #999#2;
     #8#2 = #999#3;
     #8#3 = #999#7;
     #8#4 = 0;
     #8#5 = #999#1;
     |LEE 101#8=;
     |SI FSalida = 0;  |Y #8#7 = "REGISTROS ";
         #8#11 = "SIN DATOS";
         |GRABA 020#8a;

         enEmpresa     = #8#0;
         enEjer        = #8#1;
         enPeriodo     = #8#2;
         enModelo      = #8#3;
         enComplem     = #8#4;
         enActividad   = #8#5;
         enTipoEntrada = 97;
         |SUB_EJECUTA_NP "dsmoc310";
     |FINSI;
     |LIBERA #8;
     |CIERRA #8;

     enEmpresa     = #999#0;
     enEjer        = #999#2;
     enPeriodo     = #999#3;
     enModelo      = 349;
     enComplem     = 0;
     enActividad   = #999#1;
     enTipoEntrada = 97;
     eaNombreAct   = #999#6;
     enModelo349   = 310;
     |SUB_EJECUTA_NP "dsmoc349";

     enEmpresa     = #999#0;
     enEjer        = #999#2;
     enPeriodo     = #999#3;
     enModelo      = #999#7;
     enComplem     = 0;
     enActividad   = #999#1;

     enEmpresa   = #999#0;
     enEjer      = #999#2;
     enSwOpPar   = 0;
     |HAZ SituaEmpresa;
     |SI enSwPartido = 0;
         aAlfa = #999#2;
         aAlfa = aAlfa % -102;
         nEjer = aAlfa;

         |ABRE #101;
         |SELECT #4#101;
         #101#2  = #999#0;
         #101#26 = nEjer;
         |LEE 040#101=;
         |SI FSalida ! 0;  |CIERRA #101;  |ACABA;   |FINSI;
         |CIERRA #101;

         |DBASS aPathConta;   |QBT aPathConta;
         aPathConta = aPathConta + "contagen/fich/" + (("00000" + #101#2) % -105) + #101#3 + "/";

         enEmpresa  = #101#2;
         enPerConta = #101#3;
         eaLaMonEmp = #101#28;
     |SINO;
         enPerConta = enPeriodoPar;
         eaLaMonEmp = "E";
     |FINSI;
     |HAZ EnConversor;

     |PATH_DAT #102 aPathConta;
     |PATH_DAT #103 aPathConta;
     |PATH_DAT #104 aPathConta;
     |PATH_DAT #105 aPathConta;

     |ABRE #104;
     |LEE 040#104p;
     |SI FSalida ! 0;  |DDEFECTO #104;  |FINSI;
     |CIERRA #104;
     aMulDep = #104#132;

     |SI #104#46 = "T";
         |SI #0#1 = 1;   nDPeriodo = 1;  nHPeriodo = 1;   |FINSI;
         |SI #0#1 = 2;   nDPeriodo = 1;  nHPeriodo = 1;   |FINSI;
         |SI #0#1 = 3;   nDPeriodo = 1;  nHPeriodo = 1;   |FINSI;
         |SI #0#1 = 4;   nDPeriodo = 1;  nHPeriodo = 2;   |FINSI;
         |SI #0#1 = 5;   nDPeriodo = 1;  nHPeriodo = 2;   |FINSI;
         |SI #0#1 = 6;   nDPeriodo = 1;  nHPeriodo = 2;   |FINSI;
         |SI #0#1 = 7;   nDPeriodo = 1;  nHPeriodo = 3;   |FINSI;
         |SI #0#1 = 8;   nDPeriodo = 1;  nHPeriodo = 3;   |FINSI;
         |SI #0#1 = 9;   nDPeriodo = 1;  nHPeriodo = 3;   |FINSI;
         |SI #0#1 = 10;  nDPeriodo = 1;  nHPeriodo = 4;   |FINSI;
         |SI #0#1 = 11;  nDPeriodo = 1;  nHPeriodo = 4;   |FINSI;
         |SI #0#1 = 12;  nDPeriodo = 1;  nHPeriodo = 4;   |FINSI;
     |SINO;
         |SI #0#1 = 1;   nDPeriodo = 1;  nHPeriodo = 1;   |FINSI;
         |SI #0#1 = 2;   nDPeriodo = 1;  nHPeriodo = 2;   |FINSI;
         |SI #0#1 = 3;   nDPeriodo = 1;  nHPeriodo = 3;   |FINSI;
         |SI #0#1 = 4;   nDPeriodo = 1;  nHPeriodo = 4;   |FINSI;
         |SI #0#1 = 5;   nDPeriodo = 1;  nHPeriodo = 5;   |FINSI;
         |SI #0#1 = 6;   nDPeriodo = 1;  nHPeriodo = 6;   |FINSI;
         |SI #0#1 = 7;   nDPeriodo = 1;  nHPeriodo = 7;   |FINSI;
         |SI #0#1 = 8;   nDPeriodo = 1;  nHPeriodo = 8;   |FINSI;
         |SI #0#1 = 9;   nDPeriodo = 1;  nHPeriodo = 9;   |FINSI;
         |SI #0#1 = 10;  nDPeriodo = 1;  nHPeriodo = 10;  |FINSI;
         |SI #0#1 = 11;  nDPeriodo = 1;  nHPeriodo = 11;  |FINSI;
         |SI #0#1 = 12;  nDPeriodo = 1;  nHPeriodo = 12;  |FINSI;
     |FINSI;

     |ABRE #30;
     |ABRE #33;

     |ABRE #310;
     #310#0 = enEmpresa;
     #310#1 = enEjer;
     #310#2 = enPeriodo;
     #310#3 = enModelo;
     #310#4 = enComplem;
     #310#5 = enActividad;
     |LEE 101#310=;
     |SI FSalida ! 0;
         |DDEFECTO #310;
         #310#0 = enEmpresa;
         #310#1 = enEjer;
         #310#2 = enPeriodo;
         #310#3 = enModelo;
         #310#4 = enComplem;
         #310#5 = enActividad;
         |HAZ leeActividad;
         |GRABA 020#310b;
     |SINO;
         #310#10 = 0;
         #310#11 = 0;
         #310#12 = 0;
         #310#13 = 0;
         #310#14 = 0;
         #310#15 = 0;
     |FINSI;

     nCuotaSopor = 0;
     nIngresos   = 0;
     |BUCLE camaniva310;
     |SI nSwPasa1 = 1;
         |SI #0#1 = 12;
             |SI #8#7 = "REGISTROS ";
                 nCuotaSopor = nCuotaSopor + (#310#9 % 1);
                 #310#9      = #310#9 - nCuotaSopor;
             |FINSI;

             #310#14     = 0;
             |HAZ Amortizacion;
         |FINSI;
         |GRABA 020#310a;
     |FINSI;
     |LIBERA #310;
     |CIERRA #30;
     |CIERRA #33;

     |SI enSwPartido = 1;
         enSwOpPar   = 1;
         |HAZ FinalPartido;
     |FINSI;

     |SI #999#3 ! 1;
         |DBASE aPathModelo;  |QBT aPathModelo;
         aDef = aPathModelo + "def/dsmoc310.mas";
         |CARGA_DEF aDef, espejo1@;
         |SI FSalida = 0;
             |PARA nPeriodo = 1;  |SI nPeriodo < #999#3;  |HACIENDO nPeriodo = nPeriodo + 1;
                   |BUCLE dsmoc310;
             |SIGUE;
         |FINSI;
         |DESCARGA_DEF #espejo1@;

         |DBASE aPathModelo;  |QBT aPathModelo;
         aDef = aPathModelo + "def/dsmoc349.mas";
         |CARGA_DEF aDef, espejo1@;
         |SI FSalida = 0;
             |ABRE #349;
             |PARA nPeriodo = 1;  |SI nPeriodo < #999#3;  |HACIENDO nPeriodo = nPeriodo + 1;
                   |BUCLE dsmoc349_310;
             |SIGUE;
             |CIERRA #349;
         |FINSI;

         |DESCARGA_DEF #espejo1@;

         |BUCLE dsmoc349Cero310;
     |FINSI;

     |CIERRA #310;

     enEmpresa     = #999#0;
     enEjer        = #999#2;
     enPeriodo     = #999#3;
     enModelo      = #999#7;
     enComplem     = 0;
     enActividad   = #999#1;
     enTipoEntrada = 96;
     eaNombreAct   = #999#6;
     enModelo349   = 310;
     |SUB_EJECUTA_NP "dsmoc349";

     enEmpresa     = #999#0;
     enEjer        = #999#2;
     enPeriodo     = #999#3;
     enModelo      = #999#7;
     enComplem     = 0;
     enActividad   = #999#1;
     enTipoEntrada = 98
     |SUB_EJECUTA_NP "dsmoc310";

     |ABRE #4;
     #4#0 = #999#0;
     #4#1 = #999#2;
     #4#2 = #999#3;
     #4#3 = #999#7;
     #4#4 = 0;
     |LEE 101#4=;
     |SI FSalida = 0;
         |HAZ ChequeaSituacion;  || Esta en el PLB

         |GRABA 020#4a;
         |LIBERA #4;
     |FINSI;
     |CIERRA #4;
|FPRC;
