|FICHEROS;
  dsm18420 #0;

  dsm18401 #11;
  dsm18430 #12;
  dsm18403 #13;
  dsm18405 #14;
  dsm18406 #15;
  dsm18407 #16;
  dsm18408 #17;
  dsm18409 #18;
|FIN;

|VARIABLES;
   nImporte = 0;
   nImporte1 = 0;
   nImporte2 = 0;
   nReducc  = 0;
   nReducc1  = 0;
   nReducc2  = 0;
|FIN;

|PROCESO MiraClaves;
   #dsm18420#20 = 0;
   |SI #dsm18420#0  ! 0; #dsm18420#20 = #dsm18420#20 + 1; |FINSI;
   |SI #dsm18420#2  ! 0; #dsm18420#20 = #dsm18420#20 + 1; |FINSI;
   |SI #dsm18420#4  ! 0; #dsm18420#20 = #dsm18420#20 + 1; |FINSI;
   |SI #dsm18420#6  ! 0; #dsm18420#20 = #dsm18420#20 + 1; |FINSI;
   |SI #dsm18420#7  ! 0; #dsm18420#20 = #dsm18420#20 + 1; |FINSI;
   |SI #dsm18420#8  ! 0; #dsm18420#20 = #dsm18420#20 + 1; |FINSI;
   |SI #dsm18420#9  ! 0; #dsm18420#20 = #dsm18420#20 + 1; |FINSI;
   |SI #dsm18420#10 ! 0; #dsm18420#20 = #dsm18420#20 + 1; |FINSI;
   |SI #dsm18420#13 ! 0; #dsm18420#20 = #dsm18420#20 + 1; |FINSI;
   |SI #dsm18420#14 ! 0; #dsm18420#20 = #dsm18420#20 + 1; |FINSI;
   |SI #dsm18420#15 ! 0; #dsm18420#20 = #dsm18420#20 + 1; |FINSI;
   |SI #dsm18420#16 ! 0; #dsm18420#20 = #dsm18420#20 + 1; |FINSI;
   |SI #dsm18420#17 ! 0; #dsm18420#20 = #dsm18420#20 + 1; |FINSI;
   |SI #dsm18420#18 ! 0; #dsm18420#20 = #dsm18420#20 + 1; |FINSI;
   |SI #dsm18420#19 ! 0; #dsm18420#20 = #dsm18420#20 + 1; |FINSI;
   |PINTA #dsm18420#20;
|FPRC;

|PROCESO MarcaLey;
   |SI #dsm18420#11 = "X";
      #dsm18420#12 = " "; |PINTA #dsm18420#12;
   |FINSI;
   |SI #dsm18420#12 = "X";
      #dsm18420#11 = " "; |PINTA #dsm18420#11;
   |FINSI;
|FPRC;

|PROCESO CapturaK;
   nImporte = #dsm18401#50 + #dsm18401#51 + #dsm18401#52 + #dsm18401#53 + #dsm18401#54;
   #dsm18420#19 = nImporte % #dsm18430#11; |PINTA #dsm18420#19;
|FPRC;

|PROCESO CapturaIJ;
   #dsm18420#11 = " "; #dsm18420#12 = " ";
   |SI #dsm18401#38 = 0; |Y #dsm18401#39 = 0; |Y #dsm18401#40 = 0;
    |Y #dsm18401#41 = 0; |Y #dsm18401#42 = 0; |Y #dsm18401#43 = 0;
       #dsm18420#12 = "X";
       #dsm18420#13 = #dsm18401#44 % #dsm18430#11;
       #dsm18420#14 = #dsm18401#45 % #dsm18430#11;
       #dsm18420#15 = #dsm18401#46 % #dsm18430#11;
       #dsm18420#16 = #dsm18401#47 % #dsm18430#11;
       #dsm18420#17 = #dsm18401#48 % #dsm18430#11;
       #dsm18420#18 = #dsm18401#49 % #dsm18430#11;
   |FINSI;
   |SI #dsm18401#44 = 0; |Y #dsm18401#45 = 0; |Y #dsm18401#46 = 0;
    |Y #dsm18401#47 = 0; |Y #dsm18401#48 = 0; |Y #dsm18401#49 = 0;
       #dsm18420#11 = "X";
       |SI #dsm18401#1 [ 2006;
          #dsm18420#13 = #dsm18401#38 % #dsm18430#11;
          #dsm18420#14 = #dsm18401#39 % #dsm18430#11;
          #dsm18420#15 = #dsm18401#40 % #dsm18430#11;
          #dsm18420#16 = #dsm18401#41 % #dsm18430#11;
          #dsm18420#17 = #dsm18401#42 % #dsm18430#11;
          #dsm18420#18 = #dsm18401#43 % #dsm18430#11;
       |SINO;
          #dsm18420#13 = #dsm18401#38 % #dsm18430#11;
          #dsm18420#14 = #dsm18401#39 % #dsm18430#11;
          #dsm18420#15 = #dsm18401#40 % #dsm18430#11;
          #dsm18420#16 = #dsm18401#41 % #dsm18430#11;
          #dsm18420#17 = #dsm18401#43 % #dsm18430#11;
          #dsm18420#18 = 0;
       |FINSI;
   |FINSI;

   |SI #dsm18420#11 = " "; |Y #dsm18420#12 = " ";
      |MENAV "    No se pueden calcular las deducciones automaticamente. Recuerde introducirlas manualmente";
   |FINSI;
|FPRC;

|PROCESO ImporteG;
   |SI #dsm18409#1 > 2006;
      |SI #dsm18409#9 ! "N"; |O #dsm18409#5 ! "ES"; |ACABA; |FINSI;
   |FINSI;

   nImporte = nImporte + #dsm18409#7;
|FPRC;

|DEFBUCLE ImporteG1;
#dsm18409#1;
6;
#dsm18401#0, #dsm18401#1, #dsm18401#3, 001, "G";
#dsm18401#0, #dsm18401#1, #dsm18401#3, 999, "G";
;
NULL,ImporteG;
|FIN;

|DEFBUCLE ImporteG2;
#dsm18409#1;
6;
#dsm18401#0, #dsm18401#1, #dsm18401#3, 001, "P";
#dsm18401#0, #dsm18401#1, #dsm18401#3, 999, "P";
;
NULL,ImporteG;
|FIN;

|PROCESO CapturaG;
   nImporte = 0;
   |BUCLE ImporteG1;
   #dsm18420#9 = nImporte % #dsm18430#11; |PINTA #dsm18420#9;
   nImporte = 0;
   |BUCLE ImporteG2;
   #dsm18420#10 = nImporte % #dsm18430#11; |PINTA #dsm18420#10;
|FPRC;

|PROCESO ImporteF;
   |SI #dsm18408#4 ! "ES"; |Y #dsm18408#1 > 2006; |ACABA; |FINSI;
   nImporte = nImporte + #dsm18408#6;
|FPRC;

|DEFBUCLE ImporteF1;
#dsm18408#1;
5;
#dsm18401#0, #dsm18401#1, #dsm18401#3, 001, "G";
#dsm18401#0, #dsm18401#1, #dsm18401#3, 999, "G";
;
NULL,ImporteF;
|FIN;

|DEFBUCLE ImporteF2;
#dsm18408#1;
5;
#dsm18401#0, #dsm18401#1, #dsm18401#3, 001, "P";
#dsm18401#0, #dsm18401#1, #dsm18401#3, 999, "P";
;
NULL,ImporteF;
|FIN;

|PROCESO CapturaF;
   nImporte = 0;
   |BUCLE ImporteF1;
   #dsm18420#7 = nImporte % #dsm18430#11; |PINTA #dsm18420#7;
   nImporte = 0;
   |BUCLE ImporteF2;
   #dsm18420#8 = nImporte % #dsm18430#11; |PINTA #dsm18420#8;
|FPRC;

|PROCESO ImporteE;
   nImporte = nImporte + #dsm18407#9;
|FPRC;

|DEFBUCLE ImporteE;
#dsm18407#1;
;
#dsm18401#0, #dsm18401#1, #dsm18401#3, 001;
#dsm18401#0, #dsm18401#1, #dsm18401#3, 999;
;
NULL,ImporteE;
|FIN;

|PROCESO CapturaE;
   nImporte = 0; nReducc = 0;
   |BUCLE ImporteE;
   #dsm18420#6 = nImporte % #dsm18430#11; |PINTA #dsm18420#6;
|FPRC;

|PROCESO ImporteD;
   nImporte = nImporte + #dsm18406#9 + #dsm18406#12;
   nReducc  = nReducc  + #dsm18406#13;
|FPRC;

|DEFBUCLE ImporteD;
#dsm18406#1;
;
#dsm18401#0, #dsm18401#1, #dsm18401#3, 001;
#dsm18401#0, #dsm18401#1, #dsm18401#3, 999;
;
NULL,ImporteD;
|FIN;

|PROCESO CapturaD;
   nImporte = 0; nReducc = 0;
   |BUCLE ImporteD;
   #dsm18420#4 = nImporte % #dsm18430#11; |PINTA #dsm18420#4;
   #dsm18420#5 = nReducc  % #dsm18430#11; |PINTA #dsm18420#5;
|FPRC;

|PROCESO ImporteC;
   nImporte = nImporte + #dsm18405#8;
   nReducc  = nReducc  + #dsm18405#10;
|FPRC;

|DEFBUCLE ImporteC;
#dsm18405#1;
;
#dsm18401#0, #dsm18401#1, #dsm18401#3, 001;
#dsm18401#0, #dsm18401#1, #dsm18401#3, 999;
;
NULL,ImporteC;
|FIN;

|PROCESO CapturaC;
   nImporte = 0; nReducc = 0;
   |BUCLE ImporteC;
   #dsm18420#2 = nImporte % #dsm18430#11; |PINTA #dsm18420#2;
   #dsm18420#3 = nReducc  % #dsm18430#11; |PINTA #dsm18420#3;
|FPRC;

|PROCESO ImporteA;
   |SI #dsm18403#4 = "S"; |Y #dsm18403#1 > 2006; |ACABA; |FINSI;

   |SI #dsm18403#1 > 2006;
      |SI #dsm18403#5 = "ES";
         nImporte1 = nImporte1 + #dsm18403#8;
         nReducc1  = nReducc1  + #dsm18403#10;
      |SINO;
         nImporte2 = nImporte2 + #dsm18403#8;
         nReducc2  = nReducc2  + #dsm18403#10;
      |FINSI;
   |SINO;
      nImporte = nImporte + #dsm18403#8;
      nReducc  = nReducc  + #dsm18403#10;
   |FINSI;
|FPRC;

|DEFBUCLE ImporteA;
#dsm18403#1;
;
#dsm18401#0, #dsm18401#1, #dsm18401#3, 001;
#dsm18401#0, #dsm18401#1, #dsm18401#3, 999;
;
NULL,ImporteA;
|FIN;

|PROCESO CapturaA;
   nImporte1 = 0; nReducc1 = 0;
   nImporte2 = 0; nReducc2 = 0;
   |BUCLE ImporteA;
   #dsm18420#0  = nImporte1 % #dsm18430#11; |PINTA #dsm18420#0;
   #dsm18420#1  = nReducc1  % #dsm18430#11; |PINTA #dsm18420#1;
   #dsm18420#21 = nImporte2 % #dsm18430#11; |PINTA #dsm18420#21;
   #dsm18420#22 = nReducc2  % #dsm18430#11; |PINTA #dsm18420#22;
|FPRC;

|PROCESO Captura;
   |SI FSalida ! 10; |ACABA; |FINSI;
   |HAZ CapturaA; |HAZ CapturaC; |HAZ CapturaD;  |HAZ CapturaE;
   |HAZ CapturaF; |HAZ CapturaG; |HAZ CapturaIJ; |HAZ CapturaK;
|FPRC;
