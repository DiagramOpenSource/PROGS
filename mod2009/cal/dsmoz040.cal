|FICHEROS;
     dsmoz040 #0;
     dsmom040 #40;
     dsmow040 #999;
    :/basica/def/agifigen #1000;
|FIN;

|VARIABLES;
     aFichero  = "";
     nCampo    = 0;
     nDEmpresa = 0;
     nHEmpresa = 0;
     enGraba   = 0;
     aAlfa1    = "";
|FIN;

|INCLUYE i_variar;
|INCLUYE i_varcon;


|| /////////////////////// PROCESOS DE TRABAJO \\\\\\\\\\\\\\\\\\\\

|PROCESO GrabaTempo;
     #999#0 = #40#0;
     |LEE 101#999=;
     |SI FSalida ! 0;
         #999#0 = #40#0;
         #999#1 = #40#8;
         |GRABA 020#999n;
         enGraba = 1;
     |SINO;
         aAlfa1 = #999#1; |QBF aAlfa1;
         |SI aAlfa1 = "";
             #999#1 = #40#8;
             |GRABA 020#999a;
         |FINSI;
     |FINSI;
     |LIBERA #999;
|FPRC;

|DEFBUCLE dsmom040;
     #40#1;
     ;
     nDEmpresa, 0000;
     nHEmpresa, 9999;
     ;
     NULL, GrabaTempo;
|FIN;


|PROCESO GrabaTempo1;
 |ABRE #40;
 |DDEFECTO #40;
 #40#0 = #1000#0;
 #40#2 = 0001;
 |LEE 041#40];
 |SI FSalida = 0; |Y #40#0= #1000#0;
     #40#8 = #1000#1;
     |HAZ GrabaTempo;
 |FINSI;
 |CIERRA #40;
|FPRC;

|DEFBUCLE dsmom040_f;
     #1000#1;
     ;
     nDEmpresa;
     nHEmpresa;
     ;
     NULL, GrabaTempo1;
|FIN;


|RUTINA ClaveBaja999;
    |SI FSalida = "POSICION";
        #999#0 = #dsmoz040#1;
    |SINO;
        #999#0 = 1;
    |FINSI;
|FRUT;

|RUTINA ClaveAlta999;
     #999#0 = 99999;
|FRUT;

|PROCESO Tipo3;  |TIPO 3;
     aFichero = ("40" + Usuario) % 108;
     |NOME_DAT #999 aFichero;
     |ABRE #999;  |CIERRA #999;  |DELINDEX #999;

     |ABRE #999;
     nDEmpresa = 00000;
     nHEmpresa = 99999;
     |BUCLE dsmom040_f;
     |CIERRA #999;

     |PINPA #0#999;
     enEmpresa = 0;
     |HAZ Analitica;

     |ENTLINEAL #1#999, -1, 2, 9, 0, ClaveBaja999, ClaveAlta999;
     |DELINDEX #999;
|FPRC;

|PROGRAMA;
    |CLS;
    #0#1 = enEmpresa;
    |PINPA #0#0;
    |HAZ Tipo3;
|FPRO;
