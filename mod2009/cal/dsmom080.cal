|FICHEROS;
     dsmom080 #80;
     dsmom081 #81,MANTE;
     dsmom082 #82,MANTE;
     dsmom083 #83;

|FIN;

|VARIABLES;
     aTecla = "";
     nDAct = 0;
     nHAct = 0;
     nUno  = 0;
     nInkey = 0;

     nConIVA = 0;
     nSinIVA = 0;
     nSinIVA1 = 0;
     nNume1  = 0;
     nNume2  = 0;
|FIN;

|INCLUYE i_variar;

|PROCESO ClaveBaja83;
 #83#0 = #81#0;
 #83#1 = #81#1;
 #83#2 = #81#2;
 #83#3 = 00;
|FPRC;

|PROCESO ClaveAlta83;
 #83#0 = #81#0;
 #83#1 = #81#1;
 #83#2 = #81#2;
 #83#3 = 99;
|FPRC;

|PROCESO Verel83; |TIPO 7;
    #81#9 = #81#7 + #81#8 + #81#10 + #81#41;
    |ENTLINEAL #1#83, -4, 7, 20, 0, ClaveBaja83, ClaveAlta83;
|FPRC;

|PROCESO Entrarel83; |TIPO 11;
  |SI FSalida = 10;
      |ENTLINEAL #1#83, -4, 4, 20, 0, ClaveBaja83, ClaveAlta83;
  |FINSI;
|FPRC;

|PROCESO Baja81;
 #81#0 = enEmpresa;
 #81#1 = enEjer;
 #81#2 = 00;
|FPRC;

|PROCESO Alta81;
 #81#0 = enEmpresa;
 #81#1 = enEjer;
 #81#2 = 99;
|FPRC;

|PROCESO Entrarel81; |TIPO 11;
  |SI FSalida = 10;
      |PUSHV 0801 2380;
      |PINPA #0#81;
      |ENTLINEAL #1#81, -3, 4, 22, 0, Baja81, Alta81;
      |POPV;
  |FINSI;
|FPRC;

|PROCESO ClaveBaja82;
 #82#0 = #80#0;
 #82#1 = #80#1;
 #82#2 = 01;
|FPRC;

|PROCESO ClaveAlta82;
 #82#0 = #80#0;
 #82#1 = #80#1;
 #82#2 = 99;
|FPRC;

|PROGRAMA;

     |HAZ LeeCtrlProrr;

     |SI enSwProrr ! 2;
         |ABRE #80;
         |LEE 0001#80p;
         |SI FSalida ! 0;
             |CIERRA #80;
             |SI enEjer ] enEjerPro; |SUB_EJECUTA_NP "dsmozprr;todo"; |FINSI;
         |SINO;
             |CIERRA #80;
         |FINSI;
     |SINO;
         |AVISO;
         |ACABA;
     |FINSI;

     |SI enEjer < enEjerPro; |ACABA; |FINSI;

     eaNomDef = "dsmom080";

|| \\\\\\ Consulta del Modelo ////////

     |SI enTipoEntrada = 4;              || Consulta del Modelo
         |CABEZA "Prorratas";

         |ABRE #80;
         #80#0 = enEmpresa;
         #80#1 = enEjer;
         |LEE 101#80=;
         |SI FSalida ! 0;
             |MENAV "    EMPRESA SIN PRORRATA";
             |LIBERA #80;
             |CIERRA #80;
             |ACABA;
         |FINSI;

         |SI #80#3 > 100; #80#3 = 100; |FINSI;
         |SI #80#5 > 100; #80#5 = 100; |FINSI;

         nUno = 0;
         |SI enPeriodo = 12;
             |SI #80#4 = "E"; nUno = 1; |FINSI;
             |SI #80#4 = "N"; nUno = 2; |FINSI;
         |SINO;
             |SI #80#2 = "E"; nUno = 1; |FINSI;
             |SI #80#2 = "N"; nUno = 2; |FINSI;
         |FINSI;

         |SI nUno = 2;
             |MENAV "    EMPRESA SIN PRORRATA";
             |LIBERA #80;
             |CIERRA #80;
             |ACABA;
         |FINSI;

         #80#8 = #80#6 + #80#7 + #80#9 + #80#43;
         |PINPA #0#80;
         |PINDA #0#80;
         |ENTLINEAL #1#82, -3, 4, 20,0, ClaveBaja82, ClaveAlta82;
         |LIBERA #80;
         |CIERRA #80;
   |FINSI;
|FPRO;
