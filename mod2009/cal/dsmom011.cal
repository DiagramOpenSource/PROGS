|FICHEROS;
     dsmow006 #998;
     dsmom011 #11,MANTE;

     espejos@ #111;
|FIN;

|VARIABLES;
     aConcepto   = "";
     aDef        = "";
     aPathModelo = "";
     aAlfa       = "";

     nDosIntro   = 0;
     nCampo      = 0;
     nCampo1     = 0;
     nPeriodoMin = 0;
     nModo       = 0;
|FIN;

|INCLUYE i_variar;

|PROCESO DosIntrom011;  |TIPO 7;
     nModo = (FEntrada / 100) ! 0;
     |SI nModo = 4;  |ACABA;  |FINSI;

     |SI nDosIntro = 0;
         |PTEC 802;
         |PTEC 802;
     |FINSI;
|FPRC;

|PROCESO Teclam011;  |TIPO 0;
     |SI FSalida = 2;
         |PTEC 802;
         |PTEC 802;
         |PTEC 808;

         aConcepto = "";
         nDosIntro = 1;
         |ACABA;
     |FINSI;

     |SI FSalida = 1;
         |PTEC 806;
         nDosIntro = 1;
         aConcepto = #11#5;
         |ACABA;
     |FINSI;

     |SI aConcepto = #11#5;
         |ERROR;
         aConcepto = "";
     |SINO;
         nDosIntro = 0;
         aConcepto = #11#5;
     |FINSI;
|FPRC;

|PROCESO ExistenciaIni;
     nPeriodoMin = 1;
     |SI #998#7  = "X";  nPeriodoMin = 3;  |FINSI;

     |SI #11#2 ! nPeriodoMin;
         |DBASE aPathModelo;  |QBT aPathModelo;
         aDef = aPathModelo + "def/dsmom011.mas";
         |CARGA_DEF aDef, espejos@;
         |SI FSalida ! 0;
             aAlfa = "     Error en cargar el Def " + eaNomDef;
             |MENAV aAlfa;
             |ERROR;
         |FINSI;

         |ABRE #111;
         #111#0 = #11#0;
         #111#1 = #11#1;
         #111#2 = #11#2 - nPeriodoMin;
         #111#3 = #11#3;
         #111#4 = #11#4;
         #111#5 = #11#5;
         |LEE 040#111=;
         |SI FSalida = 0;
             #11#8 = #111#8;
         |FINSI;
         |CIERRA #111;

         |DESCARGA_DEF #espejos@;

         |PINTA #11#8;
     |FINSI;
|FPRC;

|PROCESO Descarga11;
     nDosIntro = 0;
|FPRC;
