|FICHEROS;
     rem00044;

     reparame;
     rem00021;
     rem00007,MANTE;
     rem00008;
     rem00100;
     rem00101;

     rem01001@;
     rem01043@;
|FIN;

|INCLUYE rem44c99;

|| ---- RECOGIDA AUTOMATICA

|PROCESO LeeCasillaComunidad;
     #rem00008#0 = nComunidad;
     #rem00008#1 = nTipo;
     |LEE 040#rem00008.=;
     |SI FSalida ! 0;  |DDEFECTO #rem00008;  |FINSI;
|FPRC;

|PROCESO GrabaLinea;
     |ABRE #rem00007;
     #rem00007#0 = nComunidad;
     |LEE 040#rem00007.=;
     |SI FSalida ! 0;  |CIERRA #rem00007;  |ACABA;  |FINSI;
     |CIERRA #rem00007;

     |HAZ LeeCasillaComunidad;

     |DDEFECTO #rem00044;
     nLinea = nLinea + 1;
     #rem00044#0   = enEmpresa;
     #rem00044#1   = nLinea;
     #rem00044#2   = aPerceptor;
     #rem00044#3   = "A";
     #rem00044#11  = #rem00007#0;
     #rem00044#12  = #rem00007#1;
     #rem00044#13  = #rem00008#1;
     #rem00044#37  = #rem00008#2;
     #rem00044#38  = #rem00008#3;
     #rem00044#39  = #rem00008#4;
     #rem00044#40  = #rem00008#5;
     #rem00044#41  = #rem00008#6;
     #rem00044#42  = #rem00008#7;
     #rem00044#17  = nNumero;
     #rem00044#18  = nInversion;
     #rem00044#19  = nDeduccion;
     #rem00044#22  = nDeduccionC;
     #rem00044#20  = nPorceDed;

     |SI aPrestamo ! "";
         #rem00044#25 = aPrestamo % 104;
         #rem00044#26 = aPrestamo % 504;
         #rem00044#27 = aPrestamo % 902;
         #rem00044#28 = aPrestamo % 1110;
     |FINSI;

     |GRABA 020#rem00044.n;
     |LIBERA #rem00044;
|FPRC;

|PROCESO Descendientes;
     |SI #rem00101#7 = " ";
         nTotalHijos = nTotalHijos + 1;

         |SI #rem00101#6 ] 33;
             nTotalHijosMin = nTotalHijosMin + 1;
         |FINSI;
     |FINSI;

     |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
         nTotalHijos = nTotalHijos + 1;

         |SI #rem00101#6 ] 33; nTotalHijosMin = nTotalHijosMin + 1;  |FINSI;
     |FINSI;

     |SI #rem00101#7 = "3";  |Y aPerceptor = "TITULAR";
         nTotalHijos = nTotalHijos + 1;

         |SI #rem00101#6 ] 33; nTotalHijosMin = nTotalHijosMin + 1;  |FINSI;
     |FINSI;

     |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
         nTotalHijos = nTotalHijos + 1;

         |SI #rem00101#6 ] 33; nTotalHijosMin = nTotalHijosMin + 1;  |FINSI;
     |FINSI;

     |SI #rem00101#7 = "4";  |Y aPerceptor = "CONYUGE";
         nTotalHijos = nTotalHijos + 1;

         |SI #rem00101#6 ] 33; nTotalHijosMin = nTotalHijosMin + 1;  |FINSI;
     |FINSI;

     |SI #rem00101#5 < "2018"; |Y #rem00101#4 ! "    ";  |Y #rem00101#4 ! "0000";
         |SI #rem00101#7 = " ";
             nHijosAnt = nHijosAnt + 1;
         |FINSI;

         |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
             nHijosAnt = nHijosAnt + 1;
         |FINSI;

         |SI #rem00101#7 = "3";  |Y aPerceptor = "TITULAR";
             nHijosAnt = nHijosAnt + 1;
         |FINSI;

         |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
             nHijosAnt = nHijosAnt + 1;
         |FINSI;

         |SI #rem00101#7 = "4";  |Y aPerceptor = "CONYUGE";
             nHijosAnt = nHijosAnt + 1;
         |FINSI;
     |FINSI;

     |SI #rem00101#6 ] 65;
         |SI #rem00101#7 = " ";
             nHijos65Prop  = nHijos65Prop + .5;
             nHijosDedM1   = nHijosDedM1 + 1;
         |FINSI;

         |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
             nHijos65Prop = nHijos65Prop + 1;
             nHijosDedM1  = nHijosDedM1 + 1;
         |FINSI;

         |SI #rem00101#7 = "3";  |Y aPerceptor = "TITULAR";
             nHijos65Prop = nHijos65Prop + .5;
             nHijosDedM1  = nHijosDedM1  + 1;
             nHijosDedM3  = nHijosDedM3  + 1;
         |FINSI;

         |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
             nHijos65Prop = nHijos65Prop + 1;
             nHijosDedM1  = nHijosDedM1 + 1;
         |FINSI;

         |SI #rem00101#7 = "4";  |Y aPerceptor = "CONYUGE";
             nHijos65Prop = nHijos65Prop + .5;
             nHijosDedM1  = nHijosDedM1 + 1;
             nHijosDedM3  = nHijosDedM3 + 1;
         |FINSI;
     |FINSI;

     aAnyoAdop = #rem00101#18 % -104;
     |SI #rem00101#5 = "2018";  |O aAnyoAdop = "2018";
         |SI #rem00101#7 = " ";
             nHijosEje  = nHijosEje  + 0.5;
             nHijosDed  = nHijosDed  + 1;
             nHijosDed1 = nHijosDed1 + 1;

             |SI aAnyoAdop = "2018";
                 |SI #rem00101#22 = "S";
                     nHijosAdopI = nHijosAdopI + 0.5;
                 |SINO;
                     nHijosAdop  = nHijosAdop + 0.5;
                 |FINSI;
             |FINSI;

             |SI #rem00101#6 ] 33;
                 nHijosNac33 = nHijosNac33 + 1;

                 |SI nTotalHijos > 1;
                     nHijosDed33  = nHijosDed33 + 1;
                 |FINSI;
             |FINSI;

             |SI #rem00101#6 ] 65;
                 nHijosDedM = nHijosDedM  + 1;
             |FINSI;
         |FINSI;

         |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
             nHijosEje  = nHijosEje  + 1;
             nHijosDed  = nHijosDed  + 1;
             nHijosDed2 = nHijosDed2 + 1;

             |SI aAnyoAdop = "2018";
                 |SI #rem00101#22 = "S";
                     nHijosAdopI = nHijosAdopI + 1;
                 |SINO;
                     nHijosAdop  = nHijosAdop + 1;
                 |FINSI;
             |FINSI;

             |SI #rem00101#6 ] 33; |Y nTotalHijos > 1; nHijosDed33  = nHijosDed33 + 1;  |FINSI;

             |SI #rem00101#6 ] 65;    nHijosDedM   = nHijosDedM  + 1;  |FINSI;
         |FINSI;

         |SI #rem00101#7 = "3";  |Y aPerceptor = "TITULAR";
             nHijosEje  = nHijosEje  + 0.5;
             nHijosDed  = nHijosDed  + 1;
             nHijosDed2 = nHijosDed2 + 1;
             nHijosDed3 = nHijosDed3 + 1;

             |SI aAnyoAdop = "2018";
                 |SI #rem00101#22 = "S";
                     nHijosAdopI = nHijosAdopI + 0.5;
                     nHijosAdopI3 = nHijosAdopI3 + 1;
                 |SINO;
                     nHijosAdop  = nHijosAdop + 0.5;
                 |FINSI;
             |FINSI;

             |SI #rem00101#6 ] 33; |Y nTotalHijos > 1;
                 nHijosDed33   = nHijosDed33 + 1;
                 nHijosDed333  = nHijosDed333 + 1;
             |FINSI;

             |SI #rem00101#6 ] 65;
                 nHijosDedM  = nHijosDedM  + 1;
                 nHijosDedM2 = nHijosDedM2 + 1;
             |FINSI;
         |FINSI;

         |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
             nHijosEje  = nHijosEje  + 1;
             nHijosDed  = nHijosDed  + 1;
             nHijosDed2 = nHijosDed2 + 1;

             |SI aAnyoAdop = "2018";
                 |SI #rem00101#22 = "S";
                     nHijosAdopI = nHijosAdopI + 1;
                 |SINO;
                     nHijosAdop  = nHijosAdop + 1;
                 |FINSI;
             |FINSI;

             |SI #rem00101#6 ] 33; |Y nTotalHijos > 1;  nHijosDed33  = nHijosDed33 + 1;  |FINSI;

             |SI #rem00101#6 ] 65;  nHijosDedM   = nHijosDedM  + 1;  |FINSI;
         |FINSI;

         |SI #rem00101#7 = "4";  |Y aPerceptor = "CONYUGE";
             nHijosEje  = nHijosEje  + 0.5;
             nHijosDed  = nHijosDed  + 1;
             nHijosDed2 = nHijosDed2 + 1;
             nHijosDed3 = nHijosDed3 + 1;

             |SI aAnyoAdop = "2018";
                 |SI #rem00101#22 = "S";
                     nHijosAdopI = nHijosAdopI + 0.5;
                     nHijosAdopI3 = nHijosAdopI3 + 1;
                 |SINO;
                     nHijosAdop  = nHijosAdop + 0.5;
                 |FINSI;
             |FINSI;

             |SI #rem00101#6 ] 33; |Y nTotalHijos > 1;
                 nHijosDed33   = nHijosDed33 + 1;
                 nHijosDed333  = nHijosDed333 + 1;
             |FINSI;

             |SI #rem00101#6 ] 65;
                 nHijosDedM  = nHijosDedM  + 1;
                 nHijosDedM2 = nHijosDedM2 + 1;
             |FINSI;
         |FINSI;
     |FINSI;

     aAnyoAdop = #rem00101#18 % -104;
     nAnyo1    = #rem00101#5;
     nAnyo2    = aAnyoAdop;
     nAnyoNac  = nAnyo1;
     |SI nAnyoNac < nAnyo2;
         nAnyoNac  = nAnyo2;
     |FINSI;

     |SI nAnyoNac = "2016";  |O nAnyoNac = "2017";
         |SI nAnyoNac = "2017";  nHijos2017Mul = nHijos2017Mul + 1;  |FINSI;

         |SI #rem00101#7 = " ";
             |SI nAnyoNac = "2016";  nHijos2016  = nHijos2016  + 0.5;  |FINSI;
             |SI nAnyoNac = "2017";  nHijos2017  = nHijos2017  + 0.5;  |FINSI;
         |FINSI;

         |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
              |SI nAnyoNac = "2016";  nHijos2016  = nHijos2016  + 1;  |FINSI;
              |SI nAnyoNac = "2017";  nHijos2017  = nHijos2017  + 1;  |FINSI;
         |FINSI;

         |SI #rem00101#7 = "3";  |Y aPerceptor = "TITULAR";
             |SI nAnyoNac = "2016";  nHijos2016  = nHijos2016  + 0.5;  |FINSI;
             |SI nAnyoNac = "2017";  nHijos2017  = nHijos2017  + 0.5;  |FINSI;
         |FINSI;

         |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
             |SI nAnyoNac = "2016";  nHijos2016  = nHijos2016  + 1;  |FINSI;
             |SI nAnyoNac = "2017";  nHijos2017  = nHijos2017  + 1;  |FINSI;
         |FINSI;

         |SI #rem00101#7 = "4";  |Y aPerceptor = "CONYUGE";
             |SI nAnyoNac = "2016";  nHijos2016  = nHijos2016  + 0.5;  |FINSI;
             |SI nAnyoNac = "2017";  nHijos2017  = nHijos2017  + 0.5;  |FINSI;
         |FINSI;
     |FINSI;

     |SI #rem00101#5 ] "2016";
         |SI #rem00101#7 = " ";
             |SI #rem00101#6 < 65;
                 nHijosTres  = nHijosTres  + 1;
                 nHijosTres1 = nHijosTres1 + 0.5;
             |FINSI;
         |FINSI;

         |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
             |SI #rem00101#6 < 65;
                 nHijosTres  = nHijosTres  + 1;
                 nHijosTres1 = nHijosTres1 + 1;
             |FINSI;

         |FINSI;

         |SI #rem00101#7 = "3";  |Y aPerceptor = "TITULAR";
             |SI #rem00101#6 < 65;
                 nHijosTres  = nHijosTres  + 1;
                 nHijosTres1 = nHijosTres1 + 0.5;
             |FINSI;

             |SI #rem00101#5 = "2016"; nH3_4_2016 = nH3_4_2016 + 1;  |FINSI;
             |SI #rem00101#5 = "2017"; nH3_4_2017 = nH3_4_2017 + 1;  |FINSI;
             |SI #rem00101#5 = "2018"; nH3_4_2018 = nH3_4_2018 + 1;  |FINSI;
         |FINSI;

         |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
             |SI #rem00101#6 < 65;
                 nHijosTres  = nHijosTres  + 1;
                 nHijosTres1 = nHijosTres1 + 1;
             |FINSI;
         |FINSI;

         |SI #rem00101#7 = "4";  |Y aPerceptor = "CONYUGE";
             |SI #rem00101#6 < 65;
                 nHijosTres  = nHijosTres  + 1;
                 nHijosTres1 = nHijosTres1 + 0.5;
             |FINSI;

             |SI #rem00101#5 = "2016"; nH3_4_2016 = nH3_4_2016 + 1;  |FINSI;
             |SI #rem00101#5 = "2017"; nH3_4_2017 = nH3_4_2017 + 1;  |FINSI;
             |SI #rem00101#5 = "2018"; nH3_4_2018 = nH3_4_2018 + 1;  |FINSI;
         |FINSI;
     |SINO;
         |SI #rem00101#6 ] 65;
             |SI #rem00101#7 = " ";
                 nHijos65   = nHijos65 + 1;
                 nHijos65_1 = nHijos65_1 + 0.5;
             |FINSI;

             |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
                 nHijos65   = nHijos65 + 1;
                 nHijos65_1 = nHijos65_1 + 1;
             |FINSI;

             |SI #rem00101#7 = "3";  |Y aPerceptor = "TITULAR";
                 nHijos65   = nHijos65 + 1;
                 nHijos65_1 = nHijos65_1 + 0.5;
             |FINSI;

             |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
                 nHijos65   = nHijos65 + 1;
                 nHijos65_1 = nHijos65_1 + 1;
             |FINSI;

             |SI #rem00101#7 = "4";  |Y aPerceptor = "CONYUGE";
                 nHijos65   = nHijos65 + 1;
                 nHijos65_1 = nHijos65_1 + 0.5;
             |FINSI;
         |FINSI;
     |FINSI;

     |SI #rem00101#5 ] "2016";
         |SI #rem00101#5 = "2018";
             |SI fFecha = "01.01.0000";
                 fFecha = #rem00101#17;
             |SINO;
                 |SI fFecha = #rem00101#17;
                     nHijosMult = nHijosMult + 1;

                     |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
                         nHijosMult1 = nHijosMult1 + 1;
                     |FINSI;

                     |SI #rem00101#7 = "3";  |Y aPerceptor = "TITULAR";
                         nHijosMult3 = nHijosMult3 + 1;
                     |FINSI;

                     |SI #rem00101#7 = "4";  |Y aPerceptor = "CONYUGE";
                         nHijosMult3 = nHijosMult3 + 1;
                     |FINSI;
                 |FINSI;
                 fFecha = #rem00101#17;
             |FINSI;
         |FINSI;

         |SI #rem00101#5 ! "2018";
             |SI #rem00101#7 = " ";
                 nHijosTresA  = nHijosTresA  + 1;
                 nHijosTresA1 = nHijosTresA1 + 1;
             |FINSI;

             |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
                 nHijosTresA  = nHijosTresA  + 1;
                 nHijosTresA2 = nHijosTresA2 + 1;
             |FINSI;

             |SI #rem00101#7 = "3";  |Y aPerceptor = "TITULAR";
                 nHijosTresA  = nHijosTresA  + 1;
                 nHijosTresA3 = nHijosTresA3 + 1;
             |FINSI;

             |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
                  nHijosTresA  = nHijosTresA  + 1;
                  nHijosTresA2 = nHijosTresA2 + 1;
             |FINSI;

             |SI #rem00101#7 = "4";  |Y aPerceptor = "CONYUGE";
                  nHijosTresA  = nHijosTresA  + 1;
                  nHijosTresA3 = nHijosTresA3 + 1;
             |FINSI;

             |SI #rem00101#7 = " ";
                 nHijosDosA  = nHijosDosA  + 0.5;
             |FINSI;

             |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
                 nHijosDosA  = nHijosDosA  + 1;
             |FINSI;

             |SI #rem00101#7 = "3";  |Y aPerceptor = "TITULAR";
                 nHijosDosA  = nHijosDosA  + .5;
             |FINSI;

             |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
                 nHijosDosA  = nHijosDosA  + 1;
             |FINSI;

             |SI #rem00101#7 = "4";  |Y aPerceptor = "CONYUGE";
                 nHijosDosA  = nHijosDosA  + .5;
             |FINSI;
         |FINSI;
     |FINSI;
|FPRC;

|PROCESO Ascendientes;
     ||  Calculo de Valencia

     nAnyo = 2018 - #rem00101#5;
     |SI nAnyo ] 75;
         |SI #rem00101#7 = " ";
             nAbuelo75 = nAbuelo75 + 1;
         |FINSI;

         |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
             nAbuelo75 = nAbuelo75 + 1;
         |FINSI;

         |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
             nAbuelo75 = nAbuelo75 + 1;
         |FINSI;
     |SINO;
         |SI nAnyo ] 65;
             |SI #rem00101#7 = " ";
                 |SI #rem00101#6 ] 65;
                     nAbuelo75 = nAbuelo75 + 1;
                 |SINO;
                     |SI #rem00101#6 ] 33;  nAbueloMensaje = 1; |FINSI;
                 |FINSI;
             |FINSI;

             |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
                 |SI #rem00101#6 ] 65;
                     nAbuelo75 = nAbuelo75 + 1;
                 |SINO;
                     |SI #rem00101#6 ] 33;  nAbueloMensaje = 1; |FINSI;
                 |FINSI;
             |FINSI;

             |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
                 |SI #rem00101#6 ] 65;
                     nAbuelo75 = nAbuelo75 + 1;
                 |SINO;
                     |SI #rem00101#6 ] 33;  nAbueloMensaje = 1; |FINSI;
                 |FINSI;
             |FINSI;
         |FINSI;
     |FINSI;

     || Fin  Calculo de Valencia

     |SI #rem00101#5 [ aEdad;  |Y #rem00101#5 ! "    ";  |Y #rem00101#5 ! "0000";
         |SI #rem00101#7 = " ";
             nAscend = nAscend + 1;
             |SI #rem00101#6 < 65;
                 nAscend70  = nAscend70  + .5;
             |FINSI;
         |FINSI;

         |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
             nAscend = nAscend + 1;
             |SI #rem00101#6 < 65;
                 |SI #rem00101#15 = "S";
                     nAscend70  = nAscend70  + (1 % #rem00101#11);
                 |SINO;
                     nAscend70  = nAscend70  + 1;
                 |FINSI;
              |FINSI;
         |FINSI;

         |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
             nAscend = nAscend + 1;
             |SI #rem00101#6 < 65;
                 |SI #rem00101#15 = "S";
                     nAscend70  = nAscend70  + (1 % #rem00101#11);
                 |SINO;
                     nAscend70  = nAscend70  + 1;
                 |FINSI;
             |FINSI;
         |FINSI;

         |SI #rem00101#7 = " ";  |Y #rem00101#11 ] 50;
             nAscendN = nAscendN + .5;
         |FINSI;

         |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";  |Y #rem00101#11 ] 50;
             nAscendN = nAscendN + 1;
         |FINSI;

         |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";  |Y #rem00101#11 ] 50;
             nAscendN = nAscendN + 1;
         |FINSI;
     |SINO;
         |SI #rem00101#6 ] 65;
             |SI #rem00101#7 = " ";
                 nAscend65 = nAscend65  + .5;
             |FINSI;

             |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
                 nAscend65  = nAscend65 + 1;
             |FINSI;

             |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
                 nAscend65  = nAscend65 + 1;
             |FINSI;
         |FINSI;
     |FINSI;

     |SI #rem00101#6 ] 65;
         |SI #rem00101#7 = " ";
             nAscend65Prop = nAscend65Prop  + .5;
         |FINSI;

         |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
             nAscend65Prop  = nAscend65Prop + 1;
         |FINSI;

         |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
             nAscend65Prop  = nAscend65Prop + 1;
         |FINSI;
     |FINSI;
|FPRC;

|PROCESO CalcuHijos;
     |SI #rem00101#4 = "DESCENDIENTE";  |HAZ Descendientes;  |FINSI;
     |SI #rem00101#4 = "ASCENDIENTE ";  |HAZ Ascendientes;   |FINSI;

     |SI #rem00101#6 ] 33;
         |SI #rem00101#14 = "S";
             aNecAyuda = "S";
         |FINSI;

         |SI #rem00101#7 = " ";
             nMinusv  = nMinusv  + 1;
             |SI #rem00101#6 ] 65; nMinusEntero65 = nMinusEntero65 + 1;  |FINSI;
         |FINSI;

         |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
             nMinusv  = nMinusv  + 1;
             |SI #rem00101#6 ] 65; nMinusEntero65 = nMinusEntero65 + 1;  |FINSI;
         |FINSI;

         |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
             nMinusv  = nMinusv  + 1;
             |SI #rem00101#6 ] 65; nMinusEntero65 = nMinusEntero65 + 1;  |FINSI;
         |FINSI;

         |SI #rem00101#7 = " ";
             nMinusv33 = nMinusv33  + 0.5;
         |FINSI;

         |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
             nMinusv33 = nMinusv33  + 1;
         |FINSI;

         |SI #rem00101#7 = "3";  |Y aPerceptor = "TITULAR";
             nMinusv33 = nMinusv33  + 0.5;
         |FINSI;

         |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
             nMinusv33 = nMinusv33  + 1;
         |FINSI;

         |SI #rem00101#7 = "4";  |Y aPerceptor = "CONYUGE";
             nMinusv33 = nMinusv33  + 0.5;
         |FINSI;
     |FINSI;

     |SI #rem00101#6 ] 65;
         nMinusTodos = nMinusTodos + 1;

         |SI #rem00101#7 = " ";
             nMinusv65 = nMinusv65  + .5;
         |FINSI;

         |SI #rem00101#7 = "1";  |Y aPerceptor = "TITULAR";
             nMinusv65  = nMinusv65  + 1;
         |FINSI;

         |SI #rem00101#7 = "2";  |Y aPerceptor = "CONYUGE";
             nMinusv65  = nMinusv65 + 1;
         |FINSI;

         |SI #rem00101#7 = "3";  |Y aPerceptor = "TITULAR";
             nMinusv65  = nMinusv65  + .5;
         |FINSI;

         |SI #rem00101#7 = "4";  |Y aPerceptor = "CONYUGE";
             nMinusv65  = nMinusv65  + .5;
         |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE rem00101;
     #rem00101#1;
     ;
     #rem00044#0, 01;
     #rem00044#0, 99;
     ;
     NULL, CalcuHijos;
|FIN;

|PROCESO LeeFamiliar;
     nTotalHijos    = 0;
     nTotalHijosMin = 0;
     nHijosNac33    = 0;
     nHijosAnt      = 0;   || Numero de Hijos nacidos antes de este ejercicio
     nHijosEje      = 0;   || Numero de Hijos nacidos en este ejercicio proporcinando
     nHijosDed      = 0;   || Numero de Hijos nacidos en este ejercicio
     nHijosDed1     = 0;   || Numero de Hijos nacidos en este ejercicio
     nHijosDed2     = 0;   || Numero de Hijos nacidos en este ejercicio
     nHijosDed3     = 0;   || Numero de Hijos nacidos en este ejercicio V.3 y 4
     nH3_4_2016     = 0;   || Numero de Hijos nacidos 2016 V.1 y 2
     nH3_4_2017     = 0;   || Numero de Hijos nacidos 2017 V.1 y 2
     nH3_4_2018     = 0;   || Numero de Hijos nacidos 2018 V.1 y 2
     nHijosDedM     = 0;   || Numero de Hijos nacidos en este ejercicio Minusv.
     nHijosDedM1    = 0;   || Numero de Hijos Minusvalidos > 65.
     nHijosDedM2    = 0;   || Numero de Hijos Minusvalidos > 65. V.3 y 4
     nHijosDedM3    = 0;   || Numero de Hijos Minusvalidos > 65. V.3 y 4
     nHijosDed33    = 0;   || Numero de Hijos nacidos en este ejercicio
     nHijosDed333   = 0;   || Numero de Hijos nacidos en este ejercicio
     nHijos65Prop   = 0;  || Hijos Minusvalidos proporcional
     nHijosTres     = 0;   || Numero de Hijos menores de Tres a¤os Minusvalia < 65
     nHijosTres1    = 0;   || Numero de Hijos menores de Tres a¤os Minusvalia < 65
     nHijosTresA    = 0;   || Numero de Hijos menores de Tres a¤os
     nHijosTresA1   = 0;   || Numero de Hijos menores de Tres a¤os
     nHijosTresA2   = 0;   || Numero de Hijos menores de Tres a¤os
     nHijosTresA3   = 0;   || Numero de Hijos menores de Tres a¤os Vinculacion 3 Y 4
     nHijosDosA     = 0;   || Numero de Hijos menores de Tres a¤os
     nHijosMult     = 0;   || Hijos Multiples
     nHijosMult1    = 0;   || Hijos Multiples Vinculacion 3 y 4
     nHijosMult3    = 0;   || Hijos Multiples Vinculacion 3 y 4
     nHijosAdop     = 0;   || Numero de Hijos Adoptados
     nHijosAdopI    = 0;   || Numero de Hijos Adoptados internacional
     nHijosAdopI3   = 0;   || Numero de Hijos Adoptados internacional Vinculacion 3 y 4
     nHijos65       = 0;   || Numero de Hijos Adoptados internacional Vinculacion 3 y 4
     nHijos65_1     = 0;   || Numero de Hijos Adoptados internacional Vinculacion 3 y 4
     nHijos2016     = 0;   || Numero de Hijos nacidos
     nHijos2017     = 0;   || Numero de Hijos nacidos
     nHijos2017Mul  = 0;   || Numero de Hijos nacidos  multiples
     nPerc33        = 0;   || Perceptor con minusvalia 33
     nPerc65        = 0;   || Perceptor con minusvalia 65
     nEdadMayor     = 0;   || Sujetos Pasivos de ....A¤os o mas
     nAscend        = 0;   || Ascendientes de ... A¤os  o mas
     nAscendN       = 0;   || Ascendientes de ... A¤os  o mas sin vinculacion
     nAscend70      = 0;   || Ascendientes de ... A¤os  o mas
     nAscend65      = 0;   || Ascendientes de ... A¤os  o mas
     nAscend65Prop  = 0;   || Ascendientes Minusvalido proporcional
     nMinusv        = 0;   || Minusvalidos
     nMinusv65      = 0;   || Minusvalidos
     nMinusv33      = 0;   || Minusvalidos
     nMinusD        = 0;   || Minusvalidos
     nMinusD65      = 0;   || Minusvalidos
     nMinusTodos    = 0;   || Suma de Todos los Minusvalidos
     nMinusTodos65  = 0;   || Suma de Todos los Minusvalidos
     nMinusEntero65 = 0;
     nAbuelo75      = 0;
     nAbueloMensaje = 0;

     fFecha      = "01.01.0000";
     aNecAyuda   = "";

     |BUCLE rem00101;

     |SI #rem00100#8  ] 65;  nMinusTodos   = nMinusTodos   + 1;  |FINSI;
     |SI #rem00100#41 ] 65;  nMinusTodos   = nMinusTodos   + 1;  |FINSI;
     |SI #rem00100#8  ] 65;  nMinusTodos65 = nMinusTodos65 + 1;  |FINSI;
     |SI #rem00100#41 ] 65;  nMinusTodos65 = nMinusTodos65 + 1;  |FINSI;

     |SI aPerceptor = "TITULAR";
         |SI #rem00100#8 ] 33;                           nMinusv    = nMinusv + 1; |FINSI;
         |SI #rem00100#8 ] 33;                           nMinusD    = 1;           |FINSI;
         |SI #rem00100#8 ] 65;                           nMinusD65      = 1;           |FINSI;
         |SI #rem00100#8 ] 65;                           nMinusEntero65 = nMinusEntero65 + 1;           |FINSI;
         |SI #rem00100#7 [ aEdad;  |Y #rem00100#7  ! "    ";  |Y #rem00100#7 ! "0000";
             nEdadMayor = 1;
         |FINSI;

         |SI #rem00100#8 ] 33;  |Y #rem00100#8 < 65;
             nPerc33 = nPerc33 + 1;
         |FINSI;

         |SI #rem00100#8 ] 65;
             nPerc65 = nPerc65 + 1;
         |FINSI;

         aAyuda = #rem00100#9;
     |FINSI;

     |SI aPerceptor = "CONYUGE";
         |SI #rem00100#41 ] 33;                           nMinusv = nMinusv + 1; |FINSI;
         |SI #rem00100#41 ] 33;                           nMinusD    = 1;        |FINSI;
         |SI #rem00100#41 ] 65;                           nMinusD65  = 1;        |FINSI;
         |SI #rem00100#41 ] 65;                           nMinusEntero65 = nMinusEntero65 + 1;           |FINSI;
         |SI #rem00100#40 [ aEdad;  |Y #rem00100#40 ! "    ";  |Y #rem00100#40 ! "0000";
             nEdadMayor = 1;
         |FINSI;

         |SI #rem00100#41 ] 33;  |Y #rem00100#41 < 65;
             nPerc33 = nPerc33 + 1;
         |FINSI;

         |SI #rem00100#41 ] 65;
             nPerc65 = nPerc65 + 1;
         |FINSI;

         aAyuda = #rem00100#42;
     |FINSI;
|FPRC;

|PROCESO MiraVivienda;
     |SI #rem00021#2 = "TITULAR   ";  |Y aPerceptor = "CONYUGE";  |ACABA;  |FINSI;
     |SI #rem00021#2 = "CONYUGE   ";  |Y aPerceptor = "TITULAR";  |ACABA;  |FINSI;
     |SI #rem00021#3 = "X";                                       |ACABA;  |FINSI;

     |SI #rem00021#30 = 0;  |Y #rem00021#33 = 0;
         |ACABA;
     |FINSI;

     nPorceDed = 0;
     |SI nAndalucia = 1;
         |SI #rem00021#25 < "01.01.2003";  |ACABA;      |FINSI;
         |SI #rem00021#30 = 0;             |ACABA;      |FINSI;

         nPorceDed = 3;
         |SI aEdadPer [ "1983";     nPorceDed = 2;  |FINSI;
     |FINSI;

     |SI #rem00021#2 = "TITULAR   ";  nPorce = 100;  |FINSI;
     |SI #rem00021#2 = "CONYUGE   ";  nPorce = 100;  |FINSI;
     |SI #rem00021#2 = "GANANCIAL ";  nPorce = 50;   |FINSI;
     |SI #rem00021#2 = "VARIOS    ";
         |SI aPerceptor = "TITULAR";  nPorce = #rem00021#5;  |FINSI;
         |SI aPerceptor = "CONYUGE";  nPorce = #rem00021#6;  |FINSI;
     |FINSI;

     nEl23  = (#rem00021#95 + #rem00021#96 + #rem00021#99 + #rem00021#100) % #rem00021#134;
     nEl23  = nEl23 + #rem00021#97 + #rem00021#98 + #rem00021#101 + #rem00021#102;
     nEl22  = #rem00021#22 % #rem00021#134;

     |SI #rem00100#11 = 1;
         nCantidad    = nCantidad + (nEl23 % nPorce);
     |FINSI;

     |SI #rem00100#11 = 3;
         nCantidad    = nCantidad + ((nEl23 - nEl22) % nPorce);
     |FINSI;

     |SI #rem00100#11 = 10;
         nCantidad    = nCantidad + ((nEl23 + #rem00021#29) % nPorce);
     |FINSI;

     |SI #rem00100#11 = 13;
         nCantidad    = nCantidad + (nEl23 % nPorce);
     |FINSI;

     |SI #rem00100#11 = 7;
         |SI aPrestamo = "";
             aPrestamo = #rem00021#116;   |QBF aPrestamo;
         |FINSI;
         nCantidad    = nCantidad + (((#rem00021#95 + #rem00021#99 + #rem00021#96 + #rem00021#100) % nPorce) % #rem00021#134);
     |FINSI;

     |SI #rem00100#11 = 17;
         nCantidad    = nCantidad + ((nEl23 - nEl22) % nPorce);
     |FINSI;

     |SI #rem00021#119 = "S";  aPreg1 = "S";  |FINSI;
     |SI #rem00021#135 = "S";  aPreg2 = "S";  |FINSI;
|FPRC;

|DEFBUCLE rem00021;
     #rem00021#1;
     ;
     enEmpresa, 01;
     enEmpresa, 99;
     ;
     NULL, MiraVivienda;
|FIN;

|PROCESO rem01001;
     |SI nComunidad = 6;
         #rem01043@#0  = #rem01001@#0;
         #rem01043@#1  = #rem01001@#1;
         #rem01043@#2  = #rem01001@#2;
         #rem01043@#3  = 6;
         #rem01043@#4  = 865;
         |LEE 000#rem01043@.=;
         |SI FSalida = 0;  |Y #rem01043@#12 ! 0;
             aAlfa = #rem01043@#2;  |QBF aAlfa;
             |SI aAlfa = aPerceptor;
                 n0948_2016 = #rem01043@#12;
             |FINSI;

             |SI aAlfa = "CONJUNTA";  |O aAlfa = "CONJUNTAE";
                 |SI aPerceptor = "TITULAR";
                     n0948_2016 = #rem01043@#12;
                  |FINSI;
             |FINSI;
         |FINSI;

         #rem01043@#0  = #rem01001@#0;
         #rem01043@#1  = #rem01001@#1;
         #rem01043@#2  = #rem01001@#2;
         #rem01043@#3  = 6;
         #rem01043@#4  = 867;
         |LEE 000#rem01043@.=;
         |SI FSalida = 0;  |Y #rem01043@#12 ! 0;
             aAlfa = #rem01043@#2;  |QBF aAlfa;
             |SI aAlfa = aPerceptor;
                 n0948_2017 = #rem01043@#12;
             |FINSI;

             |SI aAlfa = "CONJUNTA";  |O aAlfa = "CONJUNTAE";
                 |SI aPerceptor = "TITULAR";
                     n0948_2017 = #rem01043@#12;
                  |FINSI;
             |FINSI;
         |FINSI;
     |FINSI;

     |SI nComunidad = 8;
         #rem01043@#0  = #rem01001@#0;
         #rem01043@#1  = #rem01001@#1;
         #rem01043@#2  = #rem01001@#2;
         #rem01043@#3  = 8;
         #rem01043@#4  = 9999;
         |LEE 000#rem01043@.=;
         |SI FSalida ! 0;  |ACABA;  |FINSI;

         |SI #rem01043@#13 = 0;  |Y #rem01043@#14 = 0;
          |Y #rem01043@#15 = 0;  |Y #rem01043@#16 = 0;
             |ACABA;
         |FINSI;

         aAlfa = #rem01043@#2;  |QBF aAlfa;
         |SI aAlfa = "CONJUNTA";  |O aAlfa = "CONJUNTAE";
             |SI aPerceptor = "TITULAR";
                 n0981 = #rem01043@#13 + #rem01043@#15;
                 n0982 = #rem01043@#14;
                 n0983 = #rem01043@#16;
             |FINSI;
         |SINO;
            aAlfa = #rem01043@#2;  |QBF aAlfa;
             |SI aAlfa = aPerceptor;
                 n0981 = #rem01043@#13 + #rem01043@#15;
                 n0982 = #rem01043@#14;
                 n0983 = #rem01043@#16;
                 |ACABA;
             |FINSI;
         |FINSI;
     |FINSI;

     |SI nComunidad = 17;
         #rem01043@#0  = #rem01001@#0;
         #rem01043@#1  = #rem01001@#1;
         #rem01043@#2  = #rem01001@#2;
         #rem01043@#3  = 17;
         #rem01043@#4  = 1015;
         |LEE 000#rem01043@.=;
         |SI FSalida ! 0;  |ACABA;  |FINSI;

         |SI #rem01043@#13 = 0;
             |ACABA;
         |FINSI;

         |SI FSalida = 0;  |Y #rem01043@#12 ! 0;
             aAlfa = #rem01043@#2;  |QBF aAlfa;
             |SI aAlfa = aPerceptor;
                 n1116 = #rem01043@#13;
             |FINSI;

             |SI aAlfa = "CONJUNTA";  |O aAlfa = "CONJUNTAE";
                 |SI aPerceptor = "TITULAR";
                     n1116 = #rem01043@#13;
                  |FINSI;
             |FINSI;
         |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE rem01001;
     #rem01001@#1003;
     5;
     enEmpresa, 00, "          ", "100";
     enEmpresa, 99, "zzzzzzzzzz", "101";
     ;
     NULL, rem01001;
|FIN;

|PROCESO Andalucia;
     |HAZ LeeFamiliar;

     |SI nHijosTresA ! 0;  |Y nHijosDed ! 0;
         nTipo       = 0850;  |HAZ LeeCasillaComunidad;

         nNumero     = nHijosTresA;
         nInversion  = 0;
         nDeduccion  = (nHijosTresA1 * #rem00008#12) + (nHijosTresA2 * (#rem00008#12 * 2)) + (nHijosTresA3 * #rem00008#12);
         |SI nHijosMult ! 0;
             nDeduccion  = nDeduccion + (#rem00008#12 * (nHijosMult + 1));
         |FINSI;

         nDeduccionC = (nHijosTresA3 * #rem00008#12);
         |SI nHijosMult3 ! 0;
             nDeduccionC  = nDeduccionC + (#rem00008#12 * (nHijosMult3 + 1));
         |FINSI;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nHijosAdopI ! 0;
         nTipo       = 0855;   |HAZ LeeCasillaComunidad;
         nNumero     = nHijosAdopI;
         nInversion  = 0;
         nDeduccion  = (nHijosAdopI  * (#rem00008#12 * 2));
         nDeduccionC = (nHijosAdopI3 * #rem00008#12);

         |HAZ GrabaLinea;
     |FINSI;

     |SI nMinusD ! 0;
         nTipo       = 0856;  |HAZ LeeCasillaComunidad;
         nNumero     = 1;
         nInversion  = 0;
         nDeduccion  = #rem00008#12;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     nCantidad  = 0;
     nPorce     = 100;
     nAndalucia = 1;
     |BUCLE rem00021;
     |SI nCantidad ! 0;  |Y nPorceDed = 3;
         nTipo       = 0852;  |HAZ LeeCasillaComunidad;
         nDeduccionC = 0;
         nNumero     = 0;
         nInversion  = nCantidad;
         |SI nPorceDed = 3;
             |SI nInversion > #rem00008#16;
                 nInversion = #rem00008#16;
             |FINSI;
         |FINSI;

         nDeduccion  = nInversion % nPorceDed;

         |HAZ GrabaLinea;

         nPorceDed = 0;
     |FINSI;

     |SI #rem00100#95 = "N";
         nTipo      = 0857;  |HAZ LeeCasillaComunidad;

         aEdad = "1943";
         |HAZ LeeFamiliar;

         nDeduccion = 0;
         |SI nTotalHijos ! 0;
             nDeduccion = #rem00008#12;
         |FINSI;

         nNumero     = 0;
         nInversion  = 0;
         nDeduccion  = nDeduccion + (nAscend * #rem00008#14);
         nDeduccionC = 0;

         |SI nDeduccion ! 0;
             |HAZ GrabaLinea;
         |FINSI;
     |FINSI;

     |SI nMinusv33 ! 0;
         nTipo       = 0858;  |HAZ LeeCasillaComunidad;

         nNumero     = 0;
         nInversion  = 0;
         nDeduccion  = (nMinusv33 * #rem00008#12);
         nDeduccionC = 0;

         |HAZ GrabaLinea;

         |SI aNecAyuda = "S";
             |MENAV "0000Hay discapacitados que necesitan ayuda";
             |MENAV "0000De de alta la deduccion 810 con el 15% de las cuotas de la S.S. del titular del hogar.";
         |FINSI;
     |FINSI;
|FPRC;

|PROCESO Aragon;
     aEdad = "1943";
     |HAZ LeeFamiliar;

     |SI nHijosDed ! 0;
         |SI nTotalHijos > 1;
             |SI nHijosDed = nTotalHijos;
                 nHijosDed = nHijosDed - 1;
             |FINSI;

             |SI nHijosDed > 0;
                 nTipo       = 0866;  |HAZ LeeCasillaComunidad;
                 nDeduccion  = nHijosDed * #rem00008#12;
                 nInversion  = 0;
                 nDeduccionC = #rem00008#12;
                |HAZ GrabaLinea;
            |FINSI;
         |FINSI;
     |FINSI;

     |SI nHijosNac33 > 0;
         nNumero     = nHijosNac33;
         nTipo       = 0867;  |HAZ LeeCasillaComunidad;
         nDeduccion  = nNumero * #rem00008#12;
         nInversion  = 0;
         nDeduccionC = 0;

         |HAZ GrabaLinea;

         |SI nHijosDed2 ! 0;  nSwMensa = 1;  |FINSI;
     |FINSI;

     |SI nHijosAdopI ! 0;
         nTipo       = 0868;  |HAZ LeeCasillaComunidad;
         nNumero     = nHijosAdopI;
         nInversion  = 0;
         nDeduccion  = (nHijosAdopI  * #rem00008#12);
         nDeduccionC = (nHijosAdopI3 * #rem00008#12);

         |HAZ GrabaLinea;
     |FINSI;

     |SI nAscendN > 0;
         nTipo       = 0869;  |HAZ LeeCasillaComunidad;
         nNumero     = nAscendN;
         nInversion  = 0;
         nDeduccion  = nNumero * (#rem00008#12 * 2);
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nMinusv65 > 0;
         nTipo       = 0869;  |HAZ LeeCasillaComunidad;
         nNumero     = nMinusv65;
         nDeduccion  = nNumero * (#rem00008#12 * 2);
         nInversion  = 0;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     |SI aEdadPer [ "1948";
         nTipo       = 0878;  |HAZ LeeCasillaComunidad;
         nNumero     = 1;
         nInversion  = 0;
         nDeduccion  = nNumero * #rem00008#10;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;
|FPRC;

|PROCESO Asturias;
     aEdad = "1953";
     |HAZ LeeFamiliar;

     |SI nAscendN ! 0;
         nTipo       = 0883;  |HAZ LeeCasillaComunidad;
         nNumero     = nAscendN;
         nInversion  = 0;
         nDeduccion  = nAscendN * #rem00008#12;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nGradoMinus ] 65;
         nCantidad = 0;
         nPorce    = 100;
         |BUCLE rem00021;
         |SI nCantidad ! 0;
             nTipo       = 0884;  |HAZ LeeCasillaComunidad;
             nNumero     = 0;
             nInversion  = nCantidad;
             |SI nInversion > #rem00008#12;
                 nInversion = #rem00008#12;
             |FINSI;
             nDeduccion  = nInversion % 3;
             nDeduccionC = 0;

             |HAZ GrabaLinea;
         |FINSI;
     |FINSI;

     nSuma = nAscend65Prop + nHijos65Prop + nMinusTodos65;
     |SI nGradoMinus = 0;  |Y nSuma ! 0;
         nCantidad = 0;
         nPorce    = 100;
         |BUCLE rem00021;
         |SI nCantidad ! 0;
             nTipo       = 0885;  |HAZ LeeCasillaComunidad;
             nNumero     = 0;
             |SI nCantidad > #rem00008#12;
                 nCantidad = #rem00008#12;
             |FINSI;
             nInversion  = nCantidad;
             nDeduccion  = nInversion % 3;
             nDeduccionC = 0;

             |HAZ GrabaLinea;
         |FINSI;
     |FINSI;

     |SI nHijosAdopI ! 0;
         nTipo       = 0889;   |HAZ LeeCasillaComunidad;
         nNumero     = nHijosAdopI;
         nInversion  = 0;
         nDeduccion  = (nHijosAdopI  * (#rem00008#12 * 2));
         nDeduccionC = (nHijosAdopI3 * #rem00008#12);

         |HAZ GrabaLinea;
     |FINSI;

     |SI nHijosMult ! 0;
         nNumero     = 1;
         nTipo       = 0890;   |HAZ LeeCasillaComunidad;

         |SI nHijosMult ! nHijosMult1;
             nDeduccion  = #rem00008#12;
         |SINO;
             nDeduccion  = #rem00008#12 * 2;
         |FINSI;

         nInversion  = 0;
         nDeduccionC = 0;
         |HAZ GrabaLinea;
     |FINSI;
|FPRC;

|PROCESO Baleares;
     |HAZ LeeFamiliar;

     |SI nPerc33 ! 0;
         nTipo       = 0906;  |HAZ LeeCasillaComunidad;
         nNumero     = 1;
         nInversion  = 0;
         nDeduccion  = 80;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nPerc65 ! 0;
         nTipo       = 0906;  |HAZ LeeCasillaComunidad;
         nNumero     = 1;
         nInversion  = 0;
         nDeduccion  = 150;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;
|FPRC;

|PROCESO Canarias;
     aEdad = "1953";
     |HAZ LeeFamiliar;

     |SI nHijosDed > 0;
         nPuesto = (nTotalHijos - nHijosDed) + 1;

         nTipo       = 0922;  |HAZ LeeCasillaComunidad;
         nNumero     = nHijosDed;
         nInversion  = 0;
         nDeduccion  = 0;
         |PARA nDesde = nPuesto;  |SI nDesde [ nTotalHijos;  |HACIENDO nDesde = nDesde + 1;
               |SI nDesde = 1;  nDeduccion = nDeduccion + #rem00008#12;  |FINSI;
               |SI nDesde = 2;  nDeduccion = nDeduccion + #rem00008#12;  |FINSI;
               |SI nDesde = 3;  nDeduccion = nDeduccion + #rem00008#14; |FINSI;
               |SI nDesde = 4;  nDeduccion = nDeduccion + #rem00008#16; |FINSI;
               |SI nDesde ] 5;  nDeduccion = nDeduccion + #rem00008#18; |FINSI;
         |SIGUE;

         nDeduccionC = 0;
         |SI nHijosDed3 > 0;
             nPuesto = (nTotalHijos - nHijosDed3) + 1;
             nDeduccionC = 0;
             |PARA nDesde = nPuesto;  |SI nDesde [ nTotalHijos;  |HACIENDO nDesde = nDesde + 1;
                   |SI nDesde = 1;  nDeduccionC = nDeduccionC + #rem00008#12;   |FINSI;
                   |SI nDesde = 2;  nDeduccionC = nDeduccionC + #rem00008#12;   |FINSI;
                   |SI nDesde = 3;  nDeduccionC = nDeduccionC + #rem00008#14;  |FINSI;
                   |SI nDesde = 4;  nDeduccionC = nDeduccionC + #rem00008#16;  |FINSI;
                   |SI nDesde ] 5;  nDeduccionC = nDeduccionC + #rem00008#18;  |FINSI;
             |SIGUE;
         |FINSI;

         |HAZ GrabaLinea;

         |SI nHijosDed2 ! 0;  nSwMensa = 1;  |FINSI;
     |FINSI;

     |SI nEdadMayor > 0;
         nTipo       = 0923;  |HAZ LeeCasillaComunidad;
         nNumero     = nEdadMayor;
         nInversion  = 0;
         nDeduccion  = nNumero * #rem00008#14;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nMinusD > 0;
         nTipo       = 0923;  |HAZ LeeCasillaComunidad;
         nNumero     = nMinusD;
         nDeduccion  = nNumero * #rem00008#12;
         nInversion  = 0;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;
|FPRC;

|PROCESO PendientesCantabria;
     |DBASS aBase;
     aMas = aBase + "agiren17/def/rem01001.mas";
     |CARGA_DEF aMas, rem01001@;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     aMas = aBase + "agiren17/def/rem01043.mas";
     |CARGA_DEF aMas, rem01043@;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     aPathFich = aBase + "agiren17/fich/";
     |PATH_DAT #rem01001@#aPathFich#;
     |PATH_DAT #rem01043@#aPathFich#;

     n0948_2016 = 0;
     n0948_2017 = 0;

     |ABRE #rem01043@;
     |BUCLE rem01001;
     |CIERRA #rem01043@;

     |DESCARGA_DEF #rem01043@;
     |DESCARGA_DEF #rem01001@;

     |SI n0948_2016 ! 0;
         nTipo       = 0948;  |HAZ LeeCasillaComunidad;
         nNumero     = 0;
         nInversion  = 0;
         nDeduccion  = n0948_2016;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     |SI n0948_2017 ! 0;
         nTipo       = 0948;  |HAZ LeeCasillaComunidad;
         nNumero     = 0;
         nInversion  = 0;
         nDeduccion  = n0948_2017;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;
|FPRC;

|PROCESO Cantabria;
     |HAZ PendientesCantabria;

     aEdad = "1948";
     |HAZ LeeFamiliar;

     nNumero = nAscendN + nAscend65 + nHijosTres1 + nHijos65_1;

     |SI nNumero ! 0;
         nTipo       = 0947;  |HAZ LeeCasillaComunidad;
         nInversion  = 0;
         nDeduccion  = nNumero * #rem00008#12;
         nDeduccionC = 0;
         |HAZ GrabaLinea;
     |FINSI;
|FPRC;

|PROCESO CastillaMancha;
     aEdad = "1943";
     |HAZ LeeFamiliar;

     |SI nHijosDed ! 0;
         nTipo       = 0957;  |HAZ LeeCasillaComunidad;

         nNumero     = nHijosEje;
         nDeduccion  = 0;
         nDeduccionC = 0;
         nInversion  = 0;

         |SI nHijosDed > 0;  nDeduccion = #rem00008#12 * 2;  |FINSI;
         |SI nHijosDed ] 2;  nDeduccion = #rem00008#16 * 2;  |FINSI;
         |SI nHijosDed ] 3;  nDeduccion = #rem00008#18 * 2;  |FINSI;

         nDeduccion = nDeduccion * nNumero;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nMinusD65 ! 0;
         nTipo       = 0958;  |HAZ LeeCasillaComunidad;
         nNumero     = 1;
         nInversion  = 0;
         nDeduccion  = #rem00008#12;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     nNumero = nAscend65Prop + nHijos65Prop;
     |SI nNumero ! 0;
         nTipo       = 0959;  |HAZ LeeCasillaComunidad;
         nInversion  = 0;
         nDeduccion  = nNumero * (#rem00008#12 * 2);
         nDeduccionC = 0;
         |HAZ GrabaLinea;
     |FINSI;

     nEdadMayor = nEdadMayor - nMinusD65;
     |SI nEdadMayor > 0;
         nTipo       = 0960;  |HAZ LeeCasillaComunidad;
         nNumero     = nEdadMayor;
         nInversion  = 0;
         nDeduccion  = nNumero * #rem00008#12;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nAscend70 > 0;
         nTipo       = 0961;  |HAZ LeeCasillaComunidad;
         nNumero     = nAscend70;
         nInversion  = 0;
         nDeduccion  = nNumero * #rem00008#12;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     nNume = nTotalHijos + nTotalHijosMin;
     |SI nNume ] 3;
         nMinus33 = nMinus33 + 2;
     |FINSI;

     |SI nNume ] 2;
         nMinus33 = nMinus33 + (nMinusD - nMinusD65);
         nMinus65 = nMinus65 + nMinusD65;
     |FINSI;
|FPRC;

|PROCESO PendientesLeon;
     |DBASS aBase;
     aMas = aBase + "ren2017/def/rem01001.mas";
     |CARGA_DEF aMas, rem01001@;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     aMas = aBase + "ren2017/def/rem01043.mas";
     |CARGA_DEF aMas, rem01043@;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     aPathFich = aBase + "ren2017/fich/";
     |PATH_DAT #rem01001@#aPathFich#;
     |PATH_DAT #rem01043@#aPathFich#;

     n0981 = 0;
     n0982 = 0;
     n0983 = 0;

     |ABRE #rem01043@;
     |BUCLE rem01001;
     |CIERRA #rem01043@;

     |DESCARGA_DEF #rem01043@;
     |DESCARGA_DEF #rem01001@;

     |SI n0981 ! 0;
         nTipo       = 0981;  |HAZ LeeCasillaComunidad;
         nNumero     = 0;
         nInversion  = 0;
         nDeduccion  = n0981;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     |SI n0982 ! 0;
         nTipo       = 0982;  |HAZ LeeCasillaComunidad;
         nNumero     = 0;
         nInversion  = 0;
         nDeduccion  = n0982;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     |SI n0983 ! 0;
         nTipo       = 0983;  |HAZ LeeCasillaComunidad;
         nNumero     = 0;
         nInversion  = 0;
         nDeduccion  = n0983;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;
|FPRC;

|PROCESO CastillaLeon;
     |HAZ PendientesLeon;

     aEdad = "1953";
     |HAZ LeeFamiliar;

     |SI nTotalHijos ] 3;
         nTipo       = 0985;  |HAZ LeeCasillaComunidad;

         nNumero     = 0;
         |SI nTotalHijos ] 4;
             nNumero     = 1;
         |FINSI;

         nInversion  = 0;
         |SI nMinusTodos = 0;
             nDeduccion  = #rem00008#12  + (nNumero * #rem00008#16);
         |SINO;
             nDeduccion  = #rem00008#14 + (nNumero * #rem00008#16);
         |FINSI;

         nDeduccionC = 0;

         |HAZ GrabaLinea;

         |SI nHijosDed2 ! 0;  nSwMensa = 1;  |FINSI;
     |FINSI;

     |SI nHijosDed > 0;
         nPuesto = (nTotalHijos - nHijosDed) + 1;

         nTipo       = 0986;  |HAZ LeeCasillaComunidad;
         nNumero     = nHijosDed;
         nInversion  = 0;
         nDeduccion  = 0;
         |PARA nDesde = nPuesto;  |SI nDesde [ nTotalHijos;  |HACIENDO nDesde = nDesde + 1;
               |SI nDesde = 1;  nDeduccion = nDeduccion + #rem00008#12;   |FINSI;
               |SI nDesde = 2;  nDeduccion = nDeduccion + #rem00008#14;  |FINSI;
               |SI nDesde ] 3;  nDeduccion = nDeduccion + #rem00008#16;  |FINSI;
         |SIGUE;
         nDeduccionC = 0;

         |SI nHijosDed3 > 0;
             nPuesto     = (nTotalHijos - nHijosDed3) + 1;
             nDeduccionC = 0;
             |PARA nDesde = nPuesto;  |SI nDesde [ nTotalHijos;  |HACIENDO nDesde = nDesde + 1;
                   |SI nDesde = 1;  nDeduccionC = nDeduccionC + #rem00008#12;   |FINSI;
                   |SI nDesde = 2;  nDeduccionC = nDeduccionC + #rem00008#14;  |FINSI;
                   |SI nDesde ] 3;  nDeduccionC = nDeduccionC + #rem00008#16;  |FINSI;
             |SIGUE;
         |FINSI;

         |HAZ GrabaLinea;

         |SI nHijosDed2 ! 0;  nSwMensa = 1;  |FINSI;
     |FINSI;

     |SI nHijos2017Mul > 1;
         nTipo       = 0988;  |HAZ LeeCasillaComunidad;
         nNumero     = nHijos2017;
         nInversion  = 0;
         nDeduccion  = #rem00008#16;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nHijosAdopI > 0;  |O nHijosAdop > 0;
         nNumero     = nHijosAdopI ! 0;
         nTipo       = 0992;  |HAZ LeeCasillaComunidad;
         nDeduccion  = (nHijosAdop * #rem00008#12) + (nHijosAdopI * #rem00008#14);
         nDeduccionC = 0;
         nInversion  = 0;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nEdadMayor = 1; |Y nMinusD65 > 0;
         nTipo       = 0970;  |HAZ LeeCasillaComunidad;
         nNumero     = 1;
         nInversion  = 0;
         nDeduccion  = #rem00008#12;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |SINO;
         |SI nMinusD > 0;
             nTipo       = 0970;  |HAZ LeeCasillaComunidad;
             nNumero     = 1;
             nInversion  = 0;
             nDeduccion  = #rem00008#18;
             nDeduccionC = 0;

             |HAZ GrabaLinea;
        |FINSI;
     |FINSI;
|FPRC;

|PROCESO Catalunya;
     |HAZ LeeFamiliar;

     |SI nHijosDed ! 0;
         nNumero     = nHijosDed;
         nTipo       = 1000;  |HAZ LeeCasillaComunidad;
         nDeduccion  = nNumero * #rem00008#12;
         nInversion  = 0;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;
|FPRC;

|PROCESO Extremadura;
     |HAZ LeeFamiliar;

     nCantidad = 0;
     nPorce    = 100;
     |BUCLE rem00021;
     |SI nCantidad ! 0;  |Y aEdadPer ] "1983";
         nTipo       = 1010;  |HAZ LeeCasillaComunidad;
         nNumero     = 0;
         nInversion  = nCantidad;
         |SI nInversion > #rem00008#12;
             nInversion = #rem00008#12;
         |FINSI;

         nDeduccion  = nInversion % 3;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nHijosMult ! 0;
         nNumero     = 1;
         nTipo       = 1014;   |HAZ LeeCasillaComunidad;

         nDeduccion  = #rem00008#12;
         nInversion  = 0;
         nDeduccionC = 0;
         |HAZ GrabaLinea;
     |FINSI;

     |SI #rem00100#6 = "V";
         nNumero     = 1;
         nTipo       = 1018;   |HAZ LeeCasillaComunidad;

         nDeduccion  = #rem00008#16;
         |SI nTotalHijos > 0;
             nDeduccion  = #rem00008#16 * 2;
         |FINSI;

         nInversion  = 0;
         nDeduccionC = 0;
         |HAZ GrabaLinea;
     |FINSI;
|FPRC;

|PROCESO Galicia;
     |HAZ LeeFamiliar;

     |SI nHijosEje > 0;
         nTipo       = 1021;  |HAZ LeeCasillaComunidad;
         nNumero     = nHijosEje + nHijos2016 + nHijos2017;
         nInversion  = 0;

         |SI nNumero = 0.5;
             nDeduccion = #rem00008#16 / 2;
         |FINSI;

         |SI nNumero = 1;
             nDeduccion = (#rem00008#16 + #rem00008#18) / 2;
         |FINSI;

         |SI nNumero ] 1.5;
             nDeduccion = (#rem00008#16 + #rem00008#18) / 2;
             nDeduccion = nDeduccion + ((nNumero - 1) * (#rem00008#20) / 2);
         |FINSI;

         |HAZ GrabaLinea;

         |SI nHijosDed2 ! 0;  nSwMensa = 1;  |FINSI;
     |FINSI;
|FPRC;

|PROCESO Madrid;
     |HAZ LeeFamiliar;

     |SI nHijosDed > 0;
         nTipo       = 1039;  |HAZ LeeCasillaComunidad;
         nNumero     = nHijosDed;
         nInversion  = 0;

         |SI nHijosMult ! 0;
             nHijosMult  = nHijosMult + 1;
         |FINSI;

         nDeduccion  = (nHijosDed - nHijosMult) * #rem00008#12;
         nDeduccion  = nDeduccion + (nHijosMult * (#rem00008#12 * 2));

         |HAZ GrabaLinea;
     |FINSI;

     |SI nHijosAdopI ! 0;
         nTipo       = 1040;  |HAZ LeeCasillaComunidad;
         nNumero     = nHijosAdopI;
         nInversion  = 0;
         nDeduccion  = (nHijosAdopI  * #rem00008#12);
         nDeduccionC = (nHijosAdopI3 * #rem00008#12);

         |HAZ GrabaLinea;
     |FINSI;
|FPRC;

|PROCESO Murcia;
     |HAZ LeeFamiliar;

     nCantidad = 0;
     nPorce    = 100;
     aPreg1    = "N";
     aPreg2    = "N";
     |BUCLE rem00021;
     |SI nCantidad ! 0;  |Y aEdadPer ] "1983";  |Y aPreg1 = "N";  |Y aPreg2 = "N";
         nTipo       = 1052;  |HAZ LeeCasillaComunidad;

         nNumero     = 0;
         nInversion  = nCantidad;
         nDeduccion  = nInversion % 5;
         nPorceDed   = 5;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nCantidad ! 0; |Y aPreg2 = "S";
         nTipo       = 2052;  |HAZ LeeCasillaComunidad;
         nInversion  = nCantidad;
         nDeduccion  = nInversion % 2;
         nDeduccionC = 0;
         nPorceDed   = 2;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nCantidad ! 0; |Y aPreg1 = "S";  |Y aEdadPer ] "1983";
         nTipo       = 1052;  |HAZ LeeCasillaComunidad;
         nInversion  = nCantidad;
         nDeduccion  = nInversion % 5;
         nDeduccionC = 0;
         nPorceDed   = 5;

         |HAZ GrabaLinea;
     |FINSI;
|FPRC;

|PROCESO LaRioja;
     |HAZ LeeFamiliar;

     |SI nTotalHijos [ 0;  |ACABA;  |FINSI;

     |SI nHijosDed = nTotalHijos;
         nHijosDed = nHijosDed - 1;
     |FINSI;

     |SI nHijosDed [ 0;  |ACABA;  |FINSI;

     nTipo       = 1061;  |HAZ LeeCasillaComunidad;
     nNumero     = nTotalHijos;
     nInversion  = 0;
     nDeduccion  = 0;
     |SI nNumero = 1;  nDeduccion = #rem00008#12;                 |FINSI;
     |SI nNumero = 2;  nDeduccion = #rem00008#12 + #rem00008#14;  |FINSI;
     |SI nNumero ] 3;
         nDeduccion = #rem00008#12 + #rem00008#14 + ((nNumero - 1) * #rem00008#16);
     |FINSI;

     nDeduccionC = 0;
     |SI nHijosDed3 = 1;  nDeduccionC = #rem00008#12;   |FINSI;
     |SI nHijosDed3 = 2;  nDeduccionC = #rem00008#12 + #rem00008#14; |FINSI;
     |SI nHijosDed3 ] 3;
         nDeduccionC = #rem00008#12 + #rem00008#14 + ((nHijosDed3 - 1) * #rem00008#16);
     |FINSI;

     |HAZ GrabaLinea;

     |SI nHijosDed2 ! 0;  nSwMensa = 1;  |FINSI;
|FPRC;

|PROCESO PendientesValencia;
     n1116 = 0;

     |DBASS aBase;
     aMas = aBase + "ren2017/def/rem01001.mas";
     |CARGA_DEF aMas, rem01001@;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     aMas = aBase + "ren2017/def/rem01043.mas";
     |CARGA_DEF aMas, rem01043@;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     aPathFich = aBase + "ren2017/fich/";
     |PATH_DAT #rem01001@#aPathFich#;
     |PATH_DAT #rem01043@#aPathFich#;

     |ABRE #rem01043@;
     |BUCLE rem01001;
     |CIERRA #rem01043@;

     |DESCARGA_DEF #rem01043@;
     |DESCARGA_DEF #rem01001@;

     |SI n1116 ! 0;
         nTipo       = 2114;  |HAZ LeeCasillaComunidad;
         nNumero     = 0;
         nInversion  = 0;
         nDeduccion  = n1116;
         nPorceDed   = 0;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;
|FPRC;

|PROCESO Valencia;
     |HAZ PendientesValencia;

     aEdad = "1953";
     |HAZ LeeFamiliar;

     |SI nTotalHijos ] 2;
         nNumero     = 0;
         nTipo       = 1104;  |HAZ LeeCasillaComunidad;
         nDeduccion  = 0;
         nInversion  = 0;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nHijosEje ! 0;
         nNumero     = nHijosEje;
         nTipo       = 1083;  |HAZ LeeCasillaComunidad;
         nDeduccion  = nNumero * (#rem00008#12 * 2);
         nInversion  = 0;
         nDeduccionC = nH3_4_2018 * #rem00008#12;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nHijos2016 ! 0;
         nNumero     = nHijos2016;
         nTipo       = 2083;  |HAZ LeeCasillaComunidad;
         nDeduccion  = nNumero * (#rem00008#12 * 2);
         nInversion  = 0;
         nDeduccionC = nH3_4_2016 * #rem00008#12;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nHijos2017 ! 0;
         nNumero     = nHijos2017;
         nTipo       = 3083;  |HAZ LeeCasillaComunidad;
         nDeduccion  = nNumero * (#rem00008#12 * 2);
         nInversion  = 0;
         nDeduccionC = nH3_4_2017 * #rem00008#12;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nHijosMult ! 0;
         nNumero     = 1;
         nTipo       = 1084;   |HAZ LeeCasillaComunidad;

         |SI nHijosMult ! nHijosMult1;
             nDeduccion  = #rem00008#12;
         |SINO;
             nDeduccion  = #rem00008#12 * 2;
         |FINSI;

         nInversion  = 0;
         nDeduccionC = 0;
         |HAZ GrabaLinea;
     |FINSI;

     |SI nHijosDedM ! 0;
         nNumero     = nHijosDedM;
         nTipo       = 1085;  |HAZ LeeCasillaComunidad;
         nDeduccion  = #rem00008#12;
         |SI nHijosDedM1 > 1;
             nDeduccion  = #rem00008#14;
         |FINSI;
         nInversion  = 0;
         nDeduccionC = 0;

         |SI nHijosDedM2 ! 0;
             nDeduccionC = #rem00008#12;
             |SI nHijosDedM3 ! 0;
                 nDeduccionC = nDeduccionC + ((nHijosDedM2 - 1) * #rem00008#14);
             |FINSI;
         |FINSI;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nEdadMayor > 0; |Y nMinusD > 0;
         nTipo       = 1089;  |HAZ LeeCasillaComunidad;
         nNumero     = nEdadMayor;
         nInversion  = 0;
         nDeduccion  = nNumero * #rem00008#12;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     nCantidad  = 0;
     nPorce     = 100;
     |BUCLE rem00021;
     |SI nCantidad ! 0;  |Y aEdadPer ] "1983";
         nTipo       = 1092;  |HAZ LeeCasillaComunidad;
         nNumero     = 0;
         nInversion  = nCantidad;
         nDeduccion  = nInversion % 5;
         nDeduccionC = 0;
         nPorceDed   = 5;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nCantidad ! 0;  |Y nGradoMinus ] 65;
         nTipo       = 1093;  |HAZ LeeCasillaComunidad;
         nNumero     = 0;
         nInversion  = nCantidad;
         nDeduccion  = nInversion % 5;
         nDeduccionC = 0;
         nPorceDed   = 5;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nAbuelo75 ! 0;
         nTipo       = 1090;  |HAZ LeeCasillaComunidad;
         nNumero     = nAbuelo75;
         nInversion  = 0;
         nDeduccion  = nNumero * #rem00008#12;
         nDeduccionC = 0;

         |HAZ GrabaLinea;
     |FINSI;

     |SI nAbueloMensaje = 1;
         |MENAV "0000 Se han encontrado ascendientes entre 65 y 75 años con minusvalia entre 33% y 64%";
         |MENAV "0000 Si dicha minusvalia es psiquica, a¤adir la deduccion 0992 correspondiente";
     |FINSI;
|FPRC;

|PROCESO Recogida;
     |SI enEntrar = 1;  |ACABA;  |FINSI;

     aPrestamo = "";

     #rem00044#0 = enEmpresa;
     #rem00044#1 = 1;
     |LEE 040#rem00044.];
     |SI FSalida = 0;  |Y #rem00044#0 = enEmpresa;
         |MENAV "      Ya existen deducciones en esta empresa, debe estar sin deducciones.";
         |ERROR;
         |ACABA;
     |FINSI;

     nLinea = 0;

     #rem00044#0 = enEmpresa;

     |ABRE #reparame;
     |LEE 040#reparame.p;
     |SI FSalida ! 0;  |DDEFECTO #reparame;  |FINSI;
     |CIERRA #reparame;

     |ABRE #rem00008;

     nMinus33    = 0;
     nMinus65    = 0;
     aPerceptor  = "TITULAR";
     nComunidad  = #rem00100#11;
     aEdadPer    = #rem00100#7;
     nGradoMinus = #rem00100#8;
     nSwMensa    = 0;
     nAndalucia  = 0;
     nPorceDed   = 0;

     |SI #rem00100#11 = 1;   |HAZ Andalucia;         |FINSI;
     |SI #rem00100#11 = 2;   |HAZ Aragon;            |FINSI;
     |SI #rem00100#11 = 3;   |HAZ Asturias;          |FINSI;
     |SI #rem00100#11 = 4;   |HAZ Baleares;          |FINSI;
     |SI #rem00100#11 = 5;   |HAZ Canarias;          |FINSI;
     |SI #rem00100#11 = 6;   |HAZ Cantabria;         |FINSI;
     |SI #rem00100#11 = 7;   |HAZ CastillaMancha;    |FINSI;
     |SI #rem00100#11 = 8;   |HAZ CastillaLeon;      |FINSI;
     |SI #rem00100#11 = 9;   |HAZ Catalunya;         |FINSI;
     |SI #rem00100#11 = 10;  |HAZ Extremadura;       |FINSI;
     |SI #rem00100#11 = 11;  |HAZ Galicia;           |FINSI;
     |SI #rem00100#11 = 12;  |HAZ Madrid;            |FINSI;
     |SI #rem00100#11 = 13;  |HAZ Murcia;            |FINSI;
     |SI #rem00100#11 = 16;  |HAZ LaRioja;           |FINSI;
     |SI #rem00100#11 = 17;  |HAZ Valencia;          |FINSI;

     aPerceptor  = "CONYUGE";
     nComunidad  = #rem00100#43;
     aEdadPer    = #rem00100#40;
     nGradoMinus = #rem00100#41;
     aAlfa       = #rem00100#35;  |QBF aAlfa;
     nAndalucia  = 0;
     nPorceDed   = 0;

     |SI aAlfa ! "";
         |SI #rem00100#43 = 1;   |HAZ Andalucia;         |FINSI;
         |SI #rem00100#43 = 2;   |HAZ Aragon;            |FINSI;
         |SI #rem00100#43 = 3;   |HAZ Asturias;          |FINSI;
         |SI #rem00100#43 = 4;   |HAZ Baleares;          |FINSI;
         |SI #rem00100#11 = 5;   |HAZ Canarias;          |FINSI;
         |SI #rem00100#11 = 6;   |HAZ Cantabria;         |FINSI;
         |SI #rem00100#11 = 7;   |HAZ CastillaMancha;    |FINSI;
         |SI #rem00100#43 = 8;   |HAZ CastillaLeon;      |FINSI;
         |SI #rem00100#43 = 9;   |HAZ Catalunya;         |FINSI;
         |SI #rem00100#43 = 10;  |HAZ Extremadura;       |FINSI;
         |SI #rem00100#43 = 11;  |HAZ Galicia;           |FINSI;
         |SI #rem00100#43 = 12;  |HAZ Madrid;            |FINSI;
         |SI #rem00100#43 = 13;  |HAZ Murcia;            |FINSI;
         |SI #rem00100#43 = 16;  |HAZ LaRioja;           |FINSI;
         |SI #rem00100#43 = 17;  |HAZ Valencia;          |FINSI;
     |FINSI;

     |CIERRA #rem00008;

     |SI nSwMensa = 1;
         |MENAV "     Revise Deduccion de Hijos ya que tiene vinculaciones al Declarante o al Conyuge";
     |FINSI;

     |SI nMinus33 ] 2;  |O nMinus65 ] 1;
         aAlfa = "0000Es posible que tenga derecho a la deducci¢n por ";
         aAlfa = aAlfa + "familia numerosa. Revise datos personales";
         |MENAV aAlfa;
     |FINSI;

     |REFRESCACONTROL enGrid;
     |FOCOTECLADO enGrid;

     |PULSATECLA;
|FPRC;
