|FICHEROS;
     rem00058;

     :/integral/def/dsam0000;
     :/modelos/def/dsmom001;
     :/modelos/def/dsm18430;
|FIN;

|VARIABLES;
     nPorce              = 0;
     nEmpresa            = 0;
     nLinea              = 0;
     nLin                = 0;
     nCom                = 0;
     nOk                 = 0;

     aBase               = "";
     aPathFich           = "";

     &enEmpresa          = 0;
     &eaNIF              = "";
     &eaPerceptor        = "";
     &eaPrograma         = "";
     &eaPunto            = "";
|FIN;

|PROCESO dsm18430;
     nCom = #dsm18430#33;
     nLin = #dsm18430#34;
|FPRC;

|DEFBUCLE dsm18430;
     #dsm18430#2;
     ;
     #dsmom001#0, 2018, 00, eaNIF;
     #dsmom001#0, 2018, 99, eaNIF;
     ;
     NULL, dsm18430;
|FIN;

|PROCESO Mob184;
     |SELECT #1#rem00058;
     #rem00058#0 = enEmpresa;
     #rem00058#1 = 99;
     |LEE 040#rem00058.];
     |SI FSalida = 0;
         |LEE 040#rem00058.a;
     |SINO;
         |LEE 040#rem00058.u;
     |FINSI;
     nLinea = 1;

     |SI FSalida = 0;  |Y #rem00058#0 = enEmpresa;
         nLinea = #rem00058#1 + 1;
     |FINSI;

     |SELECT #1#rem00058;
     #rem00058#0  = enEmpresa;
     #rem00058#1  = nLinea;
     |LEE 101#rem00058.=;
     |SI FSalida ! 0;
         |DDEFECTO #rem00058;
         #rem00058#0  = enEmpresa;
         #rem00058#1  = nLinea;
         |GRABA 020#rem00058.b;
      |FINSI;

      #rem00058#2  = eaPerceptor;
      #rem00058#3  = "R";
      #rem00058#4  = 0;
      #rem00058#11 = nPorce;
      #rem00058#12 = #dsam0000#3;
      #rem00058#13 = 1;

      #rem00058#17 = #dsm18430#43;
      #rem00058#19 = #dsm18430#44;
      #rem00058#20 = #dsm18430#43 - #dsm18430#44;
      #rem00058#21 = #dsm18430#12 - #dsm18430#13;
      #rem00058#45 = #dsm18430#31;

      |GRABA 020#rem00058.a;
      |LIBERA #rem00058;

      eaPrograma   = "rem00058";
      eaPunto      = #rem00058#13;
      |HAZ ProgramaActivo;
|FPRC;

|PROCESO Inmob184;
     |SELECT #1#rem00058;
     #rem00058#0 = enEmpresa;
     #rem00058#1 = 99;
     |LEE 040#rem00058.];
     |SI FSalida = 0;
         |LEE 040#rem00058.a;
     |SINO;
         |LEE 040#rem00058.u;
     |FINSI;
     nLinea = 1;

     |SI FSalida = 0;  |Y #rem00058#0 = enEmpresa;
         nLinea = #rem00058#1 + 1;
     |FINSI;

     |SELECT #1#rem00058;
     #rem00058#0  = enEmpresa;
     #rem00058#1  = nLinea;
     |LEE 101#rem00058.=;
     |SI FSalida ! 0;
         |DDEFECTO #rem00058;
         #rem00058#0  = enEmpresa;
         #rem00058#1  = nLinea;
         |GRABA 020#rem00058.b;
      |FINSI;

      #rem00058#2  = eaPerceptor;
      #rem00058#3  = "R";
      #rem00058#4  = 0;
      #rem00058#11 = nPorce;
      #rem00058#12 = #dsam0000#3;
      #rem00058#13 = 2;

      #rem00058#23 = #dsm18430#14;
      #rem00058#25 = #dsm18430#15;
      #rem00058#26 = #dsm18430#14 - #dsm18430#15;
      #rem00058#45 = #dsm18430#45;

      |GRABA 020#rem00058.a;
      |LIBERA #rem00058;

      eaPrograma   = "rem00058";
      eaPunto      = #rem00058#13;
      |HAZ ProgramaActivo;
|FPRC;

|PROCESO Act184;
     |SELECT #1#rem00058;
     #rem00058#0 = enEmpresa;
     #rem00058#1 = 99;
     |LEE 040#rem00058.];
     |SI FSalida = 0;
         |LEE 040#rem00058.a;
     |SINO;
         |LEE 040#rem00058.u;
     |FINSI;
     nLinea = 1;

     |SI FSalida = 0;  |Y #rem00058#0 = enEmpresa;
         nLinea = #rem00058#1 + 1;
     |FINSI;

     |SELECT #1#rem00058;
     #rem00058#0  = enEmpresa;
     #rem00058#1  = nLinea;
     |LEE 101#rem00058.=;
     |SI FSalida ! 0;
         |DDEFECTO #rem00058;
         #rem00058#0  = enEmpresa;
         #rem00058#1  = nLinea;
         |GRABA 020#rem00058.b;
      |FINSI;

      #rem00058#2  = eaPerceptor;
      #rem00058#3  = "R";
      #rem00058#4  = 0;
      #rem00058#11 = nPorce;
      #rem00058#12 = #dsam0000#3;
      #rem00058#13 = 3;

      #rem00058#27 = #dsm18430#16;
      #rem00058#50 = #dsm18430#51;
      #rem00058#29 = #dsm18430#17;
      #rem00058#30 = #dsm18430#16 - #dsm18430#51 - #dsm18430#17
      #rem00058#45 = #dsm18430#46;

      |GRABA 020#rem00058.a;
      |LIBERA #rem00058;

      eaPrograma   = "rem00058";
      eaPunto      = #rem00058#13;
      |HAZ ProgramaActivo;
|FPRC;

|PROCESO GyP184;
     |SELECT #1#rem00058;
     #rem00058#0 = enEmpresa;
     #rem00058#1 = 99;
     |LEE 040#rem00058.];
     |SI FSalida = 0;
         |LEE 040#rem00058.a;
     |SINO;
         |LEE 040#rem00058.u;
     |FINSI;
     nLinea = 1;

     |SI FSalida = 0;  |Y #rem00058#0 = enEmpresa;
         nLinea = #rem00058#1 + 1;
     |FINSI;

     |SELECT #1#rem00058;
     #rem00058#0  = enEmpresa;
     #rem00058#1  = nLinea;
     |LEE 101#rem00058.=;
     |SI FSalida ! 0;
         |DDEFECTO #rem00058;
         #rem00058#0  = enEmpresa;
         #rem00058#1  = nLinea;
         |GRABA 020#rem00058.b;
      |FINSI;

      #rem00058#2  = eaPerceptor;
      #rem00058#3  = "R";
      #rem00058#4  = 0;
      #rem00058#11 = nPorce;
      #rem00058#12 = #dsam0000#3;
      #rem00058#13 = 4;

      #rem00058#31 = #dsm18430#19;
      #rem00058#32 = #dsm18430#20;

      #rem00058#33 = #dsm18430#21;
      #rem00058#42 = #dsm18430#21;
      #rem00058#43 = #dsm18430#21;
      #rem00058#44 = #dsm18430#22;

      #rem00058#45 = #dsm18430#47;

      |GRABA 020#rem00058.a;
      |LIBERA #rem00058;

      eaPrograma   = "rem00058";
      eaPunto      = #rem00058#13;
      |HAZ ProgramaActivo;
|FPRC;

|PROCESO Modelo184;
     nPorce        = #dsmom001#7;
     nEmpresa      = #dsmom001#0;

     |DBASS aBase;
     aPathFich = aBase + "modelos/fich/";
     |PATH_DAT #dsm18430#aPathFich#;

     nLin = 0;
     |BUCLE dsm18430;

     |SI nLin = 0; |ACABA;  |FINSI;

     |ABRE #dsm18430;  |SELECT #1#dsm18430;

     #dsm18430#0  = #dsmom001#0;
     #dsm18430#1  = 2018;
     #dsm18430#33 = nCom;
     #dsm18430#34 = nLin;
     |LEE 000#dsm18430.=;
     |SI FSalida ! 0;
         |CIERRA #dsm18430;
         |ACABA;
     |FINSI;
     |CIERRA #dsm18430;

     nOk = 0;
     |SI #dsm18430#12 ! 0;  nOk = 1;  |FINSI;
     |SI #dsm18430#13 ! 0;  nOk = 1;  |FINSI;
     |SI #dsm18430#43 ! 0;  nOk = 1;  |FINSI;
     |SI #dsm18430#44 ! 0;  nOk = 1;  |FINSI;
     |SI #dsm18430#31 ! 0;  nOk = 1;  |FINSI;

     |ABRE #rem00058;
     |SI nOk = 1;  |HAZ Mob184;  |FINSI;

     nOk = 0;
     |SI #dsm18430#14 ! 0;  nOk = 1;  |FINSI;
     |SI #dsm18430#15 ! 0;  nOk = 1;  |FINSI;
     |SI #dsm18430#45 ! 0;  nOk = 1;  |FINSI;

     |SI nOk = 1;  |HAZ Inmob184;  |FINSI;

     nOk = 0;
     |SI #dsm18430#16 ! 0;  nOk = 1;  |FINSI;
     |SI #dsm18430#17 ! 0;  nOk = 1;  |FINSI;
     |SI #dsm18430#51 ! 0;  nOk = 1;  |FINSI;
     |SI #dsm18430#46 ! 0;  nOk = 1;  |FINSI;

     |SI nOk = 1;  |HAZ Act184;  |FINSI;

     nOk = 0;
     |SI #dsm18430#19 ! 0;  nOk = 1;  |FINSI;
     |SI #dsm18430#20 ! 0;  nOk = 1;  |FINSI;
     |SI #dsm18430#21 ! 0;  nOk = 1;  |FINSI;
     |SI #dsm18430#22 ! 0;  nOk = 1;  |FINSI;
     |SI #dsm18430#47 ! 0;  nOk = 1;  |FINSI;

     |SI nOk = 1;  |HAZ GyP184;  |FINSI;

     |CIERRA #rem00058;
|FPRC;
