|FICHEROS;
     rem00099 #8;
     rew00001 #99;

     &poblaci@ #703;
|FIN;

|INCLUYE i_varcpa;

|| **************************************************************************
||                           PROCESOS IMPRESION
|| **************************************************************************

|PROCESO impre_02;
     |SI swporta = 0; |HAZ cabecera; |FINSI;
     |CIMPR 1;  |IMPRIME varalf;  |CIMPR 2;
     linea = linea + 1; |HAZ linea;
|FPRC;

|PROCESO carga_02_1;
     |SI swrrr = 0;
          varalf = ""; |HAZ impre_02;
          varalf = ""; |HAZ impre_02;
          |SI sw_fich = 1;
               varalf = "C1) BIENES Y DERECHOS AFECTOS A ACTIVIDADES EMPRESARIALES";
               varalf = varalf + " O PROFESIONALES (EXCEPTO INMUEBLES)"; |HAZ impre_02;
               varalf = "=" * 127; |HAZ impre_02;
               varalf = "Epigrafe      Domicilio                        ";
               varalf = varalf + "   Descripcion del bien o derecho             ";
               varalf = varalf + "                             Valor";
               |HAZ impre_02;
               varalf = "=" * 127; |HAZ impre_02;
               swrrr = 1;
         |FINSI;

         |SI sw_fich = 2;
              varalf = "C2) BIENES Y DERECHOS NO EXENTOS AFECTOS A ACTIVIDADES ";
              varalf = varalf + "EMPRESARIALES O PROFESIONALES "; |HAZ impre_02;
              varalf = "=" * 127; |HAZ impre_02;
              varalf = "Epigrafe  Clave  Referencia catastral               Situacion          ";
              varalf = varalf + "                                         ";
              varalf = varalf + "          Valor";
              |HAZ impre_02;
              varalf = "=" * 127; |HAZ impre_02;
              swrrr = 1;
         |FINSI;

         |SI sw_fich = 3;
              varalf = "D) BIENES Y DERECHOS EXENTOS AFECTOS A ACTIVIDADES EMP";
              varalf = varalf + "RESARIALES       "; |HAZ impre_02;
              varalf = "=" * 127; |HAZ impre_02;
              varalf = "Epigrafe  Clave  Referencia catastral               Descripcion de bien";
              varalf = varalf + "es, derechos y deudas                    ";
              varalf = varalf + "          Valor";
              |HAZ impre_02;
              varalf = "=" * 127; |HAZ impre_02;
              swrrr = 1;
         |FINSI;
     |FINSI;

     |SI sw_fich = 1;
          varalf = alfa1 + "      ";
          varalf = varalf + "   " + alfa2;
          varalf = varalf + "      " + alfa3;
          varalf = varalf + "   " + alfa4;
          canti   = (canti % coefi) ! 2;
          importe = canti; |HAZ importe;
          varalf = varalf + "                                            " + importe;
          |HAZ impre_02;
          total = total + canti;
     |FINSI;

     |SI sw_fich = 2;
          varalf = alfa1 + "  ";
          varalf = varalf + "     " + alfa2;
          varalf = varalf + "    " + alfa3;
          varalf = varalf + "          " + alfa4;
          canti   = (canti % coefi) ! 2;
          importe = canti; |HAZ importe;
          varalf = varalf + "                                " + importe;
          |HAZ impre_02;
          total = total + canti;
     |FINSI;

     |SI sw_fich = 3;
          varalf = alfa1 + "  ";
          varalf = varalf + "     " + alfa2;
          varalf = varalf + "    " + alfa3;
          varalf = varalf + "          " + alfa4;
          canti   = (canti % coefi) ! 2;
          importe = canti; |HAZ importe;
          varalf = varalf + "                      " + importe;
          |HAZ impre_02;
          total = total + canti;
     |FINSI;
|FPRC;

|| *********************** De afectos a patrimonio c1 **********************

|PROCESO lee81;
     |HAZ LeePoblac;

     alfa1 = #8#18;                          || epigrafe
     alfa2 = #8#6 + "  ";                    || calle
     alfa3 = #8#16 + "                ";     || actividad
     alfa4 = "";
     canti = #8#10;                          || valor

     |SI canti [ 0; |ACABA; |FINSI;

     aRecorte = #99#2 % 110;
     |SI #8#3 = aGanancial;
          coefi = 50;
          |SI aRecorte = aTitular;    |HAZ carga_02_1;    |FINSI;
          |SI aRecorte = aConyuge;    |HAZ carga_02_1;    |FINSI;
     |SINO;
          |SI #rem00099#3 = aVarios;
               |SI aRecorte = aTitular;|Y #rem00099#20 ! 0; coefi = #rem00099#20; |HAZ carga_02_1;    |FINSI;
               |SI aRecorte = aConyuge;|Y #rem00099#21 ! 0; coefi = #rem00099#21; |HAZ carga_02_1;    |FINSI;
          |SINO;
               coefi = 100;
               |SI aRecorte = #rem00099#3;   |HAZ carga_02_1;    |FINSI;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE repatrc1;
     #8#1;
     ;
     #99#0, "C1",   1;
     #99#0, "C1", 999;
     ;
     NULL, lee81;
|FIN;

|| *********************** De afectos a patrimonio c2 **********************

|PROCESO lee82;
     |HAZ LeePoblac;

     alfa1 = #8#18;                || epigrafe
     alfa2 = #8#19;                || rustica/urbana
     alfa3 = #8#17;                || ref.catastral
     alfa4 = #8#6 + "  ";          || calle
     canti = #8#10;                || valor

     |SI canti [ 0; |ACABA; |FINSI;

     aRecorte = #99#2 % 110;
     |SI #8#3 = aGanancial;
          coefi = 50;
          |SI aRecorte = aTitular;    |HAZ carga_02_1;    |FINSI;
          |SI aRecorte = aConyuge;    |HAZ carga_02_1;    |FINSI;
     |SINO;
          |SI #rem00099#3 = aVarios;
               |SI aRecorte = aTitular;|Y #rem00099#20 ! 0; coefi = #rem00099#20; |HAZ carga_02_1;    |FINSI;
               |SI aRecorte = aConyuge;|Y #rem00099#21 ! 0; coefi = #rem00099#21; |HAZ carga_02_1;    |FINSI;
          |SINO;
               coefi = 100;
               |SI aRecorte = #rem00099#3;   |HAZ carga_02_1;    |FINSI;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE repatrc2;
     #8#1;
     ;
     #99#0, "C2",   1;
     #99#0, "C2", 999;
     ;
     NULL, lee82;
|FIN;

|PROCESO lee83;
     |HAZ LeePoblac;

     alfa1 = #8#18;                     || epigrafe
     alfa2 = #8#19;                     || rustica/urbana
     alfa3 = #8#17;                     || ref.catastral
     alfa4 = #8#6 + "            ";     || calle
     canti = #8#10;                     || valor

     |SI canti [ 0; |ACABA; |FINSI;

     aRecorte = #99#2 % 110;
     |SI #8#3 = aGanancial;
          coefi = 50;
          |SI aRecorte = aTitular;    |HAZ carga_02_1;    |FINSI;
          |SI aRecorte = aConyuge;    |HAZ carga_02_1;    |FINSI;
     |SINO;
          |SI #rem00099#3 = aVarios;
               |SI aRecorte = aTitular;|Y #rem00099#20 ! 0; coefi = #rem00099#20; |HAZ carga_02_1;    |FINSI;
               |SI aRecorte = aConyuge;|Y #rem00099#21 ! 0; coefi = #rem00099#21; |HAZ carga_02_1;    |FINSI;
          |SINO;
               coefi = 100;
               |SI aRecorte = #rem00099#3;   |HAZ carga_02_1;    |FINSI;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE repatrd1;
     #8#1;
     ;
     #99#0, "D1",   1;
     #99#0, "D1", 999;
     ;
     NULL, lee83;
|FIN;

|PROCESO recompa2;
     total = 0;
     sw_fich = 1;
     hasta = 19;
     swrrr = 0;
     |BUCLE repatrc1;
     |SI swrrr = 1;
          varalf = " " * 113;
          varalf = varalf + "--------------";  |HAZ impre_02;
          importe = total;                     |HAZ importe;
          varalf = " " * 113;
          varalf = varalf + " " + importe;     |HAZ impre_02;
     |FINSI;

     total = 0;
     sw_fich = 2;
     hasta = 21;
     swrrr = 0;
     |BUCLE repatrc2;
     |SI swrrr = 1;
          varalf = " " * 113;
          varalf = varalf + "--------------";  |HAZ impre_02;
          importe = total;                     |HAZ importe;
          varalf = " " * 113;
          varalf = varalf + " " + importe;     |HAZ impre_02;
     |FINSI;

     total = 0;
     sw_fich = 3;
     hasta = 21;
     swrrr = 0;
     |BUCLE repatrd1;
     |SI swrrr = 1;
          varalf = " " * 113;
          varalf = varalf + "--------------";  |HAZ impre_02;
          importe = total;                     |HAZ importe;
          varalf = " " * 113;
          varalf = varalf + " " + importe;     |HAZ impre_02;
     |FINSI;
|FPRC;
