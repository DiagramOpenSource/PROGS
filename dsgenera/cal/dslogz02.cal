|FICHEROS;
     dslogm03;

     defactu@;
|FIN;

|VARIABLES;
     aBase         = "";
     aPathActu     = "";
     aAplica       = "";
     aFicDef       = "";
     aFicActu      = "";
     aDef          = "";
|FIN;

|PROCESO SacaConsulta;
     aAplica = #dslogm03#0;  |QBF aAplica;
     aFicDef = #dslogm03#2;  |QBF aFicDef;

     aDef = aBase + aAplica + "/def/" +  aFicDef;
     |CARGA_DEF aDef, defactu@;
     |PATH_DAT #defactu@#aPathActu#;

     aFicActu = #dslogm03#0;                     |QBF aFicActu;
     aFicActu = aFicActu + #dslogm03#1;          |QBF aFicActu;
     aFicActu = aFicActu + #dslogm03#2;          |QBF aFicActu;
     aFicActu = aFicActu + (#dslogm03#3 % 101);
     |NOME_DAT #defactu@#aFicActu#;

     |ABRE #defactu@;
     |CONSULTA_CLAVE #1#defactu@;
     |CIERRA #defactu@;

     |DESCARGA_DEF #defactu@;
|FPRC;

|PROGRAMA;
     |DBASS aBase;
     aPathActu    = aBase + "dsgenera/recupera";  |MKDIR aPathActu;
     aPathActu    = aBase + "dsgenera/recupera/";

     |ABRE #dslogm03;
     |PARA;  |SI;  |HACIENDO;
          |CONSULTA_CLAVE #1#dslogm03;
          |SI FSalida ! 0;  |SAL;  |FINSI;

          |HAZ SacaConsulta;
     |SIGUE;
     |CIERRA #dslogm03;
|FPRO;
