|FICHEROS;
    prependi #0;
    labtraba #2;
    prehisvc #10;
    prehisvl #11;
    prequiva #20;   || tarjetas

    nomcatli #50;   || categorias lins.
    nomtrali #51;   || trabajadores lins.
    nomvarli #52;   || variaciones lins.
|FIN;

|VARIABLES;
    aAlfa1 = "";
    aAlfa2 = "";
    aAlfa3 = "";
    aAlfa4 = "";
    nNume1 = 0;
    nNume2 = 0;
    nNume3 = 0;
    nNume4 = 0;
    nPara1 = 0;
    nPara2 = 0;
    nPara3 = 0;
    nPara4 = 0;
    fFech1 = @;
    fFech2 = @;
    fFech3 = @;
    fFech4 = @;
    nElsw1 = 0;
    nElsw2 = 0;
    nElsw3 = 0;
    nElsw4 = 0;
    nFEstado = 0;
    nSeleccio = 0;
    nModo = 0;
    nSwRup = 0;

    &aP_mes = "";
    &nPrecio = 0;
|FIN;
____________________________________/
|PROCESO mayus; |TIPO 0;
    #0Campo = #0Campo > #0Campo;
|PINTA #0Campo;
|FPRC;

|PROCESO defecto; |TIPO 7;    || calcula el a¤o por defecto segun sistema
    fFech1 = ~;
    aAlfa1 = fFech1;
    aAlfa1 = aAlfa1 % -104;
    #0Campo = aAlfa1;
|PINTA #0Campo;
|FPRC;

|PROCESO mirames; |TIPO 7;    || calcula el mes por defecto segun sistema
    fFech1 = ~;
    aAlfa1 = fFech1;
    aAlfa1 = aAlfa1 % 402;
    #0Campo = aAlfa1;
|PINTA #0Campo;
|FPRC;

|PROCESO pintames; |TIPO 0;      || PINTA EL MES LITERAL
|SI #0Campo =  1; aP_mes = "ENERO     ";  |FINSI;
|SI #0Campo =  2; aP_mes = "FEBRERO   ";  |FINSI;
|SI #0Campo =  3; aP_mes = "MARZO     ";  |FINSI;
|SI #0Campo =  4; aP_mes = "ABRIL     ";  |FINSI;
|SI #0Campo =  5; aP_mes = "MAYO      ";  |FINSI;
|SI #0Campo =  6; aP_mes = "JUNIO     ";  |FINSI;
|SI #0Campo =  7; aP_mes = "JULIO     ";  |FINSI;
|SI #0Campo =  8; aP_mes = "AGOSTO    ";  |FINSI;
|SI #0Campo =  9; aP_mes = "SEPTIEMBRE";  |FINSI;
|SI #0Campo = 10; aP_mes = "OCTUBRE   ";  |FINSI;
|SI #0Campo = 11; aP_mes = "NOVIEMBRE ";  |FINSI;
|SI #0Campo = 12; aP_mes = "DICIEMBRE ";  |FINSI;
|PINTA 1329, aP_mes;
|FPRC;
____________________________________/
|PROCESO precio_hora;
    nPrecio = 0;

    #50#0 = #2#87;
    #50#1 = #2#17;
    #50#2 = 101;
|LEE 000#50=;
|SI FSalida = 0;|Y #50#4 ! "            ";
        nPrecio = #50#4;       || desde categorias
|FINSI;

    #51#0 = #2#0;
    #51#1 = #2#1;
    #51#2 = 101;
|LEE 000#51=;
|SI FSalida = 0;|Y #51#4 ! "            ";
        nPrecio = #51#4;       || desde trabajadores
|FINSI;

    #52#0 = #2#0;
    #52#1 = #2#1;
    #52#2 = #0#5;
    #52#3 = 0;
    #52#4 = 101;
|LEE 000#52=;
|SI FSalida = 0;|Y #52#6 ! "            ";
        nPrecio = #52#6;       || desde variaciones
|FINSI;
|FPRC;

|PROCESO prehisvl_1;
    #20#1 = #11#0;
    #20#2 = #11#1;
|LEE 000#20=;                 || lee codigos de barras
|SI FSalida = 0;|Y #20#4 = "S";
    |DDEFECTO #2;
        #2#0 = #20#1;
        #2#1 = #20#2;
    |LEE 000#2=;
    |HAZ precio_hora;

        nSeleccio = 1;
    |SI #0#6 = "I";
        |PRINT;
    |SINO;
        |INFOR "prepend2";
        |PRINT;
        |PIEINF;
        |FININF;
    |FINSI;
|FINSI;
|FPRC;

|DEFBUCLE prehisvl;
 #11#1;
 ;
 #0#0, #0#2, #0#4, #0#5;
 #0#1, #0#3, #0#4, #0#5;
 ;
 NULL, prehisvl_1;
|FIN;

|PROCESO Tipo3; |TIPO 3;
|IMPRE 0;
|SI FSalida = 0;
    |SI #0#6 = "I"; |INFOR "prependi";  |FINSI;
    |ABRE #2;
    |ABRE #20;
    |SELECT #2#20;
    |ABRE #50;
    |ABRE #51;
    |ABRE #52;
    |BUCLE prehisvl;
    |CIERRA #2;
    |CIERRA #20;
    |CIERRA #50;
    |CIERRA #51;
    |CIERRA #52;
    |SI nSeleccio ! 0;
        |SI #0#6 = "I";  |PIEINF;  |FINSI;
    |SINO;
        |MENAV "    Seleccion vacia ...";
    |FINSI;
    |SI #0#6 = "I"; |FININF;  |FINSI;
|SINO;
    |MENAV "    Proceso abortado ...";
|FINSI;
|FINIMP;
|FPRC;
