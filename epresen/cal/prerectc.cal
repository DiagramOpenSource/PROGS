|FICHEROS;
    prerectc #0;    || movimientos cabs.
    prerectl #1;    || movimientos lins.

    prequiva #10;   || codigos de tarjetas
    pretarea #11;   || codigos de incidencia
    pretermi #12;   || codigos de terminales
    labempre #13;   || empresas
    labtraba #14;   || trabajadores

    premvtol #100;  || Movimientos
|FIN;

|VARIABLES;
    alfa1 = "";
    alfa2 = "";
    alfa3 = "";
    alfa4 = "";
    nume1 = 0;
    nume2 = 0;
    nume3 = 0;
    nume4 = 0;
    para1 = 0;
    para2 = 0;
    para3 = 0;
    para4 = 0;
    fech1 = @;
    fech2 = @;
    fech3 = @;
    fech4 = @;
    elsw1 = 0;
    elsw2 = 0;
    elsw3 = 0;
    elsw4 = 0;
    FEstado = 0;
    seleccio = 0;
    modo = 0;
    sw_rup = 0;

    p_mes = "";
    aAlfa = "";

    nFlag = 0;
    nRegistro = 0;
|FIN;
____________________________________/ DESDE CABECERAS
|PROCESO defectoRect; |TIPO 7;
    fech1 = ~;
    alfa1 = fech1;
    alfa1 = alfa1 % -104;
    #0Campo = alfa1;
|PINTA #0Campo;
|FPRC;

|PROCESO miramesRect; |TIPO 7;
    fech1 = ~;
    alfa1 = fech1;
    alfa1 = alfa1 % 402;
    #0Campo = alfa1;
|PINTA #0Campo;
|FPRC;

|PROCESO pintamesRect; |TIPO 0;
|SI #0Campo =  1;  p_mes = "ENERO     ";  |FINSI;
|SI #0Campo =  2;  p_mes = "FEBRERO   ";  |FINSI;
|SI #0Campo =  3;  p_mes = "MARZO     ";  |FINSI;
|SI #0Campo =  4;  p_mes = "ABRIL     ";  |FINSI;
|SI #0Campo =  5;  p_mes = "MAYO      ";  |FINSI;
|SI #0Campo =  6;  p_mes = "JUNIO     ";  |FINSI;
|SI #0Campo =  7;  p_mes = "JULIO     ";  |FINSI;
|SI #0Campo =  8;  p_mes = "AGOSTO    ";  |FINSI;
|SI #0Campo =  9;  p_mes = "SEPTIEMBRE";  |FINSI;
|SI #0Campo = 10;  p_mes = "OCTUBRE   ";  |FINSI;
|SI #0Campo = 11;  p_mes = "NOVIEMBRE ";  |FINSI;
|SI #0Campo = 12;  p_mes = "DICIEMBRE ";  |FINSI;
|PINTA 0768, p_mes;
|FPRC;
____________________________________/ DESDE LINEAS
|PROCESO Tipo02Rect; |TIPO 2;
   |ABRE #premvtol;

   nFlag = 0 +. 1;
   |SI nFlag < 1;
      #premvtol#0 = #prerectl#0;
      #premvtol#1 = #prerectl#1;
      #premvtol#3 = #prerectl#3;
      #premvtol#2 = #prerectl#11;
      |LEE 101#premvtol.=;
      |SI FSalida = 0;
         |BORRA 020#premvtol.a; |LIBERA #premvtol;
      |FINSI;
   |SINO;
      nRegistro = 900000;

      #premvtol#0 = #prerectl#0;
      #premvtol#1 = #prerectl#1;
      #premvtol#3 = #prerectl#3;
      #premvtol#2 = 900000;
      |LEE 000#premvtol.];
      |PARA; |SI FSalida = 0; |Y #premvtol#0 = #prerectl#0; |Y #premvtol#1 = #prerectl#1;
       |Y #premvtol#3 = #prerectl#3; |HACIENDO;
         nRegistro = #premvtol#2 + 1;
         |LEE 000#premvtol.s;
      |SIGUE;

      |DDEFECTO #premvtol;
      #premvtol#0 = #prerectl#0;
      #premvtol#1 = #prerectl#1;
      #premvtol#3 = #prerectl#3;
      #premvtol#2 = nRegistro;
      |GRABA 020#premvtol.b;
      #premvtol#4 = #prerectl#4;
      #premvtol#5 = #prerectl#5;
      #premvtol#6 = #prerectl#6;
      #premvtol#7 = #prerectl#7;
      #premvtol#8 = #prerectl#8;
      #premvtol#9 = #prerectl#9;
      #premvtol#10 = #prerectl#10;
      |GRABA 020#premvtol.a; |LIBERA #premvtol;

      #prerectl#11 = nRegistro;
   |FINSI;
   |CIERRA #premvtol;
|FPRC;

|PROCESO tipo13Rect; |TIPO 13;
|HAZ pin_barras1;
|HAZ pin_tareas1;
|HAZ pin_terminal1;
|FPRC;

|PROCESO pin_barras1; |TIPO 0;
|DDEFECTO #10;
|DDEFECTO #13;
|DDEFECTO #14;
|ABRE #10;
    #10#0 = #1#7;
|LEE 000#10=;
|SI FSalida = 0;
    |ABRE #13;
        #13#0 = #10#1;
    |LEE 000#13=;
    |CIERRA #13;
    |ABRE #14;
        #14#0 = #10#1;
        #14#1 = #10#2;
    |LEE 000#14=;
    |CIERRA #14;
|FINSI;
|CIERRA #10;

|COLOR 0,7;
|ATRI I;

|PINTA 1815, #14#0;
|PINTA 1821, #14#1;
|PINTA 1915, #13#2;
|PINTA 2015, #14#2;

|ATRI 0;
|FPRC;

|PROCESO pin_tareas1; |TIPO 0;
|DDEFECTO #11;
|ABRE #11;
    #11#0 = #1#8;
|LEE 000#11=;
|CIERRA #11;

|ATRI I;
|PINTA 2115, #11#1;
|ATRI 0;
|FPRC;

|PROCESO pin_terminal1; |TIPO 0;
|DDEFECTO #12;
|ABRE #12;
    #12#0 = #1#9;
|LEE 000#12=;
|CIERRA #12;

|ATRI I;
|PINTA 2215, #12#1;
|ATRI 0;
|FPRC;
