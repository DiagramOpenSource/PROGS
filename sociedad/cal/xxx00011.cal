|FICHEROS;
    xxx00011 #0;
    xxx00015 #2;
|FIN;

|VARIABLES;
    &empresa   = 0;
    &anyo      = 0;
    &modo      = 0;

    FEstado = 0;
    varcamp = 0;
    x       = 0;
    tecla_p = "";
    avance  = "815";
    atras   = "814";
|FIN;

|PROGRAMA;
|ABRE #0;
|PINPA #0#0;
|SI modo = 1; |O modo = 2; |HAZ pidedato; |FINSI;
|SI modo = 4; |HAZ consulta; |FINSI;
|CIERRA #0;
|FPRO;

|PROCESO pidedato;
#0#0  = empresa;
#0#1 = anyo;
|LEE 110#0=;
FEstado = FSalida;
|SI FEstado ! 0; |DDEFECTO #0; #0#0 = empresa; #0#1 = anyo; |FINSI;
|PINDA #0#0;
|SI modo = 1; |ENDATOS #1#0;  |FINSI;
|SI modo = 2; |ENDATOS #2#0;  |FINSI;
|SI FSalida = 0;
    #0#0  = empresa;
    #0#1 = anyo;
    |SI FEstado = 0; |GRABA 020#0a; |SINO; |GRABA 020#0n; |FINSI;
    |LIBERA #0;
    |CIERRA #0;
    |HAZ graba_liq;
|FINSI;
|FPRC;

|PROCESO consulta;
  avance = &255 + avance;
  atras = &255 + atras;
  #0#0 = empresa;
  #0#1 = anyo;
  |LEE 040#0=;
  |SI FSalida = 0; |HAZ pantalla1; |FINSI;
|FPRC;

|PROCESO pantalla1;
  |PINPA #0#0;
  |PINDA #0#0;
  |MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
  |LEETECLA tecla_p;
  |SI tecla_p = avance; |HAZ pantalla2; |ACABA; |FINSI;
|FPRC;

|PROCESO pantalla2;
  |PINPA #1#0;
  |PINDA #1#0;
  |MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
  |LEETECLA tecla_p;
  |SI tecla_p = avance; |HAZ pantalla3; |ACABA; |FINSI;
  |SI tecla_p = atras;  |HAZ pantalla1; |ACABA; |FINSI;
|FPRC;

|PROCESO pantalla3;
  |PINPA #2#0;
  |PINDA #2#0;
  |MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
  |LEETECLA tecla_p;
  |SI tecla_p = atras;  |HAZ pantalla2; |ACABA; |FINSI;
  |SI tecla_p = avance; |HAZ pantalla4; |ACABA; |FINSI;
|FPRC;

|PROCESO pantalla4;
  |PINPA #3#0;
  |PINDA #3#0;
  |MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
  |LEETECLA tecla_p;
  |SI tecla_p = atras; |HAZ pantalla3; |ACABA; |FINSI;
|FPRC;

|PROCESO resultad;|TIPO 0;
#0#16 = 0;
|PARA x = 2; |SI x [ 15; |HACIENDO x = x + 1;
     #0#16 = #0#16 + #0x;
|SIGUE;
#0#25 = #0#17 + #0#18 + #0#19 + #0#20 + #0#21 + #0#22 - #0#23 - #0#24;
#0#29 = #0#26 + #0#27 + #0#28;
#0#35 = #0#32 + #0#33 + #0#34;
#0#38 = #0#25 + #0#29 + #0#30 + #0#31 + #0#35 + #0#36 + #0#37;
#0#43 = #0#39 + #0#40 + #0#41 + #0#42;

#0#52 = 0;
|PARA x = 44; |SI x [ 51; |HACIENDO x = x + 1;
     #0#52 = #0#52 + #0x;
|SIGUE;

|PINTA #0#16;
|PINTA #0#25;
|PINTA #0#29;
|PINTA #0#35;
|PINTA #0#38;
|PINTA #0#43;
|PINTA #0#52;
|FPRC;

|PROCESO graba_liq;
|ABRE #2;
#2#0 = #0#0;
#2#1 = #0#1;

|LIBERA #2;
|LEE 140#2=;
FEstado = FSalida;

|SI FSalida ! 0;
   |DDEFECTO #2;
   #2#0 = #0#0;
   #2#1 = #0#1;
|FINSI;

#2#2 = #0#22;
#2#5 = #2#2 + #2#3 - #2#4;          || Punto 729
#2#7 = #2#5 - #2#6;                 || Punto 731

|SI #2#8 ! 0;|O #2#9 ! 0;
    #2#11 = (#2#8 + #2#9) % #2#10;  || Punto 735
    |SI #2#11 < 0; #2#11 = 0; |FINSI;
|SINO;
    #2#11 = #2#7 % #2#10;           || Punto 735
    |SI #2#11 < 0; #2#11 = 0; |FINSI;
|FINSI;

#2#13 = #2#11 - #2#12;              || Punto 737
#2#18 = #2#13 - (#2#14 + #2#15 + #2#16 + #2#17);  || Punto 742
#2#23 = #2#18 - (#2#19 + #2#20 + #2#21 + #2#22);  || Punto 747
#2#32 = #2#23 - (#2#24 + #2#25 + #2#26 + #2#27 + #2#28 + #2#29 + #2#30 + #2#31);
#2#34 = #2#32 - #2#33;
#2#38 = #2#34 - (#2#35 + #2#36 + #2#37);
#2#43 = #2#38 + #2#39 + #2#40 - #2#41 + #2#42;

|SI FEstado = 0; |GRABA 121#2a; |SINO; |GRABA 121#2n; |FINSI;

|CIERRA #2;
|FPRC;
