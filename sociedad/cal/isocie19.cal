|FICHEROS;
   isocie19 #0;
   isocie22 #1;
|FIN;

|VARIABLES;
   &empresa   = 0;
   &anyo      = 0;
   &modo      = 0;
   &modelito  = 0;

   FEstado    = 0;
|FIN;

|RUTINA inferior;
  #0#0 = empresa;
  #0#1 = anyo;
  #0#2 = 1;
|FRUT;

|RUTINA superior;
  #0#0 = empresa;
  #0#1 = anyo;
  #0#2 = 99;
|FRUT;

|PROGRAMA;
|ABRE #0;
|PINPA #0#0;
|SI modo = 1;
    |ENTLINEAL #1#0,3,1,14,0,inferior,superior;
    |HAZ liquidacio;
|FINSI;
|SI modo = 2;
    |ENTLINEAL #1#0,3,2,14,0,inferior,superior;
    |HAZ liquidacio;
|FINSI;
|SI modo = 4;
    |ENTLINEAL #1#0,3,4,14,0,inferior,superior;
|FINSI;
|FPRO;

|PROCESO calcular;
|SI #0#3 = 1; #1#27 = #1#27 + ((#0#6 - #0#7) % #0#5); |FINSI;
|SI #0#3 = 2; #1#28 = #1#28 + ((#0#6 - #0#7) % #0#5); |FINSI;
|SI #0#3 = 3; #1#29 = #1#29 + ((#0#6 - #0#7) % #0#5); |FINSI;
|FPRC;

|DEFBUCLE isocie19;
#0#1;
;
empresa, anyo, 01;
empresa, anyo, 99;
e;
NULL, calcular;
|FIN;

|PROCESO liquidacio;
|ABRE #1;
#1#0 = empresa;
#1#1 = anyo;
|LIBERA #1;
|LEE 110#1=;
FEstado = FSalida;
|SI FEstado ! 0; |DDEFECTO #1; #1#0 = empresa; #1#1 = anyo; |FINSI;

#1#27 = 0;
#1#28 = 0;
#1#29 = 0;
|BUCLE isocie19;

|SI FEstado = 0; |GRABA 020#1a; |SINO; |GRABA 020#1n; |FINSI;
|CIERRA #1;
|SUB_EJECUTA "ispant31.run";
|FPRC;
