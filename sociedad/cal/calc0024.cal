|INCLUYE calc9999;
|INCLUYE varbal_i;

|PROCESO Bucle124;
     enValor1 = enValor1 + #isom0024#5;
|FPRC;

|DEFBUCLE Bucle124;
     #isom0024#1;
     ;
     enEmpresa, enAnyo, nDLinea;
     enEmpresa, enAnyo, nHLinea;
     ;
     NULL, Bucle124;
|FIN;

|PROCESO TotalFich124;
     |SI enModoConsulta = 1;
         |ACABA;
     |FINSI;

     enValor1 = 0;
     nDLinea = 1005;
     nHLinea = 1015;
     |BUCLE Bucle124;

     |SELECT #2#isom0024;
     #isom0024#0  = enEmpresa;
     #isom0024#1  = enAnyo;
     #isom0024#4  = "344";
     |LEE 101#isom0024.=;
     |SI FSalida = 0;
         #isom0024#5 = enValor1;
         |GRABA 020#isom0024.a;
     |FINSI;
     |LIBERA #isom0024;

     |ABRE #isom0006;
     |SELECT #2#isom0006;
     #isom0006#0  = enEmpresa;
     #isom0006#1  = enAnyo;
     #isom0006#4  = "415";
     |LEE 101#isom0006.=;
     |SI FSalida = 0;
         #isom0006#5 = 0;
         #isom0006#7 = 0;
         |SI enValor1 > 0;
             #isom0006#5 = enValor1;
         |SINO;
             #isom0006#7 = enValor1;
         |FINSI;
         |GRABA 020#isom0006.a;
     |FINSI;
     |LIBERA #isom0006;

     |HAZ TotalFich106;

     |CIERRA #isom0006;

     |SELECT #1#isom0024;
|FPRC;
