|FICHEROS;
   isocie18 #0;
   isocie22 #1;
   isocie36 #2;
   isocie46 #3;
|FIN;

|VARIABLES;
   &empresa   = 0;
   &anyo      = 0;
   &modo      = 0;
   &modelito  = 0;

   FEstado    = 0;
|FIN;

|RUTINA inferior;
  #0#0 = empresa;
  #0#1 = anyo;
  #0#2 = 1;
|FRUT;

|RUTINA superior;
  #0#0 = empresa;
  #0#1 = anyo;
  #0#2 = 99;
|FRUT;

|PROGRAMA;
|PINPA #0#0;
|SI modo = 1;
    |ENTLINEAL #1#0,3,1,14,0,inferior,superior;
    |HAZ liquidacio;
|FINSI;
|SI modo = 2;
    |ENTLINEAL #1#0,3,2,14,0,inferior,superior;
    |HAZ liquidacio;
|FINSI;
|SI modo = 4;
    |ENTLINEAL #1#0,3,4,14,0,inferior,superior;
|FINSI;
|FPRO;

|PROCESO calcular;
|SI anyo = 1992; #1#23 = #1#23 + (#0#5 - #0#6); |FINSI;
|SI anyo = 1993; #2#23 = #2#23 + (#0#5 - #0#6); |FINSI;
|SI anyo ] 1994; |Y anyo < 1996; #3#24 = #3#24 + (#0#5 - #0#6); |FINSI;
|FPRC;

|DEFBUCLE isocie18;
#0#1;
;
empresa, anyo, 01;
empresa, anyo, 99;
e;
NULL, calcular;
|FIN;

|PROCESO liquidacio;
|SI anyo = 1992;
    |ABRE #1;
    #1#0 = empresa;
    #1#1 = anyo;
    |LIBERA #1;
    |LEE 110#1=;
    FEstado = FSalida;
    |SI FEstado ! 0; |DDEFECTO #1; #1#0 = empresa; #1#1 = anyo; |FINSI;

    #1#23 = 0;
    |BUCLE isocie18;

    |SI FEstado = 0; |GRABA 020#1a; |SINO; |GRABA 020#1n; |FINSI;
    |CIERRA #1;
    |SUB_EJECUTA "ispant31.run";
|FINSI;

|SI anyo = 1993;
    |ABRE #2;
    #2#0 = empresa;
    #2#1 = anyo;
    |LIBERA #2;
    |LEE 110#2=;
    FEstado = FSalida;
    |SI FEstado ! 0; |DDEFECTO #2; #2#0 = empresa; #2#1 = anyo; |FINSI;

    #2#23 = 0;
    |BUCLE isocie18;

    |SI FEstado = 0; |GRABA 020#2a; |SINO; |GRABA 020#2n; |FINSI;
    |CIERRA #2;
    |SUB_EJECUTA "ispant31.run";
|FINSI;

|SI anyo ] 1994;  |Y anyo < 1996; |SUB_EJECUTA "isz00005";  |FINSI;
|FPRC;
