|FICHEROS;
    isocie48 #0;
    isocie46 #1;
|FIN;

|VARIABLES;
    &empresa   = 0;
    &anyo      = 0;
    &tipo      = "";
    &modo      = 0;
    &clave     = 0;
    &clave1    = "";
    &numerica  = 0;
    &numerica1 = 0;
    &numerica2 = 0;
    &tecla     = 0;

    FEstado = 0;
    varcamp = 0;
    x       = 0;
    tecla_p = "";
    avance  = "815";
    atras   = "814";
|FIN;

|PROGRAMA;
|ABRE #0;
|PINPA #0#0;
|SI modo = 1; |O modo = 2; |HAZ pidedato; |FINSI;
|SI modo = 4; |HAZ consulta; |FINSI;
|CIERRA #0;
|FPRO;

|PROCESO pidedato;
#0#0 = empresa;
#0#1 = anyo;
|LEE 110#0=;
FEstado = FSalida;
|SI FEstado ! 0; |DDEFECTO #0; #0#0 = empresa; #0#1 = anyo; |FINSI;
|PINDA #0#0;
|SI modo = 1; |ENDATOS #1#0;  |FINSI;
|SI modo = 2; |ENDATOS #2#0;  |FINSI;
|SI FSalida = 0;
    #0#0 = empresa;
    #0#1 = anyo;
    #0#2 = tipo;
    |SI FEstado = 0; |GRABA 020#0a; |SINO; |GRABA 020#0n; |FINSI;
    |LIBERA #0;
    |CIERRA #0;
    |HAZ liquidacio;
|FINSI;
|FPRC;

|PROCESO consulta;
  avance = &255 + avance;
  atras = &255 + atras;
  #0#0 = empresa;
  #0#1 = anyo;
  |LEE 040#0=;
  |SI FSalida = 0; |HAZ pantalla1; |FINSI;
|FPRC;

|PROCESO pantalla1;
  |PINPA #0#0;
  |PINDA #0#0;
  |MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
  |LEETECLA tecla_p;
  |SI tecla_p = avance; |HAZ pantalla2; |ACABA; |FINSI;
|FPRC;

|PROCESO pantalla2;
  |PINPA #1#0;
  |PINDA #1#0;
  |MENSA "0411  Av.Pag.= Siguiente Pantalla  Re.Pag. = Pantalla Anterior";
  |LEETECLA tecla_p;
  |SI tecla_p = atras; |HAZ pantalla1; |ACABA; |FINSI;
|FPRC;

|PROCESO extenso; |TIPO 0;
|SI FSalida ! 9; |Y #0Campo = Contenido; |ACABA; |FINSI;

tecla = FSalida;
varcamp = Campo;

|SI varcamp = 17; clave = 701;  |HAZ linea1;  |FINSI;
|SI varcamp = 18; clave = 702;  |HAZ linea1;  |FINSI;
|SI varcamp = 19; clave1 = "A"; |HAZ linea2;  |FINSI;
|SI varcamp = 20; clave = 704;  |HAZ linea1;  |FINSI;
|SI varcamp = 21; clave1 = "B"; |HAZ linea2;  |FINSI;
|SI varcamp = 22;               |HAZ linea5;  |FINSI;
|SI varcamp = 23;               |HAZ linea5;  |FINSI;
|SI varcamp = 24;               |HAZ linea6;  |FINSI;
|SI varcamp = 25;               |HAZ linea7;  |FINSI;
|SI varcamp = 26;               |HAZ linea7;  |FINSI;
|SI varcamp = 27; clave = 711;  |HAZ linea1;  |FINSI;
|SI varcamp = 28; clave = 712;  |HAZ linea1;  |FINSI;
|SI varcamp = 29; clave = 713;  |HAZ linea1;  |FINSI;
|SI varcamp = 30; clave = 714;  |HAZ linea1;  |FINSI;
|SI varcamp = 31;               |HAZ linea11; |FINSI;
|SI varcamp = 32; clave1 = "C"; |HAZ linea2;  |FINSI;
|SI varcamp = 33; clave1 = "D"; |HAZ linea2;  |FINSI;
|SI varcamp = 34; clave = 718;  |HAZ linea1;  |FINSI;
|SI varcamp = 35; clave = 719;  |HAZ linea1;  |FINSI;
|SI varcamp = 36; clave = 720;  |HAZ linea1;  |FINSI;
|SI varcamp = 37; clave = 721;  |HAZ linea1;  |FINSI;
|SI varcamp = 38; clave = 722;  |HAZ linea1;  |FINSI;
|SI varcamp = 39; clave = 723;  |HAZ linea1;  |FINSI;
|SI varcamp = 40; clave = 724;  |HAZ linea1;  |FINSI;
|SI varcamp = 41; clave = 725;  |HAZ linea1;  |FINSI;
|SI varcamp = 42; clave = 726;  |HAZ linea1;  |FINSI;

|HAZ calculo;

Campo = varcamp;
|FPRC;

|PROCESO linea1;
|POPV;

|SUB_EJECUTA "isocie03.run";

#0varcamp = numerica;

|PINTA #0varcamp;
|FPRC;

|PROCESO linea2;
|POPV;
|SUB_EJECUTA "isocie12.run";

#0varcamp = numerica;
|PINTA #0varcamp;
|FPRC;

|PROCESO linea5;
|POPV;
|SUB_EJECUTA "isocie35.run";
#0#22 = numerica1;
#0#23 = -numerica2;

|PINTA #0#22;
|PINTA #0#23;
|FPRC;

|PROCESO linea6;
|POPV;
|SUB_EJECUTA "isocie15.run";
#0#24 = numerica;
|PINTA #0#24;
|FPRC;

|PROCESO linea7;
|POPV;
|SUB_EJECUTA "isocie13.run";
|SI numerica ] 0;
    #0#25 = numerica;
    #0#26 = 0;
|SINO;
    #0#25 = 0;
    #0#26 = -numerica;
|FINSI;
|PINTA #0#25;
|PINTA #0#26;
|FPRC;

|PROCESO linea11;
|POPV;
|SUB_EJECUTA "isocie04.run";
#0#31 = numerica;
|PINTA #0#31;
|FPRC;
|FPRC;

|PROCESO calculo; |TIPO 0;
#0#7  = #0#3  + #0#4  + #0#5  + #0#6;
|PINTA #0#7;

#0#16 = #0#8  + #0#9  + #0#10 + #0#11 + #0#12 + #0#13 + #0#14 + #0#15;
|PINTA #0#16;

#0#43 = #0#17 + #0#19 + #0#20 + #0#22 + #0#24 + #0#25 + #0#27 + #0#29;
#0#43 = #0#43 + #0#30 + #0#32 + #0#34 + #0#36 + #0#38 + #0#40 + #0#41;

#0#44 = #0#18 + #0#21 + #0#23 + #0#26 + #0#28 + #0#31;
#0#44 = #0#44 + #0#33 + #0#35 + #0#37 + #0#39 + #0#42;
|FPRC;

|PROCESO liquidacio;
|SUB_EJECUTA "isz00005.run";
|FPRC;
