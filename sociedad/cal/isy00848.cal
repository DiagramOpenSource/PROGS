|FICHEROS;
     isy00848  #0;
     isocie65  #1;
     eosm3390@ #2;
     isacceso  #3;
|FIN;

|VARIABLES;
     aBase        = "";
     aMas         = "";
     aFich        = "";

     nSwHay       = 0;

     &enImporte1  = 0;
     &enImporte2  = 0;
     &enAnyo1     = 0;
     &enAnyo2     = 0;

     &EURODB      = 0;
|FIN;

|PROCESO MiraEmpresa;
     enImporte1 = #1#166;

     |SI enImporte1 > 1000000;  |ACABA;  |FINSI;

     #2#0 = #1#0;
     #2#1 = enAnyo2 - 2000;
     |LEE 040#2=;
     |SI FSalida ! 0;  |DDEFECTO #2;  |FINSI;

     |SI #2#170 [ 1000000;  |ACABA;  |FINSI;

     enImporte2 = #2#170;

     #3#0 = #1#0;
     #3#1 = #1#1;
     |LEE 040#3=;
     |SI FSalida ! 0;  |DDEFECTO #3;  |FINSI;

     |PRINT;

     nSwHay = 1;
|FPRC;

|DEFBUCLE isocie65;
     #1#1;
     ;
     00000, enAnyo1;
     99999, enAnyo1;
     ;
     NULL, MiraEmpresa;
|FIN;

|PROCESO Tipo3;  |TIPO 3;
     |SI EURODB = 0;
         |MENAV "     Debera tener el Impuesto pasado a EUROS.";
         |ACABA;
     |FINSI;

     |IMPRE 0;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     |INFOR "isy00848";
     |SI FSalida ! 0;  |FINIMP;  |ACABA;  |FINSI;

     |DBASS aBase;  |QBF aBase;
     aMas = aBase + "agieos/def/eosm3390.mas";
     |CARGA_DEF aMas, eosm3390@;
     |SI FSalida ! 0;
         |FININF;
         |FINIMP;
         |MENAV "      No encuentro la REO.";
         |ACABA;
     |FINSI;

     aFich = aBase + "agieos/fich/";
     |PATH_DAT #2 aFich;

     nSwHay  = 0;
     enAnyo1 = #0#0 - 1;
     enAnyo2 = #0#0;

     |ABRE #2;
     |ABRE #3;
     |BUCLE isocie65;
     |CIERRA #2;
     |CIERRA #3;

     |DESCARGA_DEF #eosm3390@;

     |SI nSwHay = 1;  |PIEINF;  |FINSI;
     |FININF;
     |FINIMP;
|FPRC;
