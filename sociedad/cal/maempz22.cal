|FICHEROS;
     maempz22;
     maempr22,MANTE;
     maempr23;

     :/agicli/def/agim0016;
     :/agicli/def/agim0003;
     :/agicli/def/agicontr;
|FIN;

|VARIABLES;
     &empresa   = 0;
     &anyo      = 0;
     &modo      = 0;
     &aPath     = "";

     aAlfa      = "";
     SwError    = 0;
     nSalir     = 0;
     nSuma      = 0;
|FIN;

|PROCESO inferior;
     #maempr22#0 = empresa;
     #maempr22#1 = anyo;
     #maempr22#2 = 001;
|FPRC;

|PROCESO superior;
     #maempr22#0 = empresa;
     #maempr22#1 = anyo;
     #maempr22#2 = 999;
|FPRC;

|PROCESO SumaParticipacion;
     #maempz22#0 = (#maempz22#0 + #maempr22#11 + #maempr22#12) ! 2;
|FPRC;

|DEFBUCLE SumaParticipacion;
     #maempr22#1;
     ;
     empresa, anyo, 001;
     empresa, anyo, 999;
     ;
     NULL, SumaParticipacion;
|FIN;

|PROCESO  ComprobarOtro;
    SwError = 0;
    |ABRE #maempr23;
    #maempr23#0 = empresa;
    #maempr23#1 = anyo;
    #maempr23#2 = 01;
    |LEE 041#maempr23.];
    |SI FSalida = 0; |Y #maempr23#0 = empresa; |Y #maempr23#1 = anyo;
        SwError = 1;
    |FINSI;
    |CIERRA #maempr23;
    |SI SwError = 1;
        |MENAV "0000Existen datos en Personas Fisicas Asimiladas.";
        |MENAV "0000No puede informar datos en este cuadro";
    |FINSI;
|FPRC;

|PROGRAMA;
     |DBASS aPath; |QBF aPath;
     |PATH_DAT #agicontr#aAlfa#;

     |ABRE #agicontr;
     |DDEFECTO #agicontr;
     |LEE 040#agicontr.p;
     |CIERRA #agicontr;
     aAlfa = #agicontr#8;  |QBF aAlfa;
     |SI aAlfa = ""; |O aAlfa = "*";
         aAlfa = aPath + "agicli/fich/";
     |FINSI;
     aPath = aAlfa;

     #maempz22#0 = 0;
     |BUCLE SumaParticipacion;

     |HAZ ComprobarOtro;
     |SI SwError = 1; |ACABA; |FINSI;

     |PINPA #0#maempr22;
     |PINTA 2374, #maempz22#0;
     |SI modo = 4;
         |ENTLINEAL #1#maempr22, -3, 4, 21, 0, inferior, superior;
     |SINO;
         |ENTLINEAL #1#maempr22, -3, 2, 21, 0, inferior, superior;
     |FINSI;
|FPRO;
