|FICHEROS;
      datfic0@;
      datfic1@;
      datfic2@;
      datfic3@;
      datfic4@;

     &refere1@;
     &refere2@;
     &refere3@;
|FIN;

|VARIABLES;
      aDef             = "";
      aAlfa            = "";
      aFichero         = "";
      aContri          = "";

      nCoefi           = 0;
      nSwFich          = 0;
      nLinea           = 0;
      nCampo           = 0;
      nCampo1          = 0;
      nCampo2          = 0;
      nValor           = 0;
      nImporte         = 0;

     &enEmpresa        = 0;
     &enComplementaria = 0;
     &eaPathDef        = "";
     &eaContri         = "";
     &enMinusvalia     = 0;
     &eaMinuAyuda      = "";
     &enBloque         = 0;
     &eaCasilla        = "";
     &enImporte        = 0;
     &enSwAcum         = 0;
     &enNomeDat        = 0;
     &enNomeAgr        = 0;
     &eaMuerto         = "";
     &efFechaMuerto    = @;
     &enCalcuMuerto    = 0;
     &eaPrograma       = "";
     &enLinea          = 0;
     &eaObserva        = "";
|FIN;

|| 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
||                        PUNTO F1
|| 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

|PROCESO LiquidaF1;
     || datfic0 = "rem00058";
     || datfic1 = "rem01022";
     || datfic2 = "rem01026";
     || datfic3 = "rem01018";
     || datfic4 = "rem01033";

     aContri = eaContri;
     |SI #refere1@#2 = "CONJUNTA  ";
         aContri = #datfic0@#2;
         |SI aContri = "VARIOS    ";  aContri = "COMUNES";  |FINSI;
         |SI aContri = "GANANCIAL ";  aContri = "COMUNES";  |FINSI;
     |FINSI;

     |SELECT #2#datfic1@;
     #datfic1@#0  = #refere1@#0;
     #datfic1@#1  = #refere1@#1;
     #datfic1@#2  = #refere1@#2;
     #datfic1@#4  = #datfic0@#12;
     #datfic1@#5  = aContri;
     #datfic1@#6  = #datfic0@#11;
     #datfic1@#35 = #datfic0@#13;
     |LEE 040#datfic1@.=;
     |SI FSalida = 0;
         nLinea = #datfic1@#3;
     |SINO;
         |SELECT #1#datfic1@;

         #datfic1@#0 = #refere1@#0;
         #datfic1@#1 = #refere1@#1;
         #datfic1@#2 = #refere1@#2;
         #datfic1@#3 = 99;
         |LEE 040#datfic1@.];
         |SI FSalida = 0;
             |LEE 040#datfic1@.a;
         |SINO;
             |LEE 040#datfic1@.u;
         |FINSI;

         |SI FSalida = 0; |Y #datfic1@#0 = #refere1@#0; |Y #datfic1@#1 = #refere1@#1; |Y #datfic1@#2 = #refere1@#2;
             nLinea = #datfic1@#3 + 1;
         |SINO;
             nLinea = 1;
         |FINSI;
     |FINSI;

     #datfic2@#0 = #refere1@#0;
     #datfic2@#1 = #refere1@#1;
     #datfic2@#2 = #refere1@#2;
     |LEE 101#datfic2@.=;
     |SI FSalida ! 0;
         |DDEFECTO #datfic2@;
         #datfic2@#0 = #refere1@#0;
         #datfic2@#1 = #refere1@#1;
         #datfic2@#2 = #refere1@#2;
         |GRABA 020#datfic2@.b;
     |FINSI;

     #datfic1@#0  = #refere1@#0;
     #datfic1@#1  = #refere1@#1;
     #datfic1@#2  = #refere1@#2;
     #datfic1@#3  = nLinea;
     |LEE 101#datfic1@.=;
     |SI FSalida ! 0;
         |DDEFECTO #datfic1@;
         #datfic1@#0  = #refere1@#0;
         #datfic1@#1  = #refere1@#1;
         #datfic1@#2  = #refere1@#2;
         #datfic1@#3  = nLinea;
         |GRABA 020#datfic1@.b;
     |FINSI;

     #datfic1@#4  = aContri;
     #datfic1@#5  = #datfic0@#12;
     #datfic1@#35 = #datfic0@#13;

     |SI #datfic0@#16 = "N";
         #datfic1@#6 = "X";
     |FINSI;

     #datfic1@#7  = #datfic0@#11;

     #datfic1@#8  = (N\ #datfic1@#8  + (#datfic0@#17 % nCoefi));
     #datfic1@#9  = (N\ #datfic1@#9  + (#datfic0@#18 % nCoefi));
     #datfic1@#10 = (N\ #datfic1@#10 + (#datfic0@#19 % nCoefi));
     #datfic1@#11 = (N\ #datfic1@#11 + (#datfic0@#20 % nCoefi));
     #datfic1@#12 = (N\ #datfic1@#12 + (#datfic0@#21 % nCoefi));
     #datfic1@#13 = (N\ #datfic1@#13 + (#datfic0@#22 % nCoefi));

     #datfic1@#14 = (N\ #datfic1@#14 + (#datfic0@#23 % nCoefi));
     #datfic1@#15 = (N\ #datfic1@#15 + (#datfic0@#24 % nCoefi));
     #datfic1@#16 = (N\ #datfic1@#16 + (#datfic0@#25 % nCoefi));
     #datfic1@#17 = (N\ #datfic1@#17 + (#datfic0@#26 % nCoefi));
     #datfic1@#18 = (N\ #datfic1@#18 + (#datfic0@#27 % nCoefi));
     #datfic1@#19 = (N\ #datfic1@#19 + (#datfic0@#28 % nCoefi));
     #datfic1@#21 = (N\ #datfic1@#21 + (#datfic0@#30 % nCoefi));
     #datfic1@#36 =  #datfic0@#49;
     #datfic1@#22 = (N\ #datfic1@#22 + (#datfic0@#31 % nCoefi));
     #datfic1@#23 = (N\ #datfic1@#23 + (#datfic0@#32 % nCoefi));
     #datfic1@#24 = (N\ #datfic1@#24 + (#datfic0@#33 % nCoefi));
     #datfic1@#25 = (N\ #datfic1@#25 + (#datfic0@#36 % nCoefi));
     #datfic1@#26 = (N\ #datfic1@#26 + (#datfic0@#37 % nCoefi));
     #datfic1@#27 = (N\ #datfic1@#27 + (#datfic0@#38 % nCoefi));
     #datfic1@#28 = (N\ #datfic1@#28 + (#datfic0@#39 % nCoefi));
     #datfic1@#29 = (N\ #datfic1@#29 + (#datfic0@#40 % nCoefi));
     #datfic1@#30 = (N\ #datfic1@#30 + (#datfic0@#41 % nCoefi));
     #datfic1@#31 = (N\ #datfic1@#31 + (#datfic0@#42 % nCoefi));
     #datfic1@#32 = (N\ #datfic1@#32 + (#datfic0@#43 % nCoefi));
     #datfic1@#33 = (N\ #datfic1@#33 + (#datfic0@#44 % nCoefi));

     |SI #datfic0@#13 = 3;
         |SI #datfic2@#13 ! -1;
             #datfic1@#34 = (N\ #datfic1@#34 + (#datfic2@#12 - #datfic2@#13));
             |SI #datfic1@#34 < 0;  #datfic1@#34 = 0;  |FINSI;
         |FINSI;
         #datfic2@#13 = -1;
     |SINO;
         #datfic1@#34 = (N\ #datfic1@#34 + (#datfic0@#45 % nCoefi));
     |FINSI;

     #datfic1@#34 = (N\ #datfic1@#34 + (#datfic0@#46 % nCoefi));

     |GRABA 020#datfic1@.a;
     |LIBERA #datfic1@;

     #datfic2@#3   = (N\ #datfic2@#3  + (#datfic0@#20 % nCoefi));
     #datfic2@#4   = (N\ #datfic2@#4  + (#datfic0@#21 % nCoefi));
     #datfic2@#5   = (N\ #datfic2@#5  + (#datfic0@#22 % nCoefi));

     || Corregir para el 2016 se han puesto los campos alfa !!!!

     nImporte      = #datfic2@#6;
     nImporte      = nImporte + ((#datfic0@#26 % nCoefi) ! 2);
     #datfic2@#6   = nImporte;

     nImporte      = #datfic2@#8;
     nImporte      = nImporte + ((#datfic0@#31 % nCoefi) ! 2);
     #datfic2@#8   = nImporte;

     nImporte      = #datfic2@#9;
     nImporte      = nImporte + ((#datfic0@#32 % nCoefi) ! 2);
     #datfic2@#9   = nImporte;

     nImporte      = #datfic2@#10;
     nImporte      = nImporte + ((#datfic0@#43 % nCoefi) ! 2);
     #datfic2@#10  = nImporte;

     nImporte      = #datfic2@#11;
     nImporte      = nImporte + ((#datfic0@#44 % nCoefi) ! 2);
     #datfic2@#11  = nImporte;

     nImporte      = #datfic2@#12;
     nImporte      = nImporte + ((#datfic0@#45 % nCoefi) ! 2);
     nImporte      = nImporte + ((#datfic0@#46 % nCoefi) ! 2);
     #datfic2@#12  = nImporte;

     #datfic2@#23  = (N\ #datfic2@#23 + (#datfic0@#17 % nCoefi));
     #datfic2@#24  = (N\ #datfic2@#24 + (#datfic0@#23 % nCoefi));
     #datfic2@#25  = (N\ #datfic2@#25 + (#datfic0@#27 % nCoefi));

     |SI #datfic2@#13 ! -1;
         #datfic2@#13  = (N\ #datfic2@#13 + (#datfic0@#45 % nCoefi));
         #datfic2@#13  = (N\ #datfic2@#13 + (#datfic0@#46 % nCoefi));
     |FINSI;

     |GRABA 020#datfic2@.a;
     |LIBERA #datfic2@;

     #datfic3@#0 = #refere1@#0;
     #datfic3@#1 = #refere1@#1;
     #datfic3@#2 = #refere1@#2;
     |LEE 101#datfic3@.=;
     |SI FSalida ! 0;
         |DDEFECTO #datfic3@;
         #datfic3@#0 = #refere1@#0;
         #datfic3@#1 = #refere1@#1;
         #datfic3@#2 = #refere1@#2;
         |GRABA 020#datfic3@.b;
     |FINSI;

     #datfic3@#8   = (N\ #datfic3@#8  + ((#datfic0@#17 + #datfic0@#23 + #datfic0@#27) % nCoefi));
     #datfic3@#9   = (N\ #datfic3@#9  + (#datfic0@#33 % nCoefi));

     |SI #datfic0@#30 > 0;
         #datfic3@#6   = (N\ #datfic3@#6  + (#datfic0@#30 % nCoefi));
     |FINSI;

     |GRABA 020#datfic3@.a;
     |LIBERA #datfic3@;

     |SI #datfic0@#31 ! 0;  |O #datfic0@#32 ! 0;  |O #datfic0@#33 ! 0;
      |O #datfic0@#34 ! 0;  |O #datfic0@#35 ! 0;  |O #datfic0@#36 ! 0;
      |O #datfic0@#37 ! 0;  |O #datfic0@#38 ! 0;  |O #datfic0@#39 ! 0;
      |O #datfic0@#40 ! 0;  |O #datfic0@#41 ! 0;  |O #datfic0@#42 ! 0;
      |O #datfic0@#43 ! 0;  |O #datfic0@#44 ! 0;
         #datfic4@#0 = #refere1@#0;
         #datfic4@#1 = #refere1@#1;
         #datfic4@#2 = #refere1@#2;
         |LEE 101#datfic4@.=;
         |SI FSalida ! 0;
             |DDEFECTO #datfic4@;
             #datfic4@#0 = #refere1@#0;
             #datfic4@#1 = #refere1@#1;
             #datfic4@#2 = #refere1@#2;
             |GRABA 020#datfic4@.b;
         |FINSI;

         |SI #datfic0@#36 ! 0;
             #datfic4@#12 = (N\ #datfic4@#12 + (#datfic0@#33 % nCoefi));
             #datfic4@#13 = (N\ #datfic4@#13 + (#datfic0@#33 % nCoefi));
             #datfic4@#14 = (N\ #datfic4@#14 + (#datfic0@#34 % nCoefi));
             #datfic4@#15 = (N\ #datfic4@#15 + (#datfic0@#35 % nCoefi));
             #datfic4@#17 = (N\ #datfic4@#17 + (#datfic0@#39 % nCoefi));
         |FINSI;

         |GRABA 020#datfic4@.a;
         |LIBERA #datfic4@;

         enSwAcum  = 0;
         enBloque  = 23;
         eaCasilla = "354";  enImporte = #datfic4@#12;   |HAZ GrabaLineal;
         eaCasilla = "355";  enImporte = #datfic4@#13;   |HAZ GrabaLineal;
         eaCasilla = "356";  enImporte = #datfic4@#14;   |HAZ GrabaLineal;
         eaCasilla = "357";  enImporte = #datfic4@#15;   |HAZ GrabaLineal;
         eaCasilla = "359";  enImporte = #datfic4@#17;   |HAZ GrabaLineal;
     |FINSI;

     |SI #datfic0@#47 ! 0;
         enSwAcum  = 1;
         enBloque  = 42;
         eaCasilla = "531";
         enImporte = (#datfic0@#47 % nCoefi) - (#datfic0@#46 % nCoefi);
         |HAZ GrabaLineal;
     |FINSI;

     enSwAcum  = 0;
     enBloque  = 8;
     eaCasilla = "212";  enImporte = #datfic2@#3;   |HAZ GrabaLineal;
     eaCasilla = "213";  enImporte = #datfic2@#4;   |HAZ GrabaLineal;
     eaCasilla = "214";  enImporte = #datfic2@#5;   |HAZ GrabaLineal;
     eaCasilla = "215";  enImporte = #datfic2@#6;   |HAZ GrabaLineal;
     eaCasilla = "217";  enImporte = #datfic2@#8;   |HAZ GrabaLineal;
     eaCasilla = "218";  enImporte = #datfic2@#9;   |HAZ GrabaLineal;
     eaCasilla = "219";  enImporte = #datfic2@#10;  |HAZ GrabaLineal;
     eaCasilla = "220";  enImporte = #datfic2@#11;  |HAZ GrabaLineal;
     eaCasilla = "537";  enImporte = #datfic2@#12;  |HAZ GrabaLineal;

     enBloque  = 43;
     eaCasilla = "537";  enImporte = #datfic2@#12;   |HAZ GrabaLineal;
|FPRC;

|| 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
||                        PUNTO F2
|| 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

|PROCESO LiquidaF2;
     || datfic0 = "rem00032";
     || datfic1 = "rem01023";
     || datfic2 = "rem01026";

     #datfic1@#0 = #refere1@#0;
     #datfic1@#1 = #refere1@#1;
     #datfic1@#2 = #refere1@#2;
     #datfic1@#3 = 99;
     |LEE 040#datfic1@.];
     |SI FSalida = 0;
         |LEE 040#datfic1@.a;
     |SINO;
         |LEE 040#datfic1@.u;
     |FINSI;

     |SI FSalida = 0; |Y #datfic1@#0 = #refere1@#0; |Y #datfic1@#1 = #refere1@#1; |Y #datfic1@#2 = #refere1@#2;
         nLinea = #datfic1@#3 + 1;
     |SINO;
         nLinea = 1;
     |FINSI;

     |DDEFECTO #datfic1@;
     #datfic1@#0  = #refere1@#0;
     #datfic1@#1  = #refere1@#1;
     #datfic1@#2  = #refere1@#2;
     #datfic1@#3  = nLinea;
     #datfic1@#6  = #datfic0@#11;
     #datfic1@#4  = eaContri;
     |SI #datfic1@#2 = "CONJUNTA  ";
         #datfic1@#4 = #datfic0@#2;
         |SI #datfic1@#4 = "VARIOS    ";  #datfic1@#4 = "COMUNES";  |FINSI;
         |SI #datfic1@#4 = "GANANCIAL ";  #datfic1@#4 = "COMUNES";  |FINSI;
     |FINSI;

                      #datfic1@#19 = " ";
     |SI #datfic0@#13 = "C"; #datfic1@#19 = "1";  |FINSI;
     |SI #datfic0@#13 = "F"; #datfic1@#19 = "2";  |FINSI;

     #datfic1@#7  = (N\ #datfic0@#14 % nCoefi);
     #datfic1@#11 = (N\ #datfic0@#18 % nCoefi);
     #datfic1@#12 = (N\ #datfic0@#19 % nCoefi);
     #datfic1@#8  = (N\ #datfic0@#15 % nCoefi);
     #datfic1@#10 = (N\ #datfic0@#17 % nCoefi);
     #datfic1@#13 = (N\ #datfic0@#20 % nCoefi);

     |GRABA 020#datfic1@.n;
     |LIBERA #datfic1@;

     #datfic2@#0 = #refere1@#0;
     #datfic2@#1 = #refere1@#1;
     #datfic2@#2 = #refere1@#2;
     |LEE 101#datfic2@.=;
     |SI FSalida ! 0;
         |DDEFECTO #datfic2@;
         #datfic2@#0 = #refere1@#0;
         #datfic2@#1 = #refere1@#1;
         #datfic2@#2 = #refere1@#2;
         |GRABA 020#datfic2@.b;
     |FINSI;

     #datfic2@#14 = (N\ #datfic2@#14 + (#datfic0@#14 % nCoefi));
     #datfic2@#16 = (N\ #datfic2@#16 + (#datfic0@#20 % nCoefi));
     |GRABA 020#datfic2@.a;
     |LIBERA #datfic2@;

     enSwAcum  = 0;
     enBloque  = 9;
     eaCasilla = "235";  enImporte = #datfic2@#14;   |HAZ GrabaLineal;
     eaCasilla = "538";  enImporte = #datfic2@#16;   |HAZ GrabaLineal;

     enBloque  = 43;
     eaCasilla = "538";  enImporte = #datfic2@#16;   |HAZ GrabaLineal;
|FPRC;

|| 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
||                        PUNTO F3
|| 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

|PROCESO LiquidaF3;
     || datfic0 = "rem00033";
     || datfic1 = "rem01024";
     || datfic2 = "rem01026";

     #datfic1@#0 = #refere1@#0;
     #datfic1@#1 = #refere1@#1;
     #datfic1@#2 = #refere1@#2;
     #datfic1@#3 = 99;
     |LEE 040#datfic1@.];
     |SI FSalida = 0;
         |LEE 040#datfic1@.a;
     |SINO;
         |LEE 040#datfic1@.u;
     |FINSI;

     |SI FSalida = 0; |Y #datfic1@#0 = #refere1@#0; |Y #datfic1@#1 = #refere1@#1; |Y #datfic1@#2 = #refere1@#2;
         nLinea = #datfic1@#3 + 1;
     |SINO;
         nLinea = 1;
     |FINSI;

     |DDEFECTO #datfic1@;
     #datfic1@#0  = #refere1@#0;
     #datfic1@#1  = #refere1@#1;
     #datfic1@#2  = #refere1@#2;
     #datfic1@#3  = nLinea;
     #datfic1@#4  = #datfic0@#11;
     #datfic1@#5  = eaContri;
     |SI #datfic1@#2 = "CONJUNTA  ";
         #datfic1@#5 = #datfic0@#2;
         |SI #datfic1@#5 = "VARIOS    ";  #datfic1@#5 = "COMUNES";  |FINSI;
         |SI #datfic1@#5 = "GANANCIAL ";  #datfic1@#5 = "COMUNES";  |FINSI;
     |FINSI;

     #datfic1@#6 = " ";
     |SI #datfic0@#12 = "C";  #datfic1@#6 = "2";  |FINSI;
     |SI #datfic0@#12 = "F";  #datfic1@#6 = "1";  |FINSI;

     #datfic1@#8  = (N\ #datfic0@#13 % nCoefi);
     #datfic1@#9  = (N\ #datfic0@#14 % nCoefi);
     #datfic1@#10 = (N\ #datfic0@#15 % nCoefi);

     |GRABA 020#datfic1@.n;
     |LIBERA #datfic1@;

     #datfic2@#0 = #refere1@#0;
     #datfic2@#1 = #refere1@#1;
     #datfic2@#2 = #refere1@#2;
     |LEE 101#datfic2@.=;
     |SI FSalida ! 0;
         |DDEFECTO #datfic2@;
         #datfic2@#0 = #refere1@#0;
         #datfic2@#1 = #refere1@#1;
         #datfic2@#2 = #refere1@#2;
         |GRABA 020#datfic2@.b;
     |FINSI;

     #datfic2@#17 = (N\ #datfic2@#17 + (#datfic0@#15 % nCoefi));
     |GRABA 020#datfic2@.a;
     |LIBERA #datfic2@;

     enSwAcum  = 0;
     enBloque  = 10;
     eaCasilla = "240";  enImporte = #datfic2@#17;   |HAZ GrabaLineal;
|FPRC;

|| 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
||                        PUNTO F4
|| 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

|PROCESO LiquidaF4;
     || datfic0 = "rem00034";
     || datfic1 = "rem01026";

     #datfic1@#0 = #refere1@#0;
     #datfic1@#1 = #refere1@#1;
     #datfic1@#2 = #refere1@#2;
     |LEE 101#datfic1@.=;
     |SI FSalida ! 0;
         |DDEFECTO #datfic1@;
         #datfic1@#0 = #refere1@#0;
         #datfic1@#1 = #refere1@#1;
         #datfic1@#2 = #refere1@#2;
         |GRABA 020#datfic1@.b;
     |FINSI;

     #datfic1@#18  = eaContri;
     |SI #datfic1@#2 = "CONJUNTA  ";  #datfic1@#18 = #datfic0@#2;  |FINSI;

     #datfic1@#19 = #datfic0@#11;
     #datfic1@#20 = #datfic0@#12;
     #datfic1@#21 = (N\ #datfic1@#21 + (#datfic0@#13 % nCoefi));
     |GRABA 020#datfic1@.a;
     |LIBERA #datfic1@;

     enSwAcum  = 0;
     enBloque  = 11;
     eaCasilla = "244";  enImporte = #datfic1@#21;   |HAZ GrabaLineal;

     enSwAcum  = 1;
     enBloque  = 42;
     eaCasilla = "530";
     enImporte = (#datfic0@#14 % nCoefi);   |HAZ GrabaLineal;

     enBloque  = 43;
     eaCasilla = "539";
     enImporte = (#datfic0@#15 % nCoefi);   |HAZ GrabaLineal;
|FPRC;

|| 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
||                        PUNTO F5
|| 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

|PROCESO LiquidaF5;
     || datfic0 = "rem00035";
     || datfic1 = "rem01025";
     || datfic2 = "rem01026";

     #datfic1@#0 = #refere1@#0;
     #datfic1@#1 = #refere1@#1;
     #datfic1@#2 = #refere1@#2;
     #datfic1@#3 = 99;
     |LEE 040#datfic1@.];
     |SI FSalida = 0;
         |LEE 040#datfic1@.a;
     |SINO;
         |LEE 040#datfic1@.u;
     |FINSI;

     |SI FSalida = 0; |Y #datfic1@#0 = #refere1@#0; |Y #datfic1@#1 = #refere1@#1; |Y #datfic1@#2 = #refere1@#2;
         nLinea = #datfic1@#3 + 1;
     |SINO;
         nLinea = 1;
     |FINSI;

     |DDEFECTO #datfic1@;
     #datfic1@#0  = #refere1@#0;
     #datfic1@#1  = #refere1@#1;
     #datfic1@#2  = #refere1@#2;
     #datfic1@#3  = nLinea;
     #datfic1@#4  = #datfic0@#11;
     #datfic1@#5  = eaContri;
     |SI #datfic1@#2 = "CONJUNTA  ";
         #datfic1@#5 = #datfic0@#2;
         |SI #datfic1@#5 = "VARIOS    ";  #datfic1@#5 = "COMUNES";  |FINSI;
         |SI #datfic1@#5 = "GANANCIAL ";  #datfic1@#5 = "COMUNES";  |FINSI;
     |FINSI;

     #datfic1@#6  = (N\ #datfic0@#12 % nCoefi);
     #datfic1@#7  = (N\ #datfic0@#13 % nCoefi);
     #datfic1@#8  = (N\ #datfic0@#14 % nCoefi);

     |GRABA 020#datfic1@.n;
     |LIBERA #datfic1@;

     #datfic2@#0 = #refere1@#0;
     #datfic2@#1 = #refere1@#1;
     #datfic2@#2 = #refere1@#2;
     |LEE 101#datfic2@.=;
     |SI FSalida ! 0;
         |DDEFECTO #datfic2@;
         #datfic2@#0 = #refere1@#0;
         #datfic2@#1 = #refere1@#1;
         #datfic2@#2 = #refere1@#2;
         |GRABA 020#datfic2@.b;
     |FINSI;

     #datfic2@#22 = (N\ #datfic2@#22 + (#datfic0@#14 % nCoefi));
     |GRABA 020#datfic2@.a;
     |LIBERA #datfic2@;

     enSwAcum  = 0;
     enBloque  = 12;
     eaCasilla = "250";  enImporte = #datfic2@#22;   |HAZ GrabaLineal;
|FPRC;

|| 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
||                   PROCESOS DE SELECCION
|| 컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

|PROCESO Liquida3;
     |HAZ CreaLiquida;               || En el rezcalut

     |SI nSwFich = 1;  |HAZ LiquidaF1;  |FINSI;
     |SI nSwFich = 2;  |HAZ LiquidaF2;  |FINSI;
     |SI nSwFich = 3;  |HAZ LiquidaF3;  |FINSI;
     |SI nSwFich = 4;  |HAZ LiquidaF4;  |FINSI;
     |SI nSwFich = 5;  |HAZ LiquidaF5;  |FINSI;
|FPRC;

|PROCESO Seleccion3;
     |SI #datfic0@#2 = "GANANCIAL ";                || Si es Ganancial
         nCoefi = 50;  eaContri = "TITULAR   ";   |HAZ Liquida3;
         nCoefi = 50;  eaContri = "CONYUGE   ";   |HAZ Liquida3;
         nCoefi = 100; eaContri = "CONJUNTA  ";   |HAZ Liquida3;

         |SI eaMuerto ! "";
             nCoefi = 50;  eaContri = "CONJUNTAE ";   |HAZ Liquida3;
         |FINSI;

         |ACABA;
     |FINSI;

     |SI #datfic0@#2 ! "VARIOS    ";                || SI es TITULAR O CONYUGE;
         nCoefi = 100;  eaContri = #datfic0@#2;          |HAZ Liquida3;
         nCoefi = 100;  eaContri = "CONJUNTA  ";  |HAZ Liquida3;

         |SI eaMuerto = "T";  |Y #datfic0@#2 ! "TITULAR   ";
             nCoefi = 100;  eaContri = "CONJUNTAE ";   |HAZ Liquida3;
         |FINSI;

         |SI eaMuerto = "C";  |Y #datfic0@#2 ! "CONYUGE   ";
             nCoefi = 100;  eaContri = "CONJUNTAE ";   |HAZ Liquida3;
         |FINSI;
         |ACABA;
     |FINSI;
                                             || SI es Varios

     |SI #datfic0@#5  ! 0; nCoefi = #datfic0@#5;   eaContri = "TITULAR   ";  |HAZ Liquida3;  |FINSI;
     |SI #datfic0@#6  ! 0; nCoefi = #datfic0@#6;   eaContri = "CONYUGE   ";  |HAZ Liquida3;  |FINSI;
     |SI #datfic0@#7  ! 0; nCoefi = #datfic0@#7;   eaContri = "1 FAMILIAR";  |HAZ Liquida3;  |FINSI;
     |SI #datfic0@#8  ! 0; nCoefi = #datfic0@#8;   eaContri = "2 FAMILIAR";  |HAZ Liquida3;  |FINSI;
     |SI #datfic0@#9  ! 0; nCoefi = #datfic0@#9;   eaContri = "3 FAMILIAR";  |HAZ Liquida3;  |FINSI;
     |SI #datfic0@#10 ! 0; nCoefi = #datfic0@#10;  eaContri = "4 FAMILIAR";  |HAZ Liquida3;  |FINSI;

     nCoefi  = #datfic0@#5 + #datfic0@#6 + #datfic0@#7 + #datfic0@#8 + #datfic0@#9 + #datfic0@#10;
     eaContri = "CONJUNTA  "; |HAZ Liquida3;

     |SI eaMuerto = "T";
         nCoefi  = #datfic0@#6 + #datfic0@#7 + #datfic0@#8 + #datfic0@#9 + #datfic0@#10;
         eaContri = "CONJUNTAE "; |HAZ Liquida3;
     |FINSI;

     |SI eaMuerto = "C";
         nCoefi  = #datfic0@#5 + #datfic0@#7 + #datfic0@#8 + #datfic0@#9 + #datfic0@#10;
         eaContri = "CONJUNTAE "; |HAZ Liquida3;
     |FINSI;
|FPRC;

|PROCESO PuntoF1;
     nSwFich = 1;
     aDef    = eaPathDef + "rem00058.mas";
     |CARGA_DEF aDef, datfic0@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeAgr = 1;
         |NOME_DAT #datfic0@#"zzm00058"#;
     |FINSI;

     aDef    = eaPathDef + "rem01022.mas";
     |CARGA_DEF aDef, datfic1@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #datfic1@#"zdat1022"#;  |FINSI;

     aDef    = eaPathDef + "rem01026.mas";
     |CARGA_DEF aDef, datfic2@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #datfic2@#"zdat1026"#;  |FINSI;

     aDef    = eaPathDef + "rem01018.mas";
     |CARGA_DEF aDef, datfic3@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #datfic3@#"zdat1018"#;  |FINSI;

     aDef    = eaPathDef + "rem01033.mas";
     |CARGA_DEF aDef, datfic4@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #datfic4@#"zdat1033"#;  |FINSI;

     |ABRE #datfic0@;
     |ABRE #datfic1@;
     |ABRE #datfic2@;
     |ABRE #datfic3@;
     |ABRE #datfic4@;
     |DDEFECTO #datfic0@;

     #datfic0@#0 = enEmpresa;
     #datfic0@#1 = 1;
     |LEE 040#datfic0@.];
     |PARA; |SI FSalida = 0;  |Y #datfic0@#0 = enEmpresa;  |HACIENDO;
            |SI #datfic0@#3 = "R";   |O #datfic0@#3 = "A";  |HAZ Seleccion3;  |FINSI;
            |SI #datfic0@#3 = "X";
                eaPrograma = "rem00058";
                enLinea    = #datfic0@#1;
                eaObserva  = "(F1) ATRIBUCIONES DE RENTA";
                |HAZ Graba1003;
            |FINSI;
            |LEE 040#datfic0@.s;
     |SIGUE;
     |CIERRA #datfic0@;
     |CIERRA #datfic1@;
     |CIERRA #datfic2@;
     |CIERRA #datfic3@;
     |CIERRA #datfic4@;

     |DESCARGA_DEF #datfic4@;
     |DESCARGA_DEF #datfic3@;
     |DESCARGA_DEF #datfic2@;
     |DESCARGA_DEF #datfic1@;
     |DESCARGA_DEF #datfic0@;
|FPRC;

|PROCESO PuntoF2;
     nSwFich = 2;
     aDef    = eaPathDef + "rem00032.mas";
     |CARGA_DEF aDef, datfic0@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef    = eaPathDef + "rem01023.mas";
     |CARGA_DEF aDef, datfic1@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #datfic1@#"zdat1023"#;  |FINSI;

     aDef    = eaPathDef + "rem01026.mas";
     |CARGA_DEF aDef, datfic2@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #datfic2@#"zdat1026"#;  |FINSI;

     |ABRE #datfic0@;
     |ABRE #datfic1@;
     |ABRE #datfic2@;
     |DDEFECTO #datfic0@;
     #datfic0@#0 = enEmpresa;
     #datfic0@#1 = 1;
     |LEE 040#datfic0@.];
     |PARA; |SI FSalida = 0;  |Y #datfic0@#0 = enEmpresa;  |HACIENDO;
            |SI #datfic0@#3 = "R";   |O #datfic0@#3 = "A";  |HAZ Seleccion3;  |FINSI;
            |SI #datfic0@#3 = "X";
                eaPrograma = "rem00032";
                enLinea    = #datfic0@#1;
                eaObserva  = "IMPUTACIONES DE AGRUPACIONES DE INTERES ECONOMICO Y UNIONES TEMPORALES DE EMPRESAS";
                |HAZ Graba1003;
            |FINSI;
            |LEE 040#datfic0@.s;
     |SIGUE;
     |CIERRA #datfic0@;
     |CIERRA #datfic1@;
     |CIERRA #datfic2@;

     |DESCARGA_DEF #datfic2@;
     |DESCARGA_DEF #datfic1@;
     |DESCARGA_DEF #datfic0@;
|FPRC;

|PROCESO PuntoF3;
     nSwFich = 3;
     aDef    = eaPathDef + "rem00033.mas";
     |CARGA_DEF aDef, datfic0@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef    = eaPathDef + "rem01024.mas";
     |CARGA_DEF aDef, datfic1@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #datfic1@#"zdat1024"#;  |FINSI;

     aDef    = eaPathDef + "rem01026.mas";
     |CARGA_DEF aDef, datfic2@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #datfic2@#"zdat1026"#;  |FINSI;

     |ABRE #datfic0@;
     |ABRE #datfic1@;
     |ABRE #datfic2@;
     |DDEFECTO #datfic0@;
     #datfic0@#0 = enEmpresa;
     #datfic0@#1 = 1;
     |LEE 040#datfic0@.];
     |PARA; |SI FSalida = 0;  |Y #datfic0@#0 = enEmpresa;  |HACIENDO;
            |SI #datfic0@#3 = "R";   |O #datfic0@#3 = "A";  |HAZ Seleccion3;  |FINSI;
            |SI #datfic0@#3 = "X";
                eaPrograma = "rem00033";
                enLinea    = #datfic0@#1;
                eaObserva  = "(F3) TRANSPARENCIA FISCAL INTERNACIONAL";
                |HAZ Graba1003;
            |FINSI;
            |LEE 040#datfic0@.s;
     |SIGUE;
     |CIERRA #datfic0@;
     |CIERRA #datfic1@;
     |CIERRA #datfic2@;

     |DESCARGA_DEF #datfic2@;
     |DESCARGA_DEF #datfic1@;
     |DESCARGA_DEF #datfic0@;
|FPRC;

|PROCESO PuntoF4;
     nSwFich = 4;
     aDef    = eaPathDef + "rem00034.mas";
     |CARGA_DEF aDef, datfic0@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef    = eaPathDef + "rem01026.mas";
     |CARGA_DEF aDef, datfic1@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #datfic1@#"zdat1026"#;  |FINSI;

     |ABRE #datfic0@;
     |ABRE #datfic1@;
     |DDEFECTO #datfic0@;
     #datfic0@#0 = enEmpresa;
     #datfic0@#1 = 1;
     |LEE 040#datfic0@.];
     |PARA; |SI FSalida = 0;  |Y #datfic0@#0 = enEmpresa;  |HACIENDO;
            |SI #datfic0@#3 = "R";   |O #datfic0@#3 = "A";  |HAZ Seleccion3;  |FINSI;
            |SI #datfic0@#3 = "X";
                eaPrograma = "rem00034";
                enLinea    = #datfic0@#1;
                eaObserva  = "(F4) DERECHOS DE IMAGEN";
                |HAZ Graba1003;
            |FINSI;
            |LEE 040#datfic0@.s;
     |SIGUE;
     |CIERRA #datfic0@;
     |CIERRA #datfic1@;

     |DESCARGA_DEF #datfic1@;
     |DESCARGA_DEF #datfic0@;
|FPRC;

|PROCESO PuntoF5;
     nSwFich = 5;
     aDef    = eaPathDef + "rem00035.mas";
     |CARGA_DEF aDef, datfic0@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef    = eaPathDef + "rem01025.mas";
     |CARGA_DEF aDef, datfic1@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #datfic1@#"zdat1025"#;  |FINSI;

     aDef    = eaPathDef + "rem01026.mas";
     |CARGA_DEF aDef, datfic2@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def " + aDef;
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |SI enNomeDat = 1;  |NOME_DAT #datfic2@#"zdat1026"#;  |FINSI;

     |ABRE #datfic0@;
     |ABRE #datfic1@;
     |ABRE #datfic2@;
     |DDEFECTO #datfic0@;
     #datfic0@#0 = enEmpresa;
     #datfic0@#1 = 1;
     |LEE 040#datfic0@.];
     |PARA; |SI FSalida = 0;  |Y #datfic0@#0 = enEmpresa;  |HACIENDO;
            |SI #datfic0@#3 = "R";   |O #datfic0@#3 = "A";  |HAZ Seleccion3;  |FINSI;
            |SI #datfic0@#3 = "X";
                eaPrograma = "rem00035";
                enLinea    = #datfic0@#1;
                eaObserva  = "(F5) INSTITUCIONES DE INVERSION COLECTIVA";
                |HAZ Graba1003;
            |FINSI;
            |LEE 040#datfic0@.s;
     |SIGUE;
     |CIERRA #datfic0@;
     |CIERRA #datfic1@;
     |CIERRA #datfic2@;

     |DESCARGA_DEF #datfic2@;
     |DESCARGA_DEF #datfic1@;
     |DESCARGA_DEF #datfic0@;
|FPRC;

|PROCESO Bloque3;
     |HAZ PuntoF1;
     |HAZ PuntoF2;
     |HAZ PuntoF3;
     |HAZ PuntoF4;
     |HAZ PuntoF5;
|FPRC;
