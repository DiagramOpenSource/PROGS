|FICHEROS;
   agiz0005 #0;
   agiclgrl #1;

   agitrabc #2;
   agitrabl #3;

   agifigen #4;
   agiusuar #5;
   agitrabd #6;
|FIN;

|VARIABLES;
    linea = 0;
    empre = 0;
|FIN;

|INCLUYE i_consul;

|PROCESO agitrabl;
linea = #3#1;
|FPRC;

|PROCESO el_01;
|SI empre ! #1#0;
    linea = 0;
    empre = #1#0;

    #2#0  = #1#0;
    |LEE 040#2=;
    |SI FSalida = 0;
        |BUCLELIN 0agitrabl#2;
    |SINO;
        |ABRE #4;
        #4#0 = #1#0;
        |LEE 040#4=;
        |SI FSalida ! 0; |DDEFECTO #4; |FINSI;
        |CIERRA #4;

        #2#0 = #1#0;
        #2#1 = #4#1;
       |GRABA 040#2n;
    |FINSI;
|FINSI;

linea = linea + 1;

#5#0 = #1#11;
|LEE 040#5=;
|SI FSalida ! 0; |DDEFECTO #5; |FINSI;

#6#0 = #1#5;
#6#1 = #1#16;
|LEE 040#6=;
|SI FSalida ! 0; |DDEFECTO #6; |FINSI;

|ABRE #3;
|DDEFECTO #3;
#3#0  = #1#0;
#3#1  = linea;
#3#2  = #0#4;
#3#3  = 0;
#3#4  = 0;
#3#5  = #1#5;
#3#6  = #1#6;
#3#7  = #1#7;
#3#8  = #1#8;
#3#9  = #1#9;
#3#10 = #1#11;
#3#11 = #5#1;
#3#12 = #1#10;
#3#13 = #1#15;
#3#15 = #1#12;
#3#16 = #1#13;
#3#19 = #6#4;
#3#20 = #6#5;
#3#21 = 0;
#3#22 = #1#16;

|GRABA 040#3n;

|CIERRA #3;

#1#14 = "S";
|GRABA 140#1a;
|LIBERA #1;
|FPRC;

|DEFBUCLE agiclgrl;
#1#2;
14;
#0#0, #0#2, "N";
#0#1, #0#3, "N";
be;
NULL, el_01;
|FIN;

|PROCESO tipo_3; |TIPO 3;
|ABRE #2;
|ABRE #5;
|ABRE #6;
|BUCLE agiclgrl;
|CIERRA #2;
|CIERRA #5;
|CIERRA #6;
|FPRC;
