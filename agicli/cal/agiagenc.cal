|FICHEROS;
    agiagenc #0;
    agiagenl #1;
    agiusuar #2;
|FIN;

|VARIABLES;
    fecha_p  = @;
    cont     = 0;
    nombre   = "";
    codigo_f = 0;
    codigo_d = 0;
    nombre_d = "";
    nombre_f = "";
    sw_pasa  = 0;
    alfa     = "";
    fecha    = @;
    sw_borra = 0;
    campo    = 0;
    usu1     = "";
    usu2     = "";
    &fichero  = "";
    comienza  = "";
    xxx = 0;
|FIN;

|INCLUYE i_usuari;

|PROCESO Fichero;
|HAZ RecogeUsuario;

fichero = Usr;            |QBT fichero;
fichero = fichero % -106;
fichero = comienza + fichero;
fichero = (fichero + "zzzzzzzz") % 108;
|FPRC;

|RUTINA inferior;
#1#0 = #0#0;
#1#2 = #0#2;
#1#3 = 01;
#1#4 = 00;
#1#5 = 0;
|FRUT;

|RUTINA superior;
#1#0 = #0#0;
#1#2 = #0#2;
#1#3 = 23;
#1#4 = 59;
#1#5 = 99999;
|FRUT;

|PROCESO dia_sem; |TIPO 14;
|ATRI 0;
|PINTA 531, "лллллллллллллллл";
fecha = #0#0 % 1;
alfa  = fecha % 11;
|QBF alfa;
alfa = "- " + alfa + " -";

|ATRI I;
|PINTA 531, alfa;
|ATRI 0;
|FPRC;

|PROCESO en_consul; |TIPO 14;
cont = (FEntrada / 100) ! 0;

|HAZ RecogeUsuario;

|SI cont  ! 4; #0#2 = Usr; |FINSI;

usu1 = #0#2;    |QBF usu1;
usu2 = Usr;     |QBF usu2;

|SI usu1 ! usu2; |PINPA #0#1; |ACABA; |FINSI;

fecha_p = #0#0;
|ATRI I;
|PINTA 0717, fecha_p;
|PINTA #0#2;
|ATRI i;

|SI cont = 4; |HAZ mira_lineas; |FINSI;
|FPRC;

|PROCESO final; |TIPO 3;
|HAZ mira_lineas;
|FPRC;

|PROCESO mira_lineas;
cont = (FEntrada / 100) ! 0;
|SI cont = 1; |ENTLINEAL #1#1, 3, 1, 21, 0, inferior, superior; |FINSI;
|SI cont = 2; |ENTLINEAL #1#1, 3, 2, 21, 0, inferior, superior; |FINSI;
|SI cont = 3; |ENTLINEAL #1#1, 3, 4, 21, 0, inferior, superior; |FINSI;
|SI cont = 4; |ENTLINEAL #1#1, 3, 4, 21, 0, inferior, superior; |FINSI;
|FPRC;

|PROCESO mira_siborr;
|SI #1#11 = "N"; sw_borra = 1; |FINSI;
|SI #1#12 = "N"; sw_borra = 1; |FINSI;
|FPRC;

|DEFBUCLE seagendl_1;
#1#1;
;
#0#0, #0#2, 00, 00, 00000;
#0#0, #0#2, 23, 59, 99999;
e;
NULL, mira_siborr;
|FIN;

|PROCESO si_borro;
|BORRA 140#1a;
|LIBERA #1;
|FPRC;

|DEFBUCLE seagendl_2;
#1#1;
;
#0#0, #0#2, 00, 00, 00000;
#0#0, #0#2, 23, 59, 99999;
be;
NULL, si_borro;
|FIN;

|PROCESO baja_cab; |TIPO 2;
cont = (FEntrada / 100) ! 0;
|SI cont ! 3; |ACABA; |FINSI;

sw_borra = 0;
|BUCLE seagendl_1;

|SI sw_borra = 0;
    |BUCLE seagendl_2;
|SINO;
    |ERROR;
|FINSI;
|FPRC;

|| PROCESOS EN LINEAS

|PROCESO baja_lin; |TIPO 2;
cont = (FEntrada / 100) ! 0;
|SI cont ! 3; |ACABA; |FINSI;

|SI #1#11 = "N";
    |MENAV "      No se puede dar de baja la linea, NO ESTA VISADA";
    |ERROR;
|FINSI;

|SI #1#12 = "N";
    |MENAV "     No se puede dar de baja la linea, NO TIENE PERMISO DE BORRADO";
    |ERROR;
|FINSI;
|FPRC;

|PROCESO borra_var; |TIPO 7;
codigo_d = 0;
codigo_f = 0;
nombre_d = "";
nombre_f = "";
sw_pasa  = 0;
|FPRC;
