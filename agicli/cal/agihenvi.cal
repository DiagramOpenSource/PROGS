|FICHEROS;
     agihenvi #0;
     agiusuar #1;
|FIN;

|VARIABLES;
     usuario = "";
     clave   = "";
     pepe    = "²";
     horizo  = "";
     xxx     = 0;
     yyy     = 0;

 {-1}menu = "";
     menu1 = "2400";
     menu2 = "1";
     menu3 = "";
     menu4 = "CSAPU";
     menu5 = "   Clave   ";
     menu6 = " Siguiente ";
     menu7 = " Anterior ";
     menu8 = " Primera ";
     menu9 = "  Ultima  ";
|FIN;

|INCLUYE i_usuari;

|PROCESO password;
horizo = pepe * 80;
|PARA xxx = 5; |SI xxx [ 23; |HACIENDO xxx = xxx + 1;
      yyy = (xxx * 100) + 1;
      |PINTA yyy, horizo;
|SIGUE;

|CUADRO 1219 1456;
|PINTA 1320, "                                    ";
|PINTA 1320, "Introduzca Password :               ";

E_sup = 13;
clave = "";
clave = 1342 ? -1;

|HAZ RecogeUsuario;

usuario = Usr;
usuario = "agi" + usuario;
|QBF usuario;
|QBF clave;
|FPRC;

|PROGRAMA;
     |CLS;
     |CABEZA "Consulta H.Facturas";

     |HAZ password;

     |SI usuario ! clave;
         |MENAV "      Clave incorrecta.";
         |ACABA;
     |FINSI;

     |PINPA #0#0;
     |ABRE #0;
     FSalida = 999;
     |PARA; |SI FSalida > 0; |HACIENDO;
          |MENU menu;
          menu2 = FSalida;
          |SI FSalida = 0; |O FSalida = -1; |SAL; |FINSI;
          |SI FSalida = 1;    ||Clave
               |HAZ clave;
               |LEE 001#0];
               |SI FSalida ! 0;
                   |MENAV "     No existe Registro.";
               |FINSI;
          |FINSI;
          |SI FSalida = 2;    ||Siguiente
               |LEE 001#0s;
               |SI FSalida ! 0;
                    |MENAV "0000Ultima Ficha";
                    |LEE 001#0=;
               |FINSI;
          |FINSI;
          |SI FSalida = 3;    ||Anterior
               |LEE 001#0a;
               |SI FSalida ! 0;
                    |MENAV "0000Primera Ficha";
                    |LEE 001#0=;
               |FINSI;
          |FINSI;
          |SI FSalida = 4;    ||Primera
               |LEE 001#0p;
          |FINSI;
          |SI FSalida = 5;    ||Ultima
               |LEE 001#0u;
          |FINSI;
          |SI FSalida = 0;
              |PINDA #0#0;
              FSalida = 999;
          |FINSI;
     |SIGUE;
     |CIERRA #0;
|FPRO;

|PROCESO clave;
|CAMPO_MODIFICA #0#14 , 1 , "S";

|ET campo0;
    |ENCAMPO #14#0;
|FPRC;
