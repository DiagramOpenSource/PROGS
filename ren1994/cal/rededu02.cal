|FICHEROS;
   rededu02 #0;
   reparame #1;
|FIN;

|VARIABLES;
   pepe       = 0;
   modelito   = 0;
   &empresa   = 0;
   &modo      = 0;
   &indivi    = "";
|FIN;

|INCLUYE i_activo;

|RUTINA inferior;
  #0#0 = empresa;
  #0#1 = 1;
|FRUT;

|RUTINA superior;
  #0#0 = empresa;
  #0#1 = 99;
|FRUT;

|PROGRAMA;
|ABRE #0;
|PINPA #0#0;
|SI modo = 1;
    |ENTLINEAL #1#0,2,1,13,0,inferior,superior;
|FINSI;
|SI modo = 2;
    |ENTLINEAL #1#0,2,2,13,0,inferior,superior;
|FINSI;
|SI modo = 4;
    |ENTLINEAL #1#0,2,4,13,0,inferior,superior;
|FINSI;
|FPRO;

|PROCESO parametro; |TIPO 0;
modelito = (FEntrada / 100) ! 0;
|SI modelito = 1;
   |ABRE #1;
   |LEE 040#1=;
   |SI FSalida = 0;
      #0#2  = #1#6;
      #0#11 = #1#7;
      |PINTA #0#2;
      |PINTA #0#11;
   |FINSI;
   |CIERRA #1;
|FINSI;
|FPRC;

|PROCESO perceptor; |TIPO 0;
|CAMPO_MODIFICA #0#12, 1, "N";
|CAMPO_MODIFICA #0#13, 1, "N";
|CAMPO_MODIFICA #0#14, 1, "N";
|CAMPO_MODIFICA #0#15, 1, "N";
|CAMPO_MODIFICA #0#16, 1, "N";
|CAMPO_MODIFICA #0#17, 1, "N";

|SI indivi = "S"; |Y #0#2 ! "T";
    |MENAV "      La renta es individual";
    |ERROR; |ACABA;
|FINSI;

npro = 21; |HAZ sigrabo;

|SI #0#2 = "T"; #0#3 = "TITULAR  "; |FINSI;
|SI #0#2 = "C"; #0#3 = "CONYUGE  "; |FINSI;
|SI #0#2 = "G"; #0#3 = "GANANCIAL"; |FINSI;
|SI #0#2 = "1"; #0#3 = "FAMILIAR "; |FINSI;
|SI #0#2 = "2"; #0#3 = "FAMILIAR "; |FINSI;
|SI #0#2 = "3"; #0#3 = "FAMILIAR "; |FINSI;
|SI #0#2 = "4"; #0#3 = "FAMILIAR "; |FINSI;
|SI #0#2 = "V"; |Y #0#11 ! "X";
    #0#3 = "VARIOS ";
    |CAMPO_MODIFICA #0#12, 1, "S";
    |CAMPO_MODIFICA #0#13, 1, "S";
    |CAMPO_MODIFICA #0#14, 1, "S";
    |CAMPO_MODIFICA #0#15, 1, "S";
    |CAMPO_MODIFICA #0#16, 1, "S";
    |CAMPO_MODIFICA #0#17, 1, "S";
|FINSI;
|PINTA #0#3;
|FPRC;

|PROCESO deducci; |TIPO 0;
|SI #0#4 ! "AF"; |Y #0#4 ! "AE"; |Y #0#4 ! "GA"; |Y #0#4 ! "EL";
 |Y #0#4 ! "GI"; |Y #0#4 ! "BI"; |Y #0#4 ! "PC"; |Y #0#4 ! "FP";
 |Y #0#4 ! "FP"; |Y #0#4 ! "AG"; |Y #0#4 ! "AO"; |Y #0#4 ! "GF";
    |AVISO;
    |ERROR;
    |ACABA;
|FINSI;

|CAMPO_MODIFICA #0#5, 1, "N";
|CAMPO_MODIFICA #0#7, 1, "N";
|CAMPO_MODIFICA #0#8, 1, "S";

|SI #0#4 = "AF"; #0#7 = 5;  #0#5 = 35; |FINSI;
|SI #0#4 = "EL"; #0#7 = 5;  #0#5 = 35; |FINSI;
|SI #0#4 = "FP"; #0#7 = 5;  #0#5 = 25; |FINSI;
|SI #0#4 = "AE"; #0#7 = 25; #0#5 = 25; |FINSI;
|SI #0#4 = "PC"; #0#7 = 10; #0#5 = 35; |FINSI;
|SI #0#4 = "BI"; #0#7 = 10; #0#5 = 35; |FINSI;

|SI #0#4 = "GI";
    |CAMPO_MODIFICA #0#7, 1, "S";
    #0#7 = 15;
    #0#5 = 35;
|FINSI;

|SI #0#4 = "GA";
    |CAMPO_MODIFICA #0#7, 1, "S";
    #0#7 = 30;
    #0#5 = 35;
|FINSI;

|SI #0#4 = "AG"; |O #0#4 = "AO"; |O #0#4 = "GF";
    |CAMPO_MODIFICA #0#7, 1, "N";
    |CAMPO_MODIFICA #0#5, 1, "N";
    |CAMPO_MODIFICA #0#8, 1, "N";
    #0#7 = 0;
    #0#5 = 0;
    #0#8 = 0;
|FINSI;

|PINTA #0#5;
|PINTA #0#7;
|PINTA #0#8;
|FPRC;

|PROCESO aplicado; |TIPO 0;
|SI #0#4 = "AG"; |O #0#4 = "AO"; |O #0#4 = "GF";
    |ACABA;
|FINSI;

|SI #0#11 ! "X";
   #0#9  = #0#8 % #0#7;
   #0#10 = 0;
   |PINTA #0#9;
   |PINTA #0#10;
   pepe = #0#9;
|FINSI;
|FPRC;

|PROCESO error; |TIPO 0;
|SI #0#4 = "AG"; |O #0#4 = "AO"; |O #0#4 = "GF";
    |ACABA;
|FINSI;

|SI #0#11 ! "X";
   |SI pepe < #0#9;
       |MENAV "    Exceso sobre el Limite de Deduccion";
       |ERROR;
       |ACABA;
   |SINO;
       |SI #0#9 ! pepe;
           #0#10 = pepe - #0#9;
           |PINTA #0#10;
       |FINSI;
   |FINSI;
|FINSI;
|FPRC;

|PROCESO nomodi; |TIPO 0;
|SI #0#11 = "X";
    |CAMPO_MODIFICA #0#2, 1, "N";
    |CAMPO_MODIFICA #0#3, 1, "N";
    |CAMPO_MODIFICA #0#4, 1, "N";
    |CAMPO_MODIFICA #0#6, 1, "N";
    |CAMPO_MODIFICA #0#8, 1, "N";
    |CAMPO_MODIFICA #0#9, 1, "N";
    |CAMPO_MODIFICA #0#12, 1, "N";
    |CAMPO_MODIFICA #0#13, 1, "N";
    |CAMPO_MODIFICA #0#14, 1, "N";
    |CAMPO_MODIFICA #0#15, 1, "N";
    |CAMPO_MODIFICA #0#16, 1, "N";
    |CAMPO_MODIFICA #0#17, 1, "N";
    |CAMPO_MODIFICA #0#18, 1, "N";
    |CAMPO_MODIFICA #0#19, 1, "N";
|SINO;
    |CAMPO_MODIFICA #0#2, 1, "S";
    |CAMPO_MODIFICA #0#3, 1, "S";
    |CAMPO_MODIFICA #0#4, 1, "S";
    |CAMPO_MODIFICA #0#6, 1, "S";
    |CAMPO_MODIFICA #0#8, 1, "S";
    |CAMPO_MODIFICA #0#9, 1, "S";
    |CAMPO_MODIFICA #0#12, 1, "S";
    |CAMPO_MODIFICA #0#13, 1, "S";
    |CAMPO_MODIFICA #0#14, 1, "S";
    |CAMPO_MODIFICA #0#15, 1, "S";
    |CAMPO_MODIFICA #0#16, 1, "S";
    |CAMPO_MODIFICA #0#17, 1, "S";
    |CAMPO_MODIFICA #0#18, 1, "S";
    |CAMPO_MODIFICA #0#19, 1, "S";
|FINSI;
|FPRC;
