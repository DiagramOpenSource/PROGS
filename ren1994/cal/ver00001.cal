|FICHEROS;
    ver00001 #0;

    y1capinm #1;    || def nuevo Capital Inmobiliario
    x1capinm #2;    || def viejo Capital Inmobiliario

    y1empmod #3;    || def nuevo Empresariales Modulos
    x1empmod #4;    || def viejo Empresariales Modulos
|FIN;

|VARIABLES;
    &enganche = 0;
    agidef0 = "agidef0";
    alfa1 = "";
    alfa2 = "";
    alfa3 = "";
    alfa4 = "";
    campo = 0;
    campodi = 0;
    copi1 = "";
    copi2 = "";
    copy = "";
    def = "";
    desde = 0;
    fich = "";
    fijo1 = "";
    fijo2 = "";
    hasta = 0;
    mes = 0;
    numero = 0;
    otro1 = "";
    otro2 = "";
    puntero = 0;
    sis = "";
    topemes = 0;
    v_nombre = "";
    v_numero = 0;
    cuenta = "";
    digito = 0;
    el_signo = "";
    dire = "";
|FIN;

|INCLUYE i_camver;

****************************************************************************
      INICIO DE PROCESO
****************************************************************************

|PROCESO base;
|QUE_SISTEMA sis;
|DFICE fich;
|DDEF def;
|SI sis = "ESUNIX";
        copy = "cp ";    || xenix
|SINO;
        copy = "copy ";  || d.o.s.
|FINSI;
|FPRC;

|PROCESO conver; |TIPO 3;
|SI #0#1 = "SI";     || confirmacion de seguridad!!!
    |HAZ base;

        v_nombre = "recapinm";
        v_numero =  70;
    |ATRI P; |PINTA 0918, "*";  |ATRI 0;
    |HAZ proceso1;
    |HAZ actualiza;
    |DELINDEX #1;

    |PINTA 0918, " ";
        v_nombre = "reempmod";
        v_numero =  62;
    |ATRI P; |PINTA 1018, "*";  |ATRI 0;
    |HAZ proceso2;
    |HAZ actualiza;
    |DELINDEX #3;

    |HAZ gra_version;

        enganche = 1;
    |SUB_EJECUTA "ver00002.run";
|FINSI;
|FPRC;

****************************************************************************
      LECTURA Y GRABACION
****************************************************************************

|PROCESO proceso1;
numero = 0;
|NOME_DAT #1 agidef0;
|ABRE #1; |CIERRA #1; |DELINDEX #1;

|ABRE #1;        || def nuevo datos empresa
|ABRE #2;        || def viejo datos empresa
|LEE 040#2p;
|PARA; |SI FSalida = 0; |HACIENDO;
    |DDEFECTO #1;
    |PARA campo = 0; |SI campo [ v_numero; |HACIENDO campo = campo + 1;
            #1campo = #2campo;
    |SIGUE;
    |GRABA 020#1n;
    |HAZ pinta;
    |LEE 040#2s;
|SIGUE;
|CIERRA #1;
|CIERRA #2;
|FPRC;

|PROCESO proceso2;
numero = 0;
|NOME_DAT #3 agidef0;
|ABRE #3; |CIERRA #3; |DELINDEX #3;

|ABRE #3;        || def nuevo datos empresa
|ABRE #4;        || def viejo datos empresa
|LEE 040#4p;
|PARA; |SI FSalida = 0; |HACIENDO;
    |DDEFECTO #3;
    |PARA campo = 0; |SI campo [ v_numero; |HACIENDO campo = campo + 1;
            #3campo = #4campo;
    |SIGUE;
    |GRABA 020#3n;
    |HAZ pinta;
    |LEE 040#4s;
|SIGUE;
|CIERRA #3;
|CIERRA #4;
|FPRC;

|PROCESO pinta;
    numero = numero + 1;
    alfa3 = numero;  alfa3 = "      " + numero;  alfa3 = alfa3 % -106;
|PINTA 2170, alfa3;
|FPRC;

****************************************************************************
      ACTUALIZACION FICHERO PUENTE SOBRE FICHERO ACTUAL
****************************************************************************

|PROCESO actualiza;
    dire = "";
|DIRECTORIO dire;
    otro1 = dire + "bin/agicopy " + fich + "agidef0 " + fich + v_nombre;
|SYSTEM otro1;
|FPRC;

****************************************************************************
      RUTINAS ESPECIFICAS DE LA CONVERSION VIGENTE
****************************************************************************
