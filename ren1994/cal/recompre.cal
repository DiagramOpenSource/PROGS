|FICHEROS
   recompre #0;
   redatcon #1;
   repoblac #2;
   retotren #3;
   retotrea #4;
|FIN;

|VARIABLES;
   &empresa  = 0;
   &nombre   = "";
   &nombred  = "";
   &cif      = "";
   &tipliq   = "";
   &tipol    = "";
   &anyos    = "";
   &impresor = "";
   &tipo     = "";
   &swporta  = 0;
   &linea    = 0;
   &hoja     = 0;
   &vuelve   = 0;
   &seleccion = "";
   &liquidaci = "";
   &tipore1   = 0;
   &tipore2   = 0;
   &tipore3   = 0;
   &tipore4   = 0;
   &tipore5   = 0;
   &tipore6   = 0;
   &chequeo   = 0;
   &campo     = 0;
   &anyo1     = 0;
   &anyo2     = 0;
   &anyo3     = 0;
   &anyo4     = 0;
   &anyo5     = 0;
   &anyo6     = 0;

   var        = "";
   x          = 0;
|FIN;

|| **************************************************************************
||                           PROCESOS DEL PROGRAMA
|| **************************************************************************

|PROCESO seleccion; |TIPO 0;
|SI #0#0 = "S";
    |CAMPO_MODIFICA #0#01, 1, "S";
    |CAMPO_MODIFICA #0#02, 1, "S";
    |PARA x = 3; |SI x [ 32; |HACIENDO x = x + 1;
          #0x = 0; |PINTA #0x;
    |SIGUE;
    |CAMPO_MODIFICA #0#03, 1, "N"; |CAMPO_MODIFICA #0#04, 1, "N";
    |CAMPO_MODIFICA #0#05, 1, "N"; |CAMPO_MODIFICA #0#06, 1, "N";
    |CAMPO_MODIFICA #0#07, 1, "N"; |CAMPO_MODIFICA #0#08, 1, "N";
    |CAMPO_MODIFICA #0#09, 1, "N"; |CAMPO_MODIFICA #0#10, 1, "N";
    |CAMPO_MODIFICA #0#11, 1, "N"; |CAMPO_MODIFICA #0#12, 1, "N";
    |CAMPO_MODIFICA #0#13, 1, "N"; |CAMPO_MODIFICA #0#14, 1, "N";
    |CAMPO_MODIFICA #0#15, 1, "N"; |CAMPO_MODIFICA #0#16, 1, "N";
    |CAMPO_MODIFICA #0#17, 1, "N"; |CAMPO_MODIFICA #0#18, 1, "N";
    |CAMPO_MODIFICA #0#19, 1, "N"; |CAMPO_MODIFICA #0#20, 1, "N";
    |CAMPO_MODIFICA #0#21, 1, "N"; |CAMPO_MODIFICA #0#22, 1, "N";
    |CAMPO_MODIFICA #0#23, 1, "N"; |CAMPO_MODIFICA #0#24, 1, "N";
    |CAMPO_MODIFICA #0#25, 1, "N"; |CAMPO_MODIFICA #0#26, 1, "N";
    |CAMPO_MODIFICA #0#27, 1, "N"; |CAMPO_MODIFICA #0#28, 1, "N";
    |CAMPO_MODIFICA #0#29, 1, "N"; |CAMPO_MODIFICA #0#30, 1, "N";
    |CAMPO_MODIFICA #0#31, 1, "N"; |CAMPO_MODIFICA #0#32, 1, "N";
|SINO;
    #0#1 = 00001; |PINTA #0#1;
    #0#2 = 99999; |PINTA #0#2;
    |CAMPO_MODIFICA #0#01, 1, "N";
    |CAMPO_MODIFICA #0#02, 1, "N";

    |CAMPO_MODIFICA #0#03, 1, "S"; |CAMPO_MODIFICA #0#04, 1, "S";
    |CAMPO_MODIFICA #0#05, 1, "S"; |CAMPO_MODIFICA #0#06, 1, "S";
    |CAMPO_MODIFICA #0#07, 1, "S"; |CAMPO_MODIFICA #0#08, 1, "S";
    |CAMPO_MODIFICA #0#09, 1, "S"; |CAMPO_MODIFICA #0#10, 1, "S";
    |CAMPO_MODIFICA #0#11, 1, "S"; |CAMPO_MODIFICA #0#12, 1, "S";
    |CAMPO_MODIFICA #0#13, 1, "S"; |CAMPO_MODIFICA #0#14, 1, "S";
    |CAMPO_MODIFICA #0#15, 1, "S"; |CAMPO_MODIFICA #0#16, 1, "S";
    |CAMPO_MODIFICA #0#17, 1, "S"; |CAMPO_MODIFICA #0#18, 1, "S";
    |CAMPO_MODIFICA #0#19, 1, "S"; |CAMPO_MODIFICA #0#20, 1, "S";
    |CAMPO_MODIFICA #0#21, 1, "S"; |CAMPO_MODIFICA #0#22, 1, "S";
    |CAMPO_MODIFICA #0#23, 1, "S"; |CAMPO_MODIFICA #0#24, 1, "S";
    |CAMPO_MODIFICA #0#25, 1, "S"; |CAMPO_MODIFICA #0#26, 1, "S";
    |CAMPO_MODIFICA #0#27, 1, "S"; |CAMPO_MODIFICA #0#28, 1, "S";
    |CAMPO_MODIFICA #0#29, 1, "S"; |CAMPO_MODIFICA #0#30, 1, "S";
    |CAMPO_MODIFICA #0#31, 1, "S"; |CAMPO_MODIFICA #0#32, 1, "S";
|FINSI;
|FPRC;

|PROCESO modiliq; |TIPO 0;
tipliq = "";
|CAMPO_MODIFICA #0#36, 1, "S";
|SI #0#35 = "N"; |CAMPO_MODIFICA #0#36, 1, "N"; |FINSI;
|FPRC;

|| **************************************************************************
||                           PROCESOS DATOS CONTRIBUYENTE
|| **************************************************************************

|PROCESO ejecuciones;
swporta  = 0; linea  = 0; hoja  = 0;
nombre   = #1#1; cif  = #1#2;
|CORRE "recompr1.run";
|FPRC;

|PROGRAMA;
|SI vuelve = 0;
    |DELINDEX #0;
    |ABRE #0;
    |CLS;
    |CABEZA "Comprobacion Renta";
    |PINPA #0#0;
    |PINDA #0#0;
    |ENDATOS #1#0;
    |SI FSalida = 0;
        |IMPRE 0;
        |SI FSalida = 0;
            impresor = Impresora;
            |FINIMP;
            #0#33 = 1; |GRABA 040#0n;
            seleccion = #0#0;
            liquidaci = #0#35;
            tipliq    = #0#36;
            |SI #0#0 = "N";
                campo = 2;
                |HAZ leempre;
            |SINO;
                empresa = #0#1;
                |HAZ leempre;
            |FINSI;
        |FINSI;
    |FINSI;
|SINO;
    |ABRE #0;
    |LEE 040#0p;
    empresa = empresa + 1;
    |HAZ leempre;
|FINSI;
|CIERRA #0;
|SI chequeo = 0; |DELINDEX #0; |FINSI;
|FPRO;

|PROCESO chequeo;
chequeo = 0;
|ABRE #1;
#1#0 = empresa;
|LEE 040#1=;
|SI FSalida ! 0; |ACABA; |FINSI;
|CIERRA #1;

|ABRE #2;
#2#0 = #1#12;
#2#1 = #1#13;
|LEE 040#2=;
|SI FSalida ! 0; |DDEFECTO #2; |FINSI;
|CIERRA #2;

chequeo = 1;
Impresora = impresor;
|IMPRE -1;
|SI FSalida = 0;
    |SI #0#34 = "S";
        |INFOR "redatcon";
        |SI FSalida = 0;
            |PRINT;  |PIEINF;  |FININF;
        |FINSI;
    |FINSI;
    |FINIMP;
|FINSI;
|HAZ ejecuciones;
|FPRC;

|PROCESO leempre;
|SI seleccion = "S";
    |ABRE #1;
  |ET arriba;
    #1#0 = empresa;
    |LEE 040#1];
    |SI FSalida = 0;
        empresa = #1#0;
        |SI #1#0 [ #0#2;
            |CIERRA #1;
            |HAZ chequeo;
            |SI chequeo = 0;
                |ABRE #1;
                |VETE arriba;
            |FINSI;
        |SINO;
            chequeo = 0;
            |CIERRA #1;
        |FINSI;
    |SINO;
        chequeo = 0;
        |CIERRA #1;
    |FINSI;
|SINO;
    |HAZ parrilla;
|FINSI;
|FPRC;

|PROCESO parrilla;
|ABRE #1;
|ET parriba;
campo = campo + 1;
|SI campo [ 32;
    #1#0 = #0campo;
    |LEE 040#1=;
    |SI FSalida = 0;
        |CIERRA #1;
        empresa = #0campo;
        |HAZ chequeo;
        |SI chequeo = 0;
            |ABRE #1;
            |VETE parriba;
        |FINSI;
    |SINO;
        |VETE parriba;
    |FINSI;
|SINO;
   chequeo = 0;
|FINSI;
|FPRC;
