|FICHEROS;
   retotren #2;
   retotrea #3;
   rededu10 #4;
   refant09 #5;
   repant50 #6;
   refant21 #7;
   rededu07 #8;
|FIN;

|VARIABLES;
   &empresa  = 0;
   &nombre   = "";
   &nombrec  = "";
   &cif      = "";
   &cifc     = "";
   &anyos    = "";
   &anyosc   = "";
   &impresor = "";
   &diainf   = "";
   &mesinf   = "";
   &anyoinf  = "";
   &tipo     = "";
   &diad     = "   ";
   &mesd     = "   ";
   &diah     = "   ";
   &mesh     = "   ";
   &famili   = 0;
   &swdecl   = 0;
   &cuenta   = "";
   &fraccion = "";
   &ingreso  = 0;
   &renuncia = "";
   &papel    = 0;
   &sw_al60  = 0;
   &tippar   = 0;
   &parte1   = 0;
   &parte2   = 0;
   &muerto   = "";
   &fecpar   = @;
   &vuelve    = 0;
   &seleccion = "";
   &chequeo   = 0;
   &fichero   = "";
   &p_cen     = 0;
   &hoja1     = "";
   &hoja2     = "";
   &hoja3     = "";
   &hoja4     = "";
   &hoja5     = "";
   &hoja6     = "";
   &hoja7     = "";
   &hoja8     = "";
   &hoja9     = "";
   &hoja10    = "";
   &hoja11    = "";
   &hoja12    = "";
   &hoja13    = "";

   &cuenta1  = "";
   &cuenta2  = "";
   &perce1   = "";
   &perce2   = "";
   &impor1   = 0;
   &impor2   = 0;

   resta1    = 0;
   resta2    = 0;
   aaa       = 0;
   bbb       = 0;
   var1      = 0;
   var2      = 0;
   var3      = 0;
   var4      = 0;
   informe   = "";
   perce     = "";
   conta     = 0;
   coefi     = 0;
   x         = 0;
|FIN;

|PROGRAMA;
vuelve = 1;
|SI papel = 2;
    |PINPA #0#6;
    #6#0 = empresa;   |PINTA #6#0;
    #6#1 = nombre;    |PINTA #6#1;
|FINSI;
Impresora = impresor;
|IMPRE -1;
|SI FSalida = 0;
    |HAZ hoja9;
    |FINIMP;
    |CORRE "reemipdo.run";
|FINSI;
|FPRO;

|| *************************************************************************
||                         IMPRESION HOJA 9, 10, 11, 12
|| *************************************************************************
|PROCESO carga1;
#5#0  = #3#26;
#5#1  = #3#27;
#5#2  = #2#26;   || Liquidacion
#5#3  = #3#28;

#5#4  = #3#29;
#5#5  = #3#30;
#5#6  = #3#31;
#5#7  = #3#32;
#5#8  = #3#33;
#5#9  = #3#34;
#5#10 = #3#35;
#5#11 = #3#36;
#5#12 = #3#249;
#5#13 = #2#51;   || Liquidacion

#5#14 = #3#136;
#5#15 = #3#137;
#5#16 = #3#138;
#5#17 = #3#139;
#5#18 = #3#140;

#5#19 = #2#27;   || Liquidacion

|SI #2#200 ! 0; #5#20 = "TITULAR"; |FINSI;
|SI #2#206 ! 0; #5#21 = "TITULAR"; |FINSI;

#5#22 = #2#200;  || Liquidacion
#5#23 = #2#206;  ||     ""
#5#24 = #2#28;   ||     ""

|SI #3#20 ! 0;
    #5#25 = "TITULAR";
    #5#26 = #3#18 % 130;
    #5#27 = #3#18 % -112;
|FINSI;
#5#28 = #3#20;

|SI #3#21 ! 0;
    #5#29 = "CONYUGE";
    #5#30 = #3#19 % 130;
    #5#31 = #3#19 % -112;
|FINSI;
#5#32 = #3#21;
#5#33 = #2#29;

#5#34 = #2#30;
#5#35 = #2#52;
#5#36 = #3#202;
#5#37 = #2#53;
#5#38 = #3#203;

#5#39 = #3#37;
#5#40 = #3#38;
#5#41 = #3#39;
#5#42 = #3#40;
|FPRC;

|| ********************** Deducciones cuenta vivienda **********************

|PROCESO carga2;
conta = conta + 1;
|SI conta [ 2;
    |SI conta = 1; var1 = 20; |FINSI;
    |SI conta = 2; var1 = 24; |FINSI;
    var2 = var1  + 1;
    var3 = var2  + 1;
    var4 = var3  + 1;
    #7var1 = perce;
    #7var2 = #4#16;
    #7var3 = #4#5;
    #7var4 = #4#6 % coefi;
|SINO;
    #7var1  = "Segun relacion adjunta";
    #7var2  = "";
    #7var3  = "";
    #7var4  = #7var4 + (#4#6 % coefi);
|FINSI;
|FPRC;

|PROCESO cuenta;
|SI #4#8 = "X"; |O #4#8 = "P"; |ACABA; |FINSI;
|SI #4#4 = "I"; |ACABA; |FINSI;

|SI tipo = "A"; perce = #4#3; |SINO; perce = "TITULAR"; |FINSI;

|SI tipo = "A";
    |SI #4#2 = "V";
        |SI tippar = 1;
            |SI #4#15 = 0;  coefi = (#4#9 + #4#10) * parte2; |FINSI;
            |SI #4#15 = 1;  |ACABA;                         |FINSI;
            |SI #4#15 = 2;  coefi = #4#9 + #4#10;            |FINSI;
        |FINSI;
        |SI tippar = 2;
            |SI #4#15 = 0;  coefi = (#4#9 + #4#10) * parte1; |FINSI;
            |SI #4#15 = 1;  coefi = #4#9 + #4#10;            |FINSI;
            |SI #4#15 = 2;  |ACABA;                         |FINSI;
        |FINSI;
        |SI tippar = 3;
            |SI #4#15 = 0;  coefi = (#4#9 + #4#10) * parte1; |FINSI;
            |SI #4#15 = 2;  |ACABA;                         |FINSI;
            |SI #4#15 = 1;  coefi = #4#9 + #4#10;            |FINSI;
        |FINSI;
        |HAZ carga2;
        |ACABA;
    |SINO;
        |SI tippar = 1;
            |SI #4#15 = 0;  coefi = 100 * parte2; |FINSI;
            |SI #4#15 = 1;  |ACABA;               |FINSI;
            |SI #4#15 = 2;  coefi = 100;          |FINSI;
        |FINSI;
        |SI #4#2 = "G";
            |SI tippar = 2;
                |SI #4#15 = 0;  coefi = 100 * parte1; |FINSI;
                |SI #4#15 = 1;  coefi = 100;          |FINSI;
                |SI #4#15 = 2;  |ACABA;               |FINSI;
            |FINSI;
        |SINO;
            |SI tippar = 2;
                |SI #4#15 = 0;
                    |SI #4#2 = "T"; |Y muerto = "T";
                        coefi = 100;
                    |SINO;
                       |SI #4#2 = "C"; |Y muerto = "C";
                           coefi = 100;
                       |SINO;
                           coefi = 100 * parte1;
                       |FINSI;
                    |FINSI;
                |FINSI;
                |SI #4#15 = 1;  coefi = 100;          |FINSI;
                |SI #4#15 = 2;  |ACABA;               |FINSI;
            |FINSI;
        |FINSI;
        |SI tippar = 3;
            |SI #4#15 = 0;  coefi = 100 * parte1; |FINSI;
            |SI #4#15 = 2;  |ACABA;               |FINSI;
            |SI #4#15 = 1;  coefi = 100;          |FINSI;
        |FINSI;
        |HAZ carga2;
        |ACABA;
    |FINSI;
    |ACABA;
|FINSI;

|SI tipo = "T";
   |SI #4#2 = "G";
       |SI tippar = 1;
           |SI #4#15 = 0; coefi = 50 * parte1; |FINSI;
           |SI #4#15 = 1; coefi = 50;          |FINSI;
           |SI #4#15 = 2; |ACABA;              |FINSI;
       |FINSI;
       |SI tippar = 2;
           |SI muerto = "T";
               |SI #4#15 = 0; coefi = 50 * parte1; |FINSI;
               |SI #4#15 = 1; coefi = 50;          |FINSI;
               |SI #4#15 = 2; |ACABA;              |FINSI;
           |FINSI;
           |SI muerto = "C";
               |SI #4#15 = 0; coefi = 100 - (50 * parte1); |FINSI;
               |SI #4#15 = 1; coefi = 50;                  |FINSI;
               |SI #4#15 = 2; coefi = 100;                 |FINSI;
           |FINSI;
       |FINSI;
       |SI tippar = 3;
           |SI #4#15 = 0; coefi = 50 * parte2; |FINSI;
           |SI #4#15 = 1; |ACABA;              |FINSI;
           |SI #4#15 = 2; coefi = 50;          |FINSI;
       |FINSI;
       |HAZ carga2; |ACABA;
   |FINSI;

   |SI #4#2 = "T";
       |SI tippar = 1;
           |SI #4#15 = 0; coefi = 100 * parte1; |FINSI;
           |SI #4#15 = 1; coefi = 100;          |FINSI;
           |SI #4#15 = 2; |ACABA;               |FINSI;
       |FINSI;
       |SI tippar = 2;  || Muerto
           |SI #2#213 = 1;
               |SI #4#15 = 0; coefi = 100 * parte2; |FINSI;
               |SI #4#15 = 1; |ACABA;               |FINSI;
               |SI #4#15 = 2; coefi = 100;          |FINSI;
           |FINSI;
           |SI #2#213 = 2; coefi = 100; |FINSI;
       |FINSI;
       |SI tippar = 3;
           |SI #4#15 = 0; coefi = 100 * parte2; |FINSI;
           |SI #4#15 = 1; |ACABA;               |FINSI;
           |SI #4#15 = 2; coefi = 100;          |FINSI;
       |FINSI;
       |HAZ carga2; |ACABA;
   |FINSI;

   |SI #4#2 = "V";
       |SI tippar = 1;
           |SI #4#15 = 0; coefi = #4#9 * parte1; |FINSI;
           |SI #4#15 = 1; coefi = #4#9;          |FINSI;
           |SI #4#15 = 2; |ACABA;        |FINSI;
       |FINSI;
       |SI tippar = 2; coefi = #4#9;             |FINSI;
       |SI tippar = 3;
           |SI #4#15 = 0; coefi = #4#9 * parte2; |FINSI;
           |SI #4#15 = 1; |ACABA;        |FINSI;
           |SI #4#15 = 2; coefi = #4#9;          |FINSI;
       |FINSI;
       |HAZ carga2; |ACABA;
   |FINSI;
   |ACABA;
|FINSI;

|SI tipo = "C";
   |SI #4#2 = "G";
       |SI tippar = 1;
           |SI #4#15 = 0; coefi = 50 * parte1; |FINSI;
           |SI #4#15 = 1; coefi = 50;          |FINSI;
           |SI #4#15 = 2; |ACABA;              |FINSI;
       |FINSI;
       |SI tippar = 2;
           |SI muerto = "T";
               |SI #4#15 = 0; coefi = 100 - (50 * parte1); |FINSI;
               |SI #4#15 = 1; coefi = 50;          |FINSI;
               |SI #4#15 = 2; coefi = 100;         |FINSI;
           |FINSI;
           |SI muerto = "C";
               |SI #4#15 = 0; coefi = 50 * parte1; |FINSI;
               |SI #4#15 = 1; coefi = 50;                  |FINSI;
               |SI #4#15 = 2; |ACABA;                      |FINSI;
           |FINSI;
       |FINSI;
       |SI tippar = 3;
           |SI #4#15 = 0; coefi = 50 * parte2; |FINSI;
           |SI #4#15 = 1; |ACABA;              |FINSI;
           |SI #4#15 = 2; coefi = 50;          |FINSI;
       |FINSI;
       |HAZ carga2; |ACABA;
   |FINSI;

   |SI #4#2 = "C";
       |SI tippar = 1;
           |SI #4#15 = 0; coefi = 100 * parte1; |FINSI;
           |SI #4#15 = 1; coefi = 100;          |FINSI;
           |SI #4#15 = 2; |ACABA;               |FINSI;
       |FINSI;
       |SI tippar = 2;  || Muerto
           |SI #2#213 = 1;
               |SI #4#15 = 0; coefi = 100 * parte2; |FINSI;
               |SI #4#15 = 1; |ACABA;               |FINSI;
               |SI #4#15 = 2; coefi = 100;          |FINSI;
           |FINSI;
           |SI #2#213 = 2; coefi = 100; |FINSI;
       |FINSI;
       |SI tippar = 3;
           |SI #4#15 = 0; coefi = 100 * parte2; |FINSI;
           |SI #4#15 = 1; |ACABA;               |FINSI;
           |SI #4#15 = 2; coefi = 100;          |FINSI;
       |FINSI;
       |HAZ carga2; |ACABA;
   |FINSI;

   |SI #4#2 = "V";
       |SI tippar = 1;
           |SI #4#15 = 0; coefi = #4#10 * parte1; |FINSI;
           |SI #4#15 = 1; coefi = #4#10;          |FINSI;
           |SI #4#15 = 2; |ACABA;                 |FINSI;
       |FINSI;
       |SI tippar = 2; coefi = #4#10;             |FINSI;
       |SI tippar = 3;
           |SI #4#15 = 0; coefi = #4#10 * parte2; |FINSI;
           |SI #4#15 = 1; |ACABA;                 |FINSI;
           |SI #4#15 = 2; coefi = #4#10;          |FINSI;
       |FINSI;
       |HAZ carga2; |ACABA;
   |FINSI;
   |ACABA;
|FINSI;
|FPRC;

|DEFBUCLE rededu10;
#4#1;
;
empresa, 01;
empresa, 99;
e;
NULL, cuenta;
|FIN;

|PROCESO alquiler;
|SI #8#9 = "X"; |O #8#9 = "P"; |ACABA; |FINSI;
|SI #8#4 ! "A"; |ACABA; |FINSI;

#7#94 = #8#5;
|FPRC;

|DEFBUCLE rededu07;
#8#1;
;
empresa, 01;
empresa, 99;
e;
NULL, alquiler;
|FIN;

|PROCESO hoja9;
|DDEFECTO #5;

|ABRE #2;
#2#0   = empresa;
#2#141 = tipo;
|LEE 040#2=;
|SI FSalida ! 0; |DDEFECTO #2; |FINSI;
|CIERRA #2;

|ABRE #3;
#3#0   = empresa;
#3#1   = tipo;
|LEE 040#3=;
|SI FSalida ! 0; |DDEFECTO #3; |FINSI;
|CIERRA #3;

|HAZ carga1;

|SI papel = 1;
    informe = "reho1009";  |HAZ continuo;
|SINO;
    informe = "rema1009";  |HAZ manual;
|FINSI;

|DDEFECTO #7;

|SI #2#92 ! 0; |BUCLE rededu07; |FINSI;

#7#01  = #2#91;  #7#00 = (#2#91  * 100) / 15;
#7#03  = #2#92;  #7#02 = (#2#92  * 100) / 15;
#7#05  = #2#93;  #7#04 = (#2#93  * 100) / 15;

#7#09  = #2#94;  #7#08 = (#2#94  * 100) / 10; #7#86 = #2#110;
#7#11  = #2#95;  #7#10 = (#2#95  * 100) / 15; #7#87 = #2#111;
#7#13  = #2#96;  #7#12 = (#2#96  * 100) / 15; #7#88 = #2#112;
#7#15  = #2#97;  #7#14 = (#2#97  * 100) / 10; #7#89 = #2#113;
#7#17  = #2#98;  #7#16 = (#2#98  * 100) / 15; #7#90 = #2#114;
#7#19  = #2#104 + #2#103;
#7#18  =  (#7#19 * 100) / 10;  || No se esta muy seguro si el 15 entra tambien
#7#91  = #2#115;
#7#92  = #2#110 + #2#111 + #2#112 + #2#113 + #2#114 + #2#115;
#7#93  = (#2#32 + #2#54) % 30;

resta1 = #7#86 - #7#08;
resta2 = #7#08 - #7#86;
|SI #7#08 < #7#86; |Y resta1 [ 6; #7#08 = #7#86; |FINSI;
|SI #7#08 > #7#86; |Y resta2 [ 6; #7#08 = #7#86; |FINSI;

resta1 = #7#87 - #7#10;
resta2 = #7#10 - #7#87;
|SI #7#10 < #7#87; |Y resta1 [ 6; #7#10 = #7#87; |FINSI;
|SI #7#10 > #7#87; |Y resta2 [ 6; #7#10 = #7#87; |FINSI;

resta1 = #7#88 - #7#12;
resta2 = #7#12 - #7#88;
|SI #7#12 < #7#88; |Y resta1 [ 6; #7#12 = #7#88; |FINSI;
|SI #7#12 > #7#88; |Y resta2 [ 6; #7#12 = #7#88; |FINSI;

resta1 = #7#89 - #7#14;
resta2 = #7#14 - #7#89;
|SI #7#14 < #7#89; |Y resta1 [ 6; #7#14 = #7#89; |FINSI;
|SI #7#14 > #7#89; |Y resta2 [ 6; #7#14 = #7#89; |FINSI;

resta1 = #7#90 - #7#16;
resta2 = #7#16 - #7#90;
|SI #7#16 < #7#90; |Y resta1 [ 6; #7#16 = #7#90; |FINSI;
|SI #7#16 > #7#90; |Y resta2 [ 6; #7#16 = #7#90; |FINSI;

resta1 = #7#91 - #7#18;
resta2 = #7#18 - #7#91;
|SI #7#18 < #7#91; |Y resta1 [ 6; #7#18 = #7#91; |FINSI;
|SI #7#18 > #7#91; |Y resta2 [ 6; #7#18 = #7#91; |FINSI;

aaa    = (#2#32 + #2#54) % 30;
bbb    = #7#8 + #7#10 + #7#12 + #7#14 + #7#16 + #7#18;

|SI bbb > aaa; |Y #7#18 ! 0; #7#18 = aaa - (bbb - #7#18);  |FINSI;

conta = 0; |BUCLE rededu10;

#7#28  = #3#41;
#7#29  = #3#45;

#7#30  = #3#42 + #3#43 + #3#44 + #3#204;
#7#31  = #3#46 + #3#47 + #3#48 + #3#205;
#7#32  = #3#50 + #3#51 + #3#52 + #3#206;

#7#33  = #3#53 + #3#54;
#7#34  = #3#60 + #3#61;
#7#35  = #3#66 + #3#67;

#7#36  = #3#183;
#7#37  = #3#184;
#7#38  = #3#185;

#7#39  = #3#56 + #3#57;
#7#40  = #3#63 + #3#64;
#7#41  = #3#69 + #3#70;

#7#42  = #3#58;
#7#43  = #3#65;
#7#44  = #3#71;

#7#45  = #3#55;
#7#46  = #3#62;
#7#47  = #3#68;

#7#48  = #3#186;
#7#49  = #3#187;
#7#50  = #3#188;

#7#51  = #3#59;
#7#52  = #2#99;
#7#53  = #3#72;

#7#54  = #3#213;
#7#55  = #3#214 + #3#215 + #3#216 + #3#217 + #3#218 + #3#219;
#7#56  = #3#227;

#7#57  = #3#79;
#7#58  = #3#80  + #3#81  + #3#82  + #3#83  + #3#84  + #3#85;
#7#59  = #3#92;

#7#60  = #3#79  + #3#213;
#7#61  = #2#100;
#7#62  = #3#227 + #3#92;

#7#63  = #3#93  + #3#94  + #3#95;
#7#64  = #3#96  + #3#97  + #3#98;
#7#65  = #3#99  + #3#100 + #3#101;

#7#66  = #3#239 + #3#241;
#7#67  = #3#240 + #3#242;
#7#68  = #3#246 + #3#247;

#7#69  = #3#105 + #3#106;
#7#70  = #3#111 + #3#112;
#7#71  = #3#116 + #3#117;

#7#72  = #3#107;
#7#73  = #2#101;
#7#74  = #3#118;

#7#75  = #3#119;
#7#76  = #3#125;

#7#77  = #3#120 + #3#121 + #3#122 + #3#123;
#7#78  = #3#126 + #3#127 + #3#128 + #3#129;
#7#79  = #3#131 + #3#132 + #3#133 + #3#134;

#7#80  = #3#244;
#7#81  = #3#245;
#7#82  = #3#248;

#7#83  = #3#124;
#7#84  = #2#102;
#7#85  = #3#135;

|SI papel = 1;
    informe = "reho100a";  |HAZ continuo;
|SINO;
    informe = "rema100a";  |HAZ manual;
|FINSI;

|SI papel = 1;
    informe = "reho100b";  |HAZ continuo;
|SINO;
    informe = "rema100b";  |HAZ manual;
|FINSI;

|SI papel = 1;
    informe = "reho100c";  |HAZ continuo;
|SINO;
    informe = "rema100c";  |HAZ manual;
|FINSI;
|FPRC;

|PROCESO continuo;
|SI informe = "reho1009"; |Y hoja9  = "N"; |ACABA; |FINSI;
|SI informe = "reho100a"; |Y hoja10 = "N"; |ACABA; |FINSI;
|SI informe = "reho100b"; |Y hoja11 = "N"; |ACABA; |FINSI;
|SI informe = "reho100c"; |Y hoja12 = "N"; |ACABA; |FINSI;

|INFOR informe;
|SI FSalida = 0;
    |PRINT; |PIEINF; |FININF;
|FINSI;
|FPRC;

|PROCESO manual;
|SI informe = "rema1009"; |Y hoja9  = "N"; |ACABA; |FINSI;
|SI informe = "rema100a"; |Y hoja10 = "N"; |ACABA; |FINSI;
|SI informe = "rema100b"; |Y hoja11 = "N"; |ACABA; |FINSI;
|SI informe = "rema100c"; |Y hoja12 = "N"; |ACABA; |FINSI;

|ET comienzo;
    |SI informe = "rema1009";
        #6#2 = "COLOQUE PAGINA 9 DEL MODELO 100, <INTRO PARA IMPRIMIR>";
    |FINSI;
    |SI informe = "rema100a";
        #6#2 = "COLOQUE PAGINA 10 DEL MODELO 100, <INTRO PARA IMPRIMIR>";
    |FINSI;
    |SI informe = "rema100b";
        #6#2 = "COLOQUE PAGINA 11 DEL MODELO 100, <INTRO PARA IMPRIMIR>";
    |FINSI;
    |SI informe = "rema100c";
        #6#2 = "COLOQUE PAGINA 12 DEL MODELO 100, <INTRO PARA IMPRIMIR>";
    |FINSI;

    |ATRI P; |PINTA #6#2; |ATRI 0;
    |PAUSA;

    |INFOR informe;
    |SI FSalida = 0;
        |PRINT; |PIEINF; |FININF;
    |FINSI;

    |CONFI "2400NDesea repetir la hoja : ";
    |SI FSalida = 0; |VETE comienzo; |FINSI;
|FPRC;
