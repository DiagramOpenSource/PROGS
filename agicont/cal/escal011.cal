
|FICHEROS;

   escal011  #0;  ||Traspaso Maestros
   canempre #30;  ||Definici¢n Empresas

|FIN;


|VARIABLES;

  men = "";
  dir_fich = "";
  alfa1 = "";
  alfa2 = "";
  origen = "";
  destino = "";
  temporal1 = "";
  temporal2 = "";

|FIN;



|PROCESO traspaso; |TIPO 0;

   |ABRE #30;

   #30#2 = #0#3;
   #30#3 = #0#4;
   |LEE 101#30=;
   |SI FSalida = 0;
      #0#5 = #30#4;
      |PINTA #0#5;
   |SINO;
      |MENAV "2400 NO EXISTE LA EMPRESA DESTINO";
      |ACABA;
   |FINSI;

   |MENAV "2400 AVISO: LOS FICHEROS DE LA EMPRESA DESTINO SE MACHACARAN";
   |CONFI "2400 DESEA REALIZAR EL TRASPASO? ";
   |SI FSalida = 0 ;  ||Se ha pulsado Si

      |DBASE dir_fich;
      dir_fich = dir_fich + "fich/";
      alfa1 = #0#3;   alfa1 = "00000" + alfa1;   alfa1 = alfa1 % -105;
      alfa2 = #0#4;   alfa2 = "0"   + alfa2;   alfa2 = alfa2 % -101;
      destino = dir_fich + alfa1 + alfa2 + "/";

      |DFICE origen;

      |SI #0#6 = "S";              ||Traspaso Bloques

          temporal1 = origen  + "escal001.ixx";
          temporal2 = destino + "escal001.ixx";
          |COPIA_FICHERO temporal1, temporal2;
          |SI FSalida ! 0; |ACABA; |FINSI;
          temporal1 = origen  + "escal001.dat";
          temporal2 = destino + "escal001.dat";
          |COPIA_FICHERO temporal1, temporal2;
          |SI FSalida ! 0;
              temporal2 = destino + "escal001.ixx";
              |FBORRA temporal2;
              |ACABA;
          |FINSI;
          temporal1 = origen  + "escal001.ddx";
          temporal2 = destino + "escal001.ddx";
          |COPIA_FICHERO temporal1, temporal2;


      |FINSI;

      |SI #0#7 = "S";              ||Traspaso SubBloques

          temporal1 = "";
          temporal2 = "";
          temporal1 = origen  + "escal004.ixx";
          temporal2 = destino + "escal004.ixx";
          |COPIA_FICHERO temporal1, temporal2;
          |SI FSalida ! 0; |ACABA; |FINSI;
          temporal1 = origen  + "escal004.dat";
          temporal2 = destino + "escal004.dat";
          |COPIA_FICHERO temporal1, temporal2;
          |SI FSalida ! 0;
              temporal2 = destino + "escal004.ixx";
              |FBORRA temporal2;
              |ACABA;
          |FINSI;
          temporal1 = origen  + "escal004.ddx";
          temporal2 = destino + "escal004.ddx";
          |COPIA_FICHERO temporal1, temporal2;

      |FINSI;

      |SI #0#8 = "S";              ||Traspaso Cuentas Escalares

          ||Cabecera

          temporal1 = "";
          temporal2 = "";
          temporal1 = origen  + "escal002.ixx";
          temporal2 = destino + "escal002.ixx";
          |COPIA_FICHERO temporal1, temporal2;
          |SI FSalida ! 0; |ACABA; |FINSI;
          temporal1 = origen  + "escal002.dat";
          temporal2 = destino + "escal002.dat";
          |COPIA_FICHERO temporal1, temporal2;
          |SI FSalida ! 0;
              temporal2 = destino + "escal002.ixx";
              |FBORRA temporal2;
              |ACABA;
          |FINSI;
          temporal1 = origen  + "escal002.ddx";
          temporal2 = destino + "escal002.ddx";
          |COPIA_FICHERO temporal1, temporal2;

          ||Lineas


          temporal1 = "";
          temporal2 = "";
          temporal1 = origen  + "escal003.ixx";
          temporal2 = destino + "escal003.ixx";
          |COPIA_FICHERO temporal1, temporal2;
          |SI FSalida ! 0; |ACABA; |FINSI;
          temporal1 = origen  + "escal003.dat";
          temporal2 = destino + "escal003.dat";
          |COPIA_FICHERO temporal1, temporal2;
          |SI FSalida ! 0;
              temporal2 = destino + "escal003.ixx";
              |FBORRA temporal2;
              |ACABA;
          |FINSI;
          temporal1 = origen  + "escal003.ddx";
          temporal2 = destino + "escal003.ddx";
          |COPIA_FICHERO temporal1, temporal2;


      |FINSI;

      |SI #0#9 = "S";             ||Traspaso Informes

          temporal1 = "";
          temporal2 = "";
          temporal1 = origen  + "escal005.ixx";
          temporal2 = destino + "escal005.ixx";
          |COPIA_FICHERO temporal1, temporal2;
          |SI FSalida ! 0; |ACABA; |FINSI;
          temporal1 = origen  + "escal005.dat";
          temporal2 = destino + "escal005.dat";
          |COPIA_FICHERO temporal1, temporal2;
          |SI FSalida ! 0;
              temporal2 = destino + "escal005.ixx";
              |FBORRA temporal2;
              |ACABA;
          |FINSI;
          temporal1 = origen  + "escal005.ddx";
          temporal2 = destino + "escal005.ddx";
          |COPIA_FICHERO temporal1, temporal2;

      |FINSI;

   |FINSI;

   |CIERRA #30;

|FPRC;
