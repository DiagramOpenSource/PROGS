|FICHEROS;
    cainfpag #0;
    capagcab #1;
    capaglin #2;
    cacuenta #3;
    cacuadre #9;
|FIN;

|VARIABLES;
   &entrada = 1;
   informe =  "cainfpag";
   informe1 = "cainfpa1";
   sw = 0;
   pagare = 0;
   &swlin  = 0;
   &cnomprov = "";
   &cnombanc = "";
   seleccio = 0;
   alfa1 = "";
   sw_act = 0;
|FIN;

|INCLUYE acceso_i;
|INCLUYE puntos_i;

|| *****************************************************************
|CALCULO mayor;
   alfa1 = #0Campo > " ";
   #0Campo = alfa1;
   |PINTA #0Campo;
|FCAL;

|CALCULO Cuenta; |TIPO 6;
  salidas = FSalida;
  p_alfa1 = #0Campo;
  |HAZ punto;
  |SI p_error ! 0;  |ERROR;  |ACABA;  |FINSI;
|FCAL;

|RUTINA inf5;
 #3#0 = "17          ";
 #3#1 = dig3;
|FRUT;

|RUTINA sup5;
 #3#0 = "52zzzzzzzzzz";
 #3#1 = dig3;
|FRUT;

|CALCULO CueCons; |TIPO 0;
 |SI FSalida = 10;
     |ABRE #3;
     |CONSULTA_F_CLAVE #1#3, inf5, sup5;
     |CIERRA #3;
     #0Campo = #3#0; |PINTA #0Campo;
 |FINSI;
|FCAL;

|CALCULO juntos; |TIPO 0;
 |SI sw_act = 0;
     #0#10 = #0#13; |PINTA #0#10;
 |FINSI;
|FCAL;

|| ******************************************************************
|PROCESO cuadre; |TIPO 8;
  |HAZ inicio;
  sw_act = 0;    ||  0 = N control (Carta/Pagare) junto / 1 = S por separado
  |ABRE #9;
  |DDEFECTO #9;
  #9#0 = 1;
  |LEE 001#9=;
  |SI FSalida = 0;
      |SI #9#17 = "S";
          sw_act = 1;
      |FINSI;
  |FINSI;
  |CIERRA #9;
  |SI sw_act = 0;
      |CAMPO_MODIFICA #0#10, 1, "N";
  |FINSI;
|FPRC;

|PROCESO cuentas;
  cnomprov = "<CUENTA SIN DEFINIR>";
  cnombanc = cnomprov;
  #3#0 = #1#1;
  #3#1 = #1#2;
  |LEE 001#3=;
  |SI FSalida = 0;  cnomprov = #3#2;  |FINSI;
  #3#0 = #1#3;
  #3#1 = #1#4;
  |LEE 001#3=;
  |SI FSalida = 0;  cnombanc = #3#2;  |FINSI;
|FPRC;

|PROCESO impresion;
  |SI #0#10 ! "A";
      |SI #0#10 ! #1#10;  |ACABA;  |FINSI;  || impresa carta
  |FINSI;
  |SI #0#13 ! "A";
      |SI #0#13 ! #1#12;  |ACABA;  |FINSI;  || impreso pagare
  |FINSI;
  |SI #0#11 ! "A";
      |SI #0#11 ! #1#07;  |ACABA;  |FINSI;  || emision
  |FINSI;
  |SI #0#12 ! "A";
      |SI #0#12 ! #1#08;  |ACABA;  |FINSI;  || vencimiento
  |FINSI;

  |HAZ cuentas;
  |SI sw = 0;
      pagare = #1#0;
      swlin = 0;
      |PRINT;
      swlin = 1;
      sw = 1;
  |FINSI;
  |SI pagare ! #1#0;
      swlin = 0;
      |PRINT;
      swlin = 1;
      pagare = #1#0;
  |FINSI;
  |PRINT;
|FPRC;

|PROCESO imprelin;
  seleccio = 1;
  |BUCLELIN 2impresion#1;
|FPRC;

|DEFBUCLE cainfpag0;
 #1#1;
 5, 6, 1, 3;
 #0#0, #0#2, #0#4, #0#6, #0#8;
 #0#1, #0#3, #0#5, #0#7, #0#9;
 e;
 NULL, imprelin;
|FIN;

|CALCULO impre;|TIPO 3;
  |IMPRE 0;
  |SI FSalida = 0;
    |SI #0#14 = 1;
      |INFOR informe;
    |SINO;
      |INFOR informe1;
    |FINSI;
      |ABRE #3;
      |BUCLE cainfpag0;
      |CIERRA #3;
      |SI seleccio = 1;
          |PIEINF;
      |FINSI;
      |FININF;
  |SINO;
      |MENAV "    Proceso Abortado ...";
  |FINSI;
  |FINIMP;
|FCAL;
