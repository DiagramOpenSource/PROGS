|VARIABLES;
 &eaOrigen  = "";
 &eaDestino = "";
 &enErrPas  = 0;
  aIPRemoto = "";

  nCanal       = 0;
  aBase        = "";
  aLosDefs     = "";
  aElProgr     = "";
  &aPContas    = "";
  &aPAgicli    = "";
  &HaySociedad = 0;
  &HayAgicli   = 0;

  {1}aContiene       = "";
     &eaUnidadBasico = "";
     &eaUnidadBTmp   = "";
     aIP             = "";
     aAlfa           = "";
|FIN;

|PROCESO eReciboFich;
  enErrPas = 0;
  aIPRemoto = "";
  |IP_REMOTO aIPRemoto;  |QBT aIPRemoto;
  |SI aIPRemoto ! "";
      |RECIBE_FICHERO eaOrigen, eaDestino;
  |SINO;
      |COPIA_FICHERO eaOrigen, eaDestino;
  |FINSI;
  |SI FSalida ! 0;  enErrPas  = 1; |FINSI;
|FPRC;

|PROCESO eEnvioFich;
  enErrPas = 0;
  aIPRemoto = "";
  |IP_REMOTO aIPRemoto;  |QBT aIPRemoto;
  |SI aIPRemoto ! "";
      |ENVIA_FICHERO eaOrigen, eaDestino;
  |SINO;
      |COPIA_FICHERO eaOrigen, eaDestino;
  |FINSI;
  |SI FSalida ! 0;  enErrPas  = 1; |FINSI;
|FPRC;


|PROCESO DirAplicSt;
  |DBASS aBase; |QBT aBase;  || Directorio Base de las Aplaciones
  aPContas = aBase + "sociedad/"; ||  Impuesto de Sociedades
  aPAgicli = aBase + "agicli/";   ||  Ficher General

  aLosDefs = aPContas + "def/";
  aElProgr = aLosDefs + "isacceso.mas";
  |XABRE "E", aElProgr, nCanal;
  |SI FSalida ] 0;
      HaySociedad = 1;
  |SINO;
      HaySociedad = 0;
  |FINSI;
  |XCIERRA nCanal;

  aLosDefs = aPAgicli + "def/";
  aElProgr = aLosDefs + "agifigen.mas";
  |XABRE "E", aElProgr, nCanal;
  |SI FSalida ] 0;
      HayAgicli = 1;
  |SINO;
      HayAgicli = 0;
  |FINSI;
  |XCIERRA nCanal;
|FPRC;

|PROCESO LeeUnidadBas;
     aContiene = "";
     |ESPECIFICA "RBASS", aContiene;
     eaUnidadBasico = (aContiene1 % 102) > "";

     aAlfa = eaUnidadBasico % -101;
     |SI aAlfa ! ":";
         eaUnidadBasico = "";
     |FINSI;

     aIP = ""; |IP_REMOTO aIP;
     aAlfa = eaUnidadBasico + "/DOCUMENTOS/TMP/";
     |SI aIP ! "";
         |RMKDIR aAlfa;
     |SINO;
         |MKDIR aAlfa;
     |FINSI;
     eaUnidadBTmp = eaUnidadBasico + "/tmp";
     aAlfa = eaUnidadBTmp;
     |SI aIP ! "";
         |RMKDIR aAlfa;
     |SINO;
         |MKDIR aAlfa;
     |FINSI;
|FPRC;

|PROCESO LeeUnidadBasico;
     aContiene = "";
     |ESPECIFICA "RBASS", aContiene;
     eaUnidadBasico = (aContiene1 % 102) > "";

     aAlfa = eaUnidadBasico % -101;
     |SI aAlfa ! ":";
         eaUnidadBasico = "";
     |FINSI;
|FPRC;
