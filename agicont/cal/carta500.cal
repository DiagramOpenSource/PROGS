|FICHEROS;
     carta500 #0;
     caivarep #1;
     caivasop #2;
     caclipro #3;
     cacuenta #5;
     cadatemp #6,MANTE;
     caportad #8;

     catmp500 #900;
     catmp501 #901;

     eosclipr #12;
     agicontr #23;
|FIN;

|VARIABLES;
   Comodin = "";

   Cont    = 0;
   SwCont  = 0;
   SwError = 0;

   Dobles  = 0;
   Path = "";

   Comodin1 = "";
   ComodNum = 0;

   Empresa = 0;
   Periodo = 0;

   Dia = "";
   Mes1 = "";
   Mes2 = "";
   Year = "";

   FechaIni  = @;
   FechaFin  = @;

     informe = "";
     inform1 = "carta500";
     inform2 = "carta501";
     cuenta = "";
     digito  = 0;
     niff = "";
     sw = 0;

     &baseimp = 0;
     &baseim1 = 0;
     &baseim2 = 0;
     &baseim3 = 0;
     &baseim4 = 0;
     &nom = "";
     &nif = "";
     &dir = "";
     &cp = "";
     &pob = "";
     &prov = "";
     &texto = "";
     &text1 = "";
     &cifra = 0;

     emp = "";
     cp1 = "";
     cp2 = "";
     var = "";
     dia = 0;
     mes = "";
     any = "";
     blanco = "                                                                                    ";

     alfa1 = "";
     alfa2 = "";
     desde = 0;
     hasta = 0;
     modif1 = "";
     modif2 = "";
     sw_con = 0;
     xy = 0;

     FEstado = 0;
     &aMoney = "";

     SwNom = 0;
     aFichero = "";
  agi = "";
  &agi1 = "";
  &agi2 = "";
  &aste = "";
  num   = 0;
  lonagi = "";
  nNegativo = 0;
    Trimestre = 0;
    nCampo1   = 0;
    nCampo2   = 0;
    nImporte  = 0;
  nError = 0;
|FIN;

|INCLUYE acceso_i;
|INCLUYE varnue_i;
|INCLUYE puntos_i;

|| ************************************************************************
|CALCULO inicio_c; |TIPO 8;

 |HAZ inicio;
 |HAZ eVarEmpresa;
 |HAZ tipo_8;
|FCAL;

|CALCULO Defectos; |TIPO 7;
   |SI EURODB = 2;
      #0#1 = 3005.06;
      #0#2 = 3005.06;
   |SINO;
      #0#1 = 500000;
      #0#2 = 500000;
   |FINSI;
   |PINTA #0#1;
   |PINTA #0#2;
|FCAL;

|PROCESO cuenta; |TIPO 0;
  p_alfa1 = #0Campo;
  salidas = FSalida;
  |HAZ punto;
  |SI p_error ! 0;  |ERROR;  |ACABA;  |FINSI;
|FPRC;

|CALCULO mayor; |TIPO 0;
  alfa1 = #0Campo > " ";
  #0Campo = alfa1;
  |PINTA #0Campo;
|FCAL;

|CALCULO mayor1sel; |TIPO 0;
  |HAZ mayor;
  |C_M #0#77, 1, "S"; |C_M #0#78, 1, "S";
  |C_M #0#79, 1, "S"; |C_M #0#80, 1, "S";
  |C_M #0#82, 1, "S"; |C_M #0#83, 1, "S";
  |C_M #0#84, 1, "S"; |C_M #0#85, 1, "S";
  |PARA desde = 1; |SI desde [ 73; |HACIENDO desde = desde + 1;
        |C_M #0desde,1,"S";
  |SIGUE;
  |SI #0#74 = "A"; |ACABA; |FINSI;
  |SI #0#74 = "P";
      |C_M #0#2, 1, "N";
      |C_M #0#79, 1, "N";
      |C_M #0#80, 1, "N";
      |C_M #0#84, 1, "N";
      |C_M #0#85, 1, "N";
      xy = 39; hasta = 73;
  |FINSI;
  |SI #0#74 = "C";
      |C_M #0#1, 1, "N";
      |C_M #0#77, 1, "N";
      |C_M #0#78, 1, "N";
      |C_M #0#82, 1, "N";
      |C_M #0#83, 1, "N";
      xy = 4; hasta = 38;
  |FINSI;
  |PARA desde = xy;  |SI desde [ hasta;  |HACIENDO desde = desde + 1;
        |CAMPO_MODIFICA #0desde, 1,"N";
  |SIGUE;
|FCAL;

|CALCULO mayorsel; |TIPO 0;
  |SI Campo =  4; |Y #0#74 = "C"; |ACABA; |FINSI;
  |SI Campo = 39; |Y #0#74 = "P"; |ACABA; |FINSI;
  |HAZ mayor;

  modif1 = "N";    |SI #0Campo = "N"; modif1 = "S"; |FINSI;
  modif2 = #0Campo;

  |SI Campo = 4;
      |C_M #0#5,1,modif2;
      |C_M #0#6,1,modif2;
      |SI modif2 = "N";
          #0#5 = 0; |PINTA #0#5; #0#6 = 0; |PINTA #0#6;
      |FINSI;
  |SINO;
      |C_M #0#40,1,modif2;
      |C_M #0#41,1,modif2;
      |SI modif2 = "N";
          #0#40 = 0; |PINTA #0#40; #0#41 = 0; |PINTA #0#41;
      |FINSI;
  |FINSI;

  hasta = Campo + 34;
  |PARA desde = Campo + 3;  |SI desde [ hasta;  |HACIENDO desde = desde + 1;
        |CAMPO_MODIFICA #0desde, 1,modif1;
        |SI modif1 = "N";
            #0desde = 0; |PINTA #0desde;
        |FINSI;
  |SIGUE;
|FCAL;

|CALCULO saltacon1;
  |SI FSalida = 2; |ACABA; |FINSI;
  xy = Campo - 3;
  |SI xy =  4; |Y #0#74 = "C"; |ACABA; |FINSI;
  |SI xy = 39; |Y #0#74 = "P"; |ACABA; |FINSI;
  |SI #0xy ! "N"; |ACABA; |FINSI;
  |SI #0Campo = 0;
      |MENAV "    Error!!! Introduzca como minimo  UN CONCEPTO ";
      |ERROR;
  |FINSI;
|FCAL;

|CALCULO saltacon;
  hasta = 73;  xy = 39;
  |SI Campo < 39; hasta = 38; xy = 4; |FINSI;
  |SI xy =  4; |Y #0#74 = "C"; |ACABA; |FINSI;
  |SI xy = 39; |Y #0#74 = "P"; |ACABA; |FINSI;

  |SI #0xy ! "N"; |ACABA; |FINSI;  || ha pedido desde/hasta

  |PARA desde = Campo + 1;  |SI desde [ hasta;  |HACIENDO desde = desde + 1;
        |SI #0Campo = 0;
            |CAMPO_MODIFICA #0desde, 1, "N";
            #0desde = 0;
        |SINO;
            |CAMPO_MODIFICA #0desde, 1, "S";
        |FINSI;
  |SIGUE;
|FCAL;

|PROCESO TipoCarta;
     |C_M #0#88, 1, "S";
     |SI #0#87 ! 3;
         |C_M #0#88, 1, "N";
     |FINSI;
|FPRC;

|| ************************************************************************
*****************************************************************************
***                   Nuevo proceso Carta 500.000 ptas.                   ***
*****************************************************************************
*****************************************************************************
|PROCESO Trimestre;
  |SI enEjercicio > 2010;
      |SI #8#93 = "T";
          nCampo1 = 4 + Trimestre;
      |SINO;
          |SI Trimestre [ 3;                  nCampo1 = 5; |FINSI;
          |SI Trimestre > 3;|Y Trimestre [ 6; nCampo1 = 6; |FINSI;
          |SI Trimestre > 6;|Y Trimestre [ 9; nCampo1 = 7; |FINSI;
          |SI Trimestre > 9;                  nCampo1 = 8; |FINSI;
      |FINSI;
      #900nCampo1 = #900nCampo1 + nImporte;
  |FINSI;
|FPRC;

|PROCESO Trimestre901;
  |SI enEjercicio > 2010;
      |SI #8#93 = "T";
          nCampo1 = 4 + Trimestre;
      |SINO;
          |SI Trimestre [ 3;                  nCampo1 = 5; |FINSI;
          |SI Trimestre > 3;|Y Trimestre [ 6; nCampo1 = 6; |FINSI;
          |SI Trimestre > 6;|Y Trimestre [ 9; nCampo1 = 7; |FINSI;
          |SI Trimestre > 9;                  nCampo1 = 8; |FINSI;
      |FINSI;
      #901nCampo1 = #901nCampo1 + nImporte;
  |FINSI;
|FPRC;

|PROCESO Ventas;

   |SI #0#39 = "S";
      |SI #caivarep#6 < #0#40; |O #caivarep#6 > #0#41;
         |ACABA;
      |FINSI;
   |SINO;
      SwError = 1;
      |PARA Cont = 42; |SI Cont [ 73; |HACIENDO Cont = Cont + 1;
         |SI #caivarep#6 = #0Cont; SwError = 0; |SAL; |FINSI;
      |SIGUE;
      |SI SwError = 1; |ACABA; |FINSI;
   |FINSI;

   |SI Dobles = 1;
      |SI #caivarep#3 < FechaIni; |O #caivarep#3 > FechaFin; |ACABA; |FINSI;
   |FINSI;

   SwCont = 1;

|SI #0#81 = "C";
    #900#0 = #caivarep#4;
    |LEE 101#900=;
    |SI FSalida ! 0;
       |DDEFECTO #900;
       #900#0 = #caivarep#4;
       #900#1 = #caivarep#51;
       #900#3 = "C";
       #900#4 = #caivarep#5;
       #900#9 = #caivarep#50;
       |GRABA 020#900b;
    |FINSI;
    #900#2 = #900#2 + #caivarep#26;

    nImporte  = #caivarep#26;
    Trimestre = #caivarep#44;
    |HAZ Trimestre;

    |GRABA 020#900a;
    |LIBERA #900;
|SINO;
    #901#3 = "C";
    #901#1 = #caivarep#51;
    |LEE 101#901=;
    |SI FSalida ! 0;
        |DDEFECTO #901;
        #901#0 = #caivarep#4;
        #901#1 = #caivarep#51;
        #901#3 = "C";
        #901#4 = #caivarep#5;
        #901#9 = #caivarep#50;
        |GRABA 020#901b;
    |FINSI;
    #901#2 = #901#2 + #caivarep#26;

    nImporte = #caivarep#26;
    Trimestre = #caivarep#44;
    |HAZ Trimestre901;

    |GRABA 020#901a;
    |LIBERA #901;
|FINSI;
|FPRC;

|DEFBUCLE Ventas;
 #caivarep#1;
 4,51;
 00,"  ",000000, #0#79, #0#84;
 99,"zz",999999, #0#80, #0#85;
 ;
 NULL,Ventas;
|FINSI;

|| .......................................... Compras
|PROCESO Compras;
   |SI #0#4 = "S";
      |SI #caivasop#6 < #0#5; |O #caivasop#6 > #0#6;
          |ACABA;
      |FINSI;
   |SINO;
      SwError = 1;
      |PARA Cont = 7; |SI Cont [ 38; |HACIENDO Cont = Cont + 1;
         |SI #caivasop#6 = #0Cont; SwError = 0; |SAL; |FINSI;
      |SIGUE;
      |SI SwError = 1; |ACABA; |FINSI;
   |FINSI;

   |SI Dobles = 1;
      |SI #caivasop#3 < FechaIni; |O #caivasop#3 > FechaFin; |ACABA; |FINSI;
   |FINSI;

   SwCont = 1;

|SI #0#81 = "C";
   #900#0 = #caivasop#4;
   |LEE 101#900=;
   |SI FSalida ! 0;
      |DDEFECTO #900;
      #900#0 = #caivasop#4;
      #900#1 = #caivasop#51;
      #900#3 = "P";
      #900#4 = #caivasop#5;
      #900#9 = #caivasop#50;
      |GRABA 020#900b;
   |FINSI;
   #900#2 = #900#2 + #caivasop#26;

   nImporte  = #caivasop#26;
   Trimestre = #caivasop#44;
   |HAZ Trimestre;

   |GRABA 020#900a;
   |LIBERA #900;
|SINO;
   #901#3 = "P";
   #901#1 = #caivasop#51;
   |LEE 101#901=;
   |SI FSalida ! 0;
      |DDEFECTO #901;
      #901#0 = #caivasop#4;
      #901#1 = #caivasop#51;
      #901#3 = "P";
      #901#4 = #caivasop#5;
      #901#9 = #caivasop#50;
      |GRABA 020#901b;
   |FINSI;
   #901#2 = #901#2 + #caivasop#26;

   nImporte  = #caivasop#26;
   Trimestre = #caivasop#44;
   |HAZ Trimestre901;

   |GRABA 020#901a;
   |LIBERA #901;
|FINSI;
|FPRC;

|DEFBUCLE Compras;
   #caivasop#1;
   4, 51;
   00,"  ",000000, #0#77, #0#82;
   99,"zz",999999, #0#78, #0#83;
   ;
   NULL,Compras;
|FINSI;

|PROCESO MiraEmpresa;
   |SI FSalida = 2; |ACABA; |FINSI;
   |SI #cadatemp#0 = #48#2; |Y #cadatemp#1 =#48#3;
      |MENAV "    La empresa debe ser distinta a la actual";
      |ERROR;
   |FINSI;
|FPRC;

|| ***********************************************************************
|PROCESO MalPeriodo;
    nError = 1;
|FPRC;

|DEFBUCLE Ventas_Per;
    #caivarep#1;
    4,51,44;
    00,"  ",000000, #0#79, #0#84,  5;
    99,"zz",999999, #0#80, #0#85, 99;
    ;
    NULL,MalPeriodo;
|FINSI;

|DEFBUCLE Compras_Per;
   #caivasop#1;
   4, 51, 44;
   00,"  ",000000, #0#77, #0#82,  5;
   99,"zz",999999, #0#78, #0#83, 99;
   ;
   NULL,MalPeriodo;
|FINSI;

|| ***********************************************************************
|PROCESO ImprimeCta0;

   nNegativo = #900#2;
   |SI nNegativo < 0; |Y enEjercicio > 2010; nNegativo = - #900#2; |FINSI;
   |SI #900#3 = "C"; |Y nNegativo < #0#1; |ACABA; |FINSI;
   |SI #900#3 = "P"; |Y nNegativo < #0#2; |ACABA; |FINSI;

   #3#23 = #900#3;
   #3#10 = #900#0;
   #3#11 = #900#4;
   |LEE 001#3=;
   |SI FSalida ! 0;
       |DDEFECTO #3;
       cuenta = #900#0;
       digito = #900#4;
       nif    = #900#1;
       |HAZ lee_cta;
   |FINSI;
   #3#1 = #900#9;
   dir = #3#2;
   pob = #3#6;
   nom = #3#1;
   nif = #3#9;
   cp1 = #3#3;
   cp2 = #3#4;
   cp = ("00" + cp1) % -102 + ("000" + cp2) % -103;
   prov = #3#5;
   |SI #900#3 = "C"; cifra = #0#1; |SINO; cifra = #0#2; |FINSI;
   baseimp = #900#2;
   baseim1 = #900#5;
   baseim2 = #900#6;
   baseim3 = #900#7;
   baseim4 = #900#8;
   |PRINT;
   |PIEINF;
|FPRC;

|DEFBUCLE ImprimeCta;
 #900#1;
 ;
 "            ";
 "zzzzzzzzzzzz";
 ;
 NULL,ImprimeCta0;
|FIN;

|| ////////////////////////////////////////////////////////////

|PROCESO elNombre0;
 SwNom = 1;
 |ERROR10;
|FPRC;

|DEFBUCLE elNombre;
 #3#4;
 23;
 #901#1, #901#3;
 #901#1, #901#3;
 e;
 NULL, elNombre0;
|FIN;

|PROCESO ImprimeNIF0;

   nNegativo = #901#2;
   |SI nNegativo < 0; |Y enEjercicio > 2010; nNegativo = - #901#2; |FINSI;

   |SI #901#3 = "C"; |Y nNegativo < #0#1; |ACABA; |FINSI;
   |SI #901#3 = "P"; |Y nNegativo < #0#2; |ACABA; |FINSI;

   SwNom = 0;
   |SELECT #4#3;
   #3#9 = #901#1;
   |LEE 001#3=;
   |SI FSalida ! 0;
       |DDEFECTO #3;
       cuenta = #901#0;
       digito = #901#4;
       nif    = #901#1;
       |HAZ lee_cta;
   |FINSI;
   |SELECT #1#3;

   #3#1 = #901#9;
   dir = #3#2;
   pob = #3#6;
   nom = #3#1;
   nif = #3#9;
   cp1 = #3#3;
   cp2 = #3#4;
   cp = ("00" + cp1) % -102 + ("000" + cp2) % -103;
   prov = #3#5;
   |SI #901#3 = "C"; cifra = #0#1; |SINO; cifra = #0#2; |FINSI;
   baseimp = #901#2;
   baseim1 = #901#5;
   baseim2 = #901#6;
   baseim3 = #901#7;
   baseim4 = #901#8;
   |PRINT;
   |PIEINF;
|FPRC;

|DEFBUCLE ImprimeNif;
 #901#1;
 ;
 " ", "               ";
 "z", "zzzzzzzzzzzzzzz";
 ;
 NULL,ImprimeNIF0;
|FIN;

|| ************************************************************************
|CALCULO tipo3; |TIPO 3;

  aMoney = eaMoneda; |QBF aMoney;

  aFichero = ("nom" + Usuario) % 108;
  |NOME_DAT #900 aFichero;
  |DELINDEX #900;

  aFichero = ("nif" + Usuario) % 108;
  |NOME_DAT #901 aFichero;
  |DELINDEX #901;

   |ABRE #48;

   Comodin = ("00" + #48#26) % -102;
   |SI #48#26 ] 80;
      Year = "19" + Comodin;
   |SINO;
      Year = "20" + Comodin;
   |FINSI;
   Comodin = "01.01." + Year;
   FechaIni = Comodin;
   Comodin = "31.12." + Year;
   FechaFin = Comodin;

   |SI #48#11 ! 1;
      |PUSHV 0501 2380;
      |PINPA #0#6;
      |PINDA #0#6;
      |ENDATOS #1#6;
      |SI FSalida < 0; |CIERRA #48; |ACABA; |FINSI;
      |DFICB Path;
      |QBF Path;
      Path = Path + (("00000" + #cadatemp#0) % -105);
      Path = Path + #cadatemp#1 + "/";
      Dobles = 1;
   |SINO;
      Dobles = 0;
   |FINSI;
   |CIERRA #48;

   |HAZ fechas;

   |ABRE #8;
   |DDEFECTO #8;
   #8#0 = #48#2;
   #8#1 = #48#26;
   |LEE 000#8=;
   |CIERRA #8;
   |SI #8#93 = "T";
       nError = 0;
       |BUCLE Ventas_Per;
       |SI nError = 0;
           |BUCLE Compras_Per;
       |FINSI;
       |SI nError = 1;
           |MENAV "    Error en los periodos de Liquidacion Informados en Facturas";
           |CONFI "    SDesea recalcular ahora el Periodo de Liquidacion ";
           |SI FSalida = 0;
               |SUB_EJECUTA_NP "carecliq;AUTO";
           |SINO;
               |MENAV "    Proceso abortado";
               |ACABA;
           |FINSI;
       |FINSI;
   |FINSI;

   |ABRE #900;
   |ABRE #901;
   |SI #0#74 = "C";
      SwCont = 0;
      |BUCLE Ventas;
      |SI Dobles = 1;
         |PATH_DAT #1 Path;
         |BUCLE Ventas;
      |FINSI;
      |SI SwCont = 0; |CIERRA #900; |CIERRA #901; |ACABA; |FINSI;
   |FINSI;

   |SI #0#74 = "P";
      SwCont = 0;
      |BUCLE Compras;

      |SI Dobles = 1;
         |PATH_DAT #2 Path;
         |BUCLE Compras;
      |FINSI;
      |SI SwCont = 0; |CIERRA #900; |CIERRA #901; |ACABA; |FINSI;
   |FINSI;

   |SI #0#74 = "A";
      SwCont = 0;
      |BUCLE Ventas;
      |BUCLE Compras;
      |SI Dobles = 1;
         |PATH_DAT #1 Path;
         |PATH_DAT #2 Path;
         |BUCLE Ventas;
         |BUCLE Compras;
      |FINSI;
      |SI SwCont = 0; |CIERRA #900; |CIERRA #901; |ACABA; |FINSI;
   |FINSI;

   |CIERRA #900;
   |CIERRA #901;

   informe = inform1;
   |SI #0#87 = 2; informe = inform2; |FINSI;
   |SI #0#87 = 3; informe = #0#88; |FINSI;

   |SI informe = "        ";
       |MENAV "    Error en el Formato de la Carta";
       |ACABA;
   |FINSI;


   |IMPRE 0;
   |SI FSalida ! 0;  |ERROR;  |ACABA;  |FINSI;
   |INFOR informe;
   |SI FSalida ! 0;
       |MENAV "    Error en el Formato de la Carta";
       |FINIMP;
       |ERROR;
       |ACABA;
   |FINSI;

   |ABRE #3;
   |SI #0#81 = "C";
      |BUCLE ImprimeCta;
   |SINO;
      |BUCLE ImprimeNif;
   |FINSI;
   |CIERRA #3;

   |FININF;
   |FINIMP;

||   |DELINDEX #900;
||   |DELINDEX #901;
|FCAL;
|| ************************************************************************

|PROCESO fechas;
     var = #0#75 % 402;
     dia = var;
     |SI dia = 1;   mes = "Enero";      |FINSI;
     |SI dia = 2;   mes = "Febrero";    |FINSI;
     |SI dia = 3;   mes = "Marzo";      |FINSI;
     |SI dia = 4;   mes = "Abril";      |FINSI;
     |SI dia = 5;   mes = "Mayo";       |FINSI;
     |SI dia = 6;   mes = "Junio";      |FINSI;
     |SI dia = 7;   mes = "Julio";      |FINSI;
     |SI dia = 8;   mes = "Agosto";     |FINSI;
     |SI dia = 9;   mes = "Septiempre"; |FINSI;
     |SI dia = 10;  mes = "Octubre";    |FINSI;
     |SI dia = 11;  mes = "Noviembre";  |FINSI;
     |SI dia = 12;  mes = "Diciembre";  |FINSI;
     var = #0#75 % 102;
     dia = var;
     var = #0#75 % 704;
     any = var;
     emp = #0#76;
     |QBF emp;
     texto = blanco + blanco + emp + ", " + dia + " de " + mes + " de " + any;
     |QBF texto;
     texto = texto % -160;
     text1 = blanco + blanco + #30#4;
     |QBF text1;
     text1 = text1 % -160;
|FPRC;

|PROCESO lee_cta;
 #3#9   = nif;
 |ABRE #5;
 |DDEFECTO #5;
 #5#0 = cuenta;
 #5#1 = digito;
 |LEE 001#5=;
 |SI FSalida = 0;
     #3#1   = #5#2;
 |FINSI;
 |CIERRA #5;

 |SI aste ! "*";
     |ABRE #12;
     #12#0 = nif;
     |LEE 001#12=;
     |SI FSalida = 0;
         #3#9 =  #12#0;    ||dni
         #3#1 =  #12#1;    ||nombre
         alfa1 = #12#2; |QBF alfa1;
         |SI alfa1 ! ""; alfa1 = alfa1 + "/"; |FINSI;
         alfa1 = alfa1 + #12#3; |QBF alfa1;
         alfa2 = #12#4; |QBF alfa2;
         |SI alfa2 ! ""; alfa2 = ", " + alfa2; |FINSI;
         #3#2 =  alfa1 + alfa2;   ||direccion
         #3#3 =  #12#4;   ||numero
         #3#3 =  #12#7;   ||cod.pos -1-
         #3#4 =  #12#8;   ||cos.pos -2-
         #3#5 = #12#9;   ||provincia
         #3#6 = #12#10;  ||poblacion
     |FINSI;
     |CIERRA #12;
 |FINSI;
|FPRC;
*****************************************************************************
|PROCESO tipo_8; || controlar si existe ficha clientes

  |DIRECTORIO agi;
  |QBF agi;
  |PATH_DAT #23 agi;
  |ABRE #23;
  #23#0 = 1;
  |LEE 040#23=;
  |SI FSalida ! 0; aste = "*"; |CIERRA #23; |ACABA; |FINSI;
  |CIERRA #23;
  aste = #23#7;
  |QBF aste;
  |SI aste  = "*"; |ACABA; |FINSI;

   agi1   = #23#8; |QBF agi1;
   lonagi = agi1 % 0;
   num    = lonagi;
   num    = 100 + (num - 5);
   lonagi = num;
   agi2  = (agi1 % lonagi) + "pan/";
   |PATH_DAT #12 agi1;

|FPRC;

|PROGRAMA;
    |HAZ inicio_c;
    |ABRE #0;
    |LEE 001#0p;
    |SI FSalida ! 0;
        |DDEFECTO #0;
        |GRABA 020#0c;
    |FINSI;
    |CLS;
    |PINPA #0#0;
    |PINDA #0#0;

    |ENDATOS #1#0;
    |SI FSalida = 0;
        |GRABA 020#0a;
    |FINSI;
    |CIERRA #0;
|FPRO;
