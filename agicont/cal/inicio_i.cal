|| lee la empresa y carga niveles

|FICHEROS;
    catradia #8;
    canempre #30;
|FIN;

|VARIABLES;
    &fec1 = @;
    &fec2 = @;
    &cod_emp1 = "";
    &cod_emp2 = "";
    &clave1 = "";
    &clave2 = "";
    &cod1 = 0;
    &cod2 = 0;
    &empresa = "";
    &dir_fich = "";
    &dig1 = 0;
    &dig3 = 0;
    &dig4 = 0;
    &dig5 = 0;
    &dig6 = 0;
    &dig7 = 0;
    &dig8 = 0;
    &dig9 = 0;
    &work1 = "";
    &tra1 = 0;
    &mes1 = "";
    &dia1 = "";
    &codcon = 0;

 &EURO = 1;
 &EURODB = 0;
 &EURODV = 0;
 &EUROTEXTO = "Cambio de Moneda";
 &swOperacion = 0;  || 0 = Lectura / 1 = Alta
 &enEmpresa = 0;
 &enPeriodo = 0;
 &eaMoneda  = "";
 &eaDepar   = "";
|FIN;

|PROCESO inicio; |TIPO 8;
  |DFICE empresa;
  cod_emp1 = empresa  % -107;
  cod_emp2 = cod_emp1 %  106;
  clave1 = cod_emp2 %  105;
  clave2 = cod_emp2 % -101;
  cod1 = clave1;
  cod2 = clave2;
|ABRE #30;
    #30#2 = cod1;
    #30#3 = cod2;
|LEE 040#30=;
|SI FSalida ! 0;
    |MENAV "    No existe Empresa !!!";
    |ACABA;
|FINSI;
    dig1 = #30#11;
    dig3 = #30#13;
    dig4 = #30#14;
    dig5 = #30#15;
    dig6 = #30#16;
    dig7 = #30#17;
    dig8 = #30#18;
    dig9 = #30#19;
|CIERRA #30;
    clave2 = #30#26; |QBF clave2;
    clave2 = ("00" + clave2) % -102;
    cod2 = #30#26;
    tra1 = 100 + #30#11;
    mes1 = tra1 % -102;
    |SI cod2 < 80;
       work1 = "01." + mes1 + ".20" + clave2;
    |SINO;
       work1 = "01." + mes1 + ".19" + clave2;
    |FINSI;
    fec1 = work1;
    tra1 = 100 + #30#12;
    mes1 = tra1 % -102;

|SI #30#11 > #30#12;
        cod2 = cod2 + 1;
        |SI cod2 > 99; cod2 = cod2 - 100;    |FINSI;
|FINSI;
    dia1 = "31";
|SI #30#12 = 4; |O #30#12 = 6; |O #30#12 = 9; |O #30#12 = 11;
        dia1 = "30";
|FINSI;
|SI #30#12 = 2;
        dia1 = "28";
    |SI cod2 = 88; |O cod2 = 92; |O cod2 = 96; |O cod2 = 0; |O cod2 = 4;
            dia1 = 29;
    |FINSI;
|FINSI;
    tra1 = 100 + cod2;
    clave2 = tra1 % -102;
|SI cod2 < 80;
    work1 = dia1 + "." + mes1 + ".20" + clave2;
|SINO;
    work1 = dia1 + "." + mes1 + ".19" + clave2;
|FINSI;
    fec2 = work1;

|ABRE #8;
|DDEFECTO #8;
|LEE 041#8u;
|SI FSalida ! 0;
        #8#0 = 1;
|SINO;
        #8#0 = #8#0 + 1;
|FINSI;
|GRABA 020#8n;
    codcon = #8#0;
|CIERRA #8;

 eaDepar   = #canempre#24;
 enEmpresa = #canempre#2;
 enPeriodo = #canempre#3;
 swOperacion = 0; |SUB_EJECUTA "camoneda";
|FPRC;
