|FICHEROS;
 camoneda #130;
|FIN;

|VARIABLES;
  aMonedaC = "";    ||Moneda de Cierre
  aMonedaA = "";    ||Moneda de Apertura
  impMoneda = 0;
  mulMoneda = 0;
  nRedon = 0;
  nRedo1 = 0;
  nCam1  = 0;
  nCam2  = 0;
  nCam3  = 0;
|FIN;

|PROCESO MoCierre;
 |SI eaMoneda = "P";                  || pesetas
     EURO = 1 / 166.386;
     EURODB = 0;
     EURODV = 2;
 |FINSI;
 |SI eaMoneda = "E";                  || euros
     EURO = 166.386;
     EURODB = 2;
     EURODV = 0;
 |FINSI;
|FPRC;

|PROCESO ElCambioMoneda;
 |SI aMonedaC = aMonedaA; |ACABA; |FINSI;

 |SI aMonedaC = "P";                  || pesetas
     mulMoneda = 1 / 166.386;
 |FINSI;
 |SI aMonedaC = "E";                  || euros
     mulMoneda = 166.386;
 |FINSI;
 impMoneda = (impMoneda * mulMoneda) ! EURODB;
|FPRC;

|PROCESO MonedasI;
 |SI eaMoneda = "P";                  || pesetas
     EURO = 1 / 166.386;
     EURODB = 0;
     EURODV = 2;
 |FINSI;
 |SI eaMoneda = "E";                  || euros
     EURO = 166.386;
     EURODB = 2;
     EURODV = 0;
 |FINSI;
|FPRC;

|PROCESO LeeMonedaI;
   |ABRE #camoneda;
   #camoneda#0 = enEmpresa;
   #camoneda#1 = enPeriodo;
   |LEE 001#camoneda.=;
   |SI FSalida ! 0;
       |DDEFECTO #camoneda;
   |FINSI;
   |CIERRA #camoneda;
   eaMoneda = #camoneda#2;
   |HAZ MonedasI;
|FPRC;

|PROCESO ElCMoneda;
 |SI aMonedaC = aMonedaA; |ACABA; |FINSI;

 |SI aMonedaC = "P";                  || pesetas
     mulMoneda = 1 / 166.386;
     nRedon = 2;
 |FINSI;
 |SI aMonedaC = "E";                  || euros
     mulMoneda = 166.386;
     nRedon = 0;
 |FINSI;
 impMoneda = (impMoneda * mulMoneda) ! nRedon;
|FPRC;
