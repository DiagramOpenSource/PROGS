|FICHEROS;
     rey00106 #0;
     rem00100 #2;
     rem00016 #16;
     rem00017 #17;

     rew00101 #101;
     rew00102 #102;
|FIN;

|VARIABLES;
     aAlfa    = "";
     Comodin  = "";
     nContaA  = 0;
     nContaT  = 0;
     nSalirA  = 0;
     nSalirT  = 0;
     nConta   = 0;
     nEmpresa = 0;
     nCodigo  = 0;
     nSwCarga = 0;
     nCont    = 0;
|FIN;

|INCLUYE i_consul;
____________________________________/

|PROCESO Cuadro;
     |PUSHV 0501 2380;
     |BLANCO 1221 1556;
     |ATRI R;
     |PINTA 1221, "  COLOQUE EL PAPEL DEL MODELO 211   ";
     |PINTA 1321, aAlfa;
     |PINTA 1421, "  EN LA IMPRESORA Y PULSE UNA TECLA ";
     |PINTA 1521, "  CUANDO ESTE PREPARADO.            ";
     |ATRI r;
     |PAUSA;
     |POPV;
|FPRC;

|PROCESO Imprime;
     #2#0 = #17#0;
     |LEE 040#2=;
     |SI FSalida ! 0;  |DDEFECTO #2; |FINSI;

     aAlfa =  "  DECLARACION DOCUMENTO DE INGRESO  ";
     |HAZ Cuadro;

     |DDEFECTO #101;
     |INFOR "m211h001";
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     #101#1 = #2#71;
     #101#2 = #2#72;
     #101#3 = (("00" + #2#69)  % -102) + (("000" + #2#70)  % -103);
     #101#4 = #17#30 % 102;
     #101#5 = #17#30 % 402;
     #101#6 = #17#30 % -104;

     nSwCarga = 1;
     #16#0    = #17#0;
     #16#1    = #17#1;
     #16#2    = "A";
     #16#3    = 1;
     |LEE 040#16];
     |SI FSalida ! 0;    nSwCarga = 0;   |FINSI;
     |SI #16#0 ! #17#0;  nSwCarga = 0;   |FINSI;
     |SI #16#1 ! #17#1;  nSwCarga = 0;   |FINSI;
     |SI #16#2 ! "A";    nSwCarga = 0;   |FINSI;

     |SI nSwCarga = 1;
         #101#7  = #16#4;
         #101#8  = #16#5;
         #101#9  = #16#8;
         #101#10 = #17#33;
         #101#11 = #16#9;
         #101#12 = #16#10;
         #101#13 = #16#11;
         #101#14 = #16#12;
         #101#15 = #16#13;
         #101#16 = #16#14;
         #101#18 = (("00" + #16#15)  % -102) + (("000" + #16#16)  % -103);
         #101#19 = #16#17;
         #101#20 = #16#18;
         #101#21 = ("000" + #16#19) % -103;
     |FINSI;

     nSwCarga = 1;
     #16#0    = #17#0;
     #16#1    = #17#1;
     #16#2    = "T";
     #16#3    = 1;
     |LEE 040#16];
     |SI FSalida ! 0;    nSwCarga = 0;   |FINSI;
     |SI #16#0 ! #17#0;  nSwCarga = 0;   |FINSI;
     |SI #16#1 ! #17#1;  nSwCarga = 0;   |FINSI;
     |SI #16#2 ! "T";    nSwCarga = 0;   |FINSI;

     |SI nSwCarga = 1;
         #101#22 = #16#4;
         #101#23 = #16#5;
         #101#24 = #16#8;
         #101#25 = #17#34;
         #101#26 = #16#9 + " " + #16#10 + " " + #16#11 + " " + #16#12 + " " + #16#13 + " " + #16#14;
         #101#27 = #16#18;
         #101#28 = ("000" + #16#19) % -103;
     |FINSI;

     #101#29 = #17#17;
     #101#30 = #17#18;
     #101#31 = #17#19;
     #101#32 = #17#20;
     #101#33 = #17#21;
     #101#34 = #17#22;
     #101#35 = #17#23;
     #101#36 = #17#24;
     #101#37 = #17#25;
     #101#38 = (("00" + #17#26)  % -102) + (("000" + #17#27)  % -103);
     #101#39 = #17#28;
     #101#40 = #17#29;

     #101#41 = #17#2;
     #101#42 = #17#3;
     #101#43 = #17#4;
     #101#44 = #17#5;
     #101#45 = #17#6;
     #101#46 = #17#7;
     #101#47 = (("00" + #17#8)  % -102) + (("000" + #17#9)  % -103);
     #101#48 = #17#10;
     #101#49 = #17#11;
     #101#50 = #17#12;
     #101#51 = #17#13;
     #101#52 = #17#15;
     #101#53 = #17#14;
     #101#54 = #17#16;

     #101#55 = #17#31;
     #101#56 = #17#32;

     #101#57 = #101#19;
     #101#58 = #0#18 % 102;
     #101#59 = #0#18 % 402;
     #101#60 = #0#18 % -104;

     |PRINT;
     |PIEINF;
     |FININF;

     #17#35 = "S";
     |GRABA 020#17a;
     |LIBERA #17;


     |SI #17#33 [ 1;  |Y #17#34 [ 1;  |ACABA;  |FINSI;

     nContaA = 1;
     nContaT = 1;
     nSalirA = 0;
     nSalirT = 0;

     aAlfa =  "        ANEXO AL MODELO 211         ";
     |PARA; |SI; |HACIENDO;
        |HAZ Cuadro;
        |INFOR "m211h002";
        |SI FSalida ! 0;  |SAL;  |FINSI;

        |PARA nConta = 0;  |SI nConta [ 59;  |HACIENDO;
              #16#0 = #17#0;
              #16#1 = #17#1;
              #16#2 = "A";
              #16#3 = nContaA;
              |LEE 040#16];
              |SI FSalida = 0; |Y #16#0 = #17#0; |Y #16#1 = #17#1; |Y #16#2 = "A";
                  nContaA = nContaA + 1;
              |SINO;
                  |DDEFECTO #16;
                  nSalirA = 1;
              |FINSI;

              nConta = nConta + 1;  #102nConta = #16#4;
              nConta = nConta + 1;  #102nConta = #16#5;
              nConta = nConta + 1;  #102nConta = #16#8;
              nConta = nConta + 1;  #102nConta = #16#6;
              nConta = nConta + 1;  #102nConta = #16#7;
              nConta = nConta + 1;  #102nConta = #16#9;
              nConta = nConta + 1;  #102nConta = #16#10;
              nConta = nConta + 1;  #102nConta = #16#11;
              nConta = nConta + 1;  #102nConta = #16#12;
              nConta = nConta + 1;  #102nConta = #16#13;
              nConta = nConta + 1;  #102nConta = #16#14;
              nConta = nConta + 1;  #102nConta = (#16#15 * 1000) + #16#16;
              nConta = nConta + 1;  #102nConta = #16#17;
              nConta = nConta + 1;  #102nConta = #16#18;
              nConta = nConta + 1;  #102nConta = #16#19;

           |PARA nCont = 121; |SI nCont [ 128; |HACIENDO nCont = nCont + 1;
              Comodin = #102nCont; |QBF Comodin;
              |SI Comodin = "";
                 #102nCont = #16#20;
                 |SAL;
              |FINSI;
           |SIGUE;
        |SIGUE;


        |PARA nConta = 60;  |SI nConta [ 119;  |HACIENDO;
              #16#0 = #17#0;
              #16#1 = #17#1;
              #16#2 = "T";
              #16#3 = nContaT;
              |LEE 040#16];
              |SI FSalida = 0; |Y #16#0 = #17#0; |Y #16#1 = #17#1; |Y #16#2 = "T";
                  nContaT = nContaT + 1;
              |SINO;
                  |DDEFECTO #16;
                  nSalirT = 1;
              |FINSI;

              nConta = nConta + 1;  #102nConta = #16#4;
              nConta = nConta + 1;  #102nConta = #16#5;
              nConta = nConta + 1;  #102nConta = #16#8;
              nConta = nConta + 1;  #102nConta = #16#6;
              nConta = nConta + 1;  #102nConta = #16#7;
              nConta = nConta + 1;  #102nConta = #16#9;
              nConta = nConta + 1;  #102nConta = #16#10;
              nConta = nConta + 1;  #102nConta = #16#11;
              nConta = nConta + 1;  #102nConta = #16#12;
              nConta = nConta + 1;  #102nConta = #16#13;
              nConta = nConta + 1;  #102nConta = #16#14;
              nConta = nConta + 1;  #102nConta = (("00" + #16#15)  % -102) + (("000" + #16#16)  % -103);
              nConta = nConta + 1;  #102nConta = #16#17;
              nConta = nConta + 1;  #102nConta = #16#18;
              nConta = nConta + 1;  #102nConta = #16#19;
        |SIGUE;

        |PRINT;
        |PIEINF;
        |FININF;

        |SI nSalirA = 1;  |Y nSalirT = 1;
            |SAL;
        |FINSI;
     |SIGUE;
|FPRC;

|DEFBUCLE agim0017;
     #17#1;
     ;
     nCodigo, 00;
     nCodigo, 99;
     be;
     NULL, Imprime;
|FIN;

|PROCESO Tipo3;  |TIPO 3;
     |IMPRE 0;
     |PARA nEmpresa = 0; |SI nEmpresa [ 17; |HACIENDO nEmpresa = nEmpresa + 1;
           |SI #0nEmpresa ! 0;
               nCodigo = #0nEmpresa;
               |ABRE #16;
               |ABRE #2;
               |BUCLE agim0017;
               |CIERRA #16;
               |CIERRA #2;
           |FINSI;
     |SIGUE;
     |FINIMP;
|FPRC;
