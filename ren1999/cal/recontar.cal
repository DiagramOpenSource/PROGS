|FICHEROS;
     recontar #0;
     reconfac #1;
     reconcep #2;
     :/facturar/def/asconcep #3;
|FIN;

|VARIABLES;
     alfa1 = "";
     alfa2 = "";
     alfa3 = "";
     alfa4 = "";
     nume1 = 0;
     nume2 = 0;
     nume3 = 0;
     nume4 = 0;
     fech1 = @;
     fech2 = @;
     fech3 = @;
     fech4 = @;
     primera = 0;
     cuarenta = " ";
     putada = "";
     factu = "";
     path = "";

     &eaPathFacturar = "";
|FIN;

|PROCESO leecontrol; |TIPO 7;
|HAZ BusquedaApli;

|ABRE #1;
|LEE 001#1p;
|SI FSalida ! 0;
    |DDEFECTO #1;
|FINSI;
    putada = eaPathFacturar;
|CIERRA #1;
    path = #1#1;  path = "00" + path;  path = path % -102;
    path = putada + path + "/";
|FPRC;

|PROCESO pintadas; |TIPO 13;
|HAZ leeconcep1;
|HAZ leeconcep2;
|FPRC;

|PROCESO leeconcep1; |TIPO 0;
|SI putada = "*";
    |ABRE #2;
        #2#0 = #0#3;
        #2#1 = #0#4;
    |LEE 001#2=;
    |SI FSalida ! 0;
        |DDEFECTO #2;
    |FINSI;
    |ATRI I;
    |PINTA 1123, #2#2;
    |ATRI 0;
    |CIERRA #2;
|SINO;
    |PATH_DAT #3 path;
    |ABRE #3;
        #3#0 = #0#3;
        #3#1 = #0#4;
    |LEE 001#3=;
    |SI FSalida ! 0;
        |DDEFECTO #3;
    |FINSI;
    |ATRI I;
    |PINTA 1123, #3#2;
    |ATRI 0;
    |CIERRA #3;
|FINSI;
|FPRC;

|PROCESO leeconcep2; |TIPO 0;
|SI putada = "*";
    |ABRE #2;
        #2#0 = #0#7;
        #2#1 = #0#8;
    |LEE 001#2=;
    |SI FSalida ! 0;
        |DDEFECTO #2;
    |FINSI;
    |ATRI I;
    |PINTA 1723, #2#2;
    |ATRI 0;
    |CIERRA #2;
|SINO;
    |PATH_DAT #3 path;
    |ABRE #3;
        #3#0 = #0#7;
        #3#1 = #0#8;
    |LEE 001#3=;
    |SI FSalida ! 0;
        |DDEFECTO #3;
    |FINSI;
    |ATRI I;
    |PINTA 1723, #3#2;
    |ATRI 0;
    |CIERRA #3;
|FINSI;
|FPRC;

|PROCESO noentres1; |TIPO 0;
|SI #0#2 = "N";
    |CAMPO_MODIFICA #0#3, 1, "N";
    |CAMPO_MODIFICA #0#4, 1, "N";
    |CAMPO_MODIFICA #0#5, 1, "N";
|SINO;
    |CAMPO_MODIFICA #0#3, 1, "S";
    |CAMPO_MODIFICA #0#4, 1, "S";
    |CAMPO_MODIFICA #0#5, 1, "S";
|FINSI;
|FPRC;

|PROCESO noentres2; |TIPO 0;
|SI #0#6 = "N";
    |CAMPO_MODIFICA #0#07, 1, "N";
    |CAMPO_MODIFICA #0#08, 1, "N";
    |CAMPO_MODIFICA #0#09, 1, "N";
    |CAMPO_MODIFICA #0#10, 1, "N";
    |CAMPO_MODIFICA #0#11, 1, "N";
|SINO;
    |CAMPO_MODIFICA #0#07, 1, "S";
    |CAMPO_MODIFICA #0#08, 1, "S";
    |CAMPO_MODIFICA #0#09, 1, "S";
    |CAMPO_MODIFICA #0#10, 1, "S";
    |CAMPO_MODIFICA #0#11, 1, "S";
|FINSI;
|FPRC;
