|FICHEROS;
     rezcap99 #0;
     reacceso #99;
     rem00100 #100;
     rem00101 #101;

     repoblac #500;
     rehacien #501;
     reauxpai #502;
     rerenpre #503;
     recofisc #504;
     reauxdiv #505;
     repobibi #506;
     reauxval #507;
     rem02000 #200;

     rentaa99@ #900;
     rentab99@ #901;
     rentac99@ #902;

     acceso98@ #997;
     rentaa98@ #998;
     rentab98@ #999;
     rentac98@ #1000;

     deduc198@ #1010;
|FIN;

|VARIABLES;
     aAlfa        = "";
     aAlfa1       = "";
     aAlfa2       = "";
     aDef         = "";
     aFichero     = "";
     aPathRenta98 = "";
     aPathRenta99 = "";
     aPathDef99   = "";
     aTipoIni     = "";
     aTipoFin     = "";
     aTipoDecIni  = "";
     aTipoDecFin  = "";
     aCampo2      = "";
     aCampo3      = "";
     aCampo4      = "";
     aCampo5      = "";
     aCampo6      = "";
     aCampo7      = "";
     aCampo8      = "";
     aCampo9      = "";
     aCampo10     = "";
     aCampo11     = "";
     aCampo13     = "";
     aCampo18     = "";
     aCampo21     = "";

     nCampo       = 0;
     nFamiliar    = 0;
     nTrabajo     = 0;
     nSwPasada    = 0;
     nValor       = 0;
     nCampos1     = 0;
     nCampos2     = 0;
     nPendiente   = 0;
     nLinea       = 0;
     nPdte98      = 0;
     nConta       = 0;

     &enEmpresa   = 0;
     &eaPrograma  = "";
     &eaPunto     = "";
     &eaLetra     = "";

     {40}pDeduccion = 0;
|FIN;

|PROCESO Directorios; |TIPO 7;
     |DBASS aAlfa;
     #0#0 = aAlfa + "ren1998";
     #0#1 = "fich";
     |PINTA #0#0;
     |PINTA #0#1;
|FPRC;

|PROCESO Parrilla;
     |SI #0#2 = 0;
         #0#2 = 0;  |PINTA #0#2;
         #0#3 = 0;  |PINTA #0#3;  |C_M #0#3, 1, "N";
         |PARA nCampo = 4;  |SI nCampo [ 23;  |HACIENDO nCampo = nCampo + 1;
               |C_M #0nCampo, 1, "S";
         |SIGUE;
     |SINO;
         |C_M #0#2, 1, "S";
         |C_M #0#3, 1, "S";
         |PARA nCampo = 4;  |SI nCampo [ 23;  |HACIENDO nCampo = nCampo + 1;
               |C_M #0nCampo, 1, "N";
               #0nCampo = 0;  |PINTA #0nCampo;
         |SIGUE;
     |FINSI;
|FPRC;

|PROCESO ModInmuebles;
     |C_M #0#29, 1, "S";
     |C_M #0#30, 1, "S";
     |SI #0#25 = "N";
         |C_M #0#29, 1, "N";  #0#29 = "N";  |PINTA #0#29;
         |C_M #0#30, 1, "N";  #0#30 = "N";  |PINTA #0#30;
     |FINSI;

     |C_M #0#31, 1, "S";
     |SI #0#30 = "N";
         |C_M #0#31, 1, "N";  #0#31 = 0;    |PINTA #0#31;
     |FINSI;
|FPRC;

||컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|| DATOS CONTRIBUYENTES
||컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

|PROCESO NoMasContri;
     |SI #0Campo = 0;
         |PARA nCampo = Campo + 1;  |SI nCampo [ 23;  |HACIENDO nCampo = nCampo + 1;
               #0Campo = 0;  |C_M #0nCampo, 1, "N";
         |SIGUE;
     |SINO;
         |PARA nCampo = Campo + 1;  |SI nCampo [ 23;  |HACIENDO nCampo = nCampo + 1;
               |C_M #0nCampo, 1, "S";
         |SIGUE;
     |FINSI;
|FPRC;

|PROCESO Autonomias;
     |ABRE #504;
     #504#0 = #100#20;
     |LEE 040#504=;
     |SI FSalida ! 0;  |DDEFECTO #504;  |FINSI;

     #100#11 = #504#3;

     #504#0 = #100#50;
     |LEE 040#504=;
     |SI FSalida ! 0;  |DDEFECTO #504;  |FINSI;

     #100#43 = #504#3;

     |CIERRA #504;
|FPRC;

|PROCESO PasaDPersonales;
     #99#0 = #998#0;
     |LEE 101#99=;
     |SI FSalida ! 0;
         |DDEFECTO #99;
         #99#0 = #998#0;
         |GRABA 020#99b;
     |FINSI;
     #99#1 = #998#1;
     #99#2 = #998#2;
     |GRABA 020#99a;
     |LIBERA #99;

     #100#0 = #998#0;
     |LEE 101#100=;
     |SI FSalida ! 0;
         |DDEFECTO #100;
         #100#0 = #998#0;
         |GRABA 020#100b;
     |FINSI;
     #100#1  = #998#2;
     #100#2  = #998#209;
     #100#3  = #998#210;
     #100#4  = #998#211;
     #100#5  = #998#1;
     #100#6  = "S";
     |SI #998#30 ! "    ";  #100#6 = "C";  |FINSI;
     #100#7  = #998#3;
     |SI #998#5 ! "N";      #100#8 = 33;   |FINSI;
     #100#10 = #998#4;
     #100#12 = #998#15;
     #100#13 = #998#26;
     |SI #100#12 = #100#13;  #100#13 = "";  |FINSI;
     #100#14 = #998#6;
     #100#15 = #998#7;
     #100#16 = #998#8;
     #100#17 = #998#9;
     #100#18 = #998#10;
     #100#19 = #998#11;
     #100#20 = #998#12;
     #100#21 = #998#13;
     #100#22 = #998#14;
     #100#23 = #998#16;
     #100#24 = #998#17;
     #100#25 = #998#18;
     #100#26 = #998#19;
     #100#27 = #998#20;
     #100#28 = #998#21;
     #100#29 = #998#22;
     #100#30 = #998#57;
     #100#31 = #998#58;
     #100#32 = #998#25;
     #100#33 = #998#27;
     #100#34 = #998#208;
     |SI #998#30 ! "    ";
         #100#35 = #998#29;
         #100#36 = #998#212;
         #100#37 = #998#213;
         #100#38 = #998#214;
         #100#39 = #998#28;
         #100#40 = #998#30;
         |SI #998#31 ! "N";      #100#41 = 33;   |FINSI;
         #100#44 = #998#6;
         #100#45 = #998#7;
         #100#46 = #998#8;
         #100#47 = #998#9;
         #100#48 = #998#10;
         #100#49 = #998#11;
         #100#50 = #998#12;
         #100#51 = #998#13;
         #100#52 = #998#14;
         #100#54 = #998#176;
     |FINSI;
     #100#53 = #998#175;
     #100#55 = #998#174;
     |SI #998#32 =  "X";  #100#59 = "I";  #100#60 = "I";  |FINSI;
     |SI #998#33 =  "X";  #100#59 = "O";  #100#60 = "O";  |FINSI;
     #100#65 = #998#44;
     #100#66 = #998#45;
     #100#67 = #998#46;
     #100#68 = #998#47;
     #100#69 = #998#40;
     #100#70 = #998#41;
     #100#71 = #998#42;
     #100#72 = #998#43;
     #100#73 = #998#144;
     #100#74 = #998#145;
     #100#75 = #998#146;
     #100#76 = #998#147;
     #100#77 = #998#193;
     #100#78 = #998#148;
     #100#79 = #998#192;
     #100#80 = #998#149;
     #100#81 = #998#150;
     #100#82 = #998#151;
     #100#83 = #998#152;

     |HAZ Autonomias;

     |GRABA 020#100a;
     |LIBERA #100;

     |PARA nFamiliar = 68;  |SI nFamiliar [ 77;  |HACIENDO nFamiliar = nFamiliar + 1;
           |SI #998nFamiliar ! "    ";
               #101#0 = #998#0;
               #101#1 = nFamiliar - 67;
               |LEE 101#101=;
               |SI FSalida ! 0;
                   |DDEFECTO #101;
                   #101#0 = #998#0;
                   #101#1 = nFamiliar - 67;
                   |GRABA 020#101b;
               |FINSI;
               nTrabajo = nFamiliar - 20;  #101#2 = #998nTrabajo;
               nTrabajo = nFamiliar - 10;  #101#3 = #998nTrabajo;
               nTrabajo = nFamiliar + 96;
               |SI #998nTrabajo = "H";  |O #998nTrabajo = "D";
                   #101#4 = "DESCENDIENTE";
               |SINO;
                   #101#4 = "ASCENDIENTE";
               |FINSI;
               nTrabajo = nFamiliar;       #101#5 = #998nTrabajo;
               nTrabajo = nFamiliar + 20;
               |SI #998nTrabajo ! "N";
                   #101#6 = 33;
               |FINSI;
               nTrabajo = nFamiliar + 86;
               |SI #998nTrabajo = "T";  #101#7 = "1";  |FINSI;
               |SI #998nTrabajo = "C";  #101#7 = "2";  |FINSI;
               |SI #101#1 = #998#98;    #101#10 = #998#177;  |FINSI;
               |SI #101#1 = #998#99;    #101#10 = #998#178;  |FINSI;
               |SI #101#1 = #998#100;   #101#10 = #998#179;  |FINSI;
               |SI #101#1 = #998#101;   #101#10 = #998#180;  |FINSI;
               |SI #101#10 ! "                    ";
                   #101#13 = "S";
               |FINSI;

               |GRABA 020#101a;
               |LIBERA #101;
           |FINSI;
     |SIGUE;

     eaPrograma = "rem00100";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|DEFBUCLE redatc98;
     #998#1001;
     ;
     enEmpresa;
     enEmpresa;
     ;
     NULL, PasaDPersonales;
|FIN;

|PROCESO DatosPersonales;
     aDef = #0#0 + "/def/redatcon.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentaa98@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def redatcon.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #998 aPathRenta98;

     |ABRE #99;
     |ABRE #100;
     |ABRE #101;
     |BUCLE redatc98;
     |CIERRA #99;
     |CIERRA #100;
     |CIERRA #101;

     |ABRE #998;  |CIERRA #998;  |DESCARGA_DEF #rentaa98@;
|FPRC;

||컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|| RENDIMIENTOS DEL TRABAJO
||컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

|PROCESO PasaTrabajo99;
     |SI nSwPasada = 0;
         |DDEFECTO #900;
         #900#0 = #998#0;
         #900#1 = 1;
         |LEE 040#900];
         |SI FSalida = 0;  |Y #900#0 = #998#0;
             |ACABA;
         |FINSI;
         nSwPasada = 1;
     |FINSI;

     |DDEFECTO #900;
     #900#0 = #998#0;
     #900#1 = #998#1;
     |SI #998#2 = "T";  #900#2 = "TITULAR   ";  |FINSI;
     |SI #998#2 = "C";  #900#2 = "CONYUGE   ";  |FINSI;
     |SI #998#2 = "1";  #900#2 = "1 FAMILIAR";  |FINSI;
     |SI #998#2 = "2";  #900#2 = "2 FAMILIAR";  |FINSI;
     |SI #998#2 = "3";  #900#2 = "3 FAMILIAR";  |FINSI;
     |SI #998#2 = "4";  #900#2 = "4 FAMILIAR";  |FINSI;
     |SI #998#2 = "G";  #900#2 = "GANANCIAL ";  |FINSI;
     |SI #998#2 = "V";  #900#2 = "VARIOS    ";  |FINSI;
     #900#3 = "X";
     #900#4 = 0;
     #900#5 = #998#4;
     #900#8 = #998#14;
     #900#7 = #998#10;
     |GRABA 020#900n;
     |LIBERA #900;

     eaPrograma = "rem00020";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|DEFBUCLE rerendtr;
     #998#1002;
     ;
     enEmpresa, 01;
     enEmpresa, 99;
     ;
     NULL, PasaTrabajo99;
|FIN;

|PROCESO Trabajo;
     aDef = #0#0 + "/def/rerendtr.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentaa98@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rerendtr.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef = aPathDef99 + "rem00020.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentaa99@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00020.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #998 aPathRenta98;

     nSwPasada = 0;
     |ABRE #900;
     |BUCLE rerendtr;
     |CIERRA #900;

     |ABRE #900;  |CIERRA #900;  |DESCARGA_DEF #rentaa99@;
     |ABRE #998;  |CIERRA #998;  |DESCARGA_DEF #rentaa98@;
|FPRC;

||컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|| RENDIMIENTOS DEL CAPITAL INMOBILIARIO
||컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

|PROCESO PasaInmueble99;
     |SI #998#31 = "S";  |ACABA;  |FINSI;

     |SI nSwPasada = 0;
         |DDEFECTO #900;
         #900#0 = #998#0;
         #900#1 = 1;
         |LEE 040#900];
         |SI FSalida = 0;  |Y #900#0 = #998#0;
             |ACABA;
         |FINSI;
         nSwPasada = 1;
     |FINSI;

     |DDEFECTO #900;
     #900#0 = #998#0;
     #900#1 = #998#1;
     |SI #998#2 = "T";  #900#2 = "TITULAR   ";  |FINSI;
     |SI #998#2 = "C";  #900#2 = "CONYUGE   ";  |FINSI;
     |SI #998#2 = "1";  #900#2 = "1 FAMILIAR";  |FINSI;
     |SI #998#2 = "2";  #900#2 = "2 FAMILIAR";  |FINSI;
     |SI #998#2 = "3";  #900#2 = "3 FAMILIAR";  |FINSI;
     |SI #998#2 = "4";  #900#2 = "4 FAMILIAR";  |FINSI;
     |SI #998#2 = "G";  #900#2 = "GANANCIAL ";  |FINSI;
     |SI #998#2 = "V";  #900#2 = "VARIOS    ";  |FINSI;
     #900#3  = "X";
     #900#4  = 0;
     #900#5  = #998#49;
     #900#6  = #998#50;
     #900#7  = #998#51;
     #900#8  = #998#52;
     #900#9  = #998#53;
     #900#10 = #998#54;
     #900#13 = #998#5;
     #900#14 = #998#72;
     #900#15 = #998#8;

     |SI #0#30 = "S";
         #900#15 = (N\ #900#15 + (#900#15 % #0#31));
     |FINSI;

     |SI #0#29 = "S";
         |ABRE #506;
         #506#0 = #998#6;
         #506#1 = #998#7;
         |LEE 040#506=;
         |SI FSalida ! 0; |DDEFECTO #506; |FINSI;
         |CIERRA #506;

         nValor = ((#998#9 / #506#2) * #506#3) % #0#31;

         |SI #506#3 ] #506#2;
             #900#21 = (N\ #998#9 + nValor);
         |SINO;
             #900#21 = (N\ #998#9 - nValor);
         |FINSI;
     |FINSI;

     #900#16  = #998#16;
     #900#17  = #998#71;
     #900#18  = #998#4;
     |SI #998#13 = "S";  #900#18 = #998#13;  |FINSI;
     #900#19  = #998#11;
     #900#20  = #998#12;
     #900#25  = #998#18;
     #900#26  = #998#17;
     #900#27  = #998#19;
     #900#29  = #998#20;
     #900#36  = #998#22;
     #900#104 = #998#15;
     #900#105 = #998#6;
     #900#106 = #998#7;
     |SI #998#21 = "S";
         #900#31 = 365;
     |SINO;
         |SI #998#13 = "H";
             #900#30 = 365;
         |SINO;
             #900#32 = 365;
         |FINSI;
     |FINSI;

     |GRABA 020#900n;
     |LIBERA #900;

     eaPrograma = "rem00021";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|DEFBUCLE recapinm;
     #998#1002;
     ;
     enEmpresa, 01;
     enEmpresa, 99;
     ;
     NULL, PasaInmueble99;
|FIN;

|PROCESO Inmuebles;
     aDef = #0#0 + "/def/recapinm.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentaa98@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def recapinm.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef = aPathDef99 + "rem00021.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentaa99@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00021.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #998 aPathRenta98;

     nSwPasada = 0;
     |ABRE #900;
     |BUCLE recapinm;
     |CIERRA #900;

     |ABRE #900;  |CIERRA #900;  |DESCARGA_DEF #rentaa99@;
     |ABRE #998;  |CIERRA #998;  |DESCARGA_DEF #rentaa98@;
|FPRC;

||컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|| RENDIMIENTOS DEL CAPITAL MOBILIARIO
||컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

|PROCESO BorraValores;
     #507#5 = 0;
     |PDEFECTO #507, 7, 15;
     |GRABA 020#507a;
     |LIBERA #507;
|FPRC;

|DEFBUCLE reauxval;
     #507#1;
     ;
     "    ";
     "zzzz";
     be;
     NULL, BorraValores;
|FIN;

|PROCESO PasaBolsa99;
     |SI nSwPasada = 0;
         |DDEFECTO #900;
         #900#0 = #998#0;
         #900#1 = 1;
         |LEE 040#900];
         |SI FSalida = 0;  |Y #900#0 = #998#0;
             |ACABA;
         |FINSI;
         nSwPasada = 1;
     |FINSI;

     |DDEFECTO #900;
     #900#0 = #998#0;
     #900#1 = 99;
     |LEE 040#900];
     |SI FSalida = 0;
         |LEE 040#900a;
     |SINO;
         |LEE 040#900u;
     |FINSI;

     |SI FSalida = 0; |Y #900#0 = #998#0;
         nLinea = #900#1 + 1;
     |SINO;
         nLinea = 1;
     |FINSI;

     |DDEFECTO #900;
     #900#0 = #998#0;
     #900#1 = nLinea;
     |SI #998#2 = "T";  #900#2 = "TITULAR   ";  |FINSI;
     |SI #998#2 = "C";  #900#2 = "CONYUGE   ";  |FINSI;
     |SI #998#2 = "1";  #900#2 = "1 FAMILIAR";  |FINSI;
     |SI #998#2 = "2";  #900#2 = "2 FAMILIAR";  |FINSI;
     |SI #998#2 = "3";  #900#2 = "3 FAMILIAR";  |FINSI;
     |SI #998#2 = "4";  #900#2 = "4 FAMILIAR";  |FINSI;
     |SI #998#2 = "G";  #900#2 = "GANANCIAL ";  |FINSI;
     |SI #998#2 = "V";  #900#2 = "VARIOS    ";  |FINSI;
     #900#3  = "X";
     #900#4  = 0;
     #900#5  = #998#7;
     #900#6  = #998#8;
     #900#7  = #998#9;
     #900#8  = #998#10;
     #900#9  = #998#11;
     #900#10 = #998#12;
     #900#11 = #998#43;
     #900#12 = 0;
     #900#13 = #998#5;
     #900#14 = #998#6;
     #900#16 = #998#13;
     #900#17 = #998#14;
     #900#18 = #998#15;

     |GRABA 020#900n;
     |LIBERA #900;

     |SI #998#16 ! 0;
         #901#0   = #900#0;
         #901#1   = #900#1;
         #901#2   = #998#18;
         #901#3   = 01;
         #901#4   = "C";
         #901#5   = #998#16;
         #901#6   = #998#18;
         #901#7   = #998#17;
         #901#8   = (N\ #901#5 * #901#7);
         |GRABA 020#901n;
     |FINSI;

     eaPrograma = "rem00022";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|DEFBUCLE revalore;
     #998#1002;
     ;
     enEmpresa, 01;
     enEmpresa, 99;
     ;
     NULL, PasaBolsa99;
|FIN;

|PROCESO Mobiliario1;
     aDef = #0#0 + "/def/revalore.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentaa98@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def recapinm.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef = aPathDef99 + "rem00022.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentaa99@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00022.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef = aPathDef99 + "rem00043.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentab99@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00043.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #998 aPathRenta98;

     |ABRE #900;
     |ABRE #901;
     |BUCLE revalore;
     |CIERRA #900;
     |CIERRA #901;

     |ABRE #901;  |CIERRA #901;  |DESCARGA_DEF #rentab99@;
     |ABRE #900;  |CIERRA #900;  |DESCARGA_DEF #rentaa99@;
     |ABRE #998;  |CIERRA #998;  |DESCARGA_DEF #rentaa98@;
|FPRC;

|PROCESO PasaNoBolsa99;
     |SI nSwPasada = 0;
         |DDEFECTO #900;
         #900#0 = #998#0;
         #900#1 = 1;
         |LEE 040#900];
         |SI FSalida = 0;  |Y #900#0 = #998#0;
             |ACABA;
         |FINSI;
         nSwPasada = 1;
     |FINSI;

     |DDEFECTO #900;
     #900#0 = #998#0;
     #900#1 = 99;
     |LEE 040#900];
     |SI FSalida = 0;
         |LEE 040#900a;
     |SINO;
         |LEE 040#900u;
     |FINSI;

     |SI FSalida = 0; |Y #900#0 = #998#0;
         nLinea = #900#1 + 1;
     |SINO;
         nLinea = 1;
     |FINSI;

     |DDEFECTO #900;
     #900#0 = #998#0;
     #900#1 = nLinea;

     |SI #998#2 = "T";  #900#2 = "TITULAR   ";  |FINSI;
     |SI #998#2 = "C";  #900#2 = "CONYUGE   ";  |FINSI;
     |SI #998#2 = "1";  #900#2 = "1 FAMILIAR";  |FINSI;
     |SI #998#2 = "2";  #900#2 = "2 FAMILIAR";  |FINSI;
     |SI #998#2 = "3";  #900#2 = "3 FAMILIAR";  |FINSI;
     |SI #998#2 = "4";  #900#2 = "4 FAMILIAR";  |FINSI;
     |SI #998#2 = "G";  #900#2 = "GANANCIAL ";  |FINSI;
     |SI #998#2 = "V";  #900#2 = "VARIOS    ";  |FINSI;

     #900#3  = "X";
     #900#4  = 0;
     #900#5  = #998#7;
     #900#6  = #998#8;
     #900#7  = #998#9;
     #900#8  = #998#10;
     #900#9  = #998#11;
     #900#10 = #998#12;
     #900#11 = #998#45;
     #900#12 = 0;
     #900#13 = #998#5;
     #900#14 = #998#6;
     #900#16 = #998#13;
     #900#17 = #998#14;
     #900#18 = #998#15;
     #900#19 = "O";
     |SI #998#29 = "F";  #900#19 = "C";  |FINSI;

     |GRABA 020#900n;
     |LIBERA #900;

     eaPrograma = "rem00023";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|DEFBUCLE revalono;
     #998#1002;
     ;
     enEmpresa, 01;
     enEmpresa, 99;
     ;
     NULL, PasaNoBolsa99;
|FIN;

|PROCESO Mobiliario2;
     aDef = #0#0 + "/def/revalono.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentaa98@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def recapinm.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef = aPathDef99 + "rem00023.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentaa99@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00023.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #998 aPathRenta98;

     |ABRE #900;
     |BUCLE revalono;
     |CIERRA #900;

     |ABRE #900;  |CIERRA #900;  |DESCARGA_DEF #rentaa99@;
     |ABRE #998;  |CIERRA #998;  |DESCARGA_DEF #rentaa98@;
|FPRC;

|PROCESO El23;
     |SI nSwPasada = 0;
         |DDEFECTO #900;
         #900#0 = #998#0;
         #900#1 = 1;
         |LEE 040#900];
         |SI FSalida = 0;  |Y #900#0 = #998#0;
             |ACABA;
         |FINSI;
         nSwPasada = 1;
     |FINSI;

     |DDEFECTO #900;
     #900#0 = #998#0;
     #900#1 = 99;
     |LEE 040#900];
     |SI FSalida = 0;
         |LEE 040#900a;
     |SINO;
         |LEE 040#900u;
     |FINSI;

     |SI FSalida = 0; |Y #900#0 = #998#0;
         nLinea = #900#1 + 1;
     |SINO;
         nLinea = 1;
     |FINSI;

     |DDEFECTO #900;
     #900#0 = #998#0;
     #900#1 = nLinea;

     |SI #998#2 = "T";  #900#2 = "TITULAR   ";  |FINSI;
     |SI #998#2 = "C";  #900#2 = "CONYUGE   ";  |FINSI;
     |SI #998#2 = "1";  #900#2 = "1 FAMILIAR";  |FINSI;
     |SI #998#2 = "2";  #900#2 = "2 FAMILIAR";  |FINSI;
     |SI #998#2 = "3";  #900#2 = "3 FAMILIAR";  |FINSI;
     |SI #998#2 = "4";  #900#2 = "4 FAMILIAR";  |FINSI;
     |SI #998#2 = "G";  #900#2 = "GANANCIAL ";  |FINSI;
     |SI #998#2 = "V";  #900#2 = "VARIOS    ";  |FINSI;

     #900#3  = "X";
     #900#4  = 0;
     #900#5  = #998#7;
     #900#6  = #998#8;
     #900#7  = #998#9;
     #900#8  = #998#10;
     #900#9  = #998#11;
     #900#10 = #998#12;
     #900#11 = #998#29;
     #900#12 = 0;
     #900#13 = #998#5;
     #900#14 = #998#6;
     #900#16 = #998#24;
     #900#17 = #998#14;
     #900#18 = #998#15;
     |SI #998#13 = "AB";  #900#19 = "O";  |FINSI;
     |SI #998#13 = "AF";  #900#19 = "O";  |FINSI;
     |SI #998#13 = "CC";  #900#19 = "I";  |FINSI;
     |SI #998#13 = "CD";  #900#19 = "C";  |FINSI;
     |SI #998#13 = "OR";  #900#19 = "O";  |FINSI;
     |SI #998#13 = "LB";  #900#19 = "C";  |FINSI;
     |SI #998#13 = "PI";  #900#19 = "C";  |FINSI;
     |SI #998#13 = "IP";  #900#19 = "C";  |FINSI;
     |SI #998#13 = "PA";  #900#19 = "O";  |FINSI;
     |SI #998#13 = "RE";  #900#19 = "O";  |FINSI;
     |SI #998#13 = "LT";  #900#19 = "O";  |FINSI;

     |GRABA 020#900n;
     |LIBERA #900;

     eaPrograma = "rem00023";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|PROCESO El51;
     |SI nSwPasada = 0;
         |DDEFECTO #901;
         #901#0 = #998#0;
         #901#1 = 1;
         |LEE 040#901];
         |SI FSalida = 0;  |Y #901#0 = #998#0;
             |ACABA;
         |FINSI;
         nSwPasada = 1;
     |FINSI;

     |DDEFECTO #901;
     #901#0 = #998#0;
     #901#1 = 99;
     |LEE 040#901];
     |SI FSalida = 0;
         |LEE 040#901a;
     |SINO;
         |LEE 040#901u;
     |FINSI;

     |SI FSalida = 0; |Y #901#0 = #998#0;
         nLinea = #901#1 + 1;
     |SINO;
         nLinea = 1;
     |FINSI;

     |DDEFECTO #901;
     #901#0 = #998#0;
     #901#1 = nLinea;

     |SI #998#2 = "T";  #901#2 = "TITULAR   ";  |FINSI;
     |SI #998#2 = "C";  #901#2 = "CONYUGE   ";  |FINSI;
     |SI #998#2 = "1";  #901#2 = "1 FAMILIAR";  |FINSI;
     |SI #998#2 = "2";  #901#2 = "2 FAMILIAR";  |FINSI;
     |SI #998#2 = "3";  #901#2 = "3 FAMILIAR";  |FINSI;
     |SI #998#2 = "4";  #901#2 = "4 FAMILIAR";  |FINSI;
     |SI #998#2 = "G";  #901#2 = "GANANCIAL ";  |FINSI;
     |SI #998#2 = "V";  #901#2 = "VARIOS    ";  |FINSI;

     #901#3  = "X";
     #901#4  = 0;
     #901#5  = #998#7;
     #901#6  = #998#8;
     #901#7  = #998#9;
     #901#8  = #998#10;
     #901#9  = #998#11;
     #901#10 = #998#12;
     #901#11 = #998#29;
     #901#12 = 0;
     #901#13 = #998#5;
     #901#14 = #998#6;
     #901#16 = #998#24;
     #901#17 = #998#14;
     |SI #998#13 = "RV";  #901#19 = "V";  |FINSI;
     |SI #998#13 = "RT";  #901#19 = "T";  |FINSI;
     #901#20 = #998#27;

     |GRABA 020#901n;
     |LIBERA #901;

     eaPrograma = "rem00051";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|PROCESO El55;
     |SI nSwPasada = 0;
         |DDEFECTO #902;
         #902#0 = #998#0;
         #902#1 = 1;
         |LEE 040#902];
         |SI FSalida = 0;  |Y #902#0 = #998#0;
             |ACABA;
         |FINSI;
         nSwPasada = 1;
     |FINSI;

     |DDEFECTO #902;
     #902#0 = #998#0;
     #902#1 = 99;
     |LEE 040#902];
     |SI FSalida = 0;
         |LEE 040#902a;
     |SINO;
         |LEE 040#902u;
     |FINSI;

     |SI FSalida = 0; |Y #902#0 = #998#0;
         nLinea = #902#1 + 1;
     |SINO;
         nLinea = 1;
     |FINSI;

     |DDEFECTO #902;
     #902#0 = #998#0;
     #902#1 = nLinea;
     |SI #998#2 = "T";  #902#2 = "TITULAR   ";  |FINSI;
     |SI #998#2 = "C";  #902#2 = "CONYUGE   ";  |FINSI;
     |SI #998#2 = "1";  #902#2 = "1 FAMILIAR";  |FINSI;
     |SI #998#2 = "2";  #902#2 = "2 FAMILIAR";  |FINSI;
     |SI #998#2 = "3";  #902#2 = "3 FAMILIAR";  |FINSI;
     |SI #998#2 = "4";  #902#2 = "4 FAMILIAR";  |FINSI;
     |SI #998#2 = "G";  #902#2 = "GANANCIAL ";  |FINSI;
     |SI #998#2 = "V";  #902#2 = "VARIOS    ";  |FINSI;
     #902#3  = "X";
     #902#4  = 0;
     #902#5  = #998#7;
     #902#6  = #998#8;
     #902#7  = #998#9;
     #902#8  = #998#10;
     #902#9  = #998#11;
     #902#10 = #998#12;
     #902#11 = #998#29;
     #902#12 = 0;
     #902#13 = #998#5;
     #902#14 = #998#6;
     #902#16 = #998#14;
     #902#17 = #998#15;

     |GRABA 020#902n;
     |LIBERA #902;

     eaPrograma = "rem00055";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|PROCESO PasaCtasCtes99;
     |SI #998#13 = "RV";  |HAZ El51;  |FINSI;
     |SI #998#13 = "RT";  |HAZ El51;  |FINSI;
     |SI #998#13 = "SI";  |HAZ El55;  |FINSI;
     |SI #998#13 = "AB";  |HAZ El23;  |FINSI;
     |SI #998#13 = "AF";  |HAZ El23;  |FINSI;
     |SI #998#13 = "CC";  |HAZ El23;  |FINSI;
     |SI #998#13 = "CD";  |HAZ El23;  |FINSI;
     |SI #998#13 = "OR";  |HAZ El23;  |FINSI;
     |SI #998#13 = "LB";  |HAZ El23;  |FINSI;
     |SI #998#13 = "PI";  |HAZ El23;  |FINSI;
     |SI #998#13 = "IP";  |HAZ El23;  |FINSI;
     |SI #998#13 = "PA";  |HAZ El23;  |FINSI;
     |SI #998#13 = "RE";  |HAZ El23;  |FINSI;
     |SI #998#13 = "LT";  |HAZ El23;  |FINSI;
|FPRC;

|DEFBUCLE rectacor;
     #998#1002;
     ;
     enEmpresa, 01;
     enEmpresa, 99;
     ;
     NULL, PasaCtasCtes99;
|FIN;

|PROCESO Mobiliario3;
     aDef = #0#0 + "/def/rectacor.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentaa98@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def recapinm.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef = aPathDef99 + "rem00023.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentaa99@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00023.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef = aPathDef99 + "rem00051.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentab99@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00051.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef = aPathDef99 + "rem00055.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentac99@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00055.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #998 aPathRenta98;

     |ABRE #900;
     |ABRE #901;
     |ABRE #902;
     |BUCLE rectacor;
     |CIERRA #900;
     |CIERRA #901;
     |CIERRA #902;

     |ABRE #902;  |CIERRA #902;  |DESCARGA_DEF #rentac99@;
     |ABRE #901;  |CIERRA #901;  |DESCARGA_DEF #rentab99@;
     |ABRE #900;  |CIERRA #900;  |DESCARGA_DEF #rentaa99@;
     |ABRE #998;  |CIERRA #998;  |DESCARGA_DEF #rentaa98@;
|FPRC;

||컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|| DEDUCCIONES A짵 ANTERIOR
||컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

|PROCESO GrabaDeduc;
     #900#0 = #1010#0;
     #900#1 = 99;
     |LEE 040#900];
     |SI FSalida = 0;
         |LEE 040#900a;
     |SINO;
         |LEE 040#900u;
     |FINSI;

     |SI FSalida = 0; |Y #900#0 = #1010#0;
         nLinea = #900#1 + 1;
     |SINO;
         nLinea = 1;
     |FINSI;

     #200#0 = aCampo11;
     #200#1 = aCampo13;
     |LEE 040#200=;
     |SI FSalida ! 0;  |DDEFECTO #200;  |FINSI;

     |DDEFECTO #900;
     #900#0  = #1010#0;
     #900#1  = nLinea;
     #900#2  = aCampo2;
     #900#3  = aCampo3;
     #900#4  = aCampo4;
     #900#5  = aCampo5;
     #900#6  = aCampo6;
     #900#7  = aCampo7;
     #900#8  = aCampo8;
     #900#9  = aCampo9;
     #900#10 = aCampo10;
     #900#11 = #200#0;
     #900#12 = #200#2;
     #900#13 = #200#1;
     #900#14 = #200#3;
     #900#15 = #200#4;
     #900#16 = #200#5;
     #900#17 = #200#6;
     #900#21 = aCampo21;

     |SI #900#17 = 0;
         #900#18 = aCampo18;
     |SINO;
         nValor  = aCampo18;
         nValor  = (nValor * 100) / #900#17;
         #900#18 = nValor;
     |FINSI;

     |SI #900#17 = 0;
         #900#19 = #900#18;
     |SINO;
         #900#19 = (N\ #900#18 % #900#17);
     |FINSI;

     |GRABA 020#900n;
     |LIBERA #900;

     eaPrograma = "rem00045";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|PROCESO Dedu01;
     |SI #1010#2 = "T";  aCampo2 = "TITULAR   ";  |FINSI;
     |SI #1010#2 = "C";  aCampo2 = "CONYUGE   ";  |FINSI;
     |SI #1010#2 = "1";  aCampo2 = "1 FAMILIAR";  |FINSI;
     |SI #1010#2 = "2";  aCampo2 = "2 FAMILIAR";  |FINSI;
     |SI #1010#2 = "3";  aCampo2 = "3 FAMILIAR";  |FINSI;
     |SI #1010#2 = "4";  aCampo2 = "4 FAMILIAR";  |FINSI;
     |SI #1010#2 = "G";  aCampo2 = "GANANCIAL ";  |FINSI;
     |SI #1010#2 = "V";  aCampo2 = "VARIOS    ";  |FINSI;
     aCampo3  = "X";
     aCampo4  = "0";
     aCampo5  = #1010#12;
     aCampo6  = #1010#13;
     aCampo7  = #1010#14;
     aCampo8  = #1010#15;
     aCampo9  = #1010#16;
     aCampo10 = #1010#17;
     aCampo21 = #1010#6;

     |SI #1010#4 = 94;  |Y pDeduccion2 ! 0;
         aCampo11    = "1";
         aCampo13    = "1";
         |SI pDeduccion2 = 0;  |ACABA;  |FINSI;
         |SI #1010#8 = 0;      |ACABA;  |FINSI;
         |SI #1010#8 > pDeduccion2;
             aCampo18    = pDeduccion2;
             |HAZ GrabaDeduc;
             pDeduccion2 = 0;
         |SINO;
             aCampo18    = #1010#8;
             |HAZ GrabaDeduc;
             pDeduccion2 = pDeduccion2 - #1010#8;
         |FINSI;
     |FINSI;

     |SI #1010#4 = 95;  |Y pDeduccion2 ! 0;
         aCampo11    = "1";
         aCampo13    = "2";
         |SI pDeduccion2 = 0;  |ACABA;  |FINSI;
         |SI #1010#8 = 0;      |ACABA;  |FINSI;
         |SI #1010#8 > pDeduccion2;
             aCampo18    = pDeduccion2;
             |HAZ GrabaDeduc;
             pDeduccion2 = 0;
         |SINO;
             aCampo18    = #1010#8;
             |HAZ GrabaDeduc;
             pDeduccion2 = pDeduccion2 - #1010#8;
         |FINSI;
     |FINSI;

     aAlfa = #1010#6 % 101;
     |SI #1010#4 = 96;  |Y aAlfa = "*";  |Y pDeduccion3 ! 0;
         aCampo11    = "1";
         aCampo13    = "3";
         |SI pDeduccion2 = 0;  |ACABA;  |FINSI;
         |SI #1010#8 = 0;      |ACABA;  |FINSI;
         |SI #1010#8 > pDeduccion3;
             aCampo18    = pDeduccion3;
             |HAZ GrabaDeduc;
             pDeduccion3 = 0;
         |SINO;
             aCampo18    = #1010#8;
             |HAZ GrabaDeduc;
             pDeduccion3 = pDeduccion3 - #1010#8;
         |FINSI;
     |FINSI;

     |SI #1010#4 = 96;  |Y aAlfa ! "*";  |Y pDeduccion4 ! 0;
         aCampo11    = "2";
         aCampo13    = "1";
         |SI pDeduccion4 = 0;  |ACABA;  |FINSI;
         |SI #1010#8 = 0;      |ACABA;  |FINSI;
         |SI #1010#8 > pDeduccion4;
             aCampo18    = pDeduccion4;
             |HAZ GrabaDeduc;
             pDeduccion4 = 0;
         |SINO;
             aCampo18    = #1010#8;
             |HAZ GrabaDeduc;
             pDeduccion4 = pDeduccion4 - #1010#8;
         |FINSI;
     |FINSI;

     |SI #1010#4 = 97;  |Y pDeduccion5 ! 0;
         aCampo11    = "2";
         aCampo13    = "2";
         |SI pDeduccion5 = 0;  |ACABA;  |FINSI;
         |SI #1010#8 = 0;      |ACABA;  |FINSI;
         |SI #1010#8 > pDeduccion5;
             aCampo18    = pDeduccion5;
             |HAZ GrabaDeduc;
             pDeduccion5 = 0;
         |SINO;
             aCampo18    = #1010#8;
             |HAZ GrabaDeduc;
             pDeduccion5 = pDeduccion5 - #1010#8;
         |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE rededu01;
     #1010#1002;
     2;
     #998#0, 01, aTipoDecIni;
     #998#0, 99, aTipoDecFin;
     ;
     NULL, Dedu01;
|FIN;

|PROCESO Deduccion01;
     aDef = #0#0 + "/def/rededu01.mas";  |QBT aDef;
     |CARGA_DEF aDef, deduc198@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rededu01.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #1010 aPathRenta98;
     |BUCLE rededu01;

     |DESCARGA_DEF #deduc198@;
|FPRC;

|PROCESO Dedu02;
     |SI #1010#2 = "T";  aCampo2 = "TITULAR   ";  |FINSI;
     |SI #1010#2 = "C";  aCampo2 = "CONYUGE   ";  |FINSI;
     |SI #1010#2 = "1";  aCampo2 = "1 FAMILIAR";  |FINSI;
     |SI #1010#2 = "2";  aCampo2 = "2 FAMILIAR";  |FINSI;
     |SI #1010#2 = "3";  aCampo2 = "3 FAMILIAR";  |FINSI;
     |SI #1010#2 = "4";  aCampo2 = "4 FAMILIAR";  |FINSI;
     |SI #1010#2 = "G";  aCampo2 = "GANANCIAL ";  |FINSI;
     |SI #1010#2 = "V";  aCampo2 = "VARIOS    ";  |FINSI;
     aCampo3  = "X";
     aCampo4  = "0";
     aCampo5  = "0";
     aCampo6  = "0";
     aCampo7  = "0";
     aCampo8  = "0";
     aCampo9  = "0";
     aCampo10 = "0";
     aCampo21 = #1010#6;

     |SI #1010#4 = "MA";  |Y pDeduccion6 ! 0;
         aCampo11    = "3";
         aCampo13    = "1";
         |SI pDeduccion6 = 0;  |ACABA;  |FINSI;
         |SI #1010#9 = 0;      |ACABA;  |FINSI;
         |SI #1010#9 > pDeduccion6;
             aCampo18    = pDeduccion6;
             |HAZ GrabaDeduc;
             pDeduccion6 = 0;
         |SINO;
             aCampo18    = #1010#9;
             |HAZ GrabaDeduc;
             pDeduccion6 = pDeduccion6 - #1010#9;
         |FINSI;
     |FINSI;

     |SI #1010#4 = "EL";  |Y pDeduccion7 ! 0;
         aCampo11    = "3";
         aCampo13    = "2";
         |SI pDeduccion7 = 0;  |ACABA;  |FINSI;
         |SI #1010#9 = 0;      |ACABA;  |FINSI;
         |SI #1010#9 > pDeduccion7;
             aCampo18    = pDeduccion7;
             |HAZ GrabaDeduc;
             pDeduccion7 = 0;
         |SINO;
             aCampo18    = #1010#9;
             |HAZ GrabaDeduc;
             pDeduccion7 = pDeduccion7 - #1010#9;
         |FINSI;
     |FINSI;

     |SI #1010#4 = "PC";  |Y pDeduccion8 ! 0;
         aCampo11    = "3";
         aCampo13    = "3";
         |SI pDeduccion8 = 0;  |ACABA;  |FINSI;
         |SI #1010#9 = 0;      |ACABA;  |FINSI;
         |SI #1010#9 > pDeduccion8;
             aCampo18    = pDeduccion8;
             |HAZ GrabaDeduc;
             pDeduccion8 = 0;
         |SINO;
             aCampo18    = #1010#9;
             |HAZ GrabaDeduc;
             pDeduccion8 = pDeduccion8 - #1010#9;
         |FINSI;
     |FINSI;

     |SI #1010#4 = "GD";  |Y pDeduccion9 ! 0;
         aCampo11    = "3";
         aCampo13    = "9";
         |SI #1010#7 = 40;  aCampo13 = "10";  |FINSI;
         |SI pDeduccion9 = 0;  |ACABA;  |FINSI;
         |SI #1010#9 = 0;      |ACABA;  |FINSI;
         |SI #1010#9 > pDeduccion9;
             aCampo18    = pDeduccion9;
             |HAZ GrabaDeduc;
             pDeduccion9 = 0;
         |SINO;
             aCampo18    = #1010#9;
             |HAZ GrabaDeduc;
             pDeduccion9 = pDeduccion9 - #1010#9;
         |FINSI;
     |FINSI;

     |SI #1010#4 = "BI";  |Y pDeduccion10 ! 0;
         aCampo11    = "3";
         aCampo13    = "5";
         |SI pDeduccion10 = 0;  |ACABA;  |FINSI;
         |SI #1010#9 = 0;      |ACABA;  |FINSI;
         |SI #1010#9 > pDeduccion10;
             aCampo18    = pDeduccion10;
             |HAZ GrabaDeduc;
             pDeduccion10 = 0;
         |SINO;
             aCampo18    = #1010#9;
             |HAZ GrabaDeduc;
             pDeduccion10 = pDeduccion10 - #1010#9;
         |FINSI;
     |FINSI;

     |SI #1010#4 = "AE";  |Y pDeduccion11 ! 0;
         aCampo11    = "3";
         aCampo13    = "6";
         |SI pDeduccion11 = 0;  |ACABA;  |FINSI;
         |SI #1010#9 = 0;      |ACABA;  |FINSI;
         |SI #1010#9 > pDeduccion11;
             aCampo18    = pDeduccion11;
             |HAZ GrabaDeduc;
             pDeduccion11 = 0;
         |SINO;
             aCampo18    = #1010#9;
             |HAZ GrabaDeduc;
             pDeduccion11 = pDeduccion11 - #1010#9;
         |FINSI;
     |FINSI;

     |SI #1010#4 = "FP";  |Y pDeduccion12 ! 0;
         aCampo11    = "3";
         aCampo13    = "7";
         |SI #1010#7 = 10;  aCampo13 = "8";  |FINSI;
         |SI pDeduccion12 = 0;  |ACABA;  |FINSI;
         |SI #1010#9 = 0;      |ACABA;  |FINSI;
         |SI #1010#9 > pDeduccion12;
             aCampo18    = pDeduccion12;
             |HAZ GrabaDeduc;
             pDeduccion12 = 0;
         |SINO;
             aCampo18    = #1010#9;
             |HAZ GrabaDeduc;
             pDeduccion12 = pDeduccion12 - #1010#9;
         |FINSI;
     |FINSI;

     |SI #1010#4 = "CE";  |Y pDeduccion13 ! 0;
         aCampo11    = "3";
         aCampo13    = "11";
         |SI pDeduccion13 = 0;  |ACABA;  |FINSI;
         |SI #1010#9 = 0;      |ACABA;  |FINSI;
         |SI #1010#9 > pDeduccion13;
             aCampo18    = pDeduccion13;
             |HAZ GrabaDeduc;
             pDeduccion13 = 0;
         |SINO;
             aCampo18    = #1010#9;
             |HAZ GrabaDeduc;
             pDeduccion13 = pDeduccion13 - #1010#9;
         |FINSI;
     |FINSI;

     |SI #1010#4 = "AS";  |Y pDeduccion14 ! 0;
         aCampo11    = "3";
         aCampo13    = "12";
         |SI pDeduccion14 = 0;  |ACABA;  |FINSI;
         |SI #1010#9 = 0;      |ACABA;  |FINSI;
         |SI #1010#9 > pDeduccion14;
             aCampo18    = pDeduccion14;
             |HAZ GrabaDeduc;
             pDeduccion14 = 0;
         |SINO;
             aCampo18    = #1010#9;
             |HAZ GrabaDeduc;
             pDeduccion14 = pDeduccion14 - #1010#9;
         |FINSI;
     |FINSI;

     |SI #1010#4 = "SC";  |Y pDeduccion15 ! 0;
         aCampo11    = "3";
         aCampo13    = "13";
         |SI pDeduccion15 = 0;  |ACABA;  |FINSI;
         |SI #1010#9 = 0;      |ACABA;  |FINSI;
         |SI #1010#9 > pDeduccion15;
             aCampo18    = pDeduccion15;
             |HAZ GrabaDeduc;
             pDeduccion15 = 0;
         |SINO;
             aCampo18    = #1010#9;
             |HAZ GrabaDeduc;
             pDeduccion15 = pDeduccion15 - #1010#9;
         |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE rededu02;
     #1010#1002;
     2;
     #998#0, 01, aTipoDecIni;
     #998#0, 99, aTipoDecFin;
     ;
     NULL, Dedu02;
|FIN;

|PROCESO Deduccion02;
     aDef = #0#0 + "/def/rededu02.mas";  |QBT aDef;
     |CARGA_DEF aDef, deduc198@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rededu02.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #1010 aPathRenta98;
     |BUCLE rededu02;

     |DESCARGA_DEF #deduc198@;
|FPRC;

|PROCESO Dedu03;
     |SI #1010#2 = "T";  aCampo2 = "TITULAR   ";  |FINSI;
     |SI #1010#2 = "C";  aCampo2 = "CONYUGE   ";  |FINSI;
     |SI #1010#2 = "1";  aCampo2 = "1 FAMILIAR";  |FINSI;
     |SI #1010#2 = "2";  aCampo2 = "2 FAMILIAR";  |FINSI;
     |SI #1010#2 = "3";  aCampo2 = "3 FAMILIAR";  |FINSI;
     |SI #1010#2 = "4";  aCampo2 = "4 FAMILIAR";  |FINSI;
     |SI #1010#2 = "G";  aCampo2 = "GANANCIAL ";  |FINSI;
     |SI #1010#2 = "V";  aCampo2 = "VARIOS    ";  |FINSI;
     aCampo3  = "X";
     aCampo4  = #1010#12;
     aCampo5  = #1010#13;
     aCampo6  = #1010#14;
     aCampo7  = #1010#15;
     aCampo8  = #1010#16;
     aCampo9  = #1010#17;
     aCampo10 = "0";
     aCampo21 = #1010#6;

     |SI #1010#20 = 94;  |Y pDeduccion17 ! 0;
         aCampo11    = "4";
         aCampo13    = "1";
         |SI pDeduccion17 = 0;  |ACABA;  |FINSI;
         |SI #1010#9 = 0;       |ACABA;  |FINSI;
         |SI #1010#9 > pDeduccion17;
             aCampo18    = pDeduccion17;
             |HAZ GrabaDeduc;
             pDeduccion17 = 0;
         |SINO;
             aCampo18    = #1010#9;
             |HAZ GrabaDeduc;
             pDeduccion17 = pDeduccion17 - #1010#9;
         |FINSI;
     |FINSI;

     |SI #1010#20 = 95;  |Y pDeduccion17 ! 0;
         aCampo11    = "4";
         aCampo13    = "2";
         |SI pDeduccion17 = 0;  |ACABA;  |FINSI;
         |SI #1010#9 = 0;       |ACABA;  |FINSI;
         |SI #1010#9 > pDeduccion17;
             aCampo18    = pDeduccion17;
             |HAZ GrabaDeduc;
             pDeduccion17 = 0;
         |SINO;
             aCampo18    = #1010#9;
             |HAZ GrabaDeduc;
             pDeduccion17 = pDeduccion17 - #1010#9;
         |FINSI;
     |FINSI;

     |SI #1010#20 = 96;
         |SI #1010#4 = "AF";  |Y pDeduccion18 ! 0;
             aCampo11    = "4";
             aCampo13    = "3";
             |SI pDeduccion18 = 0;  |ACABA;  |FINSI;
             |SI #1010#9 = 0;       |ACABA;  |FINSI;
             |SI #1010#9 > pDeduccion18;
                 aCampo18    = pDeduccion18;
                 |HAZ GrabaDeduc;
                 pDeduccion18 = 0;
             |SINO;
                 aCampo18    = #1010#9;
                 |HAZ GrabaDeduc;
                 pDeduccion18 = pDeduccion18 - #1010#9;
             |FINSI;
         |FINSI;

         |SI #1010#4 ! "AF";  |Y pDeduccion20 ! 0;
             aCampo11    = "5";
             aCampo13    = "1";
             |SI pDeduccion20 = 0;  |ACABA;  |FINSI;
             |SI #1010#9 = 0;       |ACABA;  |FINSI;
             |SI #1010#9 > pDeduccion20;
                 aCampo18    = pDeduccion20;
                 |HAZ GrabaDeduc;
                 pDeduccion20 = 0;
             |SINO;
                 aCampo18    = #1010#9;
                 |HAZ GrabaDeduc;
                 pDeduccion20 = pDeduccion20 - #1010#9;
             |FINSI;
         |FINSI;
     |FINSI;

     |SI #1010#20 = 97;
         |SI #1010#4 = "AF";  |Y pDeduccion19 ! 0;
             aCampo11    = "4";
             aCampo13    = "4";
             |SI pDeduccion19 = 0;  |ACABA;  |FINSI;
             |SI #1010#9 = 0;       |ACABA;  |FINSI;
             |SI #1010#9 > pDeduccion19;
                 aCampo18    = pDeduccion19;
                 |HAZ GrabaDeduc;
                 pDeduccion19 = 0;
             |SINO;
                 aCampo18    = #1010#9;
                 |HAZ GrabaDeduc;
                 pDeduccion19 = pDeduccion19 - #1010#9;
             |FINSI;
         |FINSI;

         |SI #1010#4 ! "AF";  |Y pDeduccion21 ! 0;
             aCampo11    = "5";
             aCampo13    = "2";
             |SI pDeduccion21 = 0;  |ACABA;  |FINSI;
             |SI #1010#9 = 0;       |ACABA;  |FINSI;
             |SI #1010#9 > pDeduccion21;
                 aCampo18    = pDeduccion21;
                 |HAZ GrabaDeduc;
                 pDeduccion21 = 0;
             |SINO;
                 aCampo18    = #1010#9;
                 |HAZ GrabaDeduc;
                 pDeduccion21 = pDeduccion21 - #1010#9;
             |FINSI;
         |FINSI;
     |FINSI;

     |SI #1010#20 = 98;
         |SI #1010#4 = "AF";  |Y pDeduccion29 ! 0;
             aCampo11    = "4";
             aCampo13    = "5";
             |SI pDeduccion29 = 0;  |ACABA;  |FINSI;
             |SI #1010#9 = 0;       |ACABA;  |FINSI;
             |SI #1010#9 > pDeduccion29;
                 aCampo18    = pDeduccion29;
                 |HAZ GrabaDeduc;
                 pDeduccion29 = 0;
             |SINO;
                 aCampo18    = #1010#9;
                 |HAZ GrabaDeduc;
                 pDeduccion29 = pDeduccion29 - #1010#9;
             |FINSI;
         |FINSI;

         |SI #1010#4 ! "AF";  |Y nPdte98  ! 0;
             aCampo11    = "5";
             aCampo13    = "3";
             |SI nPdte98 = 0;  |ACABA;  |FINSI;
             |SI #1010#9 = 0;       |ACABA;  |FINSI;
             |SI #1010#9 > nPdte98;
                 aCampo18    = nPdte98;
                 |HAZ GrabaDeduc;
                 nPdte98 = 0;
             |SINO;
                 aCampo18    = #1010#9;
                 |HAZ GrabaDeduc;
                 nPdte98 = nPdte98 - #1010#9;
             |FINSI;
         |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE rededu03;
     #1010#1002;
     2;
     #998#0, 01, aTipoDecIni;
     #998#0, 99, aTipoDecFin;
     ;
     NULL, Dedu03;
|FIN;

|PROCESO Deduccion03;
     aDef = #0#0 + "/def/rededu03.mas";  |QBT aDef;
     |CARGA_DEF aDef, deduc198@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rededu03.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #1010 aPathRenta98;
     |BUCLE rededu03;

     |DESCARGA_DEF #deduc198@;
|FPRC;

|PROCESO Dedu04;
     |SI #1010#2 = "T";  aCampo2 = "TITULAR   ";  |FINSI;
     |SI #1010#2 = "C";  aCampo2 = "CONYUGE   ";  |FINSI;
     |SI #1010#2 = "1";  aCampo2 = "1 FAMILIAR";  |FINSI;
     |SI #1010#2 = "2";  aCampo2 = "2 FAMILIAR";  |FINSI;
     |SI #1010#2 = "3";  aCampo2 = "3 FAMILIAR";  |FINSI;
     |SI #1010#2 = "4";  aCampo2 = "4 FAMILIAR";  |FINSI;
     |SI #1010#2 = "G";  aCampo2 = "GANANCIAL ";  |FINSI;
     |SI #1010#2 = "V";  aCampo2 = "VARIOS    ";  |FINSI;
     aCampo3  = "X";
     aCampo4  = #1010#13;
     aCampo5  = #1010#14;
     aCampo6  = #1010#15;
     aCampo7  = #1010#16;
     aCampo8  = #1010#17;
     aCampo9  = #1010#18;
     aCampo10 = "0";
     aCampo21 = #1010#7;

     |SI #1010#4 = "2";  |Y pDeduccion32 ! 0;
         |SI #1010#5 = 94;
             aCampo11    = "9";
             aCampo13    = "1";
             |SI pDeduccion32 = 0;  |ACABA;  |FINSI;
             |SI #1010#10 = 0;       |ACABA;  |FINSI;
             |SI #1010#10 > pDeduccion32;
                 aCampo18    = pDeduccion32;
                 |HAZ GrabaDeduc;
                 pDeduccion32 = 0;
             |SINO;
                 aCampo18    = #1010#10;
                 |HAZ GrabaDeduc;
                 pDeduccion32 = pDeduccion32 - #1010#10;
             |FINSI;
         |FINSI;

         |SI #1010#5 = 95;  |O #1010#5 = 96;  |O #1010#5 = 97;
             aCampo11    = "9";
             aCampo13    = "2";
             |SI pDeduccion32 = 0;   |ACABA;  |FINSI;
             |SI #1010#10 = 0;       |ACABA;  |FINSI;
             |SI #1010#10 > pDeduccion32;
                 aCampo18    = pDeduccion32;
                 |HAZ GrabaDeduc;
                 pDeduccion32 = 0;
             |SINO;
                 aCampo18    = #1010#10;
                 |HAZ GrabaDeduc;
                 pDeduccion32 = pDeduccion32 - #1010#10;
             |FINSI;
         |FINSI;
     |FINSI;

     |SI #1010#4 = "2";  |Y pDeduccion33 ! 0;
         |SI #1010#5 = 98;
             aCampo11    = "9";
             aCampo13    = "2";
             |SI pDeduccion33 = 0;   |ACABA;  |FINSI;
             |SI #1010#10 = 0;       |ACABA;  |FINSI;
             |SI #1010#10 > pDeduccion33;
                 aCampo18    = pDeduccion33;
                 |HAZ GrabaDeduc;
                 pDeduccion33 = 0;
             |SINO;
                 aCampo18    = #1010#10;
                 |HAZ GrabaDeduc;
                 pDeduccion33 = pDeduccion33 - #1010#10;
             |FINSI;
         |FINSI;
     |FINSI;

     |SI #1010#4 = "1";  |Y pDeduccion35 ! 0;
         |SI #1010#5 = 94;
             aCampo11    = "10";
             aCampo13    = "1";
             |SI pDeduccion35 = 0;  |ACABA;  |FINSI;
             |SI #1010#10 = 0;       |ACABA;  |FINSI;
             |SI #1010#10 > pDeduccion35;
                 aCampo18    = pDeduccion35;
                 |HAZ GrabaDeduc;
                 pDeduccion35 = 0;
             |SINO;
                 aCampo18    = #1010#10;
                 |HAZ GrabaDeduc;
                 pDeduccion35 = pDeduccion35 - #1010#10;
             |FINSI;
         |FINSI;

         |SI #1010#5 = 95;  |O #1010#5 = 96;  |O #1010#5 = 97;
             aCampo11    = "10";
             aCampo13    = "2";
             |SI pDeduccion35 = 0;   |ACABA;  |FINSI;
             |SI #1010#10 = 0;       |ACABA;  |FINSI;
             |SI #1010#10 > pDeduccion35;
                 aCampo18    = pDeduccion35;
                 |HAZ GrabaDeduc;
                 pDeduccion35 = 0;
             |SINO;
                 aCampo18    = #1010#10;
                 |HAZ GrabaDeduc;
                 pDeduccion35 = pDeduccion35 - #1010#10;
             |FINSI;
         |FINSI;
     |FINSI;

     |SI #1010#4 = "3";  |Y pDeduccion36 ! 0;
         aCampo11    = "10";
         aCampo13    = "2";
         |SI pDeduccion36 = 0;   |ACABA;  |FINSI;
         |SI #1010#10 = 0;       |ACABA;  |FINSI;
         |SI #1010#10 > pDeduccion36;
             aCampo18    = pDeduccion36;
             |HAZ GrabaDeduc;
             pDeduccion36 = 0;
         |SINO;
             aCampo18    = #1010#10;
             |HAZ GrabaDeduc;
             pDeduccion36 = pDeduccion36 - #1010#10;
         |FINSI;
     |FINSI;

     |SI #1010#4 = "4";  |Y pDeduccion37 ! 0;
         aCampo11    = "10";
         aCampo13    = "2";
         |SI pDeduccion37 = 0;   |ACABA;  |FINSI;
         |SI #1010#10 = 0;       |ACABA;  |FINSI;
         |SI #1010#10 > pDeduccion37;
             aCampo18    = pDeduccion37;
             |HAZ GrabaDeduc;
             pDeduccion37 = 0;
         |SINO;
             aCampo18    = #1010#10;
             |HAZ GrabaDeduc;
             pDeduccion37 = pDeduccion37 - #1010#10;
         |FINSI;
     |FINSI;

     |SI #1010#4 = "5";  |Y pDeduccion38 ! 0;
         aCampo11    = "10";
         aCampo13    = "2";
         |SI pDeduccion38 = 0;   |ACABA;  |FINSI;
         |SI #1010#10 = 0;   |ACABA;  |FINSI;
         |SI #1010#10 > pDeduccion38;
             aCampo18    = pDeduccion38;
             |HAZ GrabaDeduc;
             pDeduccion38 = 0;
         |SINO;
             aCampo18    = #1010#10;
             |HAZ GrabaDeduc;
             pDeduccion38 = pDeduccion38 - #1010#10;
         |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE rededu04;
     #1010#1002;
     2;
     #998#0, 01, aTipoDecIni;
     #998#0, 99, aTipoDecFin;
     ;
     NULL, Dedu04;
|FIN;

|PROCESO Deduccion04;
     aDef = #0#0 + "/def/rededu04.mas";  |QBT aDef;
     |CARGA_DEF aDef, deduc198@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rededu04.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #1010 aPathRenta98;
     |BUCLE rededu04;

     |DESCARGA_DEF #deduc198@;
|FPRC;

|PROCESO Dedu05;
     |SI #1010#2 = "T";  aCampo2 = "TITULAR   ";  |FINSI;
     |SI #1010#2 = "C";  aCampo2 = "CONYUGE   ";  |FINSI;
     |SI #1010#2 = "1";  aCampo2 = "1 FAMILIAR";  |FINSI;
     |SI #1010#2 = "2";  aCampo2 = "2 FAMILIAR";  |FINSI;
     |SI #1010#2 = "3";  aCampo2 = "3 FAMILIAR";  |FINSI;
     |SI #1010#2 = "4";  aCampo2 = "4 FAMILIAR";  |FINSI;
     |SI #1010#2 = "G";  aCampo2 = "GANANCIAL ";  |FINSI;
     |SI #1010#2 = "V";  aCampo2 = "VARIOS    ";  |FINSI;
     aCampo3  = "X";
     aCampo4  = #1010#10;
     aCampo5  = #1010#11;
     aCampo6  = #1010#12;
     aCampo7  = #1010#13;
     aCampo8  = #1010#14;
     aCampo9  = #1010#15;
     aCampo10 = "0";
     aCampo21 = #1010#5;

     |SI #1010#4 = 94;
         aCampo11    = "11";
         aCampo13    = "1";
         |SI pDeduccion40 = 0;  |ACABA;  |FINSI;
         |SI #1010#7 = 0;       |ACABA;  |FINSI;
         |SI #1010#7 > pDeduccion40;
             aCampo18    = pDeduccion40;
             |HAZ GrabaDeduc;
             pDeduccion40 = 0;
         |SINO;
             aCampo18    = #1010#7;
             |HAZ GrabaDeduc;
             pDeduccion40 = pDeduccion40 - #1010#10;
         |FINSI;
     |FINSI;

     |SI #1010#4 = 95;
         aCampo11    = "11";
         aCampo13    = "2";
         |SI pDeduccion40 = 0;  |ACABA;  |FINSI;
         |SI #1010#7 = 0;       |ACABA;  |FINSI;
         |SI #1010#7 > pDeduccion40;
             aCampo18    = pDeduccion40;
             |HAZ GrabaDeduc;
             pDeduccion40 = 0;
         |SINO;
             aCampo18    = #1010#7;
             |HAZ GrabaDeduc;
             pDeduccion40 = pDeduccion40 - #1010#10;
         |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE rededu05;
     #1010#1002;
     2;
     #998#0, 01, aTipoDecIni;
     #998#0, 99, aTipoDecFin;
     ;
     NULL, Dedu05;
|FIN;

|PROCESO Deduccion05;
     aDef = #0#0 + "/def/rededu05.mas";  |QBT aDef;
     |CARGA_DEF aDef, deduc198@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rededu05.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #1010 aPathRenta98;
     |BUCLE rededu05;

     |DESCARGA_DEF #deduc198@;
|FPRC;

|PROCESO CargaPuntero;
     IpDeduccion = pDeduccion1 <-;
     |PARA nCampos1 = 2;  |SI nCampos1 [ 80;  |HACIENDO nCampos1 = nCampos1 + 2;
           nCampos2   = nCampos1 + 1;

           |SI #998#1 = "A";
               |SI #998nCampos1 ! 0;  |Y nCampos1 [ 30;
                   #998nCampos2 = #998nCampos1;
                   |SI #998nCampos2 > #1000#99;
                       #998nCampos2 = #1000#99;
                   |FINSI;
                   #1000#99 = #1000#99 - #998nCampos2;
               |FINSI;

               |SI #998nCampos1 ! 0;  |Y nCampos1 ] 32;  |Y nCampos1 [ 58;
                   #998nCampos2 = #998nCampos1;
                   |SI #998nCampos2 > #1000#100;
                       #998nCampos2 = #1000#100;
                   |FINSI;
                   #1000#100 = #1000#100 - #998nCampos2;
               |FINSI;

               |SI #998nCampos1 ! 0;  |Y nCampos1 ] 60;  |Y nCampos1 [ 76;
                   #998nCampos2 = #998nCampos1;
                   |SI #998nCampos2 > #1000#101;
                       #998nCampos2 = #1000#101;
                   |FINSI;
                   #1000#101 = #1000#101 - #998nCampos2;
               |FINSI;

               |SI #998nCampos1 ! 0;  |Y nCampos1 ] 78;  |Y nCampos1 [ 80;
                   #998nCampos2 = #998nCampos1;
                   |SI #998nCampos2 > #1000#102;
                       #998nCampos2 = #1000#102;
                   |FINSI;
                   #1000#102 = #1000#102 - #998nCampos2;
               |FINSI;
           |FINSI;

           pDeduccion = #998nCampos1 - #998nCampos2;
           |SI pDeduccion < 0;  pDeduccion = 0;  |FINSI;
           IpDeduccion = IpDeduccion + 1;
     |SIGUE;
|FPRC;

|PROCESO PasaDeduccion;
     |SI #999#35 = "X";  |O #998#1 ! "A";
         |SI #998#1 = "A";
             #1000#0   = #998#0;
             #1000#141 = #998#1;
             |LEE 040#1000=;
             |SI FSalida ! 0;  |DDEFECTO #1000;  |FINSI;
         |SINO;
             aTipoDecIni = #998#1;
             aTipoDecFin = #998#1;
         |FINSI;

         |HAZ CargaPuntero;

         nPendiente  = 0;
         IpDeduccion = pDeduccion2 <-;
         |PARA nCampos1 = 2;  |SI nCampos1 [ 5;  |HACIENDO nCampos1 = nCampos1 + 1;
               nPendiente = nPendiente + pDeduccion;
               IpDeduccion = IpDeduccion + 1;
         |SIGUE;
         |SI nPendiente ! 0;
             |HAZ Deduccion01;
         |FINSI;

         nPendiente  = 0;
         IpDeduccion = pDeduccion6 <-;
         |PARA nCampos1 = 6;  |SI nCampos1 [ 15;  |HACIENDO nCampos1 = nCampos1 + 1;
               nPendiente = nPendiente + pDeduccion;
               IpDeduccion = IpDeduccion + 1;
         |SIGUE;
         |SI nPendiente ! 0;
             |HAZ Deduccion02;
         |FINSI;

         nPendiente  = 0;
         nPdte98     = 0;
         IpDeduccion = pDeduccion17<-;
         |PARA nCampos1 = 17;  |SI nCampos1 [ 29;  |HACIENDO nCampos1 = nCampos1 + 1;
               nPendiente = nPendiente + pDeduccion;
               |SI nCampos1 ] 22;  |Y nCampos1 [ 28;
                   nPdte98 = nPdte98 + pDeduccion;
               |FINSI;
               IpDeduccion = IpDeduccion + 1;
         |SIGUE;
         |SI nPendiente ! 0;
             |HAZ Deduccion03;
         |FINSI;

         nPendiente  = pDeduccion32 + pDeduccion33 + pDeduccion35;
         nPdte98     = pDeduccion33 + pDeduccion36 + pDeduccion37 + pDeduccion38;
         |SI nPendiente ! 0;  |O nPdte98 ! 0;
             |HAZ Deduccion04;
         |FINSI;

         |SI pDeduccion40 ! 0;
             |HAZ Deduccion05;
         |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE retotreb;
     #998#1002;
     ;
     enEmpresa, aTipoIni;
     enEmpresa, aTipoFin;
     ;
     NULL, PasaDeduccion;
|FIN;

|PROCESO Deducciones;
     aDef = #0#0 + "/def/retotreb.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentaa98@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def retotreb.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef = #0#0 + "/def/redatcon.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentab98@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def redatcon.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef = #0#0 + "/def/retotren.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentac98@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def retotren.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef = aPathDef99 + "rem00045.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentaa99@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00045.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #998  aPathRenta98;
     |PATH_DAT #999  aPathRenta98;
     |PATH_DAT #1000 aPathRenta98;

     nSwPasada = 0;
     |ABRE #999;
     |ABRE #1000;
     |ABRE #200;
     |ABRE #900;
     #999#0 = enEmpresa;
     |SI FSalida = 0;
         aTipoIni = "1";
         aTipoFin = "T";
         |SI #999#35 = "X";
             aTipoIni    = "A";
             aTipoFin    = "A";
             aTipoDecIni = "1";
             aTipoDecFin = "T";
         |FINSI;
         |BUCLE retotreb;
     |FINSI;
     |CIERRA #999;
     |CIERRA #1000;
     |CIERRA #900;
     |CIERRA #200;

     |ABRE #900;  |CIERRA #900;   |DESCARGA_DEF #rentaa99@;
     |ABRE #1000; |CIERRA #1000;  |DESCARGA_DEF #rentac98@;
     |ABRE #999;  |CIERRA #999;   |DESCARGA_DEF #rentab98@;
     |ABRE #998;  |CIERRA #998;   |DESCARGA_DEF #rentaa98@;
|FPRC;

||컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|| PATRIMONIO
||컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

|PROCESO BorraPatrim98;
     #998#0 = #999#0;
     |SI #999nCampos1 ! "  "; |Y #999nCampos2 ! 0;
          #998#1 = #999nCampos1;
          |SI #998#1 = "E1";  #998#1 = "D1";  |FINSI;
          |SI #998#1 = "F1";  #998#1 = "E1";  |FINSI;
          |SI #998#1 = "F2";  #998#1 = "E2";  |FINSI;
          |SI #998#1 = "G1";  #998#1 = "F1";  |FINSI;
          |SI #998#1 = "G2";  #998#1 = "F2";  |FINSI;
          |SI #998#1 = "G3";  #998#1 = "F3";  |FINSI;
          |SI #998#1 = "G4";  #998#1 = "F4";  |FINSI;
          |SI #998#1 = "H1";  #998#1 = "F5";  |FINSI;
          |SI #998#1 = "H2";  #998#1 = "F6";  |FINSI;
          #998#2 = #999nCampos2;
          |LEE 101#998=;
          |SI FSalida = 0;
              |BORRA 020#998a;
              |LIBERA #998;
          |FINSI;
     |FINSI;
|FPRC;

|DEFBUCLE rentab98;
     #999#1002;
     ;
     enEmpresa, 01;
     enEmpresa, 99;
     ;
     NULL, BorraPatrim98;
|FIN;

|PROCESO BPatrimonio98;
     |PARA nConta = 1;  |SI nConta [ 11;  |HACIENDO nConta = nConta + 1;
           |SI nConta = 1;   aFichero = "reactafe";  |FINSI;
           |SI nConta = 2;   aFichero = "recapinm";  |FINSI;
           |SI nConta = 3;   aFichero = "rectacor";  |FINSI;
           |SI nConta = 4;   aFichero = "rem00014";  |FINSI;
           |SI nConta = 5;   aFichero = "rem00012";  |FINSI;
           |SI nConta = 6;   aFichero = "reempmod";  |FINSI;
           |SI nConta = 7;   aFichero = "rem00013";  |FINSI;
           |SI nConta = 8;   aFichero = "rem00010";  |FINSI;
           |SI nConta = 9;   aFichero = "rem00011";  |FINSI;
           |SI nConta = 10;  aFichero = "revalono";  |FINSI;
           |SI nConta = 11;  aFichero = "revalore";  |FINSI;

           aDef = #0#0 + "/def/" + aFichero + ".mas";  |QBT aDef;
           |CARGA_DEF aDef, rentab98@;
           |SI FSalida ! 0;
               aAlfa = "     Error en cargar el Def " + aFichero + ".mas ";
               |MENAV aAlfa;
               |ACABA;
           |FINSI;

           |PATH_DAT #999  aPathRenta98;

           |SI aFichero = "reactafe"; nCampos1 = 53;  nCampos2 = 54;  |FINSI;
           |SI aFichero = "reactafe"; nCampos1 = 56;  nCampos2 = 57;  |FINSI;
           |SI aFichero = "recapinm"; nCampos1 = 73;  nCampos2 = 74;  |FINSI;
           |SI aFichero = "rectacor"; nCampos1 = 29;  nCampos2 = 30;  |FINSI;
           |SI aFichero = "rem00014"; nCampos1 = 42;  nCampos2 = 43;  |FINSI;
           |SI aFichero = "rem00012"; nCampos1 = 46;  nCampos2 = 47;  |FINSI;
           |SI aFichero = "reempmod"; nCampos1 = 131; nCampos2 = 132; |FINSI;
           |SI aFichero = "rem00013"; nCampos1 = 47;  nCampos2 = 48;  |FINSI;
           |SI aFichero = "rem00010"; nCampos1 = 35;  nCampos2 = 36;  |FINSI;
           |SI aFichero = "rem00011"; nCampos1 = 38;  nCampos2 = 38;  |FINSI;
           |SI aFichero = "revalore"; nCampos1 = 43;  nCampos2 = 44;  |FINSI;
           |SI aFichero = "revalono"; nCampos1 = 45;  nCampos2 = 47;  |FINSI;

           |BUCLE rentab98;

           |ABRE #999;  |CIERRA #999;   |DESCARGA_DEF #rentab98@;
      |SIGUE;
|FPRC;

|PROCESO GrabaPatrim99;
     |SI nSwPasada = 0;
         |DDEFECTO #900;
         #900#0 = #998#0;

         #900#1 = 1;
         |LEE 040#900];
         |SI FSalida = 0;  |Y #900#0 = #998#0;
             |ACABA;
         |FINSI;
         nSwPasada = 1;
     |FINSI;

     eaLetra = #998#1;
     |SI #998#1 = "A1"; eaLetra = "A1"; |FINSI;
     |SI #998#1 = "B1"; eaLetra = "B1"; |FINSI;
     |SI #998#1 = "C1"; eaLetra = "C1"; |FINSI;
     |SI #998#1 = "C2"; eaLetra = "C2"; |FINSI;
     |SI #998#1 = "C3"; eaLetra = "D1"; |FINSI;
     |SI #998#1 = "D1"; eaLetra = "E1"; |FINSI;
     |SI #998#1 = "E1"; eaLetra = "F1"; |FINSI;
     |SI #998#1 = "E2"; eaLetra = "F2"; |FINSI;
     |SI #998#1 = "F1"; eaLetra = "G1"; |FINSI;
     |SI #998#1 = "F2"; eaLetra = "G2"; |FINSI;
     |SI #998#1 = "F3"; eaLetra = "G3"; |FINSI;
     |SI #998#1 = "F4"; eaLetra = "G4"; |FINSI;
     |SI #998#1 = "F5"; eaLetra = "H1"; |FINSI;
     |SI #998#1 = "F6"; eaLetra = "H2"; |FINSI;
     |SI #998#1 = "G1"; eaLetra = "I1"; |FINSI;
     |SI #998#1 = "H1"; eaLetra = "J1"; |FINSI;
     |SI #998#1 = "I1"; eaLetra = "K1"; |FINSI;
     |SI #998#1 = "J1"; eaLetra = "L1"; |FINSI;
     |SI #998#1 = "K1"; eaLetra = "M1"; |FINSI;
     |SI #998#1 = "L1"; eaLetra = "N1"; |FINSI;
     |SI #998#1 = "M1"; eaLetra = "O1"; |FINSI;
     |SI #998#1 = "N1"; eaLetra = "P1"; |FINSI;
     |SI #998#1 = "O1"; eaLetra = "Q1"; |FINSI;
     |SI #998#1 = "U1"; eaLetra = "U1"; |FINSI;
     |SI #998#1 = "V1"; eaLetra = "V1"; |FINSI;
     |SI #998#1 = "V2"; eaLetra = "V2"; |FINSI;
     |SI #998#1 = "V3"; eaLetra = "V3"; |FINSI;
     |SI #998#1 = "V4"; eaLetra = "V4"; |FINSI;

     |DDEFECTO #900;
     #900#0 = #998#0;
     #900#1 = eaLetra;
     #900#2 = #998#2;
     |SI #998#3 = "T";  #900#3 = "TITULAR   ";  |FINSI;
     |SI #998#3 = "C";  #900#3 = "CONYUGE   ";  |FINSI;
     |SI #998#3 = "1";  #900#3 = "1 FAMILIAR";  |FINSI;
     |SI #998#3 = "2";  #900#3 = "2 FAMILIAR";  |FINSI;
     |SI #998#3 = "3";  #900#3 = "3 FAMILIAR";  |FINSI;
     |SI #998#3 = "4";  #900#3 = "4 FAMILIAR";  |FINSI;
     |SI #998#3 = "G";  #900#3 = "GANANCIAL ";  |FINSI;
     |SI #998#3 = "V";  #900#3 = "VARIOS    ";  |FINSI;
     #900#4  = "";
     #900#5  = 0;
     #900#6  = #998#5;
     #900#7  = #998#6;
     #900#8  = #998#7;
     #900#9  = #998#8;
     #900#10 = #998#9;
     #900#11 = #998#10;
     #900#12 = #998#11;
     #900#13 = #998#12;
     #900#14 = #998#13;
     #900#15 = #998#14;
     #900#16 = #998#15;
     #900#17 = #998#16;
     #900#18 = #998#17;
     #900#19 = #998#18;
     |GRABA 020#900n;
     |LIBERA #900;

     eaPrograma = "rem00099";
     eaPunto    = eaLetra;
     |HAZ ProgramaActivo;
|FPRC;

|DEFBUCLE repatrim;
     #998#1003;
     ;
     enEmpresa, "  ", 01;
     enEmpresa, "zz", 99;
     ;
     NULL, GrabaPatrim99;
|FIN;

|PROCESO Patrimonio;
     aFichero = "repatrim";
     |HAZ CopiaFichero;

     aDef = #0#0 + "/def/repatrim.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentaa98@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def repatrim.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |ABRE #998;
     |HAZ BPatrimonio98;
     |CIERRA #998;

     aDef = aPathDef99 + "rem00099.mas";  |QBT aDef;
     |CARGA_DEF aDef, rentaa99@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00099.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |ABRE #900;
     |BUCLE repatrim;
     |CIERRA #900;

     |ABRE #900;  |CIERRA #900;   |DESCARGA_DEF #rentaa99@;
     |ABRE #998;  |CIERRA #998;   |DESCARGA_DEF #rentaa98@;
|FPRC;

||컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|| LECTURA INICIAL
||컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

|PROCESO Pasa99;
     aAlfa1 = #997#1;  |QBF aAlfa1;
     aAlfa  = "     Recogiendo Contribuyente [" + (("00000" + #997#0) % -105) + " " + aAlfa1 + "]";
     |MENSA aAlfa;

     nSwPasada = 0;
     enEmpresa = #997;
     |HAZ DatosPersonales;
     |SI #0#24 = "S";  |HAZ Trabajo;      |FINSI;
     |SI #0#25 = "S";  |HAZ Inmuebles;    |FINSI;

     nSwPasada = 0;
     |SI #0#26 = "S";  |HAZ Mobiliario1;  |FINSI;
     |SI #0#26 = "S";  |HAZ Mobiliario2;  |FINSI;
     |SI #0#26 = "S";  |HAZ Mobiliario3;  |FINSI;

     |SI #0#27 = "S";  |HAZ Deducciones;  |FINSI;
     |SI #0#28 = "S";  |HAZ Patrimonio;   |FINSI;
|FPRC;

|DEFBUCLE acceso98;
     #997#1001;
     ;
     #0#2;
     #0#3;
     ;
     NULL, Pasa99;
|FIN;

||컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
|| COPIA FICHEROS
||컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴

|PROCESO CopiaFichero;
     aAlfa1 = #0#0 + "/" + #0#1 + "/" + aFichero + ".dat";  |QBT aAlfa1;
     aAlfa2 = aPathRenta99 + aFichero + ".dat";
     |COPIA_FICHERO aAlfa1, aAlfa2;

     aAlfa1 = #0#0 + "/" + #0#1 + "/" + aFichero + ".ddx";  |QBT aAlfa1;
     aAlfa2 = aPathRenta99 + aFichero + ".ddx";
     |COPIA_FICHERO aAlfa1, aAlfa2;

     aAlfa1 = #0#0 + "/" + #0#1 + "/" + aFichero + ".ixx";  |QBT aAlfa1;
     aAlfa2 = aPathRenta99 + aFichero + ".ixx";
     |COPIA_FICHERO aAlfa1, aAlfa2;
|FPRC;

|PROCESO Tipo3; |TIPO 3;
     |DFICE aPathRenta99;  |QBF aPathRenta99;

     |ABRE #500;
     |LEE 040#500p;
     |SI FSalida ! 0;
         |CIERRA #500;
         aFichero = "repoblac";
         |HAZ CopiaFichero;
     |FINSI;
     |CIERRA #500;

     |ABRE #501;
     |LEE 040#501p;
     |SI FSalida ! 0;
         |CIERRA #501;
         aFichero = "rehacien";
         |HAZ CopiaFichero;
     |FINSI;
     |CIERRA #501;

     |ABRE #502;
     |LEE 040#502p;
     |SI FSalida ! 0;
         |CIERRA #502;
         aFichero = "reauxpai";
         |HAZ CopiaFichero;
     |FINSI;
     |CIERRA #502;

     |ABRE #503;
     |LEE 040#503p;
     |SI FSalida ! 0;
         |CIERRA #503;
         aFichero = "rerenpre";
         |HAZ CopiaFichero;
     |FINSI;
     |CIERRA #503;

     |ABRE #505;
     |LEE 040#505p;
     |SI FSalida ! 0;
         |CIERRA #505;
         aFichero = "reauxdiv";
         |HAZ CopiaFichero;
     |FINSI;
     |CIERRA #505;

     |ABRE #507;
     |LEE 040#507p;
     |SI FSalida ! 0;
         |CIERRA #507;
         aFichero = "reauxval";
         |HAZ CopiaFichero;
         |BUCLE reauxval;
     |FINSI;
     |CIERRA #507;

     aDef = #0#0 + "/def/reacceso.mas";  |QBT aDef;
     |CARGA_DEF aDef, acceso98@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def reacceso.mas ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aPathRenta98 = #0#0 + "/" + #0#1 + "/";  |QBT aPathRenta98;
     |PATH_DAT #997 aPathRenta98;

     |DBASE aPathDef99;
     aPathDef99 = aPathDef99 + "def/";  |QBT aPathDef99;

     |SI #0#2 ! 0;
         |BUCLE acceso98;
     |SINO;
         |PARA nCampo = 4;  |SI nCampo [ 23;  |HACIENDO nCampo = nCampo + 1;
               |SI #0nCampo ! 0;
                   #0#2 = #0nCampo;
                   #0#3 = #0nCampo;
                   |BUCLE acceso98;
               |FINSI;
         |SIGUE;
     |FINSI;

     |ABRE #997;  |CIERRA #997;  |DESCARGA_DEF #acceso98@;
|FPRC;

|PROCESO Tipo8;  |TIPO 8;
     |HAZ QueVersion;
|FPRC;
