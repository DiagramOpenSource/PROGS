|FICHEROS;
     rem00032;
     rem00045;
     rem00046;
     rem00048;
     rem00054;
     rem00065;
     rem00099;
     rem02000;

     rem00032@;
     rem00045@;
     rem00046@;
     rem00048@;
     rem00054@;
     rem00065@;
     rem00099@;
     rem01001@;
     rem01041@;
     rem01042@;
|FIN;

|INCLUYE capeac99;

|| REM00099

|PROCESO Pasa099;
     #rem00099#0 = #rem00099@#0;
     #rem00099#1 = #rem00099@#1;
     #rem00099#2 = #rem00099@#2;
     |LEE 101#rem00099.=;
     |SI FSalida = 0;
         |BORRA 020#rem00099.a;
         |LIBERA #rem00099;
     |FINSI;

     |DDEFECTO #rem00099;

     |PARA nCampoPase = 0;  |SI nCampoPase [ 23;  |HACIENDO nCampoPase = nCampoPase + 1;
           #rem00099#nCampoPase# = #rem00099@#nCampoPase#;
     |SIGUE;

     |SI eaCampo34 = "N";
         #rem00099#10 = 0;
         #rem00099#14 = 0;
         #rem00099#23 = 0;
         #rem00099#24 = 0;
     |FINSI;

     |SI #rem00099#1 = "V0";
         #rem00099#10 = 0;
         #rem00099#14 = 0;
         #rem00099#23 = 0;
         #rem00099#24 = 0;
     |FINSI;

     |GRABA 020#rem00099.n;
     |LIBERA #rem00099;

     eaPrograma = "rem00099";
     eaLetra    = #rem00099#1;
     eaPunto    = #rem00099#1;
     |HAZ ProgramaActivo;
|FPRC;

|DEFBUCLE rem00099_2015;
     #rem00099@#1003;
     4, 5;
     enEmpresa, "  ", 001, "  ", 00;
     enEmpresa, "zz", 999, "  ", 00;
     ;
     NULL, Pasa099;
|FIN;

|PROCESO  PasaM00099;
     aDef = eaCampo0 + "/def/rem00099.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00099@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00099 A¤o 2015 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #rem00099@#eaPathRen2015#;

     |ABRE #rem00099;
     |BUCLE rem00099_2015;
     |CIERRA #rem00099;

     |DESCARGA_DEF #rem00099@;
|FPRC;

|| REM00045

|PROCESO GrabaDedu;
     |SI nImporte = 0;  |ACABA;  |FINSI;

     |SELECT #3#rem02000;
     #rem02000#7 = #rem00045@#11;
     #rem02000#8 = #rem00045@#13;
     |LEE 040#rem02000.=;
     |SI FSalida ! 0;
         #rem02000#9  = 0;
         #rem02000#10 = 0;

         |SI #rem00045@#11 = 1;
                                     #rem02000#9  = 1;  #rem02000#10 = 13;
             |SI #rem00045@#13 = 1;  #rem02000#9  = 1;  #rem02000#10 = 13;  |FINSI;
             |SI #rem00045@#13 = 2;  #rem02000#9  = 1;  #rem02000#10 = 14;  |FINSI;
             |SI #rem00045@#13 = 3;  #rem02000#9  = 1;  #rem02000#10 = 15;  |FINSI;
             |SI #rem00045@#13 = 4;  #rem02000#9  = 1;  #rem02000#10 = 16;  |FINSI;
             |SI #rem00045@#13 = 5;  #rem02000#9  = 1;  #rem02000#10 = 17;  |FINSI;
         |FINSI;

         |SI #rem00045@#11 = 2;
             #rem02000#9  = 1;  #rem02000#10 = 19;

             |SI #rem00045@#13 ] 1;  |Y #rem00045@#13 [ 13;
                 #rem02000#9  = 1;  #rem02000#10 = 18;
             |FINSI;
         |FINSI;

         |SI #rem00045@#11 = 3;
             #rem02000#9 = 3;  #rem02000#10 = 5;
         |FINSI;

         |SI #rem00045@#11 = 4;
             #rem02000#9 = 4;  #rem02000#10 = 5;
         |FINSI;

         |SI #rem02000#9 = 0;  |Y #rem02000#10 = 0;
             |ACABA;
         |FINSI;
     |FINSI;

     |SI #rem01001@#2 = "TITULAR   ";
         |SI #rem00045@#2 = "CONYUGE   ";  |ACABA;  |FINSI;
         |SI #rem00045@#2 = "1 FAMILIAR";  |ACABA;  |FINSI;
         |SI #rem00045@#2 = "2 FAMILIAR";  |ACABA;  |FINSI;
         |SI #rem00045@#2 = "3 FAMILIAR";  |ACABA;  |FINSI;
         |SI #rem00045@#2 = "4 FAMILIAR";  |ACABA;  |FINSI;
     |FINSI;

     |SI #rem01001@#2 = "CONYUGE   ";
         |SI #rem00045@#2 = "TITULAR   ";  |ACABA;  |FINSI;
         |SI #rem00045@#2 = "1 FAMILIAR";  |ACABA;  |FINSI;
         |SI #rem00045@#2 = "2 FAMILIAR";  |ACABA;  |FINSI;
         |SI #rem00045@#2 = "3 FAMILIAR";  |ACABA;  |FINSI;
         |SI #rem00045@#2 = "4 FAMILIAR";  |ACABA;  |FINSI;
         |SI #rem00045@#2 = "GANANCIAL ";  |ACABA;  |FINSI;
         |SI #rem00045@#2 = "VARIOS    ";  |ACABA;  |FINSI;
     |FINSI;

     |SI #rem01001@#2 = "1 FAMILIAR";
         |SI #rem00045@#2 ! #rem01001@#2;        |ACABA;  |FINSI;
     |FINSI;

     |SI #rem01001@#2 = "2 FAMILIAR";
         |SI #rem00045@#2 ! #rem01001@#2;        |ACABA;  |FINSI;
     |FINSI;

     |SI #rem01001@#2 = "3 FAMILIAR";
         |SI #rem00045@#2 ! #rem01001@#2;        |ACABA;  |FINSI;
     |FINSI;

     |SI #rem01001@#2 = "4 FAMILIAR";
         |SI #rem00045@#2 ! #rem01001@#2;        |ACABA;  |FINSI;
     |FINSI;

     |SI #rem00045@#17 = 0;
         nCompara = #rem00045@#18;
     |SINO;
         nCompara = #rem00045@#19;
     |FINSI;

     |SELECT #1#rem02000;
     #rem02000#0 = #rem02000#9;
     #rem02000#1 = #rem02000#10;
     |LEE 040#rem02000.=;
     |SI FSalida ! 0;  |DDEFECTO #rem02000;  |FINSI;

     |SI nImporte = nCompara;
         #rem00045#0 = #rem00045@#0;
         #rem00045#1 = #rem00045@#1;
         |LEE 101#rem00045.=;
         |SI FSalida = 0;
             |BORRA 020#rem00045.a;
             |LIBERA #rem00045;
         |FINSI;

         |PARA nCampoPase = 0;  |SI nCampoPase [ 21;  |HACIENDO nCampoPase = nCampoPase + 1;
               #rem00045#nCampoPase# = #rem00045@#nCampoPase#;
         |SIGUE;
         #rem00045#3  = "X";
         |SI eaCampo37 = "N";  #rem00045#3 = #rem00045@#3;  |FINSI;

         #rem00045#11 = #rem02000#0;
         #rem00045#12 = #rem02000#2;
         #rem00045#13 = #rem02000#1;
         #rem00045#14 = #rem02000#3;
         #rem00045#15 = #rem02000#4;
         #rem00045#16 = #rem02000#5;
         #rem00045#17 = #rem02000#6;

         nImpo    = nImporte;

         |SI #rem00045#17 ! 0;
             #rem00045#18 = (N\ ((nImpo * 100) / #rem00045#17) ! 2);
             #rem00045#19 = nImpo;
         |SINO;
             #rem00045#18 = nImpo;
             #rem00045#19 = nImpo;
         |FINSI;

                              #rem00045#22 = "";
         |SI #rem00045#3  = "X";  #rem00045#22 = eaRojo;        |FINSI;

         |GRABA 020#rem00045.n;
         |LIBERA #rem00045;

         eaPrograma = "rem00045";
         eaPunto    = "";
         |HAZ ProgramaActivo;

         nImporte = 0;

         |ACABA;
     |FINSI;

     |SI nImporte < nCompara;
         #rem00045#0 = #rem00045@#0;
         #rem00045#1 = #rem00045@#1;
         |LEE 101#rem00045.=;
         |SI FSalida = 0;
             |BORRA 020#rem00045.a;
             |LIBERA #rem00045;
         |FINSI;

         |PARA nCampoPase = 0;  |SI nCampoPase [ 21;  |HACIENDO nCampoPase = nCampoPase + 1;
               #rem00045#nCampoPase# = #rem00045@#nCampoPase#;
         |SIGUE;
         #rem00045#3  = "X";
         |SI eaCampo37 = "N";  #rem00045#3 = #rem00045@#3;  |FINSI;
         #rem00045#11 = #rem02000#0;
         #rem00045#12 = #rem02000#2;
         #rem00045#13 = #rem02000#1;
         #rem00045#14 = #rem02000#3;
         #rem00045#15 = #rem02000#4;
         #rem00045#16 = #rem02000#5;
         #rem00045#17 = #rem02000#6;

         nImpo    = nImporte;

         |SI #rem00045#17 ! 0;
             #rem00045#18 = (N\ ((nImpo * 100) / #rem00045#17) ! 2);
             #rem00045#19 = nImpo;
         |SINO;
             #rem00045#18 = nImpo;
             #rem00045#19 = nImpo;
         |FINSI;

                              #rem00045#22 = "";
         |SI #rem00045#3  = "X";  #rem00045#22 = eaRojo;        |FINSI;

         |GRABA 020#rem00045.n;

         eaPrograma = "rem00045";
         eaPunto    = "";
         |HAZ ProgramaActivo;

         nImporte = 0;

         |ACABA;
     |FINSI;

     |SI nImporte > nCompara;
         #rem00045#0 = #rem00045@#0;
         #rem00045#1 = #rem00045@#1;
         |LEE 101#rem00045.=;
         |SI FSalida = 0;
             |BORRA 020#rem00045.a;
             |LIBERA #rem00045;
         |FINSI;

         |PARA nCampoPase = 0;  |SI nCampoPase [ 21;  |HACIENDO nCampoPase = nCampoPase + 1;
               #rem00045#nCampoPase# = #rem00045@#nCampoPase#;
         |SIGUE;
         #rem00045#3  = "X";
         |SI eaCampo37 = "N";  #rem00045#3 = #rem00045@#3;  |FINSI;
         #rem00045#11 = #rem02000#0;
         #rem00045#12 = #rem02000#2;
         #rem00045#13 = #rem02000#1;
         #rem00045#14 = #rem02000#3;
         #rem00045#15 = #rem02000#4;
         #rem00045#16 = #rem02000#5;
         #rem00045#17 = #rem02000#6;

         nImpo    = nCompara;

         |SI #rem00045#17 ! 0;
             #rem00045#18 = (N\ ((nImpo * 100) / #rem00045#17) ! 2);
             #rem00045#19 = nImpo;
         |SINO;
             #rem00045#18 = nImpo;
             #rem00045#19 = nImpo;
         |FINSI;

                              #rem00045#22 = "";
         |SI #rem00045#3  = "X";  #rem00045#22 = eaRojo;        |FINSI;

         |GRABA 020#rem00045.n;

         eaPrograma = "rem00045";
         eaPunto    = "";
         |HAZ ProgramaActivo;

         nImporte = nImporte - nCompara;
         |ACABA;
     |FINSI;
|FPRC;

|DEFBUCLE rem00045_2015;
     #rem00045@#1002;
     11, 13;
     #rem01042@#0, 01, nAgru, nCasi;
     #rem01042@#0, 99, nAgru, nCasi;
     ;
     NULL, GrabaDedu;
|FIN;

|PROCESO PonDedu;
     |ABRE #rem02000;
     |BUCLE rem00045_2015;
     |CIERRA #rem02000;
|FPRC;

|PROCESO rem01001_M45;
     #rem01042@#0 = #rem01001@#0;
     #rem01042@#1 = #rem01001@#1;
     #rem01042@#2 = #rem01001@#2;
     |LEE 040#rem01042@.=;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     nImporte = #rem01042@#5;
     |SI nImporte ! 0;  nAgru = 1;  nCasi = 18; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi = 17; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi = 16; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi = 15; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi = 14; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi = 13; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi = 12; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi = 11; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi = 10; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi =  9; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi =  8; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi =  7; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi =  6; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi =  5; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi =  4; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi =  3; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi =  2; |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 1;  nCasi =  1; |HAZ PonDedu;  |FINSI;

     nImporte = #rem01042@#8;
     |SI nImporte ! 0;  nAgru = 1;  nCasi = 19; |HAZ PonDedu;  |FINSI;

     nImporte = #rem01042@#11;
     |SI nImporte ! 0;  nAgru = 2;  nCasi = 1;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 2;  nCasi = 2;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 2;  nCasi = 3;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 2;  nCasi = 4;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 2;  nCasi = 5;  |HAZ PonDedu;  |FINSI;

     nImporte = #rem01042@#14;
     |SI nImporte ! 0;  nAgru = 2;  nCasi = 6;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 2;  nCasi = 7;  |HAZ PonDedu;  |FINSI;

     |SI #rem01042@#17  ! 0;  nImporte = #rem01042@#17;  nAgru = 2;  nCasi = 8;  |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#20  ! 0;  nImporte = #rem01042@#20;  nAgru = 2;  nCasi = 9;  |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#23  ! 0;  nImporte = #rem01042@#23;  nAgru = 2;  nCasi = 10; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#26  ! 0;  nImporte = #rem01042@#26;  nAgru = 2;  nCasi = 11; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#29  ! 0;  nImporte = #rem01042@#29;  nAgru = 2;  nCasi = 12; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#32  ! 0;  nImporte = #rem01042@#32;  nAgru = 2;  nCasi = 13; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#35  ! 0;  nImporte = #rem01042@#35;  nAgru = 2;  nCasi = 14; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#38  ! 0;  nImporte = #rem01042@#38;  nAgru = 2;  nCasi = 15; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#41  ! 0;  nImporte = #rem01042@#41;  nAgru = 2;  nCasi = 16; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#44  ! 0;  nImporte = #rem01042@#44;  nAgru = 2;  nCasi = 17; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#47  ! 0;  nImporte = #rem01042@#47;  nAgru = 2;  nCasi = 18; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#50  ! 0;  nImporte = #rem01042@#50;  nAgru = 2;  nCasi = 19; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#53  ! 0;  nImporte = #rem01042@#53;  nAgru = 2;  nCasi = 20; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#56  ! 0;  nImporte = #rem01042@#56;  nAgru = 2;  nCasi = 21; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#59  ! 0;  nImporte = #rem01042@#59;  nAgru = 2;  nCasi = 22; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#62  ! 0;  nImporte = #rem01042@#62;  nAgru = 2;  nCasi = 23; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#65  ! 0;  nImporte = #rem01042@#65;  nAgru = 2;  nCasi = 24; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#68  ! 0;  nImporte = #rem01042@#68;  nAgru = 2;  nCasi = 25; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#71  ! 0;  nImporte = #rem01042@#71;  nAgru = 2;  nCasi = 26; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#74  ! 0;  nImporte = #rem01042@#74;  nAgru = 2;  nCasi = 27; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#77  ! 0;  nImporte = #rem01042@#77;  nAgru = 2;  nCasi = 28; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#80  ! 0;  nImporte = #rem01042@#80;  nAgru = 2;  nCasi = 29; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#83  ! 0;  nImporte = #rem01042@#83;  nAgru = 2;  nCasi = 30; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#86  ! 0;  nImporte = #rem01042@#86;  nAgru = 2;  nCasi = 31; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#89  ! 0;  nImporte = #rem01042@#89;  nAgru = 2;  nCasi = 32; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#92  ! 0;  nImporte = #rem01042@#92;  nAgru = 2;  nCasi = 33; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#95  ! 0;  nImporte = #rem01042@#95;  nAgru = 2;  nCasi = 34; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#98  ! 0;  nImporte = #rem01042@#98;  nAgru = 2;  nCasi = 35; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#101 ! 0;  nImporte = #rem01042@#101; nAgru = 2;  nCasi = 36; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#104 ! 0;  nImporte = #rem01042@#104; nAgru = 2;  nCasi = 37; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#107 ! 0;  nImporte = #rem01042@#107; nAgru = 2;  nCasi = 38; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#110 ! 0;  nImporte = #rem01042@#110; nAgru = 2;  nCasi = 39; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#113 ! 0;  nImporte = #rem01042@#113; nAgru = 2;  nCasi = 40; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#116 ! 0;  nImporte = #rem01042@#116; nAgru = 2;  nCasi = 41; |HAZ PonDedu;  |FINSI;

     nImporte = #rem01042@#123;
     |SI nImporte ! 0;  nAgru = 3;  nCasi = 1;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 3;  nCasi = 2;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 3;  nCasi = 3;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 3;  nCasi = 4;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 3;  nCasi = 5;  |HAZ PonDedu;  |FINSI;

     nImporte = #rem01042@#126;
     |SI nImporte ! 0;  nAgru = 4;  nCasi = 1;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 4;  nCasi = 2;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 4;  nCasi = 3;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 4;  nCasi = 4;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 4;  nCasi = 5;  |HAZ PonDedu;  |FINSI;

     nImporte = #rem01042@#129;
     |SI nImporte ! 0;  nAgru = 5;  nCasi = 1;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 5;  nCasi = 2;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 5;  nCasi = 3;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 5;  nCasi = 4;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 5;  nCasi = 5;  |HAZ PonDedu;  |FINSI;

     nImporte = #rem01042@#132;
     |SI nImporte ! 0;  nAgru = 5;  nCasi = 6;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 5;  nCasi = 7;  |HAZ PonDedu;  |FINSI;

     |SI #rem01042@#135 ! 0;  nImporte = #rem01042@#135; nAgru = 5;  nCasi = 8; |HAZ PonDedu;  |FINSI;
     |SI #rem01042@#138 ! 0;  nImporte = #rem01042@#143; nAgru = 5;  nCasi = 9; |HAZ PonDedu;  |FINSI;

     |SI #rem01042@#141 ! 0;  nImporte = #rem01042@#149; nAgru = 6;  nCasi = 1;  |HAZ PonDedu;  |FINSI;

     nImporte = #rem01042@#151;
     |SI nImporte ! 0;  nAgru = 7;  nCasi = 1;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 7;  nCasi = 2;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 7;  nCasi = 3;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 7;  nCasi = 4;  |HAZ PonDedu;  |FINSI;

     nImporte = #rem01042@#155;
     |SI nImporte ! 0;  nAgru = 7;  nCasi = 5;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 7;  nCasi = 6;  |HAZ PonDedu;  |FINSI;

     nImporte = #rem01042@#159;
     |SI nImporte ! 0;  nAgru = 7;  nCasi = 7;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 7;  nCasi = 8;  |HAZ PonDedu;  |FINSI;

     nImporte = #rem01042@#163;
     |SI nImporte ! 0;  nAgru = 7;  nCasi = 9;  |HAZ PonDedu;  |FINSI;
     |SI nImporte ! 0;  nAgru = 7;  nCasi = 10; |HAZ PonDedu;  |FINSI;
|FPRC;

|DEFBUCLE rem01001_M45;
     #rem01001@#1003;
     5;
     enEmpresa, 00, "          ", "100";
     enEmpresa, 99, "zzzzzzzzzz", "101";
     ;
     NULL, rem01001_M45;
|FIN;

|PROCESO PasaM00045;
     aDef = eaCampo0 + "/def/rem01001.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem01001@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem01001 A¤o 2015 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef = eaCampo0 + "/def/rem01042.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem01042@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem01042 A¤o 2015 ";
         |MENAV aAlfa;

         |DESCARGA_DEF #rem01001@;
         |ACABA;
     |FINSI;

     aDef = eaCampo0 + "/def/rem00045.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00045@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00045 A¤o 2015 ";
         |MENAV aAlfa;

         |DESCARGA_DEF #rem01042@;
         |DESCARGA_DEF #rem01001@;
         |ACABA;
     |FINSI;

     |PATH_DAT #rem01001@#eaPathRen2015#;
     |PATH_DAT #rem01042@#eaPathRen2015#;
     |PATH_DAT #rem00045@#eaPathRen2015#;

     |ABRE #rem01042@;
     |ABRE #rem00045;
     |BUCLE rem01001_M45;
     |CIERRA #rem01042@;
     |CIERRA #rem00045;

     |DESCARGA_DEF #rem00045@;
     |DESCARGA_DEF #rem01042@;
     |DESCARGA_DEF #rem01001@;
|FPRC;

|| REM00048

|PROCESO GrabaREM00048;
     |SI nImpGraba [ 0;  |ACABA;  |FINSI;

                                       aContri = #rem01041@#2;
     |SI #rem01041@#2 = "CONJUNTA  ";  aContri = "GANANCIAL ";  |FINSI;
     |SI #rem01041@#2 = "CONJUNTAE ";  aContri = "TITULAR   ";  |FINSI;

     #rem00048#0  = #rem01041@#0;
     #rem00048#1  = 99;
     |LEE 000#rem00048.];
     |SI FSalida = 0;
         |LEE 000#rem00048.a;
     |SINO;
         |LEE 000#rem00048.u;
     |FINSI;

     nLinea = 1;
     |SI FSalida = 0;  |Y #rem00048#0 = #rem01041@#0;
         nLinea = #rem00048#1 + 1;
     |FINSI;

     |DDEFECTO #rem00048;
     #rem00048#0  = #rem01041@#0;
     #rem00048#1  = nLinea;
     #rem00048#2  = aContri;

     aAlfa    = #rem00048@#11;  |QBF aAlfa;
     aAlfa    = aAlfa + " DEL 2015";

     #rem00048#11 = aAlfa;
     #rem00048#12 = nImpGraba;
     #rem00048#13 = nPorce;
     #rem00048#14 = (N\ #rem00048#12 % nPorce);
     #rem00048#15 = #rem00048@#15;
     #rem00048#16 = #rem00048@#16;
     #rem00048#18 = #rem00048@#18;
     #rem00048#19 = #rem00048@#19;
     #rem00048#20 = #rem00048@#20;
     #rem00048#21 = #rem00048@#21;

                              #rem00048#3 = "X";
     |SI eaCampo37 = "N";  #rem00048#3 = #rem00048@#3;  |FINSI;

                              #rem00048#17 = "";
     |SI #rem00048#3  = "X";  #rem00048#17 = eaRojo;  |FINSI;

     |GRABA 020#rem00048.n;
     |LIBERA #rem00048;
|FPRC;

|PROCESO rem00048_2015;
     |SI nImporte = 0;  |ERROR10;  |ACABA;  |FINSI;

     |SI nAntes = 1;
         |SI #rem00048@#18 < "07.05.2011";  |ACABA;  |FINSI;
         |SI #rem00048@#18 > "31.12.2011";  |ACABA;  |FINSI;
     |FINSI;

     |SI nAntes = 2;
         |SI #rem00048@#18 < "01.01.2012";  |ACABA;  |FINSI;
         |SI #rem00048@#18 > "31.12.2012";  |ACABA;  |FINSI;
     |FINSI;

     |SI nAntes = 3;
         |SI #rem00048@#18 < "14.04.2010";  |ACABA;  |FINSI;
         |SI #rem00048@#18 > "31.12.2010";  |ACABA;  |FINSI;
     |FINSI;

     |SI nAntes = 4;
         |SI #rem00048@#18 < "01.01.2011";  |ACABA;  |FINSI;
         |SI #rem00048@#18 > "06.05.2011";  |ACABA;  |FINSI;
     |FINSI;

     |SI #rem01001@#2 = "TITULAR   ";
         |SI #rem00048@#2 = "CONYUGE   ";  |ACABA;  |FINSI;
         |SI #rem00048@#2 = "1 FAMILIAR";  |ACABA;  |FINSI;
         |SI #rem00048@#2 = "2 FAMILIAR";  |ACABA;  |FINSI;
         |SI #rem00048@#2 = "3 FAMILIAR";  |ACABA;  |FINSI;
         |SI #rem00048@#2 = "4 FAMILIAR";  |ACABA;  |FINSI;
     |FINSI;

     |SI #rem01001@#2 = "CONYUGE   ";
         |SI #rem00048@#2 = "TITULAR   ";  |ACABA;  |FINSI;
         |SI #rem00048@#2 = "1 FAMILIAR";  |ACABA;  |FINSI;
         |SI #rem00048@#2 = "2 FAMILIAR";  |ACABA;  |FINSI;
         |SI #rem00048@#2 = "3 FAMILIAR";  |ACABA;  |FINSI;
         |SI #rem00048@#2 = "4 FAMILIAR";  |ACABA;  |FINSI;
         |SI #rem00048@#2 = "GANANCIAL ";  |ACABA;  |FINSI;
         |SI #rem00048@#2 = "VARIOS    ";  |ACABA;  |FINSI;
     |FINSI;

     |SI #rem01001@#2 = "1 FAMILIAR";
         |SI #rem00048@#2 ! #rem01001@#2;        |ACABA;  |FINSI;
     |FINSI;

     |SI #rem01001@#2 = "2 FAMILIAR";
         |SI #rem00048@#2 ! #rem01001@#2;        |ACABA;  |FINSI;
     |FINSI;

     |SI #rem01001@#2 = "3 FAMILIAR";
         |SI #rem00048@#2 ! #rem01001@#2;        |ACABA;  |FINSI;
     |FINSI;

     |SI #rem01001@#2 = "4 FAMILIAR";
         |SI #rem00048@#2 ! #rem01001@#2;        |ACABA;  |FINSI;
     |FINSI;

     |SI #rem00048@#12 [ nImporte;
         nImpGraba = #rem00048@#12;

         nImporte  = nImporte - #rem00048@#12;
     |SINO;
         nImpGraba  = nImporte;
         nImporte   = 0;
     |FINSI;

     |HAZ GrabaREM00048;
|FPRC;

|DEFBUCLE rem00048_2015;
     #rem00048@#1002;
     16;
     #rem01041@#0, 01, 2;
     #rem01041@#0, 99, 2;
     ;
     NULL, rem00048_2015;
|FIN;

|PROCESO rem01001_M48;
     #rem01041@#0 = #rem01001@#0;
     #rem01041@#1 = #rem01001@#1;
     #rem01041@#2 = #rem01001@#2;
     |LEE 040#rem01041@.=;
     |SI FSalida ! 0;  |ACABA;  |FINSI;

     nImporte = (#rem01041@#66 - #rem01041@#67);
     |SI nImporte > 0;
         nPorce   = 20;

         nAntes   = 1;  |BUCLE rem00048_2015;
     |FINSI;

     nImporte = (#rem01041@#69 - #rem01041@#70);
     |SI nImporte > 0;
         nPorce   = 20;

         nAntes   = 2;  |BUCLE rem00048_2015;
     |FINSI;

     nImporte = #rem01041@#73 + #rem01041@#74;
     |SI nImporte > 0;
         nPorce   = 10;

         nAntes   = 3;  |BUCLE rem00048_2015;
     |FINSI;

     nImporte = #rem01041@#76 + #rem01041@#77;
     |SI nImporte > 0;
         nPorce   = 10;

         nAntes   = 4;  |BUCLE rem00048_2015;
     |FINSI;
|FPRC;

|DEFBUCLE rem01001_M48;
     #rem01001@#1003;
     5;
     enEmpresa, 00, "          ", "100";
     enEmpresa, 99, "zzzzzzzzzz", "101";
     ;
     NULL, rem01001_M48;
|FIN;

|PROCESO PasaM00048;
     aDef = eaCampo0 + "/def/rem00048.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00048@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00048 A¤o 2015 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     aDef = eaCampo0 + "/def/rem01041.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem01041@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem01041 A¤o 2015 ";
         |MENAV aAlfa;

         |DESCARGA_DEF #rem00048@;
         |ACABA;
     |FINSI;

     aDef = eaCampo0 + "/def/rem01001.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem01001@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem01001 A¤o 2015 ";
         |MENAV aAlfa;

         |DESCARGA_DEF #rem01041@;
         |DESCARGA_DEF #rem00048@;

         |ACABA;
     |FINSI;

     |PATH_DAT #rem00048@#eaPathRen2015#;
     |PATH_DAT #rem01041@#eaPathRen2015#;
     |PATH_DAT #rem01001@#eaPathRen2015#;

     |ABRE #rem01041@;
     |ABRE #rem00048;
     |BUCLE rem01001_M48;
     |CIERRA #rem00048;
     |CIERRA #rem01041@;

     |DESCARGA_DEF #rem01001@;
     |DESCARGA_DEF #rem01041@;
     |DESCARGA_DEF #rem00048@;
|FPRC;

|| REM00046

|PROCESO Pasa046;
     #rem00046#0 = #rem00046@#0;
     #rem00046#1 = #rem00046@#1;
     |LEE 101#rem00046.=;
     |SI FSalida = 0;
         |BORRA 020#rem00046.a;
         |LIBERA #rem00046;
     |FINSI;

     |DDEFECTO #rem00046;
     #rem00046#0   = #rem00046@#0;
     #rem00046#1   = #rem00046@#1;
     #rem00046#2   = #rem00046@#2;
     #rem00046#3   = "X";
     |SI eaCampo37 = "N";  #rem00046#3 = #rem00046@#3;  |FINSI;
     #rem00046#4   = 0;
     #rem00046#5   = #rem00046@#5;
     #rem00046#6   = #rem00046@#6;
     #rem00046#7   = #rem00046@#7;
     #rem00046#8   = #rem00046@#8;
     #rem00046#9   = #rem00046@#9;
     #rem00046#10  = #rem00046@#10;
     #rem00046#11  = #rem00046@#11;
     #rem00046#12  = #rem00046@#12;
     #rem00046#14  = #rem00046@#14;

                              #rem00046#16 = "";
     |SI #rem00046#3  = "X";  #rem00046#16 = eaRojo;        |FINSI;

     |GRABA 020#rem00046.n;
     |LIBERA #rem00046;

     eaPrograma = "rem00046";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|DEFBUCLE rem00046_2015;
     #rem00046@#1002;
     ;
     enEmpresa, 01;
     enEmpresa, 99;
     ;
     NULL, Pasa046;
|FIN;

|PROCESO PasaM00046;
     aDef = eaCampo0 + "/def/rem00046.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00046@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00046 A¤o 2015 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #rem00046@#eaPathRen2015#;

     |ABRE #rem00046;
     |BUCLE rem00046_2015;
     |CIERRA #rem00046;

     |DESCARGA_DEF #rem00046@;
|FPRC;

|| REM00032

|PROCESO Pasa032;
     #rem00032#0 = #rem00032@#0;
     #rem00032#1 = #rem00032@#1;

     |LEE 101#rem00032.=;
     |SI FSalida = 0;
         |BORRA 020#rem00032.a;
         |LIBERA #rem00032;
     |FINSI;

     |DDEFECTO #rem00032;
     #rem00032#0   = #rem00032@#0;
     #rem00032#1   = #rem00032@#1;
     #rem00032#2   = #rem00032@#2;
     #rem00032#3   = "X";
     |SI eaCampo37 = "N";  #rem00032#3 = #rem00032@#3;  |FINSI;
     #rem00032#4   = 0;
     #rem00032#5   = #rem00032@#5;
     #rem00032#6   = #rem00032@#6;
     #rem00032#7   = #rem00032@#7;
     #rem00032#8   = #rem00032@#8;
     #rem00032#9   = #rem00032@#9;
     #rem00032#10  = #rem00032@#10;
     #rem00032#11  = #rem00032@#11;
     #rem00032#13  = #rem00032@#13;

                          #rem00032#27 = "";
     |SI #rem00032#3  = "X";  #rem00032#27 = eaRojo;        |FINSI;

     |GRABA 020#rem00032.n;
     |LIBERA #rem00032;

     eaPrograma = "rem00032";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|DEFBUCLE rem00032_2015;
     #rem00032@#1002;
     ;
     enEmpresa, 01;
     enEmpresa, 99;
     ;
     NULL, Pasa032;
|FIN;

|PROCESO  PasaM00032;
     aDef = eaCampo0 + "/def/rem00032.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00032@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00032 A¤o 2015 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #rem00032@#eaPathRen2015#;

     |ABRE #rem00032;
     |BUCLE rem00032_2015;
     |CIERRA #rem00032;

     |DESCARGA_DEF #rem00032@;
|FPRC;

|| REM00054

|PROCESO Pasa054;
     #rem00054#0 = #rem00054@#0;
     #rem00054#1 = #rem00054@#1;
     |LEE 101#rem00054.=;
     |SI FSalida = 0;
         |BORRA 020#rem00054.a;
         |LIBERA #rem00054;
     |FINSI;

     |DDEFECTO #rem00054;
     #rem00054#0   = #rem00054@#0;
     #rem00054#1   = #rem00054@#1;
     #rem00054#2   = #rem00054@#2;
     #rem00054#3   = "X";
     |SI eaCampo37 = "N";  #rem00054#3 = #rem00054@#3;  |FINSI;
     #rem00054#4   = 0;
     #rem00054#5   = #rem00054@#5;
     #rem00054#6   = #rem00054@#6;
     #rem00054#7   = #rem00054@#7;
     #rem00054#8   = #rem00054@#8;
     #rem00054#9   = #rem00054@#9;
     #rem00054#10  = #rem00054@#10;
     #rem00054#11  = #rem00054@#11;
     #rem00054#12  = #rem00054@#12;
     #rem00054#14  = #rem00054@#14;

                          #rem00054#16 = "";
     |SI #rem00054#3  = "X";  #rem00054#16 = eaRojo;        |FINSI;

     |GRABA 020#rem00054.n;
     |LIBERA #rem00054;

     eaPrograma = "rem00054";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|DEFBUCLE rem00054_2015;
     #rem00054@#1002;
     ;
     enEmpresa, 01;
     enEmpresa, 99;
     ;
     NULL, Pasa054;
|FIN;

|PROCESO PasaM00054;
     aDef = eaCampo0 + "/def/rem00054.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00054@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00054 A¤o 2015 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #rem00054@#eaPathRen2015#;

     |ABRE #rem00054;
     |BUCLE rem00054_2015;
     |CIERRA #rem00054;

     |DESCARGA_DEF #rem00054@;
|FPRC;

|| REM00065

|PROCESO Pasa065;
     |SI #rem00065@#11 = "1";  |ACABA;  |FINSI;
     |SI #rem00065@#11 = "5";  |ACABA;  |FINSI;
     |SI #rem00065@#11 = "6";  |ACABA;  |FINSI;

     #rem00065#0 = #rem00065@#0;
     #rem00065#1 = #rem00065@#1;
     |LEE 101#rem00065.=;
     |SI FSalida = 0;
         |BORRA 020#rem00065.a;
         |LIBERA #rem00065;
     |FINSI;

     |DDEFECTO #rem00065;
     #rem00065#0   = #rem00065@#0;
     #rem00065#1   = #rem00065@#1;
     #rem00065#2   = #rem00065@#2;
     #rem00065#3   = "X";
     |SI eaCampo37 = "N";  #rem00065#3 = #rem00065@#3;  |FINSI;
     #rem00065#4   = 0;
     #rem00065#5   = #rem00065@#5;
     #rem00065#6   = #rem00065@#6;
     #rem00065#7   = #rem00065@#7;
     #rem00065#8   = #rem00065@#8;
     #rem00065#9   = #rem00065@#9;
     #rem00065#10  = #rem00065@#10;
     #rem00065#11  = #rem00065@#11;
     #rem00065#12  = #rem00065@#12;
     #rem00065#15  = #rem00065@#15;
     #rem00065#16  = #rem00065@#16;
     #rem00065#17  = #rem00065@#17;
     #rem00065#18  = #rem00065@#18;
     #rem00065#19  = #rem00065@#19;
     #rem00065#20  = #rem00065@#20;
     #rem00065#21  = #rem00065@#21;
     #rem00065#22  = #rem00065@#22;
     #rem00065#23  = #rem00065@#23;
     #rem00065#26  = #rem00065@#26;
     #rem00065#27  = #rem00065@#27;
     #rem00065#28  = #rem00065@#28;
     #rem00065#29  = #rem00065@#29;
     #rem00065#30  = #rem00065@#30;
     #rem00065#31  = #rem00065@#31;
     #rem00065#32  = #rem00065@#32;
     #rem00065#33  = #rem00065@#33;
     #rem00065#34  = #rem00065@#34;
     #rem00065#35  = #rem00065@#35;
     #rem00065#36  = #rem00065@#36;
     #rem00065#39  = #rem00065@#39;
     #rem00065#40  = #rem00065@#40;
     #rem00065#41  = #rem00065@#41;
     #rem00065#42  = #rem00065@#42;
     #rem00065#43  = #rem00065@#43;
     #rem00065#44  = #rem00065@#44;
     #rem00065#45  = #rem00065@#45;
     #rem00065#46  = #rem00065@#46;
     #rem00065#47  = #rem00065@#47;
     #rem00065#48  = #rem00065@#48;
     #rem00065#49  = #rem00065@#49;
     #rem00065#55  = #rem00065@#55;
     #rem00065#57  = #rem00065@#57;

                              #rem00065#58 = "";
     |SI #rem00065#3  = "X";  #rem00065#58 = eaRojo;        |FINSI;

     |GRABA 020#rem00065.n;
     |LIBERA #rem00065;

     eaPrograma = "rem00065";
     eaPunto    = "";
     |HAZ ProgramaActivo;
|FPRC;

|DEFBUCLE rem00065_2015;
     #rem00065@#1002;
     ;
     enEmpresa, 01;
     enEmpresa, 99;
     ;
     NULL, Pasa065;
|FIN;

|PROCESO PasaM00065;
     aDef = eaCampo0 + "/def/rem00065.mas";  |QBT aDef;
     |CARGA_DEF aDef, rem00065@;
     |SI FSalida ! 0;
         aAlfa = "     Error en cargar el Def rem00065 A¤o 2015 ";
         |MENAV aAlfa;
         |ACABA;
     |FINSI;

     |PATH_DAT #rem00065@#eaPathRen2015#;

     |ABRE #rem00065;
     |BUCLE rem00065_2015;
     |CIERRA #rem00065;

     |DESCARGA_DEF #rem00065@;
|FPRC;

|PROGRAMA;
     |SI eaCampo36 = "S";
         |HAZ PasaM00054;
         |HAZ PasaM00032;
         |HAZ PasaM00046;
     |FINSI;

     |SI eaCampo27 = "S";
         |HAZ PasaM00045;
         |HAZ PasaM00048;
         |HAZ PasaM00065;
     |FINSI;

     |SI eaCampo28 = "S";
         |HAZ PasaM00099;
     |FINSI;
|FPRO;
