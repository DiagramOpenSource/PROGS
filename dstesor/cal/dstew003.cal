|FICHEROS;
   dstew003 #10;
   dstem001 #11;
   dstem003 #12;
|FIN;

|VARIABLES;
   nCalc  = 0;
   nCampo = 0;

   fMovMayor = @;

   aMensaje  = "";
|FIN;

|PROCESO dstem003_mayor;
     |SI fMovMayor < #dstem003#14;
          fMovMayor = #dstem003#14;
          |ERROR10;
     |FINSI;
|FPRC;

|DEFBUCLE dstem003_mayor;
 #dstem003#1;
 ;
 #dstem001#0, 001, 001;
 #dstem001#0, 999, 999;
 ;
 NULL, dstem003_mayor;
|FIN;

|PROCESO MiraFecha;
  |SI #dstew003#0 < #dstem001#0;
      |MENAV "0000 Fecha Incorrecta, debe ser igual o mayor a la fecha de Apertura.";
      |ERROR;
  |SINO;
      fMovMayor = #dstem001#0;
      |BUCLE dstem003_mayor;
      |SI #dstew003#0 < fMovMayor;
           aMensaje = "0000 Fecha Incorrecta, existen movimientos de Fecha " + fMovMayor;
           |MENAV aMensaje;
           |ERROR;
      |FINSI;
  |FINSI;
|FPRC;

|PROCESO Total;

   nCalc  = 0; #dstew003#16 = 0; #dstew003#17 = 0;
   |PARA nCampo = 1; |SI nCampo [ 15; |HACIENDO nCampo = nCampo + 1;
      |SI nCampo = 1;  nCalc = 0.01; |FINSI;
      |SI nCampo = 2;  nCalc = 0.02; |FINSI;
      |SI nCampo = 3;  nCalc = 0.05; |FINSI;
      |SI nCampo = 4;  nCalc = 0.10; |FINSI;
      |SI nCampo = 5;  nCalc = 0.20; |FINSI;
      |SI nCampo = 6;  nCalc = 0.50; |FINSI;
      |SI nCampo = 7;  nCalc = 1;    |FINSI;
      |SI nCampo = 8;  nCalc = 2;    |FINSI;
      |SI nCampo = 9;  nCalc = 5;    |FINSI;
      |SI nCampo = 10; nCalc = 10;   |FINSI;
      |SI nCampo = 11; nCalc = 20;   |FINSI;
      |SI nCampo = 12; nCalc = 50;   |FINSI;
      |SI nCampo = 13; nCalc = 100;  |FINSI;
      |SI nCampo = 14; nCalc = 200;  |FINSI;
      |SI nCampo = 15; nCalc = 500;  |FINSI;
      #dstew003#16 = #dstew003#16 + (#dstew003#nCampo# * nCalc);
   |SIGUE;
   |PINTA #dstew003#16;
   #dstew003#17 = (#dstew003#19 - #dstew003#18) - #dstew003#16; |PINTA #dstew003#17;
|FPRC;
